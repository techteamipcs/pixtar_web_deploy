(self.webpackChunkpixtarAE=self.webpackChunkpixtarAE||[]).push([[179],{6540:(f,y,_)=>{"use strict";var M=_(8929),S=_(4096),T=_(4202),Y=_(6787),H=_(8117);function q(e){for(let t in e)if(e[t]===q)return t;throw Error("Could not find renamed property on target object.")}function J(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function F(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(F).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function G(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const U=q({__forward_ref__:q});function V(e){return e.__forward_ref__=V,e.toString=function(){return F(this())},e}function j(e){return K(e)?e():e}function K(e){return"function"==typeof e&&e.hasOwnProperty(U)&&e.__forward_ref__===V}function z(e){return e&&!!e.\u0275providers}const de="https://g.co/ng/security#xss";class pe extends Error{constructor(t,n){super(Ee(t,n)),this.code=t}}function Ee(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}function je(e){return"string"==typeof e?e:null==e?"":String(e)}function X(e,t){throw new pe(-201,!1)}function Nn(e,t){null==e&&function cn(e,t,n,i){throw new Error(`ASSERTION ERROR: ${e}`+(null==i?"":` [Expected=> ${n} ${i} ${t} <=Actual]`))}(t,e,null,"!=")}function Gt(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Kn(e){return{providers:e.providers||[],imports:e.imports||[]}}function bi(e){return er(e,Rs)||er(e,gs)}function er(e,t){return e.hasOwnProperty(t)?e[t]:null}function Mr(e){return e&&(e.hasOwnProperty(Cr)||e.hasOwnProperty(Zr))?e[Cr]:null}const Rs=q({\u0275prov:q}),Cr=q({\u0275inj:q}),gs=q({ngInjectableDef:q}),Zr=q({ngInjectorDef:q});var En=(()=>((En=En||{})[En.Default=0]="Default",En[En.Host=1]="Host",En[En.Self=2]="Self",En[En.SkipSelf=4]="SkipSelf",En[En.Optional=8]="Optional",En))();let wi;function or(e){const t=wi;return wi=e,t}function ar(e,t,n){const i=bi(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&En.Optional?null:void 0!==t?t:void X(F(e))}const fi=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Br={},Ln="__NG_DI_FLAG__",mi="ngTempTokenPath",zr="ngTokenPath",ts=/\n/gm,as="\u0275",ls="__source";let Cs;function co(e){const t=Cs;return Cs=e,t}function Gs(e,t=En.Default){if(void 0===Cs)throw new pe(-203,!1);return null===Cs?ar(e,void 0,t):Cs.get(e,t&En.Optional?null:void 0,t)}function Jt(e,t=En.Default){return(function Rr(){return wi}()||Gs)(j(e),t)}function Ai(e,t=En.Default){return Jt(e,Os(t))}function Os(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Pn(e){const t=[];for(let n=0;n<e.length;n++){const i=j(e[n]);if(Array.isArray(i)){if(0===i.length)throw new pe(900,!1);let r,s=En.Default;for(let o=0;o<i.length;o++){const a=i[o],l=mn(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}t.push(Jt(r,s))}else t.push(Jt(i))}return t}function Kt(e,t){return e[Ln]=t,e.prototype[Ln]=t,e}function mn(e){return e[Ln]}function ri(e){return{toString:e}.toString()}var _r=(()=>((_r=_r||{})[_r.OnPush=0]="OnPush",_r[_r.Default=1]="Default",_r))(),xi=(()=>{return(e=xi||(xi={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",xi;var e})();const Qr={},si=[],Jr=q({\u0275cmp:q}),ml=q({\u0275dir:q}),Qd=q({\u0275pipe:q}),cs=q({\u0275mod:q}),Zl=q({\u0275fac:q}),Uh=q({__NG_ELEMENT_ID__:q});let gm=0;function qi(e){return ri(()=>{const t=Gp(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===_r.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,data:e.data||{},encapsulation:e.encapsulation||xi.Emulated,id:"c"+gm++,styles:e.styles||si,_:null,schemas:e.schemas||null,tView:null};Iu(n);const i=e.dependencies;return n.directiveDefs=Ru(i,!1),n.pipeDefs=Ru(i,!0),n})}function vm(e){return Ur(e)||Io(e)}function jp(e){return null!==e}function Ki(e){return ri(()=>({type:e.type,bootstrap:e.bootstrap||si,declarations:e.declarations||si,imports:e.imports||si,exports:e.exports||si,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function cd(e,t){if(null==e)return Qr;const n={};for(const i in e)if(e.hasOwnProperty(i)){let r=e[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),n[r]=i,t&&(t[r]=s)}return n}function xn(e){return ri(()=>{const t=Gp(e);return Iu(t),t})}function Mo(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Ur(e){return e[Jr]||null}function Io(e){return e[ml]||null}function ho(e){return e[Qd]||null}function Ro(e,t){const n=e[cs]||null;if(!n&&!0===t)throw new Error(`Type ${F(e)} does not have '\u0275mod' property.`);return n}function Gp(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,exportAs:e.exportAs||null,standalone:!0===e.standalone,selectors:e.selectors||si,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:cd(e.inputs,t),outputs:cd(e.outputs)}}function Iu(e){e.features?.forEach(t=>t(e))}function Ru(e,t){if(!e)return null;const n=t?ho:vm;return()=>("function"==typeof e?e():e).map(i=>n(i)).filter(jp)}const Ja=0,Gn=1,tr=2,ks=3,el=4,Ql=5,Co=6,As=7,vs=8,hd=9,ku=10,nr=11,Vh=12,gl=13,Jd=14,ud=15,_o=16,eh=17,ko=18,vl=19,uo=20,ym=21,Ps=22,pa=1,Nu=2,nh=7,Jl=8,pd=9,Po=10;function fa(e){return Array.isArray(e)&&"object"==typeof e[pa]}function tl(e){return Array.isArray(e)&&!0===e[pa]}function Lu(e){return 0!=(4&e.flags)}function jh(e){return e.componentOffset>-1}function ec(e){return 1==(1&e.flags)}function Da(e){return!!e.template}function s0(e){return 0!=(256&e[tr])}function fd(e,t){return e.hasOwnProperty(Zl)?e[Zl]:null}class Bu{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function O(){return B}function B(e){return e.type.prototype.ngOnChanges&&(e.setInput=se),te}function te(){const e=ye(this),t=e?.current;if(t){const n=e.previous;if(n===Qr)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function se(e,t,n,i){const r=this.declaredInputs[n],s=ye(e)||function we(e,t){return e[ve]=t}(e,{previous:Qr,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new Bu(l&&l.currentValue,t,a===Qr),e[i]=t}O.ngInherit=!0;const ve="__ngSimpleChanges__";function ye(e){return e[ve]||null}const ht=function(e,t,n){};function xt(e){for(;Array.isArray(e);)e=e[Ja];return e}function Mi(e,t){return xt(t[e])}function Ti(e,t){return xt(t[e.index])}function po(e,t){return e.data[t]}function Ss(e,t){return e[t]}function ys(e,t){const n=t[e];return fa(n)?n:n[Ja]}function Wi(e){return 64==(64&e[tr])}function lr(e,t){return null==t?null:e[t]}function Ns(e){e[ko]=0}function Nc(e,t){e[Ql]+=t;let n=e,i=e[ks];for(;null!==i&&(1===t&&1===n[Ql]||-1===t&&0===n[Ql]);)i[Ql]+=t,n=i,i=i[ks]}const Ni={lFrame:tn(null),bindingsEnabled:!0};function ma(){return Ni.bindingsEnabled}function ln(){return Ni.lFrame.lView}function Dr(){return Ni.lFrame.tView}function Zn(e){return Ni.lFrame.contextLView=e,e[vs]}function ti(e){return Ni.lFrame.contextLView=null,e}function ji(){let e=sh();for(;null!==e&&64===e.type;)e=e.parent;return e}function sh(){return Ni.lFrame.currentTNode}function no(e,t){const n=Ni.lFrame;n.currentTNode=e,n.isParent=t}function Xp(){return Ni.lFrame.isParent}function Yp(){Ni.lFrame.isParent=!1}function Ws(){const e=Ni.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function tc(){return Ni.lFrame.bindingIndex++}function Ra(e){const t=Ni.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Vu(e,t){const n=Ni.lFrame;n.bindingIndex=n.bindingRootIndex=e,lh(t)}function lh(e){Ni.lFrame.currentDirectiveIndex=e}function ju(){return Ni.lFrame.currentQueryIndex}function Wh(e){Ni.lFrame.currentQueryIndex=e}function Ve(e){const t=e[Gn];return 2===t.type?t.declTNode:1===t.type?e[Co]:null}function dt(e,t,n){if(n&En.SkipSelf){let r=t,s=e;for(;!(r=r.parent,null!==r||n&En.Host||(r=Ve(s),null===r||(s=s[ud],10&r.type))););if(null===r)return!1;t=r,e=s}const i=Ni.lFrame=Vt();return i.currentTNode=t,i.lView=e,!0}function Et(e){const t=Vt(),n=e[Gn];Ni.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Vt(){const e=Ni.lFrame,t=null===e?null:e.child;return null===t?tn(e):t}function tn(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function kn(){const e=Ni.lFrame;return Ni.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Hn=kn;function oi(){const e=kn();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Me(){return Ni.lFrame.selectedIndex}function W(e){Ni.lFrame.selectedIndex=e}function ie(){const e=Ni.lFrame;return po(e.tView,e.selectedIndex)}function Xo(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){const s=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=s;o&&(e.contentHooks??(e.contentHooks=[])).push(-n,o),a&&((e.contentHooks??(e.contentHooks=[])).push(n,a),(e.contentCheckHooks??(e.contentCheckHooks=[])).push(n,a)),l&&(e.viewHooks??(e.viewHooks=[])).push(-n,l),c&&((e.viewHooks??(e.viewHooks=[])).push(n,c),(e.viewCheckHooks??(e.viewCheckHooks=[])).push(n,c)),null!=d&&(e.destroyHooks??(e.destroyHooks=[])).push(n,d)}}function qs(e,t,n){dx(e,t,3,n)}function nc(e,t,n,i){(3&e[tr])===n&&dx(e,t,n,i)}function Kp(e,t){let n=e[tr];(3&n)===t&&(n&=2047,n+=1,e[tr]=n)}function dx(e,t,n,i){const s=i??-1,o=t.length-1;let a=0;for(let l=void 0!==i?65535&e[ko]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=i&&a>=i)break}else t[l]<0&&(e[ko]+=65536),(a<s||-1==s)&&(KT(e,n,t,l),e[ko]=(4294901760&e[ko])+l+2),l++}function KT(e,t,n,i){const r=n[i]<0,s=n[i+1],a=e[r?-n[i]:n[i]];if(r){if(e[tr]>>11<e[ko]>>16&&(3&e[tr])===t){e[tr]+=2048,ht(4,a,s);try{s.call(a)}finally{ht(5,a,s)}}}else{ht(4,a,s);try{s.call(a)}finally{ht(5,a,s)}}}const Pm=-1;class f0{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function ux(e,t,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const s=n[i++],o=n[i++],a=n[i++];e.setAttribute(t,o,a,s)}else{const s=r,o=n[++i];ZC(s)?e.setProperty(t,s,o):e.setAttribute(t,s,o),i++}}return i}function KC(e){return 3===e||4===e||6===e}function ZC(e){return 64===e.charCodeAt(0)}function Hu(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?n=r:0===n||Z(e,n,r,null,-1===n||2===n?t[++i]:null)}}return e}function Z(e,t,n,i,r){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const a=e[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<e.length;){const a=e[s];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(e[s+1]=r));if(i===e[s+1])return void(e[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==i&&e.splice(s++,0,i),null!==r&&e.splice(s++,0,r)}function ne(e){return e!==Pm}function ge(e){return 32767&e}function kt(e,t){let n=function Ge(e){return e>>16}(e),i=t;for(;n>0;)i=i[ud],n--;return i}let qn=!0;function pr(e){const t=qn;return qn=e,t}const io=255,Zp=5;let px=0;const Gu={};function QC(e,t){const n=_U(e,t);if(-1!==n)return n;const i=t[Gn];i.firstCreatePass&&(e.injectorIndex=t.length,JT(i.data,e),JT(t,null),JT(i.blueprint,null));const r=eD(e,t),s=e.injectorIndex;if(ne(r)){const o=ge(r),a=kt(r,t),l=a[Gn].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=r,s}function JT(e,t){e.push(0,0,0,0,0,0,0,0,t)}function _U(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function eD(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,i=null,r=t;for(;null!==r;){if(i=SU(r),null===i)return Pm;if(n++,r=r[ud],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return Pm}function tD(e,t,n){!function hoe(e,t,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Uh)&&(i=n[Uh]),null==i&&(i=n[Uh]=px++);const r=i&io;t.data[e+(r>>Zp)]|=1<<r}(e,t,n)}function bU(e,t,n){if(n&En.Optional||void 0!==e)return e;X()}function xU(e,t,n,i){if(n&En.Optional&&void 0===i&&(i=null),!(n&(En.Self|En.Host))){const r=e[hd],s=or(void 0);try{return r?r.get(t,i,n&En.Optional):ar(t,i,n&En.Optional)}finally{or(s)}}return bU(i,0,n)}function wU(e,t,n,i=En.Default,r){if(null!==e){if(1024&t[tr]){const o=function goe(e,t,n,i,r){let s=e,o=t;for(;null!==s&&null!==o&&1024&o[tr]&&!(256&o[tr]);){const a=MU(s,o,n,i|En.Self,Gu);if(a!==Gu)return a;let l=s.parent;if(!l){const c=o[ym];if(c){const d=c.get(n,Gu,i);if(d!==Gu)return d}l=SU(o),o=o[ud]}s=l}return r}(e,t,n,i,Gu);if(o!==Gu)return o}const s=MU(e,t,n,i,Gu);if(s!==Gu)return s}return xU(t,n,i,r)}function MU(e,t,n,i,r){const s=function foe(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Uh)?e[Uh]:void 0;return"number"==typeof t?t>=0?t&io:moe:t}(n);if("function"==typeof s){if(!dt(t,e,i))return i&En.Host?bU(r,0,i):xU(t,n,i,r);try{const o=s(i);if(null!=o||i&En.Optional)return o;X()}finally{Hn()}}else if("number"==typeof s){let o=null,a=_U(e,t),l=Pm,c=i&En.Host?t[_o][Co]:null;for((-1===a||i&En.SkipSelf)&&(l=-1===a?eD(e,t):t[a+8],l!==Pm&&PU(i,!1)?(o=t[Gn],a=ge(l),t=kt(l,t)):a=-1);-1!==a;){const d=t[Gn];if(CU(s,a,d.data)){const h=poe(a,t,n,o,i,c);if(h!==Gu)return h}l=t[a+8],l!==Pm&&PU(i,t[Gn].data[a+8]===c)&&CU(s,a,t)?(o=d,a=ge(l),t=kt(l,t)):a=-1}}return r}function poe(e,t,n,i,r,s){const o=t[Gn],a=o.data[e+8],d=JC(a,o,n,null==i?jh(a)&&qn:i!=o&&0!=(3&a.type),r&En.Host&&s===a);return null!==d?m0(t,o,d,a):Gu}function JC(e,t,n,i,r){const s=e.providerIndexes,o=t.data,a=1048575&s,l=e.directiveStart,d=s>>20,u=r?a+d:e.directiveEnd;for(let p=i?a:a+d;p<u;p++){const m=o[p];if(p<l&&n===m||p>=l&&m.type===n)return p}if(r){const p=o[l];if(p&&Da(p)&&p.type===n)return l}return null}function m0(e,t,n,i){let r=e[n];const s=t.data;if(function ch(e){return e instanceof f0}(r)){const o=r;o.resolving&&function Ke(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new pe(-200,`Circular dependency in DI detected for ${e}${n}`)}(function ct(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():je(e)}(s[n]));const a=pr(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?or(o.injectImpl):null;dt(e,i,En.Default);try{r=e[n]=o.factory(void 0,s,e,i),t.firstCreatePass&&n>=i.directiveStart&&function ds(e,t,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){const o=B(t);(n.preOrderHooks??(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(e,o)}r&&(n.preOrderHooks??(n.preOrderHooks=[])).push(0-e,r),s&&((n.preOrderHooks??(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==l&&or(l),pr(a),o.resolving=!1,Hn()}}return r}function CU(e,t,n){return!!(n[t+(e>>Zp)]&1<<e)}function PU(e,t){return!(e&En.Self||e&En.Host&&t)}class C1{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return wU(this._tNode,this._lView,t,Os(i),n)}}function moe(){return new C1(ji(),ln())}function _l(e){return ri(()=>{const t=e.prototype.constructor,n=t[Zl]||nD(t),i=Object.prototype;let r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){const s=r[Zl]||nD(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function nD(e){return K(e)?()=>{const t=nD(j(e));return t&&t()}:fd(e)}function SU(e){const t=e[Gn],n=t.type;return 2===n?t.declTNode:1===n?e[Co]:null}const P1="__annotations__",S1="__parameters__",E1="__prop__metadata__";function iD(e){return function(...n){if(e){const i=e(...n);for(const r in i)this[r]=i[r]}}}function O1(e,t,n){return ri(()=>{const i=iD(t);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,d){const h=l.hasOwnProperty(S1)?l[S1]:Object.defineProperty(l,S1,{value:[]})[S1];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(o),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}function fx(e,t,n,i){return ri(()=>{const r=iD(t);function s(...o){if(this instanceof s)return r.apply(this,o),this;const a=new s(...o);return function l(c,d){const h=c.constructor,u=h.hasOwnProperty(E1)?h[E1]:Object.defineProperty(h,E1,{value:{}})[E1];u[d]=u.hasOwnProperty(d)&&u[d]||[],u[d].unshift(a),i&&i(c,d,...o)}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s})}class ui{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Gt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}class yoe{}const _oe=fx("ContentChildren",(e,t={})=>({selector:e,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:!0,...t}),yoe),rD=Function;function gx(e){return"function"==typeof e}function v0(e,t){e.forEach(n=>Array.isArray(n)?v0(n,t):t(n))}function AU(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function eP(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function vx(e,t){const n=[];for(let i=0;i<e;i++)n.push(t);return n}function gd(e,t,n){let i=A1(e,t);return i>=0?e[1|i]=n:(i=~i,function woe(e,t,n,i){let r=e.length;if(r==t)e.push(n,i);else if(1===r)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;)e[r]=e[r-2],r--;e[t]=n,e[t+1]=i}}(e,i,t,n)),i}function sD(e,t){const n=A1(e,t);if(n>=0)return e[1|n]}function A1(e,t){return function TU(e,t,n){let i=0,r=e.length>>n;for(;r!==i;){const s=i+(r-i>>1),o=e[s<<n];if(t===o)return s<<n;o>t?r=s:i=s+1}return~(r<<n)}(e,t,1)}const Moe=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,Coe=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,Poe=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Soe=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;class Ooe{constructor(t){this._reflect=t||fi.Reflect}factory(t){return(...n)=>new t(...n)}_zipTypesAndAnnotations(t,n){let i;i=vx(typeof t>"u"?n.length:t.length);for(let r=0;r<i.length;r++)i[r]=typeof t>"u"?[]:t[r]&&t[r]!=Object?[t[r]]:[],n&&null!=n[r]&&(i[r]=i[r].concat(n[r]));return i}_ownParameters(t,n){if(function Eoe(e){return Moe.test(e)||Soe.test(e)||Coe.test(e)&&!Poe.test(e)}(t.toString()))return null;if(t.parameters&&t.parameters!==n.parameters)return t.parameters;const r=t.ctorParameters;if(r&&r!==n.ctorParameters){const a="function"==typeof r?r():r,l=a.map(d=>d&&d.type),c=a.map(d=>d&&oD(d.decorators));return this._zipTypesAndAnnotations(l,c)}const s=t.hasOwnProperty(S1)&&t[S1],o=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return o||s?this._zipTypesAndAnnotations(o,s):vx(t.length)}parameters(t){if(!gx(t))return[];const n=tP(t);let i=this._ownParameters(t,n);return!i&&n!==Object&&(i=this.parameters(n)),i||[]}_ownAnnotations(t,n){if(t.annotations&&t.annotations!==n.annotations){let i=t.annotations;return"function"==typeof i&&i.annotations&&(i=i.annotations),i}return t.decorators&&t.decorators!==n.decorators?oD(t.decorators):t.hasOwnProperty(P1)?t[P1]:null}annotations(t){if(!gx(t))return[];const n=tP(t),i=this._ownAnnotations(t,n)||[];return(n!==Object?this.annotations(n):[]).concat(i)}_ownPropMetadata(t,n){if(t.propMetadata&&t.propMetadata!==n.propMetadata){let i=t.propMetadata;return"function"==typeof i&&i.propMetadata&&(i=i.propMetadata),i}if(t.propDecorators&&t.propDecorators!==n.propDecorators){const i=t.propDecorators,r={};return Object.keys(i).forEach(s=>{r[s]=oD(i[s])}),r}return t.hasOwnProperty(E1)?t[E1]:null}propMetadata(t){if(!gx(t))return{};const n=tP(t),i={};if(n!==Object){const s=this.propMetadata(n);Object.keys(s).forEach(o=>{i[o]=s[o]})}const r=this._ownPropMetadata(t,n);return r&&Object.keys(r).forEach(s=>{const o=[];i.hasOwnProperty(s)&&o.push(...i[s]),o.push(...r[s]),i[s]=o}),i}ownPropMetadata(t){return gx(t)&&this._ownPropMetadata(t,tP(t))||{}}hasLifecycleHook(t,n){return t instanceof rD&&n in t.prototype}}function oD(e){return e?e.map(t=>new(0,t.type.annotationCls)(...t.args?t.args:[])):[]}function tP(e){const t=e.prototype?Object.getPrototypeOf(e.prototype):null;return(t?t.constructor:null)||Object}const T1=Kt(O1("Inject",e=>({token:e})),-1),y0=Kt(O1("Optional"),8),aD=Kt(O1("Self"),2),D1=Kt(O1("SkipSelf"),4);let DU=null;function yx(){return DU=DU||new Ooe}var Bc=(()=>((Bc=Bc||{})[Bc.Important=1]="Important",Bc[Bc.DashCase=2]="DashCase",Bc))();const hD=new Map;let Goe=0;const pD="__ngContext__";function Il(e,t){fa(t)?(e[pD]=t[uo],function qoe(e){hD.set(e[uo],e)}(t)):e[pD]=t}let fD;function mD(e,t){return fD(e,t)}function xx(e){const t=e[ks];return tl(t)?t[ks]:t}function gD(e){return $U(e[gl])}function vD(e){return $U(e[el])}function $U(e){for(;null!==e&&!tl(e);)e=e[el];return e}function R1(e,t,n,i,r){if(null!=i){let s,o=!1;tl(i)?s=i:fa(i)&&(o=!0,i=i[Ja]);const a=xt(i);0===e&&null!==n?null==r?t6(t,n,a):_0(t,n,a,r||null,!0):1===e&&null!==n?_0(t,n,a,r||null,!0):2===e?function CD(e,t,n){const i=rP(e,t);i&&function uae(e,t,n,i){e.removeChild(t,n,i)}(e,i,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function mae(e,t,n,i,r){const s=n[nh];s!==xt(n)&&R1(t,e,i,s,r);for(let a=Po;a<n.length;a++){const l=n[a];wx(l[Gn],l,e,t,i,s)}}(t,e,s,n,r)}}function _D(e,t,n){return e.createElement(t,n)}function ZU(e,t){const n=e[pd],i=n.indexOf(t),r=t[ks];512&t[tr]&&(t[tr]&=-513,Nc(r,-1)),n.splice(i,1)}function bD(e,t){if(e.length<=Po)return;const n=Po+t,i=e[n];if(i){const r=i[eh];null!==r&&r!==e&&ZU(r,i),t>0&&(e[n-1][el]=i[el]);const s=eP(e,Po+t);!function rae(e,t){wx(e,t,t[nr],2,null,null),t[Ja]=null,t[Co]=null}(i[Gn],i);const o=s[vl];null!==o&&o.detachView(s[Gn]),i[ks]=null,i[el]=null,i[tr]&=-65}return i}function QU(e,t){if(!(128&t[tr])){const n=t[nr];n.destroyNode&&wx(e,t,n,3,null,null),function aae(e){let t=e[gl];if(!t)return xD(e[Gn],e);for(;t;){let n=null;if(fa(t))n=t[gl];else{const i=t[Po];i&&(n=i)}if(!n){for(;t&&!t[el]&&t!==e;)fa(t)&&xD(t[Gn],t),t=t[ks];null===t&&(t=e),fa(t)&&xD(t[Gn],t),n=t&&t[el]}t=n}}(t)}}function xD(e,t){if(!(128&t[tr])){t[tr]&=-65,t[tr]|=128,function hae(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let i=0;i<n.length;i+=2){const r=t[n[i]];if(!(r instanceof f0)){const s=n[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];ht(4,a,l);try{l.call(a)}finally{ht(5,a,l)}}else{ht(4,r,s);try{s.call(r)}finally{ht(5,r,s)}}}}}(e,t),function dae(e,t){const n=e.cleanup,i=t[As];let r=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?i[r=o]():i[r=-o].unsubscribe(),s+=2}else{const o=i[r=n[s+1]];n[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();t[As]=null}}(e,t),1===t[Gn].type&&t[nr].destroy();const n=t[eh];if(null!==n&&tl(t[ks])){n!==t[ks]&&ZU(n,t);const i=t[vl];null!==i&&i.detachView(e)}!function Xoe(e){hD.delete(e[uo])}(t)}}function JU(e,t,n){return function e6(e,t,n){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return n[Ja];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=e.data[i.directiveStart+r];if(s===xi.None||s===xi.Emulated)return null}return Ti(i,n)}}(e,t.parent,n)}function _0(e,t,n,i,r){e.insertBefore(t,n,i,r)}function t6(e,t,n){e.appendChild(t,n)}function n6(e,t,n,i,r){null!==i?_0(e,t,n,i,r):t6(e,t,n)}function rP(e,t){return e.parentNode(t)}function i6(e,t,n){return s6(e,t,n)}let wD,aP,ED,lP,s6=function r6(e,t,n){return 40&e.type?Ti(e,n):null};function sP(e,t,n,i){const r=JU(e,i,t),s=t[nr],a=i6(i.parent||t[Co],i,t);if(null!=r)if(Array.isArray(n))for(let l=0;l<n.length;l++)n6(s,r,n[l],a,!1);else n6(s,r,n,a,!1);void 0!==wD&&wD(s,i,t,n,r)}function oP(e,t){if(null!==t){const n=t.type;if(3&n)return Ti(t,e);if(4&n)return MD(-1,e[t.index]);if(8&n){const i=t.child;if(null!==i)return oP(e,i);{const r=e[t.index];return tl(r)?MD(-1,r):xt(r)}}if(32&n)return mD(t,e)()||xt(e[t.index]);{const i=a6(e,t);return null!==i?Array.isArray(i)?i[0]:oP(xx(e[_o]),i):oP(e,t.next)}}return null}function a6(e,t){return null!==t?e[_o][Co].projection[t.projection]:null}function MD(e,t){const n=Po+e+1;if(n<t.length){const i=t[n],r=i[Gn].firstChild;if(null!==r)return oP(i,r)}return t[nh]}function PD(e,t,n,i,r,s,o){for(;null!=n;){const a=i[n.index],l=n.type;if(o&&0===t&&(a&&Il(xt(a),i),n.flags|=2),32!=(32&n.flags))if(8&l)PD(e,t,n.child,i,r,s,!1),R1(t,e,r,a,s);else if(32&l){const c=mD(n,i);let d;for(;d=c();)R1(t,e,r,d,s);R1(t,e,r,a,s)}else 16&l?l6(e,t,i,n,r,s):R1(t,e,r,a,s);n=o?n.projectionNext:n.next}}function wx(e,t,n,i,r,s){PD(n,i,e.firstChild,t,r,s,!1)}function l6(e,t,n,i,r,s){const o=n[_o],l=o[Co].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)R1(t,e,r,l[c],s);else PD(e,t,l,o[ks],r,s,!0)}function c6(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function d6(e,t,n){const{mergedAttrs:i,classes:r,styles:s}=n;null!==i&&ux(e,t,i),null!==r&&c6(e,t,r),null!==s&&function vae(e,t,n){e.setAttribute(t,"style",n)}(e,t,s)}function k1(e){return function SD(){if(void 0===aP&&(aP=null,fi.trustedTypes))try{aP=fi.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return aP}()?.createHTML(e)||e}function OD(){if(void 0===lP&&(lP=null,fi.trustedTypes))try{lP=fi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return lP}function u6(e){return OD()?.createHTML(e)||e}function f6(e){return OD()?.createScriptURL(e)||e}class b0{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${de})`}}class wae extends b0{getTypeName(){return"HTML"}}class Mae extends b0{getTypeName(){return"Style"}}class Cae extends b0{getTypeName(){return"Script"}}class Pae extends b0{getTypeName(){return"URL"}}class Sae extends b0{getTypeName(){return"ResourceURL"}}function vd(e){return e instanceof b0?e.changingThisBreaksApplicationSecurity:e}function Wu(e,t){const n=function Eae(e){return e instanceof b0&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${de})`)}return n===t}class Rae{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const n=(new window.DOMParser).parseFromString(k1(t),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch{return null}}}class kae{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const n=this.inertDocument.createElement("template");return n.innerHTML=k1(t),n}}const Lae=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function cP(e){return(e=String(e)).match(Lae)?e:"unsafe:"+e}function Qp(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function Mx(...e){const t={};for(const n of e)for(const i in n)n.hasOwnProperty(i)&&(t[i]=!0);return t}const g6=Qp("area,br,col,hr,img,wbr"),v6=Qp("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),y6=Qp("rp,rt"),AD=Mx(g6,Mx(v6,Qp("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Mx(y6,Qp("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Mx(y6,v6)),TD=Qp("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_6=Mx(TD,Qp("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Qp("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Fae=Qp("script,style,template");class Bae{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,i=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(t){const n=t.nodeName.toLowerCase();if(!AD.hasOwnProperty(n))return this.sanitizedSomething=!0,!Fae.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const i=t.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!_6.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;TD[a]&&(l=cP(l)),this.buf.push(" ",o,'="',b6(l),'"')}return this.buf.push(">"),!0}endElement(t){const n=t.nodeName.toLowerCase();AD.hasOwnProperty(n)&&!g6.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(b6(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}}const zae=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Uae=/([^\#-~ |!])/g;function b6(e){return e.replace(/&/g,"&amp;").replace(zae,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Uae,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let dP;function x6(e,t){let n=null;try{dP=dP||function m6(e){const t=new kae(e);return function Nae(){try{return!!(new window.DOMParser).parseFromString(k1(""),"text/html")}catch{return!1}}()?new Rae(t):t}(e);let i=t?String(t):"";n=dP.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=dP.getInertBodyElement(i)}while(i!==s);return k1((new Bae).sanitizeChildren(DD(n)||n))}finally{if(n){const i=DD(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function DD(e){return"content"in e&&function Vae(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var ro=(()=>((ro=ro||{})[ro.NONE=0]="NONE",ro[ro.HTML=1]="HTML",ro[ro.STYLE=2]="STYLE",ro[ro.SCRIPT=3]="SCRIPT",ro[ro.URL=4]="URL",ro[ro.RESOURCE_URL=5]="RESOURCE_URL",ro))();function yd(e){const t=Cx();return t?u6(t.sanitize(ro.HTML,e)||""):Wu(e,"HTML")?u6(vd(e)):x6(function h6(){return void 0!==ED?ED:typeof document<"u"?document:void 0}(),je(e))}function De(e){const t=Cx();return t?t.sanitize(ro.URL,e)||"":Wu(e,"URL")?vd(e):cP(je(e))}function w6(e){const t=Cx();if(t)return f6(t.sanitize(ro.RESOURCE_URL,e)||"");if(Wu(e,"ResourceURL"))return f6(vd(e));throw new pe(904,!1)}function Cx(){const e=ln();return e&&e[Vh]}const hP=new ui("ENVIRONMENT_INITIALIZER"),C6=new ui("INJECTOR",-1),P6=new ui("INJECTOR_DEF_TYPES");class S6{get(t,n=Br){if(n===Br){const i=new Error(`NullInjectorError: No provider for ${F(t)}!`);throw i.name="NullInjectorError",i}return n}}function Yae(...e){return{\u0275providers:E6(0,e),\u0275fromNgModule:!0}}function E6(e,...t){const n=[],i=new Set;let r;return v0(t,s=>{const o=s;ID(o,n,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&O6(r,n),n}function O6(e,t){for(let n=0;n<e.length;n++){const{providers:r}=e[n];RD(r,s=>{t.push(s)})}}function ID(e,t,n,i){if(!(e=j(e)))return!1;let r=null,s=Mr(e);const o=!s&&Ur(e);if(s||o){if(o&&!o.standalone)return!1;r=e}else{const l=e.ngModule;if(s=Mr(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)ID(c,t,n,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{v0(s.imports,d=>{ID(d,t,n,i)&&(c||(c=[]),c.push(d))})}finally{}void 0!==c&&O6(c,t)}if(!a){const c=fd(r)||(()=>new r);t.push({provide:r,useFactory:c,deps:si},{provide:P6,useValue:r,multi:!0},{provide:hP,useValue:()=>Jt(r),multi:!0})}const l=s.providers;null==l||a||RD(l,d=>{t.push(d)})}}return r!==e&&void 0!==e.providers}function RD(e,t){for(let n of e)z(n)&&(n=n.\u0275providers),Array.isArray(n)?RD(n,t):t(n)}const $ae=q({provide:String,useValue:q});function kD(e){return null!==e&&"object"==typeof e&&$ae in e}function x0(e){return"function"==typeof e}const ND=new ui("Set Injector scope."),uP={},Zae={};let LD;function pP(){return void 0===LD&&(LD=new S6),LD}class qu{}class D6 extends qu{get destroyed(){return this._destroyed}constructor(t,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,BD(t,o=>this.processProvider(o)),this.records.set(C6,N1(void 0,this)),r.has("environment")&&this.records.set(qu,N1(void 0,this));const s=this.records.get(ND);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(P6.multi,si,En.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=co(this),i=or(void 0);try{return t()}finally{co(n),or(i)}}get(t,n=Br,i=En.Default){this.assertNotDestroyed(),i=Os(i);const r=co(this),s=or(void 0);try{if(!(i&En.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function nle(e){return"function"==typeof e||"object"==typeof e&&e instanceof ui}(t)&&bi(t);a=l&&this.injectableDefInScope(l)?N1(FD(t),uP):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(i&En.Self?pP():this.parent).get(t,n=i&En.Optional&&n===Br?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[mi]=o[mi]||[]).unshift(F(t)),r)throw o;return function Mn(e,t,n,i){const r=e[mi];throw t[ls]&&r.unshift(t[ls]),e.message=function An(e,t,n,i=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==as?e.slice(2):e;let r=F(t);if(Array.isArray(t))r=t.map(F).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):F(a)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${e.replace(ts,"\n  ")}`}("\n"+e.message,r,n,i),e[zr]=r,e[mi]=null,e}(o,t,"R3InjectorError",this.source)}throw o}finally{or(s),co(r)}}resolveInjectorInitializers(){const t=co(this),n=or(void 0);try{const i=this.get(hP.multi,si,En.Self);for(const r of i)r()}finally{co(t),or(n)}}toString(){const t=[],n=this.records;for(const i of n.keys())t.push(F(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(t){let n=x0(t=j(t))?t:j(t&&t.provide);const i=function Jae(e){return kD(e)?N1(void 0,e.useValue):N1(I6(e),uP)}(t);if(x0(t)||!0!==t.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=N1(void 0,uP,!0),r.factory=()=>Pn(r.multi),this.records.set(n,r)),n=t,r.multi.push(t)}this.records.set(n,i)}hydrate(t,n){return n.value===uP&&(n.value=Zae,n.value=n.factory()),"object"==typeof n.value&&n.value&&function tle(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=j(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function FD(e){const t=bi(e),n=null!==t?t.factory:fd(e);if(null!==n)return n;if(e instanceof ui)throw new pe(204,!1);if(e instanceof Function)return function Qae(e){const t=e.length;if(t>0)throw vx(t,"?"),new pe(204,!1);const n=function Si(e){return e&&(e[Rs]||e[gs])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new pe(204,!1)}function I6(e,t,n){let i;if(x0(e)){const r=j(e);return fd(r)||FD(r)}if(kD(e))i=()=>j(e.useValue);else if(function T6(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...Pn(e.deps||[]));else if(function A6(e){return!(!e||!e.useExisting)}(e))i=()=>Jt(j(e.useExisting));else{const r=j(e&&(e.useClass||e.provide));if(!function ele(e){return!!e.deps}(e))return fd(r)||FD(r);i=()=>new r(...Pn(e.deps))}return i}function N1(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function BD(e,t){for(const n of e)Array.isArray(n)?BD(n,t):n&&z(n)?BD(n.\u0275providers,t):t(n)}class ile{}class R6{}class sle{resolveComponentFactory(t){throw function rle(e){const t=Error(`No component factory found for ${F(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let L1=(()=>{class e{}return e.NULL=new sle,e})();function ole(){return F1(ji(),ln())}function F1(e,t){return new Ts(Ti(e,t))}let Ts=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=ole,e})();function ale(e){return e instanceof Ts?e.nativeElement:e}class B1{}let ga=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function lle(){const e=ln(),n=ys(ji().index,e);return(fa(n)?n:e)[nr]}(),e})(),cle=(()=>{class e{}return e.\u0275prov=Gt({token:e,providedIn:"root",factory:()=>null}),e})();class Px{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const dle=new Px("15.2.10"),zD={},UD="ngOriginalError";function VD(e){return e[UD]}class w0{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&VD(t);for(;n&&VD(n);)n=VD(n);return n||null}}function Sm(e){return e.ownerDocument.defaultView}function M0(e){return e.ownerDocument}function Jp(e){return e instanceof Function?e():e}function L6(e,t,n){let i=e.length;for(;;){const r=e.indexOf(t,n);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){const s=t.length;if(r+s===i||e.charCodeAt(r+s)<=32)return r}n=r+1}}const F6="ng-template";function _le(e,t,n){let i=0,r=!0;for(;i<e.length;){let s=e[i++];if("string"==typeof s&&r){const o=e[i++];if(n&&"class"===s&&-1!==L6(o.toLowerCase(),t,0))return!0}else{if(1===s){for(;i<e.length&&"string"==typeof(s=e[i++]);)if(s.toLowerCase()===t)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function B6(e){return 4===e.type&&e.value!==F6}function ble(e,t,n){return t===(4!==e.type||n?e.value:F6)}function xle(e,t,n){let i=4;const r=e.attrs||[],s=function Cle(e){for(let t=0;t<e.length;t++)if(KC(e[t]))return t;return e.length}(r);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!ble(e,l,n)||""===l&&1===t.length){if(qh(i))return!1;o=!0}}else{const c=8&i?l:t[++a];if(8&i&&null!==e.attrs){if(!_le(e.attrs,c,n)){if(qh(i))return!1;o=!0}continue}const h=wle(8&i?"class":l,r,B6(e),n);if(-1===h){if(qh(i))return!1;o=!0;continue}if(""!==c){let u;u=h>s?"":r[h+1].toLowerCase();const p=8&i?u:null;if(p&&-1!==L6(p,c,0)||2&i&&c!==u){if(qh(i))return!1;o=!0}}}}else{if(!o&&!qh(i)&&!qh(l))return!1;if(o&&qh(l))continue;o=!1,i=l|1&i}}return qh(i)||o}function qh(e){return 0==(1&e)}function wle(e,t,n,i){if(null===t)return-1;let r=0;if(i||!n){let s=!1;for(;r<t.length;){const o=t[r];if(o===e)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Ple(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const i=e[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,e)}function z6(e,t,n=!1){for(let i=0;i<t.length;i++)if(xle(e,t[i],n))return!0;return!1}function Sle(e,t){e:for(let n=0;n<t.length;n++){const i=t[n];if(e.length===i.length){for(let r=0;r<e.length;r++)if(e[r]!==i[r])continue e;return!0}}return!1}function U6(e,t){return e?":not("+t.trim()+")":t}function Ele(e){let t=e[0],n=1,i=2,r="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&i){const a=e[++n];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!qh(o)&&(t+=U6(s,r),r=""),i=o,s=s||!qh(i);n++}return""!==r&&(t+=U6(s,r)),t}const vr={};function ce(e){V6(Dr(),ln(),Me()+e,!1)}function V6(e,t,n,i){if(!i)if(3==(3&t[tr])){const s=e.preOrderCheckHooks;null!==s&&qs(t,s,n)}else{const s=e.preOrderHooks;null!==s&&nc(t,s,0,n)}W(n)}function W6(e,t=null,n=null,i){const r=q6(e,t,n,i);return r.resolveInjectorInitializers(),r}function q6(e,t=null,n=null,i,r=new Set){const s=[n||si,Yae(e)];return i=i||("object"==typeof e?void 0:F(e)),new D6(s,t||pP(),i||null,r)}let Rl=(()=>{class e{static create(n,i){if(Array.isArray(n))return W6({name:""},i,n,"");{const r=n.name??"";return W6({name:r},n.parent,n.providers,r)}}}return e.THROW_IF_NOT_FOUND=Br,e.NULL=new S6,e.\u0275prov=Gt({token:e,providedIn:"any",factory:()=>Jt(C6)}),e.__NG_ELEMENT_ID__=-1,e})();function jD(e){return e.length>1?" ("+function Nle(e){const t=[];for(let n=0;n<e.length;++n){if(t.indexOf(e[n])>-1)return t.push(e[n]),t;t.push(e[n])}return t}(e.slice().reverse()).map(i=>F(i.token)).join(" -> ")+")":""}function HD(e,t,n,i){const r=[t],s=n(r),o=i?function hle(e,t){const n=`${e} caused by: ${t instanceof Error?t.message:t}`,i=Error(n);return i[UD]=t,i}(s,i):Error(s);return o.addKey=Lle,o.keys=r,o.injectors=[e],o.constructResolvingMessage=n,o[UD]=i,o}function Lle(e,t){this.injectors.push(e),this.keys.push(t),this.message=this.constructResolvingMessage(this.keys)}function X6(e,t){const n=[];for(let i=0,r=t.length;i<r;i++){const s=t[i];n.push(s&&0!=s.length?s.map(F).join(" "):"?")}return Error("Cannot resolve all parameters for '"+F(e)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+F(e)+"' is decorated with Injectable.")}function jle(e,t){return Error(`Cannot mix multi providers and regular providers, got: ${e} ${t}`)}class Em{constructor(t,n){if(this.token=t,this.id=n,!t)throw new pe(208,!1);this.displayName=F(this.token)}static get(t){return Y6.get(j(t))}static get numberOfKeys(){return Y6.numberOfKeys}}class Hle{constructor(){this._allKeys=new Map}get(t){if(t instanceof Em)return t;if(this._allKeys.has(t))return this._allKeys.get(t);const n=new Em(t,Em.numberOfKeys);return this._allKeys.set(t,n),n}get numberOfKeys(){return this._allKeys.size}}const Y6=new Hle;class fP{constructor(t,n,i){this.key=t,this.optional=n,this.visibility=i}static fromKey(t){return new fP(t,!1,null)}}const Gle=[];class $6{constructor(t,n,i){this.key=t,this.resolvedFactories=n,this.multiProvider=i,this.resolvedFactory=this.resolvedFactories[0]}}class Wle{constructor(t,n){this.factory=t,this.dependencies=n}}function qle(e){let t,n;if(e.useClass){const i=j(e.useClass);t=yx().factory(i),n=Z6(i)}else e.useExisting?(t=i=>i,n=[fP.fromKey(Em.get(e.useExisting))]):e.useFactory?(t=e.useFactory,n=function Kle(e,t){if(t){const n=t.map(i=>[i]);return t.map(i=>Q6(e,i,n))}return Z6(e)}(e.useFactory,e.deps)):(t=()=>e.useValue,n=Gle);return new Wle(t,n)}function Xle(e){return new $6(Em.get(e.provide),[qle(e)],e.multi||!1)}function Yle(e){const i=function $le(e,t){for(let n=0;n<e.length;n++){const i=e[n],r=t.get(i.key.id);if(r){if(i.multiProvider!==r.multiProvider)throw jle(r,i);if(i.multiProvider)for(let s=0;s<i.resolvedFactories.length;s++)r.resolvedFactories.push(i.resolvedFactories[s]);else t.set(i.key.id,i)}else{let s;s=i.multiProvider?new $6(i.key,i.resolvedFactories.slice(),i.multiProvider):i,t.set(i.key.id,s)}}return t}(K6(e,[]).map(Xle),new Map);return Array.from(i.values())}function K6(e,t){return e.forEach(n=>{if(n instanceof rD)t.push({provide:n,useClass:n});else if(n&&"object"==typeof n&&void 0!==n.provide)t.push(n);else{if(!Array.isArray(n))throw function Ule(e){return Error(`Invalid provider - only instances of Provider and Type are allowed, got: ${e}`)}(n);K6(n,t)}}),t}function Z6(e){const t=yx().parameters(e);if(!t)return[];if(t.some(n=>null==n))throw X6(e,t);return t.map(n=>Q6(e,n,t))}function Q6(e,t,n){let i=null,r=!1;if(!Array.isArray(t))return GD(t instanceof T1?t.token:t,r,null);let s=null;for(let o=0;o<t.length;++o){const a=t[o];a instanceof rD?i=a:a instanceof T1?i=a.token:a instanceof y0?r=!0:a instanceof aD||a instanceof D1?s=a:a instanceof ui&&(i=a)}if(i=j(i),null!=i)return GD(i,r,s);throw X6(e,n)}function GD(e,t,n){return new fP(Em.get(e),t,n)}const Sx={};class C0{static resolve(t){return Yle(t)}static resolveAndCreate(t,n){const i=C0.resolve(t);return C0.fromResolvedProviders(i,n)}static fromResolvedProviders(t,n){return new Zle(t,n)}}let Zle=(()=>{class e{constructor(n,i){this._constructionCounter=0,this._providers=n,this.parent=i||null;const r=n.length;this.keyIds=[],this.objs=[];for(let s=0;s<r;s++)this.keyIds[s]=n[s].key.id,this.objs[s]=Sx}get(n,i=Br){return this._getByKey(Em.get(n),null,i)}resolveAndCreateChild(n){const i=C0.resolve(n);return this.createChildFromResolved(i)}createChildFromResolved(n){const i=new e(n);return i.parent=this,i}resolveAndInstantiate(n){return this.instantiateResolved(C0.resolve([n])[0])}instantiateResolved(n){return this._instantiateProvider(n)}getProviderAtIndex(n){if(n<0||n>=this._providers.length)throw function Vle(e){return Error(`Index ${e} is out-of-bounds.`)}(n);return this._providers[n]}_new(n){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw function Ble(e,t){return HD(e,t,function(n){return`Cannot instantiate cyclic dependency!${jD(n)}`})}(this,n.key);return this._instantiateProvider(n)}_getMaxNumberOfObjects(){return this.objs.length}_instantiateProvider(n){if(n.multiProvider){const i=[];for(let r=0;r<n.resolvedFactories.length;++r)i[r]=this._instantiate(n,n.resolvedFactories[r]);return i}return this._instantiate(n,n.resolvedFactories[0])}_instantiate(n,i){const r=i.factory;let s,o;try{s=i.dependencies.map(a=>this._getByReflectiveDependency(a))}catch(a){throw a.addKey&&a.addKey(this,n.key),a}try{o=r(...s)}catch(a){throw function zle(e,t,n,i){return HD(e,i,function(r){const s=F(r[0].token);return`${t.message}: Error during instantiation of ${s}!${jD(r)}.`},t)}(this,a,0,n.key)}return o}_getByReflectiveDependency(n){return this._getByKey(n.key,n.visibility,n.optional?null:Br)}_getByKey(n,i,r){return n===e.INJECTOR_KEY?this:i instanceof aD?this._getByKeySelf(n,r):this._getByKeyDefault(n,r,i)}_getObjByKeyId(n){for(let i=0;i<this.keyIds.length;i++)if(this.keyIds[i]===n)return this.objs[i]===Sx&&(this.objs[i]=this._new(this._providers[i])),this.objs[i];return Sx}_throwOrNull(n,i){if(i!==Br)return i;throw function Fle(e,t){return HD(e,t,function(n){return`No provider for ${F(n[0].token)}!${jD(n)}`})}(this,n)}_getByKeySelf(n,i){const r=this._getObjByKeyId(n.id);return r!==Sx?r:this._throwOrNull(n,i)}_getByKeyDefault(n,i,r){let s;for(s=r instanceof D1?this.parent:this;s instanceof e;){const o=s,a=o._getObjByKeyId(n.id);if(a!==Sx)return a;s=o.parent}return null!==s?s.get(n.token,i):this._throwOrNull(n,i)}get displayName(){return`ReflectiveInjector(providers: [${function Qle(e,t){const n=[];for(let i=0;i<e._providers.length;++i)n[i]=t(e.getProviderAtIndex(i));return n}(this,i=>' "'+i.key.displayName+'" ').join(", ")}])`}toString(){return this.displayName}}return e.INJECTOR_KEY=Em.get(Rl),e})();function Ne(e,t=En.Default){const n=ln();return null===n?Jt(e,t):wU(ji(),n,j(e),t)}function e8(e,t){const n=e.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const o=e.data[s];Wh(n[i]),o.contentQueries(2,t[s],s)}}}function mP(e,t,n,i,r,s,o,a,l,c,d){const h=t.blueprint.slice();return h[Ja]=r,h[tr]=76|i,(null!==d||e&&1024&e[tr])&&(h[tr]|=1024),Ns(h),h[ks]=h[ud]=e,h[vs]=n,h[ku]=o||e&&e[ku],h[nr]=a||e&&e[nr],h[Vh]=l||e&&e[Vh]||null,h[hd]=c||e&&e[hd]||null,h[Co]=s,h[uo]=function Woe(){return Goe++}(),h[ym]=d,h[_o]=2==t.type?e[_o]:h,h}function U1(e,t,n,i,r){let s=e.data[t];if(null===s)s=function WD(e,t,n,i,r){const s=sh(),o=Xp(),l=e.data[t]=function rce(e,t,n,i,r,s){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,i,r);return null===e.firstChild&&(e.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(e,t,n,i,r),function Uu(){return Ni.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=i,s.attrs=r;const o=function qo(){const e=Ni.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return no(s,!0),s}function Ex(e,t,n,i){if(0===n)return-1;const r=t.length;for(let s=0;s<n;s++)t.push(i),e.blueprint.push(i),e.data.push(null);return r}function qD(e,t,n){Et(t);try{const i=e.viewQuery;null!==i&&t3(1,i,n);const r=e.template;null!==r&&t8(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&e8(e,t),e.staticViewQueries&&t3(2,e.viewQuery,n);const s=e.components;null!==s&&function tce(e,t){for(let n=0;n<t.length;n++)Cce(e,t[n])}(t,s)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[tr]&=-5,oi()}}function gP(e,t,n,i){const r=t[tr];if(128!=(128&r)){Et(t);try{Ns(t),function ah(e){return Ni.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&t8(e,t,n,2,i);const o=3==(3&r);if(o){const c=e.preOrderCheckHooks;null!==c&&qs(t,c,null)}else{const c=e.preOrderHooks;null!==c&&nc(t,c,0,null),Kp(t,0)}if(function wce(e){for(let t=gD(e);null!==t;t=vD(t)){if(!t[Nu])continue;const n=t[pd];for(let i=0;i<n.length;i++){const r=n[i];512&r[tr]||Nc(r[ks],1),r[tr]|=512}}}(t),function xce(e){for(let t=gD(e);null!==t;t=vD(t))for(let n=Po;n<t.length;n++){const i=t[n],r=i[Gn];Wi(i)&&gP(r,i,r.template,i[vs])}}(t),null!==e.contentQueries&&e8(e,t),o){const c=e.contentCheckHooks;null!==c&&qs(t,c)}else{const c=e.contentHooks;null!==c&&nc(t,c,1),Kp(t,1)}!function Jle(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const r=n[i];if(r<0)W(~r);else{const s=r,o=n[++i],a=n[++i];Vu(o,s),a(2,t[s])}}}finally{W(-1)}}(e,t);const a=e.components;null!==a&&function ece(e,t){for(let n=0;n<t.length;n++)Mce(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&t3(2,l,i),o){const c=e.viewCheckHooks;null!==c&&qs(t,c)}else{const c=e.viewHooks;null!==c&&nc(t,c,2),Kp(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[tr]&=-41,512&t[tr]&&(t[tr]&=-513,Nc(t[ks],-1))}finally{oi()}}}function t8(e,t,n,i,r){const s=Me(),o=2&i;try{W(-1),o&&t.length>Ps&&V6(e,t,Ps,!1),ht(o?2:0,r),n(i,r)}finally{W(s),ht(o?3:1,r)}}function XD(e,t,n){if(Lu(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const o=e.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}function YD(e,t,n){ma()&&(function hce(e,t,n,i){const r=n.directiveStart,s=n.directiveEnd;jh(n)&&function yce(e,t,n){const i=Ti(t,e),r=n8(n),s=e[ku],o=vP(e,mP(e,r,null,n.onPush?32:16,i,t,s,s.createRenderer(i,n),null,null,null));e[t.index]=o}(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||QC(n,t),Il(i,t);const o=n.initialInputs;for(let a=r;a<s;a++){const l=e.data[a],c=m0(t,e,a,n);Il(c,t),null!==o&&_ce(0,a-r,c,l,0,o),Da(l)&&(ys(n.index,t)[vs]=m0(t,e,a,n))}}(e,t,n,Ti(n,t)),64==(64&n.flags)&&a8(e,t,n))}function $D(e,t,n=Ti){const i=t.localNames;if(null!==i){let r=t.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?n(t,e):e[o];e[r++]=a}}}function n8(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=KD(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function KD(e,t,n,i,r,s,o,a,l,c){const d=Ps+i,h=d+r,u=function nce(e,t){const n=[];for(let i=0;i<t;i++)n.push(i<e?null:vr);return n}(d,h),p="function"==typeof c?c():c;return u[Gn]={type:e,blueprint:u,template:n,queries:null,viewQuery:a,declTNode:t,data:u.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1}}function i8(e,t,n,i){const r=c8(t);null===n?r.push(i):(r.push(n),e.firstCreatePass&&d8(e).push(i,r.length-1))}function r8(e,t,n,i){for(let r in e)if(e.hasOwnProperty(r)){n=null===n?{}:n;const s=e[r];null===i?s8(n,t,r,s):i.hasOwnProperty(r)&&s8(n,t,i[r],s)}return n}function s8(e,t,n,i){e.hasOwnProperty(n)?e[n].push(t,i):e[n]=[t,i]}function _d(e,t,n,i,r,s,o,a){const l=Ti(t,n);let d,c=t.inputs;!a&&null!=c&&(d=c[i])?(n3(e,n,d,i,r),jh(t)&&function ace(e,t){const n=ys(t,e);16&n[tr]||(n[tr]|=32)}(n,t.index)):3&t.type&&(i=function oce(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),r=null!=o?o(r,t.value||"",i):r,s.setProperty(l,i,r))}function ZD(e,t,n,i){if(ma()){const r=null===i?null:{"":-1},s=function pce(e,t){const n=e.directiveRegistry;let i=null,r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(z6(t,o.selectors,!1))if(i||(i=[]),Da(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),QD(e,t,a.length)}else i.unshift(o),QD(e,t,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(e,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&o8(e,t,n,o,r,a),r&&function fce(e,t,n){if(t){const i=e.localNames=[];for(let r=0;r<t.length;r+=2){const s=n[t[r+1]];if(null==s)throw new pe(-301,!1);i.push(t[r],s)}}}(n,i,r)}n.mergedAttrs=Hu(n.mergedAttrs,n.attrs)}function o8(e,t,n,i,r,s){for(let c=0;c<i.length;c++)tD(QC(n,t),e,i[c].type);!function gce(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,i.length);for(let c=0;c<i.length;c++){const d=i[c];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,l=Ex(e,t,i.length,null);for(let c=0;c<i.length;c++){const d=i[c];n.mergedAttrs=Hu(n.mergedAttrs,d.hostAttrs),vce(e,n,t,l,d),mce(l,d,r),null!==d.contentQueries&&(n.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=64);const h=d.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((e.preOrderHooks??(e.preOrderHooks=[])).push(n.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function sce(e,t,n){const r=t.directiveEnd,s=e.data,o=t.attrs,a=[];let l=null,c=null;for(let d=t.directiveStart;d<r;d++){const h=s[d],u=n?n.get(h):null,m=u?u.outputs:null;l=r8(h.inputs,d,l,u?u.inputs:null),c=r8(h.outputs,d,c,m);const v=null===l||null===o||B6(t)?null:bce(l,d,o);a.push(v)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}(e,n,s)}function a8(e,t,n){const i=n.directiveStart,r=n.directiveEnd,s=n.index,o=function $p(){return Ni.lFrame.currentDirectiveIndex}();try{W(s);for(let a=i;a<r;a++){const l=e.data[a],c=t[a];lh(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&uce(l,c)}}finally{W(-1),lh(o)}}function uce(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function QD(e,t,n){t.componentOffset=n,(e.components??(e.components=[])).push(t.index)}function mce(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;Da(t)&&(n[""]=e)}}function vce(e,t,n,i,r){e.data[i]=r;const s=r.factory||(r.factory=fd(r.type)),o=new f0(s,Da(r),Ne);e.blueprint[i]=o,n[i]=o,function cce(e,t,n,i,r){const s=r.hostBindings;if(s){let o=e.hostBindingOpCodes;null===o&&(o=e.hostBindingOpCodes=[]);const a=~t.index;(function dce(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,i,s)}}(e,t,i,Ex(e,n,r.hostVars,vr),r)}function Xu(e,t,n,i,r,s){const o=Ti(e,t);!function JD(e,t,n,i,r,s,o){if(null==s)e.removeAttribute(t,r,n);else{const a=null==o?je(s):o(s,i||"",r);e.setAttribute(t,r,a,n)}}(t[nr],o,s,e.value,n,i,r)}function _ce(e,t,n,i,r,s){const o=s[t];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],d=o[l++],h=o[l++];null!==a?i.setInput(n,h,c,d):n[d]=h}}}function bce(e,t,n){let i=null,r=0;for(;r<n.length;){const s=n[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(e.hasOwnProperty(s)){null===i&&(i=[]);const o=e[s];for(let a=0;a<o.length;a+=2)if(o[a]===t){i.push(s,o[a+1],n[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function l8(e,t,n,i){return[e,!0,!1,t,null,0,i,n,null,null]}function Mce(e,t){const n=ys(t,e);if(Wi(n)){const i=n[Gn];48&n[tr]?gP(i,n,i.template,n[vs]):n[Ql]>0&&e3(n)}}function e3(e){for(let i=gD(e);null!==i;i=vD(i))for(let r=Po;r<i.length;r++){const s=i[r];if(Wi(s))if(512&s[tr]){const o=s[Gn];gP(o,s,o.template,s[vs])}else s[Ql]>0&&e3(s)}const n=e[Gn].components;if(null!==n)for(let i=0;i<n.length;i++){const r=ys(n[i],e);Wi(r)&&r[Ql]>0&&e3(r)}}function Cce(e,t){const n=ys(t,e),i=n[Gn];(function Pce(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(i,n),qD(i,n,n[vs])}function vP(e,t){return e[gl]?e[Jd][el]=t:e[gl]=t,e[Jd]=t,t}function yP(e){for(;e;){e[tr]|=32;const t=xx(e);if(s0(e)&&!t)return e;e=t}return null}function _P(e,t,n,i=!0){const r=t[ku];r.begin&&r.begin();try{gP(e,t,e.template,n)}catch(o){throw i&&u8(t,o),o}finally{r.end&&r.end()}}function t3(e,t,n){Wh(0),t(e,n)}function c8(e){return e[As]||(e[As]=[])}function d8(e){return e.cleanup||(e.cleanup=[])}function u8(e,t){const n=e[hd],i=n?n.get(w0,null):null;i&&i.handleError(t)}function n3(e,t,n,i,r){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],l=t[o],c=e.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function ef(e,t,n){const i=Mi(t,e);!function KU(e,t,n){e.setValue(t,n)}(e[nr],i,n)}function bP(e,t,n){let i=n?e.styles:null,r=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?r=G(r,a):2==s&&(i=G(i,a+": "+t[++o]+";"))}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}function xP(e,t,n,i,r=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&i.push(xt(s)),tl(s))for(let a=Po;a<s.length;a++){const l=s[a],c=l[Gn].firstChild;null!==c&&xP(l[Gn],l,c,i)}const o=n.type;if(8&o)xP(e,t,n.child,i);else if(32&o){const a=mD(n,t);let l;for(;l=a();)i.push(l)}else if(16&o){const a=a6(t,n);if(Array.isArray(a))i.push(...a);else{const l=xx(t[_o]);xP(l[Gn],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}class Ox{get rootNodes(){const t=this._lView,n=t[Gn];return xP(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[vs]}set context(t){this._lView[vs]=t}get destroyed(){return 128==(128&this._lView[tr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[ks];if(tl(t)){const n=t[Jl],i=n?n.indexOf(this):-1;i>-1&&(bD(t,i),eP(n,i))}this._attachedToViewContainer=!1}QU(this._lView[Gn],this._lView)}onDestroy(t){i8(this._lView[Gn],this._lView,null,t)}markForCheck(){yP(this._cdRefInjectingView||this._lView)}detach(){this._lView[tr]&=-65}reattach(){this._lView[tr]|=64}detectChanges(){_P(this._lView[Gn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function oae(e,t){wx(e,t,t[nr],2,null,null)}(this._lView[Gn],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=t}}class Sce extends Ox{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;_P(t[Gn],t,t[vs],!1)}checkNoChanges(){}get context(){return null}}class p8 extends L1{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Ur(t);return new Ax(n,this.ngModule)}}function f8(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class Oce{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){i=Os(i);const r=this.injector.get(t,zD,i);return r!==zD||n===zD?r:this.parentInjector.get(t,n,i)}}class Ax extends R6{get inputs(){return f8(this.componentDef.inputs)}get outputs(){return f8(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Ole(e){return e.map(Ele).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,i,r){let s=(r=r||this.ngModule)instanceof qu?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Oce(t,s):t,a=o.get(B1,null);if(null===a)throw new pe(407,!1);const l=o.get(cle,null),c=a.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",h=i?function ice(e,t,n){return e.selectRootElement(t,n===xi.ShadowDom)}(c,i,this.componentDef.encapsulation):_D(c,d,function Ece(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(d)),u=this.componentDef.onPush?288:272,p=KD(0,null,null,1,0,null,null,null,null,null),m=mP(null,p,null,u,null,null,a,c,l,o,null);let v,g;Et(m);try{const b=this.componentDef;let x,w=null;b.findHostDirectiveDefs?(x=[],w=new Map,b.findHostDirectiveDefs(b,x,w),x.push(b)):x=[b];const P=function Tce(e,t){const n=e[Gn],i=Ps;return e[i]=t,U1(n,i,2,"#host",null)}(m,h),A=function Dce(e,t,n,i,r,s,o,a){const l=r[Gn];!function Ice(e,t,n,i){for(const r of e)t.mergedAttrs=Hu(t.mergedAttrs,r.hostAttrs);null!==t.mergedAttrs&&(bP(t,t.mergedAttrs,!0),null!==n&&d6(i,n,t))}(i,e,t,o);const c=s.createRenderer(t,n),d=mP(r,n8(n),null,n.onPush?32:16,r[e.index],e,s,c,a||null,null,null);return l.firstCreatePass&&QD(l,e,i.length-1),vP(r,d),r[e.index]=d}(P,h,b,x,m,a,c);g=po(p,Ps),h&&function kce(e,t,n,i){if(i)ux(e,n,["ng-version",dle.full]);else{const{attrs:r,classes:s}=function Ale(e){const t=[],n=[];let i=1,r=2;for(;i<e.length;){let s=e[i];if("string"==typeof s)2===r?""!==s&&t.push(s,e[++i]):8===r&&n.push(s);else{if(!qh(r))break;r=s}i++}return{attrs:t,classes:n}}(t.selectors[0]);r&&ux(e,n,r),s&&s.length>0&&c6(e,n,s.join(" "))}}(c,b,h,i),void 0!==n&&function Nce(e,t,n){const i=e.projection=[];for(let r=0;r<t.length;r++){const s=n[r];i.push(null!=s?Array.from(s):null)}}(g,this.ngContentSelectors,n),v=function Rce(e,t,n,i,r,s){const o=ji(),a=r[Gn],l=Ti(o,r);o8(a,r,o,n,null,i);for(let d=0;d<n.length;d++)Il(m0(r,a,o.directiveStart+d,o),r);a8(a,r,o),l&&Il(l,r);const c=m0(r,a,o.directiveStart+o.componentOffset,o);if(e[vs]=r[vs]=c,null!==s)for(const d of s)d(c,t);return XD(a,o,e),c}(A,b,x,w,m,[Lce]),qD(p,m,null)}finally{oi()}return new Ace(this.componentType,v,F1(g,m),m,g)}}class Ace extends ile{constructor(t,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new Sce(r),this.componentType=t}setInput(t,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[t])){const s=this._rootLView;n3(s[Gn],s,r,t,n),yP(ys(this._tNode.index,s))}}get injector(){return new C1(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function Lce(){const e=ji();Xo(ln()[Gn],e)}function Ds(e){let t=function m8(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const i=[e];for(;t;){let r;if(Da(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new pe(903,!1);r=t.\u0275dir}if(r){if(n){i.push(r);const o=e;o.inputs=r3(e.inputs),o.declaredInputs=r3(e.declaredInputs),o.outputs=r3(e.outputs);const a=r.hostBindings;a&&Uce(e,a);const l=r.viewQuery,c=r.contentQueries;if(l&&Bce(e,l),c&&zce(e,c),J(e.inputs,r.inputs),J(e.declaredInputs,r.declaredInputs),J(e.outputs,r.outputs),Da(r)&&r.data.animation){const d=e.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(e),a===Ds&&(n=!1)}}t=Object.getPrototypeOf(t)}!function Fce(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){const r=e[i];r.hostVars=t+=r.hostVars,r.hostAttrs=Hu(r.hostAttrs,n=Hu(n,r.hostAttrs))}}(i)}function r3(e){return e===Qr?{}:e===si?[]:e}function Bce(e,t){const n=e.viewQuery;e.viewQuery=n?(i,r)=>{t(i,r),n(i,r)}:t}function zce(e,t){const n=e.contentQueries;e.contentQueries=n?(i,r,s)=>{t(i,r,s),n(i,r,s)}:t}function Uce(e,t){const n=e.hostBindings;e.hostBindings=n?(i,r)=>{t(i,r),n(i,r)}:t}function wP(e){return!!s3(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function s3(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Yu(e,t,n){return e[t]=n}function Tx(e,t){return e[t]}function kl(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function P0(e,t,n,i){const r=kl(e,t,n);return kl(e,t+1,i)||r}function hh(e,t,n,i,r,s){const o=P0(e,t,n,i);return P0(e,t+2,r,s)||o}function Xs(e,t,n,i){const r=ln();return kl(r,tc(),t)&&(Dr(),Xu(ie(),r,e,t,n,i)),Xs}function j1(e,t,n,i){return kl(e,tc(),n)?t+je(n)+i:vr}function H1(e,t,n,i,r,s){const a=P0(e,function Dl(){return Ni.lFrame.bindingIndex}(),n,r);return Ra(2),a?t+je(n)+i+je(r)+s:vr}function mt(e,t,n,i,r,s,o,a){const l=ln(),c=Dr(),d=e+Ps,h=c.firstCreatePass?function Kce(e,t,n,i,r,s,o,a,l){const c=t.consts,d=U1(t,e,4,o||null,lr(c,a));ZD(t,n,d,lr(c,l)),Xo(t,d);const h=d.tView=KD(2,d,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,d),h.queries=t.queries.embeddedTView(d)),d}(d,c,l,t,n,i,r,s,o):c.data[d];no(h,!1);const u=l[nr].createComment("");sP(c,l,u,h),Il(u,l),vP(l,l[d]=l8(u,l,u,h)),ec(h)&&YD(c,l,h),null!=o&&$D(l,h,a)}function Yo(e){return Ss(function Mm(){return Ni.lFrame.contextLView}(),Ps+e)}function ot(e,t,n){const i=ln();return kl(i,tc(),t)&&_d(Dr(),ie(),i,e,t,i[nr],n,!1),ot}function o3(e,t,n,i,r){const o=r?"class":"style";n3(e,n,t.inputs[o],o,i)}function C(e,t,n,i){const r=ln(),s=Dr(),o=Ps+e,a=r[nr],l=s.firstCreatePass?function Qce(e,t,n,i,r,s){const o=t.consts,l=U1(t,e,2,i,lr(o,r));return ZD(t,n,l,lr(o,s)),null!==l.attrs&&bP(l,l.attrs,!1),null!==l.mergedAttrs&&bP(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,r,t,n,i):s.data[o],c=r[o]=_D(a,t,function Xi(){return Ni.lFrame.currentNamespace}()),d=ec(l);return no(l,!0),d6(a,c,l),32!=(32&l.flags)&&sP(s,r,c,l),0===function Al(){return Ni.lFrame.elementDepthCount}()&&Il(c,r),function Lc(){Ni.lFrame.elementDepthCount++}(),d&&(YD(s,r,l),XD(s,l,r)),null!==i&&$D(r,l),C}function E(){let e=ji();Xp()?Yp():(e=e.parent,no(e,!1));const t=e;!function Fc(){Ni.lFrame.elementDepthCount--}();const n=Dr();return n.firstCreatePass&&(Xo(n,e),Lu(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function ZT(e){return 0!=(8&e.flags)}(t)&&o3(n,t,ln(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function QT(e){return 0!=(16&e.flags)}(t)&&o3(n,t,ln(),t.stylesWithoutHost,!1),E}function ue(e,t,n,i){return C(e,t,n,i),E(),ue}function $o(e,t,n){const i=ln(),r=Dr(),s=e+Ps,o=r.firstCreatePass?function Jce(e,t,n,i,r){const s=t.consts,o=lr(s,i),a=U1(t,e,8,"ng-container",o);return null!==o&&bP(a,o,!0),ZD(t,n,a,lr(s,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,r,i,t,n):r.data[s];no(o,!0);const a=i[s]=i[nr].createComment("");return sP(r,i,a,o),Il(a,i),ec(o)&&(YD(r,i,o),XD(r,o,i)),null!=n&&$D(i,o),$o}function Ko(){let e=ji();const t=Dr();return Xp()?Yp():(e=e.parent,no(e,!1)),t.firstCreatePass&&(Xo(t,e),Lu(e)&&t.queries.elementEnd(e)),Ko}function Xr(){return ln()}function Dx(e){return!!e&&"function"==typeof e.then}const a3=function A8(e){return!!e&&"function"==typeof e.subscribe};function zt(e,t,n,i){const r=ln(),s=Dr(),o=ji();return function D8(e,t,n,i,r,s,o){const a=ec(i),c=e.firstCreatePass&&d8(e),d=t[vs],h=c8(t);let u=!0;if(3&i.type||o){const v=Ti(i,t),g=o?o(v):v,b=h.length,x=o?P=>o(xt(P[i.index])):i.index;let w=null;if(!o&&a&&(w=function ede(e,t,n,i){const r=e.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===n&&r[s+1]===i){const a=t[As],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(e,t,r,i.index)),null!==w)(w.__ngLastListenerFn__||w).__ngNextListenerFn__=s,w.__ngLastListenerFn__=s,u=!1;else{s=R8(i,t,d,s,!1);const P=n.listen(g,r,s);h.push(s,P),c&&c.push(r,x,b,b+1)}}else s=R8(i,t,d,s,!1);const p=i.outputs;let m;if(u&&null!==p&&(m=p[r])){const v=m.length;if(v)for(let g=0;g<v;g+=2){const A=t[m[g]][m[g+1]].subscribe(s),D=h.length;h.push(s,A),c&&c.push(r,i.index,D,-(D+1))}}}(s,r,r[nr],o,e,t,i),zt}function I8(e,t,n,i){try{return ht(6,t,n),!1!==n(i)}catch(r){return u8(e,r),!1}finally{ht(7,t,n)}}function R8(e,t,n,i,r){return function s(o){if(o===Function)return i;yP(e.componentOffset>-1?ys(e.index,t):t);let l=I8(t,n,i,o),c=s.__ngNextListenerFn__;for(;c;)l=I8(t,n,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function _t(e=1){return function Wn(e){return(Ni.lFrame.contextLView=function br(e,t){for(;e>0;)t=t[ud],e--;return t}(e,Ni.lFrame.contextLView))[vs]}(e)}function tde(e,t){let n=null;const i=function Mle(e){const t=e.attrs;if(null!=t){const n=t.indexOf(5);if(!(1&n))return t[n+1]}return null}(e);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===i?z6(e,s,!0):Sle(i,s))return r}else n=r}return n}function bd(e,t,n){return Ue(e,"",t,"",n),bd}function Ue(e,t,n,i,r){const s=ln(),o=j1(s,t,n,i);return o!==vr&&_d(Dr(),ie(),s,e,o,s[nr],r,!1),Ue}function Uc(e,t,n,i,r,s,o){const a=ln(),l=H1(a,t,n,i,r,s);return l!==vr&&_d(Dr(),ie(),a,e,l,a[nr],o,!1),Uc}function CP(e,t){return e<<17|t<<2}function Om(e){return e>>17&32767}function l3(e){return 2|e}function S0(e){return(131068&e)>>2}function c3(e,t){return-131069&e|t<<2}function d3(e){return 1|e}function H8(e,t,n,i,r){const s=e[n+1],o=null===t;let a=i?Om(s):S0(s),l=!1;for(;0!==a&&(!1===l||o);){const d=e[a+1];ade(e[a],t)&&(l=!0,e[a+1]=i?d3(d):l3(d)),a=i?Om(d):S0(d)}l&&(e[n+1]=i?l3(s):d3(s))}function ade(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&A1(e,t)>=0}const Na={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function G8(e){return e.substring(Na.key,Na.keyEnd)}function W8(e,t){const n=Na.textEnd;return n===t?-1:(t=Na.keyEnd=function hde(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,Na.key=t,n),K1(e,t,n))}function K1(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function mo(e,t){return function Xh(e,t,n,i){const r=ln(),s=Dr(),o=Ra(2);s.firstUpdatePass&&Z8(s,e,o,i),t!==vr&&kl(r,o,t)&&J8(s,s.data[Me()],r,r[nr],e,r[o+1]=function wde(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=F(vd(e)))),e}(t,n),i,o)}(e,t,null,!0),mo}function Am(e){Yh(bde,Ku,e,!0)}function Ku(e,t){for(let n=function cde(e){return function X8(e){Na.key=0,Na.keyEnd=0,Na.value=0,Na.valueEnd=0,Na.textEnd=e.length}(e),W8(e,K1(e,0,Na.textEnd))}(t);n>=0;n=W8(t,n))gd(e,G8(t),!0)}function Yh(e,t,n,i){const r=Dr(),s=Ra(2);r.firstUpdatePass&&Z8(r,null,s,i);const o=ln();if(n!==vr&&kl(o,s,n)){const a=r.data[Me()];if(tV(a,i)&&!K8(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(n=G(l,n||"")),o3(r,a,o,n,i)}else!function xde(e,t,n,i,r,s,o,a){r===vr&&(r=si);let l=0,c=0,d=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==d||null!==h;){const u=l<r.length?r[l+1]:void 0,p=c<s.length?s[c+1]:void 0;let v,m=null;d===h?(l+=2,c+=2,u!==p&&(m=h,v=p)):null===h||null!==d&&d<h?(l+=2,m=d):(c+=2,m=h,v=p),null!==m&&J8(e,t,n,i,m,v,o,a),d=l<r.length?r[l]:null,h=c<s.length?s[c]:null}}(r,a,o,o[nr],o[s+1],o[s+1]=function _de(e,t,n){if(null==n||""===n)return si;const i=[],r=vd(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)e(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&e(i,s,r[s]);else"string"==typeof r&&t(i,r);return i}(e,t,n),i,s)}}function K8(e,t){return t>=e.expandoStartIndex}function Z8(e,t,n,i){const r=e.data;if(null===r[n+1]){const s=r[Me()],o=K8(e,n);tV(s,i)&&null===t&&!o&&(t=!1),t=function mde(e,t,n,i){const r=function Gh(e){const t=Ni.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(n=Ix(n=u3(null,e,t,n,i),t.attrs,i),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==r)if(n=u3(r,e,t,n,i),null===s){let l=function gde(e,t,n){const i=n?t.classBindings:t.styleBindings;if(0!==S0(i))return e[Om(i)]}(e,t,i);void 0!==l&&Array.isArray(l)&&(l=u3(null,e,t,l[1],i),l=Ix(l,t.attrs,i),function vde(e,t,n,i){e[Om(n?t.classBindings:t.styleBindings)]=i}(e,t,i,l))}else s=function yde(e,t,n){let i;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)i=Ix(i,e[s].hostAttrs,n);return Ix(i,t.attrs,n)}(e,t,i)}return void 0!==s&&(i?t.residualClasses=s:t.residualStyles=s),n}(r,s,t,i),function sde(e,t,n,i,r,s){let o=s?t.classBindings:t.styleBindings,a=Om(o),l=S0(o);e[i]=n;let d,c=!1;if(Array.isArray(n)?(d=n[1],(null===d||A1(n,d)>0)&&(c=!0)):d=n,r)if(0!==l){const u=Om(e[a+1]);e[i+1]=CP(u,a),0!==u&&(e[u+1]=c3(e[u+1],i)),e[a+1]=function ide(e,t){return 131071&e|t<<17}(e[a+1],i)}else e[i+1]=CP(a,0),0!==a&&(e[a+1]=c3(e[a+1],i)),a=i;else e[i+1]=CP(l,0),0===a?a=i:e[l+1]=c3(e[l+1],i),l=i;c&&(e[i+1]=l3(e[i+1])),H8(e,d,i,!0),H8(e,d,i,!1),function ode(e,t,n,i,r){const s=r?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&A1(s,t)>=0&&(n[i+1]=d3(n[i+1]))}(t,d,e,i,s),o=CP(a,l),s?t.classBindings=o:t.styleBindings=o}(r,s,t,n,o,i)}}function u3(e,t,n,i,r){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],i=Ix(i,s.hostAttrs,r),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),i}function Ix(e,t,n){const i=n?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),gd(e,o,!!n||t[++s]))}return void 0===e?null:e}function bde(e,t,n){const i=String(t);""!==i&&!i.includes(" ")&&gd(e,i,n)}function J8(e,t,n,i,r,s,o,a){if(!(3&t.type))return;const l=e.data,c=l[a+1],d=function rde(e){return 1==(1&e)}(c)?eV(l,t,n,r,S0(c),o):void 0;PP(d)||(PP(s)||function nde(e){return 2==(2&e)}(c)&&(s=eV(l,null,n,r,a,o)),function gae(e,t,n,i,r){if(t)r?e.addClass(n,i):e.removeClass(n,i);else{let s=-1===i.indexOf("-")?void 0:Bc.DashCase;null==r?e.removeStyle(n,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Bc.Important),e.setStyle(n,i,r,s))}}(i,o,Mi(Me(),n),r,s))}function eV(e,t,n,i,r,s){const o=null===t;let a;for(;r>0;){const l=e[r],c=Array.isArray(l),d=c?l[1]:l,h=null===d;let u=n[r+1];u===vr&&(u=h?si:void 0);let p=h?sD(u,i):d===i?u:void 0;if(c&&!PP(p)&&(p=sD(l,i)),PP(p)&&(a=p,o))return a;const m=e[r+1];r=o?Om(m):S0(m)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=sD(l,i))}return a}function PP(e){return void 0!==e}function tV(e,t){return 0!=(e.flags&(t?8:16))}function I(e,t=""){const n=ln(),i=Dr(),r=e+Ps,s=i.firstCreatePass?U1(i,r,1,t,null):i.data[r],o=n[r]=function yD(e,t){return e.createText(t)}(n[nr],t);sP(i,n,o,s),no(s,!1)}function La(e){return hs("",e,""),La}function hs(e,t,n){const i=ln(),r=j1(i,e,t,n);return r!==vr&&ef(i,Me(),r),hs}function SP(e,t,n,i,r){const s=ln(),o=H1(s,e,t,n,i,r);return o!==vr&&ef(s,Me(),o),SP}function Zu(e,t,n){Yh(gd,Ku,j1(ln(),e,t,n),!0)}const O0=void 0;var Vde=["en",[["a","p"],["AM","PM"],O0],[["AM","PM"],O0,O0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],O0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],O0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",O0,"{1} 'at' {0}",O0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ude(e){const n=Math.floor(Math.abs(e)),i=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let Z1={};function ic(e){const t=function jde(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=bV(t);if(n)return n;const i=t.split("-")[0];if(n=bV(i),n)return n;if("en"===i)return Vde;throw new pe(701,!1)}function bV(e){return e in Z1||(Z1[e]=fi.ng&&fi.ng.common&&fi.ng.common.locales&&fi.ng.common.locales[e]),Z1[e]}var Jn=(()=>((Jn=Jn||{})[Jn.LocaleId=0]="LocaleId",Jn[Jn.DayPeriodsFormat=1]="DayPeriodsFormat",Jn[Jn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Jn[Jn.DaysFormat=3]="DaysFormat",Jn[Jn.DaysStandalone=4]="DaysStandalone",Jn[Jn.MonthsFormat=5]="MonthsFormat",Jn[Jn.MonthsStandalone=6]="MonthsStandalone",Jn[Jn.Eras=7]="Eras",Jn[Jn.FirstDayOfWeek=8]="FirstDayOfWeek",Jn[Jn.WeekendRange=9]="WeekendRange",Jn[Jn.DateFormat=10]="DateFormat",Jn[Jn.TimeFormat=11]="TimeFormat",Jn[Jn.DateTimeFormat=12]="DateTimeFormat",Jn[Jn.NumberSymbols=13]="NumberSymbols",Jn[Jn.NumberFormats=14]="NumberFormats",Jn[Jn.CurrencyCode=15]="CurrencyCode",Jn[Jn.CurrencySymbol=16]="CurrencySymbol",Jn[Jn.CurrencyName=17]="CurrencyName",Jn[Jn.Currencies=18]="Currencies",Jn[Jn.Directionality=19]="Directionality",Jn[Jn.PluralCase=20]="PluralCase",Jn[Jn.ExtraData=21]="ExtraData",Jn))();const Q1="en-US";let xV=Q1;function g3(e,t,n,i,r){if(e=j(e),Array.isArray(e))for(let s=0;s<e.length;s++)g3(e[s],t,n,i,r);else{const s=Dr(),o=ln();let a=x0(e)?e:j(e.provide),l=I6(e);const c=ji(),d=1048575&c.providerIndexes,h=c.directiveStart,u=c.providerIndexes>>20;if(x0(e)||!e.multi){const p=new f0(l,r,Ne),m=y3(a,t,r?d:d+u,h);-1===m?(tD(QC(c,o),s,a),v3(s,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),n.push(p),o.push(p)):(n[m]=p,o[m]=p)}else{const p=y3(a,t,d+u,h),m=y3(a,t,d,d+u),g=m>=0&&n[m];if(r&&!g||!r&&!(p>=0&&n[p])){tD(QC(c,o),s,a);const b=function Fhe(e,t,n,i,r){const s=new f0(e,n,Ne);return s.multi=[],s.index=t,s.componentProviders=0,qV(s,r,i&&!n),s}(r?Lhe:Nhe,n.length,r,i,l);!r&&g&&(n[m].providerFactory=b),v3(s,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),n.push(b),o.push(b)}else v3(s,e,p>-1?p:m,qV(n[r?m:p],l,!r&&i));!r&&i&&g&&n[m].componentProviders++}}}function v3(e,t,n,i){const r=x0(t),s=function Kae(e){return!!e.useClass}(t);if(r||s){const l=(s?j(t.useClass):t).prototype.ngOnDestroy;if(l){const c=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){const d=c.indexOf(n);-1===d?c.push(n,[i,l]):c[d+1].push(i,l)}else c.push(n,l)}}}function qV(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function y3(e,t,n,i){for(let r=n;r<i;r++)if(t[r]===e)return r;return-1}function Nhe(e,t,n,i){return _3(this.multi,[])}function Lhe(e,t,n,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=m0(n,n[Gn],this.providerFactory.index,i);s=a.slice(0,o),_3(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],_3(r,s);return s}function _3(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function so(e,t=[]){return n=>{n.providersResolver=(i,r)=>function khe(e,t,n){const i=Dr();if(i.firstCreatePass){const r=Da(e);g3(n,i.data,i.blueprint,r,!0),g3(t,i.data,i.blueprint,r,!1)}}(i,r?r(e):e,t)}}class J1{}class XV{}class YV extends J1{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new p8(this);const i=Ro(t);this._bootstrapComponents=Jp(i.bootstrap),this._r3Injector=q6(t,n,[{provide:J1,useValue:this},{provide:L1,useValue:this.componentFactoryResolver}],F(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class b3 extends XV{constructor(t){super(),this.moduleType=t}create(t){return new YV(this.moduleType,t)}}class zhe extends J1{constructor(t,n,i){super(),this.componentFactoryResolver=new p8(this),this.instance=null;const r=new D6([...t,{provide:J1,useValue:this},{provide:L1,useValue:this.componentFactoryResolver}],n||pP(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function DP(e,t,n=null){return new zhe(e,t,n).injector}let Uhe=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const i=E6(0,n.type),r=i.length>0?DP([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,r)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=Gt({token:e,providedIn:"environment",factory:()=>new e(Jt(qu))}),e})();function $V(e){e.getStandaloneInjector=t=>t.get(Uhe).getOrCreateStandaloneInjector(e)}function nl(e,t,n,i){return function r9(e,t,n,i,r,s){const o=t+n;return kl(e,o,r)?Yu(e,o+1,s?i.call(s,r):i(r)):Bx(e,o+1)}(ln(),Ws(),e,t,n,i)}function A0(e,t,n,i,r){return s9(ln(),Ws(),e,t,n,i,r)}function i9(e,t,n,i,r,s,o){return function a9(e,t,n,i,r,s,o,a,l){const c=t+n;return hh(e,c,r,s,o,a)?Yu(e,c+4,l?i.call(l,r,s,o,a):i(r,s,o,a)):Bx(e,c+4)}(ln(),Ws(),e,t,n,i,r,s,o)}function M3(e,t,n,i,r,s,o,a){const l=Ws()+e,c=ln(),d=hh(c,l,n,i,r,s);return kl(c,l+4,o)||d?Yu(c,l+5,a?t.call(a,n,i,r,s,o):t(n,i,r,s,o)):Tx(c,l+5)}function Bx(e,t){const n=e[t];return n===vr?void 0:n}function s9(e,t,n,i,r,s,o){const a=t+n;return P0(e,a,r,s)?Yu(e,a+2,o?i.call(o,r,s):i(r,s)):Bx(e,a+2)}function o9(e,t,n,i,r,s,o,a){const l=t+n;return function MP(e,t,n,i,r){const s=P0(e,t,n,i);return kl(e,t+2,r)||s}(e,l,r,s,o)?Yu(e,l+3,a?i.call(a,r,s,o):i(r,s,o)):Bx(e,l+3)}function C3(e,t){const n=Dr();let i;const r=e+Ps;n.firstCreatePass?(i=function Jhe(e,t){if(t)for(let n=t.length-1;n>=0;n--){const i=t[n];if(e===i.name)return i}}(t,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??(n.destroyHooks=[])).push(r,i.onDestroy)):i=n.data[r];const s=i.factory||(i.factory=fd(i.type)),o=or(Ne);try{const a=pr(!1),l=s();return pr(a),function Zce(e,t,n,i){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=i}(n,ln(),r,l),l}finally{or(o)}}function zx(e,t){return e[Gn].data[t].pure}function P3(e){return t=>{setTimeout(e,void 0,t)}}const cr=class iue extends M.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,i){let r=t,s=n||(()=>null),o=i;if(t&&"object"==typeof t){const l=t;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=P3(s),r&&(r=P3(r)),o&&(o=P3(o)));const a=super.subscribe({next:r,error:s,complete:o});return t instanceof S.w&&t.add(a),a}};function rue(){return this._results[Symbol.iterator]()}class S3{get changes(){return this._changes||(this._changes=new cr)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=S3.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=rue)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const i=this;i.dirty=!1;const r=function dh(e){return e.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function boe(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=t[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let So=(()=>{class e{}return e.__NG_ELEMENT_ID__=aue,e})();const sue=So,oue=class extends sue{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}createEmbeddedView(t,n){const i=this._declarationTContainer.tView,r=mP(this._declarationLView,i,t,16,null,i.declTNode,null,null,null,null,n||null);r[eh]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[vl];return null!==o&&(r[vl]=o.createEmbeddedView(i)),qD(i,r,t),new Ox(r)}};function aue(){return IP(ji(),ln())}function IP(e,t){return 4&e.type?new oue(t,e,F1(e,t)):null}let $h=(()=>{class e{}return e.__NG_ELEMENT_ID__=lue,e})();function lue(){return p9(ji(),ln())}const cue=$h,h9=class extends cue{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return F1(this._hostTNode,this._hostLView)}get injector(){return new C1(this._hostTNode,this._hostLView)}get parentInjector(){const t=eD(this._hostTNode,this._hostLView);if(ne(t)){const n=kt(t,this._hostLView),i=ge(t);return new C1(n[Gn].data[i+8],n)}return new C1(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=u9(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-Po}createEmbeddedView(t,n,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=t.createEmbeddedView(n||{},s);return this.insert(o,r),o}createComponent(t,n,i,r,s){const o=t&&!gx(t);let a;if(o)a=n;else{const h=n||{};a=h.index,i=h.injector,r=h.projectableNodes,s=h.environmentInjector||h.ngModuleRef}const l=o?t:new Ax(Ur(t)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const u=(o?c:this.parentInjector).get(qu,null);u&&(s=u)}const d=l.create(c,r,void 0,s);return this.insert(d.hostView,a),d}insert(t,n){const i=t._lView,r=i[Gn];if(function md(e){return tl(e[ks])}(i)){const d=this.indexOf(t);if(-1!==d)this.detach(d);else{const h=i[ks],u=new h9(h,h[Co],h[ks]);u.detach(u.indexOf(t))}}const s=this._adjustIndex(n),o=this._lContainer;!function lae(e,t,n,i){const r=Po+i,s=n.length;i>0&&(n[r-1][el]=t),i<s-Po?(t[el]=n[r],AU(n,Po+i,t)):(n.push(t),t[el]=null),t[ks]=n;const o=t[eh];null!==o&&n!==o&&function cae(e,t){const n=e[pd];t[_o]!==t[ks][ks][_o]&&(e[Nu]=!0),null===n?e[pd]=[t]:n.push(t)}(o,t);const a=t[vl];null!==a&&a.insertView(e),t[tr]|=64}(r,i,o,s);const a=MD(s,o),l=i[nr],c=rP(l,o[nh]);return null!==c&&function sae(e,t,n,i,r,s){i[Ja]=r,i[Co]=t,wx(e,i,n,1,r,s)}(r,o[Co],l,i,c,a),t.attachToViewContainerRef(),AU(E3(o),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=u9(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),i=bD(this._lContainer,n);i&&(eP(E3(this._lContainer),n),QU(i[Gn],i))}detach(t){const n=this._adjustIndex(t,-1),i=bD(this._lContainer,n);return i&&null!=eP(E3(this._lContainer),n)?new Ox(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function u9(e){return e[Jl]}function E3(e){return e[Jl]||(e[Jl]=[])}function p9(e,t){let n;const i=t[e.index];if(tl(i))n=i;else{let r;if(8&e.type)r=xt(i);else{const s=t[nr];r=s.createComment("");const o=Ti(e,t);_0(s,rP(s,o),r,function pae(e,t){return e.nextSibling(t)}(s,o),!1)}t[e.index]=n=l8(i,t,r,e),vP(t,n)}return new h9(n,e,t)}class O3{constructor(t){this.queryList=t,this.matches=null}clone(){return new O3(this.queryList)}setDirty(){this.queryList.setDirty()}}class A3{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const i=null!==t.contentQueries?t.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){const o=n.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new A3(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==y9(t,n).matches&&this.queries[n].setDirty()}}class f9{constructor(t,n,i=null){this.predicate=t,this.flags=n,this.read=i}}class T3{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,s=this.getByIndex(i).embeddedTView(t,r);s&&(s.indexInDeclarationView=i,null!==n?n.push(s):n=[s])}return null!==n?new T3(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class D3{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new D3(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(t,n,due(n,s)),this.matchTNodeWithReadOption(t,n,JC(n,t,s,!1,!1))}else i===So?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,JC(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Ts||r===$h||r===So&&4&n.type)this.addMatch(n.index,-2);else{const s=JC(n,t,r,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function due(e,t){const n=e.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function uue(e,t,n,i){return-1===n?function hue(e,t){return 11&e.type?F1(e,t):4&e.type?IP(e,t):null}(t,e):-2===n?function pue(e,t,n){return n===Ts?F1(t,e):n===So?IP(t,e):n===$h?p9(t,e):void 0}(e,t,i):m0(e,e[Gn],n,t)}function m9(e,t,n,i){const r=t[vl].queries[i];if(null===r.matches){const s=e.data,o=n.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:uue(t,s[c],o[l+1],n.metadata.read))}r.matches=a}return r.matches}function I3(e,t,n,i){const r=e.queries.getByIndex(n),s=r.matches;if(null!==s){const o=m9(e,t,r,n);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],d=t[-l];for(let h=Po;h<d.length;h++){const u=d[h];u[eh]===u[ks]&&I3(u[Gn],u,c,i)}if(null!==d[pd]){const h=d[pd];for(let u=0;u<h.length;u++){const p=h[u];I3(p[Gn],p,c,i)}}}}}return i}function Yr(e){const t=ln(),n=Dr(),i=ju();Wh(i+1);const r=y9(n,i);if(e.dirty&&function yl(e){return 4==(4&e[tr])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)e.reset([]);else{const s=r.crossesNgTemplate?I3(n,t,i,[]):m9(n,t,r,i);e.reset(s,ale),e.notifyOnChanges()}return!0}return!1}function bl(e,t,n){const i=Dr();i.firstCreatePass&&(v9(i,new f9(e,t,n),-1),2==(2&t)&&(i.staticViewQueries=!0)),g9(i,ln(),t)}function $r(){return function fue(e,t){return e[vl].queries[t].queryList}(ln(),ju())}function g9(e,t,n){const i=new S3(4==(4&n));i8(e,t,i,i.destroy),null===t[vl]&&(t[vl]=new A3),t[vl].queries.push(new O3(i))}function v9(e,t,n){null===e.queries&&(e.queries=new T3),e.queries.track(new D3(t,n))}function y9(e,t){return e.queries.getByIndex(t)}function xd(e,t){return IP(e,t)}const Ys=fx("Input",e=>({bindingPropertyName:e})),Vx=fx("Output",e=>({bindingPropertyName:e})),Dm=fx("HostListener",(e,t)=>({eventName:e,args:t}));function kP(...e){}const NP=new ui("Application Initializer");let LP=(()=>{class e{constructor(n){this.appInits=n,this.resolve=kP,this.reject=kP,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const n=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Dx(s))n.push(s);else if(a3(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});n.push(o)}}Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),0===n.length&&i(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(Jt(NP,8))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const jx=new ui("AppId",{providedIn:"root",factory:function F9(){return`${B3()}${B3()}${B3()}`}});function B3(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const B9=new ui("Platform Initializer"),uh=new ui("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),z9=new ui("AnimationModuleType");let Nue=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const tf=new ui("LocaleId",{providedIn:"root",factory:()=>Ai(tf,En.Optional|En.SkipSelf)||function Lue(){return typeof $localize<"u"&&$localize.locale||Q1}()});class Bue{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let U9=(()=>{class e{compileModuleSync(n){return new b3(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const i=this.compileModuleSync(n),s=Jp(Ro(n).declarations).reduce((o,a)=>{const l=Ur(a);return l&&o.push(new Ax(l)),o},[]);return new Bue(i,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Vue=(()=>Promise.resolve(0))();function z3(e){typeof Zone>"u"?Vue.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class _s{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new cr(!1),this.onMicrotaskEmpty=new cr(!1),this.onStable=new cr(!1),this.onError=new cr(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function jue(){let e=fi.requestAnimationFrame,t=fi.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Wue(e){const t=()=>{!function Gue(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(fi,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,V3(e),e.isCheckStableRunning=!0,U3(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),V3(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{try{return H9(e),n.invokeTask(r,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),G9(e)}},onInvoke:(n,i,r,s,o,a,l)=>{try{return H9(e),n.invoke(r,s,o,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),G9(e)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,V3(e),U3(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_s.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(_s.isInAngularZone())throw new pe(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,Hue,kP,kP);try{return s.runTask(o,n,i)}finally{s.cancelTask(o)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}}const Hue={};function U3(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function V3(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function H9(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function G9(e){e._nesting--,U3(e)}class que{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new cr,this.onMicrotaskEmpty=new cr,this.onStable=new cr,this.onError=new cr}run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,r){return t.apply(n,i)}}const W9=new ui(""),FP=new ui("");let G3,j3=(()=>{class e{constructor(n,i,r){this._ngZone=n,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,G3||(function Xue(e){G3=e}(r),r.addToWindow(i)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_s.assertNotInAngularZone(),z3(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())z3(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:r})}whenStable(n,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,i,r){return[]}}return e.\u0275fac=function(n){return new(n||e)(Jt(_s),Jt(H3),Jt(FP))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})(),H3=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return G3?.findTestabilityInTree(this,n,i)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const nf=!1;let Im=null;const q9=new ui("AllowMultipleToken"),W3=new ui("PlatformDestroyListeners"),X9=new ui("appBootstrapListener");class Y9{constructor(t,n){this.name=t,this.token=n}}function K9(e,t,n=[]){const i=`Platform: ${t}`,r=new ui(i);return(s=[])=>{let o=q3();if(!o||o.injector.get(q9,!1)){const a=[...n,...s,{provide:r,useValue:!0}];e?e(a):function Kue(e){if(Im&&!Im.get(q9,!1))throw new pe(400,!1);Im=e;const t=e.get(Q9);(function $9(e){const t=e.get(B9,null);t&&t.forEach(n=>n())})(e)}(function Z9(e=[],t){return Rl.create({name:t,providers:[{provide:ND,useValue:"platform"},{provide:W3,useValue:new Set([()=>Im=null])},...e]})}(a,i))}return function Que(e){const t=q3();if(!t)throw new pe(401,!1);return t}()}}function q3(){return Im?.get(Q9)??null}let Q9=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const r=function e7(e,t){let n;return n="noop"===e?new que:("zone.js"===e?void 0:e)||new _s(t),n}(i?.ngZone,function J9(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:_s,useValue:r}];return r.run(()=>{const o=Rl.create({providers:s,parent:this.injector,name:n.moduleType.name}),a=n.create(o),l=a.injector.get(w0,null);if(!l)throw new pe(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:d=>{l.handleError(d)}});a.onDestroy(()=>{BP(this._modules,a),c.unsubscribe()})}),function t7(e,t,n){try{const i=n();return Dx(i)?i.catch(r=>{throw t.runOutsideAngular(()=>e.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}(l,r,()=>{const c=a.injector.get(LP);return c.runInitializers(),c.donePromise.then(()=>(function wV(e){Nn(e,"Expected localeId to be defined"),"string"==typeof e&&(xV=e.toLowerCase().replace(/_/g,"-"))}(a.injector.get(tf,Q1)||Q1),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,i=[]){const r=n7({},i);return function Yue(e,t,n){const i=new b3(n);return Promise.resolve(i)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(n){const i=n.injector.get(T0);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new pe(-403,!1);n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const n=this._injector.get(W3,null);n&&(n.forEach(i=>i()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(Jt(Rl))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function n7(e,t){return Array.isArray(t)?t.reduce(n7,e):{...e,...t}}let T0=(()=>{class e{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,i,r){this._zone=n,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new T.y(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new T.y(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{_s.assertNotInAngularZone(),z3(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{_s.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=(0,Y.T)(s,o.pipe((0,H.B)()))}bootstrap(n,i){const r=n instanceof R6;if(!this._injector.get(LP).done){!r&&function dd(e){const t=Ur(e)||Io(e)||ho(e);return null!==t&&t.standalone}(n);throw new pe(405,nf)}let o;o=r?n:this._injector.get(L1).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function $ue(e){return e.isBoundToModule}(o)?void 0:this._injector.get(J1),c=o.create(Rl.NULL,[],i||o.selector,a),d=c.location.nativeElement,h=c.injector.get(W9,null);return h?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),BP(this.components,c),h?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;BP(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const i=this._injector.get(X9,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>BP(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new pe(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(Jt(_s),Jt(qu),Jt(w0))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function BP(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let Zh=(()=>{class e{}return e.__NG_ELEMENT_ID__=epe,e})();function epe(e){return function tpe(e,t,n){if(jh(e)&&!n){const i=ys(e.index,t);return new Ox(i,i)}return 47&e.type?new Ox(t[_o],t):null}(ji(),ln(),16==(16&e))}class a7{constructor(){}supports(t){return wP(t)}create(t){return new ape(t)}}const ope=(e,t)=>t;class ape{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ope}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,r=0,s=null;for(;n||i;){const o=!i||n&&n.currentIndex<c7(i,r,s)?n:i,a=c7(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(n=n._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,d=l-r;if(c!=d){for(let u=0;u<c;u++){const p=u<s.length?s[u]:s[u]=0,m=p+u;d<=m&&m<c&&(s[u]=p+1)}s[o.previousIndex]=d-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!wP(t))throw new pe(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,n=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),i=!0),n=n._next}else r=0,function Xce(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let i;for(;!(i=n.next()).done;)t(i.value)}}(t,a=>{o=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,a,o,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,r)):t=this._addAfter(new lpe(n,i),s,r),t}_verifyReinsertion(t,n,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){const r=null===n?this._itHead:n._next;return t._next=r,t._prev=n,null===r?this._itTail=t:r._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new l7),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,i=t._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new l7),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class lpe{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class cpe{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const n=t._prevDup,i=t._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class l7{constructor(){this.map=new Map}put(t){const n=t.trackById;let i=this.map.get(n);i||(i=new cpe,this.map.set(n,i)),i.add(t)}get(t,n){const r=this.map.get(t);return r?r.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function c7(e,t,n){const i=e.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+t+r}class d7{constructor(){}supports(t){return t instanceof Map||s3(t)}create(){return new dpe}}class dpe{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||s3(t)))throw new pe(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const i=t._prev;return n._next=t,n._prev=i,t._prev=n,i&&(i._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,n);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new hpe(t);return this._records.set(t,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(i=>n(t[i],i))}}class hpe{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function h7(){return new VP([new a7])}let VP=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(null!=i){const r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||h7()),deps:[[e,new D1,new y0]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(null!=i)return i;throw new pe(901,!1)}}return e.\u0275prov=Gt({token:e,providedIn:"root",factory:h7}),e})();function u7(){return new Hx([new d7])}let Hx=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(i){const r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||u7()),deps:[[e,new D1,new y0]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(i)return i;throw new pe(901,!1)}}return e.\u0275prov=Gt({token:e,providedIn:"root",factory:u7}),e})();const fpe=K9(null,"core",[]);let mpe=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(Jt(T0))},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({}),e})();function ny(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function Q3(e,t){const n=Ur(e),i=t.elementInjector||pP();return new Ax(n).create(i,t.projectableNodes,t.hostElement,t.environmentInjector)}let J3=null;function Qu(){return J3}class ype{}const Js=new ui("DocumentToken");let eI=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:function(){return function _pe(){return Jt(p7)}()},providedIn:"platform"}),e})();const bpe=new ui("Location Initialized");let p7=(()=>{class e extends eI{constructor(n){super(),this._doc=n,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Qu().getBaseHref(this._doc)}onPopState(n){const i=Qu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){const i=Qu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,i,r){f7()?this._history.pushState(n,i,r):this._location.hash=r}replaceState(n,i,r){f7()?this._history.replaceState(n,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(Jt(Js))},e.\u0275prov=Gt({token:e,factory:function(){return function xpe(){return new p7(Jt(Js))}()},providedIn:"platform"}),e})();function f7(){return!!window.history.pushState}function tI(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function m7(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function rf(e){return e&&"?"!==e[0]?"?"+e:e}let Rm=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:function(){return Ai(v7)},providedIn:"root"}),e})();const g7=new ui("appBaseHref");let v7=(()=>{class e extends Rm{constructor(n,i){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Ai(Js).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return tI(this._baseHref,n)}path(n=!1){const i=this._platformLocation.pathname+rf(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,s){const o=this.prepareExternalUrl(r+rf(s));this._platformLocation.pushState(n,i,o)}replaceState(n,i,r,s){const o=this.prepareExternalUrl(r+rf(s));this._platformLocation.replaceState(n,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(Jt(eI),Jt(g7,8))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),wpe=(()=>{class e extends Rm{constructor(n,i){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(n){const i=tI(this._baseHref,n);return i.length>0?"#"+i:i}pushState(n,i,r,s){let o=this.prepareExternalUrl(r+rf(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,i,o)}replaceState(n,i,r,s){let o=this.prepareExternalUrl(r+rf(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(Jt(eI),Jt(g7,8))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})(),km=(()=>{class e{constructor(n){this._subject=new cr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const i=this._locationStrategy.getBaseHref();this._basePath=function Ppe(e){if(new RegExp("^(https?:)?//").test(e)){const[,n]=e.split(/\/\/[^\/]+/);return n}return e}(m7(y7(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+rf(i))}normalize(n){return e.stripTrailingSlash(function Cpe(e,t){if(!e||!t.startsWith(e))return t;const n=t.substring(e.length);return""===n||["/",";","?","#"].includes(n[0])?n:t}(this._basePath,y7(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._locationStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+rf(i)),r)}replaceState(n,i="",r=null){this._locationStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+rf(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i,complete:r})}}return e.normalizeQueryParams=rf,e.joinWithSlash=tI,e.stripTrailingSlash=m7,e.\u0275fac=function(n){return new(n||e)(Jt(Rm))},e.\u0275prov=Gt({token:e,factory:function(){return function Mpe(){return new km(Jt(Rm))}()},providedIn:"root"}),e})();function y7(e){return e.replace(/\/index.html$/,"")}var Qo=(()=>((Qo=Qo||{})[Qo.Format=0]="Format",Qo[Qo.Standalone=1]="Standalone",Qo))(),Kr=(()=>((Kr=Kr||{})[Kr.Narrow=0]="Narrow",Kr[Kr.Abbreviated=1]="Abbreviated",Kr[Kr.Wide=2]="Wide",Kr[Kr.Short=3]="Short",Kr))(),Eo=(()=>((Eo=Eo||{})[Eo.Short=0]="Short",Eo[Eo.Medium=1]="Medium",Eo[Eo.Long=2]="Long",Eo[Eo.Full=3]="Full",Eo))(),Hi=(()=>((Hi=Hi||{})[Hi.Decimal=0]="Decimal",Hi[Hi.Group=1]="Group",Hi[Hi.List=2]="List",Hi[Hi.PercentSign=3]="PercentSign",Hi[Hi.PlusSign=4]="PlusSign",Hi[Hi.MinusSign=5]="MinusSign",Hi[Hi.Exponential=6]="Exponential",Hi[Hi.SuperscriptingExponent=7]="SuperscriptingExponent",Hi[Hi.PerMille=8]="PerMille",Hi[Hi.Infinity=9]="Infinity",Hi[Hi.NaN=10]="NaN",Hi[Hi.TimeSeparator=11]="TimeSeparator",Hi[Hi.CurrencyDecimal=12]="CurrencyDecimal",Hi[Hi.CurrencyGroup=13]="CurrencyGroup",Hi))();function jP(e,t){return fh(ic(e)[Jn.DateFormat],t)}function HP(e,t){return fh(ic(e)[Jn.TimeFormat],t)}function GP(e,t){return fh(ic(e)[Jn.DateTimeFormat],t)}function ph(e,t){const n=ic(e),i=n[Jn.NumberSymbols][t];if(typeof i>"u"){if(t===Hi.CurrencyDecimal)return n[Jn.NumberSymbols][Hi.Decimal];if(t===Hi.CurrencyGroup)return n[Jn.NumberSymbols][Hi.Group]}return i}function b7(e){if(!e[Jn.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[Jn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function fh(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new Error("Locale data API: locale data undefined")}function iI(e){const[t,n]=e.split(":");return{hours:+t,minutes:+n}}const Bpe=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Gx={},zpe=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Fa=(()=>((Fa=Fa||{})[Fa.Short=0]="Short",Fa[Fa.ShortGMT=1]="ShortGMT",Fa[Fa.Long=2]="Long",Fa[Fa.Extended=3]="Extended",Fa))(),Yi=(()=>((Yi=Yi||{})[Yi.FullYear=0]="FullYear",Yi[Yi.Month=1]="Month",Yi[Yi.Date=2]="Date",Yi[Yi.Hours=3]="Hours",Yi[Yi.Minutes=4]="Minutes",Yi[Yi.Seconds=5]="Seconds",Yi[Yi.FractionalSeconds=6]="FractionalSeconds",Yi[Yi.Day=7]="Day",Yi))(),Ir=(()=>((Ir=Ir||{})[Ir.DayPeriods=0]="DayPeriods",Ir[Ir.Days=1]="Days",Ir[Ir.Months=2]="Months",Ir[Ir.Eras=3]="Eras",Ir))();function Upe(e,t,n,i){let r=function $pe(e){if(M7(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[r,s=1,o=1]=e.split("-").map(a=>+a);return WP(r,s-1,o)}const n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let i;if(i=e.match(Bpe))return function Kpe(e){const t=new Date(0);let n=0,i=0;const r=e[8]?t.setUTCFullYear:t.setFullYear,s=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),i=Number(e[9]+e[11])),r.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));const o=Number(e[4]||0)-n,a=Number(e[5]||0)-i,l=Number(e[6]||0),c=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return s.call(t,o,a,l,c),t}(i)}const t=new Date(e);if(!M7(t))throw new Error(`Unable to convert "${e}" into a date`);return t}(e);t=sf(n,t)||t;let a,o=[];for(;t;){if(a=zpe.exec(t),!a){o.push(t);break}{o=o.concat(a.slice(1));const d=o.pop();if(!d)break;t=d}}let l=r.getTimezoneOffset();i&&(l=w7(i,l),r=function Ype(e,t,n){const i=n?-1:1,r=e.getTimezoneOffset();return function Xpe(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,i*(w7(t,r)-r))}(r,i,!0));let c="";return o.forEach(d=>{const h=function qpe(e){if(sI[e])return sI[e];let t;switch(e){case"G":case"GG":case"GGG":t=oo(Ir.Eras,Kr.Abbreviated);break;case"GGGG":t=oo(Ir.Eras,Kr.Wide);break;case"GGGGG":t=oo(Ir.Eras,Kr.Narrow);break;case"y":t=ya(Yi.FullYear,1,0,!1,!0);break;case"yy":t=ya(Yi.FullYear,2,0,!0,!0);break;case"yyy":t=ya(Yi.FullYear,3,0,!1,!0);break;case"yyyy":t=ya(Yi.FullYear,4,0,!1,!0);break;case"Y":t=$P(1);break;case"YY":t=$P(2,!0);break;case"YYY":t=$P(3);break;case"YYYY":t=$P(4);break;case"M":case"L":t=ya(Yi.Month,1,1);break;case"MM":case"LL":t=ya(Yi.Month,2,1);break;case"MMM":t=oo(Ir.Months,Kr.Abbreviated);break;case"MMMM":t=oo(Ir.Months,Kr.Wide);break;case"MMMMM":t=oo(Ir.Months,Kr.Narrow);break;case"LLL":t=oo(Ir.Months,Kr.Abbreviated,Qo.Standalone);break;case"LLLL":t=oo(Ir.Months,Kr.Wide,Qo.Standalone);break;case"LLLLL":t=oo(Ir.Months,Kr.Narrow,Qo.Standalone);break;case"w":t=rI(1);break;case"ww":t=rI(2);break;case"W":t=rI(1,!0);break;case"d":t=ya(Yi.Date,1);break;case"dd":t=ya(Yi.Date,2);break;case"c":case"cc":t=ya(Yi.Day,1);break;case"ccc":t=oo(Ir.Days,Kr.Abbreviated,Qo.Standalone);break;case"cccc":t=oo(Ir.Days,Kr.Wide,Qo.Standalone);break;case"ccccc":t=oo(Ir.Days,Kr.Narrow,Qo.Standalone);break;case"cccccc":t=oo(Ir.Days,Kr.Short,Qo.Standalone);break;case"E":case"EE":case"EEE":t=oo(Ir.Days,Kr.Abbreviated);break;case"EEEE":t=oo(Ir.Days,Kr.Wide);break;case"EEEEE":t=oo(Ir.Days,Kr.Narrow);break;case"EEEEEE":t=oo(Ir.Days,Kr.Short);break;case"a":case"aa":case"aaa":t=oo(Ir.DayPeriods,Kr.Abbreviated);break;case"aaaa":t=oo(Ir.DayPeriods,Kr.Wide);break;case"aaaaa":t=oo(Ir.DayPeriods,Kr.Narrow);break;case"b":case"bb":case"bbb":t=oo(Ir.DayPeriods,Kr.Abbreviated,Qo.Standalone,!0);break;case"bbbb":t=oo(Ir.DayPeriods,Kr.Wide,Qo.Standalone,!0);break;case"bbbbb":t=oo(Ir.DayPeriods,Kr.Narrow,Qo.Standalone,!0);break;case"B":case"BB":case"BBB":t=oo(Ir.DayPeriods,Kr.Abbreviated,Qo.Format,!0);break;case"BBBB":t=oo(Ir.DayPeriods,Kr.Wide,Qo.Format,!0);break;case"BBBBB":t=oo(Ir.DayPeriods,Kr.Narrow,Qo.Format,!0);break;case"h":t=ya(Yi.Hours,1,-12);break;case"hh":t=ya(Yi.Hours,2,-12);break;case"H":t=ya(Yi.Hours,1);break;case"HH":t=ya(Yi.Hours,2);break;case"m":t=ya(Yi.Minutes,1);break;case"mm":t=ya(Yi.Minutes,2);break;case"s":t=ya(Yi.Seconds,1);break;case"ss":t=ya(Yi.Seconds,2);break;case"S":t=ya(Yi.FractionalSeconds,1);break;case"SS":t=ya(Yi.FractionalSeconds,2);break;case"SSS":t=ya(Yi.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=XP(Fa.Short);break;case"ZZZZZ":t=XP(Fa.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=XP(Fa.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=XP(Fa.Long);break;default:return null}return sI[e]=t,t}(d);c+=h?h(r,n,l):"''"===d?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function WP(e,t,n){const i=new Date(0);return i.setFullYear(e,t,n),i.setHours(0,0,0),i}function sf(e,t){const n=function Spe(e){return ic(e)[Jn.LocaleId]}(e);if(Gx[n]=Gx[n]||{},Gx[n][t])return Gx[n][t];let i="";switch(t){case"shortDate":i=jP(e,Eo.Short);break;case"mediumDate":i=jP(e,Eo.Medium);break;case"longDate":i=jP(e,Eo.Long);break;case"fullDate":i=jP(e,Eo.Full);break;case"shortTime":i=HP(e,Eo.Short);break;case"mediumTime":i=HP(e,Eo.Medium);break;case"longTime":i=HP(e,Eo.Long);break;case"fullTime":i=HP(e,Eo.Full);break;case"short":const r=sf(e,"shortTime"),s=sf(e,"shortDate");i=qP(GP(e,Eo.Short),[r,s]);break;case"medium":const o=sf(e,"mediumTime"),a=sf(e,"mediumDate");i=qP(GP(e,Eo.Medium),[o,a]);break;case"long":const l=sf(e,"longTime"),c=sf(e,"longDate");i=qP(GP(e,Eo.Long),[l,c]);break;case"full":const d=sf(e,"fullTime"),h=sf(e,"fullDate");i=qP(GP(e,Eo.Full),[d,h])}return i&&(Gx[n][t]=i),i}function qP(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,i){return null!=t&&i in t?t[i]:n})),e}function Qh(e,t,n="-",i,r){let s="";(e<0||r&&e<=0)&&(r?e=1-e:(e=-e,s=n));let o=String(e);for(;o.length<t;)o="0"+o;return i&&(o=o.slice(o.length-t)),s+o}function ya(e,t,n=0,i=!1,r=!1){return function(s,o){let a=function jpe(e,t){switch(e){case Yi.FullYear:return t.getFullYear();case Yi.Month:return t.getMonth();case Yi.Date:return t.getDate();case Yi.Hours:return t.getHours();case Yi.Minutes:return t.getMinutes();case Yi.Seconds:return t.getSeconds();case Yi.FractionalSeconds:return t.getMilliseconds();case Yi.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,s);if((n>0||a>-n)&&(a+=n),e===Yi.Hours)0===a&&-12===n&&(a=12);else if(e===Yi.FractionalSeconds)return function Vpe(e,t){return Qh(e,3).substring(0,t)}(a,t);const l=ph(o,Hi.MinusSign);return Qh(a,t,l,i,r)}}function oo(e,t,n=Qo.Format,i=!1){return function(r,s){return function Hpe(e,t,n,i,r,s){switch(n){case Ir.Months:return function Ape(e,t,n){const i=ic(e),s=fh([i[Jn.MonthsFormat],i[Jn.MonthsStandalone]],t);return fh(s,n)}(t,r,i)[e.getMonth()];case Ir.Days:return function Ope(e,t,n){const i=ic(e),s=fh([i[Jn.DaysFormat],i[Jn.DaysStandalone]],t);return fh(s,n)}(t,r,i)[e.getDay()];case Ir.DayPeriods:const o=e.getHours(),a=e.getMinutes();if(s){const c=function Rpe(e){const t=ic(e);return b7(t),(t[Jn.ExtraData][2]||[]).map(i=>"string"==typeof i?iI(i):[iI(i[0]),iI(i[1])])}(t),d=function kpe(e,t,n){const i=ic(e);b7(i);const s=fh([i[Jn.ExtraData][0],i[Jn.ExtraData][1]],t)||[];return fh(s,n)||[]}(t,r,i),h=c.findIndex(u=>{if(Array.isArray(u)){const[p,m]=u,v=o>=p.hours&&a>=p.minutes,g=o<m.hours||o===m.hours&&a<m.minutes;if(p.hours<m.hours){if(v&&g)return!0}else if(v||g)return!0}else if(u.hours===o&&u.minutes===a)return!0;return!1});if(-1!==h)return d[h]}return function Epe(e,t,n){const i=ic(e),s=fh([i[Jn.DayPeriodsFormat],i[Jn.DayPeriodsStandalone]],t);return fh(s,n)}(t,r,i)[o<12?0:1];case Ir.Eras:return function Tpe(e,t){return fh(ic(e)[Jn.Eras],t)}(t,i)[e.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(r,s,e,t,n,i)}}function XP(e){return function(t,n,i){const r=-1*i,s=ph(n,Hi.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(e){case Fa.Short:return(r>=0?"+":"")+Qh(o,2,s)+Qh(Math.abs(r%60),2,s);case Fa.ShortGMT:return"GMT"+(r>=0?"+":"")+Qh(o,1,s);case Fa.Long:return"GMT"+(r>=0?"+":"")+Qh(o,2,s)+":"+Qh(Math.abs(r%60),2,s);case Fa.Extended:return 0===i?"Z":(r>=0?"+":"")+Qh(o,2,s)+":"+Qh(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${e}"`)}}}const Gpe=0,YP=4;function x7(e){return WP(e.getFullYear(),e.getMonth(),e.getDate()+(YP-e.getDay()))}function rI(e,t=!1){return function(n,i){let r;if(t){const s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();r=1+Math.floor((o+s)/7)}else{const s=x7(n),o=function Wpe(e){const t=WP(e,Gpe,1).getDay();return WP(e,0,1+(t<=YP?YP:YP+7)-t)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return Qh(r,e,ph(i,Hi.MinusSign))}}function $P(e,t=!1){return function(n,i){return Qh(x7(n).getFullYear(),e,ph(i,Hi.MinusSign),t)}}const sI={};function w7(e,t){e=e.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function M7(e){return e instanceof Date&&!isNaN(e.valueOf())}function E7(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const i=n.indexOf("="),[r,s]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}const hI=/\s+/,O7=[];let qx=(()=>{class e{constructor(n,i,r,s){this._iterableDiffers=n,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=O7,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(hI):O7}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(hI):n}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const i of n)this._updateState(i,!0);else if(null!=n)for(const i of Object.keys(n))this._updateState(i,Boolean(n[i]));this._applyStateDiff()}_updateState(n,i){const r=this.stateMap.get(n);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(n,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const i=n[0],r=n[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(n,i){(n=n.trim()).length>0&&n.split(hI).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return e.\u0275fac=function(n){return new(n||e)(Ne(VP),Ne(Hx),Ne(Ts),Ne(ga))},e.\u0275dir=xn({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),e})();class cfe{constructor(t,n,i,r){this.$implicit=t,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ba=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,i,r){this._viewContainer=n,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const i=this._viewContainer;n.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new cfe(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),D7(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(r=>{D7(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(n,i){return!0}}return e.\u0275fac=function(n){return new(n||e)(Ne($h),Ne(So),Ne(VP))},e.\u0275dir=xn({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function D7(e,t){e.context.$implicit=t.item}let il=(()=>{class e{constructor(n,i){this._viewContainer=n,this._context=new hfe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){I7("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){I7("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,i){return!0}}return e.\u0275fac=function(n){return new(n||e)(Ne($h),Ne(So))},e.\u0275dir=xn({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class hfe{constructor(){this.$implicit=null,this.ngIf=null}}function I7(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${F(t)}'.`)}class uI{constructor(t,n){this._viewContainerRef=t,this._templateRef=n,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let ZP=(()=>{class e{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(n){this._ngSwitch=n,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(n){this._defaultViews.push(n)}_matchCase(n){const i=n==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(n){if(this._defaultViews.length>0&&n!==this._defaultUsed){this._defaultUsed=n;for(const i of this._defaultViews)i.enforceState(n)}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=xn({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),e})(),R7=(()=>{class e{constructor(n,i,r){this.ngSwitch=r,r._addCase(),this._view=new uI(n,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return e.\u0275fac=function(n){return new(n||e)(Ne($h),Ne(So),Ne(ZP,9))},e.\u0275dir=xn({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),e})(),k7=(()=>{class e{constructor(n,i,r){r._addDefault(new uI(n,i))}}return e.\u0275fac=function(n){return new(n||e)(Ne($h),Ne(So),Ne(ZP,9))},e.\u0275dir=xn({type:e,selectors:[["","ngSwitchDefault",""]],standalone:!0}),e})(),I0=(()=>{class e{constructor(n,i,r){this._ngEl=n,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,i){const[r,s]=n.split("."),o=-1===r.indexOf("-")?void 0:Bc.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(n){n.forEachRemovedItem(i=>this._setStyle(i.key,null)),n.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),n.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return e.\u0275fac=function(n){return new(n||e)(Ne(Ts),Ne(Hx),Ne(ga))},e.\u0275dir=xn({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),e})(),iy=(()=>{class e{constructor(n){this._viewContainerRef=n,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(n){if(n.ngTemplateOutlet||n.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&n.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return e.\u0275fac=function(n){return new(n||e)(Ne($h))},e.\u0275dir=xn({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[O]}),e})();function Jh(e,t){return new pe(2100,!1)}const Mfe=new ui("DATE_PIPE_DEFAULT_TIMEZONE"),Cfe=new ui("DATE_PIPE_DEFAULT_OPTIONS");let L7=(()=>{class e{constructor(n,i,r){this.locale=n,this.defaultTimezone=i,this.defaultOptions=r}transform(n,i,r,s){if(null==n||""===n||n!=n)return null;try{return Upe(n,i??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,r??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw Jh()}}}return e.\u0275fac=function(n){return new(n||e)(Ne(tf,16),Ne(Mfe,24),Ne(Cfe,24))},e.\u0275pipe=Mo({name:"date",type:e,pure:!0,standalone:!0}),e})(),B7=(()=>{class e{transform(n,i,r){if(null==n)return null;if(!this.supports(n))throw Jh();return n.slice(i,r)}supports(n){return"string"==typeof n||Array.isArray(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=Mo({name:"slice",type:e,pure:!1,standalone:!0}),e})(),sc=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({}),e})();const z7="browser";function mI(e){return e===z7}let Ffe=(()=>{class e{}return e.\u0275prov=Gt({token:e,providedIn:"root",factory:()=>new Bfe(Jt(Js),window)}),e})();class Bfe{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function zfe(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=U7(this.window.history)||U7(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function U7(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class V7{}class ume extends ype{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class yI extends ume{static makeCurrent(){!function vpe(e){J3||(J3=e)}(new yI)}onAndCancel(t,n,i){return t.addEventListener(n,i,!1),()=>{t.removeEventListener(n,i,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function pme(){return Yx=Yx||document.querySelector("base"),Yx?Yx.getAttribute("href"):null}();return null==n?null:function fme(e){eS=eS||document.createElement("a"),eS.setAttribute("href",e);const t=eS.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){Yx=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return E7(document.cookie,t)}}let eS,Yx=null;const q7=new ui("TRANSITION_ID"),gme=[{provide:NP,useFactory:function mme(e,t,n){return()=>{n.get(LP).donePromise.then(()=>{const i=Qu(),r=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[q7,Js,Rl],multi:!0}];let yme=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();const tS=new ui("EventManagerPlugins");let $x=(()=>{class e{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(r=>{r.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,i,r){return this._findPluginFor(i).addEventListener(n,i,r)}addGlobalEventListener(n,i,r){return this._findPluginFor(i).addGlobalEventListener(n,i,r)}getZone(){return this._zone}_findPluginFor(n){const i=this._eventNameToPlugin.get(n);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(Jt(tS),Jt(_s))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();class X7{constructor(t){this._doc=t}addGlobalEventListener(t,n,i){const r=Qu().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${n}`);return this.addEventListener(r,n,i)}}let Y7=(()=>{class e{constructor(){this.usageCount=new Map}addStyles(n){for(const i of n)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(n){for(const i of n)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(n){}onStyleAdded(n){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(n,i){const r=this.usageCount;let s=r.get(n)??0;return s+=i,s>0?r.set(n,s):r.delete(n),s}ngOnDestroy(){for(const n of this.getAllStyles())this.onStyleRemoved(n);this.usageCount.clear()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})(),Kx=(()=>{class e extends Y7{constructor(n){super(),this.doc=n,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(n){for(const i of this.hostNodes)this.addStyleToHost(i,n)}onStyleRemoved(n){const i=this.styleRef;i.get(n)?.forEach(s=>s.remove()),i.delete(n)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const i of this.getAllStyles())this.addStyleToHost(n,i)}removeHost(n){this.hostNodes.delete(n)}addStyleToHost(n,i){const r=this.doc.createElement("style");r.textContent=i,n.appendChild(r);const s=this.styleRef.get(i);s?s.push(r):this.styleRef.set(i,[r])}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return e.\u0275fac=function(n){return new(n||e)(Jt(Js))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();const _I={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},bI=/%COMP%/g,Z7=new ui("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Q7(e,t){return t.flat(100).map(n=>n.replace(bI,e))}function J7(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let nS=(()=>{class e{constructor(n,i,r,s){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new xI(n)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;const r=this.getOrCreateRenderer(n,i);return r instanceof nj?r.applyToHost(n):r instanceof wI&&r.applyStyles(),r}getOrCreateRenderer(n,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(i.encapsulation){case xi.Emulated:s=new nj(o,a,i,this.appId,l);break;case xi.ShadowDom:return new Pme(o,a,n,i);default:s=new wI(o,a,i,l)}s.onDestroy=()=>r.delete(i.id),r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(Jt($x),Jt(Kx),Jt(jx),Jt(Z7))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();class xI{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(_I[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(tj(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(tj(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,r){if(r){n=r+":"+n;const s=_I[r];s?t.setAttributeNS(s,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){const r=_I[i];r?t.removeAttributeNS(r,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,r){r&(Bc.DashCase|Bc.Important)?t.style.setProperty(n,i,r&Bc.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&Bc.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t[n]=i}setValue(t,n){t.nodeValue=n}listen(t,n,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,J7(i)):this.eventManager.addEventListener(t,n,J7(i))}}function tj(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class Pme extends xI{constructor(t,n,i,r){super(t),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Q7(r.id,r.styles);for(const o of s){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class wI extends xI{constructor(t,n,i,r,s=i.id){super(t),this.sharedStylesHost=n,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=Q7(s,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class nj extends wI{constructor(t,n,i,r,s){const o=r+"-"+i.id;super(t,n,i,s,o),this.contentAttr=function wme(e){return"_ngcontent-%COMP%".replace(bI,e)}(o),this.hostAttr=function Mme(e){return"_nghost-%COMP%".replace(bI,e)}(o)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}}let Sme=(()=>{class e extends X7{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r){return n.addEventListener(i,r,!1),()=>this.removeEventListener(n,i,r)}removeEventListener(n,i,r){return n.removeEventListener(i,r)}}return e.\u0275fac=function(n){return new(n||e)(Jt(Js))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();const ij=["alt","control","meta","shift"],Eme={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ome={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let Ame=(()=>{class e extends X7{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,i,r){const s=e.parseEventName(i),o=e.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qu().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const i=n.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=e._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),ij.forEach(c=>{const d=i.indexOf(c);d>-1&&(i.splice(d,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(n,i){let r=Eme[n.key]||n.key,s="";return i.indexOf("code.")>-1&&(r=n.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),ij.forEach(o=>{o!==r&&(0,Ome[o])(n)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(n,i,r){return s=>{e.matchEventFullKeyCode(s,n)&&r.runGuarded(()=>i(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(Jt(Js))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();const sj=[{provide:uh,useValue:z7},{provide:B9,useValue:function Tme(){yI.makeCurrent()},multi:!0},{provide:Js,useFactory:function Ime(){return function xae(e){ED=e}(document),document},deps:[]}],Rme=K9(fpe,"browser",sj),oj=new ui(""),aj=[{provide:FP,useClass:class vme{addToWindow(t){fi.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},fi.getAllAngularTestabilities=()=>t.getAllTestabilities(),fi.getAllAngularRootElements=()=>t.getAllRootElements(),fi.frameworkStabilizers||(fi.frameworkStabilizers=[]),fi.frameworkStabilizers.push(i=>{const r=fi.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,n,i){return null==n?null:t.getTestability(n)??(i?Qu().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:W9,useClass:j3,deps:[_s,H3,FP]},{provide:j3,useClass:j3,deps:[_s,H3,FP]}],lj=[{provide:ND,useValue:"root"},{provide:w0,useFactory:function Dme(){return new w0},deps:[]},{provide:tS,useClass:Sme,multi:!0,deps:[Js,_s,uh]},{provide:tS,useClass:Ame,multi:!0,deps:[Js]},{provide:nS,useClass:nS,deps:[$x,Kx,jx,Z7]},{provide:B1,useExisting:nS},{provide:Y7,useExisting:Kx},{provide:Kx,useClass:Kx,deps:[Js]},{provide:$x,useClass:$x,deps:[tS,_s]},{provide:V7,useClass:yme,deps:[]},[]];let cj=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:jx,useValue:n.appId},{provide:q7,useExisting:jx},gme]}}}return e.\u0275fac=function(n){return new(n||e)(Jt(oj,12))},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({providers:[...lj,...aj],imports:[sc,mpe]}),e})(),wd=(()=>{class e{constructor(n){this._doc=n,this._dom=Qu()}addTag(n,i=!1){return n?this._getOrCreateElement(n,i):null}addTags(n,i=!1){return n?n.reduce((r,s)=>(s&&r.push(this._getOrCreateElement(s,i)),r),[]):[]}getTag(n){return n&&this._doc.querySelector(`meta[${n}]`)||null}getTags(n){if(!n)return[];const i=this._doc.querySelectorAll(`meta[${n}]`);return i?[].slice.call(i):[]}updateTag(n,i){if(!n)return null;i=i||this._parseSelector(n);const r=this.getTag(i);return r?this._setMetaElementAttributes(n,r):this._getOrCreateElement(n,!0)}removeTag(n){this.removeTagElement(this.getTag(n))}removeTagElement(n){n&&this._dom.remove(n)}_getOrCreateElement(n,i=!1){if(!i){const o=this._parseSelector(n),a=this.getTags(o).filter(l=>this._containsAttributes(n,l))[0];if(void 0!==a)return a}const r=this._dom.createElement("meta");return this._setMetaElementAttributes(n,r),this._doc.getElementsByTagName("head")[0].appendChild(r),r}_setMetaElementAttributes(n,i){return Object.keys(n).forEach(r=>i.setAttribute(this._getMetaKeyMap(r),n[r])),i}_parseSelector(n){const i=n.name?"name":"property";return`${i}="${n[i]}"`}_containsAttributes(n,i){return Object.keys(n).every(r=>i.getAttribute(this._getMetaKeyMap(r))===n[r])}_getMetaKeyMap(n){return Nme[n]||n}}return e.\u0275fac=function(n){return new(n||e)(Jt(Js))},e.\u0275prov=Gt({token:e,factory:function(n){let i=null;return i=n?new n:function kme(){return new wd(Jt(Js))}(),i},providedIn:"root"}),e})();const Nme={httpEquiv:"http-equiv"};let Md=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(Jt(Js))},e.\u0275prov=Gt({token:e,factory:function(n){let i=null;return i=n?new n:function Lme(){return new Md(Jt(Js))}(),i},providedIn:"root"}),e})();typeof window<"u"&&window;let uj=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:function(n){let i=null;return i=n?new(n||e):Jt(pj),i},providedIn:"root"}),e})(),pj=(()=>{class e extends uj{constructor(n){super(),this._doc=n}sanitize(n,i){if(null==i)return null;switch(n){case ro.NONE:return i;case ro.HTML:return Wu(i,"HTML")?vd(i):x6(this._doc,String(i)).toString();case ro.STYLE:return Wu(i,"Style")?vd(i):i;case ro.SCRIPT:if(Wu(i,"Script"))return vd(i);throw new Error("unsafe value used in a script context");case ro.URL:return Wu(i,"URL")?vd(i):cP(String(i));case ro.RESOURCE_URL:if(Wu(i,"ResourceURL"))return vd(i);throw new Error(`unsafe value used in a resource URL context (see ${de})`);default:throw new Error(`Unexpected SecurityContext ${n} (see ${de})`)}}bypassSecurityTrustHtml(n){return function Oae(e){return new wae(e)}(n)}bypassSecurityTrustStyle(n){return function Aae(e){return new Mae(e)}(n)}bypassSecurityTrustScript(n){return function Tae(e){return new Cae(e)}(n)}bypassSecurityTrustUrl(n){return function Dae(e){return new Pae(e)}(n)}bypassSecurityTrustResourceUrl(n){return function Iae(e){return new Sae(e)}(n)}}return e.\u0275fac=function(n){return new(n||e)(Jt(Js))},e.\u0275prov=Gt({token:e,factory:function(n){let i=null;return i=n?new n:function Vme(e){return new pj(e.get(Js))}(Jt(Rl)),i},providedIn:"root"}),e})();class fj{}class jme{}const af="*";function mj(e,t){return{type:7,name:e,definitions:t,options:{}}}function mh(e,t=null){return{type:4,styles:t,timings:e}}function gj(e,t=null){return{type:2,steps:e,options:t}}function za(e){return{type:6,styles:e,offset:null}}function R0(e,t,n){return{type:0,name:e,styles:t,options:n}}function gh(e,t,n=null){return{type:1,expr:e,animation:t,options:n}}function vj(e){Promise.resolve().then(e)}class Zx{constructor(t=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){vj(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class yj{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let n=0,i=0,r=0;const s=this.players.length;0==s?vj(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const n=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,n/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((n,i)=>null===n||i.totalTime>n.totalTime?i:n,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}const PI="!";function _j(e){return new pe(3e3,!1)}function Mge(){return typeof window<"u"&&typeof window.document<"u"}function SI(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Lm(e){switch(e.length){case 0:return new Zx;case 1:return e[0];default:return new yj(e)}}function bj(e,t,n,i,r=new Map,s=new Map){const o=[],a=[];let l=-1,c=null;if(i.forEach(d=>{const h=d.get("offset"),u=h==l,p=u&&c||new Map;d.forEach((m,v)=>{let g=v,b=m;if("offset"!==v)switch(g=t.normalizePropertyName(g,o),b){case PI:b=r.get(v);break;case af:b=s.get(v);break;default:b=t.normalizeStyleValue(v,g,b,o)}p.set(g,b)}),u||a.push(p),c=p,l=h}),o.length)throw function hge(e){return new pe(3502,!1)}();return a}function EI(e,t,n,i){switch(t){case"start":e.onStart(()=>i(n&&OI(n,"start",e)));break;case"done":e.onDone(()=>i(n&&OI(n,"done",e)));break;case"destroy":e.onDestroy(()=>i(n&&OI(n,"destroy",e)))}}function OI(e,t,n){const s=AI(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,n.totalTime??e.totalTime,!!n.disabled),o=e._data;return null!=o&&(s._data=o),s}function AI(e,t,n,i,r="",s=0,o){return{element:e,triggerName:t,fromState:n,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Cd(e,t,n){let i=e.get(t);return i||e.set(t,i=n),i}function xj(e){const t=e.indexOf(":");return[e.substring(1,t),e.slice(t+1)]}let TI=(e,t)=>!1,wj=(e,t,n)=>[],Mj=null;function DI(e){const t=e.parentNode||e.host;return t===Mj?null:t}(SI()||typeof Element<"u")&&(Mge()?(Mj=(()=>document.documentElement)(),TI=(e,t)=>{for(;t;){if(t===e)return!0;t=DI(t)}return!1}):TI=(e,t)=>e.contains(t),wj=(e,t,n)=>{if(n)return Array.from(e.querySelectorAll(t));const i=e.querySelector(t);return i?[i]:[]});let k0=null,Cj=!1;const Pj=TI,Sj=wj;let Ej=(()=>{class e{validateStyleProperty(n){return function Pge(e){k0||(k0=function Sge(){return typeof document<"u"?document.body:null}()||{},Cj=!!k0.style&&"WebkitAppearance"in k0.style);let t=!0;return k0.style&&!function Cge(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in k0.style,!t&&Cj&&(t="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in k0.style)),t}(n)}matchesElement(n,i){return!1}containsElement(n,i){return Pj(n,i)}getParentElement(n){return DI(n)}query(n,i,r){return Sj(n,i,r)}computeStyle(n,i,r){return r||""}animate(n,i,r,s,o,a=[],l){return new Zx(r,s)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})(),II=(()=>{class e{}return e.NOOP=new Ej,e})();const Ege=1e3,RI="ng-enter",iS="ng-leave",rS="ng-trigger",sS=".ng-trigger",Aj="ng-animating",kI=".ng-animating";function lf(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:NI(parseFloat(t[1]),t[2])}function NI(e,t){return"s"===t?e*Ege:e}function oS(e,t,n){return e.hasOwnProperty("duration")?e:function Age(e,t,n){let r,s=0,o="";if("string"==typeof e){const a=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(_j()),{duration:0,delay:0,easing:""};r=NI(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=NI(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=e;if(!n){let a=!1,l=t.length;r<0&&(t.push(function Hme(){return new pe(3100,!1)}()),a=!0),s<0&&(t.push(function Gme(){return new pe(3101,!1)}()),a=!0),a&&t.splice(l,0,_j())}return{duration:r,delay:s,easing:o}}(e,t,n)}function Qx(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function Tj(e){const t=new Map;return Object.keys(e).forEach(n=>{t.set(n,e[n])}),t}function Fm(e,t=new Map,n){if(n)for(let[i,r]of n)t.set(i,r);for(let[i,r]of e)t.set(i,r);return t}function Ij(e,t,n){return n?t+":"+n+";":""}function Rj(e){let t="";for(let n=0;n<e.style.length;n++){const i=e.style.item(n);t+=Ij(0,i,e.style.getPropertyValue(i))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=Ij(0,Rge(n),e.style[n]));e.setAttribute("style",t)}function Ju(e,t,n){e.style&&(t.forEach((i,r)=>{const s=FI(r);n&&!n.has(r)&&n.set(r,e.style[s]),e.style[s]=i}),SI()&&Rj(e))}function N0(e,t){e.style&&(t.forEach((n,i)=>{const r=FI(i);e.style[r]=""}),SI()&&Rj(e))}function Jx(e){return Array.isArray(e)?1==e.length?e[0]:gj(e):e}const LI=new RegExp("{{\\s*(.+?)\\s*}}","g");function kj(e){let t=[];if("string"==typeof e){let n;for(;n=LI.exec(e);)t.push(n[1]);LI.lastIndex=0}return t}function ew(e,t,n){const i=e.toString(),r=i.replace(LI,(s,o)=>{let a=t[o];return null==a&&(n.push(function qme(e){return new pe(3003,!1)}()),a=""),a.toString()});return r==i?e:r}function aS(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const Ige=/-+([a-z0-9])/g;function FI(e){return e.replace(Ige,(...t)=>t[1].toUpperCase())}function Rge(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Pd(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw function Xme(e){return new pe(3004,!1)}()}}function Nj(e,t){return window.getComputedStyle(e)[t]}const dS="*";function zge(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(i=>function Uge(e,t,n){if(":"==e[0]){const l=function Vge(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,i)=>parseFloat(i)>parseFloat(n);case":decrement":return(n,i)=>parseFloat(i)<parseFloat(n);default:return t.push(function age(e){return new pe(3016,!1)}()),"* => *"}}(e,n);if("function"==typeof l)return void t.push(l);e=l}const i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(function oge(e){return new pe(3015,!1)}()),t;const r=i[1],s=i[2],o=i[3];t.push(Lj(r,o));"<"==s[0]&&!(r==dS&&o==dS)&&t.push(Lj(o,r))}(i,n,t)):n.push(e),n}const hS=new Set(["true","1"]),uS=new Set(["false","0"]);function Lj(e,t){const n=hS.has(e)||uS.has(e),i=hS.has(t)||uS.has(t);return(r,s)=>{let o=e==dS||e==r,a=t==dS||t==s;return!o&&n&&"boolean"==typeof r&&(o=r?hS.has(e):uS.has(e)),!a&&i&&"boolean"==typeof s&&(a=s?hS.has(t):uS.has(t)),o&&a}}const jge=new RegExp("s*:selfs*,?","g");function BI(e,t,n,i){return new Hge(e).build(t,n,i)}class Hge{constructor(t){this._driver=t}build(t,n,i){const r=new qge(n);return this._resetContextStyleTimingState(r),Pd(this,Jx(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,n){let i=n.queryCount=0,r=n.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&n.errors.push(function $me(){return new pe(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,s.push(this.visitState(l,n))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,n);i+=l.queryCount,r+=l.depCount,o.push(l)}else n.errors.push(function Kme(){return new pe(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(t,n){const i=this.visitStyle(t.styles,n),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{kj(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(aS(s.values()),n.errors.push(function Zme(e,t){return new pe(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,n){n.queryCount=0,n.depCount=0;const i=Pd(this,Jx(t.animation),n);return{type:1,matchers:zge(t.expr,n.errors),animation:i,queryCount:n.queryCount,depCount:n.depCount,options:L0(t.options)}}visitSequence(t,n){return{type:2,steps:t.steps.map(i=>Pd(this,i,n)),options:L0(t.options)}}visitGroup(t,n){const i=n.currentTime;let r=0;const s=t.steps.map(o=>{n.currentTime=i;const a=Pd(this,o,n);return r=Math.max(r,n.currentTime),a});return n.currentTime=r,{type:3,steps:s,options:L0(t.options)}}visitAnimate(t,n){const i=function Yge(e,t){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return zI(oS(e,t).duration,0,"");const n=e;if(n.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=zI(0,0,"");return s.dynamic=!0,s.strValue=n,s}const r=oS(n,t);return zI(r.duration,r.delay,r.easing)}(t.timings,n.errors);n.currentAnimateTimings=i;let r,s=t.styles?t.styles:za({});if(5==s.type)r=this.visitKeyframes(s,n);else{let o=t.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=za(c)}n.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,n);l.isEmptyStep=a,r=l}return n.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,n){const i=this._makeStyleAst(t,n);return this._validateStyleAst(i,n),i}_makeStyleAst(t,n){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)"string"==typeof a?a===af?i.push(a):n.errors.push(new pe(3002,!1)):i.push(Tj(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,n){const i=n.currentAnimateTimings;let r=n.currentTime,s=n.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=n.collectedStyles.get(n.currentQuerySelector),d=c.get(l);let h=!0;d&&(s!=r&&s>=d.startTime&&r<=d.endTime&&(n.errors.push(function Jme(e,t,n,i,r){return new pe(3010,!1)}()),h=!1),s=d.startTime),h&&c.set(l,{startTime:s,endTime:r}),n.options&&function Dge(e,t,n){const i=t.params||{},r=kj(e);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||n.push(function Wme(e){return new pe(3001,!1)}())})}(a,n.options,n.errors)})})}visitKeyframes(t,n){const i={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function ege(){return new pe(3011,!1)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const d=t.steps.map(b=>{const x=this._makeStyleAst(b,n);let w=null!=x.offset?x.offset:function Xge(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(n=>{if(n instanceof Map&&n.has("offset")){const i=n;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}return t}(x.styles),P=0;return null!=w&&(s++,P=x.offset=w),l=l||P<0||P>1,a=a||P<c,c=P,o.push(P),x});l&&n.errors.push(function tge(){return new pe(3012,!1)}()),a&&n.errors.push(function nge(){return new pe(3200,!1)}());const h=t.steps.length;let u=0;s>0&&s<h?n.errors.push(function ige(){return new pe(3202,!1)}()):0==s&&(u=1/(h-1));const p=h-1,m=n.currentTime,v=n.currentAnimateTimings,g=v.duration;return d.forEach((b,x)=>{const w=u>0?x==p?1:u*x:o[x],P=w*g;n.currentTime=m+v.delay+P,v.duration=P,this._validateStyleAst(b,n),b.offset=w,i.styles.push(b)}),i}visitReference(t,n){return{type:8,animation:Pd(this,Jx(t.animation),n),options:L0(t.options)}}visitAnimateChild(t,n){return n.depCount++,{type:9,options:L0(t.options)}}visitAnimateRef(t,n){return{type:10,animation:this.visitReference(t.animation,n),options:L0(t.options)}}visitQuery(t,n){const i=n.currentQuerySelector,r=t.options||{};n.queryCount++,n.currentQuery=t;const[s,o]=function Gge(e){const t=!!e.split(/\s*,\s*/).find(n=>":self"==n);return t&&(e=e.replace(jge,"")),e=e.replace(/@\*/g,sS).replace(/@\w+/g,n=>sS+"-"+n.slice(1)).replace(/:animating/g,kI),[e,t]}(t.selector);n.currentQuerySelector=i.length?i+" "+s:s,Cd(n.collectedStyles,n.currentQuerySelector,new Map);const a=Pd(this,Jx(t.animation),n);return n.currentQuery=null,n.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:L0(t.options)}}visitStagger(t,n){n.currentQuery||n.errors.push(function rge(){return new pe(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:oS(t.timings,n.errors,!0);return{type:12,animation:Pd(this,Jx(t.animation),n),timings:i,options:null}}}class qge{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function L0(e){return e?(e=Qx(e)).params&&(e.params=function Wge(e){return e?Qx(e):null}(e.params)):e={},e}function zI(e,t,n){return{duration:e,delay:t,easing:n}}function UI(e,t,n,i,r,s,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class pS{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,n){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...n)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Zge=new RegExp(":enter","g"),Jge=new RegExp(":leave","g");function VI(e,t,n,i,r,s=new Map,o=new Map,a,l,c=[]){return(new e0e).buildKeyframes(e,t,n,i,r,s,o,a,l,c)}class e0e{buildKeyframes(t,n,i,r,s,o,a,l,c,d=[]){c=c||new pS;const h=new jI(t,n,c,r,s,d,[]);h.options=l;const u=l.delay?lf(l.delay):0;h.currentTimeline.delayNextStep(u),h.currentTimeline.setStyles([o],null,h.errors,l),Pd(this,i,h);const p=h.timelines.filter(m=>m.containsAnimation());if(p.length&&a.size){let m;for(let v=p.length-1;v>=0;v--){const g=p[v];if(g.element===n){m=g;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,h.errors,l)}return p.length?p.map(m=>m.buildKeyframes()):[UI(n,[],[],[],0,u,"",!1)]}visitTrigger(t,n){}visitState(t,n){}visitTransition(t,n){}visitAnimateChild(t,n){const i=n.subInstructions.get(n.element);if(i){const r=n.createSubContext(t.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=t}visitAnimateRef(t,n){const i=n.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],n,i),this.visitReference(t.animation,i),n.transformIntoNewTimeline(i.currentTimeline.currentTime),n.previousNode=t}_applyAnimationRefDelays(t,n,i){for(const r of t){const s=r?.delay;if(s){const o="number"==typeof s?s:lf(ew(s,r?.params??{},n.errors));i.delayNextStep(o)}}}_visitSubInstructions(t,n,i){let s=n.currentTimeline.currentTime;const o=null!=i.duration?lf(i.duration):null,a=null!=i.delay?lf(i.delay):null;return 0!==o&&t.forEach(l=>{const c=n.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(t,n){n.updateOptions(t.options,!0),Pd(this,t.animation,n),n.previousNode=t}visitSequence(t,n){const i=n.subContextCount;let r=n;const s=t.options;if(s&&(s.params||s.delay)&&(r=n.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=fS);const o=lf(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Pd(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),n.previousNode=t}visitGroup(t,n){const i=[];let r=n.currentTimeline.currentTime;const s=t.options&&t.options.delay?lf(t.options.delay):0;t.steps.forEach(o=>{const a=n.createSubContext(t.options);s&&a.delayNextStep(s),Pd(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(r),n.previousNode=t}_visitTiming(t,n){if(t.dynamic){const i=t.strValue;return oS(n.params?ew(i,n.params,n.errors):i,n.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,n){const i=n.currentAnimateTimings=this._visitTiming(t.timings,n),r=n.currentTimeline;i.delay&&(n.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,n):(n.incrementTime(i.duration),this.visitStyle(s,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=t}visitStyle(t,n){const i=n.currentTimeline,r=n.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,n.errors,n.options),n.previousNode=t}visitKeyframes(t,n){const i=n.currentAnimateTimings,r=n.currentTimeline.duration,s=i.duration,a=n.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(r+s),n.previousNode=t}visitQuery(t,n){const i=n.currentTimeline.currentTime,r=t.options||{},s=r.delay?lf(r.delay):0;s&&(6===n.previousNode.type||0==i&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=fS);let o=i;const a=n.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{n.currentQueryIndex=d;const h=n.createSubContext(t.options,c);s&&h.delayNextStep(s),c===n.element&&(l=h.currentTimeline),Pd(this,t.animation,h),h.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,h.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),l&&(n.currentTimeline.mergeTimelineCollectedStyles(l),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=t}visitStagger(t,n){const i=n.parentContext,r=n.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(n.currentQueryTotal-1);let l=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const d=n.currentTimeline;l&&d.delayNextStep(l);const h=d.currentTime;Pd(this,t.animation,n),n.previousNode=t,i.currentStaggerTime=r.currentTime-h+(r.startTime-i.currentTimeline.startTime)}}const fS={};class jI{constructor(t,n,i,r,s,o,a,l){this._driver=t,this.element=n,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=fS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new mS(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,n){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=lf(i.duration)),null!=i.delay&&(r.delay=lf(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!n||!o.hasOwnProperty(a))&&(o[a]=ew(s[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const n=this.options.params;if(n){const i=t.params={};Object.keys(n).forEach(r=>{i[r]=n[r]})}}return t}createSubContext(t=null,n,i){const r=n||this.element,s=new jI(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=fS,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,n,i){const r={duration:n??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new t0e(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,n,i,r,s,o){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(Zge,"."+this._enterClassName)).replace(Jge,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function sge(e){return new pe(3014,!1)}()),a}}class mS{constructor(t,n,i,r){this._driver=t,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const n=1===this._keyframes.size&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+t),n&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,n){return this.applyStylesToKeyframe(),new mS(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,n){this._localTimelineStyles.set(t,n),this._globalTimelineStyles.set(t,n),this._styleSummary.set(t,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[n,i]of this._globalTimelineStyles)this._backFill.set(n,i||af),this._currentKeyframe.set(n,af);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,n,i,r){n&&this._previousKeyframe.set("easing",n);const s=r&&r.params||{},o=function n0e(e,t){const n=new Map;let i;return e.forEach(r=>{if("*"===r){i=i||t.keys();for(let s of i)n.set(s,af)}else Fm(r,n)}),n}(t,this._globalTimelineStyles);for(let[a,l]of o){const c=ew(l,s,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??af),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,n)=>{this._currentKeyframe.set(n,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,t)}))}snapshotCurrentStyles(){for(let[t,n]of this._localTimelineStyles)this._pendingStyles.set(t,n),this._updateStyle(t,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let n in this._currentKeyframe)t.push(n);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((n,i)=>{const r=this._styleSummary.get(i);(!r||n.time>r.time)&&this._updateStyle(i,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,n=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Fm(a,new Map,this._backFill);c.forEach((d,h)=>{d===PI?t.add(h):d===af&&n.add(h)}),i||c.set("offset",l/this.duration),r.push(c)});const s=t.size?aS(t.values()):[],o=n.size?aS(n.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return UI(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class t0e extends mS{constructor(t,n,i,r,s,o,a=!1){super(t,n,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:n,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){const s=[],o=i+n,a=n/o,l=Fm(t[0]);l.set("offset",0),s.push(l);const c=Fm(t[0]);c.set("offset",zj(a)),s.push(c);const d=t.length-1;for(let h=1;h<=d;h++){let u=Fm(t[h]);const p=u.get("offset");u.set("offset",zj((n+p*i)/o)),s.push(u)}i=o,n=0,r="",t=s}return UI(this.element,t,this.preStyleProps,this.postStyleProps,i,n,r,!0)}}function zj(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class HI{}const i0e=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class r0e extends HI{normalizePropertyName(t,n){return FI(t)}normalizeStyleValue(t,n,i,r){let s="";const o=i.toString().trim();if(i0e.has(n)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Yme(e,t){return new pe(3005,!1)}())}return o+s}}function Uj(e,t,n,i,r,s,o,a,l,c,d,h,u){return{type:0,element:e,triggerName:t,isRemovalTransition:r,fromState:n,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:h,errors:u}}const GI={};class Vj{constructor(t,n,i){this._triggerName=t,this.ast=n,this._stateStyles=i}match(t,n,i,r){return function s0e(e,t,n,i,r){return e.some(s=>s(t,n,i,r))}(this.ast.matchers,t,n,i,r)}buildStyles(t,n,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(n,i):new Map}build(t,n,i,r,s,o,a,l,c,d){const h=[],u=this.ast.options&&this.ast.options.params||GI,m=this.buildStyles(i,a&&a.params||GI,h),v=l&&l.params||GI,g=this.buildStyles(r,v,h),b=new Set,x=new Map,w=new Map,P="void"===r,A={params:o0e(v,u),delay:this.ast.options?.delay},D=d?[]:VI(t,n,this.ast.animation,s,o,m,g,A,c,h);let R=0;if(D.forEach(k=>{R=Math.max(k.duration+k.delay,R)}),h.length)return Uj(n,this._triggerName,i,r,P,m,g,[],[],x,w,R,h);D.forEach(k=>{const L=k.element,Q=Cd(x,L,new Set);k.preStyleProps.forEach(ae=>Q.add(ae));const le=Cd(w,L,new Set);k.postStyleProps.forEach(ae=>le.add(ae)),L!==n&&b.add(L)});const N=aS(b.values());return Uj(n,this._triggerName,i,r,P,m,g,D,N,x,w,R)}}function o0e(e,t){const n=Qx(t);for(const i in e)e.hasOwnProperty(i)&&null!=e[i]&&(n[i]=e[i]);return n}class a0e{constructor(t,n,i){this.styles=t,this.defaultParams=n,this.normalizer=i}buildStyles(t,n){const i=new Map,r=Qx(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=ew(o,r,n));const l=this.normalizer.normalizePropertyName(a,n);o=this.normalizer.normalizeStyleValue(a,l,o,n),i.set(a,o)})}),i}}class c0e{constructor(t,n,i){this.name=t,this.ast=n,this._normalizer=i,this.transitionFactories=[],this.states=new Map,n.states.forEach(r=>{this.states.set(r.name,new a0e(r.style,r.options&&r.options.params||{},i))}),jj(this.states,"true","1"),jj(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new Vj(t,r,this.states))}),this.fallbackTransition=function d0e(e,t,n){return new Vj(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,n,i,r){return this.transitionFactories.find(o=>o.match(t,n,i,r))||null}matchStyles(t,n,i){return this.fallbackTransition.buildStyles(t,n,i)}}function jj(e,t,n){e.has(t)?e.has(n)||e.set(n,e.get(t)):e.has(n)&&e.set(t,e.get(n))}const h0e=new pS;class u0e{constructor(t,n,i){this.bodyNode=t,this._driver=n,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,n){const i=[],r=[],s=BI(this._driver,n,i,r);if(i.length)throw function uge(e){return new pe(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,n,i){const r=t.element,s=bj(0,this._normalizer,0,t.keyframes,n,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,n,i={}){const r=[],s=this._animations.get(t);let o;const a=new Map;if(s?(o=VI(this._driver,n,s,RI,iS,new Map,new Map,i,h0e,r),o.forEach(d=>{const h=Cd(a,d.element,new Map);d.postStyleProps.forEach(u=>h.set(u,null))})):(r.push(function pge(){return new pe(3300,!1)}()),o=[]),r.length)throw function fge(e){return new pe(3504,!1)}();a.forEach((d,h)=>{d.forEach((u,p)=>{d.set(p,this._driver.computeStyle(h,p,af))})});const c=Lm(o.map(d=>{const h=a.get(d.element);return this._buildPlayer(d,new Map,h)}));return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const n=this._getPlayer(t);n.destroy(),this._playersById.delete(t);const i=this.players.indexOf(n);i>=0&&this.players.splice(i,1)}_getPlayer(t){const n=this._playersById.get(t);if(!n)throw function mge(e){return new pe(3301,!1)}();return n}listen(t,n,i,r){const s=AI(n,"","","");return EI(this._getPlayer(t),i,s,r),()=>{}}command(t,n,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,n,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Hj="ng-animate-queued",WI="ng-animate-disabled",v0e=[],Gj={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},y0e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},vh="__ng_removed";class qI{get params(){return this.options.params}constructor(t,n=""){this.namespaceId=n;const i=t&&t.hasOwnProperty("value");if(this.value=function w0e(e){return e??null}(i?t.value:t),i){const s=Qx(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const n=t.params;if(n){const i=this.options.params;Object.keys(n).forEach(r=>{null==i[r]&&(i[r]=n[r])})}}}const tw="void",XI=new qI(tw);class _0e{constructor(t,n,i){this.id=t,this.hostElement=n,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,yh(n,this._hostClassName)}listen(t,n,i,r){if(!this._triggers.has(n))throw function gge(e,t){return new pe(3302,!1)}();if(null==i||0==i.length)throw function vge(e){return new pe(3303,!1)}();if(!function M0e(e){return"start"==e||"done"==e}(i))throw function yge(e,t){return new pe(3400,!1)}();const s=Cd(this._elementListeners,t,[]),o={name:n,phase:i,callback:r};s.push(o);const a=Cd(this._engine.statesByElement,t,new Map);return a.has(n)||(yh(t,rS),yh(t,rS+"-"+n),a.set(n,XI)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(n)||a.delete(n)})}}register(t,n){return!this._triggers.has(t)&&(this._triggers.set(t,n),!0)}_getTrigger(t){const n=this._triggers.get(t);if(!n)throw function _ge(e){return new pe(3401,!1)}();return n}trigger(t,n,i,r=!0){const s=this._getTrigger(n),o=new YI(this.id,n,t);let a=this._engine.statesByElement.get(t);a||(yh(t,rS),yh(t,rS+"-"+n),this._engine.statesByElement.set(t,a=new Map));let l=a.get(n);const c=new qI(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(n,c),l||(l=XI),c.value!==tw&&l.value===c.value){if(!function S0e(e,t){const n=Object.keys(e),i=Object.keys(t);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const s=n[r];if(!t.hasOwnProperty(s)||e[s]!==t[s])return!1}return!0}(l.params,c.params)){const v=[],g=s.matchStyles(l.value,l.params,v),b=s.matchStyles(c.value,c.params,v);v.length?this._engine.reportError(v):this._engine.afterFlush(()=>{N0(t,g),Ju(t,b)})}return}const u=Cd(this._engine.playersByElement,t,[]);u.forEach(v=>{v.namespaceId==this.id&&v.triggerName==n&&v.queued&&v.destroy()});let p=s.matchTransition(l.value,c.value,t,c.params),m=!1;if(!p){if(!r)return;p=s.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:n,transition:p,fromState:l,toState:c,player:o,isFallbackTransition:m}),m||(yh(t,Hj),o.onStart(()=>{ry(t,Hj)})),o.onDone(()=>{let v=this.players.indexOf(o);v>=0&&this.players.splice(v,1);const g=this._engine.playersByElement.get(t);if(g){let b=g.indexOf(o);b>=0&&g.splice(b,1)}}),this.players.push(o),u.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(n=>n.delete(t)),this._elementListeners.forEach((n,i)=>{this._elementListeners.set(i,n.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const n=this._engine.playersByElement.get(t);n&&(n.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,n){const i=this._engine.driver.query(t,sS,!0);i.forEach(r=>{if(r[vh])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,n,i,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const d=this.trigger(t,c,tw,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,n,o),i&&Lm(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const n=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(n&&i){const r=new Set;n.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=i.get(o)||XI,d=new qI(tw),h=new YI(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:c,toState:d,player:h,isFallbackTransition:!0})})}}removeNode(t,n){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,n),this.triggerLeaveAnimation(t,n,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,n);else{const s=t[vh];(!s||s===Gj)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,n))}}insertNode(t,n){yh(t,this._hostClassName)}drainQueuedTransitions(t){const n=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=AI(s,i.triggerName,i.fromState.value,i.toState.value);l._data=t,EI(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(i)}),this._queue=[],n.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let n=!1;return this._elementListeners.has(t)&&(n=!0),n=!!this._queue.find(i=>i.element===t)||n,n}}class b0e{_onRemovalComplete(t,n){this.onRemovalComplete(t,n)}constructor(t,n,i){this.bodyNode=t,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(n=>{n.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,n){const i=new _0e(t,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(i,n):(this.newHostElements.set(n,i),this.collectEnterElement(n)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,n){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(n);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,t),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(t)}else i.push(t);return r.set(n,t),t}register(t,n){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,n)),i}registerTrigger(t,n,i){let r=this._namespaceLookup[t];r&&r.register(n,i)&&this.totalAnimations++}destroy(t,n){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(n))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const n=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&n.add(s)}return n}trigger(t,n,i,r){if(gS(n)){const s=this._fetchNamespace(t);if(s)return s.trigger(n,i,r),!0}return!1}insertNode(t,n,i,r){if(!gS(n))return;const s=n[vh];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(n,i)}r&&this.collectEnterElement(n)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,n){n?this.disabledNodes.has(t)||(this.disabledNodes.add(t),yh(t,WI)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),ry(t,WI))}removeNode(t,n,i,r){if(gS(n)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(n,r):this.markElementAsRemoved(t,n,!1,r),i){const o=this.namespacesByHostElement.get(n);o&&o.id!==t&&o.removeNode(n,r)}}else this._onRemovalComplete(n,r)}markElementAsRemoved(t,n,i,r,s){this.collectedLeaveElements.push(n),n[vh]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,n,i,r,s){return gS(n)?this._fetchNamespace(t).listen(n,i,r,s):()=>{}}_buildInstruction(t,n,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,n,s)}destroyInnerAnimations(t){let n=this.driver.query(t,sS,!0);n.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,kI,!0),n.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const n=this.playersByElement.get(t);n&&n.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const n=this.playersByQueriedElement.get(t);n&&n.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Lm(this.players).onDone(()=>t());t()})}processLeaveNode(t){const n=t[vh];if(n&&n.setForRemoval){if(t[vh]=Gj,n.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}t.classList?.contains(WI)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)yh(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{n=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],n.length?Lm(n).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function bge(e){return new pe(3402,!1)}()}_flushAnimations(t,n){const i=new pS,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(_e=>{d.add(_e);const be=this.driver.query(_e,".ng-animate-queued",!0);for(let me=0;me<be.length;me++)d.add(be[me])});const h=this.bodyNode,u=Array.from(this.statesByElement.keys()),p=Xj(u,this.collectedEnterElements),m=new Map;let v=0;p.forEach((_e,be)=>{const me=RI+v++;m.set(be,me),_e.forEach(Te=>yh(Te,me))});const g=[],b=new Set,x=new Set;for(let _e=0;_e<this.collectedLeaveElements.length;_e++){const be=this.collectedLeaveElements[_e],me=be[vh];me&&me.setForRemoval&&(g.push(be),b.add(be),me.hasAnimation?this.driver.query(be,".ng-star-inserted",!0).forEach(Te=>b.add(Te)):x.add(be))}const w=new Map,P=Xj(u,Array.from(b));P.forEach((_e,be)=>{const me=iS+v++;w.set(be,me),_e.forEach(Te=>yh(Te,me))}),t.push(()=>{p.forEach((_e,be)=>{const me=m.get(be);_e.forEach(Te=>ry(Te,me))}),P.forEach((_e,be)=>{const me=w.get(be);_e.forEach(Te=>ry(Te,me))}),g.forEach(_e=>{this.processLeaveNode(_e)})});const A=[],D=[];for(let _e=this._namespaceList.length-1;_e>=0;_e--)this._namespaceList[_e].drainQueuedTransitions(n).forEach(me=>{const Te=me.player,Le=me.element;if(A.push(Te),this.collectedEnterElements.length){const Ze=Le[vh];if(Ze&&Ze.setForMove){if(Ze.previousTriggersValues&&Ze.previousTriggersValues.has(me.triggerName)){const $e=Ze.previousTriggersValues.get(me.triggerName),ft=this.statesByElement.get(me.element);if(ft&&ft.has(me.triggerName)){const it=ft.get(me.triggerName);it.value=$e,ft.set(me.triggerName,it)}}return void Te.destroy()}}const ke=!h||!this.driver.containsElement(h,Le),Re=w.get(Le),Qe=m.get(Le),Pe=this._buildInstruction(me,i,Qe,Re,ke);if(Pe.errors&&Pe.errors.length)return void D.push(Pe);if(ke)return Te.onStart(()=>N0(Le,Pe.fromStyles)),Te.onDestroy(()=>Ju(Le,Pe.toStyles)),void r.push(Te);if(me.isFallbackTransition)return Te.onStart(()=>N0(Le,Pe.fromStyles)),Te.onDestroy(()=>Ju(Le,Pe.toStyles)),void r.push(Te);const Be=[];Pe.timelines.forEach(Ze=>{Ze.stretchStartingKeyframe=!0,this.disabledNodes.has(Ze.element)||Be.push(Ze)}),Pe.timelines=Be,i.append(Le,Pe.timelines),o.push({instruction:Pe,player:Te,element:Le}),Pe.queriedElements.forEach(Ze=>Cd(a,Ze,[]).push(Te)),Pe.preStyleProps.forEach((Ze,$e)=>{if(Ze.size){let ft=l.get($e);ft||l.set($e,ft=new Set),Ze.forEach((it,Nt)=>ft.add(Nt))}}),Pe.postStyleProps.forEach((Ze,$e)=>{let ft=c.get($e);ft||c.set($e,ft=new Set),Ze.forEach((it,Nt)=>ft.add(Nt))})});if(D.length){const _e=[];D.forEach(be=>{_e.push(function xge(e,t){return new pe(3505,!1)}())}),A.forEach(be=>be.destroy()),this.reportError(_e)}const R=new Map,N=new Map;o.forEach(_e=>{const be=_e.element;i.has(be)&&(N.set(be,be),this._beforeAnimationBuild(_e.player.namespaceId,_e.instruction,R))}),r.forEach(_e=>{const be=_e.element;this._getPreviousPlayers(be,!1,_e.namespaceId,_e.triggerName,null).forEach(Te=>{Cd(R,be,[]).push(Te),Te.destroy()})});const k=g.filter(_e=>$j(_e,l,c)),L=new Map;qj(L,this.driver,x,c,af).forEach(_e=>{$j(_e,l,c)&&k.push(_e)});const le=new Map;p.forEach((_e,be)=>{qj(le,this.driver,new Set(_e),l,PI)}),k.forEach(_e=>{const be=L.get(_e),me=le.get(_e);L.set(_e,new Map([...Array.from(be?.entries()??[]),...Array.from(me?.entries()??[])]))});const ae=[],he=[],xe={};o.forEach(_e=>{const{element:be,player:me,instruction:Te}=_e;if(i.has(be)){if(d.has(be))return me.onDestroy(()=>Ju(be,Te.toStyles)),me.disabled=!0,me.overrideTotalTime(Te.totalTime),void r.push(me);let Le=xe;if(N.size>1){let Re=be;const Qe=[];for(;Re=Re.parentNode;){const Pe=N.get(Re);if(Pe){Le=Pe;break}Qe.push(Re)}Qe.forEach(Pe=>N.set(Pe,Le))}const ke=this._buildAnimation(me.namespaceId,Te,R,s,le,L);if(me.setRealPlayer(ke),Le===xe)ae.push(me);else{const Re=this.playersByElement.get(Le);Re&&Re.length&&(me.parentPlayer=Lm(Re)),r.push(me)}}else N0(be,Te.fromStyles),me.onDestroy(()=>Ju(be,Te.toStyles)),he.push(me),d.has(be)&&r.push(me)}),he.forEach(_e=>{const be=s.get(_e.element);if(be&&be.length){const me=Lm(be);_e.setRealPlayer(me)}}),r.forEach(_e=>{_e.parentPlayer?_e.syncPlayerEvents(_e.parentPlayer):_e.destroy()});for(let _e=0;_e<g.length;_e++){const be=g[_e],me=be[vh];if(ry(be,iS),me&&me.hasAnimation)continue;let Te=[];if(a.size){let ke=a.get(be);ke&&ke.length&&Te.push(...ke);let Re=this.driver.query(be,kI,!0);for(let Qe=0;Qe<Re.length;Qe++){let Pe=a.get(Re[Qe]);Pe&&Pe.length&&Te.push(...Pe)}}const Le=Te.filter(ke=>!ke.destroyed);Le.length?C0e(this,be,Le):this.processLeaveNode(be)}return g.length=0,ae.forEach(_e=>{this.players.push(_e),_e.onDone(()=>{_e.destroy();const be=this.players.indexOf(_e);this.players.splice(be,1)}),_e.play()}),ae}elementContainsData(t,n){let i=!1;const r=n[vh];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(n)&&(i=!0),this.playersByQueriedElement.has(n)&&(i=!0),this.statesByElement.has(n)&&(i=!0),this._fetchNamespace(t).elementContainsData(n)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,n,i,r,s){let o=[];if(n){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!s||s==tw;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(t,n,i){const s=n.element,o=n.isRemovalTransition?void 0:t,a=n.isRemovalTransition?void 0:n.triggerName;for(const l of n.timelines){const c=l.element,d=c!==s,h=Cd(i,c,[]);this._getPreviousPlayers(c,d,o,a,n.toState).forEach(p=>{const m=p.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),p.destroy(),h.push(p)})}N0(s,n.fromStyles)}_buildAnimation(t,n,i,r,s,o){const a=n.triggerName,l=n.element,c=[],d=new Set,h=new Set,u=n.timelines.map(m=>{const v=m.element;d.add(v);const g=v[vh];if(g&&g.removedBeforeQueried)return new Zx(m.duration,m.delay);const b=v!==l,x=function P0e(e){const t=[];return Yj(e,t),t}((i.get(v)||v0e).map(R=>R.getRealPlayer())).filter(R=>!!R.element&&R.element===v),w=s.get(v),P=o.get(v),A=bj(0,this._normalizer,0,m.keyframes,w,P),D=this._buildPlayer(m,A,x);if(m.subTimeline&&r&&h.add(v),b){const R=new YI(t,a,v);R.setRealPlayer(D),c.push(R)}return D});c.forEach(m=>{Cd(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>function x0e(e,t,n){let i=e.get(t);if(i){if(i.length){const r=i.indexOf(n);i.splice(r,1)}0==i.length&&e.delete(t)}return i}(this.playersByQueriedElement,m.element,m))}),d.forEach(m=>yh(m,Aj));const p=Lm(u);return p.onDestroy(()=>{d.forEach(m=>ry(m,Aj)),Ju(l,n.toStyles)}),h.forEach(m=>{Cd(r,m,[]).push(p)}),p}_buildPlayer(t,n,i){return n.length>0?this.driver.animate(t.element,n,t.duration,t.delay,t.easing,i):new Zx(t.duration,t.delay)}}class YI{constructor(t,n,i){this.namespaceId=t,this.triggerName=n,this.element=i,this._player=new Zx,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((n,i)=>{n.forEach(r=>EI(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const n=this._player;n.triggerCallback&&t.onStart(()=>n.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,n){Cd(this._queuedCallbacks,t,[]).push(n)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const n=this._player;n.triggerCallback&&n.triggerCallback(t)}}function gS(e){return e&&1===e.nodeType}function Wj(e,t){const n=e.style.display;return e.style.display=t??"none",n}function qj(e,t,n,i,r){const s=[];n.forEach(l=>s.push(Wj(l)));const o=[];i.forEach((l,c)=>{const d=new Map;l.forEach(h=>{const u=t.computeStyle(c,h,r);d.set(h,u),(!u||0==u.length)&&(c[vh]=y0e,o.push(c))}),e.set(c,d)});let a=0;return n.forEach(l=>Wj(l,s[a++])),o}function Xj(e,t){const n=new Map;if(e.forEach(a=>n.set(a,[])),0==t.length)return n;const i=1,r=new Set(t),s=new Map;function o(a){if(!a)return i;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=n.has(c)?c:r.has(c)?i:o(c),s.set(a,l),l}return t.forEach(a=>{const l=o(a);l!==i&&n.get(l).push(a)}),n}function yh(e,t){e.classList?.add(t)}function ry(e,t){e.classList?.remove(t)}function C0e(e,t,n){Lm(n).onDone(()=>e.processLeaveNode(t))}function Yj(e,t){for(let n=0;n<e.length;n++){const i=e[n];i instanceof yj?Yj(i.players,t):t.push(i)}}function $j(e,t,n){const i=n.get(e);if(!i)return!1;let r=t.get(e);return r?i.forEach(s=>r.add(s)):t.set(e,i),n.delete(e),!0}class vS{constructor(t,n,i){this.bodyNode=t,this._driver=n,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new b0e(t,n,i),this._timelineEngine=new u0e(t,n,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,n,i,r,s){const o=t+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],c=[],d=BI(this._driver,s,l,c);if(l.length)throw function dge(e,t){return new pe(3404,!1)}();a=function l0e(e,t,n){return new c0e(e,t,n)}(r,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,r,a)}register(t,n){this._transitionEngine.register(t,n)}destroy(t,n){this._transitionEngine.destroy(t,n)}onInsert(t,n,i,r){this._transitionEngine.insertNode(t,n,i,r)}onRemove(t,n,i,r){this._transitionEngine.removeNode(t,n,r||!1,i)}disableAnimations(t,n){this._transitionEngine.markElementAsDisabled(t,n)}process(t,n,i,r){if("@"==i.charAt(0)){const[s,o]=xj(i);this._timelineEngine.command(s,n,o,r)}else this._transitionEngine.trigger(t,n,i,r)}listen(t,n,i,r,s){if("@"==i.charAt(0)){const[o,a]=xj(i);return this._timelineEngine.listen(o,n,a,s)}return this._transitionEngine.listen(t,n,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let O0e=(()=>{class e{constructor(n,i,r){this._element=n,this._startStyles=i,this._endStyles=r,this._state=0;let s=e.initialStylesByElement.get(n);s||e.initialStylesByElement.set(n,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ju(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ju(this._element,this._initialStyles),this._endStyles&&(Ju(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(N0(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(N0(this._element,this._endStyles),this._endStyles=null),Ju(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function $I(e){let t=null;return e.forEach((n,i)=>{(function A0e(e){return"display"===e||"position"===e})(i)&&(t=t||new Map,t.set(i,n))}),t}class Kj{constructor(t,n,i,r){this.element=t,this.keyframes=n,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const n=[];return t.forEach(i=>{n.push(Object.fromEntries(i))}),n}_triggerWebAnimation(t,n,i){return t.animate(this._convertKeyframesToObject(n),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:Nj(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const n="start"===t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class T0e{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,n){return!1}containsElement(t,n){return Pj(t,n)}getParentElement(t){return DI(t)}query(t,n,i){return Sj(t,n,i)}computeStyle(t,n,i){return window.getComputedStyle(t)[n]}animate(t,n,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,d=o.filter(p=>p instanceof Kj);(function kge(e,t){return 0===e||0===t})(i,r)&&d.forEach(p=>{p.currentSnapshot.forEach((m,v)=>c.set(v,m))});let h=function Tge(e){return e.length?e[0]instanceof Map?e:e.map(t=>Tj(t)):[]}(n).map(p=>Fm(p));h=function Nge(e,t,n){if(n.size&&t.length){let i=t[0],r=[];if(n.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(a=>o.set(a,Nj(e,a)))}}return t}(t,h,c);const u=function E0e(e,t){let n=null,i=null;return Array.isArray(t)&&t.length?(n=$I(t[0]),t.length>1&&(i=$I(t[t.length-1]))):t instanceof Map&&(n=$I(t)),n||i?new O0e(e,n,i):null}(t,h);return new Kj(t,h,l,u)}}let D0e=(()=>{class e extends fj{constructor(n,i){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(i.body,{id:"0",encapsulation:xi.None,styles:[],data:{animation:[]}})}build(n){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(n)?gj(n):n;return Zj(this._renderer,null,i,"register",[r]),new I0e(i,this._renderer)}}return e.\u0275fac=function(n){return new(n||e)(Jt(B1),Jt(Js))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();class I0e extends jme{constructor(t,n){super(),this._id=t,this._renderer=n}create(t,n){return new R0e(this._id,t,n||{},this._renderer)}}class R0e{constructor(t,n,i,r){this.id=t,this.element=n,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,n){return this._renderer.listen(this.element,`@@${this.id}:${t}`,n)}_command(t,...n){return Zj(this._renderer,this.element,this.id,t,n)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Zj(e,t,n,i,r){return e.setProperty(t,`@@${n}:${i}`,r)}const Qj="@.disabled";let k0e=(()=>{class e{constructor(n,i,r){this.delegate=n,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(n,i){const s=this.delegate.createRenderer(n,i);if(!(n&&i&&i.data&&i.data.animation)){let d=this._rendererCache.get(s);return d||(d=new Jj("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,d)),d}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,n);const l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(o,a,n,d.name,d)};return i.data.animation.forEach(l),new N0e(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(n,i,r){n>=0&&n<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(n){return new(n||e)(Jt(B1),Jt(vS),Jt(_s))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();class Jj{constructor(t,n,i,r){this.namespaceId=t,this.delegate=n,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>n.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,n){this.delegate.appendChild(t,n),this.engine.onInsert(this.namespaceId,n,t,!1)}insertBefore(t,n,i,r=!0){this.delegate.insertBefore(t,n,i),this.engine.onInsert(this.namespaceId,n,t,r)}removeChild(t,n,i){this.engine.onRemove(this.namespaceId,n,this.delegate,i)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,i,r){this.delegate.setAttribute(t,n,i,r)}removeAttribute(t,n,i){this.delegate.removeAttribute(t,n,i)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,i,r){this.delegate.setStyle(t,n,i,r)}removeStyle(t,n,i){this.delegate.removeStyle(t,n,i)}setProperty(t,n,i){"@"==n.charAt(0)&&n==Qj?this.disableAnimations(t,!!i):this.delegate.setProperty(t,n,i)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,i){return this.delegate.listen(t,n,i)}disableAnimations(t,n){this.engine.disableAnimations(t,n)}}class N0e extends Jj{constructor(t,n,i,r,s){super(n,i,r,s),this.factory=t,this.namespaceId=n}setProperty(t,n,i){"@"==n.charAt(0)?"."==n.charAt(1)&&n==Qj?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,n.slice(1),i):this.delegate.setProperty(t,n,i)}listen(t,n,i){if("@"==n.charAt(0)){const r=function L0e(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(t);let s=n.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function F0e(e){const t=e.indexOf(".");return[e.substring(0,t),e.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(t,n,i)}}let B0e=(()=>{class e extends vS{constructor(n,i,r,s){super(n.body,i,r)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(n){return new(n||e)(Jt(Js),Jt(II),Jt(HI),Jt(T0))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();const eH=[{provide:fj,useClass:D0e},{provide:HI,useFactory:function z0e(){return new r0e}},{provide:vS,useClass:B0e},{provide:B1,useFactory:function U0e(e,t,n){return new k0e(e,t,n)},deps:[nS,vS,_s]}],KI=[{provide:II,useFactory:()=>new T0e},{provide:z9,useValue:"BrowserAnimations"},...eH],tH=[{provide:II,useClass:Ej},{provide:z9,useValue:"NoopAnimations"},...eH];let V0e=(()=>{class e{static withConfig(n){return{ngModule:e,providers:n.disableAnimations?tH:KI}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({providers:KI,imports:[cj]}),e})();var Nl=_(3527),j0e=_(567),Zi=_(4850);let nH=(()=>{class e{constructor(n,i){this._renderer=n,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return e.\u0275fac=function(n){return new(n||e)(Ne(ga),Ne(Ts))},e.\u0275dir=xn({type:e}),e})(),F0=(()=>{class e extends nH{}return e.\u0275fac=function(){let t;return function(i){return(t||(t=_l(e)))(i||e)}}(),e.\u0275dir=xn({type:e,features:[Ds]}),e})();const ep=new ui("NgValueAccessor"),G0e={provide:ep,useExisting:V(()=>Bm),multi:!0},q0e=new ui("CompositionEventMode");let Bm=(()=>{class e extends nH{constructor(n,i,r){super(n,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function W0e(){const e=Qu()?Qu().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return e.\u0275fac=function(n){return new(n||e)(Ne(ga),Ne(Ts),Ne(q0e,8))},e.\u0275dir=xn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,i){1&n&&zt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[so([G0e]),Ds]}),e})();const X0e=!1;function zm(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}function rH(e){return null!=e&&"number"==typeof e.length}const Ll=new ui("NgValidators"),Um=new ui("NgAsyncValidators"),Y0e=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ei{static min(t){return sH(t)}static max(t){return function oH(e){return t=>{if(zm(t.value)||zm(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}(t)}static required(t){return aH(t)}static requiredTrue(t){return function lH(e){return!0===e.value?null:{required:!0}}(t)}static email(t){return function cH(e){return zm(e.value)||Y0e.test(e.value)?null:{email:!0}}(t)}static minLength(t){return function dH(e){return t=>zm(t.value)||!rH(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function hH(e){return t=>rH(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}(t)}static pattern(t){return function uH(e){if(!e)return _S;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),i=>{if(zm(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return yH(t)}static composeAsync(t){return _H(t)}}function sH(e){return t=>{if(zm(t.value)||zm(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}function aH(e){return zm(e.value)?{required:!0}:null}function _S(e){return null}function pH(e){return null!=e}function fH(e){const t=Dx(e)?(0,Nl.D)(e):e;if(X0e&&!a3(t)){let n="Expected async validator to return Promise or Observable.";throw"object"==typeof e&&(n+=" Are you using a synchronous validator where an async validator is expected?"),new pe(-1101,n)}return t}function mH(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function gH(e,t){return t.map(n=>n(e))}function vH(e){return e.map(t=>function $0e(e){return!e.validate}(t)?t:n=>t.validate(n))}function yH(e){if(!e)return null;const t=e.filter(pH);return 0==t.length?null:function(n){return mH(gH(n,t))}}function ZI(e){return null!=e?yH(vH(e)):null}function _H(e){if(!e)return null;const t=e.filter(pH);return 0==t.length?null:function(n){const i=gH(n,t).map(fH);return(0,j0e.D)(i).pipe((0,Zi.U)(mH))}}function QI(e){return null!=e?_H(vH(e)):null}function bH(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function xH(e){return e._rawValidators}function wH(e){return e._rawAsyncValidators}function JI(e){return e?Array.isArray(e)?e:[e]:[]}function bS(e,t){return Array.isArray(e)?e.includes(t):e===t}function MH(e,t){const n=JI(t);return JI(e).forEach(r=>{bS(n,r)||n.push(r)}),n}function CH(e,t){return JI(t).filter(n=>!bS(e,n))}class PH{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ZI(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=QI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class oc extends PH{get formDirective(){return null}get path(){return null}}class Vm extends PH{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class SH{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let sy=(()=>{class e extends SH{constructor(n){super(n)}}return e.\u0275fac=function(n){return new(n||e)(Ne(Vm,2))},e.\u0275dir=xn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,i){2&n&&mo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ds]}),e})(),oy=(()=>{class e extends SH{constructor(n){super(n)}}return e.\u0275fac=function(n){return new(n||e)(Ne(oc,10))},e.\u0275dir=xn({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,i){2&n&&mo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Ds]}),e})();function EH(e,t){return e?`with name: '${t}'`:`at index: ${t}`}const nR=!1,nw="VALID",wS="INVALID",ay="PENDING",iw="DISABLED";function iR(e){return(MS(e)?e.validators:e)||null}function rR(e,t){return(MS(t)?t.asyncValidators:e)||null}function MS(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function OH(e,t,n){const i=e.controls;if(!(t?Object.keys(i):i).length)throw new pe(1e3,nR?function J0e(e){return`\n    There are no form controls registered with this ${e?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(t):"");if(!i[n])throw new pe(1001,nR?function eve(e,t){return`Cannot find form control ${EH(e,t)}`}(t,n):"")}function AH(e,t,n){e._forEachChild((i,r)=>{if(void 0===n[r])throw new pe(1002,nR?function tve(e,t){return`Must supply a value for form control ${EH(e,t)}`}(t,r):"")})}class CS{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===nw}get invalid(){return this.status===wS}get pending(){return this.status==ay}get disabled(){return this.status===iw}get enabled(){return this.status!==iw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(MH(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(MH(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(CH(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(CH(t,this._rawAsyncValidators))}hasValidator(t){return bS(this._rawValidators,t)}hasAsyncValidator(t){return bS(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ay,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=iw,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=nw,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===nw||this.status===ay)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?iw:nw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ay,this._hasOwnPendingAsyncValidator=!0;const n=fH(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(t,n){const i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new cr,this.statusChanges=new cr}_calculateStatus(){return this._allControlsDisabled()?iw:this.errors?wS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ay)?ay:this._anyControlsHaveStatus(wS)?wS:nw}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){MS(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function nve(e){return Array.isArray(e)?ZI(e):e||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function ive(e){return Array.isArray(e)?QI(e):e||null}(this._rawAsyncValidators)}}class rw extends CS{constructor(t,n,i){super(iR(n),rR(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){AH(this,!0,t),Object.keys(t).forEach(i=>{OH(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>!!i._syncPendingControls()||n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{const i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[n,i]of Object.entries(this.controls))if(this.contains(n)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(t,n){let i=t;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}class TH extends rw{}const B0=new ui("CallSetDisabledState",{providedIn:"root",factory:()=>sw}),sw="always";function ow(e,t,n=sw){sR(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||"always"===n)&&t.valueAccessor.setDisabledState?.(e.disabled),function sve(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&DH(e,t)})}(e,t),function ave(e,t){const n=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function ove(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&DH(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function rve(e,t){if(t.valueAccessor.setDisabledState){const n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function SS(e,t,n=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),OS(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function ES(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function sR(e,t){const n=xH(e);null!==t.validator?e.setValidators(bH(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const i=wH(e);null!==t.asyncValidator?e.setAsyncValidators(bH(i,t.asyncValidator)):"function"==typeof i&&e.setAsyncValidators([i]);const r=()=>e.updateValueAndValidity();ES(t._rawValidators,r),ES(t._rawAsyncValidators,r)}function OS(e,t){let n=!1;if(null!==e){if(null!==t.validator){const r=xH(e);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==t.validator);s.length!==r.length&&(n=!0,e.setValidators(s))}}if(null!==t.asyncValidator){const r=wH(e);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==t.asyncValidator);s.length!==r.length&&(n=!0,e.setAsyncValidators(s))}}}const i=()=>{};return ES(t._rawValidators,i),ES(t._rawAsyncValidators,i),n}function DH(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function kH(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function NH(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const lw=class extends CS{constructor(t=null,n,i){super(iR(n),rR(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),MS(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=NH(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){kH(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){kH(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){NH(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};let ly=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=xn({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const gve={provide:ep,useExisting:V(()=>cy),multi:!0};let cy=(()=>{class e extends F0{writeValue(n){this.setProperty("value",n??"")}registerOnChange(n){this.onChange=i=>{n(""==i?null:parseFloat(i))}}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=_l(e)))(i||e)}}(),e.\u0275dir=xn({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,i){1&n&&zt("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[so([gve]),Ds]}),e})(),UH=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({}),e})();const dR=new ui("NgModelWithFormControlWarning"),xve={provide:oc,useExisting:V(()=>jm)};let jm=(()=>{class e extends oc{constructor(n,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new cr,this._setValidators(n),this._setAsyncValidators(i)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(OS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const i=this.form.get(n.path);return ow(i,n,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),i}getControl(n){return this.form.get(n.path)}removeControl(n){SS(n.control||null,n,!1),function hve(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,i){this.form.get(n.path).setValue(i)}onSubmit(n){return this.submitted=!0,function RH(e,t){e._syncPendingControls(),t.forEach(n=>{const i=n.control;"submit"===i.updateOn&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const i=n.control,r=this.form.get(n.path);i!==r&&(SS(i||null,n),(e=>e instanceof lw)(r)&&(ow(r,n,this.callSetDisabledState),n.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const i=this.form.get(n.path);(function IH(e,t){sR(e,t)})(i,n),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const i=this.form.get(n.path);i&&function lve(e,t){return OS(e,t)}(i,n)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){sR(this.form,this),this._oldForm&&OS(this._oldForm,this)}_checkFormPresent(){}}return e.\u0275fac=function(n){return new(n||e)(Ne(Ll,10),Ne(Um,10),Ne(B0,8))},e.\u0275dir=xn({type:e,selectors:[["","formGroup",""]],hostBindings:function(n,i){1&n&&zt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[so([xve]),Ds,O]}),e})();const Cve={provide:Vm,useExisting:V(()=>z0)};let z0=(()=>{class e extends Vm{set isDisabled(n){}constructor(n,i,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new cr,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function lR(e,t){if(!t)return null;let n,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===Bm?n=s:function dve(e){return Object.getPrototypeOf(e.constructor)===F0}(s)?i=s:r=s}),r||i||n||null}(0,s)}ngOnChanges(n){this._added||this._setUpControl(),function aR(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return function PS(e,t){return[...t.path,e]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return e._ngModelWarningSentOnce=!1,e.\u0275fac=function(n){return new(n||e)(Ne(oc,13),Ne(Ll,10),Ne(Um,10),Ne(ep,10),Ne(dR,8))},e.\u0275dir=xn({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[so([Cve]),Ds,O]}),e})();let U0=(()=>{class e{constructor(){this._validator=_S}ngOnChanges(n){if(this.inputName in n){const i=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):_S,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=xn({type:e,features:[O]}),e})();const Ive={provide:Ll,useExisting:V(()=>dy),multi:!0};let dy=(()=>{class e extends U0{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=n=>function YH(e){return"number"==typeof e?e:parseFloat(e)}(n),this.createValidator=n=>sH(n)}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=_l(e)))(i||e)}}(),e.\u0275dir=xn({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,i){2&n&&Xs("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[so([Ive]),Ds]}),e})();const Rve={provide:Ll,useExisting:V(()=>AS),multi:!0};let AS=(()=>{class e extends U0{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ny,this.createValidator=n=>aH}enabled(n){return n}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=_l(e)))(i||e)}}(),e.\u0275dir=xn({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,i){2&n&&Xs("required",i._enabled?"":null)},inputs:{required:"required"},features:[so([Rve]),Ds]}),e})(),tG=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[UH]}),e})();class nG extends CS{constructor(t,n,i){super(iR(n),rR(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,i={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,n={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){AH(this,!1,t),t.forEach((i,r)=>{OH(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,i)=>!!i._syncPendingControls()||n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,i)=>{t(n,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function iG(e){return!!e&&(void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn)}let V0=(()=>{class e{constructor(){this.useNonNullable=!1}get nonNullable(){const n=new e;return n.useNonNullable=!0,n}group(n,i=null){const r=this._reduceControls(n);let s={};return iG(i)?s=i:null!==i&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new rw(r,s)}record(n,i=null){const r=this._reduceControls(n);return new TH(r,i)}control(n,i,r){let s={};return this.useNonNullable?(iG(i)?s=i:(s.validators=i,s.asyncValidators=r),new lw(n,{...s,nonNullable:!0})):new lw(n,i,r)}array(n,i,r){const s=n.map(o=>this._createControl(o));return new nG(s,i,r)}_reduceControls(n){const i={};return Object.keys(n).forEach(r=>{i[r]=this._createControl(n[r])}),i}_createControl(n){return n instanceof lw||n instanceof CS?n:Array.isArray(n)?this.control(n[0],n.length>1?n[1]:null,n.length>2?n[2]:null):this.control(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),rG=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:B0,useValue:n.callSetDisabledState??sw}]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[tG]}),e})(),zve=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:dR,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:B0,useValue:n.callSetDisabledState??sw}]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[tG]}),e})();var Ci=_(1086),Hm=_(1406),xl=_(2198);class TS{}class mR{}class cf{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const r=n.slice(0,i),s=r.toLowerCase(),o=n.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.entries(t).forEach(([n,i])=>{let r;if(r="string"==typeof i?[i]:"number"==typeof i?[i.toString()]:i.map(s=>s.toString()),r.length>0){const s=n.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(n,s)}})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof cf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new cf;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof cf?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,n);const r=("a"===t.op?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(n);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class Uve{encodeKey(t){return sG(t)}encodeValue(t){return sG(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const jve=/%(\d[a-f0-9])/gi,Hve={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sG(e){return encodeURIComponent(e).replace(jve,(t,n)=>Hve[n]??t)}function DS(e){return`${e}`}class Gm{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Uve,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Vve(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=n.get(o)||[];l.push(a),n.set(o,l)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const i=t.fromObject[n],r=Array.isArray(i)?i.map(DS):[DS(i)];this.map.set(n,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{n.push({param:i,value:s,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new Gm({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(DS(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(DS(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Gve{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function oG(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function aG(e){return typeof Blob<"u"&&e instanceof Blob}function lG(e){return typeof FormData<"u"&&e instanceof FormData}class cw{constructor(t,n,i,r){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function Wve(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new cf),this.context||(this.context=new Gve),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new Gm,this.urlWithParams=n}serializeBody(){return null===this.body?null:oG(this.body)||aG(this.body)||lG(this.body)||function qve(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Gm?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||lG(this.body)?null:aG(this.body)?this.body.type||null:oG(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Gm?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const n=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,c=t.params||this.params;const d=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((h,u)=>h.set(u,t.setHeaders[u]),l)),t.setParams&&(c=Object.keys(t.setParams).reduce((h,u)=>h.set(u,t.setParams[u]),c)),new cw(n,i,s,{params:c,headers:l,context:d,reportProgress:a,responseType:r,withCredentials:o})}}var _a=(()=>((_a=_a||{})[_a.Sent=0]="Sent",_a[_a.UploadProgress=1]="UploadProgress",_a[_a.ResponseHeader=2]="ResponseHeader",_a[_a.DownloadProgress=3]="DownloadProgress",_a[_a.Response=4]="Response",_a[_a.User=5]="User",_a))();class gR{constructor(t,n=200,i="OK"){this.headers=t.headers||new cf,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class vR extends gR{constructor(t={}){super(t),this.type=_a.ResponseHeader}clone(t={}){return new vR({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class IS extends gR{constructor(t={}){super(t),this.type=_a.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new IS({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class cG extends gR{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function yR(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let ac=(()=>{class e{constructor(n){this.handler=n}request(n,i,r={}){let s;if(n instanceof cw)s=n;else{let l,c;l=r.headers instanceof cf?r.headers:new cf(r.headers),r.params&&(c=r.params instanceof Gm?r.params:new Gm({fromObject:r.params})),s=new cw(n,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=(0,Ci.of)(s).pipe((0,Hm.b)(l=>this.handler.handle(l)));if(n instanceof cw||"events"===r.observe)return o;const a=o.pipe((0,xl.h)(l=>l instanceof IS));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe((0,Zi.U)(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe((0,Zi.U)(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe((0,Zi.U)(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe((0,Zi.U)(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:(new Gm).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,r={}){return this.request("PATCH",n,yR(r,i))}post(n,i,r={}){return this.request("POST",n,yR(r,i))}put(n,i,r={}){return this.request("PUT",n,yR(r,i))}}return e.\u0275fac=function(n){return new(n||e)(Jt(TS))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();function dG(e,t){return t(e)}function Xve(e,t){return(n,i)=>t.intercept(n,{handle:r=>e(r,i)})}const $ve=new ui("HTTP_INTERCEPTORS"),dw=new ui("HTTP_INTERCEPTOR_FNS");function Kve(){let e=null;return(t,n)=>(null===e&&(e=(Ai($ve,{optional:!0})??[]).reduceRight(Xve,dG)),e(t,n))}let hG=(()=>{class e extends TS{constructor(n,i){super(),this.backend=n,this.injector=i,this.chain=null}handle(n){if(null===this.chain){const i=Array.from(new Set(this.injector.get(dw)));this.chain=i.reduceRight((r,s)=>function Yve(e,t,n){return(i,r)=>n.runInContext(()=>t(i,s=>e(s,r)))}(r,s,this.injector),dG)}return this.chain(n,i=>this.backend.handle(i))}}return e.\u0275fac=function(n){return new(n||e)(Jt(mR),Jt(qu))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();const e1e=/^\)\]\}',?\n/;let pG=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new T.y(i=>{const r=this.xhrFactory.build();if(r.open(n.method,n.urlWithParams),n.withCredentials&&(r.withCredentials=!0),n.headers.forEach((p,m)=>r.setRequestHeader(p,m.join(","))),n.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const p=n.detectContentTypeHeader();null!==p&&r.setRequestHeader("Content-Type",p)}if(n.responseType){const p=n.responseType.toLowerCase();r.responseType="json"!==p?p:"text"}const s=n.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const p=r.statusText||"OK",m=new cf(r.getAllResponseHeaders()),v=function t1e(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||n.url;return o=new vR({headers:m,status:r.status,statusText:p,url:v}),o},l=()=>{let{headers:p,status:m,statusText:v,url:g}=a(),b=null;204!==m&&(b=typeof r.response>"u"?r.responseText:r.response),0===m&&(m=b?200:0);let x=m>=200&&m<300;if("json"===n.responseType&&"string"==typeof b){const w=b;b=b.replace(e1e,"");try{b=""!==b?JSON.parse(b):null}catch(P){b=w,x&&(x=!1,b={error:P,text:b})}}x?(i.next(new IS({body:b,headers:p,status:m,statusText:v,url:g||void 0})),i.complete()):i.error(new cG({error:b,headers:p,status:m,statusText:v,url:g||void 0}))},c=p=>{const{url:m}=a(),v=new cG({error:p,status:r.status||0,statusText:r.statusText||"Unknown Error",url:m||void 0});i.error(v)};let d=!1;const h=p=>{d||(i.next(a()),d=!0);let m={type:_a.DownloadProgress,loaded:p.loaded};p.lengthComputable&&(m.total=p.total),"text"===n.responseType&&r.responseText&&(m.partialText=r.responseText),i.next(m)},u=p=>{let m={type:_a.UploadProgress,loaded:p.loaded};p.lengthComputable&&(m.total=p.total),i.next(m)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),n.reportProgress&&(r.addEventListener("progress",h),null!==s&&r.upload&&r.upload.addEventListener("progress",u)),r.send(s),i.next({type:_a.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),n.reportProgress&&(r.removeEventListener("progress",h),null!==s&&r.upload&&r.upload.removeEventListener("progress",u)),r.readyState!==r.DONE&&r.abort()}})}}return e.\u0275fac=function(n){return new(n||e)(Jt(V7))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();const _R=new ui("XSRF_ENABLED"),fG=new ui("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),mG=new ui("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class gG{}let r1e=(()=>{class e{constructor(n,i,r){this.doc=n,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=E7(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return e.\u0275fac=function(n){return new(n||e)(Jt(Js),Jt(uh),Jt(fG))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();function s1e(e,t){const n=e.url.toLowerCase();if(!Ai(_R)||"GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t(e);const i=Ai(gG).getToken(),r=Ai(mG);return null!=i&&!e.headers.has(r)&&(e=e.clone({headers:e.headers.set(r,i)})),t(e)}var ea=(()=>((ea=ea||{})[ea.Interceptors=0]="Interceptors",ea[ea.LegacyInterceptors=1]="LegacyInterceptors",ea[ea.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ea[ea.NoXsrfProtection=3]="NoXsrfProtection",ea[ea.JsonpSupport=4]="JsonpSupport",ea[ea.RequestsMadeViaParent=5]="RequestsMadeViaParent",ea))();function hy(e,t){return{\u0275kind:e,\u0275providers:t}}function o1e(...e){const t=[ac,pG,hG,{provide:TS,useExisting:hG},{provide:mR,useExisting:pG},{provide:dw,useValue:s1e,multi:!0},{provide:_R,useValue:!0},{provide:gG,useClass:r1e}];for(const n of e)t.push(...n.\u0275providers);return function Xae(e){return{\u0275providers:e}}(t)}const vG=new ui("LEGACY_INTERCEPTOR_FN");let l1e=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({providers:[o1e(hy(ea.LegacyInterceptors,[{provide:vG,useFactory:Kve},{provide:dw,useExisting:vG,multi:!0}]))]}),e})();function ir(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s}function uy(e,t){return function(n,i){t(n,i,e)}}var xr=_(2994),wl=_(7545),eu=_(7224),Ml=_(2986),xR=_(1307),d1e=_(864),bG=_(943),rl=_(591),h1e=_(4450),kS=_(6053),u1e=_(1961),xG=_(8514),p1e=_(4843),bs=_(1737),j0=_(8896),wG=_(1762),NS=_(1059),Sd=_(1709),us=_(7221),MG=_(2014),CG=_(8127),f1e=_(4290),PG=_(7314),SG=_(2821),m1e=_(7604),wR=_(537),EG=_(4327),LS=_(9146);const wr="primary",hw=Symbol("RouteTitle");class g1e{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function py(e){return new g1e(e)}function v1e(e,t,n){const i=n.path.split("/");if(i.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||i.length<e.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=e[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function tp(e,t){const n=e?Object.keys(e):void 0,i=t?Object.keys(t):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!OG(e[r],t[r]))return!1;return!0}function OG(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),i=[...t].sort();return n.every((r,s)=>i[s]===r)}return e===t}function AG(e){return Array.prototype.concat.apply([],e)}function TG(e){return e.length>0?e[e.length-1]:null}function Cl(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Wm(e){return a3(e)?e:Dx(e)?(0,Nl.D)(Promise.resolve(e)):(0,Ci.of)(e)}const FS=!1,_1e={exact:function RG(e,t,n){if(!H0(e.segments,t.segments)||!BS(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!e.children[i]||!RG(e.children[i],t.children[i],n))return!1;return!0},subset:kG},DG={exact:function b1e(e,t){return tp(e,t)},subset:function x1e(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>OG(e[n],t[n]))},ignored:()=>!0};function IG(e,t,n){return _1e[n.paths](e.root,t.root,n.matrixParams)&&DG[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function kG(e,t,n){return NG(e,t,t.segments,n)}function NG(e,t,n,i){if(e.segments.length>n.length){const r=e.segments.slice(0,n.length);return!(!H0(r,n)||t.hasChildren()||!BS(r,n,i))}if(e.segments.length===n.length){if(!H0(e.segments,n)||!BS(e.segments,n,i))return!1;for(const r in t.children)if(!e.children[r]||!kG(e.children[r],t.children[r],i))return!1;return!0}{const r=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!(H0(e.segments,r)&&BS(e.segments,r,i)&&e.children[wr])&&NG(e.children[wr],t,s,i)}}function BS(e,t,n){return t.every((i,r)=>DG[n](e[r].parameters,i.parameters))}class qm{constructor(t=new Vr([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=py(this.queryParams)),this._queryParamMap}toString(){return C1e.serialize(this)}}class Vr{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Cl(n,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zS(this)}}class uw{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=py(this.parameters)),this._parameterMap}toString(){return BG(this)}}function H0(e,t){return e.length===t.length&&e.every((n,i)=>n.path===t[i].path)}let pw=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:function(){return new MR},providedIn:"root"}),e})();class MR{parse(t){const n=new R1e(t);return new qm(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${fw(t.root,!0)}`,i=function E1e(e){const t=Object.keys(e).map(n=>{const i=e[n];return Array.isArray(i)?i.map(r=>`${US(n)}=${US(r)}`).join("&"):`${US(n)}=${US(i)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${i}${"string"==typeof t.fragment?`#${function P1e(e){return encodeURI(e)}(t.fragment)}`:""}`}}const C1e=new MR;function zS(e){return e.segments.map(t=>BG(t)).join("/")}function fw(e,t){if(!e.hasChildren())return zS(e);if(t){const n=e.children[wr]?fw(e.children[wr],!1):"",i=[];return Cl(e.children,(r,s)=>{s!==wr&&i.push(`${s}:${fw(r,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=function M1e(e,t){let n=[];return Cl(e.children,(i,r)=>{r===wr&&(n=n.concat(t(i,r)))}),Cl(e.children,(i,r)=>{r!==wr&&(n=n.concat(t(i,r)))}),n}(e,(i,r)=>r===wr?[fw(e.children[wr],!1)]:[`${r}:${fw(i,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[wr]?`${zS(e)}/${n[0]}`:`${zS(e)}/(${n.join("//")})`}}function LG(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function US(e){return LG(e).replace(/%3B/gi,";")}function CR(e){return LG(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function VS(e){return decodeURIComponent(e)}function FG(e){return VS(e.replace(/\+/g,"%20"))}function BG(e){return`${CR(e.path)}${function S1e(e){return Object.keys(e).map(t=>`;${CR(t)}=${CR(e[t])}`).join("")}(e.parameters)}`}const O1e=/^[^\/()?;=#]+/;function jS(e){const t=e.match(O1e);return t?t[0]:""}const A1e=/^[^=?&#]+/,D1e=/^[^&#]+/;class R1e{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Vr([],{}):new Vr([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[wr]=new Vr(t,n)),i}parseSegment(){const t=jS(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new pe(4009,FS);return this.capture(t),new uw(VS(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=jS(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const r=jS(this.remaining);r&&(i=r,this.capture(i))}t[VS(n)]=VS(i)}parseQueryParam(t){const n=function T1e(e){const t=e.match(A1e);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const o=function I1e(e){const t=e.match(D1e);return t?t[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=FG(n),s=FG(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=jS(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new pe(4010,FS);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=wr);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[wr]:new Vr([],o),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new pe(4011,FS)}}function PR(e){return e.segments.length>0?new Vr([],{[wr]:e}):e}function HS(e){const t={};for(const i of Object.keys(e.children)){const s=HS(e.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function k1e(e){if(1===e.numberOfChildren&&e.children[wr]){const t=e.children[wr];return new Vr(e.segments.concat(t.segments),t.children)}return e}(new Vr(e.segments,t))}function G0(e){return e instanceof qm}const SR=!1;function N1e(e,t,n,i,r){if(0===n.length)return fy(t.root,t.root,t.root,i,r);const s=function HG(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new jG(!0,0,e);let t=0,n=!1;const i=e.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Cl(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new jG(n,t,i)}(n);return s.toRoot()?fy(t.root,t.root,new Vr([],{}),i,r):function o(l){const c=function F1e(e,t,n,i){if(e.isAbsolute)return new my(t.root,!0,0);if(-1===i)return new my(n,n===t.root,0);return function GG(e,t,n){let i=e,r=t,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new pe(4005,SR&&"Invalid number of '../'");r=i.segments.length}return new my(i,!1,r-s)}(n,i+(mw(e.commands[0])?0:1),e.numberOfDoubleDots)}(s,t,e.snapshot?._urlSegment,l),d=c.processChildren?gy(c.segmentGroup,c.index,s.commands):ER(c.segmentGroup,c.index,s.commands);return fy(t.root,c.segmentGroup,d,i,r)}(e.snapshot?._lastPathIndex)}function mw(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function gw(e){return"object"==typeof e&&null!=e&&e.outlets}function fy(e,t,n,i,r){let o,s={};i&&Cl(i,(l,c)=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`}),o=e===t?n:VG(e,t,n);const a=PR(HS(o));return new qm(a,s,r)}function VG(e,t,n){const i={};return Cl(e.children,(r,s)=>{i[s]=r===t?n:VG(r,t,n)}),new Vr(e.segments,i)}class jG{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&mw(i[0]))throw new pe(4003,SR&&"Root segment cannot have matrix parameters");const r=i.find(gw);if(r&&r!==TG(i))throw new pe(4004,SR&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class my{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}}function ER(e,t,n){if(e||(e=new Vr([],{})),0===e.segments.length&&e.hasChildren())return gy(e,t,n);const i=function z1e(e,t,n){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return s;const o=e.segments[r],a=n[i];if(gw(a))break;const l=`${a}`,c=i<n.length-1?n[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!qG(l,c,o))return s;i+=2}else{if(!qG(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const s=new Vr(e.segments.slice(0,i.pathIndex),{});return s.children[wr]=new Vr(e.segments.slice(i.pathIndex),e.children),gy(s,0,r)}return i.match&&0===r.length?new Vr(e.segments,{}):i.match&&!e.hasChildren()?OR(e,t,n):i.match?gy(e,0,r):OR(e,t,n)}function gy(e,t,n){if(0===n.length)return new Vr(e.segments,{});{const i=function B1e(e){return gw(e[0])?e[0].outlets:{[wr]:e}}(n),r={};if(!i[wr]&&e.children[wr]&&1===e.numberOfChildren&&0===e.children[wr].segments.length){const s=gy(e.children[wr],t,n);return new Vr(e.segments,s.children)}return Cl(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=ER(e.children[o],t,s))}),Cl(e.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new Vr(e.segments,r)}}function OR(e,t,n){const i=e.segments.slice(0,t);let r=0;for(;r<n.length;){const s=n[r];if(gw(s)){const l=U1e(s.outlets);return new Vr(i,l)}if(0===r&&mw(n[0])){i.push(new uw(e.segments[t].path,WG(n[0]))),r++;continue}const o=gw(s)?s.outlets[wr]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&mw(a)?(i.push(new uw(o,WG(a))),r+=2):(i.push(new uw(o,{})),r++)}return new Vr(i,{})}function U1e(e){const t={};return Cl(e,(n,i)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[i]=OR(new Vr([],{}),0,n))}),t}function WG(e){const t={};return Cl(e,(n,i)=>t[i]=`${n}`),t}function qG(e,t,n){return e==n.path&&tp(t,n.parameters)}const vw="imperative";class np{constructor(t,n){this.id=t,this.url=n}}class AR extends np{constructor(t,n,i="imperative",r=null){super(t,n),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xm extends np{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class GS extends np{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class WS extends np{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=16}}class TR extends np{constructor(t,n,i,r){super(t,n),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class V1e extends np{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class j1e extends np{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H1e extends np{constructor(t,n,i,r,s){super(t,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class G1e extends np{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W1e extends np{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class q1e{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class X1e{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Y1e{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $1e{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class K1e{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z1e{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XG{constructor(t,n,i){this.routerEvent=t,this.position=n,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let eye=(()=>{class e{createUrlTree(n,i,r,s,o,a){return N1e(n||i.root,r,s,o,a)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})(),nye=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:function(t){return eye.\u0275fac(t)},providedIn:"root"}),e})();class YG{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=DR(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){const n=DR(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=IR(t,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return IR(t,this._root).map(n=>n.value)}}function DR(e,t){if(e===t.value)return t;for(const n of t.children){const i=DR(e,n);if(i)return i}return null}function IR(e,t){if(e===t.value)return[t];for(const n of t.children){const i=IR(e,n);if(i.length)return i.unshift(t),i}return[]}class df{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function vy(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class $G extends YG{constructor(t,n){super(t),this.snapshot=n,RR(this,t)}toString(){return this.snapshot.toString()}}function KG(e,t){const n=function iye(e,t){const o=new qS([],{},{},"",{},wr,t,null,e.root,-1,{});return new QG("",new df(o,[]))}(e,t),i=new rl.X([new uw("",{})]),r=new rl.X({}),s=new rl.X({}),o=new rl.X({}),a=new rl.X(""),l=new jc(i,r,o,a,s,wr,t,n.root);return l.snapshot=n.root,new $G(new df(l,[]),n)}class jc{constructor(t,n,i,r,s,o,a,l){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe((0,Zi.U)(c=>c[hw]))??(0,Ci.of)(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Zi.U)(t=>py(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Zi.U)(t=>py(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ZG(e,t="emptyOnly"){const n=e.pathFromRoot;let i=0;if("always"!==t)for(i=n.length-1;i>=1;){const r=n[i],s=n[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function rye(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(i))}class qS{get title(){return this.data?.[hw]}constructor(t,n,i,r,s,o,a,l,c,d,h){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=d,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=py(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=py(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class QG extends YG{constructor(t,n){super(n),this.url=t,RR(this,n)}toString(){return JG(this._root)}}function RR(e,t){t.value._routerState=e,t.children.forEach(n=>RR(e,n))}function JG(e){const t=e.children.length>0?` { ${e.children.map(JG).join(", ")} } `:"";return`${e.value}${t}`}function kR(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,tp(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),tp(t.params,n.params)||e.params.next(n.params),function y1e(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!tp(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),tp(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function NR(e,t){const n=tp(e.params,t.params)&&function w1e(e,t){return H0(e,t)&&e.every((n,i)=>tp(n.parameters,t[i].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||NR(e.parent,t.parent))}function yw(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=t.value;const r=function oye(e,t,n){return t.children.map(i=>{for(const r of n.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return yw(e,i,r);return yw(e,i)})}(e,t,n);return new df(i,r)}{if(e.shouldAttach(t.value)){const s=e.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>yw(e,a)),o}}const i=function aye(e){return new jc(new rl.X(e.url),new rl.X(e.params),new rl.X(e.queryParams),new rl.X(e.fragment),new rl.X(e.data),e.outlet,e.component,e)}(t.value),r=t.children.map(s=>yw(e,s));return new df(i,r)}}const LR="ngNavigationCancelingError";function eW(e,t){const{redirectTo:n,navigationBehaviorOptions:i}=G0(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=tW(!1,0,t);return r.url=n,r.navigationBehaviorOptions=i,r}function tW(e,t,n){const i=new Error("NavigationCancelingError: "+(e||""));return i[LR]=!0,i.cancellationCode=t,n&&(i.url=n),i}function nW(e){return iW(e)&&G0(e.url)}function iW(e){return e&&e[LR]}class lye{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new _w,this.attachRef=null}}let _w=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,i){const r=this.getOrCreateContext(n);r.outlet=i,this.contexts.set(n,r)}onChildOutletDestroyed(n){const i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new lye,this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const XS=!1;let FR=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=wr,this.activateEvents=new cr,this.deactivateEvents=new cr,this.attachEvents=new cr,this.detachEvents=new cr,this.parentContexts=Ai(_w),this.location=Ai($h),this.changeDetector=Ai(Zh),this.environmentInjector=Ai(qu)}ngOnChanges(n){if(n.name){const{firstChange:i,previousValue:r}=n.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new pe(4012,XS);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new pe(4012,XS);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new pe(4012,XS);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new pe(4013,XS);this._activatedRoute=n;const r=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new cye(n,a,r.injector);if(i&&function dye(e){return!!e.resolveComponentFactory}(i)){const c=i.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=xn({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[O]}),e})();class cye{constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===jc?this.route:t===_w?this.childContexts:this.parent.get(t,n)}}let BR=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=qi({type:e,selectors:[["ng-component"]],standalone:!0,features:[$V],decls:1,vars:0,template:function(n,i){1&n&&ue(0,"router-outlet")},dependencies:[FR],encapsulation:2}),e})();function rW(e,t){return e.providers&&!e._injector&&(e._injector=DP(e.providers,t,`Route: ${e.path}`)),e._injector??t}function UR(e){const t=e.children&&e.children.map(UR),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==wr&&(n.component=BR),n}function _h(e){return e.outlet||wr}function sW(e,t){const n=e.filter(i=>_h(i)===t);return n.push(...e.filter(i=>_h(i)!==t)),n}function bw(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class mye{constructor(t,n,i,r){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=r}activate(t){const n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),kR(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){const r=vy(n);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Cl(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,n,i){const r=t.value,s=n?n.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,n,o.children)}else this.deactivateChildRoutes(t,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,s=vy(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){const i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,s=vy(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,n,i){const r=vy(n);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Z1e(s.value.snapshot))}),t.children.length&&this.forwardEvent(new $1e(t.value.snapshot))}activateRoutes(t,n,i){const r=t.value,s=n?n.value:null;if(kR(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,n,o.children)}else this.activateChildRoutes(t,n,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),kR(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=bw(r.snapshot),l=a?.get(L1)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}}class oW{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class YS{constructor(t,n){this.component=t,this.route=n}}function gye(e,t,n){const i=e._root;return xw(i,t?t._root:null,n,[i.value])}function yy(e,t){const n=Symbol(),i=t.get(e,n);return i===n?"function"!=typeof e||function gn(e){return null!==bi(e)}(e)?t.get(e):e:i}function xw(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=vy(t);return e.children.forEach(o=>{(function yye(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function _ye(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!H0(e.url,t.url);case"pathParamsOrQueryParamsChange":return!H0(e.url,t.url)||!tp(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!NR(e,t)||!tp(e.queryParams,t.queryParams);default:return!NR(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new oW(i)):(s.data=o.data,s._resolvedData=o._resolvedData),xw(e,t,s.component?a?a.children:null:n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new YS(a.outlet.component,o))}else o&&ww(t,a,r),r.canActivateChecks.push(new oW(i)),xw(e,null,s.component?a?a.children:null:n,i,r)})(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Cl(s,(o,a)=>ww(o,n.getContext(a),r)),r}function ww(e,t,n){const i=vy(e),r=e.value;Cl(i,(s,o)=>{ww(s,r.component?t?t.children.getContext(o):null:t,n)}),n.canDeactivateChecks.push(new YS(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Mw(e){return"function"==typeof e}function VR(e){return e instanceof h1e.K||"EmptyError"===e?.name}const $S=Symbol("INITIAL_VALUE");function _y(){return(0,wl.w)(e=>(0,kS.aj)(e.map(t=>t.pipe((0,Ml.q)(1),(0,NS.O)($S)))).pipe((0,Zi.U)(t=>{for(const n of t)if(!0!==n){if(n===$S)return $S;if(!1===n||n instanceof qm)return n}return!0}),(0,xl.h)(t=>t!==$S),(0,Ml.q)(1)))}function aW(e){return(0,p1e.z)((0,xr.b)(t=>{if(G0(t))throw eW(0,t)}),(0,Zi.U)(t=>!0===t))}const jR={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lW(e,t,n,i,r){const s=HR(e,t,n);return s.matched?function Lye(e,t,n,i){const r=t.canMatch;if(!r||0===r.length)return(0,Ci.of)(!0);const s=r.map(o=>{const a=yy(o,e);return Wm(function Pye(e){return e&&Mw(e.canMatch)}(a)?a.canMatch(t,n):e.runInContext(()=>a(t,n)))});return(0,Ci.of)(s).pipe(_y(),aW())}(i=rW(t,i),t,n).pipe((0,Zi.U)(o=>!0===o?s:{...jR})):(0,Ci.of)(s)}function HR(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...jR}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const r=(t.matcher||v1e)(n,e,t);if(!r)return{...jR};const s={};Cl(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function KS(e,t,n,i){if(n.length>0&&function zye(e,t,n){return n.some(i=>ZS(e,t,i)&&_h(i)!==wr)}(e,n,i)){const s=new Vr(t,function Bye(e,t,n,i){const r={};r[wr]=i,i._sourceSegment=e,i._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&_h(s)!==wr){const o=new Vr([],{});o._sourceSegment=e,o._segmentIndexShift=t.length,r[_h(s)]=o}return r}(e,t,i,new Vr(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function Uye(e,t,n){return n.some(i=>ZS(e,t,i))}(e,n,i)){const s=new Vr(e.segments,function Fye(e,t,n,i,r){const s={};for(const o of i)if(ZS(e,n,o)&&!r[_h(o)]){const a=new Vr([],{});a._sourceSegment=e,a._segmentIndexShift=t.length,s[_h(o)]=a}return{...r,...s}}(e,t,n,i,e.children));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const r=new Vr(e.segments,e.children);return r._sourceSegment=e,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:n}}function ZS(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function cW(e,t,n,i){return!!(_h(e)===i||i!==wr&&ZS(t,n,e))&&("**"===e.path||HR(t,e,n).matched)}function dW(e,t,n){return 0===t.length&&!e.children[n]}const QS=!1;class JS{constructor(t){this.segmentGroup=t||null}}class hW{constructor(t){this.urlTree=t}}function Cw(e){return(0,bs._)(new JS(e))}function uW(e){return(0,bs._)(new hW(e))}class Gye{constructor(t,n,i,r,s){this.injector=t,this.configLoader=n,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=KS(this.urlTree.root,[],[],this.config).segmentGroup,n=new Vr(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,wr).pipe((0,Zi.U)(s=>this.createUrlTree(HS(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,us.K)(s=>{if(s instanceof hW)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof JS?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,wr).pipe((0,Zi.U)(r=>this.createUrlTree(HS(r),t.queryParams,t.fragment))).pipe((0,us.K)(r=>{throw r instanceof JS?this.noMatchError(r):r}))}noMatchError(t){return new pe(4002,QS)}createUrlTree(t,n,i){const r=PR(t);return new qm(r,n,i)}expandSegmentGroup(t,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,n,i).pipe((0,Zi.U)(s=>new Vr([],s))):this.expandSegment(t,i,n,i.segments,r,!0)}expandChildren(t,n,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,Nl.D)(r).pipe((0,Hm.b)(s=>{const o=i.children[s],a=sW(n,s);return this.expandSegmentGroup(t,a,o,s).pipe((0,Zi.U)(l=>({segment:l,outlet:s})))}),(0,MG.R)((s,o)=>(s[o.outlet]=o.segment,s),{}),(0,CG.Z)())}expandSegment(t,n,i,r,s,o){return(0,Nl.D)(i).pipe((0,Hm.b)(a=>this.expandSegmentAgainstRoute(t,n,i,a,r,s,o).pipe((0,us.K)(c=>{if(c instanceof JS)return(0,Ci.of)(null);throw c}))),(0,eu.P)(a=>!!a),(0,us.K)((a,l)=>{if(VR(a))return dW(n,r,s)?(0,Ci.of)(new Vr([],{})):Cw(n);throw a}))}expandSegmentAgainstRoute(t,n,i,r,s,o,a){return cW(r,n,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,n,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,i,r,s,o):Cw(n):Cw(n)}expandSegmentAgainstRouteUsingRedirect(t,n,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?uW(s):this.lineralizeSegments(i,s).pipe((0,Sd.zg)(o=>{const a=new Vr(o,{});return this.expandSegment(t,a,n,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:d}=HR(n,r,s);if(!a)return Cw(n);const h=this.applyRedirectCommands(l,r.redirectTo,d);return r.redirectTo.startsWith("/")?uW(h):this.lineralizeSegments(r,h).pipe((0,Sd.zg)(u=>this.expandSegment(t,n,i,u.concat(c),o,!1)))}matchSegmentAgainstRoute(t,n,i,r,s){return"**"===i.path?(t=rW(i,t),i.loadChildren?(i._loadedRoutes?(0,Ci.of)({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,Zi.U)(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new Vr(r,{})))):(0,Ci.of)(new Vr(r,{}))):lW(n,i,r,t).pipe((0,wl.w)(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(t=i._injector??t,i,r).pipe((0,Sd.zg)(d=>{const h=d.injector??t,u=d.routes,{segmentGroup:p,slicedSegments:m}=KS(n,a,l,u),v=new Vr(p.segments,p.children);if(0===m.length&&v.hasChildren())return this.expandChildren(h,u,v).pipe((0,Zi.U)(w=>new Vr(a,w)));if(0===u.length&&0===m.length)return(0,Ci.of)(new Vr(a,{}));const g=_h(i)===s;return this.expandSegment(h,v,u,m,g?wr:s,!0).pipe((0,Zi.U)(x=>new Vr(a.concat(x.segments),x.children)))})):Cw(n)))}getChildConfig(t,n,i){return n.children?(0,Ci.of)({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?(0,Ci.of)({routes:n._loadedRoutes,injector:n._loadedInjector}):function Nye(e,t,n,i){const r=t.canLoad;if(void 0===r||0===r.length)return(0,Ci.of)(!0);const s=r.map(o=>{const a=yy(o,e);return Wm(function xye(e){return e&&Mw(e.canLoad)}(a)?a.canLoad(t,n):e.runInContext(()=>a(t,n)))});return(0,Ci.of)(s).pipe(_y(),aW())}(t,n,i).pipe((0,Sd.zg)(r=>r?this.configLoader.loadChildren(t,n).pipe((0,xr.b)(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function jye(e){return(0,bs._)(tW(QS,3))}())):(0,Ci.of)({routes:[],injector:t})}lineralizeSegments(t,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return(0,Ci.of)(i);if(r.numberOfChildren>1||!r.children[wr])return t.redirectTo,(0,bs._)(new pe(4e3,QS));r=r.children[wr]}}applyRedirectCommands(t,n,i){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i)}applyRedirectCreateUrlTree(t,n,i,r){const s=this.createSegmentGroup(t,n.root,i,r);return new qm(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const i={};return Cl(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=n[a]}else i[s]=r}),i}createSegmentGroup(t,n,i,r){const s=this.createSegments(t,n.segments,i,r);let o={};return Cl(n.children,(a,l)=>{o[l]=this.createSegmentGroup(t,a,i,r)}),new Vr(s,o)}createSegments(t,n,i,r){return n.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,n,i){const r=i[n.path.substring(1)];if(!r)throw new pe(4001,QS);return r}findOrReturn(t,n){let i=0;for(const r of n){if(r.path===t.path)return n.splice(i),r;i++}return t}}class qye{}class $ye{constructor(t,n,i,r,s,o,a){this.injector=t,this.rootComponentType=n,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const t=KS(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,wr).pipe((0,Zi.U)(n=>{if(null===n)return null;const i=new qS([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},wr,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new df(i,n),s=new QG(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const n=t.value,i=ZG(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,n,i):this.processSegment(t,n,i,i.segments,r)}processChildren(t,n,i){return(0,Nl.D)(Object.keys(i.children)).pipe((0,Hm.b)(r=>{const s=i.children[r],o=sW(n,r);return this.processSegmentGroup(t,o,s,r)}),(0,MG.R)((r,s)=>r&&s?(r.push(...s),r):null),(0,f1e.o)(r=>null!==r),(0,PG.d)(null),(0,CG.Z)(),(0,Zi.U)(r=>{if(null===r)return null;const s=fW(r);return function Kye(e){e.sort((t,n)=>t.value.outlet===wr?-1:n.value.outlet===wr?1:t.value.outlet.localeCompare(n.value.outlet))}(s),s}))}processSegment(t,n,i,r,s){return(0,Nl.D)(n).pipe((0,Hm.b)(o=>this.processSegmentAgainstRoute(o._injector??t,o,i,r,s)),(0,eu.P)(o=>!!o),(0,us.K)(o=>{if(VR(o))return dW(i,r,s)?(0,Ci.of)([]):(0,Ci.of)(null);throw o}))}processSegmentAgainstRoute(t,n,i,r,s){if(n.redirectTo||!cW(n,i,r,s))return(0,Ci.of)(null);let o;if("**"===n.path){const a=r.length>0?TG(r).parameters:{},l=gW(i)+r.length,c=new qS(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,vW(n),_h(n),n.component??n._loadedComponent??null,n,mW(i),l,yW(n));o=(0,Ci.of)({snapshot:c,consumedSegments:[],remainingSegments:[]})}else o=lW(i,n,r,t).pipe((0,Zi.U)(({matched:a,consumedSegments:l,remainingSegments:c,parameters:d})=>{if(!a)return null;const h=gW(i)+l.length;return{snapshot:new qS(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,vW(n),_h(n),n.component??n._loadedComponent??null,n,mW(i),h,yW(n)),consumedSegments:l,remainingSegments:c}}));return o.pipe((0,wl.w)(a=>{if(null===a)return(0,Ci.of)(null);const{snapshot:l,consumedSegments:c,remainingSegments:d}=a;t=n._injector??t;const h=n._loadedInjector??t,u=function Zye(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(n),{segmentGroup:p,slicedSegments:m}=KS(i,c,d,u.filter(g=>void 0===g.redirectTo));if(0===m.length&&p.hasChildren())return this.processChildren(h,u,p).pipe((0,Zi.U)(g=>null===g?null:[new df(l,g)]));if(0===u.length&&0===m.length)return(0,Ci.of)([new df(l,[])]);const v=_h(n)===s;return this.processSegment(h,u,p,m,v?wr:s).pipe((0,Zi.U)(g=>null===g?null:[new df(l,g)]))}))}}function Qye(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function fW(e){const t=[],n=new Set;for(const i of e){if(!Qye(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),n.add(r)):t.push(i)}for(const i of n){const r=fW(i.children);t.push(new df(i.value,r))}return t.filter(i=>!n.has(i))}function mW(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function gW(e){let t=e,n=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift??0;return n-1}function vW(e){return e.data||{}}function yW(e){return e.resolve||{}}function _W(e){return"string"==typeof e.title||null===e.title}function GR(e){return(0,wl.w)(t=>{const n=e(t);return n?(0,Nl.D)(n).pipe((0,Zi.U)(()=>t)):(0,Ci.of)(t)})}const by=new ui("ROUTES");let WR=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ai(U9)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return(0,Ci.of)(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const i=Wm(n.loadComponent()).pipe((0,Zi.U)(xW),(0,xr.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),(0,wR.x)(()=>{this.componentLoaders.delete(n)})),r=new wG.c(i,()=>new M.xQ).pipe((0,EG.x)());return this.componentLoaders.set(n,r),r}loadChildren(n,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,Ci.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,Zi.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,c,d=!1;Array.isArray(a)?c=a:(l=a.create(n).injector,c=AG(l.get(by,[],En.Self|En.Optional)));return{routes:c.map(UR),injector:l}}),(0,wR.x)(()=>{this.childrenLoaders.delete(i)})),o=new wG.c(s,()=>new M.xQ).pipe((0,EG.x)());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(n){return Wm(n()).pipe((0,Zi.U)(xW),(0,Sd.zg)(i=>i instanceof XV||Array.isArray(i)?(0,Ci.of)(i):(0,Nl.D)(this.compiler.compileModuleAsync(i))))}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function xW(e){return function o_e(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let t2=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new M.xQ,this.configLoader=Ai(WR),this.environmentInjector=Ai(qu),this.urlSerializer=Ai(pw),this.rootContexts=Ai(_w),this.navigationId=0,this.afterPreactivation=()=>(0,Ci.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new X1e(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new q1e(r))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:i})}setupNavigations(n){return this.transitions=new rl.X({id:0,targetPageId:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:vw,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,xl.h)(i=>0!==i.id),(0,Zi.U)(i=>({...i,extractedUrl:n.urlHandlingStrategy.extract(i.rawUrl)})),(0,wl.w)(i=>{let r=!1,s=!1;return(0,Ci.of)(i).pipe((0,xr.b)(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,wl.w)(o=>{const a=n.browserUrlTree.toString(),l=!n.navigated||o.extractedUrl.toString()!==a||a!==n.currentUrlTree.toString();if(!l&&"reload"!==(o.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const d="";return this.events.next(new WS(o.id,n.serializeUrl(i.rawUrl),d,0)),n.rawUrlTree=o.rawUrl,o.resolve(null),j0.E}if(n.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return wW(o.source)&&(n.browserUrlTree=o.extractedUrl),(0,Ci.of)(o).pipe((0,wl.w)(d=>{const h=this.transitions?.getValue();return this.events.next(new AR(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?j0.E:Promise.resolve(d)}),function Wye(e,t,n,i){return(0,wl.w)(r=>function Hye(e,t,n,i,r){return new Gye(e,t,n,i,r).apply()}(e,t,n,r.extractedUrl,i).pipe((0,Zi.U)(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,n.config),(0,xr.b)(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},i.urlAfterRedirects=d.urlAfterRedirects}),function e_e(e,t,n,i,r){return(0,Sd.zg)(s=>function Yye(e,t,n,i,r,s,o="emptyOnly"){return new $ye(e,t,n,i,r,o,s).recognize().pipe((0,wl.w)(a=>null===a?function Xye(e){return new T.y(t=>t.error(e))}(new qye):(0,Ci.of)(a)))}(e,t,n,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe((0,Zi.U)(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),(0,xr.b)(d=>{if(i.targetSnapshot=d.targetSnapshot,"eager"===n.urlUpdateStrategy){if(!d.extras.skipLocationChange){const u=n.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);n.setBrowserUrl(u,d)}n.browserUrlTree=d.urlAfterRedirects}const h=new V1e(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(l&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:d,extractedUrl:h,source:u,restoredState:p,extras:m}=o,v=new AR(d,this.urlSerializer.serialize(h),u,p);this.events.next(v);const g=KG(h,this.rootComponentType).snapshot;return i={...o,targetSnapshot:g,urlAfterRedirects:h,extras:{...m,skipLocationChange:!1,replaceUrl:!1}},(0,Ci.of)(i)}{const d="";return this.events.next(new WS(o.id,n.serializeUrl(i.extractedUrl),d,1)),n.rawUrlTree=o.rawUrl,o.resolve(null),j0.E}}),(0,xr.b)(o=>{const a=new j1e(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),(0,Zi.U)(o=>i={...o,guards:gye(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function Eye(e,t){return(0,Sd.zg)(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,Ci.of)({...n,guardsResult:!0}):function Oye(e,t,n,i){return(0,Nl.D)(e).pipe((0,Sd.zg)(r=>function kye(e,t,n,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,Ci.of)(!0);const o=s.map(a=>{const l=bw(t)??r,c=yy(a,l);return Wm(function Cye(e){return e&&Mw(e.canDeactivate)}(c)?c.canDeactivate(e,t,n,i):l.runInContext(()=>c(e,t,n,i))).pipe((0,eu.P)())});return(0,Ci.of)(o).pipe(_y())}(r.component,r.route,n,t,i)),(0,eu.P)(r=>!0!==r,!0))}(o,i,r,e).pipe((0,Sd.zg)(a=>a&&function bye(e){return"boolean"==typeof e}(a)?function Aye(e,t,n,i){return(0,Nl.D)(t).pipe((0,Hm.b)(r=>(0,u1e.z)(function Dye(e,t){return null!==e&&t&&t(new Y1e(e)),(0,Ci.of)(!0)}(r.route.parent,i),function Tye(e,t){return null!==e&&t&&t(new K1e(e)),(0,Ci.of)(!0)}(r.route,i),function Rye(e,t,n){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function vye(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(o)).filter(o=>null!==o).map(o=>(0,xG.P)(()=>{const a=o.guards.map(l=>{const c=bw(o.node)??n,d=yy(l,c);return Wm(function Mye(e){return e&&Mw(e.canActivateChild)}(d)?d.canActivateChild(i,e):c.runInContext(()=>d(i,e))).pipe((0,eu.P)())});return(0,Ci.of)(a).pipe(_y())}));return(0,Ci.of)(s).pipe(_y())}(e,r.path,n),function Iye(e,t,n){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return(0,Ci.of)(!0);const r=i.map(s=>(0,xG.P)(()=>{const o=bw(t)??n,a=yy(s,o);return Wm(function wye(e){return e&&Mw(e.canActivate)}(a)?a.canActivate(t,e):o.runInContext(()=>a(t,e))).pipe((0,eu.P)())}));return(0,Ci.of)(r).pipe(_y())}(e,r.route,n))),(0,eu.P)(r=>!0!==r,!0))}(i,s,e,t):(0,Ci.of)(a)),(0,Zi.U)(a=>({...n,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),(0,xr.b)(o=>{if(i.guardsResult=o.guardsResult,G0(o.guardsResult))throw eW(0,o.guardsResult);const a=new H1e(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),(0,xl.h)(o=>!!o.guardsResult||(n.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),GR(o=>{if(o.guards.canActivateChecks.length)return(0,Ci.of)(o).pipe((0,xr.b)(a=>{const l=new G1e(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),(0,wl.w)(a=>{let l=!1;return(0,Ci.of)(a).pipe(function t_e(e,t){return(0,Sd.zg)(n=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return(0,Ci.of)(n);let s=0;return(0,Nl.D)(r).pipe((0,Hm.b)(o=>function n_e(e,t,n,i){const r=e.routeConfig,s=e._resolve;return void 0!==r?.title&&!_W(r)&&(s[hw]=r.title),function i_e(e,t,n,i){const r=function r_e(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===r.length)return(0,Ci.of)({});const s={};return(0,Nl.D)(r).pipe((0,Sd.zg)(o=>function s_e(e,t,n,i){const r=bw(t)??i,s=yy(e,r);return Wm(s.resolve?s.resolve(t,n):r.runInContext(()=>s(t,n)))}(e[o],t,n,i).pipe((0,eu.P)(),(0,xr.b)(a=>{s[o]=a}))),(0,SG.h)(1),(0,m1e.h)(s),(0,us.K)(o=>VR(o)?j0.E:(0,bs._)(o)))}(s,e,t,i).pipe((0,Zi.U)(o=>(e._resolvedData=o,e.data=ZG(e,n).resolve,r&&_W(r)&&(e.data[hw]=r.title),null)))}(o.route,i,e,t)),(0,xr.b)(()=>s++),(0,SG.h)(1),(0,Sd.zg)(o=>s===r.length?(0,Ci.of)(n):j0.E))})}(n.paramsInheritanceStrategy,this.environmentInjector),(0,xr.b)({next:()=>l=!0,complete:()=>{l||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),(0,xr.b)(a=>{const l=new W1e(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),GR(o=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe((0,xr.b)(d=>{l.component=d}),(0,Zi.U)(()=>{})));for(const d of l.children)c.push(...a(d));return c};return(0,kS.aj)(a(o.targetSnapshot.root)).pipe((0,PG.d)(),(0,Ml.q)(1))}),GR(()=>this.afterPreactivation()),(0,Zi.U)(o=>{const a=function sye(e,t,n){const i=yw(e,t._root,n?n._root:void 0);return new $G(i,t)}(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return i={...o,targetRouterState:a}}),(0,xr.b)(o=>{n.currentUrlTree=o.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),n.routerState=o.targetRouterState,"deferred"===n.urlUpdateStrategy&&(o.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,o),n.browserUrlTree=o.urlAfterRedirects)}),((e,t,n)=>(0,Zi.U)(i=>(new mye(t,i.targetRouterState,i.currentRouterState,n).activate(e),i)))(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o)),(0,Ml.q)(1),(0,xr.b)({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new Xm(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),(0,wR.x)(()=>{r||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),(0,us.K)(o=>{if(s=!0,iW(o)){nW(o)||(n.navigated=!0,n.restoreHistory(i,!0));const a=new GS(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),nW(o)){const l=n.urlHandlingStrategy.merge(o.url,n.rawUrlTree),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||wW(i.source)};n.scheduleNavigation(l,vw,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{n.restoreHistory(i,!0);const a=new TR(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);this.events.next(a);try{i.resolve(n.errorHandler(o))}catch(l){i.reject(l)}}return j0.E}))}))}cancelNavigationTransition(n,i,r){const s=new GS(n.id,this.urlSerializer.serialize(n.extractedUrl),i,r);this.events.next(s),n.resolve(!1)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function wW(e){return e!==vw}let MW=(()=>{class e{buildTitle(n){let i,r=n.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===wr);return i}getResolvedTitleForRoute(n){return n.data[hw]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:function(){return Ai(a_e)},providedIn:"root"}),e})(),a_e=(()=>{class e extends MW{constructor(n){super(),this.title=n}updateTitle(n){const i=this.buildTitle(n);void 0!==i&&this.title.setTitle(i)}}return e.\u0275fac=function(n){return new(n||e)(Jt(Md))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),l_e=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:function(){return Ai(d_e)},providedIn:"root"}),e})();class c_e{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}let d_e=(()=>{class e extends c_e{}return e.\u0275fac=function(){let t;return function(i){return(t||(t=_l(e)))(i||e)}}(),e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const n2=new ui("",{providedIn:"root",factory:()=>({})});let u_e=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:function(){return Ai(p_e)},providedIn:"root"}),e})(),p_e=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,i){return n}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function f_e(e){throw e}function m_e(e,t,n){return t.parse("/")}const g_e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},v_e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Oo=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ai(Nue),this.isNgZoneEnabled=!1,this.options=Ai(n2,{optional:!0})||{},this.errorHandler=this.options.errorHandler||f_e,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||m_e,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ai(u_e),this.routeReuseStrategy=Ai(l_e),this.urlCreationStrategy=Ai(nye),this.titleStrategy=Ai(MW),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=AG(Ai(by,{optional:!0})??[]),this.navigationTransitions=Ai(t2),this.urlSerializer=Ai(pw),this.location=Ai(km),this.isNgZoneEnabled=Ai(_s)instanceof _s&&_s.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new qm,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=KG(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId??0},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),vw,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const i="popstate"===n.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,i,n.state)},0)}))}navigateToSyncWithBrowser(n,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(n);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(n){this.config=n.map(UR),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,n,d,c??null)}navigateByUrl(n,i={skipLocationChange:!1}){const r=G0(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,vw,null,i)}navigate(n,i={skipLocationChange:!1}){return function y_e(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new pe(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let i;try{i=this.urlSerializer.parse(n)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,n)}return i}isActive(n,i){let r;if(r=!0===i?{...g_e}:!1===i?{...v_e}:i,G0(n))return IG(this.currentUrlTree,n,r);const s=this.parseUrl(n);return IG(this.currentUrlTree,s,r)}removeEmptyProps(n){return Object.keys(n).reduce((i,r)=>{const s=n[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(n,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c,d;return o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((h,u)=>{a=h,l=u}),d="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:d,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}setBrowserUrl(n,i){const r=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.go(r,"",s)}}restoreHistory(n,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,i){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),xy=(()=>{class e{constructor(n,i,r,s,o,a){this.router=n,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new M.xQ;const l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=n.events.subscribe(c=>{c instanceof Xm&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(n){this._preserveFragment=ny(n)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(n){this._skipLocationChange=ny(n)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(n){this._replaceUrl=ny(n)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,i,r,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function M6(e,t,n){return function qae(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?w6:De}(t,n)(e)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,n,i):r.removeAttribute(s,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return e.\u0275fac=function(n){return new(n||e)(Ne(Oo),Ne(jc),function g0(e){return function uoe(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const s=n[r];if(KC(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(s===t)return n[r+1];r+=2}}}return null}(ji(),e)}("tabindex"),Ne(ga),Ne(Ts),Ne(Rm))},e.\u0275dir=xn({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,i){1&n&&zt("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&n&&Xs("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[O]}),e})();class CW{}let x_e=(()=>{class e{constructor(n,i,r,s,o){this.router=n,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe((0,xl.h)(n=>n instanceof Xm),(0,Hm.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=DP(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return(0,Nl.D)(r).pipe((0,LS.J)())}preloadConfig(n,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(n,i):(0,Ci.of)(null);const s=r.pipe((0,Sd.zg)(o=>null===o?(0,Ci.of)(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));if(i.loadComponent&&!i._loadedComponent){const o=this.loader.loadComponent(i);return(0,Nl.D)([s,o]).pipe((0,LS.J)())}return s})}}return e.\u0275fac=function(n){return new(n||e)(Jt(Oo),Jt(U9),Jt(qu),Jt(CW),Jt(WR))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const XR=new ui("");let PW=(()=>{class e{constructor(n,i,r,s,o={}){this.urlSerializer=n,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof AR?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Xm&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof XG&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new XG(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return e.\u0275fac=function(n){!function J6(){throw new Error("invalid")}()},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();var Ed=(()=>((Ed=Ed||{})[Ed.COMPLETE=0]="COMPLETE",Ed[Ed.FAILED=1]="FAILED",Ed[Ed.REDIRECTING=2]="REDIRECTING",Ed))();const wy=!1;function Ym(e,t){return{\u0275kind:e,\u0275providers:t}}const YR=new ui("",{providedIn:"root",factory:()=>!1});function EW(){const e=Ai(Rl);return t=>{const n=e.get(T0);if(t!==n.components[0])return;const i=e.get(Oo),r=e.get(OW);1===e.get($R)&&i.initialNavigation(),e.get(AW,null,En.Optional)?.setUpPreloading(),e.get(XR,null,En.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const OW=new ui(wy?"bootstrap done indicator":"",{factory:()=>new M.xQ}),$R=new ui(wy?"initial navigation":"",{providedIn:"root",factory:()=>1});function S_e(){let e=[];return e=wy?[{provide:hP,multi:!0,useFactory:()=>{const t=Ai(Oo);return()=>t.events.subscribe(n=>{console.group?.(`Router Event: ${n.constructor.name}`),console.log(function Q1e(e){if(!("type"in e))return`Unknown Router Event: ${e.constructor.name}`;switch(e.type){case 14:return`ActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state}, shouldActivate: ${e.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 2:return`NavigationCancel(id: ${e.id}, url: '${e.url}')`;case 16:return`NavigationSkipped(id: ${e.id}, url: '${e.url}')`;case 1:return`NavigationEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${e.id}, url: '${e.url}', error: ${e.error})`;case 0:return`NavigationStart(id: ${e.id}, url: '${e.url}')`;case 6:return`ResolveEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 5:return`ResolveStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 10:return`RouteConfigLoadEnd(path: ${e.route.path})`;case 9:return`RouteConfigLoadStart(path: ${e.route.path})`;case 4:return`RoutesRecognized(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 15:return`Scroll(anchor: '${e.anchor}', position: '${e.position?`${e.position[0]}, ${e.position[1]}`:null}')`}}(n)),console.log(n),console.groupEnd?.()})}}]:[],Ym(1,e)}const AW=new ui(wy?"router preloader":"");function E_e(e){return Ym(0,[{provide:AW,useExisting:x_e},{provide:CW,useExisting:e}])}const Pw=!1,TW=new ui(Pw?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),O_e=[km,{provide:pw,useClass:MR},Oo,_w,{provide:jc,useFactory:function SW(e){return e.routerState.root},deps:[Oo]},WR,Pw?{provide:YR,useValue:!0}:[]];function A_e(){return new Y9("Router",Oo)}let DW=(()=>{class e{constructor(n){}static forRoot(n,i){return{ngModule:e,providers:[O_e,Pw&&i?.enableTracing?S_e().\u0275providers:[],{provide:by,multi:!0,useValue:n},{provide:TW,useFactory:R_e,deps:[[Oo,new y0,new D1]]},{provide:n2,useValue:i||{}},i?.useHash?{provide:Rm,useClass:wpe}:{provide:Rm,useClass:v7},{provide:XR,useFactory:()=>{const e=Ai(Ffe),t=Ai(_s),n=Ai(n2),i=Ai(t2),r=Ai(pw);return n.scrollOffset&&e.setOffset(n.scrollOffset),new PW(r,i,e,t,n)}},i?.preloadingStrategy?E_e(i.preloadingStrategy).\u0275providers:[],{provide:Y9,multi:!0,useFactory:A_e},i?.initialNavigation?k_e(i):[],[{provide:IW,useFactory:EW},{provide:X9,multi:!0,useExisting:IW}]]}}static forChild(n){return{ngModule:e,providers:[{provide:by,multi:!0,useValue:n}]}}}return e.\u0275fac=function(n){return new(n||e)(Jt(TW,8))},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[BR]}),e})();function R_e(e){if(Pw&&e)throw new pe(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function k_e(e){return["disabled"===e.initialNavigation?Ym(3,[{provide:NP,multi:!0,useFactory:()=>{const t=Ai(Oo);return()=>{t.setUpLocationChangeListener()}}},{provide:$R,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Ym(2,[{provide:$R,useValue:0},{provide:NP,multi:!0,deps:[Rl],useFactory:t=>{const n=t.get(bpe,Promise.resolve());return()=>n.then(()=>new Promise(i=>{const r=t.get(Oo),s=t.get(OW);(function w_e(e,t){e.events.pipe((0,xl.h)(n=>n instanceof Xm||n instanceof GS||n instanceof TR||n instanceof WS),(0,Zi.U)(n=>n instanceof Xm||n instanceof WS?Ed.COMPLETE:n instanceof GS&&(0===n.code||1===n.code)?Ed.REDIRECTING:Ed.FAILED),(0,xl.h)(n=>n!==Ed.REDIRECTING),(0,Ml.q)(1)).subscribe(()=>{t()})})(r,()=>{i(!0)}),t.get(t2).afterPreactivation=()=>(i(!0),s.closed?(0,Ci.of)(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const IW=new ui(Pw?"Router Initializer":""),L_e=function(e,t){return{isMouseDragable:e,isTouchDragable:t}};function F_e(e,t){if(1&e&&(C(0,"div",4),ue(1,"owl-stage",5),E()),2&e){const n=_t();ce(1),ot("owlDraggable",A0(3,L_e,null==n.owlDOMData?null:n.owlDOMData.isMouseDragable,null==n.owlDOMData?null:n.owlDOMData.isTouchDragable))("stageData",n.stageData)("slidesData",n.slidesData)}}const B_e=function(e,t){return{active:e,"owl-dot-text":t}};function z_e(e,t){if(1&e){const n=Xr();C(0,"div",11),zt("click",function(){const s=Zn(n).$implicit;return ti(_t(2).moveByDot(s.id))}),ue(1,"span",12),E()}if(2&e){const n=t.$implicit;ot("ngClass",A0(2,B_e,n.active,n.showInnerContent)),ce(1),ot("innerHTML",n.innerContent,yd)}}const r2=function(e){return{disabled:e}};function U_e(e,t){if(1&e){const n=Xr();$o(0),C(1,"div",6)(2,"div",7),zt("click",function(){return Zn(n),ti(_t().prev())}),E(),C(3,"div",8),zt("click",function(){return Zn(n),ti(_t().next())}),E()(),C(4,"div",9),mt(5,z_e,2,5,"div",10),E(),Ko()}if(2&e){const n=_t();ce(1),ot("ngClass",nl(7,r2,null==n.navData?null:n.navData.disabled)),ce(1),ot("ngClass",nl(9,r2,null==n.navData||null==n.navData.prev?null:n.navData.prev.disabled))("innerHTML",null==n.navData||null==n.navData.prev?null:n.navData.prev.htmlText,yd),ce(1),ot("ngClass",nl(11,r2,null==n.navData||null==n.navData.next?null:n.navData.next.disabled))("innerHTML",null==n.navData||null==n.navData.next?null:n.navData.next.htmlText,yd),ce(1),ot("ngClass",nl(13,r2,null==n.dotsData?null:n.dotsData.disabled)),ce(1),ot("ngForOf",null==n.dotsData?null:n.dotsData.dots)}}const V_e=function(e,t,n,i,r){return{"owl-rtl":e,"owl-loaded":t,"owl-responsive":n,"owl-drag":i,"owl-grab":r}};function j_e(e,t){}function H_e(e,t){1&e&&mt(0,j_e,0,0,"ng-template",4),2&e&&ot("ngTemplateOutlet",_t().$implicit.tplRef)}const G_e=function(e,t,n,i){return{width:e,"margin-left":t,"margin-right":n,left:i}};function W_e(e,t){if(1&e){const n=Xr();$o(0),C(1,"div",2),zt("animationend",function(){const s=Zn(n).$implicit;return ti(_t().clear(s.id))}),mt(2,H_e,1,1,null,3),E(),Ko()}if(2&e){const n=t.$implicit;ce(1),ot("ngClass",n.classes)("ngStyle",i9(4,G_e,n.width+"px",n.marginL?n.marginL+"px":"",n.marginR?n.marginR+"px":"",n.left))("@autoHeight",n.heightState),ce(1),ot("ngIf",n.load)}}const q_e=function(e,t,n,i,r){return{width:e,transform:t,transition:n,"padding-left":i,"padding-right":r}};let RW=(()=>{let e=class{constructor(n){this.eventManager=n,this.resizeSubject=new M.xQ,this.eventManager.addGlobalEventListener("window","resize",this.onResize.bind(this)),this.eventManager.addGlobalEventListener("window","onload",this.onLoaded.bind(this))}get onResize$(){return this.resizeSubject.asObservable()}onResize(n){this.resizeSubject.next(n.target)}onLoaded(n){this.windowWidth=n.target}};return e.\u0275fac=function(n){return new(n||e)(Jt($x))},e.\u0275prov=Gt({token:e,factory:function(t){return e.\u0275fac(t)}}),e})();class X_e{constructor(){this.items=3,this.skip_validateItems=!1,this.loop=!1,this.center=!1,this.rewind=!1,this.mouseDrag=!0,this.touchDrag=!0,this.pullDrag=!0,this.freeDrag=!1,this.margin=0,this.stagePadding=0,this.merge=!1,this.mergeFit=!0,this.autoWidth=!1,this.startPosition=0,this.rtl=!1,this.smartSpeed=250,this.fluidSpeed=!1,this.dragEndSpeed=!1,this.responsive={},this.responsiveRefreshRate=200,this.nav=!1,this.navText=["prev","next"],this.navSpeed=!1,this.slideBy=1,this.dots=!0,this.dotsEach=!1,this.dotsData=!1,this.dotsSpeed=!1,this.autoplay=!1,this.autoplayTimeout=5e3,this.autoplayHoverPause=!1,this.autoplaySpeed=!1,this.lazyLoad=!1,this.lazyLoadEager=0,this.slideTransition="",this.animateOut=!1,this.animateIn=!1,this.autoHeight=!1,this.URLhashListener=!1}}class Y_e{constructor(){this.items="number",this.skip_validateItems="boolean",this.loop="boolean",this.center="boolean",this.rewind="boolean",this.mouseDrag="boolean",this.touchDrag="boolean",this.pullDrag="boolean",this.freeDrag="boolean",this.margin="number",this.stagePadding="number",this.merge="boolean",this.mergeFit="boolean",this.autoWidth="boolean",this.startPosition="number|string",this.rtl="boolean",this.smartSpeed="number",this.fluidSpeed="boolean",this.dragEndSpeed="number|boolean",this.responsive={},this.responsiveRefreshRate="number",this.nav="boolean",this.navText="string[]",this.navSpeed="number|boolean",this.slideBy="number|string",this.dots="boolean",this.dotsEach="number|boolean",this.dotsData="boolean",this.dotsSpeed="number|boolean",this.autoplay="boolean",this.autoplayTimeout="number",this.autoplayHoverPause="boolean",this.autoplaySpeed="number|boolean",this.lazyLoad="boolean",this.lazyLoadEager="number",this.slideTransition="string",this.animateOut="string|boolean",this.animateIn="string|boolean",this.autoHeight="boolean",this.URLhashListener="boolean"}}let KR=(()=>{let e=class{constructor(n){this.errorHandler=n}log(n,...i){}error(n){this.errorHandler.handleError(n)}warn(n,...i){console.warn(n,...i)}};return e.\u0275fac=function(n){return new(n||e)(Jt(w0))},e.\u0275prov=Gt({token:e,factory:function(t){return e.\u0275fac(t)}}),e})();var s2=(()=>{return(e=s2||(s2={})).Event="event",e.State="state",s2;var e})(),My=(()=>{return(e=My||(My={})).Default="default",e.Inner="inner",e.Outer="outer",My;var e})();let hf=(()=>{let e=class{constructor(n){this.logger=n,this._viewSettingsShipper$=new M.xQ,this._initializedCarousel$=new M.xQ,this._changeSettingsCarousel$=new M.xQ,this._changedSettingsCarousel$=new M.xQ,this._translateCarousel$=new M.xQ,this._translatedCarousel$=new M.xQ,this._resizeCarousel$=new M.xQ,this._resizedCarousel$=new M.xQ,this._refreshCarousel$=new M.xQ,this._refreshedCarousel$=new M.xQ,this._dragCarousel$=new M.xQ,this._draggedCarousel$=new M.xQ,this.settings={items:0},this.owlDOMData={rtl:!1,isResponsive:!1,isRefreshed:!1,isLoaded:!1,isLoading:!1,isMouseDragable:!1,isGrab:!1,isTouchDragable:!1},this.stageData={transform:"translate3d(0px,0px,0px)",transition:"0s",width:0,paddingL:0,paddingR:0},this._items=[],this._widths=[],this._supress={},this._plugins={},this._current=null,this._clones=[],this._mergers=[],this._speed=null,this._coordinates=[],this._breakpoint=null,this.clonedIdPrefix="cloned-",this._options={},this._invalidated={},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},this._pipe=[{filter:["width","items","settings"],run:i=>{i.current=this._items&&this._items[this.relative(this._current)].id}},{filter:["width","items","settings"],run:i=>{const r=this.settings.margin||"",o=this.settings.rtl,a={"margin-left":o?r:"","margin-right":o?"":r};!this.settings.autoWidth||this.slidesData.forEach(l=>{l.marginL=a["margin-left"],l.marginR=a["margin-right"]}),i.css=a}},{filter:["width","items","settings"],run:i=>{const r=+(this.width()/this.settings.items).toFixed(3)-this.settings.margin,s=!this.settings.autoWidth,o=[];let a=null,l=this._items.length;for(i.items={merge:!1,width:r};l--;)a=this._mergers[l],a=this.settings.mergeFit&&Math.min(a,this.settings.items)||a,i.items.merge=a>1||i.items.merge,o[l]=s?r*a:this._items[l].width?this._items[l].width:r;this._widths=o,this.slidesData.forEach((c,d)=>{c.width=this._widths[d],c.marginR=i.css["margin-right"],c.marginL=i.css["margin-left"]})}},{filter:["items","settings"],run:()=>{const i=[],r=this._items,s=this.settings,o=Math.max(2*s.items,4),a=2*Math.ceil(r.length/2);let l=[],c=[],d=s.loop&&r.length?s.rewind?o:Math.max(o,a):0;for(d/=2;d--;)i.push(this.normalize(i.length/2,!0)),l.push(Object.assign({},this.slidesData[i[i.length-1]])),i.push(this.normalize(r.length-1-(i.length-1)/2,!0)),c.unshift(Object.assign({},this.slidesData[i[i.length-1]]));this._clones=i,l=l.map(h=>(h.id=`${this.clonedIdPrefix}${h.id}`,h.isActive=!1,h.isCloned=!0,h)),c=c.map(h=>(h.id=`${this.clonedIdPrefix}${h.id}`,h.isActive=!1,h.isCloned=!0,h)),this.slidesData=c.concat(this.slidesData).concat(l)}},{filter:["width","items","settings"],run:()=>{const i=this.settings.rtl?1:-1,r=this._clones.length+this._items.length,s=[];let o=-1,a=0,l=0;for(;++o<r;)a=s[o-1]||0,l=this._widths[this.relative(o)]+this.settings.margin,s.push(a+l*i);this._coordinates=s}},{filter:["width","items","settings"],run:()=>{const i=this.settings.stagePadding,r=this._coordinates,s={width:Math.ceil(Math.abs(r[r.length-1]))+2*i,"padding-left":i||"","padding-right":i||""};this.stageData.width=s.width,this.stageData.paddingL=s["padding-left"],this.stageData.paddingR=s["padding-right"]}},{filter:["width","items","settings"],run:i=>{let r=i.current?this.slidesData.findIndex(s=>s.id===i.current):0;r=Math.max(this.minimum(),Math.min(this.maximum(),r)),this.reset(r)}},{filter:["position"],run:()=>{this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:()=>{const i=this.settings.rtl?1:-1,r=2*this.settings.stagePadding,s=[];let o,a,l,c,d,h;if(o=this.coordinates(this.current()),"number"==typeof o?o+=r:o=0,a=o+this.width()*i,-1===i&&this.settings.center){const u=this._coordinates.filter(p=>this.settings.items%2==1?p>=o:p>o);o=u.length?u[u.length-1]:o}for(d=0,h=this._coordinates.length;d<h;d++)l=Math.ceil(this._coordinates[d-1]||0),c=Math.ceil(Math.abs(this._coordinates[d])+r*i),(this._op(l,"<=",o)&&this._op(l,">",a)||this._op(c,"<",o)&&this._op(c,">",a))&&s.push(d);this.slidesData.forEach(u=>(u.isActive=!1,u)),s.forEach(u=>{this.slidesData[u].isActive=!0}),this.settings.center&&(this.slidesData.forEach(u=>(u.isCentered=!1,u)),this.slidesData[this.current()].isCentered=!0)}}]}get invalidated(){return this._invalidated}get states(){return this._states}getViewCurSettings(){return this._viewSettingsShipper$.asObservable()}getInitializedState(){return this._initializedCarousel$.asObservable()}getChangeState(){return this._changeSettingsCarousel$.asObservable()}getChangedState(){return this._changedSettingsCarousel$.asObservable()}getTranslateState(){return this._translateCarousel$.asObservable()}getTranslatedState(){return this._translatedCarousel$.asObservable()}getResizeState(){return this._resizeCarousel$.asObservable()}getResizedState(){return this._resizedCarousel$.asObservable()}getRefreshState(){return this._refreshCarousel$.asObservable()}getRefreshedState(){return this._refreshedCarousel$.asObservable()}getDragState(){return this._dragCarousel$.asObservable()}getDraggedState(){return this._draggedCarousel$.asObservable()}setOptions(n){const i=new X_e,r=this._validateOptions(n,i);this._options=Object.assign({},i,r)}_validateOptions(n,i){const r=Object.assign({},n),s=new Y_e,o=(a,l)=>(this.logger.log(`options.${l} must be type of ${a}; ${l}=${n[l]} skipped to defaults: ${l}=${i[l]}`),i[l]);for(const a in r)if(r.hasOwnProperty(a))if("number"===s[a])this._isNumeric(r[a])?(r[a]=+r[a],r[a]="items"===a?this._validateItems(r[a],r.skip_validateItems):r[a]):r[a]=o(s[a],a);else if("boolean"===s[a]&&"boolean"!=typeof r[a])r[a]=o(s[a],a);else if("number|boolean"!==s[a]||this._isNumberOrBoolean(r[a]))if("number|string"!==s[a]||this._isNumberOrString(r[a]))if("string|boolean"!==s[a]||this._isStringOrBoolean(r[a])){if("string[]"===s[a])if(Array.isArray(r[a])){let l=!1;r[a].forEach(c=>{l="string"==typeof c}),l||(r[a]=o(s[a],a))}else r[a]=o(s[a],a)}else r[a]=o(s[a],a);else r[a]=o(s[a],a);else r[a]=o(s[a],a);return r}_validateItems(n,i){let r=n;return n>this._items.length?i?this.logger.log("The option 'items' in your options is bigger than the number of slides. The navigation got disabled"):(r=this._items.length,this.logger.log("The option 'items' in your options is bigger than the number of slides. This option is updated to the current number of slides and the navigation got disabled")):n===this._items.length&&(this.settings.dots||this.settings.nav)&&this.logger.log("Option 'items' in your options is equal to the number of slides. So the navigation got disabled"),r}setCarouselWidth(n){this._width=n}setup(n,i,r){this.setCarouselWidth(n),this.setItems(i),this._defineSlidesData(),this.setOptions(r),this.settings=Object.assign({},this._options),this.setOptionsForViewport(),this._trigger("change",{property:{name:"settings",value:this.settings}}),this.invalidate("settings"),this._trigger("changed",{property:{name:"settings",value:this.settings}})}setOptionsForViewport(){const n=this._width,i=this._options.responsive;let r=-1;if(!Object.keys(i).length)return;if(!n)return void(this.settings.items=1);for(const o in i)i.hasOwnProperty(o)&&+o<=n&&+o>r&&(r=Number(o));this.settings=Object.assign({},this._options,i[r],{items:i[r]&&i[r].items?this._validateItems(i[r].items,this._options.skip_validateItems):this._options.items}),delete this.settings.responsive,this.owlDOMData.isResponsive=!0,this.owlDOMData.isMouseDragable=this.settings.mouseDrag,this.owlDOMData.isTouchDragable=this.settings.touchDrag;const s=[];this._items.forEach(o=>{s.push(this.settings.merge?o.dataMerge:1)}),this._mergers=s,this._breakpoint=r,this.invalidate("settings")}initialize(n){this.enter("initializing"),this.owlDOMData.rtl=this.settings.rtl,this._mergers.length&&(this._mergers=[]),n.forEach(i=>{this._mergers.push(this.settings.merge?i.dataMerge:1)}),this._clones=[],this.reset(this._isNumeric(this.settings.startPosition)?+this.settings.startPosition:0),this.invalidate("items"),this.refresh(),this.owlDOMData.isLoaded=!0,this.owlDOMData.isMouseDragable=this.settings.mouseDrag,this.owlDOMData.isTouchDragable=this.settings.touchDrag,this.sendChanges(),this.leave("initializing"),this._trigger("initialized")}sendChanges(){this._viewSettingsShipper$.next({owlDOMData:this.owlDOMData,stageData:this.stageData,slidesData:this.slidesData,navData:this.navData,dotsData:this.dotsData})}_optionsLogic(){this.settings.autoWidth&&(this.settings.stagePadding=0,this.settings.merge=!1)}update(){let n=0;const i=this._pipe.length,r=o=>this._invalidated[o],s={};for(;n<i;){const o=this._pipe[n].filter.filter(r);(this._invalidated.all||o.length>0)&&this._pipe[n].run(s),n++}this.slidesData.forEach(o=>o.classes=this.setCurSlideClasses(o)),this.sendChanges(),this._invalidated={},this.is("valid")||this.enter("valid")}width(n){switch(n=n||My.Default){case My.Inner:case My.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}}refresh(){this.enter("refreshing"),this._trigger("refresh"),this._defineSlidesData(),this.setOptionsForViewport(),this._optionsLogic(),this.update(),this.leave("refreshing"),this._trigger("refreshed")}onResize(n){if(!this._items.length)return!1;this.setCarouselWidth(n),this.enter("resizing"),this._trigger("resize"),this.invalidate("width"),this.refresh(),this.leave("resizing"),this._trigger("resized")}prepareDragging(n){let r,i=null;return r=this.stageData.transform.replace(/.*\(|\)| |[^,-\d]\w|\)/g,"").split(","),i={x:+r[0],y:+r[1]},this.is("animating")&&this.invalidate("position"),"mousedown"===n.type&&(this.owlDOMData.isGrab=!0),this.speed(0),i}enterDragging(){this.enter("dragging"),this._trigger("drag")}defineNewCoordsDrag(n,i){let r=null,s=null,o=null;const a=this.difference(i.pointer,this.pointer(n)),l=this.difference(i.stage.start,a);return!!this.is("dragging")&&(this.settings.loop?(r=this.coordinates(this.minimum()),s=+this.coordinates(this.maximum()+1)-r,l.x=((l.x-r)%s+s)%s+r):(r=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),s=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),o=this.settings.pullDrag?-1*a.x/5:0,l.x=Math.max(Math.min(l.x,r+o),s+o)),l)}finishDragging(n,i,r){const o=this.difference(i.pointer,this.pointer(n)),a=i.stage.current,l=["right","left"][+(this.settings.rtl?o.x<+this.settings.rtl:o.x>+this.settings.rtl)];let c,d,h;(0!==o.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(+this.settings.dragEndSpeed||this.settings.smartSpeed),c=this.closest(a.x,0!==o.x?l:i.direction),d=this.current(),h=this.current(-1===c?void 0:c),d!==h&&(this.invalidate("position"),this.update()),i.direction=l,(Math.abs(o.x)>3||(new Date).getTime()-i.time>300)&&r()),this.is("dragging")&&(this.leave("dragging"),this._trigger("dragged"))}closest(n,i){const s=this.width();let o=this.coordinates(),a=-1;this.settings.center&&(o=o.map(l=>(0===l&&(l+=1e-6),l)));for(let l=0;l<o.length&&("left"===i&&n>o[l]-30&&n<o[l]+30?a=l:"right"===i&&n>o[l]-s-30&&n<o[l]-s+30?a=l+1:this._op(n,"<",o[l])&&this._op(n,">",o[l+1]||o[l]-s)?a="left"===i?l+1:l:null===i&&n>o[l]-30&&n<o[l]+30&&(a=l),-1===a);l++);return this.settings.loop||(this._op(n,">",o[this.minimum()])?a=n=this.minimum():this._op(n,"<",o[this.maximum()])&&(a=n=this.maximum())),a}animate(n){const i=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),i&&(this.enter("animating"),this._trigger("translate")),this.stageData.transform="translate3d("+n+"px,0px,0px)",this.stageData.transition=this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}is(n){return this._states.current[n]&&this._states.current[n]>0}current(n){return void 0===n?this._current:0!==this._items.length?(n=this.normalize(n),this._current!==n&&(this._trigger("change",{property:{name:"position",value:n}}),this._current=n,this.invalidate("position"),this._trigger("changed",{property:{name:"position",value:this._current}})),this._current):void 0}invalidate(n){return"string"==typeof n&&(this._invalidated[n]=!0,this.is("valid")&&this.leave("valid")),Object.keys(this._invalidated)}reset(n){void 0!==(n=this.normalize(n))&&(this._speed=0,this._current=n,this._suppress(["translate","translated"]),this.animate(this.coordinates(n)),this._release(["translate","translated"]))}normalize(n,i){const r=this._items.length,s=i?0:this._clones.length;return!this._isNumeric(n)||r<1?n=void 0:(n<0||n>=r+s)&&(n=((n-s/2)%r+r)%r+s/2),n}relative(n){return this.normalize(n-=this._clones.length/2,!0)}maximum(n=!1){const i=this.settings;let s,o,a,r=this._coordinates.length;if(i.loop)r=this._clones.length/2+this._items.length-1;else if(i.autoWidth||i.merge){for(s=this._items.length,o=this.slidesData[--s].width,a=this._width;s--&&(o+=+this.slidesData[s].width+this.settings.margin,!(o>a)););r=s+1}else r=i.center?this._items.length-1:this._items.length-i.items;return n&&(r-=this._clones.length/2),Math.max(r,0)}minimum(n=!1){return n?0:this._clones.length/2}items(n){return void 0===n?this._items.slice():(n=this.normalize(n,!0),[this._items[n]])}mergers(n){return void 0===n?this._mergers.slice():(n=this.normalize(n,!0),this._mergers[n])}clones(n){const i=this._clones.length/2,r=i+this._items.length,s=o=>o%2==0?r+o/2:i-(o+1)/2;return void 0===n?this._clones.map((o,a)=>s(a)):this._clones.map((o,a)=>o===n?s(a):null).filter(o=>o)}speed(n){return void 0!==n&&(this._speed=n),this._speed}coordinates(n){let s,o,i=1,r=n-1;return void 0===n?(o=this._coordinates.map((a,l)=>this.coordinates(l)),o):(this.settings.center?(this.settings.rtl&&(i=-1,r=n+1),s=this._coordinates[n],s+=(this.width()-s+(this._coordinates[r]||0))/2*i):s=this._coordinates[r]||0,s=Math.ceil(s),s)}_duration(n,i,r){return 0===r?0:Math.min(Math.max(Math.abs(i-n),1),6)*Math.abs(+r||this.settings.smartSpeed)}to(n,i){let r=this.current(),s=null,o=n-this.relative(r),a=this.maximum(),l=0;const c=+(o>0)-+(o<0),d=this._items.length,h=this.minimum();this.settings.loop?(!this.settings.rewind&&Math.abs(o)>d/2&&(o+=-1*c*d),s=(((n=r+o)-h)%d+d)%d+h,s!==n&&s-o<=a&&s-o>0&&(r=s-o,n=s,l=30,this.reset(r),this.sendChanges())):this.settings.rewind?(a+=1,n=(n%a+a)%a):n=Math.max(h,Math.min(a,n)),setTimeout(()=>{this.speed(this._duration(r,n,i)),this.current(n),this.update()},l)}next(n){n=n||!1,this.to(this.relative(this.current())+1,n)}prev(n){n=n||!1,this.to(this.relative(this.current())-1,n)}onTransitionEnd(n){if(void 0!==n)return!1;this.leave("animating"),this._trigger("translated")}_viewport(){let n;return this._width?n=this._width:this.logger.log("Can not detect viewport width."),n}setItems(n){this._items=n}_defineSlidesData(){let n;this.slidesData&&this.slidesData.length&&(n=new Map,this.slidesData.forEach(i=>{i.load&&n.set(i.id,i.load)})),this.slidesData=this._items.map(i=>({id:`${i.id}`,isActive:!1,tplRef:i.tplRef,dataMerge:i.dataMerge,width:0,isCloned:!1,load:!!n&&n.get(i.id),hashFragment:i.dataHash}))}setCurSlideClasses(n){const i={active:n.isActive,center:n.isCentered,cloned:n.isCloned,animated:n.isAnimated,"owl-animated-in":n.isDefAnimatedIn,"owl-animated-out":n.isDefAnimatedOut};return this.settings.animateIn&&(i[this.settings.animateIn]=n.isCustomAnimatedIn),this.settings.animateOut&&(i[this.settings.animateOut]=n.isCustomAnimatedOut),i}_op(n,i,r){const s=this.settings.rtl;switch(i){case"<":return s?n>r:n<r;case">":return s?n<r:n>r;case">=":return s?n<=r:n>=r;case"<=":return s?n>=r:n<=r}}_trigger(n,i,r,s,o){switch(n){case"initialized":this._initializedCarousel$.next(n);break;case"change":this._changeSettingsCarousel$.next(i);break;case"changed":this._changedSettingsCarousel$.next(i);break;case"drag":this._dragCarousel$.next(n);break;case"dragged":this._draggedCarousel$.next(n);break;case"resize":this._resizeCarousel$.next(n);break;case"resized":this._resizedCarousel$.next(n);break;case"refresh":this._refreshCarousel$.next(n);break;case"refreshed":this._refreshedCarousel$.next(n);break;case"translate":this._translateCarousel$.next(n);break;case"translated":this._translatedCarousel$.next(n)}}enter(n){[n].concat(this._states.tags[n]||[]).forEach(i=>{void 0===this._states.current[i]&&(this._states.current[i]=0),this._states.current[i]++})}leave(n){[n].concat(this._states.tags[n]||[]).forEach(i=>{(0===this._states.current[i]||this._states.current[i])&&this._states.current[i]--})}register(n){n.type===s2.State&&(this._states.tags[n.name]=this._states.tags[n.name]?this._states.tags[n.name].concat(n.tags):n.tags,this._states.tags[n.name]=this._states.tags[n.name].filter((i,r)=>this._states.tags[n.name].indexOf(i)===r))}_suppress(n){n.forEach(i=>{this._supress[i]=!0})}_release(n){n.forEach(i=>{delete this._supress[i]})}pointer(n){const i={x:null,y:null};return(n=(n=n.originalEvent||n||window.event).touches&&n.touches.length?n.touches[0]:n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n).pageX?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i}_isNumeric(n){return!isNaN(parseFloat(n))}_isNumberOrBoolean(n){return this._isNumeric(n)||"boolean"==typeof n}_isNumberOrString(n){return this._isNumeric(n)||"string"==typeof n}_isStringOrBoolean(n){return"string"==typeof n||"boolean"==typeof n}difference(n,i){return{x:n.x-i.x,y:n.y-i.y}}};return e.\u0275fac=function(n){return new(n||e)(Jt(KR))},e.\u0275prov=Gt({token:e,factory:function(t){return e.\u0275fac(t)}}),e})(),kW=(()=>{let e=class{constructor(n){this.carouselService=n,this._initialized=!1,this._pages=[],this._navData={disabled:!1,prev:{disabled:!1,htmlText:""},next:{disabled:!1,htmlText:""}},this._dotsData={disabled:!1,dots:[]},this.spyDataStreams()}ngOnDestroy(){this.navSubscription.unsubscribe()}spyDataStreams(){const n=this.carouselService.getInitializedState().pipe((0,xr.b)(o=>{this.initialize(),this._updateNavPages(),this.draw(),this.update(),this.carouselService.sendChanges()})),i=this.carouselService.getChangedState().pipe((0,xl.h)(o=>"position"===o.property.name),(0,xr.b)(o=>{this.update()})),r=this.carouselService.getRefreshedState().pipe((0,xr.b)(()=>{this._updateNavPages(),this.draw(),this.update(),this.carouselService.sendChanges()})),s=(0,Y.T)(n,i,r);this.navSubscription=s.subscribe(()=>{})}initialize(){this._navData.disabled=!0,this._navData.prev.htmlText=this.carouselService.settings.navText[0],this._navData.next.htmlText=this.carouselService.settings.navText[1],this._dotsData.disabled=!0,this.carouselService.navData=this._navData,this.carouselService.dotsData=this._dotsData}_updateNavPages(){let n,i,r;const s=this.carouselService.clones().length/2,o=s+this.carouselService.items().length,a=this.carouselService.maximum(!0),l=[],c=this.carouselService.settings;let d=c.center||c.autoWidth||c.dotsData?1:c.dotsEach||c.items;if(d=+d,"page"!==c.slideBy&&(c.slideBy=Math.min(+c.slideBy,c.items)),c.dots||"page"===c.slideBy)for(n=s,i=0,r=0;n<o;n++){if(i>=d||0===i){if(l.push({start:Math.min(a,n-s),end:n-s+d-1}),Math.min(a,n-s)===a)break;i=0,++r}i+=this.carouselService.mergers(this.carouselService.relative(n))}this._pages=l}draw(){let n;const i=this.carouselService.settings,r=this.carouselService.items(),s=r.length<=i.items;if(this._navData.disabled=!i.nav||s,this._dotsData.disabled=!i.dots||s,i.dots)if(n=this._pages.length-this._dotsData.dots.length,i.dotsData&&0!==n)this._dotsData.dots=[],r.forEach(o=>{this._dotsData.dots.push({active:!1,id:`dot-${o.id}`,innerContent:o.dotContent,showInnerContent:!0})});else if(n>0){const o=this._dotsData.dots.length>0?this._dotsData.dots.length:0;for(let a=0;a<n;a++)this._dotsData.dots.push({active:!1,id:`dot-${a+o}`,innerContent:"",showInnerContent:!1})}else n<0&&this._dotsData.dots.splice(n,Math.abs(n));this.carouselService.navData=this._navData,this.carouselService.dotsData=this._dotsData}update(){this._updateNavButtons(),this._updateDots()}_updateNavButtons(){const n=this.carouselService.settings,i=n.loop||n.rewind,r=this.carouselService.relative(this.carouselService.current());n.nav&&(this._navData.prev.disabled=!i&&r<=this.carouselService.minimum(!0),this._navData.next.disabled=!i&&r>=this.carouselService.maximum(!0)),this.carouselService.navData=this._navData}_updateDots(){let n;this.carouselService.settings.dots&&(this._dotsData.dots.forEach(i=>{!0===i.active&&(i.active=!1)}),n=this._current(),this._dotsData.dots.length&&(this._dotsData.dots[n].active=!0),this.carouselService.dotsData=this._dotsData)}_current(){const n=this.carouselService.relative(this.carouselService.current());let i;const r=this._pages.filter((s,o)=>s.start<=n&&s.end>=n).pop();return i=this._pages.findIndex(s=>s.start===r.start&&s.end===r.end),i}_getPosition(n){let i,r;const s=this.carouselService.settings;return"page"===s.slideBy?(i=this._current(),r=this._pages.length,n?++i:--i,i=this._pages[(i%r+r)%r].start):(i=this.carouselService.relative(this.carouselService.current()),r=this.carouselService.items().length,n?i+=+s.slideBy:i-=+s.slideBy),i}next(n){this.carouselService.to(this._getPosition(!0),n)}prev(n){this.carouselService.to(this._getPosition(!1),n)}to(n,i,r){let s;!r&&this._pages.length?(s=this._pages.length,this.carouselService.to(this._pages[(n%s+s)%s].start,i)):this.carouselService.to(n,i)}moveByDot(n){const i=this._dotsData.dots.findIndex(r=>n===r.id);this.to(i,this.carouselService.settings.dotsSpeed)}toSlideById(n){const i=this.carouselService.slidesData.findIndex(r=>r.id===n&&!1===r.isCloned);-1===i||i===this.carouselService.current()||this.carouselService.to(this.carouselService.relative(i),!1)}};return e.\u0275fac=function(n){return new(n||e)(Jt(hf))},e.\u0275prov=Gt({token:e,factory:function(t){return e.\u0275fac(t)}}),e})();const ZR=new ui("WindowToken");class QR{get nativeWindow(){throw new Error("Not implemented.")}}let $_e=(()=>{class e extends QR{constructor(){super()}get nativeWindow(){return window}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();const Z_e=[{provide:QR,useClass:$_e},{provide:ZR,useFactory:function K_e(e,t){return mI(t)?e.nativeWindow:{setTimeout:(i,r)=>{},clearTimeout:i=>{}}},deps:[QR,uh]}],Sw=new ui("DocumentToken");class JR{get nativeDocument(){throw new Error("Not implemented.")}}let Q_e=(()=>{class e extends JR{constructor(){super()}get nativeDocument(){return document}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();const ebe=[{provide:JR,useClass:Q_e},{provide:Sw,useFactory:function J_e(e,t){return mI(t)?e.nativeDocument:{hidden:!1,visibilityState:"visible"}},deps:[JR,uh]}];let NW=(()=>{let e=class{constructor(n,i,r){this.carouselService=n,this._timeout=null,this._paused=!1,this.winRef=i,this.docRef=r,this.spyDataStreams()}ngOnDestroy(){this.autoplaySubscription.unsubscribe()}spyDataStreams(){const n=this.carouselService.getInitializedState().pipe((0,xr.b)(()=>{this.carouselService.settings.autoplay&&this.play()})),i=this.carouselService.getChangedState().pipe((0,xr.b)(o=>{this._handleChangeObservable(o)})),r=this.carouselService.getResizedState().pipe((0,xr.b)(()=>{this.carouselService.settings.autoplay?this.play():this.stop()})),s=(0,Y.T)(n,i,r);this.autoplaySubscription=s.subscribe(()=>{})}play(n,i){this._paused&&(this._paused=!1,this._setAutoPlayInterval(1)),!this.carouselService.is("rotating")&&(this.carouselService.enter("rotating"),this._setAutoPlayInterval())}_getNextTimeout(n,i){return this._timeout&&this.winRef.clearTimeout(this._timeout),this._isArtificialAutoplayTimeout=!!n,this.winRef.setTimeout(()=>{this._paused||this.carouselService.is("busy")||this.carouselService.is("interacting")||this.docRef.hidden||this.carouselService.next(i||this.carouselService.settings.autoplaySpeed)},n||this.carouselService.settings.autoplayTimeout)}_setAutoPlayInterval(n){this._timeout=this._getNextTimeout(n)}stop(){this.carouselService.is("rotating")&&(this._paused=!0,this.winRef.clearTimeout(this._timeout),this.carouselService.leave("rotating"))}pause(){this.carouselService.is("rotating")&&(this._paused=!0)}_handleChangeObservable(n){"settings"===n.property.name?this.carouselService.settings.autoplay?this.play():this.stop():"position"===n.property.name&&this.carouselService.settings.autoplay&&this._setAutoPlayInterval()}_playAfterTranslated(){(0,Ci.of)("translated").pipe((0,wl.w)(n=>this.carouselService.getTranslatedState()),(0,eu.P)(),(0,xl.h)(()=>this._isArtificialAutoplayTimeout),(0,xr.b)(()=>this._setAutoPlayInterval())).subscribe(()=>{})}startPausing(){this.carouselService.settings.autoplayHoverPause&&this.carouselService.is("rotating")&&this.pause()}startPlayingMouseLeave(){this.carouselService.settings.autoplayHoverPause&&this.carouselService.is("rotating")&&(this.play(),this._playAfterTranslated())}startPlayingTouchEnd(){this.carouselService.settings.autoplayHoverPause&&this.carouselService.is("rotating")&&(this.play(),this._playAfterTranslated())}};return e.\u0275fac=function(n){return new(n||e)(Jt(hf),Jt(ZR),Jt(Sw))},e.\u0275prov=Gt({token:e,factory:function(t){return e.\u0275fac(t)}}),e=ir([uy(1,T1(ZR)),uy(2,T1(Sw))],e),e})(),LW=(()=>{let e=class{constructor(n){this.carouselService=n,this.spyDataStreams()}ngOnDestroy(){this.lazyLoadSubscription.unsubscribe()}spyDataStreams(){const n=this.carouselService.getInitializedState().pipe((0,xr.b)(()=>{const o=this.carouselService.settings&&!this.carouselService.settings.lazyLoad;this.carouselService.slidesData.forEach(a=>a.load=!!o)})),i=this.carouselService.getChangeState(),r=this.carouselService.getResizedState(),s=(0,Y.T)(n,i,r).pipe((0,xr.b)(o=>this._defineLazyLoadSlides(o)));this.lazyLoadSubscription=s.subscribe(()=>{})}_defineLazyLoadSlides(n){if(this.carouselService.settings&&this.carouselService.settings.lazyLoad&&(n.property&&"position"===n.property.name||"initialized"===n||"resized"===n)){const i=this.carouselService.settings,r=this.carouselService.clones().length;let s=i.center&&Math.ceil(i.items/2)||i.items,o=i.center&&-1*s||0,a=(n.property&&void 0!==n.property.value?n.property.value:this.carouselService.current())+o;for(i.lazyLoadEager>0&&(s+=i.lazyLoadEager,i.loop&&(a-=i.lazyLoadEager,s++));o++<s;)this._load(r/2+this.carouselService.relative(a)),r&&this.carouselService.clones(this.carouselService.relative(a)).forEach(l=>this._load(l)),a++}}_load(n){this.carouselService.slidesData[n].load||(this.carouselService.slidesData[n].load=!0)}};return e.\u0275fac=function(n){return new(n||e)(Jt(hf))},e.\u0275prov=Gt({token:e,factory:function(t){return e.\u0275fac(t)}}),e})(),ek=(()=>{let e=class{constructor(n){this.carouselService=n,this.swapping=!0,this.previous=void 0,this.next=void 0,this.spyDataStreams()}ngOnDestroy(){this.animateSubscription.unsubscribe()}spyDataStreams(){const n=this.carouselService.getChangeState().pipe((0,xr.b)(c=>{"position"===c.property.name&&(this.previous=this.carouselService.current(),this.next=c.property.value)})),i=this.carouselService.getDragState(),r=this.carouselService.getDraggedState(),s=this.carouselService.getTranslatedState(),o=(0,Y.T)(i,r,s).pipe((0,xr.b)(c=>this.swapping="translated"===c)),a=this.carouselService.getTranslateState().pipe((0,xr.b)(c=>{this.swapping&&(this.carouselService._options.animateOut||this.carouselService._options.animateIn)&&this._swap()})),l=(0,Y.T)(n,a,o).pipe();this.animateSubscription=l.subscribe(()=>{})}_swap(){if(1!==this.carouselService.settings.items)return;let n;this.carouselService.speed(0);const i=this.carouselService.slidesData[this.previous],r=this.carouselService.slidesData[this.next],s=this.carouselService.settings.animateIn,o=this.carouselService.settings.animateOut;this.carouselService.current()!==this.previous&&(o&&(n=+this.carouselService.coordinates(this.previous)-+this.carouselService.coordinates(this.next),this.carouselService.slidesData.forEach(a=>{a.id===i.id&&(a.left=`${n}px`,a.isAnimated=!0,a.isDefAnimatedOut=!0,a.isCustomAnimatedOut=!0)})),s&&this.carouselService.slidesData.forEach(a=>{a.id===r.id&&(a.isAnimated=!0,a.isDefAnimatedIn=!0,a.isCustomAnimatedIn=!0)}))}clear(n){this.carouselService.slidesData.forEach(i=>{i.id===n&&(i.left="",i.isAnimated=!1,i.isDefAnimatedOut=!1,i.isCustomAnimatedOut=!1,i.isDefAnimatedIn=!1,i.isCustomAnimatedIn=!1,i.classes=this.carouselService.setCurSlideClasses(i))}),this.carouselService.onTransitionEnd()}};return e.\u0275fac=function(n){return new(n||e)(Jt(hf))},e.\u0275prov=Gt({token:e,factory:function(t){return e.\u0275fac(t)}}),e})(),FW=(()=>{let e=class{constructor(n){this.carouselService=n,this.spyDataStreams()}ngOnDestroy(){this.autoHeightSubscription.unsubscribe()}spyDataStreams(){const n=this.carouselService.getInitializedState().pipe((0,xr.b)(o=>{this.carouselService.settings.autoHeight?this.update():this.carouselService.slidesData.forEach(a=>a.heightState="full")})),i=this.carouselService.getChangedState().pipe((0,xr.b)(o=>{this.carouselService.settings.autoHeight&&"position"===o.property.name&&this.update()})),r=this.carouselService.getRefreshedState().pipe((0,xr.b)(o=>{this.carouselService.settings.autoHeight&&this.update()})),s=(0,Y.T)(n,i,r);this.autoHeightSubscription=s.subscribe(()=>{})}update(){const n=this.carouselService.settings.items;let i=this.carouselService.current(),r=i+n;this.carouselService.settings.center&&(i=n%2==1?i-(n-1)/2:i-n/2,r=n%2==1?i+n:i+n+1),this.carouselService.slidesData.forEach((s,o)=>{s.heightState=o>=i&&o<r?"full":"nulled"})}};return e.\u0275fac=function(n){return new(n||e)(Jt(hf))},e.\u0275prov=Gt({token:e,factory:function(t){return e.\u0275fac(t)}}),e})(),BW=(()=>{let e=class{constructor(n,i,r){this.carouselService=n,this.route=i,this.router=r,this.spyDataStreams(),this.route||(this.route={fragment:(0,Ci.of)("no route").pipe((0,Ml.q)(1))}),this.router||(this.router={navigate:(s,o)=>{}})}ngOnDestroy(){this.hashSubscription.unsubscribe()}spyDataStreams(){const n=this.carouselService.getInitializedState().pipe((0,xr.b)(()=>this.listenToRoute())),i=this.carouselService.getChangedState().pipe((0,xr.b)(s=>{if(this.carouselService.settings.URLhashListener&&"position"===s.property.name){const o=this.carouselService.current(),a=this.carouselService.slidesData[o].hashFragment;if(!a||a===this.currentHashFragment)return;this.router.navigate(["./"],{fragment:a,relativeTo:this.route})}})),r=(0,Y.T)(n,i);this.hashSubscription=r.subscribe(()=>{})}rewind(n){const i=this.carouselService.slidesData.findIndex(r=>r.hashFragment===n&&!1===r.isCloned);-1===i||i===this.carouselService.current()||this.carouselService.to(this.carouselService.relative(i),!1)}listenToRoute(){this.route.fragment.pipe((0,xR.T)("URLHash"===this.carouselService.settings.startPosition?0:2)).subscribe(i=>{this.currentHashFragment=i,this.rewind(i)})}};return e.\u0275fac=function(n){return new(n||e)(Jt(hf),Jt(jc,8),Jt(Oo,8))},e.\u0275prov=Gt({token:e,factory:function(t){return e.\u0275fac(t)}}),e=ir([uy(1,y0()),uy(2,y0())],e),e})(),tbe=0,uf=(()=>{let e=class{constructor(n){this.tplRef=n,this.id="owl-slide-"+tbe++,this._dataMerge=1,this.width=0,this.dotContent="",this.dataHash=""}set dataMerge(n){this._dataMerge=this.isNumeric(n)?n:1}get dataMerge(){return this._dataMerge}isNumeric(n){return!isNaN(parseFloat(n))}};return e.\u0275fac=function(n){return new(n||e)(Ne(So))},e.\u0275dir=xn({type:e,selectors:[["ng-template","carouselSlide",""]],inputs:{id:"id",width:"width",dotContent:"dotContent",dataHash:"dataHash",dataMerge:"dataMerge"}}),ir([Ys()],e.prototype,"id",void 0),ir([Ys()],e.prototype,"dataMerge",null),ir([Ys()],e.prototype,"width",void 0),ir([Ys()],e.prototype,"dotContent",void 0),ir([Ys()],e.prototype,"dataHash",void 0),e})(),W0=(()=>{let e=class{constructor(n,i,r,s,o,a,l,c,d,h,u,p){this.el=n,this.resizeService=i,this.carouselService=r,this.navigationService=s,this.autoplayService=o,this.lazyLoadService=a,this.animateService=l,this.autoHeightService=c,this.hashService=d,this.logger=h,this.changeDetectorRef=u,this.translated=new cr,this.dragging=new cr,this.change=new cr,this.changed=new cr,this.initialized=new cr,this.slidesData=[],this.carouselLoaded=!1,this.docRef=p}onVisibilityChange(n){if(this.carouselService.settings.autoplay)switch(this.docRef.visibilityState){case"visible":this.autoplayService.play();break;case"hidden":this.autoplayService.stop()}}ngOnInit(){this.spyDataStreams(),this.carouselWindowWidth=this.el.nativeElement.querySelector(".owl-carousel").clientWidth}ngAfterContentChecked(){}ngAfterContentInit(){this.slides.toArray().length?(this.carouselService.setup(this.carouselWindowWidth,this.slides.toArray(),this.options),this.carouselService.initialize(this.slides.toArray()),this._winResizeWatcher()):this.logger.log("There are no slides to show. So the carousel won't be rendered"),this._slidesChangesSubscription=this.slides.changes.pipe((0,xr.b)(n=>{n.toArray().length?(this.carouselService.setup(this.carouselWindowWidth,n.toArray(),this.options),this.carouselService.initialize(n.toArray())):(this.carouselLoaded=!1,this.logger.log("There are no slides to show. So the carousel won't be re-rendered"))})).subscribe(()=>{})}ngOnDestroy(){this.resizeSubscription&&this.resizeSubscription.unsubscribe(),this._slidesChangesSubscription&&this._slidesChangesSubscription.unsubscribe(),this._allObservSubscription&&this._allObservSubscription.unsubscribe()}spyDataStreams(){this._viewCurSettings$=this.carouselService.getViewCurSettings().pipe((0,xr.b)(n=>{this.owlDOMData=n.owlDOMData,this.stageData=n.stageData,this.slidesData=n.slidesData,this.carouselLoaded||(this.carouselLoaded=!0),this.navData=n.navData,this.dotsData=n.dotsData,this.changeDetectorRef.markForCheck()})),this._initializedCarousel$=this.carouselService.getInitializedState().pipe((0,xr.b)(()=>{this.gatherTranslatedData(),this.initialized.emit(this.slidesOutputData)})),this._translatedCarousel$=this.carouselService.getTranslatedState().pipe((0,xr.b)(()=>{this.gatherTranslatedData(),this.translated.emit(this.slidesOutputData)})),this._changeCarousel$=this.carouselService.getChangeState().pipe((0,xr.b)(()=>{this.gatherTranslatedData(),this.change.emit(this.slidesOutputData)})),this._changedCarousel$=this.carouselService.getChangeState().pipe((0,wl.w)(n=>{const i=(0,Ci.of)(n).pipe((0,xl.h)(()=>"position"===n.property.name),(0,wl.w)(()=>(0,Nl.D)(this.slidesData)),(0,xR.T)(n.property.value),(0,Ml.q)(this.carouselService.settings.items),(0,Zi.U)(r=>{const s=this.carouselService.clonedIdPrefix,o=r.id.indexOf(s)>=0?r.id.slice(s.length):r.id;return Object.assign({},r,{id:o,isActive:!0})}),(0,d1e.q)(),(0,Zi.U)(r=>({slides:r,startPosition:this.carouselService.relative(n.property.value)})));return(0,Y.T)(i)}),(0,xr.b)(n=>{this.gatherTranslatedData(),this.changed.emit(n.slides.length?n:this.slidesOutputData)})),this._draggingCarousel$=this.carouselService.getDragState().pipe((0,xr.b)(()=>{this.gatherTranslatedData(),this.dragging.emit({dragging:!0,data:this.slidesOutputData})}),(0,wl.w)(()=>this.carouselService.getDraggedState().pipe((0,Zi.U)(()=>!!this.carouselService.is("animating")))),(0,wl.w)(n=>n?this.carouselService.getTranslatedState().pipe((0,eu.P)()):(0,Ci.of)("not animating")),(0,xr.b)(()=>{this.dragging.emit({dragging:!1,data:this.slidesOutputData})})),this._carouselMerge$=(0,Y.T)(this._viewCurSettings$,this._translatedCarousel$,this._draggingCarousel$,this._changeCarousel$,this._changedCarousel$,this._initializedCarousel$),this._allObservSubscription=this._carouselMerge$.subscribe(()=>{})}_winResizeWatcher(){Object.keys(this.carouselService._options.responsive).length&&(this.resizeSubscription=this.resizeService.onResize$.pipe((0,xl.h)(()=>this.carouselWindowWidth!==this.el.nativeElement.querySelector(".owl-carousel").clientWidth),(0,bG.g)(this.carouselService.settings.responsiveRefreshRate)).subscribe(()=>{this.carouselService.onResize(this.el.nativeElement.querySelector(".owl-carousel").clientWidth),this.carouselWindowWidth=this.el.nativeElement.querySelector(".owl-carousel").clientWidth}))}onTransitionEnd(){this.carouselService.onTransitionEnd()}next(){this.carouselLoaded&&this.navigationService.next(this.carouselService.settings.navSpeed)}prev(){this.carouselLoaded&&this.navigationService.prev(this.carouselService.settings.navSpeed)}moveByDot(n){this.carouselLoaded&&this.navigationService.moveByDot(n)}to(n){this.carouselLoaded&&this.navigationService.toSlideById(n)}gatherTranslatedData(){let n;const i=this.carouselService.clonedIdPrefix,r=this.slidesData.filter(s=>!0===s.isActive).map(s=>({id:s.id.indexOf(i)>=0?s.id.slice(i.length):s.id,width:s.width,marginL:s.marginL,marginR:s.marginR,center:s.isCentered}));n=this.carouselService.relative(this.carouselService.current()),this.slidesOutputData={startPosition:n,slides:r}}startPausing(){this.autoplayService.startPausing()}startPlayML(){this.autoplayService.startPlayingMouseLeave()}startPlayTE(){this.autoplayService.startPlayingTouchEnd()}};return e.\u0275fac=function(n){return new(n||e)(Ne(Ts),Ne(RW),Ne(hf),Ne(kW),Ne(NW),Ne(LW),Ne(ek),Ne(FW),Ne(BW),Ne(KR),Ne(Zh),Ne(Sw))},e.\u0275cmp=qi({type:e,selectors:[["owl-carousel-o"]],contentQueries:function(n,i,r){if(1&n&&function Zo(e,t,n,i){const r=Dr();if(r.firstCreatePass){const s=ji();v9(r,new f9(t,n,i),s.index),function mue(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(r,e),2==(2&n)&&(r.staticContentQueries=!0)}g9(r,ln(),n)}(r,uf,4),2&n){let s;Yr(s=$r())&&(i.slides=s)}},hostBindings:function(n,i){1&n&&zt("visibilitychange",function(s){return i.onVisibilityChange(s)},0,M0)},inputs:{options:"options"},outputs:{translated:"translated",dragging:"dragging",change:"change",changed:"changed",initialized:"initialized"},features:[so([kW,NW,hf,LW,ek,FW,BW])],decls:4,vars:9,consts:[[1,"owl-carousel","owl-theme",3,"ngClass","mouseover","mouseleave","touchstart","touchend"],["owlCarousel",""],["class","owl-stage-outer",4,"ngIf"],[4,"ngIf"],[1,"owl-stage-outer"],[3,"owlDraggable","stageData","slidesData"],[1,"owl-nav",3,"ngClass"],[1,"owl-prev",3,"ngClass","innerHTML","click"],[1,"owl-next",3,"ngClass","innerHTML","click"],[1,"owl-dots",3,"ngClass"],["class","owl-dot",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"owl-dot",3,"ngClass","click"],[3,"innerHTML"]],template:function(n,i){1&n&&(C(0,"div",0,1),zt("mouseover",function(){return i.startPausing()})("mouseleave",function(){return i.startPlayML()})("touchstart",function(){return i.startPausing()})("touchend",function(){return i.startPlayTE()}),mt(2,F_e,2,6,"div",2),mt(3,U_e,6,15,"ng-container",3),E()),2&n&&(ot("ngClass",M3(3,V_e,null==i.owlDOMData?null:i.owlDOMData.rtl,null==i.owlDOMData?null:i.owlDOMData.isLoaded,null==i.owlDOMData?null:i.owlDOMData.isResponsive,null==i.owlDOMData?null:i.owlDOMData.isMouseDragable,null==i.owlDOMData?null:i.owlDOMData.isGrab)),ce(2),ot("ngIf",i.carouselLoaded),ce(1),ot("ngIf",i.slides.toArray().length))},dependencies:function(){return[qx,Ba,il,nbe]},styles:[".owl-theme[_ngcontent-%COMP%] { display: block; }"]}),ir([_oe(uf)],e.prototype,"slides",void 0),ir([Vx()],e.prototype,"translated",void 0),ir([Vx()],e.prototype,"dragging",void 0),ir([Vx()],e.prototype,"change",void 0),ir([Vx()],e.prototype,"changed",void 0),ir([Vx()],e.prototype,"initialized",void 0),ir([Ys()],e.prototype,"options",void 0),ir([Dm("document:visibilitychange",["$event"])],e.prototype,"onVisibilityChange",null),e=ir([uy(11,T1(Sw))],e),e})(),nbe=(()=>{let e=class{constructor(n,i,r,s,o){this.zone=n,this.el=i,this.renderer=r,this.carouselService=s,this.animateService=o,this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null,active:!1,moving:!1},this._oneDragMove$=new M.xQ,this.bindOneMouseTouchMove=a=>{this._oneMouseTouchMove(a)},this.bindOnDragMove=a=>{this._onDragMove(a)},this.bindOnDragEnd=a=>{this._onDragEnd(a)},this._oneClickHandler=()=>{this.listenerOneClick=this.renderer.listen(this._drag.target,"click",()=>!1),this.listenerOneClick()}}onMouseDown(n){this.owlDraggable.isMouseDragable&&this._onDragStart(n)}onTouchStart(n){this.owlDraggable.isTouchDragable&&this._onDragStart(n)}onTouchCancel(n){this._onDragEnd(n)}onDragStart(){if(this.owlDraggable.isMouseDragable)return!1}onSelectStart(){if(this.owlDraggable.isMouseDragable)return!1}ngOnInit(){this._oneMoveSubsription=this._oneDragMove$.pipe((0,eu.P)()).subscribe(()=>{this._sendChanges()})}ngOnDestroy(){this._oneMoveSubsription.unsubscribe()}_onDragStart(n){let i=null;3!==n.which&&(i=this._prepareDragging(n),this._drag.time=(new Date).getTime(),this._drag.target=n.target,this._drag.stage.start=i,this._drag.stage.current=i,this._drag.pointer=this._pointer(n),this.listenerMouseUp=this.renderer.listen(document,"mouseup",this.bindOnDragEnd),this.listenerTouchEnd=this.renderer.listen(document,"touchend",this.bindOnDragEnd),this.zone.runOutsideAngular(()=>{this.listenerOneMouseMove=this.renderer.listen(document,"mousemove",this.bindOneMouseTouchMove),this.listenerOneTouchMove=this.renderer.listen(document,"touchmove",this.bindOneMouseTouchMove)}))}_oneMouseTouchMove(n){const i=this._difference(this._drag.pointer,this._pointer(n));this.listenerATag&&this.listenerATag(),!(Math.abs(i.x)<3&&Math.abs(i.y)<3&&this._is("valid"))&&(Math.abs(i.x)<3&&Math.abs(i.x)<Math.abs(i.y)&&this._is("valid")||(this.listenerOneMouseMove(),this.listenerOneTouchMove(),this._drag.moving=!0,this.blockClickAnchorInDragging(n),this.listenerMouseMove=this.renderer.listen(document,"mousemove",this.bindOnDragMove),this.listenerTouchMove=this.renderer.listen(document,"touchmove",this.bindOnDragMove),n.preventDefault(),this._enterDragging(),this._oneDragMove$.next(n)))}blockClickAnchorInDragging(n){let i=n.target;for(;i&&!(i instanceof HTMLAnchorElement);)i=i.parentElement;i instanceof HTMLAnchorElement&&(this.listenerATag=this.renderer.listen(i,"click",()=>!1))}_onDragMove(n){let i;const r=this.carouselService.defineNewCoordsDrag(n,this._drag);!1!==r&&(i=r,n.preventDefault(),this._drag.stage.current=i,this._animate(i.x-this._drag.stage.start.x))}_animate(n){this.renderer.setStyle(this.el.nativeElement.children[0],"transform",`translate3d(${n}px,0px,0px`),this.renderer.setStyle(this.el.nativeElement.children[0],"transition","0s")}_onDragEnd(n){this.carouselService.owlDOMData.isGrab=!1,this.listenerOneMouseMove(),this.listenerOneTouchMove(),this._drag.moving&&(this.renderer.setStyle(this.el.nativeElement.children[0],"transform",""),this.renderer.setStyle(this.el.nativeElement.children[0],"transition",this.carouselService.speed(+this.carouselService.settings.dragEndSpeed||this.carouselService.settings.smartSpeed)/1e3+"s"),this._finishDragging(n),this.listenerMouseMove(),this.listenerTouchMove()),this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null,active:!1,moving:!1},this.listenerMouseUp(),this.listenerTouchEnd()}_prepareDragging(n){return this.carouselService.prepareDragging(n)}_finishDragging(n){this.carouselService.finishDragging(n,this._drag,this._oneClickHandler)}_pointer(n){return this.carouselService.pointer(n)}_difference(n,i){return this.carouselService.difference(n,i)}_is(n){return this.carouselService.is(n)}_enter(n){this.carouselService.enter(n)}_sendChanges(){this.carouselService.sendChanges()}onTransitionEnd(){this.carouselService.onTransitionEnd()}_enterDragging(){this.carouselService.enterDragging()}clear(n){this.animateService.clear(n)}};return e.\u0275fac=function(n){return new(n||e)(Ne(_s),Ne(Ts),Ne(ga),Ne(hf),Ne(ek))},e.\u0275cmp=qi({type:e,selectors:[["owl-stage"]],hostBindings:function(n,i){1&n&&zt("mousedown",function(s){return i.onMouseDown(s)})("touchstart",function(s){return i.onTouchStart(s)})("touchcancel",function(s){return i.onTouchCancel(s)})("dragstart",function(){return i.onDragStart()})("selectstart",function(){return i.onSelectStart()})},inputs:{owlDraggable:"owlDraggable",stageData:"stageData",slidesData:"slidesData"},decls:3,vars:8,consts:[[1,"owl-stage",3,"ngStyle","transitionend"],[4,"ngFor","ngForOf"],[1,"owl-item",3,"ngClass","ngStyle","animationend"],[4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(n,i){1&n&&(C(0,"div")(1,"div",0),zt("transitionend",function(){return i.onTransitionEnd()}),mt(2,W_e,3,9,"ng-container",1),E()()),2&n&&(ce(1),ot("ngStyle",M3(2,q_e,i.stageData.width+"px",i.stageData.transform,i.stageData.transition,i.stageData.paddingL?i.stageData.paddingL+"px":"",i.stageData.paddingR?i.stageData.paddingR+"px":"")),ce(1),ot("ngForOf",i.slidesData))},dependencies:[qx,Ba,il,iy,I0],encapsulation:2,data:{animation:[mj("autoHeight",[R0("nulled",za({height:0})),R0("full",za({height:"*"})),gh("full => nulled",[mh("700ms 350ms")]),gh("nulled => full",[mh(350)])])]}}),ir([Ys()],e.prototype,"owlDraggable",void 0),ir([Ys()],e.prototype,"stageData",void 0),ir([Ys()],e.prototype,"slidesData",void 0),ir([Dm("mousedown",["$event"])],e.prototype,"onMouseDown",null),ir([Dm("touchstart",["$event"])],e.prototype,"onTouchStart",null),ir([Dm("touchcancel",["$event"])],e.prototype,"onTouchCancel",null),ir([Dm("dragstart")],e.prototype,"onDragStart",null),ir([Dm("selectstart")],e.prototype,"onSelectStart",null),e})(),ibe=(()=>{let e=class{};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({providers:[Z_e,RW,ebe,KR],imports:[sc]}),e})();function rbe(e,t){if(1&e){const n=Xr();C(0,"div",9),zt("click",function(){Zn(n);const r=_t().$implicit;return ti(_t().removeToastr(r))}),I(1,"\xd7 "),E()}}function sbe(e,t){if(1&e&&(C(0,"div"),I(1),E()),2&e){const n=_t().$implicit,i=_t();Zu("to-title ",n.config.titleClass||i.titleClass,""),ce(1),La(n.title)}}function obe(e,t){if(1&e&&ue(0,"span",10),2&e){const n=_t().$implicit,i=_t();Zu("to-message ",n.config.messageClass||i.messageClass,""),ot("innerHTML",i.sanitizer.bypassSecurityTrustHtml(n.message),yd)}}function abe(e,t){if(1&e&&(C(0,"span"),I(1),E()),2&e){const n=_t().$implicit,i=_t();Zu("to-message ",n.config.messageClass||i.messageClass,""),ce(1),La(n.message)}}function lbe(e,t){if(1&e){const n=Xr();C(0,"div",3),zt("@inOut.done",function(r){return Zn(n),ti(_t().onAnimationEnd(r))})("click",function(){const s=Zn(n).$implicit;return ti(_t().clicked(s))}),mt(1,rbe,2,0,"div",4),mt(2,sbe,2,4,"div",5),C(3,"div",6),mt(4,obe,1,4,"span",7),mt(5,abe,2,4,"span",8),E()()}if(2&e){const n=t.$implicit,i=_t();Zu("toastr toastr-",n.type,""),ot("@inOut",n.config.animate||i.animate),ce(1),ot("ngIf",n.config.showCloseButton),ce(1),ot("ngIf",n.title),ce(1),ot("ngSwitch",n.config.enableHTML),ce(1),ot("ngSwitchCase",!0)}}let o2=(()=>{class e{constructor(){this.position="top-right",this.maxShown=5,this.newestOnTop=!1,this.animate="slideFromLeft",this.toastTimeout=5e3,this.enableHTML=!1,this.dismiss="auto",this.messageClass="toastr-message",this.titleClass="toastr-title",this.showCloseButton=!1}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})();class Ew{constructor(t,n,i,r){this.type=t,this.message=n,this.title=i,this.data=r,this.config={position:"",animate:"slideFromLeft",dismiss:"auto",enableHTML:!1,titleClass:"",messageClass:"",toastTimeout:3e3,showCloseButton:!1}}dismiss(){this.toastrManager.dismissToastr(this)}}const cbe=mj("inOut",[R0("fade",za({opacity:1})),gh("void => fade",[za({opacity:1}),mh("0.4s ease-in")]),gh("fade => void",[mh("0.4s 0.1s ease-out",za({opacity:0}))]),R0("slideFromLeft",za({opacity:1,transform:"translateX(0)"})),gh("void => slideFromLeft",[za({opacity:0,transform:"translateX(-100%)"}),mh("0.4s ease-in")]),gh("slideFromLeft => void",[mh("0.4s 0.1s ease-out",za({opacity:0,transform:"translateX(100%)"}))]),R0("slideFromRight",za({opacity:1,transform:"translateX(0)"})),gh("void => slideFromRight",[za({opacity:0,transform:"translateX(100%)"}),mh("0.4s ease-in")]),gh("slideFromRight => void",[mh("0.4s 0.1s ease-out",za({opacity:0,transform:"translateX(-100%)"}))]),R0("slideFromTop",za({opacity:1,transform:"translateY(0)"})),gh("void => slideFromTop",[za({opacity:0,transform:"translateY(-100%)"}),mh("0.4s ease-in")]),gh("slideFromTop => void",[mh("0.4s 0.1s ease-out",za({opacity:0,transform:"translateY(100%)"}))]),R0("slideFromBottom",za({opacity:1,transform:"translateY(0)"})),gh("void => slideFromBottom",[za({opacity:0,transform:"translateY(100%)"}),mh("0.4s ease-in")]),gh("slideFromBottom => void",[mh("0.4s 0.1s ease-out",za({opacity:0,transform:"translateY(-100%)"}))])]);let dbe=(()=>{class e{constructor(n,i,r,s){this.sanitizer=n,this.cdr=i,this._zone=r,this.toastrs=[],this._fresh=!0,this._onEnter=new M.xQ,this._onExit=new M.xQ,Object.assign(this,s)}onEnter(){return this._onEnter.asObservable()}onExit(){return this._onExit.asObservable()}addToastr(n){if(this.position.indexOf("top")>0){if(this.newestOnTop?this.toastrs.unshift(n):this.toastrs.push(n),this.toastrs.length>this.maxShown){const i=this.toastrs.length-this.maxShown;this.newestOnTop?this.toastrs.splice(this.maxShown):this.toastrs.splice(0,i)}}else this.toastrs.unshift(n),this.toastrs.length>this.maxShown&&this.toastrs.splice(this.maxShown);null===this.animate&&this._fresh&&(this._fresh=!1,this._onEnter.next(),this._onEnter.complete()),this.cdr.detectChanges()}removeToastr(n){n.timeoutId&&(clearTimeout(n.timeoutId),n.timeoutId=null),this.toastrs=this.toastrs.filter(i=>i.id!==n.id)}removeAllToasts(){this.toastrs.forEach(n=>{clearTimeout(n.timeoutId),n.timeoutId=null}),this.toastrs=[]}clicked(n){this.onToastClicked&&this.onToastClicked(n)}anyToast(){return this.toastrs.length>0}findToast(n){for(let i of this.toastrs)if(i.id===n)return i;return null}onAnimationEnd(n){"void"!==n.toState||this.anyToast()?this._fresh&&"void"===n.fromState&&(this._fresh=!1,this._zone.run(()=>{this._onEnter.next(),this._onEnter.complete()})):this._ngExit()}_ngExit(){this._zone.onMicrotaskEmpty.subscribe(()=>{this._onExit.next(),this._onExit.complete()})}ngOnDestroy(){this._ngExit()}}return e.\u0275fac=function(n){return new(n||e)(Ne(uj),Ne(Zh),Ne(_s),Ne(o2))},e.\u0275cmp=qi({type:e,selectors:[["app-toastr"]],decls:3,vars:4,consts:[["id","toastr-container"],["toastrContainer",""],[3,"class","click",4,"ngFor","ngForOf"],[3,"click"],["class","toastr-close-button",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],[3,"ngSwitch"],[3,"class","innerHTML",4,"ngSwitchCase"],[3,"class",4,"ngSwitchDefault"],[1,"toastr-close-button",3,"click"],[3,"innerHTML"]],template:function(n,i){1&n&&(C(0,"div",0,1),mt(2,lbe,6,8,"div",2),E()),2&n&&(Am(i.position),ce(2),ot("ngForOf",i.toastrs))},dependencies:[Ba,il,ZP,R7,k7],styles:[".to-title[_ngcontent-%COMP%]{font-weight:700;font-size:16px;margin-bottom:8px;color:#fff}.to-message[_ngcontent-%COMP%]{word-wrap:break-word;font-size:14px;line-height:20px;display:block;color:#fff;background-color:transparent}.to-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .to-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff}.to-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ccc;text-decoration:none}.toastr-close-button[_ngcontent-%COMP%]{position:relative;right:-5px;top:-15px;float:right;font-size:25px;color:#fff;-webkit-text-shadow:0 1px 0 #fff;text-shadow:0 1px 0 #fff;opacity:.8}.toastr-close-button[_ngcontent-%COMP%]:focus, .toastr-close-button[_ngcontent-%COMP%]:hover{color:#000;text-decoration:none;cursor:pointer;opacity:.4}button.toastr-close-button[_ngcontent-%COMP%]{padding:0;cursor:pointer;background:0 0;border:0;-webkit-appearance:none}.top-center[_ngcontent-%COMP%]{top:0;right:0;width:100%}.bottom-center[_ngcontent-%COMP%]{bottom:0;right:0;width:100%}.top-full-width[_ngcontent-%COMP%]{top:0;right:0;width:100%}.bottom-full-width[_ngcontent-%COMP%]{bottom:0;right:0;width:100%}.top-left[_ngcontent-%COMP%]{top:12px;left:12px}.top-right[_ngcontent-%COMP%]{top:12px;right:12px}.bottom-right[_ngcontent-%COMP%]{right:12px;bottom:12px}.bottom-left[_ngcontent-%COMP%]{bottom:12px;left:12px}#toastr-container[_ngcontent-%COMP%]{position:fixed;z-index:99999}#toastr-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin:10px 0 6px;padding:15px 15px 15px 60px;width:345px;border-radius:3px;background-position:15px;background-repeat:no-repeat;box-shadow:0 0 12px #999;color:#fff;opacity:1}#toastr-container[_ngcontent-%COMP%] > div.toastr-custom[_ngcontent-%COMP%]{padding:15px;color:#030303}#toastr-container[_ngcontent-%COMP%] > div.toastr-custom[_ngcontent-%COMP%]   .toastr-close-button[_ngcontent-%COMP%]{color:#999!important}#toastr-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #000;opacity:1;cursor:pointer}#toastr-container[_ngcontent-%COMP%] > .toastr-info[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGwSURBVEhLtZa9SgNBEMc9sUxxRcoUKSzSWIhXpFMhhYWFhaBg4yPYiWCXZxBLERsLRS3EQkEfwCKdjWJAwSKCgoKCcudv4O5YLrt7EzgXhiU3/4+b2ckmwVjJSpKkQ6wAi4gwhT+z3wRBcEz0yjSseUTrcRyfsHsXmD0AmbHOC9Ii8VImnuXBPglHpQ5wwSVM7sNnTG7Za4JwDdCjxyAiH3nyA2mtaTJufiDZ5dCaqlItILh1NHatfN5skvjx9Z38m69CgzuXmZgVrPIGE763Jx9qKsRozWYw6xOHdER+nn2KkO+Bb+UV5CBN6WC6QtBgbRVozrahAbmm6HtUsgtPC19tFdxXZYBOfkbmFJ1VaHA1VAHjd0pp70oTZzvR+EVrx2Ygfdsq6eu55BHYR8hlcki+n+kERUFG8BrA0BwjeAv2M8WLQBtcy+SD6fNsmnB3AlBLrgTtVW1c2QN4bVWLATaIS60J2Du5y1TiJgjSBvFVZgTmwCU+dAZFoPxGEEs8nyHC9Bwe2GvEJv2WXZb0vjdyFT4Cxk3e/kIqlOGoVLwwPevpYHT+00T+hWwXDf4AJAOUqWcDhbwAAAAASUVORK5CYII=)!important}#toastr-container[_ngcontent-%COMP%] > .toastr-error[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHOSURBVEhLrZa/SgNBEMZzh0WKCClSCKaIYOED+AAKeQQLG8HWztLCImBrYadgIdY+gIKNYkBFSwu7CAoqCgkkoGBI/E28PdbLZmeDLgzZzcx83/zZ2SSXC1j9fr+I1Hq93g2yxH4iwM1vkoBWAdxCmpzTxfkN2RcyZNaHFIkSo10+8kgxkXIURV5HGxTmFuc75B2RfQkpxHG8aAgaAFa0tAHqYFfQ7Iwe2yhODk8+J4C7yAoRTWI3w/4klGRgR4lO7Rpn9+gvMyWp+uxFh8+H+ARlgN1nJuJuQAYvNkEnwGFck18Er4q3egEc/oO+mhLdKgRyhdNFiacC0rlOCbhNVz4H9FnAYgDBvU3QIioZlJFLJtsoHYRDfiZoUyIxqCtRpVlANq0EU4dApjrtgezPFad5S19Wgjkc0hNVnuF4HjVA6C7QrSIbylB+oZe3aHgBsqlNqKYH48jXyJKMuAbiyVJ8KzaB3eRc0pg9VwQ4niFryI68qiOi3AbjwdsfnAtk0bCjTLJKr6mrD9g8iq/S/B81hguOMlQTnVyG40wAcjnmgsCNESDrjme7wfftP4P7SP4N3CJZdvzoNyGq2c/HWOXJGsvVg+RA/k2MC/wN6I2YA2Pt8GkAAAAASUVORK5CYII=)!important}#toastr-container[_ngcontent-%COMP%] > .toastr-success[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADsSURBVEhLY2AYBfQMgf///3P8+/evAIgvA/FsIF+BavYDDWMBGroaSMMBiE8VC7AZDrIFaMFnii3AZTjUgsUUWUDA8OdAH6iQbQEhw4HyGsPEcKBXBIC4ARhex4G4BsjmweU1soIFaGg/WtoFZRIZdEvIMhxkCCjXIVsATV6gFGACs4Rsw0EGgIIH3QJYJgHSARQZDrWAB+jawzgs+Q2UO49D7jnRSRGoEFRILcdmEMWGI0cm0JJ2QpYA1RDvcmzJEWhABhD/pqrL0S0CWuABKgnRki9lLseS7g2AlqwHWQSKH4oKLrILpRGhEQCw2LiRUIa4lwAAAABJRU5ErkJggg==)!important}#toastr-container[_ngcontent-%COMP%] > .toastr-warning[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGYSURBVEhL5ZSvTsNQFMbXZGICMYGYmJhAQIJAICYQPAACiSDB8AiICQQJT4CqQEwgJvYASAQCiZiYmJhAIBATCARJy+9rTsldd8sKu1M0+dLb057v6/lbq/2rK0mS/TRNj9cWNAKPYIJII7gIxCcQ51cvqID+GIEX8ASG4B1bK5gIZFeQfoJdEXOfgX4QAQg7kH2A65yQ87lyxb27sggkAzAuFhbbg1K2kgCkB1bVwyIR9m2L7PRPIhDUIXgGtyKw575yz3lTNs6X4JXnjV+LKM/m3MydnTbtOKIjtz6VhCBq4vSm3ncdrD2lk0VgUXSVKjVDJXJzijW1RQdsU7F77He8u68koNZTz8Oz5yGa6J3H3lZ0xYgXBK2QymlWWA+RWnYhskLBv2vmE+hBMCtbA7KX5drWyRT/2JsqZ2IvfB9Y4bWDNMFbJRFmC9E74SoS0CqulwjkC0+5bpcV1CZ8NMej4pjy0U+doDQsGyo1hzVJttIjhQ7GnBtRFN1UarUlH8F3xict+HY07rEzoUGPlWcjRFRr4/gChZgc3ZL2d8oAAAAASUVORK5CYII=)!important}#toastr-container.bottom-center[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], #toastr-container.top-center[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:300px;margin:10px auto}#toastr-container.bottom-full-width[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], #toastr-container.top-full-width[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:96%;margin:10px auto}.toastr[_ngcontent-%COMP%]{background-color:#fff}.toastr-success[_ngcontent-%COMP%]{background-color:#51a351}.toastr-error[_ngcontent-%COMP%]{background-color:#d9534f}.toastr-info[_ngcontent-%COMP%]{background-color:#7460ee}.toastr-warning[_ngcontent-%COMP%]{background-color:#f89406}.toastr-progress[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;height:4px;background-color:#000;opacity:.4}@media all and (max-width:240px){#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:8px 8px 8px 50px;width:11em}#toastr-container[_ngcontent-%COMP%]   .toastr-close-button[_ngcontent-%COMP%]{right:-.2em;top:-.2em}}@media all and (min-width:241px) and (max-width:480px){#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:8px 8px 8px 50px;width:18em}#toastr-container[_ngcontent-%COMP%]   .toastr-close-button[_ngcontent-%COMP%]{right:-.2em;top:-.2em}}@media all and (min-width:481px) and (max-width:768px){#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:15px 15px 15px 50px;width:25em}}"],data:{animation:[cbe]}}),e})(),zW=(()=>{class e{constructor(n,i,r,s,o){this._applicationRef=n,this._componentFactoryResolver=i,this._injector=r,this.ngZone=s,this.options=o,this.toastrContainers=[],this.index=0,this.toastClicked=new M.xQ}createToastrComponent(n,i=[]){const r=this._componentFactoryResolver.resolveComponentFactory(n),s=C0.resolve(i),o=C0.fromResolvedProviders(s,this._injector);let a=document.createElement("div");a.id="toastr-node-"+Math.floor(200*Math.random()),document.querySelector("body").appendChild(a);const l=r.create(o,[],a);return this.attachToApplication(l),l}attachToApplication(n){this._applicationRef.attachView(n.hostView)}detachFromApplication(n){this._applicationRef.detachView(n.hostView)}isToastrContainerExist(n){return this.toastrContainers.length>0&&this.toastrContainers.findIndex(r=>r.position===n)>-1}getToastrComponentRef(n){if(this.toastrContainers.length>0){const i=this.toastrContainers.find(r=>r.position===n);return i?i.ref:null}return null}createTimeout(n){let i;return this.ngZone.runOutsideAngular(()=>{i=setTimeout(()=>this.ngZone.run(()=>this.clearToast(n)),n.config.toastTimeout)}),i.toString()}setupToast(n,i){n.id=++this.index,i&&i.hasOwnProperty("toastTimeout")&&(i.dismiss="auto");const r=Object.assign({},this.options,i||{});Object.keys(n.config).forEach(o=>{r.hasOwnProperty(o)&&(n.config[o]=r[o])}),"auto"===n.config.dismiss&&(n.timeoutId=this.createTimeout(n)),n.toastrManager=this;const s=n.config.position;return this.isToastrContainerExist(s)&&this.getToastrComponentRef(s).instance.addToastr(n),n}clearToast(n){const i=n.config.position;this.isToastrContainerExist(i)&&this.getToastrComponentRef(i).instance.removeToastr(n)}clearAllToasts(){this.toastrContainers.length>0&&this.toastrContainers.forEach(n=>{console.log(n);const i=n.ref;n.ref.instance.removeAllToasts(),this.dispose(i)})}dispose(n){if(n){const i=this.toastrContainers.findIndex(r=>r.position===n.instance.position);i>-1&&this.toastrContainers.splice(i,1),this.detachFromApplication(n)}}_onToastClicked(n){this.toastClicked.next(n),"controlled"!==n.config.dismiss&&this.clearToast(n)}dismissToastr(n){this.clearToast(n)}dismissAllToastr(){this.clearAllToasts()}onClickToast(){return this.toastClicked.asObservable()}showToastr(n,i){const r=Object.assign({},this.options,i);return new Promise((s,o)=>{if(!this.isToastrContainerExist(r.position)){let l=this.createToastrComponent(dbe,[{provide:o2,useValue:r}]);l.instance.onToastClicked=c=>{this._onToastClicked(c)},l.instance.onExit().subscribe(()=>{this.dispose(l)}),this.toastrContainers.push({position:r.position,ref:l})}s(this.setupToast(n,i))})}errorToastr(n,i,r){const o=new Ew("error",n,i,r&&r.data?r.data:null);return this.showToastr(o,r),o}infoToastr(n,i,r){const o=new Ew("info",n,i,r&&r.data?r.data:null);return this.showToastr(o,r),o}successToastr(n,i,r){const o=new Ew("success",n,i,r&&r.data?r.data:null);return this.showToastr(o,r),o}warningToastr(n,i,r){const o=new Ew("warning",n,i,r&&r.data?r.data:null);return this.showToastr(o,r),o}customToastr(n,i,r){const o=new Ew("custom",n,i,r&&r.data?r.data:null);return this.showToastr(o,r),o}}return e.\u0275fac=function(n){return new(n||e)(Jt(T0),Jt(L1),Jt(Rl),Jt(_s),Jt(o2))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac}),e})(),hbe=(()=>{class e{static forRoot(){return{ngModule:e,providers:[zW,o2]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[sc]}),e})();const en_backendUrl="https://www.pixtar.ae:5001",en_baseUrl="https://www.pixtar.ae";var ube=_(4942),UW=_.n(ube);let tu=(()=>{const t=class{constructor(i){this.http=i,this.getpageWithName=r=>this.http.post(en_backendUrl+"/api/home/getpagewithName",r,{observe:"response"}).pipe((0,us.K)(o=>(0,bs._)(o))),this.getHomepageWithName=r=>this.http.post(en_backendUrl+"/api/home/gethomepagewithName",r,{observe:"response"}).pipe((0,us.K)(o=>(0,bs._)(o))),this.getAboutNoticeDetails=r=>this.http.post(en_backendUrl+"/api/home/frountAboutNoticeDetails",r).pipe((0,us.K)(o=>(0,bs._)(o))),this.getInstagramPosts=r=>this.http.post(en_backendUrl+"/api/home/instagram-posts",r).pipe((0,us.K)(o=>(0,bs._)(o)))}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Jt(ac))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),pbe=(()=>{const t=class{constructor(i,r,s,o){this.router=i,this.pageservice=r,this.metaTagService=s,this.titleService=o,this.get_PageMeta(),this.baseUrl=en_baseUrl+"/assets"}ngOnInit(){var r={container:document.getElementById("lottie"),renderer:"svg",loop:!0,autoplay:!0,animationData:{v:"5.9.6",fr:30,ip:0,op:96,w:122,h:119,nm:"hand",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:3,nm:"Null 1",sr:1,ks:{o:{a:0,k:0,ix:11},r:{a:0,k:-34.9,ix:10},p:{a:0,k:[67.1,111.5,0],ix:2,l:2},a:{a:0,k:[0,0,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Layer 3 Outlines",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:9.546,s:[8]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:20.363,s:[-8]},{i:{x:[.65],y:[1.156]},o:{x:[.333],y:[0]},t:30.546,s:[8]},{i:{x:[.667],y:[1]},o:{x:[.167],y:[0]},t:42,s:[-1.8]},{i:{x:[.833],y:[1]},o:{x:[.333],y:[0]},t:51,s:[0]},{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:60,s:[-.4]},{t:69,s:[0]}],ix:10},p:{a:0,k:[-2.981,.359,0],ix:2,l:2},a:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[15.024,91.188,0],to:[0,0,0],ti:[0,0,0]},{t:44,s:[15.024,91.188,0]}],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[3.903,-5.533],[3.056,-2.353],[6.543,2.313],[4.228,4.252],[.327,6.566],[-.109,2.842],[-.281,9.016],[.083,2.706],[-1.043,.386],[-.666,-2.038],[-.181,-1.13],[.156,-4.374],[-1.579,-.706],[-1.31,1],[-.442,.663],[-6.815,9.598],[-.455,.427],[-1.272,-1.478],[1.046,-1.327],[4.713,-6.619],[.196,-.327],[-1.1,-.992],[-1.181,.832],[-.345,.518],[-6.936,9.765],[-.29,.345],[-1.763,-.582],[-.03,-1.826],[.764,-.91],[6.934,-9.766],[.241,-.499],[-1.104,-.867],[-1.126,.839],[-.321,.495],[-5.124,7.179],[-.342,.391],[-1.712,-.819],[1.17,-2.201],[.133,-.179],[5.282,-7.492],[-1.55,-1.123],[-1.373,1.933],[-2.975,4.189],[-.217,.273],[-1.064,-.33],[-.164,-.992],[.618,-.721],[4.295,-6.063]],o:[[0,0],[-3.925,5.53],[-2.207,3.163],[-5.419,4.144],[-5.658,-1.985],[-4.757,-4.537],[-.132,-2.83],[.352,-9.013],[.084,-2.7],[-.047,-1.53],[2.052,-.622],[.282,1.109],[.785,4.306],[-.141,1.724],[1.431,.818],[.627,-.491],[6.837,-9.584],[.339,-.524],[1.477,-1.272],[1.103,1.28],[-4.699,6.627],[-.221,.311],[-.761,1.271],[1.062,.978],[.484,-.392],[6.95,-9.758],[.262,-.368],[1.202,-1.415],[1.726,.596],[-.023,1.188],[-6.946,9.76],[-.333,.444],[-.56,1.287],[1.107,.863],[.438,-.395],[5.133,-7.171],[.3,-.423],[1.273,-1.408],[2.2,1.171],[-.105,.197],[-5.348,7.451],[-1.34,1.9],[1.55,1.123],[2.98,-4.187],[.2,-.283],[.669,-.891],[.979,.23],[.17,.934],[-4.32,6.046],[0,0]],v:[[23.152,14.265],[23.152,14.265],[11.387,30.834],[3.446,39.158],[-14.469,42.324],[-29.49,32.847],[-37.41,15.555],[-37.109,7.033],[-36.085,-20.008],[-36.314,-28.124],[-34.842,-30.943],[-29.951,-28.395],[-29.245,-25.033],[-28.298,-11.975],[-25.898,-7.919],[-21.376,-8.219],[-19.764,-9.962],[.715,-38.734],[1.91,-40.165],[6.888,-39.794],[6.986,-35.305],[-7.133,-15.436],[-7.783,-14.492],[-7.199,-10.598],[-3.355,-10.348],[-2.105,-11.721],[18.725,-41.005],[19.531,-42.094],[24.437,-43.471],[27.362,-39.438],[26.146,-36.195],[5.327,-6.906],[4.464,-5.488],[5.387,-1.83],[9.168,-1.788],[10.311,-3.128],[25.697,-24.654],[26.645,-25.895],[31.676,-26.887],[33.542,-20.783],[33.185,-20.219],[17.314,2.245],[17.658,7.111],[22.458,5.811],[31.391,-6.755],[32.008,-7.593],[34.898,-8.527],[36.785,-6.509],[36.077,-3.893],[23.154,14.271]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[-2.092,-1],[-5.851,1.244],[-2.89,2.122],[-2.836,4.038],[-8.223,11.534],[1.8,3.179],[2.203,.713],[-.482,.692],[3.481,3.721],[1.699,.527],[.484,.17],[1.139,3.155],[2.122,1.241],[3.015,-1.109],[1.758,-2.785],[.644,.543],[3.548,-4.034],[.13,-.169],[1.792,-2.514],[4.079,-5.747],[0,0],[.082,.492],[.844,3.567],[3.743,.857],[2.2,-2.689],[-.104,-2.042],[.639,-12.849],[-1.281,-4.26],[-5.078,-4.319],[-.195,-.238],[0,0]],o:[[2.036,1.113],[5.3,2.515],[3.508,-.744],[3.984,-2.911],[8.184,-11.562],[2.279,-2.855],[-1.124,-2.024],[.544,-.765],[3.017,-4.106],[-1.184,-1.328],[-.386,-.124],[1.837,-2.807],[-.767,-2.335],[-2.755,-1.652],[-3.194,1.082],[-.671,-.678],[-4.034,-3.548],[-.141,.16],[-1.912,2.423],[-4.089,5.741],[0,0],[-.08,-.81],[-.575,-3.63],[-.905,-3.835],[-3.335,-.972],[-1.354,1.532],[.755,12.89],[-.219,4.4],[1.914,6.386],[.221,.214],[0,0],[0,0]],v:[[-26.227,43.472],[-20.111,46.795],[-3.436,49.195],[6.271,44.847],[16.572,34.353],[41.182,-.292],[41.975,-10.279],[36.799,-14.538],[38.319,-16.68],[37.519,-30.18],[33.112,-33.014],[31.862,-33.451],[32.969,-42.919],[28.486,-48.471],[19.361,-49.329],[12.486,-42.977],[10.62,-44.85],[-3.107,-43.971],[-3.514,-43.477],[-8.939,-35.964],[-21.189,-18.731],[-22.033,-17.546],[-22.214,-19.346],[-24.014,-30.219],[-31.486,-37.094],[-40.613,-34.262],[-42.563,-28.686],[-43.555,9.895],[-42.488,22.887],[-31.775,39.287],[-31.152,39.965],[-26.227,43.465]],c:!1},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[44.024,50.688],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0},{ddd:0,ind:3,ty:4,nm:"Layer 4 Outlines",parent:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:3.182,s:[4]},{t:17,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.591],y:[1.232]},o:{x:[.333],y:[0]},t:3.182,s:[64.512]},{t:17,s:[78.762]}],ix:3},y:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:3.182,s:[-46.004]},{t:17,s:[-45.754]}],ix:4}},a:{a:0,k:[3.602,10.311,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.001,.462],[-.098,.14],[.05,.08],[-.397,.235],[-.245,-.372],[-.243,-2.031],[2.88,-3.875],[.273,0]],o:[[-.461,0],[0,-.17],[6.552,-9.387],[-.235,-.397],[.383,-.227],[1.001,1.784],[.576,4.793],[-.156,.224],[0,0]],v:[[-2.516,10.057],[-3.351,9.221],[-3.201,8.745],[-1.542,-8.689],[-1.249,-9.834],[-.128,-9.576],[1.757,-3.797],[-1.831,9.704],[-2.516,10.061]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[3.601,10.311],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0},{ddd:0,ind:4,ty:4,nm:"Layer 5 Outlines",parent:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:15,s:[100]}],ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:15,s:[0]}],ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.524],y:[1.943]},o:{x:[.333],y:[0]},t:0,s:[63.218]},{t:15,s:[81.718]}],ix:3},y:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[-46.437]},{t:15,s:[-45.687]}],ix:4}},a:{a:0,k:[3.592,13.05,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.001,.462],[-.098,.14],[.719,5.523],[1.159,2.111],[-.394,.238],[-.245,-.379],[-.31,-2.601],[4.815,-6.892],[.273,0]],o:[[-.461,0],[0,-.17],[3.6,-5.154],[-.281,-2.392],[-.238,-.395],[.387,-.233],[1.281,2.285],[.55,4.109],[-.156,.224],[0,0]],v:[[-2.507,12.799],[-3.341,11.964],[-3.191,11.486],[1.147,-4.604],[-1.033,-11.421],[-.75,-12.566],[.383,-12.305],[2.792,-4.905],[-1.823,12.439],[-2.508,12.797]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[3.592,13.05],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0},{ddd:0,ind:5,ty:4,nm:"Layer 6 Outlines",parent:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:15.909,s:[3]},{t:28,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.706],y:[1.553]},o:{x:[.333],y:[0]},t:15.909,s:[30.436]},{t:28,s:[24.186]}],ix:3},y:{a:1,k:[{i:{x:[.652],y:[1.489]},o:{x:[.333],y:[0]},t:15.909,s:[-81.209]},{t:28,s:[-93.959]}],ix:4}},a:{a:0,k:[9.646,4.948,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.001,.461],[-.075,.128],[-1.692,1.15],[-4.764,-.772],[.06,-.457],[.457,.06],[3.634,-2.451],[1.022,-1.522],[.295,0]],o:[[-.461,-.001],[0,-.148],[1.123,-1.71],[3.99,-2.716],[.457,.06],[-.06,.457],[-4.324,-.717],[-1.519,1.027],[-.151,.253],[0,0]],v:[[-8.561,4.693],[-9.395,3.855],[-9.279,3.435],[-5.016,-.898],[8.617,-3.926],[9.335,-2.989],[8.398,-2.27],[-3.995,.431],[-7.842,4.29],[-8.561,4.698]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[9.645,4.948],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0},{ddd:0,ind:6,ty:4,nm:"Layer 7 Outlines",parent:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:13.363,s:[0]},{t:26,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.624],y:[2.994]},o:{x:[.333],y:[0]},t:13.363,s:[30.021]},{t:26,s:[22.771]}],ix:3},y:{a:1,k:[{i:{x:[.624],y:[1.964]},o:{x:[.333],y:[0]},t:13.363,s:[-82.012]},{t:26,s:[-97.012]}],ix:4}},a:{a:0,k:[12.19,6.146,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.295,0],[0,.461],[-.076,.128],[-2.168,1.472],[-8.332,-1.099],[.06,-.457],[.457,.06],[4.573,-3.179],[1.34,-2]],o:[[-.461,-.001],[.001,-.149],[1.439,-2.19],[3.394,-2.379],[.457,.06],[-.06,.457],[-6.231,-.82],[-1.994,1.35],[-.151,.254]],v:[[-11.106,5.895],[-11.94,5.059],[-11.824,4.637],[-6.361,-.91],[11.161,-4.796],[11.88,-3.859],[10.943,-3.14],[-5.339,.413],[-10.387,5.486]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[12.19,6.146],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0}],markers:[]}};UW().loadAnimation(r),this.router.parseUrl(this.router.url).fragment||setTimeout(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},500)}get_PageMeta(){this.pageservice.getpageWithName({pageName:"about-us"}).subscribe(r=>{200==r.body.code&&r.body.result&&(this.titleService.setTitle(r?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:r?.body.result.meta_description},{name:"keywords",content:r?.body.result.meta_keywords}]))})}navigateToLink(i){this.router.navigate(["contact",i])}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(Oo),Ne(tu),Ne(wd),Ne(Md))},t.\u0275cmp=qi({type:t,selectors:[["app-about"]],decls:255,vars:5,consts:[[1,"service-banner"],[1,"container"],[1,"row"],[1,"col-xl-11","m-auto"],[1,"vh-100"],[1,"d-flex","flex-column","justify-content-center","align-items-center","h-100"],[1,"block-content"],[1,"d-flex","flex-row","w-100"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-flex","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none","align-items-end"],["id","lottie"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","200",1,"csm","d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","200",1,"csm","d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","300"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"p32","head","position-relative","w-100","start-0","end-0","d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],["id","wedo-section","data-scroll-index","0",1,"wedo-section"],[1,"container-fluid","d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],[1,"col-xl-10","offset-xl-1"],[1,"we-do"],[1,"col-xxl-12"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"p32","head"],["id","services1","data-scroll-nav","0",1,"services"],[1,"container-fluid"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","offset-xl-1","col-md-7","offset-md-1","col-sm-6","order-sm-1","order-2"],[1,"d-flex","flex-column","justify-content-between","h-100","service-content"],[1,"color1"],[1,"points"],[1,"link",3,"click"],[1,"barcelony"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-4","offset-xl-1","col-md-4","col-sm-6","order-sm-2","order-1"],[1,"img-block"],["alt","",1,"w-100",3,"src"],["id","services2","data-scroll-nav","1",1,"services"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-4","col-md-4","col-sm-6"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","offset-xl-1","col-md-6","offset-md-1","col-sm-6"],["id","services3","data-scroll-nav","2",1,"services"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","offset-xl-1","col-md-6","offset-md-1","col-sm-6","order-sm-1","order-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-4","offset-xl-1","col-md-4","offset-md-1","col-sm-6","order-sm-2","order-1"],["id","services4","data-scroll-nav","3",1,"services"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-7","offset-xl-1","col-md-7","offset-md-1","col-sm-6"],["id","services5","data-scroll-nav","4",1,"services"],[1,"bg-black"],[1,"col-md-3"],[1,"cap"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"p28","head"],[1,"col-md-9"],[1,"col-md-6","col-sm-6"],[1,"list"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"p32"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"p-0"],["href","https://www.pixtar.ae/project-details/dnour"],["href","https://www.pixtar.ae/project-details/pakhis"],["href","https://www.pixtar.ae/project-details/autokoorosh"],["href","https://www.pixtar.ae/project-details/vendetta"],["href","https://www.pixtar.ae/project-details/beyou"],[1,"line"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8),I(9,"We don't do "),E(),C(10,"h1",9),I(11,"We don't"),E(),ue(12,"div",10),E(),C(13,"h1",11),I(14,"do one"),E(),C(15,"h1",12),I(16," size fits all"),E(),C(17,"h1",13),I(18,"one size fits all"),E(),C(19,"p",14),I(20,"Our services are tailored to the needs of your brand."),E()()(),C(21,"p",15),I(22," We do it real "),E()()()()()(),C(23,"section",16)(24,"div",17)(25,"div",2)(26,"div",18)(27,"div",19)(28,"div",2)(29,"div",20)(30,"p",21),I(31," We do it real "),E()()()()()()()(),C(32,"section",22)(33,"div",23)(34,"div",2)(35,"div",18)(36,"div",2)(37,"div",24)(38,"div",25)(39,"h1")(40,"span",26),I(41,"Branding"),E(),I(42," that lets you in & gets you an ear"),E(),C(43,"div",27)(44,"p"),I(45,"Research | Strategy | Design"),E(),C(46,"p"),I(47,"Identity | Brandbook & more\u2026"),E()(),C(48,"p",28),zt("click",function(){return s.navigateToLink("branding")}),I(49,"Let us "),C(50,"span",29),I(51,"listen"),E(),I(52," to your story"),E()()(),C(53,"div",30)(54,"div",31),ue(55,"img",32),E()()()()()()(),C(56,"section",33)(57,"div",23)(58,"div",2)(59,"div",18)(60,"div",2)(61,"div",34)(62,"div",31),ue(63,"img",32),E()(),C(64,"div",35)(65,"div",25)(66,"h1")(67,"span",26),I(68,"Website"),E(),I(69," that tells your story which connects"),E(),C(70,"div",27)(71,"p"),I(72,"Static | Dynamic"),E(),C(73,"p"),I(74,"Ui/Ux & more\u2026"),E()(),C(75,"p",28),zt("click",function(){return s.navigateToLink("website")}),I(76,"Let's "),C(77,"span",29),I(78,"tell"),E(),I(79," your story"),E()()()()()()()(),C(80,"section",36)(81,"div",23)(82,"div",2)(83,"div",18)(84,"div",2)(85,"div",37)(86,"div",25)(87,"h1")(88,"span",26),I(89,"eCommerce"),E(),I(90," that helps you sell "),E(),C(91,"div",27)(92,"p"),I(93,"Magento 2++ Website Development"),E(),C(94,"p"),I(95,"Customised eCommerce Solutions"),E(),C(96,"p"),I(97,"Payment Gateway Integration"),E(),C(98,"p"),I(99,"& more\u2026"),E()(),C(100,"p",28),zt("click",function(){return s.navigateToLink("eCommerce")}),I(101,"Let us "),C(102,"span",29),I(103,"help you"),E(),I(104," sell"),E()()(),C(105,"div",38)(106,"div",31),ue(107,"img",32),E()()()()()()(),C(108,"section",39)(109,"div",23)(110,"div",2)(111,"div",18)(112,"div",2)(113,"div",34)(114,"div",31),ue(115,"img",32),E()(),C(116,"div",40)(117,"div",25)(118,"h1")(119,"span",26),I(120,"Enterprise Solutions"),E(),I(121," that automates your process"),E(),C(122,"div",27)(123,"p"),I(124,"Web Based Apps"),E(),C(125,"p"),I(126,"eCom Management Solutions"),E(),C(127,"p"),I(128,"Business Management Solutions"),E(),C(129,"p"),I(130,"& more\u2026"),E()(),C(131,"p",28),zt("click",function(){return s.navigateToLink("enterprice")}),I(132,"Let's "),C(133,"span",29),I(134,"automate"),E(),I(135," it"),E()()()()()()()(),C(136,"section",41)(137,"div",23)(138,"div",2)(139,"div",18)(140,"div",2)(141,"div",37)(142,"div",25)(143,"h1")(144,"span",26),I(145,"SEO"),E(),I(146," solution that spreads the word"),E(),C(147,"div",27)(148,"p"),I(149,"Organic SEO | Site Mapping"),E(),C(150,"p"),I(151,"Google Ads | Social Media Integration"),E(),C(152,"p"),I(153,"& more\u2026"),E()(),C(154,"p",28),zt("click",function(){return s.navigateToLink("seo")}),I(155,"Let us "),C(156,"span",29),I(157,"spread"),E(),I(158," your word"),E()()(),C(159,"div",38)(160,"div",31),ue(161,"img",32),E()()()()()()(),C(162,"section",42)(163,"div",23)(164,"div",2)(165,"div",18)(166,"div",2)(167,"div",43)(168,"div",44)(169,"p",45),I(170," Capabilities "),E()()(),C(171,"div",46)(172,"div",2)(173,"div",47)(174,"div",48)(175,"p",49),I(176," Strategy "),E(),C(177,"ul",50)(178,"li")(179,"a",51),I(180,"Research"),E()(),C(181,"li")(182,"a",52),I(183,"UI/UX audit "),E()(),C(184,"li")(185,"a",53),I(186,"Stakeholder workshops"),E()(),C(187,"li")(188,"a",51),I(189,"Product strategy"),E()(),C(190,"li")(191,"a",51),I(192,"Innovation consulting"),E()()()()(),C(193,"div",47)(194,"div",48)(195,"p",49),I(196,"Design"),E(),C(197,"ul",50)(198,"li")(199,"a",54),I(200,"UI/UX design"),E()(),C(201,"li")(202,"a",51),I(203,"Brand identity "),E()(),C(204,"li")(205,"a",55),I(206,"Websites and mobile apps"),E()(),C(207,"li")(208,"a",52),I(209,"Visual design"),E()(),C(210,"li")(211,"a",52),I(212,"Prototyping and testing"),E()()()()()(),C(213,"div",2)(214,"div",47)(215,"div",48)(216,"p",49),I(217,"Development"),E(),C(218,"ul",50)(219,"li")(220,"a",54),I(221,"HTML/CSS/JS"),E()(),C(222,"li")(223,"a",52),I(224,"React/Angular "),E()(),C(225,"li")(226,"a",51),I(227,"Backend/API integrations"),E()(),C(228,"li")(229,"a",51),I(230,"Magento 2++"),E()(),C(231,"li")(232,"a",51),I(233,"Web based apps"),E()()()()(),C(234,"div",47)(235,"div",48)(236,"p",49),I(237,"Content"),E(),C(238,"ul",50)(239,"li")(240,"a",51),I(241,"Copywriting"),E()(),C(242,"li")(243,"a",51),I(244,"Video "),E()(),C(245,"li")(246,"a",51),I(247,"Animation"),E()(),C(248,"li")(249,"a",51),I(250,"Iconography"),E()(),C(251,"li")(252,"a",51),I(253,"2D graphics"),E()()()()()()()()()()()(),ue(254,"div",56)),2&r&&(ce(55),Ue("src","",s.baseUrl,"/img/services/branding.jpg",De),ce(8),Ue("src","",s.baseUrl,"/img/services/dnour-website.jpg",De),ce(44),Ue("src","",s.baseUrl,"/img/services/ecommerce.jpg",De),ce(8),Ue("src","",s.baseUrl,"/img/services/enterprises.jpg",De),ce(46),Ue("src","",s.baseUrl,"/img/services/seo.jpg",De))},styles:['@media (max-width: 575px){section[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}}.service-banner[_ngcontent-%COMP%]{background:url(pixtar-splitlogo.fc88c164801c64f4.svg);background-repeat:no-repeat;background-position:100% 92%;background-size:23%}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:86vh!important}}@media (max-width: 767px){.service-banner[_ngcontent-%COMP%]{background-size:60%}}@media (max-width: 575px){.service-banner[_ngcontent-%COMP%]{background-position:100% 103%;min-height:100vh;height:100%}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0;font-size:106px;font-weight:700;color:#1d1d1f;line-height:normal}@media (max-width: 1366px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:90px}}@media (max-width: 1024px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:80px}}@media (max-width: 991px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px}}@media (max-width: 380px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px;font-weight:400;line-height:normal;margin-bottom:0;color:#101010}@media (max-width: 1366px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:30px}}@media (max-width: 1024px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 991px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 767){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:20px;margin-top:-40px;transition:transform .7s ease-in-out}@media (max-width: 767px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{width:60px}}@media (max-width: 600px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:10px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-top:-24px;width:40px}}@media (max-width: 380px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:5px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]:hover{transform:rotate(-30deg)}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:50px 10px}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:30px 0}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:15px 0}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px;font-weight:700;color:#1d1d1f;margin-top:0}@media (max-width: 1440px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:44px}}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}@media (max-width: 1024px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:38px}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px}}@media (max-width: 600px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:32px;font-weight:400;color:#1d1d1f;line-height:normal}@media (max-width: 1440px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1024px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#1d1d1f}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{font-weight:600;color:#1d1d1f;cursor:pointer}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:focus{color:#da9777}@media (max-width: 575px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{margin:20px 0}}.color1[_ngcontent-%COMP%]{color:#da9777}.barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:42px!important}@media (max-width: 1024px){.barcelony[_ngcontent-%COMP%]{font-size:36px!important}}@media (max-width: 800px){.barcelony[_ngcontent-%COMP%]{font-size:28px!important}}.p32[_ngcontent-%COMP%]{font-size:32px}@media (max-width: 600px){.p32[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 480px){.p32[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]{font-weight:700;color:#101010}@media (max-width: 1199px){.head[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 991px){.head[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px;display:inline-block;top:6px}@media (max-width: 1199px){.head[_ngcontent-%COMP%]:before{left:0}}@media (max-width: 991px){.head[_ngcontent-%COMP%]:before{height:24px;width:4px}}section.bg-black[_ngcontent-%COMP%]{padding:80px 0;background:#000}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]{padding:50px 0}}@media (max-width: 575px){section.bg-black[_ngcontent-%COMP%]{padding:50px 15px}}section.bg-black[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{color:#fff}section.bg-black[_ngcontent-%COMP%]   .cap[_ngcontent-%COMP%]{color:#fff}section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:40px;font-weight:600}@media (max-width: 1199px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 991px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:32px}}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:28px}}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:24px}@media (max-width: 1199px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px}}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.line[_ngcontent-%COMP%]{height:1px;background:#707070;width:65%;margin:0 auto;position:absolute;left:0;right:0;z-index:1}@media (max-width: 767px){.line[_ngcontent-%COMP%]{width:80%}}#lottie[_ngcontent-%COMP%]{display:block;overflow:hidden;transform:translateZ(0);text-align:center;opacity:1;position:relative;top:-1.5rem;width:16%}@media (max-width: 991px){#lottie[_ngcontent-%COMP%]{top:-1.5rem}}@media (max-width: 480px){#lottie[_ngcontent-%COMP%]{top:-.5rem;width:20%}}.p28[_ngcontent-%COMP%]{font-size:28px}@media (max-width: 1199px){.p28[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.p28[_ngcontent-%COMP%]{font-size:20px}}.csm[_ngcontent-%COMP%]{margin-top:-15px!important}@media (max-width: 575px){.csm[_ngcontent-%COMP%]{margin-top:0!important}}']}),e})();var Li=_(8259);let VW=(()=>{const t=class{constructor(i){this.http=i,this.getBusinesscardDetails=r=>this.http.post(en_backendUrl+"/api/businesscard/allbusinesscard",r).pipe((0,us.K)(o=>(0,bs._)(o))),this.getBusinesscardDetailsByID=r=>this.http.post(en_backendUrl+"/api/businesscard/getBusinesscardWithId",r).pipe((0,us.K)(o=>(0,bs._)(o)))}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Jt(ac))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const fbe=function(e){return["view",e]};function mbe(e,t){if(1&e&&(C(0,"div",6)(1,"div",7),ue(2,"img",8),C(3,"div",9)(4,"h5",10),I(5),E(),ue(6,"p",11),C(7,"a",12),I(8,"View Vcard"),E()()()()),2&e){const n=t.$implicit,i=_t();ce(2),Uc("src","",i.imagepath,"",n.profile_photo,"",De),ce(3),SP("",n.firstName," ",n.lastName,""),ce(2),ot("routerLink",nl(5,fbe,n._id))}}let gbe=(()=>{const t=class{constructor(i,r,s,o){this.businesscardService=i,this.pageservice=r,this.metaTagService=s,this.titleService=o,this.businesscards=[],this.imagepath=en_backendUrl+"/public/",this.get_PageMeta(),this.get_all_projects()}ngOnInit(){Li("nav").removeClass("d-none"),Li("footer").removeClass("d-none")}get_PageMeta(){this.pageservice.getpageWithName({pageName:"home"}).subscribe(r=>{200==r.body.code&&(this.titleService.setTitle(r?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:r?.body.result.meta_description},{name:"keywords",content:r?.body.result.meta_keywords}]))})}get_all_projects(){this.businesscardService.getBusinesscardDetails({}).subscribe(r=>{200==r.code&&(this.businesscards=r.result)})}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(VW),Ne(tu),Ne(wd),Ne(Md))},t.\u0275cmp=qi({type:t,selectors:[["app-businesscard"]],decls:7,vars:1,consts:[["id","header",1,"jumbotron","text-center"],[1,"display-3"],["id","gallery"],[1,"container"],[1,"row"],["class","col-lg-4 mb-4",4,"ngFor","ngForOf"],[1,"col-lg-4","mb-4"],[1,"card"],["alt","",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-dark",3,"routerLink"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"h2",1),I(2,"Business Cards"),E()(),C(3,"section",2)(4,"div",3)(5,"div",4),mt(6,mbe,9,7,"div",5),E()()()),2&r&&(ce(6),ot("ngForOf",s.businesscards))},dependencies:[Ba,xy],styles:[".contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#878787;border:none;border-radius:0;border-bottom:1px solid #DDDDDD}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#878787}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{color:#878787;border:none;border-radius:0;border-bottom:1px solid #DDDDDD}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#878787}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{width:100%}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding-left:0}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 10px 0 0}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:5px 20px;text-decoration:none;border:1px solid #707070;color:#878787;border-radius:30px}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777;background:#1d1d1f}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777;background:#1d1d1f}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777;background:#1d1d1f}@media (max-width: 1199px){.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:4px 10px}}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{background:transparent;color:#da9777;border:2px solid #DA9777;padding:5px 30px;border-radius:30px;font-weight:600}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:hover{background:#DA9777;color:#fff}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:focus{background:#DA9777;color:#fff}.contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px}@media (max-width: 991px){.contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px}}.contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:106px;font-weight:800;color:#000}@media (max-width: 1199px){.contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:80px}}@media (max-width: 991px){.contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px}}.contact-content[_ngcontent-%COMP%]   .short-desc[_ngcontent-%COMP%]{width:530px;font-size:22px;font-weight:500}@media (max-width: 1199px){.contact-content[_ngcontent-%COMP%]   .short-desc[_ngcontent-%COMP%]{width:100%}}"]}),e})(),vbe=(()=>{const t=class{constructor(){this.baseURl=en_baseUrl+"/assets/"}ngOnInit(){}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=qi({type:t,selectors:[["app-godly"]],decls:46,vars:8,consts:[[1,"card-section"],[1,"container","p-0"],[1,""],[1,"col-xxl-4","col-lg-5","col-md-6","col-sm-8","col-12","p-0","m-auto"],[1,"d-flex","align-items-center","justify-content-center","vh-100","coverflow-hidden"],[1,"card"],["alt","pixtar",1,"card-logo",3,"src"],["alt","godly business image",1,"card-img-top",3,"src"],[1,"card-body","d-flex","flex-column","justify-content-center"],[1,"profile-name","text-center"],[1,"account-block"],[1,"row","justify-content-center"],[1,"col-sm-10","0ffset-2","col-8","offset-2"],[1,"row","mb-2"],[1,"col-2","p-0","text-center","ph"],["href","tel:971566093025"],["alt","",3,"src"],[1,"col-10"],["href","tel:+971566093025"],[1,"row"],[1,"col-2","p-0","text-center","em"],["href","mailto:godly@epictravel.ae","target","_blank"],[1,"social-links"],[1,"d-flex","flex-row","justify-content-center","contact"],[1,"contact-btn",3,"href"],["href","https://www.epictravel.ae","target","_blank"],["alt","weblink","width","35",3,"src"],["href","https://www.linkedin.com/in/godly-babukutty-11566847/","target","_blank"],["alt","linkedin","width","35",3,"src"],["href","https://www.instagram.com/godly_babukutty/","target","_blank"],["alt","instagram","width","35",3,"src"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),ue(6,"img",6)(7,"img",7),C(8,"div",8)(9,"div",9)(10,"h4"),I(11,"Godly Babukutty"),E(),C(12,"p",2),I(13,"Managing Director at Epic Travel"),E()(),C(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"a",15),ue(20,"img",16),E()(),C(21,"div",17)(22,"a",18)(23,"span"),I(24,"+971 56 609 3025"),E()()()(),C(25,"div",19)(26,"div",20)(27,"a",21),ue(28,"img",16),E()(),C(29,"div",17)(30,"a",21)(31,"span"),I(32,"godly@epictravel.ae"),E()()()()()()(),C(33,"div",22)(34,"div",23)(35,"a",24),I(36,"Save Contact"),E(),C(37,"p")(38,"a",25),ue(39,"img",26),E()(),C(40,"p")(41,"a",27),ue(42,"img",28),E()(),C(43,"p")(44,"a",29),ue(45,"img",30),E()()()()()()()()()()()),2&r&&(ce(6),Ue("src","",s.baseURl,"/images/pixtar-white-logo.svg",De),ce(1),Ue("src","",s.baseURl,"/images/godly.jpeg",De),ce(13),Ue("src","",s.baseURl,"/images/phone.svg",De),ce(8),Ue("src","",s.baseURl,"/images/email.svg",De),ce(7),Ue("href","",s.baseURl,"godly.vcf",De),ce(4),Ue("src","",s.baseURl,"/images/website.svg",De),ce(3),Ue("src","",s.baseURl,"/images/linkedin.svg",De),ce(3),Ue("src","",s.baseURl,"/images/instagram.svg",De))},styles:["section.card-section[_ngcontent-%COMP%]{padding-bottom:0!important;font-family:Montserrat,sans-serif;background:rgba(128,128,128,.2901960784)}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:89vh!important;min-height:-webkit-fill-available}}@media (max-width: 414px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:98vh!important;min-height:-webkit-fill-available}}@media (max-width: 393px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:89vh!important;min-height:-webkit-fill-available}}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:100%!important;min-height:-webkit-fill-available}}section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}@media (max-width: 576px){section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:27rem;border:none;border-radius:30px;padding:12px;margin-bottom:0}@media (max-width: 1366px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:19rem}}@media (max-width: 1024px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%}}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:0;box-shadow:none!important;width:100%}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:25px 25px 0 0}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-logo[_ngcontent-%COMP%]{width:28px;position:absolute;top:2rem;left:2rem}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0;background:#fff;border-radius:25px;margin-top:-40px;height:250px}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border-radius:25px 25px 0 0;margin-top:-65px;height:250px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{padding:10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:8px 0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat,sans-serif;font-weight:700;font-size:20px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:12px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .ph[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .em[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#000}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:16px;color:#000;font-weight:700;line-height:2.5}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:15px 0 20px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;margin:0 0 0 10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact-btn[_ngcontent-%COMP%]{background:#1d1d1f;color:#fff;padding:7px 12px;font-size:14px;border-radius:30px;font-weight:600;border:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 6px 10px -4px #00000026;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]{background:#fff}}@media (orientation: landscape) and (max-width: 991px){.vh-100[_ngcontent-%COMP%]{height:100%!important}section.card-section[_ngcontent-%COMP%]{overflow-y:scroll!important}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:30px 0}}"]}),e})(),ybe=(()=>{const t=class{constructor(){this.baseURl=en_baseUrl+"/assets/"}ngOnInit(){}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=qi({type:t,selectors:[["app-israel"]],decls:43,vars:7,consts:[[1,"card-section"],[1,"container","p-0"],[1,""],[1,"col-xxl-4","col-lg-5","col-md-6","col-sm-8","col-12","p-0","m-auto"],[1,"d-flex","align-items-center","justify-content-center","vh-100","coverflow-hidden"],[1,"card"],["alt","pixtar logo",1,"card-logo",3,"src"],["alt","israel business image",1,"card-img-top",3,"src"],[1,"card-body","d-flex","flex-column","justify-content-center"],[1,"profile-name","text-center"],[1,"account-block"],[1,"row","justify-content-center"],[1,"col-sm-10","0ffset-2","col-8","offset-2"],[1,"row","mb-2"],[1,"col-2","p-0","text-center","ph"],["href","tel:+31657528147"],["alt","",3,"src"],[1,"col-10"],[1,"row"],[1,"col-2","p-0","text-center","em"],["href","mailto:israelomidosu@dnour.com","target","_blank"],[1,"social-links"],[1,"d-flex","flex-row","justify-content-center","contact"],[1,"contact-btn",3,"href"],["href","https://dnour.com/","target","_blank"],["alt","weblink","width","35",3,"src"],["href","https://www.linkedin.com/in/israelomidosu/","target","_blank"],["alt","linkedin","width","35",3,"src"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),ue(6,"img",6)(7,"img",7),C(8,"div",8)(9,"div",9)(10,"h4"),I(11,"Israel Omidosu"),E(),C(12,"p",2),I(13,"Head of Brand Strategy"),E()(),C(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"a",15),ue(20,"img",16),E()(),C(21,"div",17)(22,"a",15)(23,"span"),I(24,"+31 6575 28147"),E()()()(),C(25,"div",18)(26,"div",19)(27,"a",20),ue(28,"img",16),E()(),C(29,"div",17)(30,"a",20)(31,"span"),I(32,"israelomidosu@dnour.com"),E()()()()()()(),C(33,"div",21)(34,"div",22)(35,"a",23),I(36,"Save Contact"),E(),C(37,"p")(38,"a",24),ue(39,"img",25),E()(),C(40,"p")(41,"a",26),ue(42,"img",27),E()()()()()()()()()()()),2&r&&(ce(6),Ue("src","",s.baseURl,"/images/pixtar-white-logo.svg",De),ce(1),Ue("src","",s.baseURl,"/images/israel.jpg",De),ce(13),Ue("src","",s.baseURl,"/images/phone.svg",De),ce(8),Ue("src","",s.baseURl,"/images/email.svg",De),ce(7),Ue("href","",s.baseURl,"io.vcf",De),ce(4),Ue("src","",s.baseURl,"/images/website.svg",De),ce(3),Ue("src","",s.baseURl,"/images/linkedin.svg",De))},styles:["section.card-section[_ngcontent-%COMP%]{padding-bottom:0!important;font-family:Montserrat,sans-serif;background:rgba(128,128,128,.2901960784)}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:89vh!important;min-height:-webkit-fill-available}}@media (max-width: 414px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:98vh!important;min-height:-webkit-fill-available}}@media (max-width: 393px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:89vh!important;min-height:-webkit-fill-available}}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:100%!important;min-height:-webkit-fill-available}}section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}@media (max-width: 576px){section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:27rem;border:none;border-radius:30px;padding:12px;margin-bottom:0}@media (max-width: 1366px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:19rem}}@media (max-width: 1024px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%}}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:0;box-shadow:none!important;width:100%}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:25px 25px 0 0}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-logo[_ngcontent-%COMP%]{width:28px;position:absolute;top:2rem;left:2rem}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0;background:#fff;border-radius:25px;margin-top:-40px;height:250px}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border-radius:25px 25px 0 0;margin-top:-65px;height:250px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{padding:10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:8px 0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat,sans-serif;font-weight:700;font-size:20px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:12px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .ph[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .em[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#000}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:16px;color:#000;font-weight:700;line-height:2.5}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:15px 0 20px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;margin:0 0 0 10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact-btn[_ngcontent-%COMP%]{background:#1d1d1f;color:#fff;padding:7px 12px;font-size:14px;border-radius:30px;font-weight:600;border:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 6px 10px -4px #00000026;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]{background:#fff}}@media (orientation: landscape) and (max-width: 991px){.vh-100[_ngcontent-%COMP%]{height:100%!important}section.card-section[_ngcontent-%COMP%]{overflow-y:scroll!important}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:30px 0}}"]}),e})(),_be=(()=>{const t=class{constructor(){this.baseURl=en_baseUrl+"/assets/"}ngOnInit(){}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=qi({type:t,selectors:[["app-junaid-shaikh"]],decls:46,vars:8,consts:[[1,"card-section"],[1,"container","p-0"],[1,""],[1,"col-xxl-4","col-lg-5","col-md-6","col-sm-8","col-12","p-0","m-auto"],[1,"d-flex","align-items-center","justify-content-center","vh-100","coverflow-hidden"],[1,"card"],["alt","pixtar",1,"card-logo",3,"src"],["alt","junaid business image",1,"card-img-top",3,"src"],[1,"card-body","d-flex","flex-column","justify-content-center"],[1,"profile-name","text-center"],[1,"account-block"],[1,"row","justify-content-center"],[1,"col-sm-10","0ffset-2","col-8","offset-2"],[1,"row","mb-2"],[1,"col-2","p-0","text-center","ph"],["href","tel:971529997111"],["alt","",3,"src"],[1,"col-10"],[1,"row"],[1,"col-2","p-0","text-center","em"],["href","mailto:junaid@pixtar.ae","target","_blank"],[1,"social-links"],[1,"d-flex","flex-row","justify-content-center","contact"],[1,"contact-btn",3,"href"],["href","/"],["alt","weblink","width","35",3,"src"],["href","https://www.linkedin.com/in/junaid-nour-56515493","target","_blank"],["alt","linkedin","width","35",3,"src"],["href","https://instagram.com/junaidnour?igshid=YmMyMTA2M2Y=","target","_blank"],["alt","instagram","width","35",3,"src"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),ue(6,"img",6)(7,"img",7),C(8,"div",8)(9,"div",9)(10,"h4"),I(11,"Junaid Shaikh"),E(),C(12,"p",2),I(13,"Co-founder & Brand Director "),E()(),C(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"a",15),ue(20,"img",16),E()(),C(21,"div",17)(22,"a",15)(23,"span"),I(24,"+971 52 999 7111"),E()()()(),C(25,"div",18)(26,"div",19)(27,"a",20),ue(28,"img",16),E()(),C(29,"div",17)(30,"a",20)(31,"span"),I(32,"junaid@pixtar.ae"),E()()()()()()(),C(33,"div",21)(34,"div",22)(35,"a",23),I(36,"Save Contact"),E(),C(37,"p")(38,"a",24),ue(39,"img",25),E()(),C(40,"p")(41,"a",26),ue(42,"img",27),E()(),C(43,"p")(44,"a",28),ue(45,"img",29),E()()()()()()()()()()()),2&r&&(ce(6),Ue("src","",s.baseURl,"images/pixtar-white-logo.svg",De),ce(1),Ue("src","",s.baseURl,"images/junaid.jpg",De),ce(13),Ue("src","",s.baseURl,"images/phone.svg",De),ce(8),Ue("src","",s.baseURl,"images/email.svg",De),ce(7),Ue("href","",s.baseURl,"junaid-shaikh.vcf",De),ce(4),Ue("src","",s.baseURl,"images/website.svg",De),ce(3),Ue("src","",s.baseURl,"images/linkedin.svg",De),ce(3),Ue("src","",s.baseURl,"images/instagram.svg",De))},styles:["section.card-section[_ngcontent-%COMP%]{padding-bottom:0!important;font-family:Montserrat,sans-serif;background:rgba(128,128,128,.2901960784)}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:89vh!important;min-height:-webkit-fill-available}}@media (max-width: 414px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:98vh!important;min-height:-webkit-fill-available}}@media (max-width: 393px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:89vh!important;min-height:-webkit-fill-available}}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:100%!important;min-height:-webkit-fill-available}}section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}@media (max-width: 576px){section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:27rem;border:none;border-radius:30px;padding:12px;margin-bottom:0}@media (max-width: 1366px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:19rem}}@media (max-width: 1024px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%}}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:0;box-shadow:none!important;width:100%}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:25px 25px 0 0}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-logo[_ngcontent-%COMP%]{width:28px;position:absolute;top:2rem;left:2rem}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0;background:#fff;border-radius:25px;margin-top:-40px;height:250px}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border-radius:25px 25px 0 0;margin-top:-65px;height:250px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{padding:10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:8px 0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat,sans-serif;font-weight:700;font-size:20px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:12px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .ph[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .em[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#000}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:16px;color:#000;font-weight:700;line-height:2.5}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:15px 0 20px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;margin:0 0 0 10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact-btn[_ngcontent-%COMP%]{background:#1d1d1f;color:#fff;padding:7px 12px;font-size:14px;border-radius:30px;font-weight:600;border:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 6px 10px -4px #00000026;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]{background:#fff}}@media (orientation: landscape) and (max-width: 991px){.vh-100[_ngcontent-%COMP%]{height:100%!important}section.card-section[_ngcontent-%COMP%]{overflow-y:scroll!important}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:30px 0}}"]}),e})(),bbe=(()=>{const t=class{constructor(){this.baseURl=en_baseUrl+"/assets/"}ngOnInit(){}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=qi({type:t,selectors:[["app-nawaz"]],decls:46,vars:8,consts:[[1,"card-section"],[1,"container","p-0"],[1,""],[1,"col-xxl-4","col-lg-5","col-md-6","col-sm-8","col-12","p-0","m-auto"],[1,"d-flex","align-items-center","justify-content-center","vh-100","coverflow-hidden"],[1,"card"],["alt","pixtar",1,"card-logo",3,"src"],["alt","kbn business image",1,"card-img-top",3,"src"],[1,"card-body","d-flex","flex-column","justify-content-center"],[1,"profile-name","text-center"],[1,"account-block"],[1,"row","justify-content-center"],[1,"col-sm-10","0ffset-2","col-8","offset-2"],[1,"row","mb-2"],[1,"col-2","p-0","text-center","ph"],["href","tel:971527930781"],["alt","",3,"src"],[1,"col-10"],[1,"row"],[1,"col-2","p-0","text-center","em"],["href","mailto:kbn@pixtar.ae","target","_blank"],[1,"social-links"],[1,"d-flex","flex-row","justify-content-center","contact"],[1,"contact-btn",3,"href"],["href","/"],["alt","weblink","width","35",3,"src"],["href","https://www.linkedin.com/in/kbnab","target","_blank"],["alt","linkedin","width","35",3,"src"],["href","https://instagram.com/imkbn?igshid=YmMyMTA2M2Y=","target","_blank"],["alt","instagram","width","35",3,"src"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),ue(6,"img",6)(7,"img",7),C(8,"div",8)(9,"div",9)(10,"h4"),I(11,"KBN"),E(),C(12,"p",2),I(13,"Co-Founder & Creative Director"),E()(),C(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"a",15),ue(20,"img",16),E()(),C(21,"div",17)(22,"a",15)(23,"span"),I(24,"+971 52 793 0781"),E()()()(),C(25,"div",18)(26,"div",19)(27,"a",20),ue(28,"img",16),E()(),C(29,"div",17)(30,"a",20)(31,"span"),I(32,"kbn@pixtar.ae"),E()()()()()()(),C(33,"div",21)(34,"div",22)(35,"a",23),I(36,"Save Contact"),E(),C(37,"p")(38,"a",24),ue(39,"img",25),E()(),C(40,"p")(41,"a",26),ue(42,"img",27),E()(),C(43,"p")(44,"a",28),ue(45,"img",29),E()()()()()()()()()()()),2&r&&(ce(6),Ue("src","",s.baseURl,"/images/pixtar-white-logo.svg",De),ce(1),Ue("src","",s.baseURl,"/images/kbn.jpg",De),ce(13),Ue("src","",s.baseURl,"/images/phone.svg",De),ce(8),Ue("src","",s.baseURl,"/images/email.svg",De),ce(7),Ue("href","",s.baseURl,"kbn.vcf",De),ce(4),Ue("src","",s.baseURl,"/images/website.svg",De),ce(3),Ue("src","",s.baseURl,"/images/linkedin.svg",De),ce(3),Ue("src","",s.baseURl,"/images/instagram.svg",De))},styles:["section.card-section[_ngcontent-%COMP%]{padding-bottom:0!important;font-family:Montserrat,sans-serif;background:rgba(128,128,128,.2901960784)}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:89vh!important;min-height:-webkit-fill-available}}@media (max-width: 414px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:98vh!important;min-height:-webkit-fill-available}}@media (max-width: 393px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:89vh!important;min-height:-webkit-fill-available}}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:100%!important;min-height:-webkit-fill-available}}section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}@media (max-width: 576px){section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:27rem;border:none;border-radius:30px;padding:12px;margin-bottom:0}@media (max-width: 1366px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:19rem}}@media (max-width: 1024px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%}}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:0;box-shadow:none!important;width:100%}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:25px 25px 0 0}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-logo[_ngcontent-%COMP%]{width:28px;position:absolute;top:2rem;left:2rem}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0;background:#fff;border-radius:25px;margin-top:-40px;height:250px}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border-radius:25px 25px 0 0;margin-top:-65px;height:250px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{padding:10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:8px 0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat,sans-serif;font-weight:700;font-size:20px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:12px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .ph[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .em[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#000}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:16px;color:#000;font-weight:700;line-height:2.5}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:15px 0 20px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;margin:0 0 0 10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact-btn[_ngcontent-%COMP%]{background:#1d1d1f;color:#fff;padding:7px 12px;font-size:14px;border-radius:30px;font-weight:600;border:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 6px 10px -4px #00000026;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]{background:#fff}}@media (orientation: landscape) and (max-width: 991px){.vh-100[_ngcontent-%COMP%]{height:100%!important}section.card-section[_ngcontent-%COMP%]{overflow-y:scroll!important}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:30px 0}}"]}),e})(),xbe=(()=>{const t=class{constructor(){this.baseURl=en_baseUrl+"/assets/"}ngOnInit(){}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=qi({type:t,selectors:[["app-nawaz2"]],decls:46,vars:8,consts:[[1,"card-section"],[1,"container","p-0"],[1,""],[1,"col-xxl-4","col-lg-5","col-md-6","col-sm-8","col-12","p-0","m-auto"],[1,"d-flex","align-items-center","justify-content-center","vh-100","coverflow-hidden"],[1,"card"],["alt","pixtar",1,"card-logo",3,"src"],["alt","kbn business image",1,"card-img-top",3,"src"],[1,"card-body","d-flex","flex-column","justify-content-md-center","justify-content-sm-center","justify-content-start"],[1,"profile-name","text-center"],[1,"account-block"],[1,"content1"],[1,"content2"],[1,"mb-2","d-flex"],[1,"text-center","ph","me-sm-2","me-2"],["href","tel:971527930781"],["alt","",3,"src"],[1,"d-flex"],[1,"text-center","em","me-sm-2","me-2"],["href","mailto:kbn@pixtar.ae","target","_blank"],[1,"social-links"],[1,"d-flex","flex-row","justify-content-center","contact"],[1,"contact-btn",3,"href"],["href","/"],["alt","weblink","width","35",3,"src"],["href","https://www.linkedin.com/in/kbnab","target","_blank"],["alt","linkedin","width","35",3,"src"],["href","https://instagram.com/imkbn?igshid=YmMyMTA2M2Y=","target","_blank"],["alt","instagram","width","35",3,"src"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),ue(6,"img",6)(7,"img",7),C(8,"div",8)(9,"div",9)(10,"h4"),I(11,"KBN"),E(),C(12,"p",2),I(13,"Co-Founder & Creative Director"),E()(),C(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"a",15),ue(20,"img",16),E()(),C(21,"div",2)(22,"a",15)(23,"span"),I(24,"+971 52 793 0781"),E()()()(),C(25,"div",17)(26,"div",18)(27,"a",19),ue(28,"img",16),E()(),C(29,"div",2)(30,"a",19)(31,"span"),I(32,"kbn@pixtar.ae"),E()()()()()()(),C(33,"div",20)(34,"div",21)(35,"a",22),I(36,"Save Contact"),E(),C(37,"p")(38,"a",23),ue(39,"img",24),E()(),C(40,"p")(41,"a",25),ue(42,"img",26),E()(),C(43,"p")(44,"a",27),ue(45,"img",28),E()()()()()()()()()()()),2&r&&(ce(6),Ue("src","",s.baseURl,"/images/pixtar-white-logo.svg",De),ce(1),Ue("src","",s.baseURl,"/images/kbn.jpg",De),ce(13),Ue("src","",s.baseURl,"/images/phone.svg",De),ce(8),Ue("src","",s.baseURl,"/images/email.svg",De),ce(7),Ue("href","",s.baseURl,"kbn.vcf",De),ce(4),Ue("src","",s.baseURl,"/images/website.svg",De),ce(3),Ue("src","",s.baseURl,"/images/linkedin.svg",De),ce(3),Ue("src","",s.baseURl,"/images/instagram.svg",De))},styles:["section.card-section[_ngcontent-%COMP%]{padding-bottom:0!important;font-family:Montserrat,sans-serif;background:rgba(128,128,128,.2901960784)}section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow-x:hidden}@media (max-width: 576px){section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:27rem;border:none;border-radius:30px;padding:12px;margin-bottom:0}@media (max-width: 1366px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:19rem}}@media (max-width: 1024px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%}}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:0;box-shadow:none!important;width:100%;min-height:100vh;height:100%;border-radius:0;overflow:hidden}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:25px 25px 0 0}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-logo[_ngcontent-%COMP%]{width:28px;position:absolute;top:2rem;left:2rem}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0;background:#fff;border-radius:25px;margin-top:-40px}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border-radius:25px 25px 0 0}}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{margin-top:-60px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{padding:10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:20px 0}}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:15px 0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat,sans-serif;font-weight:700;font-size:20px;margin-top:0}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:12px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .content1[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;padding:0 12px;justify-content:center;align-items:center}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .ph[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .ph[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:32px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .em[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .em[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:32px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#000}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:16px;color:#000;font-weight:700;line-height:2.5}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:20px 0 15px}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:20px 0}}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:15px 0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;margin:0 0 0 10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact-btn[_ngcontent-%COMP%]{background:#1d1d1f;color:#fff;padding:7px 12px;font-size:14px;border-radius:30px;font-weight:600;border:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 6px 10px -4px #00000026;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]{background:#fff}}@media (orientation: landscape) and (max-width: 991px){.vh-100[_ngcontent-%COMP%]{height:100%!important}section.card-section[_ngcontent-%COMP%]{overflow-y:scroll!important}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:30px 0}}@media (orientation: landscape) and (max-width: 991px) and (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0}}"]}),e})(),wbe=(()=>{const t=class{constructor(i,r,s,o,a){this.businesscardService=i,this.router=r,this.route=s,this.element=o,this.location=a,this.id=this.route.snapshot.paramMap.get("id"),this.imagepath=en_backendUrl+"/public/",this.vCardpath=en_backendUrl+"/public/vcards/",this.baseURl=en_baseUrl+"/assets/",this.id&&this.getBusinesscard(this.id)}ngOnInit(){var i=this.location.path();"view"==(i=i.split("/")[2])&&(Li("nav").addClass("d-none"),Li("footer").addClass("d-none"))}getBusinesscard(i){this.businesscardService.getBusinesscardDetailsByID({id:i}).subscribe(s=>{200==s.code&&(this.businesscard=s.result)})}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(VW),Ne(Oo),Ne(jc),Ne(Ts),Ne(km))},t.\u0275cmp=qi({type:t,selectors:[["app-view"]],decls:46,vars:19,consts:[[1,"card-section"],[1,"container","p-0"],[1,""],[1,"col-xxl-4","col-lg-5","col-md-6","col-sm-8","col-12","p-0","m-auto"],[1,"d-flex","align-items-center","justify-content-center","vh-100","coverflow-hidden"],[1,"card"],["alt","pixtar",1,"card-logo",3,"src"],["alt","junaid business image",1,"card-img-top",3,"src"],[1,"card-body","d-flex","flex-column","justify-content-center"],[1,"profile-name","text-center"],[1,"account-block"],[1,"row","justify-content-center"],[1,"col-sm-10","0ffset-2","col-8","offset-2"],[1,"row","mb-2"],[1,"col-2","p-0","text-center","ph"],[3,"href"],["alt","",3,"src"],[1,"col-10"],[1,"row"],[1,"col-2","p-0","text-center","em"],["target","_blank",3,"href"],[1,"social-links"],[1,"d-flex","flex-row","justify-content-center","contact"],[1,"contact-btn",3,"href"],["href","#"],["alt","weblink","width","35",3,"src"],["href","https://www.linkedin.com/in/kbnab","target","_blank"],["alt","linkedin","width","35",3,"src"],["href","https://instagram.com/imkbn?igshid=YmMyMTA2M2Y=","target","_blank"],["alt","instagram","width","35",3,"src"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),ue(6,"img",6)(7,"img",7),C(8,"div",8)(9,"div",9)(10,"h4"),I(11),E(),C(12,"p",2),I(13),E()(),C(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"a",15),ue(20,"img",16),E()(),C(21,"div",17)(22,"a",15)(23,"span"),I(24),E()()()(),C(25,"div",18)(26,"div",19)(27,"a",20),ue(28,"img",16),E()(),C(29,"div",17)(30,"a",20)(31,"span"),I(32),E()()()()()()(),C(33,"div",21)(34,"div",22)(35,"a",23),I(36,"Save Contact"),E(),C(37,"p")(38,"a",24),ue(39,"img",25),E()(),C(40,"p")(41,"a",26),ue(42,"img",27),E()(),C(43,"p")(44,"a",28),ue(45,"img",29),E()()()()()()()()()()()),2&r&&(ce(6),Ue("src","",s.baseURl,"/images/pixtar-white-logo.svg",De),ce(1),Uc("src","",s.imagepath,"",s.businesscard.profile_photo,"",De),ce(4),SP("",s.businesscard.firstName," ",s.businesscard.lastName,""),ce(2),La(s.businesscard.title),ce(6),Ue("href","tel:",s.businesscard.cellPhone,"",De),ce(1),Ue("src","",s.baseURl,"/images/phone.svg",De),ce(2),Ue("href","tel:",s.businesscard.cellPhone,"",De),ce(2),La(s.businesscard.cellPhone),ce(3),Ue("href","mailto:",s.businesscard.email,"",De),ce(1),Ue("src","",s.baseURl,"/images/email.svg",De),ce(2),Ue("href","mailto:",s.businesscard.email,"",De),ce(2),La(s.businesscard.email),ce(3),Uc("href","",s.vCardpath,"",s.businesscard.firstName,".vcf",De),ce(4),Ue("src","",s.baseURl,"/images/website.svg",De),ce(3),Ue("src","",s.baseURl,"/images/linkedin.svg",De),ce(3),Ue("src","",s.baseURl,"/images/instagram.svg",De))},styles:["section.card-section[_ngcontent-%COMP%]{padding-bottom:0!important;font-family:Montserrat,sans-serif}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:91vh!important}}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:98vh!important}}section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}@media (max-width: 576px){section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:27rem;border:none;border-radius:30px;padding:12px}@media (max-width: 1366px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:19rem}}@media (max-width: 1024px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%}}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:0;box-shadow:none;width:100%}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:25px 25px 0 0}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-logo[_ngcontent-%COMP%]{width:28px;position:absolute;top:2rem;left:2rem}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0;background:#fff;border-radius:25px;margin-top:-40px;height:250px}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border-radius:25px 25px 0 0;margin-top:-65px;height:250px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{padding:10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:8px 0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat,sans-serif;font-weight:700;font-size:20px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:12px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .ph[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .em[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#000}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:16px;color:#000;font-weight:700;line-height:2.5}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:15px 0 20px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;margin:0 0 0 10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact-btn[_ngcontent-%COMP%]{background:#1d1d1f;color:#fff;padding:7px 12px;font-size:14px;border-radius:30px;font-weight:600;border:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 6px 10px -4px #00000026;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}",".navbar[_ngcontent-%COMP%]{\n  display: none !important;\n}\nfooter[_ngcontent-%COMP%]{\n  display: none !important;\n}"]}),e})(),Mbe=(()=>{const t=class{constructor(i){this.http=i,this.addContact=r=>this.http.post(en_backendUrl+"/api/home/contactadd",r,{observe:"response"}).pipe((0,us.K)(o=>(0,bs._)(o)))}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Jt(ac))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function Cbe(e,t){1&e&&(C(0,"div",36)(1,"div"),I(2," Name is required. "),E()())}function Pbe(e,t){if(1&e&&(C(0,"div",36)(1,"div"),I(2),E()()),2&e){const n=_t();ce(2),hs(" ",n.hasEmailError("email","required")," ")}}function Sbe(e,t){1&e&&(C(0,"div",36)(1,"div"),I(2," Phone Number is required. "),E()())}function Ebe(e,t){1&e&&(C(0,"div",36)(1,"div"),I(2," Comments is required. "),E()())}let jW=(()=>{const t=class{constructor(i,r,s,o,a,l,c){this.contactservice=i,this.toastr=r,this.route=s,this.formBuilder=o,this.pageservice=a,this.metaTagService=l,this.titleService=c,this.title="Contact Us",this.model={name:null,email:null,message:null,phone:null,subject:[]},this.submitted=!1,this.error={},this.selectedSubj=[],this.isWebsitesel=!1,this.isBrandingsel=!1,this.isGraphicsel=!1,this.isSeosel=!1,this.isEnterpricesel=!1,this.isEcommerce=!1,this.msg_success=!1,this.msg_danger=!1,this.subject=[],this.url="https://calendly.com/pixtar/explore",this.hasError=(d,h)=>this.addCareerForm.controls[d].hasError(h),this.hasEmailError=(d,h)=>""==this.addCareerForm.controls.email.value?"Email is required":"INVALID"==this.addCareerForm.controls.email.status?"Invalid Email":this.addCareerForm.controls.email.hasError(h),this.get_PageMeta(),this.baseUrl=en_baseUrl+"/assets",this.selectedSub=this.route.snapshot.paramMap.get("id"),this.addCareerForm=this.formBuilder.group({name:["",Ei.required],email:["",[Ei.required,Ei.email,Ei.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],message:["",Ei.required],phone:["",Ei.required]})}ngOnInit(){window.Calendly.initInlineWidget({url:this.url,parentElement:document.querySelector(".calendly-inline-widget"),prefill:{}}),setTimeout(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},500),$("nav").removeClass("d-none"),$("footer").removeClass("d-none"),"branding"==this.selectedSub?(this.isBrandingsel=!0,$("#branding").addClass("active")):"website"==this.selectedSub?($("#website").addClass("active"),this.isWebsitesel=!0):"graphic"==this.selectedSub?($("#graphic").addClass("active"),this.isGraphicsel=!0):"eCommerce"==this.selectedSub?($("#eCommerce").addClass("active"),this.isEcommerce=!0):"seo"==this.selectedSub&&($("#seo").addClass("active"),this.isSeosel=!0)}get_PageMeta(){this.pageservice.getpageWithName({pageName:"contact-us"}).subscribe(r=>{200==r.body.code&&r.body.result&&(this.titleService.setTitle(r?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:r?.body.result.meta_description},{name:"keywords",content:r?.body.result.meta_keywords}]))})}onSubmit(){this.submitted=!0;let i=this.addCareerForm.value;return!this.addCareerForm.invalid&&(this.isBrandingsel&&this.subject.push("Branding"),this.isWebsitesel&&this.subject.push("Website"),this.isGraphicsel&&this.subject.push("Graphic"),this.isEcommerce&&this.subject.push("eCommerce"),this.isSeosel&&this.subject.push("SEO"),i.subject=this.subject,this.subject.length<1?(this.toastr.errorToastr("Please Select any one from subjects"),!1):this.contactservice.addContact(i).subscribe(r=>{r&&200==r.body.code?(this.submitted=!0,this.toastr.successToastr(r.body.message),setInterval(()=>{window.location.reload()},2e3)):this.toastr.errorToastr("Error")},r=>this.error=r))}selectSub(i){"website"==i?$("#website").hasClass("active")?($("#website").removeClass("active"),this.isWebsitesel=!1):($("#website").addClass("active"),this.isWebsitesel=!0):"branding"==i?$("#branding").hasClass("active")?($("#branding").removeClass("active"),this.isBrandingsel=!1):($("#branding").addClass("active"),this.isBrandingsel=!0):"eCommerce"==i?$("#eCommerce").hasClass("active")?($("#eCommerce").removeClass("active"),this.isEnterpricesel=!1):($("#eCommerce").addClass("active"),this.isEnterpricesel=!0):"seo"==i?$("#seo").hasClass("active")?($("#seo").removeClass("active"),this.isSeosel=!1):($("#seo").addClass("active"),this.isSeosel=!0):"graphic"==i&&($("#graphic").hasClass("active")?($("#graphic").removeClass("active"),this.isSeosel=!1):($("#graphic").addClass("active"),this.isGraphicsel=!0))}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(Mbe),Ne(zW),Ne(jc),Ne(V0),Ne(tu),Ne(wd),Ne(Md))},t.\u0275cmp=qi({type:t,selectors:[["app-contact"]],decls:65,vars:6,consts:[[1,"pb-0","contactsection"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"container"],[1,"row"],[1,"col-md-6"],[1,"contact-content","h-100"],[1,""],[1,"describe"],["href","p/kbn","target","_blank",1,""],["alt","",3,"src"],[1,"short-desc"],[1,"contact-form"],[1,"form"],[1,"d-flex","flex-column","justify-content-center","align-items-start","h-100"],["method","post",1,"php-email-form","w-100",3,"formGroup","ngSubmit"],["contactForm","ngForm"],[1,"form-floating","mb-3"],["type","text","name","name","autocomplete","off","formControlName","name","id","floatingInput","placeholder","name",1,"form-control"],["for","floatingInput",1,"mt-0"],["class","error",4,"ngIf"],["type","email","name","email","autocomplete","off","formControlName","email","id","floatingInput","placeholder","email",1,"form-control"],["type","tel","name","phone","autocomplete","off","formControlName","phone","id","floatingInput","placeholder","phone",1,"form-control"],[1,"detail","w-100","d-none","d-sm-block","mt-4"],[1,"d-flex","flex-row","justify-content-space-between","align-items-center","flex-wrap","pl-0","mb-0"],["type","button","id","branding","value","Branding",1,"button",3,"click"],["type","button","id","graphic","value","Graphic",1,"button",3,"click"],["type","button","id","website","value","Website",1,"button",3,"click"],["type","button","id","eCommerce","value","eCommerce",1,"button",3,"click"],["type","button","id","seo","value","SEO",1,"button",3,"click"],[1,"form-floating"],["name","message","autocomplete","off","formControlName","message","id","floatingTextarea","placeholder","message","required","",1,"form-control"],[1,"detail","w-100","d-block","d-sm-none","mt-4"],[1,"d-flex","flex-row","justify-content-space-between","align-items-center","justify-content-center","flex-wrap","pl-0","mb-0"],[1,"w-100","w-100","text-center","text-sm-start"],["type","submit","name","submit","value","Send",1,"float-none","float-sm-end","float-md-end","float-lg-end","float-xl-end","float-xxl-end","mt-5","submit"],["id","contact-calendly",1,"candely"],["data-url","https://calendly.com/kbn",1,"calendly-inline-widget",2,"min-width","320px","height","630px"],[1,"error"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),ue(8,"img",8),E()(),C(9,"p",9),I(10,"Describe your project and leave us your contact info, we\u2019ll get back to you ASAP."),E()()()(),C(11,"div",3)(12,"div",10)(13,"div",11)(14,"div",12)(15,"form",13,14),zt("ngSubmit",function(){return s.onSubmit()}),C(17,"div",15),ue(18,"input",16),C(19,"label",17),I(20,"What's your name?"),E(),mt(21,Cbe,3,0,"div",18),E(),C(22,"div",15),ue(23,"input",19),C(24,"label",17),I(25,"What\u2019s your e-mail?"),E(),mt(26,Pbe,3,1,"div",18),E(),C(27,"div",15),ue(28,"input",20),C(29,"label",17),I(30,"What's your phone number?"),E(),mt(31,Sbe,3,0,"div",18),E(),C(32,"div",21)(33,"ul",22)(34,"li")(35,"input",23),zt("click",function(){return s.selectSub("branding")}),E()(),C(36,"li")(37,"input",24),zt("click",function(){return s.selectSub("graphic")}),E()(),C(38,"li")(39,"input",25),zt("click",function(){return s.selectSub("website")}),E()(),C(40,"li")(41,"input",26),zt("click",function(){return s.selectSub("eCommerce")}),E()(),C(42,"li")(43,"input",27),zt("click",function(){return s.selectSub("seo")}),E()()()(),C(44,"div",28),ue(45,"textarea",29),C(46,"label",17),I(47,"Tell us about your project :)"),E(),mt(48,Ebe,3,0,"div",18),E(),C(49,"div",30)(50,"ul",31)(51,"li")(52,"input",23),zt("click",function(){return s.selectSub("branding")}),E()(),C(53,"li")(54,"input",24),zt("click",function(){return s.selectSub("graphic")}),E()(),C(55,"li")(56,"input",25),zt("click",function(){return s.selectSub("website")}),E()(),C(57,"li")(58,"input",26),zt("click",function(){return s.selectSub("eCommerce")}),E()(),C(59,"li")(60,"input",27),zt("click",function(){return s.selectSub("seo")}),E()()()(),C(61,"div",32),ue(62,"input",33),E()()()()()()()()(),C(63,"section",34),ue(64,"div",35),E()),2&r&&(ce(8),Ue("src","",s.baseUrl,"/img/logos/qr-code-call-pixtar.svg",De),ce(7),ot("formGroup",s.addCareerForm),ce(6),ot("ngIf",s.submitted&&s.hasError("name","required")),ce(5),ot("ngIf",s.submitted&&s.hasEmailError("email","required")),ce(5),ot("ngIf",s.submitted&&s.hasError("phone","required")),ce(17),ot("ngIf",s.submitted&&s.hasError("message","required")))},dependencies:[il,ly,Bm,sy,oy,AS,jm,z0],styles:[".contactsection[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:160px}@media (max-width: 991px){.contactsection[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px;margin-top:60px}}@media (max-width: 991px){.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}}@media (max-width: 767px){.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]{margin:0 50px}}@media (max-width: 380px){.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]{margin:0 30px}}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#101010;border:none;border-radius:0;border-bottom:1px solid #dddddd}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#878787}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{color:#101010;border:none;border-radius:0;border-bottom:1px solid #dddddd}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#878787}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{width:100%}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding-left:0}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 10px 10px 0;position:relative;z-index:1}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{background-color:transparent;padding:3px 16px;text-decoration:none;border:1px solid #707070;color:#878787;border-radius:30px;font-weight:600}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{color:#da9777;background:#1d1d1f}@media (max-width: 1199px){.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{padding:4px 10px}}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .button.active[_ngcontent-%COMP%]{color:#da9777;background:#1d1d1f}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{background:transparent;color:#da9777;border:2px solid #da9777;padding:5px 30px;border-radius:30px;font-weight:600}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:hover{background:#da9777;color:#fff}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:focus{background:#da9777;color:#fff;border-color:#da9777}@media (max-width: 575px){.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{padding:8px 50px;font-size:16px}}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:disabled{opacity:.3}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   li.opacity-0.position-absolute[_ngcontent-%COMP%]{z-index:0}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#f33}@media (max-width: 1366px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]{display:flex;align-items:center}}@media (max-width: 767px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]{margin-top:50px;text-align:center}}.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;margin-bottom:80px}@media (max-width: 1366px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:50px;height:150px}}@media (max-width: 1199px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:140px}}@media (max-width: 991px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;margin-bottom:40px}}@media (max-width: 767px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:10px}}@media (max-width: 767px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]{text-align:center}}.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .short-desc[_ngcontent-%COMP%]{width:530px;font-size:22px;font-weight:500}@media (max-width: 1199px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .short-desc[_ngcontent-%COMP%]{width:100%}}@media (max-width: 767px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .short-desc[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 575px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .short-desc[_ngcontent-%COMP%]{font-size:16px}}.form-control[_ngcontent-%COMP%], .input-group-addon[_ngcontent-%COMP%], .tagsinput[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%], .carousel-control.right[_ngcontent-%COMP%], .carousel-control.left[_ngcontent-%COMP%]{transition:all .4s linear}"]}),e})();function Obe(e,t){1&e&&ue(0,"img",98),2&e&&ot("src",_t(2).$implicit.url,De)}function Abe(e,t){1&e&&mt(0,Obe,1,1,"ng-template",97),2&e&&ot("id",_t().$implicit.id)}function Tbe(e,t){if(1&e&&($o(0),mt(1,Abe,1,1,null,96),Ko()),2&e){const n=t.$implicit;ce(1),ot("ngIf",n.id<=3)}}function Dbe(e,t){1&e&&ue(0,"img",98),2&e&&ot("src",_t(2).$implicit.url,De)}function Ibe(e,t){1&e&&mt(0,Dbe,1,1,"ng-template",97),2&e&&ot("id",_t().$implicit.id)}function Rbe(e,t){if(1&e&&($o(0),mt(1,Ibe,1,1,null,96),Ko()),2&e){const n=t.$implicit;ce(1),ot("ngIf",n.id>=4&&n.id<=6)}}function kbe(e,t){1&e&&ue(0,"img",98),2&e&&ot("src",_t(2).$implicit.url,De)}function Nbe(e,t){1&e&&mt(0,kbe,1,1,"ng-template",97),2&e&&ot("id",_t().$implicit.id)}function Lbe(e,t){if(1&e&&($o(0),mt(1,Nbe,1,1,null,96),Ko()),2&e){const n=t.$implicit;ce(1),ot("ngIf",n.id>=7&&n.id<=9)}}let Fbe=(()=>{const t=class{constructor(){this.imageData=[{albumId:1,id:1,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot1.png"},{albumId:1,id:2,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot2.png"},{albumId:1,id:3,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot3.png"},{albumId:1,id:4,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot4.png"},{albumId:1,id:5,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot5.png"},{albumId:1,id:6,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot6.png"},{albumId:1,id:7,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot7.png"},{albumId:1,id:8,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot8.png"},{albumId:1,id:9,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot9.png"}],this.desktopslider={autoplayTimeout:2e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider1={autoplayTimeout:2500,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider2={autoplayTimeout:3e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.baseUrl=en_baseUrl+"/assets",this.Url=en_baseUrl}ngOnInit(){setTimeout(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},500)}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=qi({type:t,selectors:[["app-dnour"]],decls:219,vars:32,consts:[["id","project1","data-scroll-nav","0",1,"projects"],[1,"container-fluid"],[1,"row"],[1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-7","col-md-7","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","h-100","service-content"],[1,"heading"],[1,"points"],["href","http://www.dnour.com","target","_blank",1,"text-decoration-underline"],[1,"col-xl-5","col-md-5","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","align-items-sm-end"],[1,"list-block"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"mt-0","mb-2"],[3,"href"],["data-aos","fade-up","data-aos-duration","1500","data-aos-delay","150",1,"mt-0","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","200",1,"mt-0","mb-2"],["data-aos","fade-up","data-aos-duration","2500","data-aos-delay","250",1,"mt-0","mb-2"],["data-aos","fade-up","data-aos-duration","3000","data-aos-delay","300",1,"mt-0"],["data-scroll-nav","1",1,"pb-0"],[1,"container-fluid","p-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-12","p-0"],["alt","pages","width","","height","",3,"src"],["data-scroll-nav","2",1,"section","bg-black","about-project"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],[1,"content"],[1,"text-white"],[1,"mb-0","text-white"],["id","branding","data-scroll-nav","3",1,"bg-black","branding"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-5","col-xl-6","col-lg-8","col-md-10","col-sm-10"],[1,"text-white","heading"],[1,"imglist","mb-3"],["alt","project1","width","","height","",3,"src"],[1,"col-xxl-10","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","mx-lg-auto","ps-md-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","ps-md-0"],[1,"list"],["alt","packaging","width","","height","",3,"src"],["alt","envelop","width","","height","",3,"src"],["data-scroll-nav","4",1,"bg-black","story"],[1,"row","mb-4"],[1,"col-xxl-5","col-xl-6","col-lg-8","col-md-10","col-sm-10"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"content"],[1,"text-white","heading","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-12"],[1,"video","text-center"],["id","myVideo","width","954","height","480","controls","controls","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"customvideo","w-100","h-auto"],["src","https://dnour.com/pub/media/wysiwyg/about/the-brand-story-D'NOUR-DUBAI.mp4","type","video/mp4"],["src","https://dnour.com/pub/media/wysiwyg/about/the-brand-story-D'NOUR-DUBAI.ogg","type","video/ogg"],[1,"col-md-10","mx-md-auto"],[1,"about-story"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"text-white","semibold","mt-0","subheading"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","150",1,"text-white"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","200",1,"text-white","semibold","mt-0","subheading"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","250",1,"text-white"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","300",1,"text-white","semibold","mt-0","subheading"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","350",1,"text-white","mb-0"],["data-scroll-nav","5",1,"bg-black","typography"],[1,"typography"],["alt","typography","width","","height","","data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",3,"src"],["data-aos","fade-up","data-aos-duration","2500","data-aos-delay","100",1,"text-white"],["data-scroll-nav","6",1,"bg-black","package"],[1,"col-md-12"],["alt","packaing2","width","","height","","data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"img1",3,"src"],[1,"col-md-6"],["alt","box","width","","height","","data-aos","fade-up","data-aos-duration","2500","data-aos-delay","150",1,"img2",3,"src"],["alt","package-envelop","width","","height","","data-aos","fade-up","data-aos-duration","3000","data-aos-delay","200",3,"src"],["id","animations","data-scroll-nav","7",1,"animation"],[1,""],["data-aos","fade-up","data-aos-duration","2500","data-aos-delay","100",1,"col-md-12"],["id","myVideo","width","320","height","176","controls","controls","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto"],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],["id","ui-ux","data-scroll-nav","8",1,"ui-ux"],[1,"heading","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-9","mx-lg-auto"],["id","myVideo2","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto","desktopimg"],["id","myVideo3","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto"],["id","development","data-scroll-nav","9",1,"development"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-12","p-0"],["id","myVideo2","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"owlcarousel1"],[3,"options"],[4,"ngFor","ngForOf"],["data-aos","fade-up","data-aos-duration","2500","data-aos-delay","150",1,"owlcarousel2"],[1,"owlcarousel3"],["data-aos","fade-up","data-aos-duration","3000","data-aos-delay","200",3,"options"],["id","seo","data-scroll-nav","10",1,"seo-section"],["id","myVideo1","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto","seo"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"next","bg-black","pb-0"],[1,"container"],[1,"next-block"],[1,"in-line"],[1,"text-white","font-bold","border-radius-25",3,"href"],["alt","","width","280","height","280",3,"src"],[1,"heading","text-white"],[1,"line"],[4,"ngIf"],["class","slide","carouselSlide","",3,"id"],[3,"src","alt","title"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"div",5)(7,"div")(8,"h1",6),I(9,"D'NOUR"),E(),C(10,"div",7)(11,"p"),I(12,"D'NOUR is a Dubai-based jewellery brand that places women at the forefront."),E(),C(13,"p")(14,"a",8),I(15,"dnour.com"),E()()()()()(),C(16,"div",9)(17,"div",10)(18,"div",11)(19,"h3",12)(20,"a",13),I(21,"Branding"),E()(),C(22,"h3",14)(23,"a",13),I(24,"Animations"),E()(),C(25,"h3",15)(26,"a",13),I(27,"UI/UX Design"),E()(),C(28,"h3",16)(29,"a",13),I(30,"Development"),E()(),C(31,"h3",17)(32,"a",13),I(33,"SEO"),E()()()()()()()()()(),C(34,"section",18)(35,"div",19)(36,"div",2)(37,"div",20),ue(38,"img",21),E()()()(),C(39,"section",22)(40,"div",1)(41,"div",2)(42,"div",23)(43,"div",24)(44,"p",25),I(45,"Pixtar, a leading web development agency, partnered with D'NOUR, a Dubai-based jewellery brand that stands as a beacon for women empowerment. D'NOUR's creations, inspired by the elegance of the Rose, embody powerful storytelling, exquisite craftsmanship, and a profound message of appreciation, empowerment, and celebration of women."),E(),C(46,"p",26),I(47,"Pixtar took on the challenge of establishing D'NOUR's online presence in the highly competitive E-commerce jewellery market, focusing specifically on the UAE and USA. The industry was saturated with top-notch brands, making organic SEO a complex undertaking for a newly designed and developed website."),E()()()()()(),C(48,"section",27)(49,"div",1)(50,"div",2)(51,"div",3)(52,"div",2)(53,"div",28)(54,"div",24)(55,"h1",29),I(56,"Branding"),E(),C(57,"p",25),I(58,"Pixtar crafted a distinctive logo, premium quality visiting cards, invoice covers, and other corporate branding materials. The visual identity aimed to reflect D'NOUR's commitment to celebrating and empowering women."),E()()()()(),C(59,"div",20)(60,"div",30),ue(61,"img",31),E()(),C(62,"div",32)(63,"div",2)(64,"div",33),ue(65,"img",31),E(),C(66,"div",34)(67,"div",35),ue(68,"img",36)(69,"img",37),E()()()()()()(),C(70,"section",38)(71,"div",1)(72,"div",2)(73,"div",3)(74,"div",39)(75,"div",40)(76,"div",41)(77,"h1",42),I(78,"Brand Story"),E(),C(79,"p",25),I(80,"Branding is a strategic dance of logos, colors, and more, shaping a unique identity and perception in consumers' minds. It sets a brand apart, evoking emotions and building trust."),E()()()(),C(81,"div",2)(82,"div",43)(83,"div",44)(84,"video",45),ue(85,"source",46)(86,"source",47),I(87," Your browser does not support the video tag. "),E()()(),C(88,"div",48)(89,"div",49)(90,"h3",50),I(91,"ABOUT WOMEN:"),E(),C(92,"p",51),I(93,"D'NOUR is fueled by the spectrum of emotions and the diverse stories that women carry with them."),E(),C(94,"h3",52),I(95,"FOR WOMEN:"),E(),C(96,"p",53),I(97,"The vision, the jewellery, and the steps towards change - all crafted with women in mind, inspired by their strength and individuality."),E(),C(98,"h3",54),I(99,"TO WOMEN:"),E(),C(100,"p",55),I(101,"D'NOUR is committed to pushing the paradigm, empowering, celebrating, and giving back to women through their timeless and meaningful jewellery pieces."),E()()()()()()()(),C(102,"section",56)(103,"div",1)(104,"div",2)(105,"div",3)(106,"div",57),ue(107,"img",58),C(108,"p",59),I(109,"Pixtar curated a distinctive visual identity by meticulously choosing fonts and color combinations. The selected font reflected elegance and modernity, complementing D'NOUR's commitment to timeless beauty. The color palette incorporated soft rose hues, symbolizing the brand's inspiration, and gold accents, signifying luxury and sophistication."),E()()()()()(),C(110,"section",60)(111,"div",1)(112,"div",2)(113,"div",3)(114,"div",39)(115,"div",28)(116,"div",24)(117,"h1",42),I(118,"Package Design"),E(),C(119,"p",25),I(120,"Branding is a strategic dance of logos, colors, and more, shaping a unique identity and perception in consumers' minds. It sets a brand apart, evoking emotions and building trust."),E()()()(),C(121,"div",2)(122,"div",61),ue(123,"img",62),E(),C(124,"div",63),ue(125,"img",64),E(),C(126,"div",63),ue(127,"img",65),E()()()()()(),C(128,"section",66)(129,"div",1)(130,"div",2)(131,"div",23)(132,"div",39)(133,"div",40)(134,"div",24)(135,"h1",6),I(136,"Animations"),E(),C(137,"p",67),I(138,"Branding is a strategic dance of logos, colors, and more, shaping a unique identity and perception in consumers' minds. It sets a brand apart, evoking emotions and building trust."),E()()()(),C(139,"div",2)(140,"div",68)(141,"video",69),ue(142,"source",70)(143,"source",71),I(144," Your browser does not support HTML5 video. "),E()()()()()()(),C(145,"section",72)(146,"div",1)(147,"div",2)(148,"div",3)(149,"div",39)(150,"div",28)(151,"div",24)(152,"h1",73),I(153,"UI/UX Design"),E(),C(154,"p",67),I(155,"Created an engaging and user-centric interface for the D'NOUR website, ensuring a seamless and visually appealing user experience that resonated with the brand's ethos."),E()()()(),C(156,"div",2)(157,"div",74)(158,"video",75),ue(159,"source",70)(160,"source",71),I(161," Your browser does not support HTML5 video. "),E(),C(162,"video",76),ue(163,"source",70)(164,"source",71),I(165," Your browser does not support HTML5 video. "),E()()()()()()(),C(166,"section",77)(167,"div",1)(168,"div",2)(169,"div",3)(170,"div",39)(171,"div",28)(172,"div",24)(173,"h1",73),I(174,"Development"),E(),C(175,"p",67),I(176,"Developed the website using Magento, incorporating advanced features to showcase D'NOUR's exquisite jewellery collections. Security measures were implemented to safeguard user data and transactions."),E()()()()()()(),C(177,"div",78)(178,"video",79),ue(179,"source",70)(180,"source",71),I(181," Your browser does not support HTML5 video. "),E(),C(182,"div",80)(183,"owl-carousel-o",81),mt(184,Tbe,2,1,"ng-container",82),E()(),C(185,"div",83)(186,"owl-carousel-o",81),mt(187,Rbe,2,1,"ng-container",82),E()(),C(188,"div",84)(189,"owl-carousel-o",85),mt(190,Lbe,2,1,"ng-container",82),E()()()(),C(191,"section",86)(192,"div",1)(193,"div",2)(194,"div",3)(195,"div",39)(196,"div",28)(197,"div",24)(198,"h1",6),I(199,"SEO"),E(),C(200,"p",67),I(201,"Formulated a targeted organic SEO strategy tailored to the unique challenges of the E-commerce jewellery industry. Focused on optimizing the website for local search in the UAE and USA, leveraging keywords that aligned with D'NOUR's brand identity and unique selling propositions."),E()()()(),C(202,"video",87),ue(203,"source",70)(204,"source",71),I(205," Your browser does not support HTML5 video. "),E(),C(206,"p"),I(207,"Pixtar's holistic approach, encompassing branding, design, development, and a targeted organic SEO strategy, yielded positive outcomes. D'NOUR's online presence in the UAE and USA flourished, gaining visibility among its target audience despite the formidable competition. The case study serves as a testament to Pixtar's expertise in navigating challenges and helping a brand like D'NOUR shine in a crowded digital landscape."),E()()()()(),C(208,"section",88)(209,"div",89)(210,"div",2)(211,"div",61)(212,"div",90)(213,"div",91)(214,"a",92),ue(215,"img",93),C(216,"h1",94),I(217,"NEXT PROJECT"),E()()()()()(),ue(218,"div",95),E()()),2&r&&(ce(20),Ue("href","",s.Url,"/project-details/dnour#branding",De),ce(3),Ue("href","",s.Url,"/project-details/dnour#animations",De),ce(3),Ue("href","",s.Url,"/project-details/dnour#ui-ux",De),ce(3),Ue("href","",s.Url,"/project-details/dnour#development",De),ce(3),Ue("href","",s.Url,"/project-details/dnour#seo",De),ce(6),Ue("src","",s.baseUrl,"/images/projects/dnour/pages-banner.png",De),ce(23),Ue("src","",s.baseUrl,"/images/projects/dnour/dnour-project1.jpg",De),ce(4),Ue("src","",s.baseUrl,"/images/projects/dnour/bcard.png",De),ce(3),Ue("src","",s.baseUrl,"/images/projects/dnour/packaging.png",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/dnour/envelop.png",De),ce(38),Ue("src","",s.baseUrl,"/images/projects/dnour/typography.png",De),ce(16),Ue("src","",s.baseUrl,"/images/projects/dnour/packaging.png",De),ce(2),Ue("src","",s.baseUrl,"/images/projects/dnour/box.png",De),ce(2),Ue("src","",s.baseUrl,"/images/projects/dnour/package-envelop.png",De),ce(15),Ue("src","",s.baseUrl,"/images/projects/dnour/dnour-brand-logo-animation.mp4",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/dnour/dnour-brand-logo-animation.ogg",De),ce(16),Ue("src","",s.baseUrl,"/images/projects/dnour/dnour-desktop-imac-scroll.mp4",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/dnour/dnour-desktop-imac-scroll.ogg",De),ce(3),Ue("src","",s.baseUrl,"/images/projects/dnour/laptop-scroll.mp4",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/dnour/laptop-scroll.ogg",De),ce(15),Ue("src","",s.baseUrl,"/images/projects/dnour/homescreen.mp4",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/dnour/homescreen.ogg",De),ce(3),ot("options",s.desktopslider),ce(1),ot("ngForOf",s.imageData),ce(2),ot("options",s.desktopslider1),ce(1),ot("ngForOf",s.imageData),ce(2),ot("options",s.desktopslider2),ce(1),ot("ngForOf",s.imageData),ce(13),Ue("src","",s.baseUrl,"/images/projects/dnour/dnour-seo.mp4",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/dnour/dnour-seo.ogg",De),ce(10),Ue("href","",s.Url,"/project-details/pakhis",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/pakhis/pixtar-next.png",De))},dependencies:[Ba,il,W0,uf],styles:["section[_ngcontent-%COMP%]{overflow:hidden}section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#101010}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#101010;font-size:18px}@media (max-width: 767px){section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-weight:500}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}section[_ngcontent-%COMP%]   .barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:24px}@media (max-width: 767px){.section[_ngcontent-%COMP%]{padding:50px 0}}.bannerimg[_ngcontent-%COMP%]{text-align:center;margin-top:6rem}.bannerimg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:590px;height:770px}@media (max-width: 1399px){.bannerimg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}@media (max-width: 575px){.bannerimg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}}section.project[_ngcontent-%COMP%]{min-height:100vh;height:100%}@media (max-width: 991px){section.project[_ngcontent-%COMP%]{min-height:90vh}}section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:end;height:90%}section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{position:relative;right:-6rem;color:#101010;font-family:Montserrat,sans-serif;font-size:106px;font-weight:500}@media (max-width: 1366px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:80px}}@media (max-width: 991px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{right:0}}@media (max-width: 767px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:50px}}@media (max-width: 600px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px}}@media (max-width: 380px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;right:-1rem;color:#878787;font-family:Montserrat,sans-serif;font-size:24px}@media (max-width: 1366px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{right:0}}@media (max-width: 767px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]{display:block}}.brand-detail[_ngcontent-%COMP%]   .startdate[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:50px 0}@media (max-width: 991px){.brand-detail[_ngcontent-%COMP%]   .startdate[_ngcontent-%COMP%]{padding:0;border-bottom:none}}.brand-detail[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-color:#000;width:80%}@media (max-width: 991px){.brand-detail[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{margin-top:30px}}.brand-detail[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .brand-detail[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.begins[_ngcontent-%COMP%]   .websketch[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10rem}.begins[_ngcontent-%COMP%]   .websketch[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:675px;object-fit:cover}@media (max-width: 1024px){.begins[_ngcontent-%COMP%]   .websketch[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}}@media (max-width: 991px){.begins[_ngcontent-%COMP%]   .websketch[_ngcontent-%COMP%]{margin-top:5rem}}.projects[_ngcontent-%COMP%]{margin-top:200px}@media (max-width: 991px){.projects[_ngcontent-%COMP%]{margin-top:150px}}@media (max-width: 768px){.projects[_ngcontent-%COMP%]{margin-top:120px}}.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:15px 0;color:#101010;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#878787}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}@media (max-width: 575px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]{margin-top:20px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#878787;font-weight:500;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.about-project[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.branding[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0 30px}.branding[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:15px}img[_ngcontent-%COMP%]{max-width:100%;width:100%}.owlcarousel1[_ngcontent-%COMP%]{margin:50px 0}.owlcarousel2[_ngcontent-%COMP%]{margin:0 0 50px}.font-bold[_ngcontent-%COMP%]{font-weight:700!important}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{display:flex;justify-content:start;height:350px;align-items:center;width:100%}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{height:250px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;width:280px;display:inline;opacity:0;transition:.3s;border-radius:5px}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;width:160px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:90px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover{width:100%}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:40px;opacity:1;transition:width .8s ease;margin-left:150px;transition:.3s padding ease-out,.3s margin ease-out,.15s border ease-out}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:15px;margin-left:90px}}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-left:25px;margin-right:10px}}.about-story[_ngcontent-%COMP%]{margin-top:20px}.about-story[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.package[_ngcontent-%COMP%]   .img1[_ngcontent-%COMP%]{margin-bottom:24px}@media (max-width: 767px){.package[_ngcontent-%COMP%]   .img1[_ngcontent-%COMP%]{margin-bottom:15px}}.package[_ngcontent-%COMP%]   .img2[_ngcontent-%COMP%]{margin-bottom:15px}.animation[_ngcontent-%COMP%]{padding:80px 0}.seo[_ngcontent-%COMP%]{margin:10px 0 50px}.line[_ngcontent-%COMP%]{width:100%;position:relative;display:block;height:1px;background-color:#f0ebe6}#myVideo[_ngcontent-%COMP%], #myVideo1[_ngcontent-%COMP%]{border-radius:50px}@media (max-width: 991px){#myVideo[_ngcontent-%COMP%], #myVideo1[_ngcontent-%COMP%]{border-radius:30px}}@media (max-width: 575px){#myVideo[_ngcontent-%COMP%], #myVideo1[_ngcontent-%COMP%]{border-radius:20px}}.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:80px}@media (max-width: 767px){.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:50px}}"]}),e})();_(8548);var Od=_(3753),HW=_(8723),GW=_(1946),a2=(_(7274),_(1746)),zbe=_(2334),Ua=_(7625),nk=(_(5778),_(7168));Math,Math,Math;const Kxe=["*"],fwe=["dialog"];function fk(e){return"string"==typeof e}function Y0(e){return null!=e}function Oy(e){return(e||document.body).getBoundingClientRect()}const lq={animation:!0,transitionTimerDelayMs:5},lMe=()=>{},{transitionTimerDelayMs:cMe}=lq,kw=new Map,lc=(e,t,n,i)=>{let r=i.context||{};const s=kw.get(t);if(s)switch(i.runningTransition){case"continue":return j0.E;case"stop":e.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),kw.delete(t)}const o=n(t,i.animation,r)||lMe;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return e.run(()=>o()),(0,Ci.of)(void 0).pipe(function oMe(e){return t=>new T.y(n=>t.subscribe({next:o=>e.run(()=>n.next(o)),error:o=>e.run(()=>n.error(o)),complete:()=>e.run(()=>n.complete())}))}(e));const a=new M.xQ,l=new M.xQ,c=a.pipe((0,zbe.l)(!0));kw.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});const d=function aMe(e){const{transitionDelay:t,transitionDuration:n}=window.getComputedStyle(e);return 1e3*(parseFloat(t)+parseFloat(n))}(t);return e.runOutsideAngular(()=>{const h=(0,Od.R)(t,"transitionend").pipe((0,Ua.R)(c),(0,xl.h)(({target:p})=>p===t)),u=(0,HW.H)(d+cMe).pipe((0,Ua.R)(c));(0,GW.S3)(u,h,l).pipe((0,Ua.R)(c)).subscribe(()=>{kw.delete(t),e.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};let p2=(()=>{class e{constructor(){this.animation=lq.animation}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),fq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[sc]}),e})(),mq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[sc]}),e})(),yq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[sc]}),e})(),_q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({}),e})();var Va=(()=>{return(e=Va||(Va={}))[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown",Va;var e})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const xq=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function wq(e){const t=Array.from(e.querySelectorAll(xq)).filter(n=>-1!==n.tabIndex);return[t[0],t[t.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Tq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[sc,rG]}),e})(),xk=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=xn({type:e,selectors:[["",8,"navbar"]]}),e})(),Rq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({}),e})();class Q0{constructor(t,n,i){this.nodes=t,this.viewRef=n,this.componentRef=i}}let QMe=(()=>{class e{constructor(n,i){this._el=n,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Ml.q)(1)).subscribe(()=>{lc(this._zone,this._el.nativeElement,(n,i)=>{i&&Oy(n),n.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return lc(this._zone,this._el.nativeElement,({classList:n})=>n.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return e.\u0275fac=function(n){return new(n||e)(Ne(Ts),Ne(_s))},e.\u0275cmp=qi({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(n,i){2&n&&(Am("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),mo("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(n,i){},encapsulation:2}),e})();class mf{close(t){}dismiss(t){}}class JMe{constructor(t,n,i,r){this._windowCmptRef=t,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new M.xQ,this._dismissed=new M.xQ,this._hidden=new M.xQ,t.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,Ua.R)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,Ua.R)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const n=this._beforeDismiss();!function aq(e){return e&&e.then}(n)?!1!==n&&this._dismiss(t):n.then(i=>{!1!==i&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Ci.of)(void 0);t.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),(0,a2.$R)(t,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var cc=(()=>{return(e=cc||(cc={}))[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",cc;var e})();let eCe=(()=>{class e{constructor(n,i,r){this._document=n,this._elRef=i,this._zone=r,this._closed$=new M.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new cr,this.shown=new M.xQ,this.hidden=new M.xQ}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":fk(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(n){this.dismissEvent.emit(n)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Ml.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:n}=this._elRef,i={animation:this.animation,runningTransition:"stop"},r=lc(this._zone,n,()=>n.classList.remove("show"),i),s=lc(this._zone,this._dialogEl.nativeElement,()=>{},i),o=(0,a2.$R)(r,s);return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const n={animation:this.animation,runningTransition:"continue"},i=lc(this._zone,this._elRef.nativeElement,(s,o)=>{o&&Oy(s),s.classList.add("show")},n),r=lc(this._zone,this._dialogEl.nativeElement,()=>{},n);(0,a2.$R)(i,r).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:n}=this._elRef;this._zone.runOutsideAngular(()=>{(0,Od.R)(n,"keydown").pipe((0,Ua.R)(this._closed$),(0,xl.h)(r=>r.which===Va.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(cc.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;(0,Od.R)(this._dialogEl.nativeElement,"mousedown").pipe((0,Ua.R)(this._closed$),(0,xr.b)(()=>i=!1),(0,wl.w)(()=>(0,Od.R)(n,"mouseup").pipe((0,Ua.R)(this._closed$),(0,Ml.q)(1))),(0,xl.h)(({target:r})=>n===r)).subscribe(()=>{i=!0}),(0,Od.R)(n,"click").pipe((0,Ua.R)(this._closed$)).subscribe(({target:r})=>{n===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(cc.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:n}=this._elRef;if(!n.contains(document.activeElement)){const i=n.querySelector("[ngbAutofocus]"),r=wq(n)[0];(i||r||n).focus()}}_restoreFocus(){const n=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&n.contains(i)?i:n,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&lc(this._zone,this._elRef.nativeElement,({classList:n})=>(n.add("modal-static"),()=>n.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return e.\u0275fac=function(n){return new(n||e)(Ne(Js),Ne(Ts),Ne(_s))},e.\u0275cmp=qi({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(n,i){if(1&n&&bl(fwe,7),2&n){let r;Yr(r=$r())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(n,i){2&n&&(Xs("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),Am("modal d-block"+(i.windowClass?" "+i.windowClass:"")),mo("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Kxe,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(n,i){1&n&&(function k8(e){const t=ln()[_o][Co];if(!t.projection){const i=t.projection=vx(e?e.length:1,null),r=i.slice();let s=t.child;for(;null!==s;){const o=e?tde(s,e):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}(),C(0,"div",0,1)(2,"div",2),function N8(e,t=0,n){const i=ln(),r=Dr(),s=U1(r,Ps+e,16,null,n||null);null===s.projection&&(s.projection=t),Yp(),32!=(32&s.flags)&&function fae(e,t,n){l6(t[nr],0,t,n,JU(e,n,t),i6(n.parent||t[Co],n,t))}(r,i,s)}(3),E()()),2&n&&Am("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),e})(),tCe=(()=>{class e{constructor(n){this._document=n}hide(){const n=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:s,paddingRight:o}=r;if(n>0){const a=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${a+n}px`}return r.overflow="hidden",()=>{n>0&&(r.paddingRight=o),r.overflow=s}}}return e.\u0275fac=function(n){return new(n||e)(Jt(Js))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),nCe=(()=>{class e{constructor(n,i,r,s,o,a){this._applicationRef=n,this._injector=i,this._document=r,this._scrollBar=s,this._rendererFactory=o,this._ngZone=a,this._activeWindowCmptHasChanged=new M.xQ,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new cr,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const l=this._windowCmpts[this._windowCmpts.length-1];((e,t,n,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=(0,Od.R)(t,"focusin").pipe((0,Ua.R)(n),(0,Zi.U)(s=>s.target));(0,Od.R)(t,"keydown").pipe((0,Ua.R)(n),(0,xl.h)(s=>s.which===Va.Tab),(0,nk.M)(r)).subscribe(([s,o])=>{const[a,l]=wq(t);(o===a||o===t)&&s.shiftKey&&(l.focus(),s.preventDefault()),o===l&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&(0,Od.R)(t,"click").pipe((0,Ua.R)(n),(0,nk.M)(r),(0,Zi.U)(s=>s[1])).subscribe(s=>s.focus())})})(0,l.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(l.location.nativeElement)}})}_restoreScrollBar(){const n=this._scrollBarRestoreFn;n&&(this._scrollBarRestoreFn=null,n())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(n,i,r){const s=r.container instanceof HTMLElement?r.container:Y0(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null);if(!s)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const a=new mf,l=this._getContentRef(r.injector||n,i,a,r);let c=!1!==r.backdrop?this._attachBackdrop(s):void 0,d=this._attachWindowComponent(s,l.nodes),h=new JMe(d,l,c,r.beforeDismiss);return this._registerModalRef(h),this._registerWindowCmpt(d),h.hidden.pipe((0,Ml.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=u=>{h.close(u)},a.dismiss=u=>{h.dismiss(u)},this._applyWindowOptions(d.instance,r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),c&&c.instance&&(this._applyBackdropOptions(c.instance,r),c.changeDetectorRef.detectChanges()),d.changeDetectorRef.detectChanges(),h}get activeInstances(){return this._activeInstances}dismissAll(n){this._modalRefs.forEach(i=>i.dismiss(n))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(n){let i=Q3(QMe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),n.appendChild(i.location.nativeElement),i}_attachWindowComponent(n,i){let r=Q3(eCe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),n.appendChild(r.location.nativeElement),r}_applyWindowOptions(n,i){this._windowAttributes.forEach(r=>{Y0(i[r])&&(n[r]=i[r])})}_applyBackdropOptions(n,i){this._backdropAttributes.forEach(r=>{Y0(i[r])&&(n[r]=i[r])})}_getContentRef(n,i,r,s){return i?i instanceof So?this._createFromTemplateRef(i,r):fk(i)?this._createFromString(i):this._createFromComponent(n,i,r,s):new Q0([])}_createFromTemplateRef(n,i){const s=n.createEmbeddedView({$implicit:i,close(o){i.close(o)},dismiss(o){i.dismiss(o)}});return this._applicationRef.attachView(s),new Q0([s.rootNodes],s)}_createFromString(n){const i=this._document.createTextNode(`${n}`);return new Q0([[i]])}_createFromComponent(n,i,r,s){const o=Rl.create({providers:[{provide:mf,useValue:r}],parent:n}),a=Q3(i,{environmentInjector:this._applicationRef.injector,elementInjector:o}),l=a.location.nativeElement;return s.scrollable&&l.classList.add("component-host-scrollable"),this._applicationRef.attachView(a.hostView),new Q0([[l]],a.hostView,a)}_setAriaHidden(n){const i=n.parentElement;i&&n!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==n&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((n,i)=>{n?i.setAttribute("aria-hidden",n):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(n){const i=()=>{const r=this._modalRefs.indexOf(n);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(n),this._activeInstances.emit(this._modalRefs),n.result.then(i,i)}_registerWindowCmpt(n){this._windowCmpts.push(n),this._activeWindowCmptHasChanged.next(),n.onDestroy(()=>{const i=this._windowCmpts.indexOf(n);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return e.\u0275fac=function(n){return new(n||e)(Jt(T0),Jt(Rl),Jt(Js),Jt(tCe),Jt(B1),Jt(_s))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),iCe=(()=>{class e{constructor(n){this._ngbConfig=n,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(n){this._animation=n}}return e.\u0275fac=function(n){return new(n||e)(Jt(p2))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),J0=(()=>{class e{constructor(n,i,r){this._injector=n,this._modalStack=i,this._config=r}open(n,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,n,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(n){this._modalStack.dismissAll(n)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return e.\u0275fac=function(n){return new(n||e)(Jt(Rl),Jt(nCe),Jt(iCe))},e.\u0275prov=Gt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),kq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({providers:[J0]}),e})(),Bq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[sc]}),e})(),qq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[sc]}),e})(),Yq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[sc]}),e})(),$q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[sc]}),e})(),Kq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[sc]}),e})(),Zq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[sc]}),e})(),Qq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[sc]}),e})(),Jq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({}),e})();new ui("live announcer delay",{providedIn:"root",factory:function gCe(){return 100}});let eX=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[sc]}),e})(),tX=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({}),e})();const vCe=[fq,mq,yq,_q,Tq,Rq,kq,Bq,tX,qq,Yq,$q,Kq,Zq,Qq,Jq,eX];let yCe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Kn({imports:[vCe,fq,mq,yq,_q,Tq,Rq,kq,Bq,tX,qq,Yq,$q,Kq,Zq,Qq,Jq,eX]}),e})(),Pk=(()=>{const t=class{constructor(i){this.http=i,this.getTestimonialData=r=>this.http.post(en_backendUrl+"/api/home/viewtestimonial",r).pipe((0,us.K)(o=>(0,bs._)(o))),this.getAlltestimonial=r=>this.http.post(en_backendUrl+"/api/home/alltestimonial",r).pipe((0,us.K)(o=>(0,bs._)(o))),this.getMatchDetails=r=>this.http.post(en_backendUrl+"/api/match/frontview",r).pipe((0,us.K)(o=>(0,bs._)(o)))}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Jt(ac))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var xo=_(5861);const _Ce=0,nX=1,bCe=2,iX=1,xCe=2,gf=3,Qm=0,Hc=1,vf=2,Jm=0,Ty=1,rX=2,sX=3,oX=4,wCe=5,ev=100,MCe=101,CCe=102,PCe=103,SCe=104,ECe=200,OCe=201,ACe=202,TCe=203,Ek=204,Ok=205,DCe=206,ICe=207,RCe=208,kCe=209,NCe=210,LCe=211,FCe=212,BCe=213,zCe=214,Ak=0,Tk=1,Dk=2,Dy=3,Ik=4,Rk=5,kk=6,Nk=7,x2=0,UCe=1,VCe=2,eg=0,jCe=1,HCe=2,GCe=3,WCe=4,qCe=5,XCe=6,YCe=7,tg=301,tv=302,w2=303,M2=304,Bw=306,C2=1e3,su=1001,P2=1002,Fl=1003,lX=1004,zw=1005,sl=1006,S2=1007,yf=1008,_f=1009,cX=1010,dX=1011,Uw=1012,Fk=1013,ng=1014,Id=1015,Vw=1016,Bk=1017,zk=1018,Iy=1020,hX=35902,uX=1021,pX=1022,Gc=1023,fX=1024,mX=1025,Ry=1026,ky=1027,Uk=1028,E2=1029,gX=1030,Vk=1031,jk=1033,O2=33776,A2=33777,T2=33778,D2=33779,Hk=35840,Gk=35841,Wk=35842,qk=35843,Xk=36196,Yk=37492,$k=37496,Kk=37808,Zk=37809,Qk=37810,Jk=37811,eN=37812,tN=37813,nN=37814,iN=37815,rN=37816,sN=37817,oN=37818,aN=37819,lN=37820,cN=37821,I2=36492,dN=36494,hN=36495,vX=36283,uN=36284,pN=36285,fN=36286,ePe=3201,nv=0,tPe=1,ig="",Rd="srgb",Fy="srgb-linear",N2="linear",$s="srgb",By=7680,nPe=512,iPe=513,rPe=514,bX=515,sPe=516,oPe=517,aPe=518,lPe=519,xX="300 es",bf=2e3;class zy{addEventListener(t,n){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(n)&&i[t].push(n)}hasEventListener(t,n){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(n)}removeEventListener(t,n){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const s=r.indexOf(n);-1!==s&&r.splice(s,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const i=this._listeners[t.type];if(void 0!==i){t.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}}const Bl=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],iv=Math.PI/180,Uy=180/Math.PI;function kd(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Bl[255&e]+Bl[e>>8&255]+Bl[e>>16&255]+Bl[e>>24&255]+"-"+Bl[255&t]+Bl[t>>8&255]+"-"+Bl[t>>16&15|64]+Bl[t>>24&255]+"-"+Bl[63&n|128]+Bl[n>>8&255]+"-"+Bl[n>>16&255]+Bl[n>>24&255]+Bl[255&i]+Bl[i>>8&255]+Bl[i>>16&255]+Bl[i>>24&255]).toLowerCase()}function Lo(e,t,n){return Math.max(t,Math.min(n,e))}function jw(e,t,n){return(1-n)*e+n*t}function dc(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Sr(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}class bn{constructor(t=0,n=0){bn.prototype.isVector2=!0,this.x=t,this.y=n}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,n){return this.x=t,this.y=n,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const n=this.x,i=this.y,r=t.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this}clampLength(t,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===n)return Math.PI/2;const i=this.dot(t)/n;return Math.acos(Lo(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,i=this.y-t.y;return n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this}lerpVectors(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this}rotateAround(t,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-t.x,o=this.y-t.y;return this.x=s*i-o*r+t.x,this.y=s*r+o*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Er{constructor(t,n,i,r,s,o,a,l,c){Er.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,n,i,r,s,o,a,l,c)}set(t,n,i,r,s,o,a,l,c){const d=this.elements;return d[0]=t,d[1]=r,d[2]=a,d[3]=n,d[4]=s,d[5]=l,d[6]=i,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const n=this.elements,i=t.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(t,n,i){return t.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const n=t.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const i=t.elements,r=n.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],d=i[4],h=i[7],u=i[2],p=i[5],m=i[8],v=r[0],g=r[3],b=r[6],x=r[1],w=r[4],P=r[7],A=r[2],D=r[5],R=r[8];return s[0]=o*v+a*x+l*A,s[3]=o*g+a*w+l*D,s[6]=o*b+a*P+l*R,s[1]=c*v+d*x+h*A,s[4]=c*g+d*w+h*D,s[7]=c*b+d*P+h*R,s[2]=u*v+p*x+m*A,s[5]=u*g+p*w+m*D,s[8]=u*b+p*P+m*R,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=t,n[4]*=t,n[7]*=t,n[2]*=t,n[5]*=t,n[8]*=t,this}determinant(){const t=this.elements,n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8];return n*o*d-n*a*c-i*s*d+i*a*l+r*s*c-r*o*l}invert(){const t=this.elements,n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],h=d*o-a*c,u=a*l-d*s,p=c*s-o*l,m=n*h+i*u+r*p;if(0===m)return this.set(0,0,0,0,0,0,0,0,0);const v=1/m;return t[0]=h*v,t[1]=(r*c-d*i)*v,t[2]=(a*i-r*o)*v,t[3]=u*v,t[4]=(d*n-r*l)*v,t[5]=(r*s-a*n)*v,t[6]=p*v,t[7]=(i*l-c*n)*v,t[8]=(o*n-i*s)*v,this}transpose(){let t;const n=this.elements;return t=n[1],n[1]=n[3],n[3]=t,t=n[2],n[2]=n[6],n[6]=t,t=n[5],n[5]=n[7],n[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const n=this.elements;return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8],this}setUvTransform(t,n,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+t,-r*c,r*l,-r*(-c*o+l*a)+a+n,0,0,1),this}scale(t,n){return this.premultiply(_N.makeScale(t,n)),this}rotate(t){return this.premultiply(_N.makeRotation(-t)),this}translate(t,n){return this.premultiply(_N.makeTranslation(t,n)),this}makeTranslation(t,n){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,n,0,0,1),this}makeRotation(t){const n=Math.cos(t),i=Math.sin(t);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(t,n){return this.set(t,0,0,0,n,0,0,0,1),this}equals(t){const n=this.elements,i=t.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(t,n=0){for(let i=0;i<9;i++)this.elements[i]=t[i+n];return this}toArray(t=[],n=0){const i=this.elements;return t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7],t[n+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const _N=new Er;function MX(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}function Hw(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function SPe(){const e=Hw("canvas");return e.style.display="block",e}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const CX={};function Gw(e){e in CX||(CX[e]=!0,console.warn(e))}const ps={enabled:!0,workingColorSpace:Fy,spaces:{},convert:function(e,t,n){return!1===this.enabled||t===n||!t||!n||(this.spaces[t].transfer===$s&&(e.r=xf(e.r),e.g=xf(e.g),e.b=xf(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===$s&&(e.r=jy(e.r),e.g=jy(e.g),e.b=jy(e.b))),e},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===ig?N2:this.spaces[e].transfer},getLuminanceCoefficients:function(e,t=this.workingColorSpace){return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(e=this.workingColorSpace){return this.spaces[e].workingColorSpaceConfig.unpackColorSpace}};function xf(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function jy(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const PX=[.64,.33,.3,.6,.15,.06],SX=[.2126,.7152,.0722],EX=[.3127,.329],OX=(new Er).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),AX=(new Er).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);let Hy;ps.define({[Fy]:{primaries:PX,whitePoint:EX,transfer:N2,toXYZ:OX,fromXYZ:AX,luminanceCoefficients:SX,workingColorSpaceConfig:{unpackColorSpace:Rd},outputColorSpaceConfig:{drawingBufferColorSpace:Rd}},[Rd]:{primaries:PX,whitePoint:EX,transfer:$s,toXYZ:OX,fromXYZ:AX,luminanceCoefficients:SX,outputColorSpaceConfig:{drawingBufferColorSpace:Rd}}});class TPe{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{void 0===Hy&&(Hy=Hw("canvas")),Hy.width=t.width,Hy.height=t.height;const i=Hy.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),n=Hy}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const n=Hw("canvas");n.width=t.width,n.height=t.height;const i=n.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const r=i.getImageData(0,0,t.width,t.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*xf(s[o]/255);return i.putImageData(r,0,0),n}if(t.data){const n=t.data.slice(0);for(let i=0;i<n.length;i++)n[i]=n instanceof Uint8Array||n instanceof Uint8ClampedArray?Math.floor(255*xf(n[i]/255)):xf(n[i]);return{data:n,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let DPe=0;class Gy{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:DPe++}),this.uuid=kd(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const n=void 0===t||"string"==typeof t;if(!n&&void 0!==t.images[this.uuid])return t.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(bN(r[o].isDataTexture?r[o].image:r[o]))}else s=bN(r);i.url=s}return n||(t.images[this.uuid]=i),i}}function bN(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?TPe.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let IPe=0,wf=(()=>{class e extends zy{constructor(n=e.DEFAULT_IMAGE,i=e.DEFAULT_MAPPING,r=su,s=su,o=sl,a=yf,l=Gc,c=_f,d=e.DEFAULT_ANISOTROPY,h=ig){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:IPe++}),this.uuid=kd(),this.name="",this.source=new Gy(n),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new bn(0,0),this.repeat=new bn(1,1),this.center=new bn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Er,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(n=null){this.source.data=n}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(n){return this.name=n.name,this.source=n.source,this.mipmaps=n.mipmaps.slice(0),this.mapping=n.mapping,this.channel=n.channel,this.wrapS=n.wrapS,this.wrapT=n.wrapT,this.magFilter=n.magFilter,this.minFilter=n.minFilter,this.anisotropy=n.anisotropy,this.format=n.format,this.internalFormat=n.internalFormat,this.type=n.type,this.offset.copy(n.offset),this.repeat.copy(n.repeat),this.center.copy(n.center),this.rotation=n.rotation,this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrix.copy(n.matrix),this.generateMipmaps=n.generateMipmaps,this.premultiplyAlpha=n.premultiplyAlpha,this.flipY=n.flipY,this.unpackAlignment=n.unpackAlignment,this.colorSpace=n.colorSpace,this.userData=JSON.parse(JSON.stringify(n.userData)),this.needsUpdate=!0,this}toJSON(n){const i=void 0===n||"string"==typeof n;if(!i&&void 0!==n.textures[this.uuid])return n.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(n).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(n.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(n){if(300!==this.mapping)return n;if(n.applyMatrix3(this.matrix),n.x<0||n.x>1)switch(this.wrapS){case C2:n.x=n.x-Math.floor(n.x);break;case su:n.x=n.x<0?0:1;break;case P2:n.x=1===Math.abs(Math.floor(n.x)%2)?Math.ceil(n.x)-n.x:n.x-Math.floor(n.x)}if(n.y<0||n.y>1)switch(this.wrapT){case C2:n.y=n.y-Math.floor(n.y);break;case su:n.y=n.y<0?0:1;break;case P2:n.y=1===Math.abs(Math.floor(n.y)%2)?Math.ceil(n.y)-n.y:n.y-Math.floor(n.y)}return this.flipY&&(n.y=1-n.y),n}set needsUpdate(n){!0===n&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(n){!0===n&&this.pmremVersion++}}return e.DEFAULT_IMAGE=null,e.DEFAULT_MAPPING=300,e.DEFAULT_ANISOTROPY=1,e})();class xs{constructor(t=0,n=0,i=0,r=1){xs.prototype.isVector4=!0,this.x=t,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,n,i,r){return this.x=t,this.y=n,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this.w+=t.w*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const n=this.x,i=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*s,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const n=Math.sqrt(1-t.w*t.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/n,this.y=t.y/n,this.z=t.z/n),this}setAxisAngleFromRotationMatrix(t){let n,i,r,s;const l=t.elements,c=l[0],d=l[4],h=l[8],u=l[1],p=l[5],m=l[9],v=l[2],g=l[6],b=l[10];if(Math.abs(d-u)<.01&&Math.abs(h-v)<.01&&Math.abs(m-g)<.01){if(Math.abs(d+u)<.1&&Math.abs(h+v)<.1&&Math.abs(m+g)<.1&&Math.abs(c+p+b-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const w=(c+1)/2,P=(p+1)/2,A=(b+1)/2,D=(d+u)/4,R=(h+v)/4,N=(m+g)/4;return w>P&&w>A?w<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(w),r=D/i,s=R/i):P>A?P<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(P),i=D/r,s=N/r):A<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(A),i=R/s,r=N/s),this.set(i,r,s,n),this}let x=Math.sqrt((g-m)*(g-m)+(h-v)*(h-v)+(u-d)*(u-d));return Math.abs(x)<.001&&(x=1),this.x=(g-m)/x,this.y=(h-v)/x,this.z=(u-d)/x,this.w=Math.acos((c+p+b-1)/2),this}setFromMatrixPosition(t){const n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this.w=Math.max(t.w,Math.min(n.w,this.w)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this.w=Math.max(t,Math.min(n,this.w)),this}clampLength(t,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this.w+=(t.w-this.w)*n,this}lerpVectors(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this.z=t.z+(n.z-t.z)*i,this.w=t.w+(n.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this.w=t[n+3],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t[n+3]=this.w,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this.w=t.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RPe extends zy{constructor(t=1,n=1,i={}){super(),this.isRenderTarget=!0,this.width=t,this.height=n,this.depth=1,this.scissor=new xs(0,0,t,n),this.scissorTest=!1,this.viewport=new xs(0,0,t,n);const r={width:t,height:n,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:sl,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new wf(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,n,i=1){if(this.width!==t||this.height!==n||this.depth!==i){this.width=t,this.height=n,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=t,this.textures[r].image.height=n,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,t,n),this.scissor.set(0,0,t,n)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let i=0,r=t.textures.length;i<r;i++)this.textures[i]=t.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const n=Object.assign({},t.texture.image);return this.texture.source=new Gy(n),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class rv extends RPe{constructor(t=1,n=1,i={}){super(t,n,i),this.isWebGLRenderTarget=!0}}class xN extends wf{constructor(t=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:n,height:i,depth:r},this.magFilter=Fl,this.minFilter=Fl,this.wrapR=su,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class TX extends wf{constructor(t=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:n,height:i,depth:r},this.magFilter=Fl,this.minFilter=Fl,this.wrapR=su,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Nd{constructor(t=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=t,this._y=n,this._z=i,this._w=r}static slerpFlat(t,n,i,r,s,o,a){let l=i[r+0],c=i[r+1],d=i[r+2],h=i[r+3];const u=s[o+0],p=s[o+1],m=s[o+2],v=s[o+3];if(0===a)return t[n+0]=l,t[n+1]=c,t[n+2]=d,void(t[n+3]=h);if(1===a)return t[n+0]=u,t[n+1]=p,t[n+2]=m,void(t[n+3]=v);if(h!==v||l!==u||c!==p||d!==m){let g=1-a;const b=l*u+c*p+d*m+h*v,x=b>=0?1:-1,w=1-b*b;if(w>Number.EPSILON){const A=Math.sqrt(w),D=Math.atan2(A,b*x);g=Math.sin(g*D)/A,a=Math.sin(a*D)/A}const P=a*x;if(l=l*g+u*P,c=c*g+p*P,d=d*g+m*P,h=h*g+v*P,g===1-a){const A=1/Math.sqrt(l*l+c*c+d*d+h*h);l*=A,c*=A,d*=A,h*=A}}t[n]=l,t[n+1]=c,t[n+2]=d,t[n+3]=h}static multiplyQuaternionsFlat(t,n,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],d=i[r+3],h=s[o],u=s[o+1],p=s[o+2],m=s[o+3];return t[n]=a*m+d*h+l*p-c*u,t[n+1]=l*m+d*u+c*h-a*p,t[n+2]=c*m+d*p+a*u-l*h,t[n+3]=d*m-a*h-l*u-c*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,n,i,r){return this._x=t,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,n=!0){const i=t._x,r=t._y,s=t._z,o=t._order,a=Math.cos,l=Math.sin,c=a(i/2),d=a(r/2),h=a(s/2),u=l(i/2),p=l(r/2),m=l(s/2);switch(o){case"XYZ":this._x=u*d*h+c*p*m,this._y=c*p*h-u*d*m,this._z=c*d*m+u*p*h,this._w=c*d*h-u*p*m;break;case"YXZ":this._x=u*d*h+c*p*m,this._y=c*p*h-u*d*m,this._z=c*d*m-u*p*h,this._w=c*d*h+u*p*m;break;case"ZXY":this._x=u*d*h-c*p*m,this._y=c*p*h+u*d*m,this._z=c*d*m+u*p*h,this._w=c*d*h-u*p*m;break;case"ZYX":this._x=u*d*h-c*p*m,this._y=c*p*h+u*d*m,this._z=c*d*m-u*p*h,this._w=c*d*h+u*p*m;break;case"YZX":this._x=u*d*h+c*p*m,this._y=c*p*h+u*d*m,this._z=c*d*m-u*p*h,this._w=c*d*h-u*p*m;break;case"XZY":this._x=u*d*h-c*p*m,this._y=c*p*h-u*d*m,this._z=c*d*m+u*p*h,this._w=c*d*h+u*p*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===n&&this._onChangeCallback(),this}setFromAxisAngle(t,n){const i=n/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const n=t.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],d=n[6],h=n[10],u=i+a+h;if(u>0){const p=.5/Math.sqrt(u+1);this._w=.25/p,this._x=(d-l)*p,this._y=(s-c)*p,this._z=(o-r)*p}else if(i>a&&i>h){const p=2*Math.sqrt(1+i-a-h);this._w=(d-l)/p,this._x=.25*p,this._y=(r+o)/p,this._z=(s+c)/p}else if(a>h){const p=2*Math.sqrt(1+a-i-h);this._w=(s-c)/p,this._x=(r+o)/p,this._y=.25*p,this._z=(l+d)/p}else{const p=2*Math.sqrt(1+h-i-a);this._w=(o-r)/p,this._x=(s+c)/p,this._y=(l+d)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(t,n){let i=t.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*n.z-t.z*n.y,this._y=t.z*n.x-t.x*n.z,this._z=t.x*n.y-t.y*n.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Lo(this.dot(t),-1,1)))}rotateTowards(t,n){const i=this.angleTo(t);if(0===i)return this;const r=Math.min(1,n/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,n){const i=t._x,r=t._y,s=t._z,o=t._w,a=n._x,l=n._y,c=n._z,d=n._w;return this._x=i*d+o*a+r*c-s*l,this._y=r*d+o*l+s*a-i*c,this._z=s*d+o*c+i*l-r*a,this._w=o*d-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(t,n){if(0===n)return this;if(1===n)return this.copy(t);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*t._w+i*t._x+r*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-n;return this._w=p*o+n*this._w,this._x=p*i+n*this._x,this._y=p*r+n*this._y,this._z=p*s+n*this._z,this.normalize(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),h=Math.sin((1-n)*d)/c,u=Math.sin(n*d)/c;return this._w=o*h+this._w*u,this._x=i*h+this._x*u,this._y=r*h+this._y*u,this._z=s*h+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,n,i){return this.copy(t).slerp(n,i)}random(){const t=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(t),r*Math.cos(t),s*Math.sin(n),s*Math.cos(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,n=0){return this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t}fromBufferAttribute(t,n){return this._x=t.getX(n),this._y=t.getY(n),this._z=t.getZ(n),this._w=t.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class qe{constructor(t=0,n=0,i=0){qe.prototype.isVector3=!0,this.x=t,this.y=n,this.z=i}set(t,n,i){return void 0===i&&(i=this.z),this.x=t,this.y=n,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this}applyEuler(t){return this.applyQuaternion(DX.setFromEuler(t))}applyAxisAngle(t,n){return this.applyQuaternion(DX.setFromAxisAngle(t,n))}applyMatrix3(t){const n=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const n=this.x,i=this.y,r=this.z,s=t.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(t){const n=this.x,i=this.y,r=this.z,s=t.x,o=t.y,a=t.z,l=t.w,c=2*(o*r-a*i),d=2*(a*n-s*r),h=2*(s*i-o*n);return this.x=n+l*c+o*h-a*d,this.y=i+l*d+a*c-s*h,this.z=r+l*h+s*d-o*c,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const n=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this}clampLength(t,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this}lerpVectors(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this.z=t.z+(n.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,n){const i=t.x,r=t.y,s=t.z,o=n.x,a=n.y,l=n.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(t){const n=t.lengthSq();if(0===n)return this.set(0,0,0);const i=t.dot(this)/n;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return wN.copy(this).projectOnVector(t),this.sub(wN)}reflect(t){return this.sub(wN.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===n)return Math.PI/2;const i=this.dot(t)/n;return Math.acos(Lo(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return n*n+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,n,i){const r=Math.sin(n)*t;return this.x=r*Math.sin(i),this.y=Math.cos(n)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,n,i){return this.x=t*Math.sin(n),this.y=i,this.z=t*Math.cos(n),this}setFromMatrixPosition(t){const n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(t){const n=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(t,n){return this.fromArray(t.elements,4*n)}setFromMatrix3Column(t,n){return this.fromArray(t.elements,3*n)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,n=2*Math.random()-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(t),this.y=n,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const wN=new qe,DX=new Nd;class Wc{constructor(t=new qe(1/0,1/0,1/0),n=new qe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=n}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromArray(t){this.makeEmpty();for(let n=0,i=t.length;n<i;n+=3)this.expandByPoint(ou.fromArray(t,n));return this}setFromBufferAttribute(t){this.makeEmpty();for(let n=0,i=t.count;n<i;n++)this.expandByPoint(ou.fromBufferAttribute(t,n));return this}setFromPoints(t){this.makeEmpty();for(let n=0,i=t.length;n<i;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const i=ou.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,n=!1){return this.makeEmpty(),this.expandByObject(t,n)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,n=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(void 0!==i){const s=i.getAttribute("position");if(!0===n&&void 0!==s&&!0!==t.isInstancedMesh)for(let o=0,a=s.count;o<a;o++)!0===t.isMesh?t.getVertexPosition(o,ou):ou.fromBufferAttribute(s,o),ou.applyMatrix4(t.matrixWorld),this.expandByPoint(ou);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),B2.copy(t.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),B2.copy(i.boundingBox)),B2.applyMatrix4(t.matrixWorld),this.union(B2)}const r=t.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],n);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,n){return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,ou),ou.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let n,i;return t.normal.x>0?(n=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(n=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(n+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(n+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(n+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(n+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),n<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Ww),z2.subVectors(this.max,Ww),Wy.subVectors(t.a,Ww),qy.subVectors(t.b,Ww),Xy.subVectors(t.c,Ww),rg.subVectors(qy,Wy),sg.subVectors(Xy,qy),sv.subVectors(Wy,Xy);let n=[0,-rg.z,rg.y,0,-sg.z,sg.y,0,-sv.z,sv.y,rg.z,0,-rg.x,sg.z,0,-sg.x,sv.z,0,-sv.x,-rg.y,rg.x,0,-sg.y,sg.x,0,-sv.y,sv.x,0];return!(!MN(n,Wy,qy,Xy,z2)||(n=[1,0,0,0,1,0,0,0,1],!MN(n,Wy,qy,Xy,z2)))&&(U2.crossVectors(rg,sg),n=[U2.x,U2.y,U2.z],MN(n,Wy,qy,Xy,z2))}clampPoint(t,n){return n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,ou).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(ou).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Mf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Mf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Mf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Mf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Mf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Mf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Mf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Mf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Mf)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Mf=[new qe,new qe,new qe,new qe,new qe,new qe,new qe,new qe],ou=new qe,B2=new Wc,Wy=new qe,qy=new qe,Xy=new qe,rg=new qe,sg=new qe,sv=new qe,Ww=new qe,z2=new qe,U2=new qe,ov=new qe;function MN(e,t,n,i,r){for(let s=0,o=e.length-3;s<=o;s+=3){ov.fromArray(e,s);const a=r.x*Math.abs(ov.x)+r.y*Math.abs(ov.y)+r.z*Math.abs(ov.z),l=t.dot(ov),c=n.dot(ov),d=i.dot(ov);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const kPe=new Wc,qw=new qe,CN=new qe;class hc{constructor(t=new qe,n=-1){this.isSphere=!0,this.center=t,this.radius=n}set(t,n){return this.center.copy(t),this.radius=n,this}setFromPoints(t,n){const i=this.center;void 0!==n?i.copy(n):kPe.setFromPoints(t).getCenter(i);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const n=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=n*n}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,n){const i=this.center.distanceToSquared(t);return n.copy(t),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;qw.subVectors(t,this.center);const n=qw.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=.5*(i-this.radius);this.center.addScaledVector(qw,r/i),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(CN.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(qw.copy(t.center).add(CN)),this.expandByPoint(qw.copy(t.center).sub(CN))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Cf=new qe,PN=new qe,V2=new qe,og=new qe,SN=new qe,j2=new qe,EN=new qe;class Xw{constructor(t=new qe,n=new qe(0,0,-1)){this.origin=t,this.direction=n}set(t,n){return this.origin.copy(t),this.direction.copy(n),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,n){return n.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Cf)),this}closestPointToPoint(t,n){n.subVectors(t,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const n=Cf.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(Cf.copy(this.origin).addScaledVector(this.direction,n),Cf.distanceToSquared(t))}distanceSqToSegment(t,n,i,r){PN.copy(t).add(n).multiplyScalar(.5),V2.copy(n).sub(t).normalize(),og.copy(this.origin).sub(PN);const s=.5*t.distanceTo(n),o=-this.direction.dot(V2),a=og.dot(this.direction),l=-og.dot(V2),c=og.lengthSq(),d=Math.abs(1-o*o);let h,u,p,m;if(d>0)if(h=o*l-a,u=o*a-l,m=s*d,h>=0)if(u>=-m)if(u<=m){const v=1/d;h*=v,u*=v,p=h*(h+o*u+2*a)+u*(o*h+u+2*l)+c}else u=s,h=Math.max(0,-(o*u+a)),p=-h*h+u*(u+2*l)+c;else u=-s,h=Math.max(0,-(o*u+a)),p=-h*h+u*(u+2*l)+c;else u<=-m?(h=Math.max(0,-(-o*s+a)),u=h>0?-s:Math.min(Math.max(-s,-l),s),p=-h*h+u*(u+2*l)+c):u<=m?(h=0,u=Math.min(Math.max(-s,-l),s),p=u*(u+2*l)+c):(h=Math.max(0,-(o*s+a)),u=h>0?s:Math.min(Math.max(-s,-l),s),p=-h*h+u*(u+2*l)+c);else u=o>0?-s:s,h=Math.max(0,-(o*u+a)),p=-h*h+u*(u+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(PN).addScaledVector(V2,u),p}intersectSphere(t,n){Cf.subVectors(t.center,this.origin);const i=Cf.dot(this.direction),r=Cf.dot(Cf)-i*i,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:this.at(a<0?l:a,n)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const n=t.normal.dot(this.direction);if(0===n)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/n;return i>=0?i:null}intersectPlane(t,n){const i=this.distanceToPlane(t);return null===i?null:this.at(i,n)}intersectsPlane(t){const n=t.distanceToPoint(this.origin);return 0===n||t.normal.dot(this.direction)*n<0}intersectBox(t,n){let i,r,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,h=1/this.direction.z,u=this.origin;return c>=0?(i=(t.min.x-u.x)*c,r=(t.max.x-u.x)*c):(i=(t.max.x-u.x)*c,r=(t.min.x-u.x)*c),d>=0?(s=(t.min.y-u.y)*d,o=(t.max.y-u.y)*d):(s=(t.max.y-u.y)*d,o=(t.min.y-u.y)*d),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(t.min.z-u.z)*h,l=(t.max.z-u.z)*h):(a=(t.max.z-u.z)*h,l=(t.min.z-u.z)*h),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(t){return null!==this.intersectBox(t,Cf)}intersectTriangle(t,n,i,r,s){SN.subVectors(n,t),j2.subVectors(i,t),EN.crossVectors(SN,j2);let a,o=this.direction.dot(EN);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}og.subVectors(this.origin,t);const l=a*this.direction.dot(j2.crossVectors(og,j2));if(l<0)return null;const c=a*this.direction.dot(SN.cross(og));if(c<0||l+c>o)return null;const d=-a*og.dot(EN);return d<0?null:this.at(d/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class rr{constructor(t,n,i,r,s,o,a,l,c,d,h,u,p,m,v,g){rr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,n,i,r,s,o,a,l,c,d,h,u,p,m,v,g)}set(t,n,i,r,s,o,a,l,c,d,h,u,p,m,v,g){const b=this.elements;return b[0]=t,b[4]=n,b[8]=i,b[12]=r,b[1]=s,b[5]=o,b[9]=a,b[13]=l,b[2]=c,b[6]=d,b[10]=h,b[14]=u,b[3]=p,b[7]=m,b[11]=v,b[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new rr).fromArray(this.elements)}copy(t){const n=this.elements,i=t.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(t){const n=this.elements,i=t.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(t){const n=t.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(t,n,i){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,n,i){return this.set(t.x,n.x,i.x,0,t.y,n.y,i.y,0,t.z,n.z,i.z,0,0,0,0,1),this}extractRotation(t){const n=this.elements,i=t.elements,r=1/Yy.setFromMatrixColumn(t,0).length(),s=1/Yy.setFromMatrixColumn(t,1).length(),o=1/Yy.setFromMatrixColumn(t,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(t){const n=this.elements,i=t.x,r=t.y,s=t.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),d=Math.cos(s),h=Math.sin(s);if("XYZ"===t.order){const u=o*d,p=o*h,m=a*d,v=a*h;n[0]=l*d,n[4]=-l*h,n[8]=c,n[1]=p+m*c,n[5]=u-v*c,n[9]=-a*l,n[2]=v-u*c,n[6]=m+p*c,n[10]=o*l}else if("YXZ"===t.order){const u=l*d,p=l*h,m=c*d,v=c*h;n[0]=u+v*a,n[4]=m*a-p,n[8]=o*c,n[1]=o*h,n[5]=o*d,n[9]=-a,n[2]=p*a-m,n[6]=v+u*a,n[10]=o*l}else if("ZXY"===t.order){const u=l*d,p=l*h,m=c*d,v=c*h;n[0]=u-v*a,n[4]=-o*h,n[8]=m+p*a,n[1]=p+m*a,n[5]=o*d,n[9]=v-u*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if("ZYX"===t.order){const u=o*d,p=o*h,m=a*d,v=a*h;n[0]=l*d,n[4]=m*c-p,n[8]=u*c+v,n[1]=l*h,n[5]=v*c+u,n[9]=p*c-m,n[2]=-c,n[6]=a*l,n[10]=o*l}else if("YZX"===t.order){const u=o*l,p=o*c,m=a*l,v=a*c;n[0]=l*d,n[4]=v-u*h,n[8]=m*h+p,n[1]=h,n[5]=o*d,n[9]=-a*d,n[2]=-c*d,n[6]=p*h+m,n[10]=u-v*h}else if("XZY"===t.order){const u=o*l,p=o*c,m=a*l,v=a*c;n[0]=l*d,n[4]=-h,n[8]=c*d,n[1]=u*h+v,n[5]=o*d,n[9]=p*h-m,n[2]=m*h-p,n[6]=a*d,n[10]=v*h+u}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(t){return this.compose(NPe,t,LPe)}lookAt(t,n,i){const r=this.elements;return Ld.subVectors(t,n),0===Ld.lengthSq()&&(Ld.z=1),Ld.normalize(),ag.crossVectors(i,Ld),0===ag.lengthSq()&&(1===Math.abs(i.z)?Ld.x+=1e-4:Ld.z+=1e-4,Ld.normalize(),ag.crossVectors(i,Ld)),ag.normalize(),H2.crossVectors(Ld,ag),r[0]=ag.x,r[4]=H2.x,r[8]=Ld.x,r[1]=ag.y,r[5]=H2.y,r[9]=Ld.y,r[2]=ag.z,r[6]=H2.z,r[10]=Ld.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const i=t.elements,r=n.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],d=i[1],h=i[5],u=i[9],p=i[13],m=i[2],v=i[6],g=i[10],b=i[14],x=i[3],w=i[7],P=i[11],A=i[15],D=r[0],R=r[4],N=r[8],k=r[12],L=r[1],Q=r[5],le=r[9],ae=r[13],he=r[2],xe=r[6],_e=r[10],be=r[14],me=r[3],Te=r[7],Le=r[11],ke=r[15];return s[0]=o*D+a*L+l*he+c*me,s[4]=o*R+a*Q+l*xe+c*Te,s[8]=o*N+a*le+l*_e+c*Le,s[12]=o*k+a*ae+l*be+c*ke,s[1]=d*D+h*L+u*he+p*me,s[5]=d*R+h*Q+u*xe+p*Te,s[9]=d*N+h*le+u*_e+p*Le,s[13]=d*k+h*ae+u*be+p*ke,s[2]=m*D+v*L+g*he+b*me,s[6]=m*R+v*Q+g*xe+b*Te,s[10]=m*N+v*le+g*_e+b*Le,s[14]=m*k+v*ae+g*be+b*ke,s[3]=x*D+w*L+P*he+A*me,s[7]=x*R+w*Q+P*xe+A*Te,s[11]=x*N+w*le+P*_e+A*Le,s[15]=x*k+w*ae+P*be+A*ke,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this}determinant(){const t=this.elements,n=t[0],i=t[4],r=t[8],s=t[12],o=t[1],a=t[5],l=t[9],c=t[13],d=t[2],h=t[6],u=t[10],p=t[14];return t[3]*(+s*l*h-r*c*h-s*a*u+i*c*u+r*a*p-i*l*p)+t[7]*(+n*l*p-n*c*u+s*o*u-r*o*p+r*c*d-s*l*d)+t[11]*(+n*c*h-n*a*p-s*o*h+i*o*p+s*a*d-i*c*d)+t[15]*(-r*a*d-n*l*h+n*a*u+r*o*h-i*o*u+i*l*d)}transpose(){const t=this.elements;let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,this}setPosition(t,n,i){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=n,r[14]=i),this}invert(){const t=this.elements,n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],h=t[9],u=t[10],p=t[11],m=t[12],v=t[13],g=t[14],b=t[15],x=h*g*c-v*u*c+v*l*p-a*g*p-h*l*b+a*u*b,w=m*u*c-d*g*c-m*l*p+o*g*p+d*l*b-o*u*b,P=d*v*c-m*h*c+m*a*p-o*v*p-d*a*b+o*h*b,A=m*h*l-d*v*l-m*a*u+o*v*u+d*a*g-o*h*g,D=n*x+i*w+r*P+s*A;if(0===D)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/D;return t[0]=x*R,t[1]=(v*u*s-h*g*s-v*r*p+i*g*p+h*r*b-i*u*b)*R,t[2]=(a*g*s-v*l*s+v*r*c-i*g*c-a*r*b+i*l*b)*R,t[3]=(h*l*s-a*u*s-h*r*c+i*u*c+a*r*p-i*l*p)*R,t[4]=w*R,t[5]=(d*g*s-m*u*s+m*r*p-n*g*p-d*r*b+n*u*b)*R,t[6]=(m*l*s-o*g*s-m*r*c+n*g*c+o*r*b-n*l*b)*R,t[7]=(o*u*s-d*l*s+d*r*c-n*u*c-o*r*p+n*l*p)*R,t[8]=P*R,t[9]=(m*h*s-d*v*s-m*i*p+n*v*p+d*i*b-n*h*b)*R,t[10]=(o*v*s-m*a*s+m*i*c-n*v*c-o*i*b+n*a*b)*R,t[11]=(d*a*s-o*h*s-d*i*c+n*h*c+o*i*p-n*a*p)*R,t[12]=A*R,t[13]=(d*v*r-m*h*r+m*i*u-n*v*u-d*i*g+n*h*g)*R,t[14]=(m*a*r-o*v*r-m*i*l+n*v*l+o*i*g-n*a*g)*R,t[15]=(o*h*r-d*a*r+d*i*l-n*h*l-o*i*u+n*a*u)*R,this}scale(t){const n=this.elements,i=t.x,r=t.y,s=t.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,n,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(t){const n=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(t){const n=Math.cos(t),i=Math.sin(t);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(t){const n=Math.cos(t),i=Math.sin(t);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,o=t.x,a=t.y,l=t.z,c=s*o,d=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+i,d*l-r*o,0,c*l-r*a,d*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(t,n,i){return this.set(t,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,n,i,r,s,o){return this.set(1,i,s,0,t,1,o,0,n,r,1,0,0,0,0,1),this}compose(t,n,i){const r=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,d=o+o,h=a+a,u=s*c,p=s*d,m=s*h,v=o*d,g=o*h,b=a*h,x=l*c,w=l*d,P=l*h,A=i.x,D=i.y,R=i.z;return r[0]=(1-(v+b))*A,r[1]=(p+P)*A,r[2]=(m-w)*A,r[3]=0,r[4]=(p-P)*D,r[5]=(1-(u+b))*D,r[6]=(g+x)*D,r[7]=0,r[8]=(m+w)*R,r[9]=(g-x)*R,r[10]=(1-(u+v))*R,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,n,i){const r=this.elements;let s=Yy.set(r[0],r[1],r[2]).length();const o=Yy.set(r[4],r[5],r[6]).length(),a=Yy.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],au.copy(this);const c=1/s,d=1/o,h=1/a;return au.elements[0]*=c,au.elements[1]*=c,au.elements[2]*=c,au.elements[4]*=d,au.elements[5]*=d,au.elements[6]*=d,au.elements[8]*=h,au.elements[9]*=h,au.elements[10]*=h,n.setFromRotationMatrix(au),i.x=s,i.y=o,i.z=a,this}makePerspective(t,n,i,r,s,o,a=bf){const l=this.elements,c=2*s/(n-t),d=2*s/(i-r),h=(n+t)/(n-t),u=(i+r)/(i-r);let p,m;if(a===bf)p=-(o+s)/(o-s),m=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);p=-o/(o-s),m=-o*s/(o-s)}return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=d,l[9]=u,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,n,i,r,s,o,a=bf){const l=this.elements,c=1/(n-t),d=1/(i-r),h=1/(o-s),u=(n+t)*c,p=(i+r)*d;let m,v;if(a===bf)m=(o+s)*h,v=-2*h;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);m=s*h,v=-1*h}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-u,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=v,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const n=this.elements,i=t.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(t,n=0){for(let i=0;i<16;i++)this.elements[i]=t[i+n];return this}toArray(t=[],n=0){const i=this.elements;return t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7],t[n+8]=i[8],t[n+9]=i[9],t[n+10]=i[10],t[n+11]=i[11],t[n+12]=i[12],t[n+13]=i[13],t[n+14]=i[14],t[n+15]=i[15],t}}const Yy=new qe,au=new rr,NPe=new qe(0,0,0),LPe=new qe(1,1,1),ag=new qe,H2=new qe,Ld=new qe,IX=new rr,RX=new Nd;let Pf=(()=>{class e{constructor(n=0,i=0,r=0,s=e.DEFAULT_ORDER){this.isEuler=!0,this._x=n,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get order(){return this._order}set order(n){this._order=n,this._onChangeCallback()}set(n,i,r,s=this._order){return this._x=n,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(n){return this._x=n._x,this._y=n._y,this._z=n._z,this._order=n._order,this._onChangeCallback(),this}setFromRotationMatrix(n,i=this._order,r=!0){const s=n.elements,o=s[0],a=s[4],l=s[8],c=s[1],d=s[5],h=s[9],u=s[2],p=s[6],m=s[10];switch(i){case"XYZ":this._y=Math.asin(Lo(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(p,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Lo(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,m),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-u,o),this._z=0);break;case"ZXY":this._x=Math.asin(Lo(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-u,m),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Lo(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(Lo(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,d),this._y=Math.atan2(-u,o)):(this._x=0,this._y=Math.atan2(l,m));break;case"XZY":this._z=Math.asin(-Lo(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(p,d),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(n,i,r){return IX.makeRotationFromQuaternion(n),this.setFromRotationMatrix(IX,i,r)}setFromVector3(n,i=this._order){return this.set(n.x,n.y,n.z,i)}reorder(n){return RX.setFromEuler(this),this.setFromQuaternion(RX,n)}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._order===this._order}fromArray(n){return this._x=n[0],this._y=n[1],this._z=n[2],void 0!==n[3]&&(this._order=n[3]),this._onChangeCallback(),this}toArray(n=[],i=0){return n[i]=this._x,n[i+1]=this._y,n[i+2]=this._z,n[i+3]=this._order,n}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return e.DEFAULT_ORDER="XYZ",e})();class ON{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let FPe=0;const kX=new qe,$y=new Nd,Sf=new rr,G2=new qe,Yw=new qe,BPe=new qe,zPe=new Nd,NX=new qe(1,0,0),LX=new qe(0,1,0),FX=new qe(0,0,1),BX={type:"added"},UPe={type:"removed"},Ky={type:"childadded",child:null},AN={type:"childremoved",child:null};let Fd=(()=>{class e extends zy{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:FPe++}),this.uuid=kd(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=e.DEFAULT_UP.clone();const n=new qe,i=new Pf,r=new Nd,s=new qe(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new rr},normalMatrix:{value:new Er}}),this.matrix=new rr,this.matrixWorld=new rr,this.matrixAutoUpdate=e.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=e.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ON,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(n){return this.quaternion.premultiply(n),this}setRotationFromAxisAngle(n,i){this.quaternion.setFromAxisAngle(n,i)}setRotationFromEuler(n){this.quaternion.setFromEuler(n,!0)}setRotationFromMatrix(n){this.quaternion.setFromRotationMatrix(n)}setRotationFromQuaternion(n){this.quaternion.copy(n)}rotateOnAxis(n,i){return $y.setFromAxisAngle(n,i),this.quaternion.multiply($y),this}rotateOnWorldAxis(n,i){return $y.setFromAxisAngle(n,i),this.quaternion.premultiply($y),this}rotateX(n){return this.rotateOnAxis(NX,n)}rotateY(n){return this.rotateOnAxis(LX,n)}rotateZ(n){return this.rotateOnAxis(FX,n)}translateOnAxis(n,i){return kX.copy(n).applyQuaternion(this.quaternion),this.position.add(kX.multiplyScalar(i)),this}translateX(n){return this.translateOnAxis(NX,n)}translateY(n){return this.translateOnAxis(LX,n)}translateZ(n){return this.translateOnAxis(FX,n)}localToWorld(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(this.matrixWorld)}worldToLocal(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(Sf.copy(this.matrixWorld).invert())}lookAt(n,i,r){n.isVector3?G2.copy(n):G2.set(n,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Yw.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sf.lookAt(Yw,G2,this.up):Sf.lookAt(G2,Yw,this.up),this.quaternion.setFromRotationMatrix(Sf),s&&(Sf.extractRotation(s.matrixWorld),$y.setFromRotationMatrix(Sf),this.quaternion.premultiply($y.invert()))}add(n){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return n===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(n.removeFromParent(),n.parent=this,this.children.push(n),n.dispatchEvent(BX),Ky.child=n,this.dispatchEvent(Ky),Ky.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",n),this)}remove(n){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(n);return-1!==i&&(n.parent=null,this.children.splice(i,1),n.dispatchEvent(UPe),AN.child=n,this.dispatchEvent(AN),AN.child=null),this}removeFromParent(){const n=this.parent;return null!==n&&n.remove(this),this}clear(){return this.remove(...this.children)}attach(n){return this.updateWorldMatrix(!0,!1),Sf.copy(this.matrixWorld).invert(),null!==n.parent&&(n.parent.updateWorldMatrix(!0,!1),Sf.multiply(n.parent.matrixWorld)),n.applyMatrix4(Sf),n.removeFromParent(),n.parent=this,this.children.push(n),n.updateWorldMatrix(!1,!0),n.dispatchEvent(BX),Ky.child=n,this.dispatchEvent(Ky),Ky.child=null,this}getObjectById(n){return this.getObjectByProperty("id",n)}getObjectByName(n){return this.getObjectByProperty("name",n)}getObjectByProperty(n,i){if(this[n]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(n,i);if(void 0!==a)return a}}getObjectsByProperty(n,i,r=[]){this[n]===i&&r.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(n,i,r);return r}getWorldPosition(n){return this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Yw,n,BPe),n}getWorldScale(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Yw,zPe,n),n}getWorldDirection(n){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return n.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(n){n(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(n)}traverseVisible(n){if(!1===this.visible)return;n(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(n)}traverseAncestors(n){const i=this.parent;null!==i&&(n(i),i.traverseAncestors(n))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,n=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(n)}updateWorldMatrix(n,i){const r=this.parent;if(!0===n&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(n){const i=void 0===n||"string"==typeof n,r={};i&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(n)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(n),null!==this._colorsTexture&&(s.colorsTexture=this._colorsTexture.toJSON(n)),null!==this.boundingSphere&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),null!==this.boundingBox&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(n).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(n).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(n.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let d=0,h=c.length;d<h;d++)o(n.shapes,c[d]);else o(n.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(n.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,d=this.material.length;c<d;c++)l.push(o(n.materials,this.material[c]));s.material=l}else s.material=o(n.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(n).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(n.animations,this.animations[l]))}if(i){const l=a(n.geometries),c=a(n.materials),d=a(n.textures),h=a(n.images),u=a(n.shapes),p=a(n.skeletons),m=a(n.animations),v=a(n.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),d.length>0&&(r.textures=d),h.length>0&&(r.images=h),u.length>0&&(r.shapes=u),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=s,r;function a(l){const c=[];for(const d in l){const h=l[d];delete h.metadata,c.push(h)}return c}}clone(n){return(new this.constructor).copy(this,n)}copy(n,i=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldAutoUpdate=n.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.animations=n.animations.slice(),this.userData=JSON.parse(JSON.stringify(n.userData)),!0===i)for(let r=0;r<n.children.length;r++)this.add(n.children[r].clone());return this}}return e.DEFAULT_UP=new qe(0,1,0),e.DEFAULT_MATRIX_AUTO_UPDATE=!0,e.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,e})();const lu=new qe,Ef=new qe,TN=new qe,Of=new qe,Zy=new qe,Qy=new qe,zX=new qe,DN=new qe,IN=new qe,RN=new qe,kN=new xs,NN=new xs,LN=new xs;class Bd{constructor(t=new qe,n=new qe,i=new qe){this.a=t,this.b=n,this.c=i}static getNormal(t,n,i,r){r.subVectors(i,n),lu.subVectors(t,n),r.cross(lu);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,n,i,r,s){lu.subVectors(r,n),Ef.subVectors(i,n),TN.subVectors(t,n);const o=lu.dot(lu),a=lu.dot(Ef),l=lu.dot(TN),c=Ef.dot(Ef),d=Ef.dot(TN),h=o*c-a*a;if(0===h)return s.set(0,0,0),null;const u=1/h,p=(c*l-a*d)*u,m=(o*d-a*l)*u;return s.set(1-p-m,m,p)}static containsPoint(t,n,i,r){return null!==this.getBarycoord(t,n,i,r,Of)&&Of.x>=0&&Of.y>=0&&Of.x+Of.y<=1}static getInterpolation(t,n,i,r,s,o,a,l){return null===this.getBarycoord(t,n,i,r,Of)?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Of.x),l.addScaledVector(o,Of.y),l.addScaledVector(a,Of.z),l)}static getInterpolatedAttribute(t,n,i,r,s,o){return kN.setScalar(0),NN.setScalar(0),LN.setScalar(0),kN.fromBufferAttribute(t,n),NN.fromBufferAttribute(t,i),LN.fromBufferAttribute(t,r),o.setScalar(0),o.addScaledVector(kN,s.x),o.addScaledVector(NN,s.y),o.addScaledVector(LN,s.z),o}static isFrontFacing(t,n,i,r){return lu.subVectors(i,n),Ef.subVectors(t,n),lu.cross(Ef).dot(r)<0}set(t,n,i){return this.a.copy(t),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(t,n,i,r){return this.a.copy(t[n]),this.b.copy(t[i]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,n,i,r){return this.a.fromBufferAttribute(t,n),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return lu.subVectors(this.c,this.b),Ef.subVectors(this.a,this.b),.5*lu.cross(Ef).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Bd.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,n){return Bd.getBarycoord(t,this.a,this.b,this.c,n)}getInterpolation(t,n,i,r,s){return Bd.getInterpolation(t,this.a,this.b,this.c,n,i,r,s)}containsPoint(t){return Bd.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Bd.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,n){const i=this.a,r=this.b,s=this.c;let o,a;Zy.subVectors(r,i),Qy.subVectors(s,i),DN.subVectors(t,i);const l=Zy.dot(DN),c=Qy.dot(DN);if(l<=0&&c<=0)return n.copy(i);IN.subVectors(t,r);const d=Zy.dot(IN),h=Qy.dot(IN);if(d>=0&&h<=d)return n.copy(r);const u=l*h-d*c;if(u<=0&&l>=0&&d<=0)return o=l/(l-d),n.copy(i).addScaledVector(Zy,o);RN.subVectors(t,s);const p=Zy.dot(RN),m=Qy.dot(RN);if(m>=0&&p<=m)return n.copy(s);const v=p*c-l*m;if(v<=0&&c>=0&&m<=0)return a=c/(c-m),n.copy(i).addScaledVector(Qy,a);const g=d*m-p*h;if(g<=0&&h-d>=0&&p-m>=0)return zX.subVectors(s,r),a=(h-d)/(h-d+(p-m)),n.copy(r).addScaledVector(zX,a);const b=1/(g+v+u);return o=v*b,a=u*b,n.copy(i).addScaledVector(Zy,o).addScaledVector(Qy,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const UX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},lg={h:0,s:0,l:0},W2={h:0,s:0,l:0};function FN(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class ci{constructor(t,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,n,i)}set(t,n,i){if(void 0===n&&void 0===i){const r=t;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(t,n,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,n=Rd){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,ps.toWorkingColorSpace(this,n),this}setRGB(t,n,i,r=ps.workingColorSpace){return this.r=t,this.g=n,this.b=i,ps.toWorkingColorSpace(this,r),this}setHSL(t,n,i,r=ps.workingColorSpace){if(t=function yN(e,t){return(e%t+t)%t}(t,1),n=Lo(n,0,1),i=Lo(i,0,1),0===n)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;this.r=FN(o,s,t+1/3),this.g=FN(o,s,t),this.b=FN(o,s,t-1/3)}return ps.toWorkingColorSpace(this,r),this}setStyle(t,n=Rd){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(6===o)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,n);return this}setColorName(t,n=Rd){const i=UX[t.toLowerCase()];return void 0!==i?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=xf(t.r),this.g=xf(t.g),this.b=xf(t.b),this}copyLinearToSRGB(t){return this.r=jy(t.r),this.g=jy(t.g),this.b=jy(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Rd){return ps.fromWorkingColorSpace(zl.copy(this),t),65536*Math.round(Lo(255*zl.r,0,255))+256*Math.round(Lo(255*zl.g,0,255))+Math.round(Lo(255*zl.b,0,255))}getHexString(t=Rd){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,n=ps.workingColorSpace){ps.fromWorkingColorSpace(zl.copy(this),n);const i=zl.r,r=zl.g,s=zl.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=d<=.5?h/(o+a):h/(2-o-a),o){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4}l/=6}return t.h=l,t.s=c,t.l=d,t}getRGB(t,n=ps.workingColorSpace){return ps.fromWorkingColorSpace(zl.copy(this),n),t.r=zl.r,t.g=zl.g,t.b=zl.b,t}getStyle(t=Rd){ps.fromWorkingColorSpace(zl.copy(this),t);const n=zl.r,i=zl.g,r=zl.b;return t!==Rd?`color(${t} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*n)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(t,n,i){return this.getHSL(lg),this.setHSL(lg.h+t,lg.s+n,lg.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,n){return this.r=t.r+n.r,this.g=t.g+n.g,this.b=t.b+n.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,n){return this.r+=(t.r-this.r)*n,this.g+=(t.g-this.g)*n,this.b+=(t.b-this.b)*n,this}lerpColors(t,n,i){return this.r=t.r+(n.r-t.r)*i,this.g=t.g+(n.g-t.g)*i,this.b=t.b+(n.b-t.b)*i,this}lerpHSL(t,n){this.getHSL(lg),t.getHSL(W2);const i=jw(lg.h,W2.h,n),r=jw(lg.s,W2.s,n),s=jw(lg.l,W2.l,n);return this.setHSL(i,r,s),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const n=this.r,i=this.g,r=this.b,s=t.elements;return this.r=s[0]*n+s[3]*i+s[6]*r,this.g=s[1]*n+s[4]*i+s[7]*r,this.b=s[2]*n+s[5]*i+s[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,n=0){return this.r=t[n],this.g=t[n+1],this.b=t[n+2],this}toArray(t=[],n=0){return t[n]=this.r,t[n+1]=this.g,t[n+2]=this.b,t}fromBufferAttribute(t,n){return this.r=t.getX(n),this.g=t.getY(n),this.b=t.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const zl=new ci;ci.NAMES=UX;let VPe=0;class $w extends zy{static get type(){return"Material"}get type(){return this.constructor.type}set type(t){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:VPe++}),this.uuid=kd(),this.name="",this.blending=Ty,this.side=Qm,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Ek,this.blendDst=Ok,this.blendEquation=ev,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ci(0,0,0),this.blendAlpha=0,this.depthFunc=Dy,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=By,this.stencilZFail=By,this.stencilZPass=By,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const n in t){const i=t[n];if(void 0===i){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i:console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`)}}toJSON(t){const n=void 0===t||"string"==typeof t;n&&(t={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ty&&(i.blending=this.blending),this.side!==Qm&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),this.blendSrc!==Ek&&(i.blendSrc=this.blendSrc),this.blendDst!==Ok&&(i.blendDst=this.blendDst),this.blendEquation!==ev&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Dy&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==By&&(i.stencilFail=this.stencilFail),this.stencilZFail!==By&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==By&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),n){const s=r(t.textures),o=r(t.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const n=t.clippingPlanes;let i=null;if(null!==n){const r=n.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=n[s].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class av extends $w{static get type(){return"MeshBasicMaterial"}constructor(t){super(),this.isMeshBasicMaterial=!0,this.color=new ci(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Pf,this.combine=x2,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const ba=new qe,q2=new bn;class xa{constructor(t,n,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=i,this.usage=35044,this.updateRanges=[],this.gpuType=Id,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,n){this.updateRanges.push({start:t,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,n,i){t*=this.itemSize,i*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=n.array[i+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let n=0,i=this.count;n<i;n++)q2.fromBufferAttribute(this,n),q2.applyMatrix3(t),this.setXY(n,q2.x,q2.y);else if(3===this.itemSize)for(let n=0,i=this.count;n<i;n++)ba.fromBufferAttribute(this,n),ba.applyMatrix3(t),this.setXYZ(n,ba.x,ba.y,ba.z);return this}applyMatrix4(t){for(let n=0,i=this.count;n<i;n++)ba.fromBufferAttribute(this,n),ba.applyMatrix4(t),this.setXYZ(n,ba.x,ba.y,ba.z);return this}applyNormalMatrix(t){for(let n=0,i=this.count;n<i;n++)ba.fromBufferAttribute(this,n),ba.applyNormalMatrix(t),this.setXYZ(n,ba.x,ba.y,ba.z);return this}transformDirection(t){for(let n=0,i=this.count;n<i;n++)ba.fromBufferAttribute(this,n),ba.transformDirection(t),this.setXYZ(n,ba.x,ba.y,ba.z);return this}set(t,n=0){return this.array.set(t,n),this}getComponent(t,n){let i=this.array[t*this.itemSize+n];return this.normalized&&(i=dc(i,this.array)),i}setComponent(t,n,i){return this.normalized&&(i=Sr(i,this.array)),this.array[t*this.itemSize+n]=i,this}getX(t){let n=this.array[t*this.itemSize];return this.normalized&&(n=dc(n,this.array)),n}setX(t,n){return this.normalized&&(n=Sr(n,this.array)),this.array[t*this.itemSize]=n,this}getY(t){let n=this.array[t*this.itemSize+1];return this.normalized&&(n=dc(n,this.array)),n}setY(t,n){return this.normalized&&(n=Sr(n,this.array)),this.array[t*this.itemSize+1]=n,this}getZ(t){let n=this.array[t*this.itemSize+2];return this.normalized&&(n=dc(n,this.array)),n}setZ(t,n){return this.normalized&&(n=Sr(n,this.array)),this.array[t*this.itemSize+2]=n,this}getW(t){let n=this.array[t*this.itemSize+3];return this.normalized&&(n=dc(n,this.array)),n}setW(t,n){return this.normalized&&(n=Sr(n,this.array)),this.array[t*this.itemSize+3]=n,this}setXY(t,n,i){return t*=this.itemSize,this.normalized&&(n=Sr(n,this.array),i=Sr(i,this.array)),this.array[t+0]=n,this.array[t+1]=i,this}setXYZ(t,n,i,r){return t*=this.itemSize,this.normalized&&(n=Sr(n,this.array),i=Sr(i,this.array),r=Sr(r,this.array)),this.array[t+0]=n,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,n,i,r,s){return t*=this.itemSize,this.normalized&&(n=Sr(n,this.array),i=Sr(i,this.array),r=Sr(r,this.array),s=Sr(s,this.array)),this.array[t+0]=n,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),t}}class VX extends xa{constructor(t,n,i){super(new Uint16Array(t),n,i)}}class jX extends xa{constructor(t,n,i){super(new Uint32Array(t),n,i)}}class yi extends xa{constructor(t,n,i){super(new Float32Array(t),n,i)}}let HPe=0;const xh=new rr,BN=new Fd,Jy=new qe,zd=new Wc,Zw=new Wc,ol=new qe;class jr extends zy{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:HPe++}),this.uuid=kd(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(MX(t)?jX:VX)(t,1):t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,n){return this.attributes[t]=n,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,n,i=0){this.groups.push({start:t,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,n){this.drawRange.start=t,this.drawRange.count=n}applyMatrix4(t){const n=this.attributes.position;void 0!==n&&(n.applyMatrix4(t),n.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new Er).getNormalMatrix(t);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return xh.makeRotationFromQuaternion(t),this.applyMatrix4(xh),this}rotateX(t){return xh.makeRotationX(t),this.applyMatrix4(xh),this}rotateY(t){return xh.makeRotationY(t),this.applyMatrix4(xh),this}rotateZ(t){return xh.makeRotationZ(t),this.applyMatrix4(xh),this}translate(t,n,i){return xh.makeTranslation(t,n,i),this.applyMatrix4(xh),this}scale(t,n,i){return xh.makeScale(t,n,i),this.applyMatrix4(xh),this}lookAt(t){return BN.lookAt(t),BN.updateMatrix(),this.applyMatrix4(BN.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Jy).negate(),this.translate(Jy.x,Jy.y,Jy.z),this}setFromPoints(t){const n=this.getAttribute("position");if(void 0===n){const i=[];for(let r=0,s=t.length;r<s;r++){const o=t[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new yi(i,3))}else{for(let i=0,r=n.count;i<r;i++){const s=t[i];n.setXYZ(i,s.x,s.y,s.z||0)}t.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Wc);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new qe(-1/0,-1/0,-1/0),new qe(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),n)for(let i=0,r=n.length;i<r;i++)zd.setFromBufferAttribute(n[i]),this.morphTargetsRelative?(ol.addVectors(this.boundingBox.min,zd.min),this.boundingBox.expandByPoint(ol),ol.addVectors(this.boundingBox.max,zd.max),this.boundingBox.expandByPoint(ol)):(this.boundingBox.expandByPoint(zd.min),this.boundingBox.expandByPoint(zd.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new hc);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new qe,1/0);if(t){const i=this.boundingSphere.center;if(zd.setFromBufferAttribute(t),n)for(let s=0,o=n.length;s<o;s++)Zw.setFromBufferAttribute(n[s]),this.morphTargetsRelative?(ol.addVectors(zd.min,Zw.min),zd.expandByPoint(ol),ol.addVectors(zd.max,Zw.max),zd.expandByPoint(ol)):(zd.expandByPoint(Zw.min),zd.expandByPoint(Zw.max));zd.getCenter(i);let r=0;for(let s=0,o=t.count;s<o;s++)ol.fromBufferAttribute(t,s),r=Math.max(r,i.distanceToSquared(ol));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)ol.fromBufferAttribute(a,c),l&&(Jy.fromBufferAttribute(t,c),ol.add(Jy)),r=Math.max(r,i.distanceToSquared(ol))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,n=this.attributes;if(null===t||void 0===n.position||void 0===n.normal||void 0===n.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=n.position,r=n.normal,s=n.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new xa(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let N=0;N<i.count;N++)a[N]=new qe,l[N]=new qe;const c=new qe,d=new qe,h=new qe,u=new bn,p=new bn,m=new bn,v=new qe,g=new qe;function b(N,k,L){c.fromBufferAttribute(i,N),d.fromBufferAttribute(i,k),h.fromBufferAttribute(i,L),u.fromBufferAttribute(s,N),p.fromBufferAttribute(s,k),m.fromBufferAttribute(s,L),d.sub(c),h.sub(c),p.sub(u),m.sub(u);const Q=1/(p.x*m.y-m.x*p.y);isFinite(Q)&&(v.copy(d).multiplyScalar(m.y).addScaledVector(h,-p.y).multiplyScalar(Q),g.copy(h).multiplyScalar(p.x).addScaledVector(d,-m.x).multiplyScalar(Q),a[N].add(v),a[k].add(v),a[L].add(v),l[N].add(g),l[k].add(g),l[L].add(g))}let x=this.groups;0===x.length&&(x=[{start:0,count:t.count}]);for(let N=0,k=x.length;N<k;++N){const L=x[N],Q=L.start;for(let ae=Q,he=Q+L.count;ae<he;ae+=3)b(t.getX(ae+0),t.getX(ae+1),t.getX(ae+2))}const w=new qe,P=new qe,A=new qe,D=new qe;function R(N){A.fromBufferAttribute(r,N),D.copy(A);const k=a[N];w.copy(k),w.sub(A.multiplyScalar(A.dot(k))).normalize(),P.crossVectors(D,k);const Q=P.dot(l[N])<0?-1:1;o.setXYZW(N,w.x,w.y,w.z,Q)}for(let N=0,k=x.length;N<k;++N){const L=x[N],Q=L.start;for(let ae=Q,he=Q+L.count;ae<he;ae+=3)R(t.getX(ae+0)),R(t.getX(ae+1)),R(t.getX(ae+2))}}computeVertexNormals(){const t=this.index,n=this.getAttribute("position");if(void 0!==n){let i=this.getAttribute("normal");if(void 0===i)i=new xa(new Float32Array(3*n.count),3),this.setAttribute("normal",i);else for(let u=0,p=i.count;u<p;u++)i.setXYZ(u,0,0,0);const r=new qe,s=new qe,o=new qe,a=new qe,l=new qe,c=new qe,d=new qe,h=new qe;if(t)for(let u=0,p=t.count;u<p;u+=3){const m=t.getX(u+0),v=t.getX(u+1),g=t.getX(u+2);r.fromBufferAttribute(n,m),s.fromBufferAttribute(n,v),o.fromBufferAttribute(n,g),d.subVectors(o,s),h.subVectors(r,s),d.cross(h),a.fromBufferAttribute(i,m),l.fromBufferAttribute(i,v),c.fromBufferAttribute(i,g),a.add(d),l.add(d),c.add(d),i.setXYZ(m,a.x,a.y,a.z),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let u=0,p=n.count;u<p;u+=3)r.fromBufferAttribute(n,u+0),s.fromBufferAttribute(n,u+1),o.fromBufferAttribute(n,u+2),d.subVectors(o,s),h.subVectors(r,s),d.cross(h),i.setXYZ(u+0,d.x,d.y,d.z),i.setXYZ(u+1,d.x,d.y,d.z),i.setXYZ(u+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let n=0,i=t.count;n<i;n++)ol.fromBufferAttribute(t,n),ol.normalize(),t.setXYZ(n,ol.x,ol.y,ol.z)}toNonIndexed(){function t(a,l){const c=a.array,d=a.itemSize,h=a.normalized,u=new c.constructor(l.length*d);let p=0,m=0;for(let v=0,g=l.length;v<g;v++){p=a.isInterleavedBufferAttribute?l[v]*a.data.stride+a.offset:l[v]*d;for(let b=0;b<d;b++)u[m++]=c[p++]}return new xa(u,d,h)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new jr,i=this.index.array,r=this.attributes;for(const a in r){const c=t(r[a],i);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,h=c.length;d<h;d++){const p=t(c[d],i);l.push(p)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(t[c]=l[c]);return t}t.data={attributes:{}};const n=this.index;null!==n&&(t.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i)t.data.attributes[l]=i[l].toJSON(t.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let h=0,u=c.length;h<u;h++)d.push(c[h].toJSON(t.data));d.length>0&&(r[l]=d,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=t.name;const i=t.index;null!==i&&this.setIndex(i.clone(n));const r=t.attributes;for(const c in r)this.setAttribute(c,r[c].clone(n));const s=t.morphAttributes;for(const c in s){const d=[],h=s[c];for(let u=0,p=h.length;u<p;u++)d.push(h[u].clone(n));this.morphAttributes[c]=d}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let c=0,d=o.length;c<d;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=t.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const HX=new rr,lv=new Xw,X2=new hc,GX=new qe,Y2=new qe,$2=new qe,K2=new qe,zN=new qe,Z2=new qe,WX=new qe,Q2=new qe;class uc extends Fd{constructor(t=new jr,n=new av){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(t,n){const i=this.geometry,s=i.morphAttributes.position,o=i.morphTargetsRelative;n.fromBufferAttribute(i.attributes.position,t);const a=this.morphTargetInfluences;if(s&&a){Z2.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const d=a[l];0!==d&&(zN.fromBufferAttribute(s[l],t),Z2.addScaledVector(o?zN:zN.sub(n),d))}n.add(Z2)}return n}raycast(t,n){const i=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),X2.copy(i.boundingSphere),X2.applyMatrix4(s),lv.copy(t.ray).recast(t.near),(!1!==X2.containsPoint(lv.origin)||!(null===lv.intersectSphere(X2,GX)||lv.origin.distanceToSquared(GX)>(t.far-t.near)**2))&&(HX.copy(s).invert(),lv.copy(t.ray).applyMatrix4(HX),(null===i.boundingBox||!1!==lv.intersectsBox(i.boundingBox))&&this._computeIntersections(t,n,lv)))}_computeIntersections(t,n,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,d=s.attributes.uv1,h=s.attributes.normal,u=s.groups,p=s.drawRange;if(null!==a)if(Array.isArray(o))for(let m=0,v=u.length;m<v;m++){const g=u[m],b=o[g.materialIndex];for(let P=Math.max(g.start,p.start),A=Math.min(a.count,Math.min(g.start+g.count,p.start+p.count));P<A;P+=3)r=J2(this,b,t,i,c,d,h,a.getX(P),a.getX(P+1),a.getX(P+2)),r&&(r.faceIndex=Math.floor(P/3),r.face.materialIndex=g.materialIndex,n.push(r))}else for(let g=Math.max(0,p.start),b=Math.min(a.count,p.start+p.count);g<b;g+=3)r=J2(this,o,t,i,c,d,h,a.getX(g),a.getX(g+1),a.getX(g+2)),r&&(r.faceIndex=Math.floor(g/3),n.push(r));else if(void 0!==l)if(Array.isArray(o))for(let m=0,v=u.length;m<v;m++){const g=u[m],b=o[g.materialIndex];for(let P=Math.max(g.start,p.start),A=Math.min(l.count,Math.min(g.start+g.count,p.start+p.count));P<A;P+=3)r=J2(this,b,t,i,c,d,h,P,P+1,P+2),r&&(r.faceIndex=Math.floor(P/3),r.face.materialIndex=g.materialIndex,n.push(r))}else for(let g=Math.max(0,p.start),b=Math.min(l.count,p.start+p.count);g<b;g+=3)r=J2(this,o,t,i,c,d,h,g,g+1,g+2),r&&(r.faceIndex=Math.floor(g/3),n.push(r))}}function J2(e,t,n,i,r,s,o,a,l,c){e.getVertexPosition(a,Y2),e.getVertexPosition(l,$2),e.getVertexPosition(c,K2);const d=function GPe(e,t,n,i,r,s,o,a){let l;if(l=t.side===Hc?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,t.side===Qm,a),null===l)return null;Q2.copy(a),Q2.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Q2);return c<n.near||c>n.far?null:{distance:c,point:Q2.clone(),object:e}}(e,t,n,i,Y2,$2,K2,WX);if(d){const h=new qe;Bd.getBarycoord(WX,Y2,$2,K2,h),r&&(d.uv=Bd.getInterpolatedAttribute(r,a,l,c,h,new bn)),s&&(d.uv1=Bd.getInterpolatedAttribute(s,a,l,c,h,new bn)),o&&(d.normal=Bd.getInterpolatedAttribute(o,a,l,c,h,new qe),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const u={a,b:l,c,normal:new qe,materialIndex:0};Bd.getNormal(Y2,$2,K2,u.normal),d.face=u,d.barycoord=h}return d}class e_ extends jr{constructor(t=1,n=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],h=[];let u=0,p=0;function m(v,g,b,x,w,P,A,D,R,N,k){const L=P/R,Q=A/N,le=P/2,ae=A/2,he=D/2,xe=R+1,_e=N+1;let be=0,me=0;const Te=new qe;for(let Le=0;Le<_e;Le++){const ke=Le*Q-ae;for(let Re=0;Re<xe;Re++)Te[v]=(Re*L-le)*x,Te[g]=ke*w,Te[b]=he,c.push(Te.x,Te.y,Te.z),Te[v]=0,Te[g]=0,Te[b]=D>0?1:-1,d.push(Te.x,Te.y,Te.z),h.push(Re/R),h.push(1-Le/N),be+=1}for(let Le=0;Le<N;Le++)for(let ke=0;ke<R;ke++){const Qe=u+ke+xe*(Le+1),Pe=u+(ke+1)+xe*(Le+1),Be=u+(ke+1)+xe*Le;l.push(u+ke+xe*Le,Qe,Be),l.push(Qe,Pe,Be),me+=6}a.addGroup(p,me,k),p+=me,u+=be}m("z","y","x",-1,-1,i,n,t,o,s,0),m("z","y","x",1,-1,i,n,-t,o,s,1),m("x","z","y",1,1,t,i,n,r,o,2),m("x","z","y",1,-1,t,i,-n,r,o,3),m("x","y","z",1,-1,t,n,i,r,s,4),m("x","y","z",-1,-1,t,n,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new yi(c,3)),this.setAttribute("normal",new yi(d,3)),this.setAttribute("uv",new yi(h,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new e_(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function t_(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=r.clone():t[n][i]=Array.isArray(r)?r.slice():r}}return t}function pc(e){const t={};for(let n=0;n<e.length;n++){const i=t_(e[n]);for(const r in i)t[r]=i[r]}return t}function qX(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:ps.workingColorSpace}const qPe={clone:t_,merge:pc};class Tf extends $w{static get type(){return"ShaderMaterial"}constructor(t){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=t_(t.uniforms),this.uniformsGroups=function WPe(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const n=super.toJSON(t);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;n.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class UN extends Fd{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new rr,this.projectionMatrix=new rr,this.projectionMatrixInverse=new rr,this.coordinateSystem=bf}copy(t,n){return super.copy(t,n),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,n){super.updateWorldMatrix(t,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const cg=new qe,XX=new bn,YX=new bn;class Pl extends UN{constructor(t=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const n=.5*this.getFilmHeight()/t;this.fov=2*Uy*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*iv*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Uy*Math.atan(Math.tan(.5*iv*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,n,i){cg.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(cg.x,cg.y).multiplyScalar(-t/cg.z),cg.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(cg.x,cg.y).multiplyScalar(-t/cg.z)}getViewSize(t,n){return this.getViewBounds(t,XX,YX),n.subVectors(YX,XX)}setViewOffset(t,n,i,r,s,o){this.aspect=t/n,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let n=t*Math.tan(.5*iv*this.fov)/this.zoom,i=2*n,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,n-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;0!==a&&(s+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,n,n-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,null!==this.view&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}class $Pe extends Fd{constructor(t,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Pl(-90,1,t,n);r.layers=this.layers,this.add(r);const s=new Pl(-90,1,t,n);s.layers=this.layers,this.add(s);const o=new Pl(-90,1,t,n);o.layers=this.layers,this.add(o);const a=new Pl(-90,1,t,n);a.layers=this.layers,this.add(a);const l=new Pl(-90,1,t,n);l.layers=this.layers,this.add(l);const c=new Pl(-90,1,t,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const t=this.coordinateSystem,n=this.children.concat(),[i,r,s,o,a,l]=n;for(const c of n)this.remove(c);if(t===bf)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else{if(2001!==t)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1)}for(const c of n)this.add(c),c.updateMatrixWorld()}update(t,n){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,d]=this.children,h=t.getRenderTarget(),u=t.getActiveCubeFace(),p=t.getActiveMipmapLevel(),m=t.xr.enabled;t.xr.enabled=!1;const v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,r),t.render(n,s),t.setRenderTarget(i,1,r),t.render(n,o),t.setRenderTarget(i,2,r),t.render(n,a),t.setRenderTarget(i,3,r),t.render(n,l),t.setRenderTarget(i,4,r),t.render(n,c),i.texture.generateMipmaps=v,t.setRenderTarget(i,5,r),t.render(n,d),t.setRenderTarget(h,u,p),t.xr.enabled=m,i.texture.needsPMREMUpdate=!0}}class eE extends wf{constructor(t,n,i,r,s,o,a,l,c,d){super(t=void 0!==t?t:[],n=void 0!==n?n:tg,i,r,s,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class KPe extends rv{constructor(t=1,n={}){super(t,t,n),this.isWebGLCubeRenderTarget=!0;const i={width:t,height:t,depth:1};this.texture=new eE([i,i,i,i,i,i],n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:sl}fromEquirectangularTexture(t,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new e_(5,5,5),s=new Tf({name:"CubemapFromEquirect",uniforms:t_(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:Hc,blending:Jm});s.uniforms.tEquirect.value=n;const o=new uc(r,s),a=n.minFilter;return n.minFilter===yf&&(n.minFilter=sl),new $Pe(1,10,this).update(t,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,n,i,r){const s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(n,i,r);t.setRenderTarget(s)}}const VN=new qe,ZPe=new qe,QPe=new Er;class cv{constructor(t=new qe(1,0,0),n=0){this.isPlane=!0,this.normal=t,this.constant=n}set(t,n){return this.normal.copy(t),this.constant=n,this}setComponents(t,n,i,r){return this.normal.set(t,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(t,n,i){const r=VN.subVectors(i,n).cross(ZPe.subVectors(t,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,n){return n.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,n){const i=t.delta(VN),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(t.start)?n.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:n.copy(t.start).addScaledVector(i,s)}intersectsLine(t){const n=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return n<0&&i>0||i<0&&n>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,n){const i=n||QPe.getNormalMatrix(t),r=this.coplanarPoint(VN).applyMatrix4(t),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const dv=new hc,tE=new qe;class nE{constructor(t=new cv,n=new cv,i=new cv,r=new cv,s=new cv,o=new cv){this.planes=[t,n,i,r,s,o]}set(t,n,i,r,s,o){const a=this.planes;return a[0].copy(t),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(t){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,n=bf){const i=this.planes,r=t.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],d=r[5],h=r[6],u=r[7],p=r[8],m=r[9],v=r[10],g=r[11],b=r[12],x=r[13],w=r[14],P=r[15];if(i[0].setComponents(l-s,u-c,g-p,P-b).normalize(),i[1].setComponents(l+s,u+c,g+p,P+b).normalize(),i[2].setComponents(l+o,u+d,g+m,P+x).normalize(),i[3].setComponents(l-o,u-d,g-m,P-x).normalize(),i[4].setComponents(l-a,u-h,g-v,P-w).normalize(),n===bf)i[5].setComponents(l+a,u+h,g+v,P+w).normalize();else{if(2001!==n)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);i[5].setComponents(a,h,v,w).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),dv.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const n=t.geometry;null===n.boundingSphere&&n.computeBoundingSphere(),dv.copy(n.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(dv)}intersectsSprite(t){return dv.center.set(0,0,0),dv.radius=.7071067811865476,dv.applyMatrix4(t.matrixWorld),this.intersectsSphere(dv)}intersectsSphere(t){const n=this.planes,i=t.center,r=-t.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(tE.x=r.normal.x>0?t.max.x:t.min.x,tE.y=r.normal.y>0?t.max.y:t.min.y,tE.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(tE)<0)return!1}return!0}containsPoint(t){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function $X(){let e=null,t=!1,n=null,i=null;function r(s,o){n(s,o),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){n=s},setContext:function(s){e=s}}}function JPe(e){const t=new WeakMap;return{get:function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),t.get(a)},remove:function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=t.get(a);l&&(e.deleteBuffer(l.buffer),t.delete(a))},update:function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const d=t.get(a);return void((!d||d.version<a.version)&&t.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version}))}const c=t.get(a);if(void 0===c)t.set(a,function n(a,l){const c=a.array,d=a.usage,h=c.byteLength,u=e.createBuffer();let p;if(e.bindBuffer(l,u),e.bufferData(l,c,d),a.onUploadCallback(),c instanceof Float32Array)p=e.FLOAT;else if(c instanceof Uint16Array)p=a.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=e.SHORT;else if(c instanceof Uint32Array)p=e.UNSIGNED_INT;else if(c instanceof Int32Array)p=e.INT;else if(c instanceof Int8Array)p=e.BYTE;else if(c instanceof Uint8Array)p=e.UNSIGNED_BYTE;else{if(!(c instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);p=e.UNSIGNED_BYTE}return{buffer:u,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:h}}(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function i(a,l,c){const d=l.array,h=l.updateRanges;if(e.bindBuffer(c,a),0===h.length)e.bufferSubData(c,0,d);else{h.sort((p,m)=>p.start-m.start);let u=0;for(let p=1;p<h.length;p++){const m=h[u],v=h[p];v.start<=m.start+m.count+1?m.count=Math.max(m.count,v.start+v.count-m.start):(++u,h[u]=v)}h.length=u+1;for(let p=0,m=h.length;p<m;p++){const v=h[p];e.bufferSubData(c,v.start*d.BYTES_PER_ELEMENT,d,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()})(c.buffer,a,l),c.version=a.version}}}}class Qw extends jr{constructor(t=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:n,widthSegments:i,heightSegments:r};const s=t/2,o=n/2,a=Math.floor(i),l=Math.floor(r),c=a+1,d=l+1,h=t/a,u=n/l,p=[],m=[],v=[],g=[];for(let b=0;b<d;b++){const x=b*u-o;for(let w=0;w<c;w++)m.push(w*h-s,-x,0),v.push(0,0,1),g.push(w/a),g.push(1-b/l)}for(let b=0;b<l;b++)for(let x=0;x<a;x++){const P=x+c*(b+1),A=x+1+c*(b+1),D=x+1+c*b;p.push(x+c*b,P,D),p.push(P,A,D)}this.setIndex(p),this.setAttribute("position",new yi(m,3)),this.setAttribute("normal",new yi(v,3)),this.setAttribute("uv",new yi(g,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Qw(t.width,t.height,t.widthSegments,t.heightSegments)}}const kr={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},$n={common:{diffuse:{value:new ci(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Er},alphaMap:{value:null},alphaMapTransform:{value:new Er},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Er}},envmap:{envMap:{value:null},envMapRotation:{value:new Er},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Er}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Er}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Er},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Er},normalScale:{value:new bn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Er},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Er}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Er}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Er}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ci(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ci(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Er},alphaTest:{value:0},uvTransform:{value:new Er}},sprite:{diffuse:{value:new ci(16777215)},opacity:{value:1},center:{value:new bn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Er},alphaMap:{value:null},alphaMapTransform:{value:new Er},alphaTest:{value:0}}},op={basic:{uniforms:pc([$n.common,$n.specularmap,$n.envmap,$n.aomap,$n.lightmap,$n.fog]),vertexShader:kr.meshbasic_vert,fragmentShader:kr.meshbasic_frag},lambert:{uniforms:pc([$n.common,$n.specularmap,$n.envmap,$n.aomap,$n.lightmap,$n.emissivemap,$n.bumpmap,$n.normalmap,$n.displacementmap,$n.fog,$n.lights,{emissive:{value:new ci(0)}}]),vertexShader:kr.meshlambert_vert,fragmentShader:kr.meshlambert_frag},phong:{uniforms:pc([$n.common,$n.specularmap,$n.envmap,$n.aomap,$n.lightmap,$n.emissivemap,$n.bumpmap,$n.normalmap,$n.displacementmap,$n.fog,$n.lights,{emissive:{value:new ci(0)},specular:{value:new ci(1118481)},shininess:{value:30}}]),vertexShader:kr.meshphong_vert,fragmentShader:kr.meshphong_frag},standard:{uniforms:pc([$n.common,$n.envmap,$n.aomap,$n.lightmap,$n.emissivemap,$n.bumpmap,$n.normalmap,$n.displacementmap,$n.roughnessmap,$n.metalnessmap,$n.fog,$n.lights,{emissive:{value:new ci(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:kr.meshphysical_vert,fragmentShader:kr.meshphysical_frag},toon:{uniforms:pc([$n.common,$n.aomap,$n.lightmap,$n.emissivemap,$n.bumpmap,$n.normalmap,$n.displacementmap,$n.gradientmap,$n.fog,$n.lights,{emissive:{value:new ci(0)}}]),vertexShader:kr.meshtoon_vert,fragmentShader:kr.meshtoon_frag},matcap:{uniforms:pc([$n.common,$n.bumpmap,$n.normalmap,$n.displacementmap,$n.fog,{matcap:{value:null}}]),vertexShader:kr.meshmatcap_vert,fragmentShader:kr.meshmatcap_frag},points:{uniforms:pc([$n.points,$n.fog]),vertexShader:kr.points_vert,fragmentShader:kr.points_frag},dashed:{uniforms:pc([$n.common,$n.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:kr.linedashed_vert,fragmentShader:kr.linedashed_frag},depth:{uniforms:pc([$n.common,$n.displacementmap]),vertexShader:kr.depth_vert,fragmentShader:kr.depth_frag},normal:{uniforms:pc([$n.common,$n.bumpmap,$n.normalmap,$n.displacementmap,{opacity:{value:1}}]),vertexShader:kr.meshnormal_vert,fragmentShader:kr.meshnormal_frag},sprite:{uniforms:pc([$n.sprite,$n.fog]),vertexShader:kr.sprite_vert,fragmentShader:kr.sprite_frag},background:{uniforms:{uvTransform:{value:new Er},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:kr.background_vert,fragmentShader:kr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Er}},vertexShader:kr.backgroundCube_vert,fragmentShader:kr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:kr.cube_vert,fragmentShader:kr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:kr.equirect_vert,fragmentShader:kr.equirect_frag},distanceRGBA:{uniforms:pc([$n.common,$n.displacementmap,{referencePosition:{value:new qe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:kr.distanceRGBA_vert,fragmentShader:kr.distanceRGBA_frag},shadow:{uniforms:pc([$n.lights,$n.fog,{color:{value:new ci(0)},opacity:{value:1}}]),vertexShader:kr.shadow_vert,fragmentShader:kr.shadow_frag}};op.physical={uniforms:pc([op.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Er},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Er},clearcoatNormalScale:{value:new bn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Er},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Er},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Er},sheen:{value:0},sheenColor:{value:new ci(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Er},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Er},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Er},transmissionSamplerSize:{value:new bn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Er},attenuationDistance:{value:0},attenuationColor:{value:new ci(0)},specularColor:{value:new ci(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Er},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Er},anisotropyVector:{value:new bn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Er}}]),vertexShader:kr.meshphysical_vert,fragmentShader:kr.meshphysical_frag};const iE={r:0,b:0,g:0},hv=new Pf,J2e=new rr;function eEe(e,t,n,i,r,s,o){const a=new ci(0);let c,d,l=!0===s?0:1,h=null,u=0,p=null;function m(x){let w=!0===x.isScene?x.background:null;return w&&w.isTexture&&(w=(x.backgroundBlurriness>0?n:t).get(w)),w}function b(x,w){x.getRGB(iE,qX(e)),i.buffers.color.setClear(iE.r,iE.g,iE.b,w,o)}return{getClearColor:function(){return a},setClearColor:function(x,w=1){a.set(x),l=w,b(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,b(a,l)},render:function v(x){let w=!1;const P=m(x);null===P?b(a,l):P&&P.isColor&&(b(P,1),w=!0);const A=e.xr.getEnvironmentBlendMode();"additive"===A?i.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===A&&i.buffers.color.setClear(0,0,0,0,o),(e.autoClear||w)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function g(x,w){const P=m(w);P&&(P.isCubeTexture||P.mapping===Bw)?(void 0===d&&(d=new uc(new e_(1,1,1),new Tf({name:"BackgroundCubeMaterial",uniforms:t_(op.backgroundCube.uniforms),vertexShader:op.backgroundCube.vertexShader,fragmentShader:op.backgroundCube.fragmentShader,side:Hc,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(A,D,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),hv.copy(w.backgroundRotation),hv.x*=-1,hv.y*=-1,hv.z*=-1,P.isCubeTexture&&!1===P.isRenderTargetTexture&&(hv.y*=-1,hv.z*=-1),d.material.uniforms.envMap.value=P,d.material.uniforms.flipEnvMap.value=P.isCubeTexture&&!1===P.isRenderTargetTexture?-1:1,d.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(J2e.makeRotationFromEuler(hv)),d.material.toneMapped=ps.getTransfer(P.colorSpace)!==$s,(h!==P||u!==P.version||p!==e.toneMapping)&&(d.material.needsUpdate=!0,h=P,u=P.version,p=e.toneMapping),d.layers.enableAll(),x.unshift(d,d.geometry,d.material,0,0,null)):P&&P.isTexture&&(void 0===c&&(c=new uc(new Qw(2,2),new Tf({name:"BackgroundMaterial",uniforms:t_(op.background.uniforms),vertexShader:op.background.vertexShader,fragmentShader:op.background.fragmentShader,side:Qm,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=P,c.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,c.material.toneMapped=ps.getTransfer(P.colorSpace)!==$s,!0===P.matrixAutoUpdate&&P.updateMatrix(),c.material.uniforms.uvTransform.value.copy(P.matrix),(h!==P||u!==P.version||p!==e.toneMapping)&&(c.material.needsUpdate=!0,h=P,u=P.version,p=e.toneMapping),c.layers.enableAll(),x.unshift(c,c.geometry,c.material,0,0,null))}}}function tEe(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),i={},r=u(null);let s=r,o=!1;function c(L){return e.bindVertexArray(L)}function d(L){return e.deleteVertexArray(L)}function u(L){const Q=[],le=[],ae=[];for(let he=0;he<n;he++)Q[he]=0,le[he]=0,ae[he]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Q,enabledAttributes:le,attributeDivisors:ae,object:L,attributes:{},index:null}}function v(){const L=s.newAttributes;for(let Q=0,le=L.length;Q<le;Q++)L[Q]=0}function g(L){b(L,0)}function b(L,Q){const ae=s.enabledAttributes,he=s.attributeDivisors;s.newAttributes[L]=1,0===ae[L]&&(e.enableVertexAttribArray(L),ae[L]=1),he[L]!==Q&&(e.vertexAttribDivisor(L,Q),he[L]=Q)}function x(){const L=s.newAttributes,Q=s.enabledAttributes;for(let le=0,ae=Q.length;le<ae;le++)Q[le]!==L[le]&&(e.disableVertexAttribArray(le),Q[le]=0)}function w(L,Q,le,ae,he,xe,_e){!0===_e?e.vertexAttribIPointer(L,Q,le,he,xe):e.vertexAttribPointer(L,Q,le,ae,he,xe)}function N(){k(),o=!0,s!==r&&(s=r,c(s.object))}function k(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function a(L,Q,le,ae,he){let xe=!1;const _e=function h(L,Q,le){const ae=!0===le.wireframe;let he=i[L.id];void 0===he&&(he={},i[L.id]=he);let xe=he[Q.id];void 0===xe&&(xe={},he[Q.id]=xe);let _e=xe[ae];return void 0===_e&&(_e=u(function l(){return e.createVertexArray()}()),xe[ae]=_e),_e}(ae,le,Q);s!==_e&&(s=_e,c(s.object)),xe=function p(L,Q,le,ae){const he=s.attributes,xe=Q.attributes;let _e=0;const be=le.getAttributes();for(const me in be)if(be[me].location>=0){const Le=he[me];let ke=xe[me];if(void 0===ke&&("instanceMatrix"===me&&L.instanceMatrix&&(ke=L.instanceMatrix),"instanceColor"===me&&L.instanceColor&&(ke=L.instanceColor)),void 0===Le||Le.attribute!==ke||ke&&Le.data!==ke.data)return!0;_e++}return s.attributesNum!==_e||s.index!==ae}(L,ae,le,he),xe&&function m(L,Q,le,ae){const he={},xe=Q.attributes;let _e=0;const be=le.getAttributes();for(const me in be)if(be[me].location>=0){let Le=xe[me];void 0===Le&&("instanceMatrix"===me&&L.instanceMatrix&&(Le=L.instanceMatrix),"instanceColor"===me&&L.instanceColor&&(Le=L.instanceColor));const ke={};ke.attribute=Le,Le&&Le.data&&(ke.data=Le.data),he[me]=ke,_e++}s.attributes=he,s.attributesNum=_e,s.index=ae}(L,ae,le,he),null!==he&&t.update(he,e.ELEMENT_ARRAY_BUFFER),(xe||o)&&(o=!1,function P(L,Q,le,ae){v();const he=ae.attributes,xe=le.getAttributes(),_e=Q.defaultAttributeValues;for(const be in xe){const me=xe[be];if(me.location>=0){let Te=he[be];if(void 0===Te&&("instanceMatrix"===be&&L.instanceMatrix&&(Te=L.instanceMatrix),"instanceColor"===be&&L.instanceColor&&(Te=L.instanceColor)),void 0!==Te){const Le=Te.normalized,ke=Te.itemSize,Re=t.get(Te);if(void 0===Re)continue;const Qe=Re.buffer,Pe=Re.type,Be=Re.bytesPerElement,Fe=Pe===e.INT||Pe===e.UNSIGNED_INT||Te.gpuType===Fk;if(Te.isInterleavedBufferAttribute){const Ze=Te.data,$e=Ze.stride,ft=Te.offset;if(Ze.isInstancedInterleavedBuffer){for(let it=0;it<me.locationSize;it++)b(me.location+it,Ze.meshPerAttribute);!0!==L.isInstancedMesh&&void 0===ae._maxInstanceCount&&(ae._maxInstanceCount=Ze.meshPerAttribute*Ze.count)}else for(let it=0;it<me.locationSize;it++)g(me.location+it);e.bindBuffer(e.ARRAY_BUFFER,Qe);for(let it=0;it<me.locationSize;it++)w(me.location+it,ke/me.locationSize,Pe,Le,$e*Be,(ft+ke/me.locationSize*it)*Be,Fe)}else{if(Te.isInstancedBufferAttribute){for(let Ze=0;Ze<me.locationSize;Ze++)b(me.location+Ze,Te.meshPerAttribute);!0!==L.isInstancedMesh&&void 0===ae._maxInstanceCount&&(ae._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let Ze=0;Ze<me.locationSize;Ze++)g(me.location+Ze);e.bindBuffer(e.ARRAY_BUFFER,Qe);for(let Ze=0;Ze<me.locationSize;Ze++)w(me.location+Ze,ke/me.locationSize,Pe,Le,ke*Be,ke/me.locationSize*Ze*Be,Fe)}}else if(void 0!==_e){const Le=_e[be];if(void 0!==Le)switch(Le.length){case 2:e.vertexAttrib2fv(me.location,Le);break;case 3:e.vertexAttrib3fv(me.location,Le);break;case 4:e.vertexAttrib4fv(me.location,Le);break;default:e.vertexAttrib1fv(me.location,Le)}}}}x()}(L,Q,le,ae),null!==he&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(he).buffer))},reset:N,resetDefaultState:k,dispose:function A(){N();for(const L in i){const Q=i[L];for(const le in Q){const ae=Q[le];for(const he in ae)d(ae[he].object),delete ae[he];delete Q[le]}delete i[L]}},releaseStatesOfGeometry:function D(L){if(void 0===i[L.id])return;const Q=i[L.id];for(const le in Q){const ae=Q[le];for(const he in ae)d(ae[he].object),delete ae[he];delete Q[le]}delete i[L.id]},releaseStatesOfProgram:function R(L){for(const Q in i){const le=i[Q];if(void 0===le[L.id])continue;const ae=le[L.id];for(const he in ae)d(ae[he].object),delete ae[he];delete le[L.id]}},initAttributes:v,enableAttribute:g,disableUnusedAttributes:x}}function nEe(e,t,n){let i;function o(c,d,h){0!==h&&(e.drawArraysInstanced(i,c,d,h),n.update(d,i,h))}this.setMode=function r(c){i=c},this.render=function s(c,d){e.drawArrays(i,c,d),n.update(d,i,1)},this.renderInstances=o,this.renderMultiDraw=function a(c,d,h){if(0===h)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,d,0,h);let p=0;for(let m=0;m<h;m++)p+=d[m];n.update(p,i,1)},this.renderMultiDrawInstances=function l(c,d,h,u){if(0===h)return;const p=t.get("WEBGL_multi_draw");if(null===p)for(let m=0;m<c.length;m++)o(c[m],d[m],u[m]);else{p.multiDrawArraysInstancedWEBGL(i,c,0,d,0,u,0,h);let m=0;for(let v=0;v<h;v++)m+=d[v]*u[v];n.update(m,i,1)}}}function iEe(e,t,n,i){let r;function l(R){if("highp"===R){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return"mediump"===R&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=void 0!==n.precision?n.precision:"highp";const d=l(c);d!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);const h=!0===n.logarithmicDepthBuffer,u=!0===n.reverseDepthBuffer&&t.has("EXT_clip_control"),p=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),m=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function s(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const R=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:l,textureFormatReadable:function o(R){return!(R!==Gc&&i.convert(R)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function a(R){const N=R===Vw&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(R!==_f&&i.convert(R)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&R!==Id&&!N)},precision:c,logarithmicDepthBuffer:h,reverseDepthBuffer:u,maxTextures:p,maxVertexTextures:m,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:m>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function rEe(e){const t=this;let n=null,i=0,r=!1,s=!1;const o=new cv,a=new Er,l={value:null,needsUpdate:!1};function d(h,u,p,m){const v=null!==h?h.length:0;let g=null;if(0!==v){if(g=l.value,!0!==m||null===g){const b=p+4*v,x=u.matrixWorldInverse;a.getNormalMatrix(x),(null===g||g.length<b)&&(g=new Float32Array(b));for(let w=0,P=p;w!==v;++w,P+=4)o.copy(h[w]).applyMatrix4(x,a),o.normal.toArray(g,P),g[P+3]=o.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=v,t.numIntersection=0,g}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,u){const p=0!==h.length||u||0!==i||r;return r=u,i=h.length,p},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,u){n=d(h,u,0)},this.setState=function(h,u,p){const m=h.clippingPlanes,v=h.clipIntersection,g=h.clipShadows,b=e.get(h);if(!r||null===m||0===m.length||s&&!g)s?d(null):function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}();else{const x=s?0:i,w=4*x;let P=b.clippingState||null;l.value=P,P=d(m,u,w,p);for(let A=0;A!==w;++A)P[A]=n[A];b.clippingState=P,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=x}}}function sEe(e){let t=new WeakMap;function n(o,a){return a===w2?o.mapping=tg:a===M2&&(o.mapping=tv),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=t.get(a);void 0!==l&&(t.delete(a),l.dispose())}return{get:function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===w2||a===M2){if(t.has(o))return n(t.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new KPe(l.height);return c.fromEquirectangularTexture(e,o),t.set(o,c),o.addEventListener("dispose",r),n(c.texture,o.mapping)}return null}}}return o},dispose:function s(){t=new WeakMap}}}class jN extends UN{constructor(t=-1,n=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=n,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,n,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-t,o=i+t,a=r+n,l=r-n;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,null!==this.view&&(n.object.view=Object.assign({},this.view)),n}}const KX=[.125,.215,.35,.446,.526,.582],HN=new jN,ZX=new ci;let GN=null,WN=0,qN=0,XN=!1;const pv=(1+Math.sqrt(5))/2,s_=1/pv,QX=[new qe(-pv,s_,0),new qe(pv,s_,0),new qe(-s_,0,pv),new qe(s_,0,pv),new qe(0,pv,-s_),new qe(0,pv,s_),new qe(-1,1,-1),new qe(1,1,-1),new qe(-1,1,1),new qe(1,1,1)];class JX{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,n=0,i=.1,r=100){GN=this._renderer.getRenderTarget(),WN=this._renderer.getActiveCubeFace(),qN=this._renderer.getActiveMipmapLevel(),XN=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,i,r,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,n=null){return this._fromTexture(t,n)}fromCubemap(t,n=null){return this._fromTexture(t,n)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=nY(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=tY(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(GN,WN,qN),this._renderer.xr.enabled=XN,t.scissorTest=!1,rE(t,0,0,t.width,t.height)}_fromTexture(t,n){this._setSize(t.mapping===tg||t.mapping===tv?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),GN=this._renderer.getRenderTarget(),WN=this._renderer.getActiveCubeFace(),qN=this._renderer.getActiveMipmapLevel(),XN=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=n||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:sl,minFilter:sl,generateMipmaps:!1,type:Vw,format:Gc,colorSpace:Fy,depthBuffer:!1},r=eY(t,n,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==n){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=eY(t,n,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function oEe(e){const t=[],n=[],i=[];let r=e;const s=e-4+1+KX.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);n.push(a);let l=1/a;o>e-4?l=KX[o-e+4-1]:0===o&&(l=0),i.push(l);const c=1/(a-2),d=-c,h=1+c,u=[d,d,h,d,h,h,d,d,h,h,d,h],p=6,m=6,v=3,g=2,b=1,x=new Float32Array(v*m*p),w=new Float32Array(g*m*p),P=new Float32Array(b*m*p);for(let D=0;D<p;D++){const R=D%3*2/3-1,N=D>2?0:-1;x.set([R,N,0,R+2/3,N,0,R+2/3,N+1,0,R,N,0,R+2/3,N+1,0,R,N+1,0],v*m*D),w.set(u,g*m*D),P.set([D,D,D,D,D,D],b*m*D)}const A=new jr;A.setAttribute("position",new xa(x,v)),A.setAttribute("uv",new xa(w,g)),A.setAttribute("faceIndex",new xa(P,b)),t.push(A),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(s)),this._blurMaterial=function aEe(e,t,n){const i=new Float32Array(20),r=new qe(0,1,0);return new Tf({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Jm,depthTest:!1,depthWrite:!1})}(s,t,n)}return r}_compileMaterial(t){const n=new uc(this._lodPlanes[0],t);this._renderer.compile(n,HN)}_sceneToCubeUV(t,n,i,r){const a=new Pl(90,1,n,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,u=d.toneMapping;d.getClearColor(ZX),d.toneMapping=eg,d.autoClear=!1;const p=new av({name:"PMREM.Background",side:Hc,depthWrite:!1,depthTest:!1}),m=new uc(new e_,p);let v=!1;const g=t.background;g?g.isColor&&(p.color.copy(g),t.background=null,v=!0):(p.color.copy(ZX),v=!0);for(let b=0;b<6;b++){const x=b%3;0===x?(a.up.set(0,l[b],0),a.lookAt(c[b],0,0)):1===x?(a.up.set(0,0,l[b]),a.lookAt(0,c[b],0)):(a.up.set(0,l[b],0),a.lookAt(0,0,c[b]));const w=this._cubeSize;rE(r,x*w,b>2?w:0,w,w),d.setRenderTarget(r),v&&d.render(m,a),d.render(t,a)}m.geometry.dispose(),m.material.dispose(),d.toneMapping=u,d.autoClear=h,t.background=g}_textureToCubeUV(t,n){const i=this._renderer,r=t.mapping===tg||t.mapping===tv;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=nY()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=tY());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new uc(this._lodPlanes[0],s);s.uniforms.envMap.value=t;const l=this._cubeSize;rE(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(o,HN)}_applyPMREM(t){const n=this._renderer,i=n.autoClear;n.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(t,s-1,s,o,QX[(r-s-1)%QX.length])}n.autoClear=i}_blur(t,n,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,n,i,r,"latitudinal",s),this._halfBlur(o,t,i,i,r,"longitudinal",s)}_halfBlur(t,n,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const h=new uc(this._lodPlanes[r],c),u=c.uniforms,p=this._sizeLods[i]-1,m=isFinite(s)?Math.PI/(2*p):2*Math.PI/39,v=s/m,g=isFinite(s)?1+Math.floor(3*v):20;g>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const b=[];let x=0;for(let R=0;R<20;++R){const N=R/v,k=Math.exp(-N*N/2);b.push(k),0===R?x+=k:R<g&&(x+=2*k)}for(let R=0;R<b.length;R++)b[R]=b[R]/x;u.envMap.value=t.texture,u.samples.value=g,u.weights.value=b,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a);const{_lodMax:w}=this;u.dTheta.value=m,u.mipInt.value=w-i;const P=this._sizeLods[r];rE(n,3*P*(r>w-4?r-w+4:0),4*(this._cubeSize-P),3*P,2*P),l.setRenderTarget(n),l.render(h,HN)}}function eY(e,t,n){const i=new rv(e,t,n);return i.texture.mapping=Bw,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function rE(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function tY(){return new Tf({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Jm,depthTest:!1,depthWrite:!1})}function nY(){return new Tf({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Jm,depthTest:!1,depthWrite:!1})}function lEe(e){let t=new WeakMap,n=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=t.get(l);void 0!==c&&(t.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===w2||l===M2,d=l===tg||l===tv;if(c||d){let h=t.get(a);if(a.isRenderTargetTexture&&a.pmremVersion!==(void 0!==h?h.texture.pmremVersion:0))return null===n&&(n=new JX(e)),h=c?n.fromEquirectangular(a,h):n.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,t.set(a,h),h.texture;if(void 0!==h)return h.texture;{const p=a.image;return c&&p&&p.height>0||d&&p&&function r(a){let l=0;for(let d=0;d<6;d++)void 0!==a[d]&&l++;return 6===l}(p)?(null===n&&(n=new JX(e)),h=c?n.fromEquirectangular(a):n.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,t.set(a,h),a.addEventListener("dispose",s),h.texture):null}}}return a},dispose:function o(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function cEe(e){const t={};function n(i){if(void 0!==t[i])return t[i];let r;switch(i){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(i)}return t[i]=r,r}return{has:function(i){return null!==n(i)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(i){const r=n(i);return null===r&&Gw("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function dEe(e,t,n,i){const r={},s=new WeakMap;function o(h){const u=h.target;null!==u.index&&t.remove(u.index);for(const m in u.attributes)t.remove(u.attributes[m]);for(const m in u.morphAttributes){const v=u.morphAttributes[m];for(let g=0,b=v.length;g<b;g++)t.remove(v[g])}u.removeEventListener("dispose",o),delete r[u.id];const p=s.get(u);p&&(t.remove(p),s.delete(u)),i.releaseStatesOfGeometry(u),!0===u.isInstancedBufferGeometry&&delete u._maxInstanceCount,n.memory.geometries--}function c(h){const u=[],p=h.index,m=h.attributes.position;let v=0;if(null!==p){const x=p.array;v=p.version;for(let w=0,P=x.length;w<P;w+=3){const A=x[w+0],D=x[w+1],R=x[w+2];u.push(A,D,D,R,R,A)}}else{if(void 0===m)return;v=m.version;for(let w=0,P=m.array.length/3-1;w<P;w+=3){const A=w+0,D=w+1,R=w+2;u.push(A,D,D,R,R,A)}}const g=new(MX(u)?jX:VX)(u,1);g.version=v;const b=s.get(h);b&&t.remove(b),s.set(h,g)}return{get:function a(h,u){return!0===r[u.id]||(u.addEventListener("dispose",o),r[u.id]=!0,n.memory.geometries++),u},update:function l(h){const u=h.attributes;for(const m in u)t.update(u[m],e.ARRAY_BUFFER);const p=h.morphAttributes;for(const m in p){const v=p[m];for(let g=0,b=v.length;g<b;g++)t.update(v[g],e.ARRAY_BUFFER)}},getWireframeAttribute:function d(h){const u=s.get(h);if(u){const p=h.index;null!==p&&u.version<p.version&&c(h)}else c(h);return s.get(h)}}}function hEe(e,t,n){let i,s,o;function c(u,p,m){0!==m&&(e.drawElementsInstanced(i,p,s,u*o,m),n.update(p,i,m))}this.setMode=function r(u){i=u},this.setIndex=function a(u){s=u.type,o=u.bytesPerElement},this.render=function l(u,p){e.drawElements(i,p,s,u*o),n.update(p,i,1)},this.renderInstances=c,this.renderMultiDraw=function d(u,p,m){if(0===m)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,p,0,s,u,0,m);let g=0;for(let b=0;b<m;b++)g+=p[b];n.update(g,i,1)},this.renderMultiDrawInstances=function h(u,p,m,v){if(0===m)return;const g=t.get("WEBGL_multi_draw");if(null===g)for(let b=0;b<u.length;b++)c(u[b]/o,p[b],v[b]);else{g.multiDrawElementsInstancedWEBGL(i,p,0,s,u,0,v,0,m);let b=0;for(let x=0;x<m;x++)b+=p[x]*v[x];n.update(b,i,1)}}}function uEe(e){const n={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0},update:function i(s,o,a){switch(n.calls++,o){case e.TRIANGLES:n.triangles+=a*(s/3);break;case e.LINES:n.lines+=a*(s/2);break;case e.LINE_STRIP:n.lines+=a*(s-1);break;case e.LINE_LOOP:n.lines+=a*s;break;case e.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function pEe(e,t,n){const i=new WeakMap,r=new xs;return{update:function s(o,a,l){const c=o.morphTargetInfluences,d=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=void 0!==d?d.length:0;let u=i.get(a);if(void 0===u||u.count!==h){let k=function(){R.dispose(),i.delete(a),a.removeEventListener("dispose",k)};void 0!==u&&u.texture.dispose();const p=void 0!==a.morphAttributes.position,m=void 0!==a.morphAttributes.normal,v=void 0!==a.morphAttributes.color,g=a.morphAttributes.position||[],b=a.morphAttributes.normal||[],x=a.morphAttributes.color||[];let w=0;!0===p&&(w=1),!0===m&&(w=2),!0===v&&(w=3);let P=a.attributes.position.count*w,A=1;P>t.maxTextureSize&&(A=Math.ceil(P/t.maxTextureSize),P=t.maxTextureSize);const D=new Float32Array(P*A*4*h),R=new xN(D,P,A,h);R.type=Id,R.needsUpdate=!0;const N=4*w;for(let L=0;L<h;L++){const Q=g[L],le=b[L],ae=x[L],he=P*A*4*L;for(let xe=0;xe<Q.count;xe++){const _e=xe*N;!0===p&&(r.fromBufferAttribute(Q,xe),D[he+_e+0]=r.x,D[he+_e+1]=r.y,D[he+_e+2]=r.z,D[he+_e+3]=0),!0===m&&(r.fromBufferAttribute(le,xe),D[he+_e+4]=r.x,D[he+_e+5]=r.y,D[he+_e+6]=r.z,D[he+_e+7]=0),!0===v&&(r.fromBufferAttribute(ae,xe),D[he+_e+8]=r.x,D[he+_e+9]=r.y,D[he+_e+10]=r.z,D[he+_e+11]=4===ae.itemSize?r.w:1)}}u={count:h,texture:R,size:new bn(P,A)},i.set(a,u),a.addEventListener("dispose",k)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)l.getUniforms().setValue(e,"morphTexture",o.morphTexture,n);else{let p=0;for(let v=0;v<c.length;v++)p+=c[v];const m=a.morphTargetsRelative?1:1-p;l.getUniforms().setValue(e,"morphTargetBaseInfluence",m),l.getUniforms().setValue(e,"morphTargetInfluences",c)}l.getUniforms().setValue(e,"morphTargetsTexture",u.texture,n),l.getUniforms().setValue(e,"morphTargetsTextureSize",u.size)}}}function fEe(e,t,n,i){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),null!==c.instanceColor&&n.remove(c.instanceColor)}return{update:function s(l){const c=i.render.frame,h=t.get(l,l.geometry);if(r.get(h)!==c&&(t.update(h),r.set(h,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),r.get(l)!==c&&(n.update(l.instanceMatrix,e.ARRAY_BUFFER),null!==l.instanceColor&&n.update(l.instanceColor,e.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const u=l.skeleton;r.get(u)!==c&&(u.update(),r.set(u,c))}return h},dispose:function o(){r=new WeakMap}}}class iY extends wf{constructor(t,n,i,r,s,o,a,l,c,d=Ry){if(d!==Ry&&d!==ky)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&d===Ry&&(i=ng),void 0===i&&d===ky&&(i=Iy),super(null,r,s,o,a,l,d,i,c),this.isDepthTexture=!0,this.image={width:t,height:n},this.magFilter=void 0!==a?a:Fl,this.minFilter=void 0!==l?l:Fl,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const n=super.toJSON(t);return null!==this.compareFunction&&(n.compareFunction=this.compareFunction),n}}const rY=new wf,sY=new iY(1,1),oY=new xN,aY=new TX,lY=new eE,cY=[],dY=[],hY=new Float32Array(16),uY=new Float32Array(9),pY=new Float32Array(4);function o_(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let s=cY[r];if(void 0===s&&(s=new Float32Array(r),cY[r]=s),0!==t){i.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=n,e[o].toArray(s,a)}return s}function ja(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Ha(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function sE(e,t){let n=dY[t];void 0===n&&(n=new Int32Array(t),dY[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function mEe(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function gEe(e,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ja(n,t))return;e.uniform2fv(this.addr,t),Ha(n,t)}}function vEe(e,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(ja(n,t))return;e.uniform3fv(this.addr,t),Ha(n,t)}}function yEe(e,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ja(n,t))return;e.uniform4fv(this.addr,t),Ha(n,t)}}function _Ee(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(ja(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Ha(n,t)}else{if(ja(n,i))return;pY.set(i),e.uniformMatrix2fv(this.addr,!1,pY),Ha(n,i)}}function bEe(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(ja(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Ha(n,t)}else{if(ja(n,i))return;uY.set(i),e.uniformMatrix3fv(this.addr,!1,uY),Ha(n,i)}}function xEe(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(ja(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Ha(n,t)}else{if(ja(n,i))return;hY.set(i),e.uniformMatrix4fv(this.addr,!1,hY),Ha(n,i)}}function wEe(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function MEe(e,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ja(n,t))return;e.uniform2iv(this.addr,t),Ha(n,t)}}function CEe(e,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(ja(n,t))return;e.uniform3iv(this.addr,t),Ha(n,t)}}function PEe(e,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ja(n,t))return;e.uniform4iv(this.addr,t),Ha(n,t)}}function SEe(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function EEe(e,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ja(n,t))return;e.uniform2uiv(this.addr,t),Ha(n,t)}}function OEe(e,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(ja(n,t))return;e.uniform3uiv(this.addr,t),Ha(n,t)}}function AEe(e,t){const n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ja(n,t))return;e.uniform4uiv(this.addr,t),Ha(n,t)}}function TEe(e,t,n){const i=this.cache,r=n.allocateTextureUnit();let s;i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),this.type===e.SAMPLER_2D_SHADOW?(sY.compareFunction=bX,s=sY):s=rY,n.setTexture2D(t||s,r)}function DEe(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||aY,r)}function IEe(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||lY,r)}function REe(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||oY,r)}function NEe(e,t){e.uniform1fv(this.addr,t)}function LEe(e,t){const n=o_(t,this.size,2);e.uniform2fv(this.addr,n)}function FEe(e,t){const n=o_(t,this.size,3);e.uniform3fv(this.addr,n)}function BEe(e,t){const n=o_(t,this.size,4);e.uniform4fv(this.addr,n)}function zEe(e,t){const n=o_(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function UEe(e,t){const n=o_(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function VEe(e,t){const n=o_(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function jEe(e,t){e.uniform1iv(this.addr,t)}function HEe(e,t){e.uniform2iv(this.addr,t)}function GEe(e,t){e.uniform3iv(this.addr,t)}function WEe(e,t){e.uniform4iv(this.addr,t)}function qEe(e,t){e.uniform1uiv(this.addr,t)}function XEe(e,t){e.uniform2uiv(this.addr,t)}function YEe(e,t){e.uniform3uiv(this.addr,t)}function $Ee(e,t){e.uniform4uiv(this.addr,t)}function KEe(e,t,n){const i=this.cache,r=t.length,s=sE(n,r);ja(i,s)||(e.uniform1iv(this.addr,s),Ha(i,s));for(let o=0;o!==r;++o)n.setTexture2D(t[o]||rY,s[o])}function ZEe(e,t,n){const i=this.cache,r=t.length,s=sE(n,r);ja(i,s)||(e.uniform1iv(this.addr,s),Ha(i,s));for(let o=0;o!==r;++o)n.setTexture3D(t[o]||aY,s[o])}function QEe(e,t,n){const i=this.cache,r=t.length,s=sE(n,r);ja(i,s)||(e.uniform1iv(this.addr,s),Ha(i,s));for(let o=0;o!==r;++o)n.setTextureCube(t[o]||lY,s[o])}function JEe(e,t,n){const i=this.cache,r=t.length,s=sE(n,r);ja(i,s)||(e.uniform1iv(this.addr,s),Ha(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(t[o]||oY,s[o])}class tOe{constructor(t,n,i){this.id=t,this.addr=i,this.cache=[],this.type=n.type,this.setValue=function kEe(e){switch(e){case 5126:return mEe;case 35664:return gEe;case 35665:return vEe;case 35666:return yEe;case 35674:return _Ee;case 35675:return bEe;case 35676:return xEe;case 5124:case 35670:return wEe;case 35667:case 35671:return MEe;case 35668:case 35672:return CEe;case 35669:case 35673:return PEe;case 5125:return SEe;case 36294:return EEe;case 36295:return OEe;case 36296:return AEe;case 35678:case 36198:case 36298:case 36306:case 35682:return TEe;case 35679:case 36299:case 36307:return DEe;case 35680:case 36300:case 36308:case 36293:return IEe;case 36289:case 36303:case 36311:case 36292:return REe}}(n.type)}}class nOe{constructor(t,n,i){this.id=t,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=function eOe(e){switch(e){case 5126:return NEe;case 35664:return LEe;case 35665:return FEe;case 35666:return BEe;case 35674:return zEe;case 35675:return UEe;case 35676:return VEe;case 5124:case 35670:return jEe;case 35667:case 35671:return HEe;case 35668:case 35672:return GEe;case 35669:case 35673:return WEe;case 5125:return qEe;case 36294:return XEe;case 36295:return YEe;case 36296:return $Ee;case 35678:case 36198:case 36298:case 36306:case 35682:return KEe;case 35679:case 36299:case 36307:return ZEe;case 35680:case 36300:case 36308:case 36293:return QEe;case 36289:case 36303:case 36311:case 36292:return JEe}}(n.type)}}class iOe{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,n,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(t,n[a.id],i)}}}const $N=/(\w+)(\])?(\[|\.)?/g;function fY(e,t){e.seq.push(t),e.map[t.id]=t}function rOe(e,t,n){const i=e.name,r=i.length;for($N.lastIndex=0;;){const s=$N.exec(i);let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&$N.lastIndex+2===r){fY(n,void 0===c?new tOe(a,e,t):new nOe(a,e,t));break}{let h=n.map[a];void 0===h&&(h=new iOe(a),fY(n,h)),n=h}}}class oE{constructor(t,n){this.seq=[],this.map={};const i=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=t.getActiveUniform(n,r);rOe(s,t.getUniformLocation(n,s.name),this)}}setValue(t,n,i,r){const s=this.map[n];void 0!==s&&s.setValue(t,i,r)}setOptional(t,n,i){const r=n[i];void 0!==r&&this.setValue(t,i,r)}static upload(t,n,i,r){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=i[a.id];!1!==l.needsUpdate&&a.setValue(t,l.value,r)}}static seqWithValue(t,n){const i=[];for(let r=0,s=t.length;r!==s;++r){const o=t[r];o.id in n&&i.push(o)}return i}}function mY(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}const sOe=37297;let oOe=0;const gY=new Er;function vY(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function aOe(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),s=Math.min(t+6,n.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===t?">":" "} ${a}: ${n[o]}`)}return i.join("\n")}(e.getShaderSource(t),o)}return r}function cOe(e,t){const n=function lOe(e){ps._getMatrix(gY,ps.workingColorSpace,e);const t=`mat3( ${gY.elements.map(n=>n.toFixed(4))} )`;switch(ps.getTransfer(e)){case N2:return[t,"LinearTransferOETF"];case $s:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return[`vec4 ${e}( vec4 value ) {`,`\treturn ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join("\n")}function dOe(e,t){let n;switch(t){case jCe:n="Linear";break;case HCe:n="Reinhard";break;case GCe:n="Cineon";break;case WCe:n="ACESFilmic";break;case XCe:n="AgX";break;case YCe:n="Neutral";break;case qCe:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const aE=new qe;function Jw(e){return""!==e}function yY(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function _Y(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const mOe=/^[ \t]*#include +<([\w\d./]+)>/gm;function KN(e){return e.replace(mOe,vOe)}const gOe=new Map;function vOe(e,t){let n=kr[t];if(void 0===n){const i=gOe.get(t);if(void 0===i)throw new Error("Can not resolve #include <"+t+">");n=kr[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i)}return KN(n)}const yOe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function bY(e){return e.replace(yOe,_Oe)}function _Oe(e,t,n,i){let r="";for(let s=parseInt(t);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function xY(e){let t=`precision ${e.precision} float;\n\tprecision ${e.precision} int;\n\tprecision ${e.precision} sampler2D;\n\tprecision ${e.precision} samplerCube;\n\tprecision ${e.precision} sampler3D;\n\tprecision ${e.precision} sampler2DArray;\n\tprecision ${e.precision} sampler2DShadow;\n\tprecision ${e.precision} samplerCubeShadow;\n\tprecision ${e.precision} sampler2DArrayShadow;\n\tprecision ${e.precision} isampler2D;\n\tprecision ${e.precision} isampler3D;\n\tprecision ${e.precision} isamplerCube;\n\tprecision ${e.precision} isampler2DArray;\n\tprecision ${e.precision} usampler2D;\n\tprecision ${e.precision} usampler3D;\n\tprecision ${e.precision} usamplerCube;\n\tprecision ${e.precision} usampler2DArray;\n\t`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function POe(e,t,n,i){const r=e.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=function bOe(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===iX?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===xCe?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===gf&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function xOe(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case tg:case tv:t="ENVMAP_TYPE_CUBE";break;case Bw:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),d=function wOe(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===tv&&(t="ENVMAP_MODE_REFRACTION"),t}(n),h=function MOe(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case x2:t="ENVMAP_BLENDING_MULTIPLY";break;case UCe:t="ENVMAP_BLENDING_MIX";break;case VCe:t="ENVMAP_BLENDING_ADD"}return t}(n),u=function COe(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),p=function uOe(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Jw).join("\n")}(n),m=function pOe(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(s),v=r.createProgram();let g,b,x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(Jw).join("\n"),g.length>0&&(g+="\n"),b=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(Jw).join("\n"),b.length>0&&(b+="\n")):(g=[xY(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Jw).join("\n"),b=[xY(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",u?"#define CUBEUV_TEXEL_WIDTH "+u.texelWidth:"",u?"#define CUBEUV_TEXEL_HEIGHT "+u.texelHeight:"",u?"#define CUBEUV_MAX_MIP "+u.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==eg?"#define TONE_MAPPING":"",n.toneMapping!==eg?kr.tonemapping_pars_fragment:"",n.toneMapping!==eg?dOe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",kr.colorspace_pars_fragment,cOe("linearToOutputTexel",n.outputColorSpace),(ps.getLuminanceCoefficients(aE),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${aE.x.toFixed(4)}, ${aE.y.toFixed(4)}, ${aE.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Jw).join("\n")),o=KN(o),o=yY(o,n),o=_Y(o,n),a=KN(a),a=yY(a,n),a=_Y(a,n),o=bY(o),a=bY(a),!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,b=["#define varying in",n.glslVersion===xX?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===xX?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);const P=x+b+a,A=mY(r,r.VERTEX_SHADER,x+g+o),D=mY(r,r.FRAGMENT_SHADER,P);function R(Q){if(e.debug.checkShaderErrors){const le=r.getProgramInfoLog(v).trim(),ae=r.getShaderInfoLog(A).trim(),he=r.getShaderInfoLog(D).trim();let xe=!0,_e=!0;if(!1===r.getProgramParameter(v,r.LINK_STATUS))if(xe=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(r,v,A,D);else{const be=vY(r,A,"vertex"),me=vY(r,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+Q.name+"\nMaterial Type: "+Q.type+"\n\nProgram Info Log: "+le+"\n"+be+"\n"+me)}else""!==le?console.warn("THREE.WebGLProgram: Program Info Log:",le):(""===ae||""===he)&&(_e=!1);_e&&(Q.diagnostics={runnable:xe,programLog:le,vertexShader:{log:ae,prefix:g},fragmentShader:{log:he,prefix:b}})}r.deleteShader(A),r.deleteShader(D),N=new oE(r,v),k=function fOe(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=e.getActiveAttrib(t,r),o=s.name;let a=1;s.type===e.FLOAT_MAT2&&(a=2),s.type===e.FLOAT_MAT3&&(a=3),s.type===e.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:e.getAttribLocation(t,o),locationSize:a}}return n}(r,v)}let N,k;r.attachShader(v,A),r.attachShader(v,D),void 0!==n.index0AttributeName?r.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),this.getUniforms=function(){return void 0===N&&R(this),N},this.getAttributes=function(){return void 0===k&&R(this),k};let L=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===L&&(L=r.getProgramParameter(v,sOe)),L},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=oOe++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=A,this.fragmentShader=D,this}let SOe=0;class EOe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const i=t.fragmentShader,r=this._getShaderStage(t.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(t){const n=this.materialCache.get(t);for(const i of n)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const n=this.materialCache;let i=n.get(t);return void 0===i&&(i=new Set,n.set(t,i)),i}_getShaderStage(t){const n=this.shaderCache;let i=n.get(t);return void 0===i&&(i=new OOe(t),n.set(t,i)),i}}class OOe{constructor(t){this.id=SOe++,this.code=t,this.usedTimes=0}}function AOe(e,t,n,i,r,s,o){const a=new ON,l=new EOe,c=new Set,d=[],h=r.logarithmicDepthBuffer,u=r.vertexTextures;let p=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(k){return c.add(k),0===k?"uv":`uv${k}`}return{getParameters:function g(k,L,Q,le,ae){const he=le.fog,xe=ae.geometry,be=(k.isMeshStandardMaterial?n:t).get(k.envMap||(k.isMeshStandardMaterial?le.environment:null)),me=be&&be.mapping===Bw?be.image.height:null,Te=m[k.type];null!==k.precision&&(p=r.getMaxPrecision(k.precision),p!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",p,"instead."));const Le=xe.morphAttributes.position||xe.morphAttributes.normal||xe.morphAttributes.color,ke=void 0!==Le?Le.length:0;let Qe,Pe,Be,Fe,Re=0;if(void 0!==xe.morphAttributes.position&&(Re=1),void 0!==xe.morphAttributes.normal&&(Re=2),void 0!==xe.morphAttributes.color&&(Re=3),Te){const ki=op[Te];Qe=ki.vertexShader,Pe=ki.fragmentShader}else Qe=k.vertexShader,Pe=k.fragmentShader,l.update(k),Be=l.getVertexShaderID(k),Fe=l.getFragmentShaderID(k);const Ze=e.getRenderTarget(),$e=e.state.buffers.depth.getReversed(),ft=!0===ae.isInstancedMesh,it=!0===ae.isBatchedMesh,Nt=!!k.map,st=!!be,Ie=!!k.aoMap,Yt=!!k.lightMap,wt=!!k.bumpMap,Xt=!!k.normalMap,Ct=!!k.displacementMap,Wt=!!k.emissiveMap,Qt=!!k.metalnessMap,Ae=!!k.roughnessMap,re=k.anisotropy>0,fe=k.clearcoat>0,ut=k.iridescence>0,et=k.sheen>0,Lt=k.transmission>0,$t=re&&!!k.anisotropyMap,qt=fe&&!!k.clearcoatMap,Bt=fe&&!!k.clearcoatNormalMap,It=fe&&!!k.clearcoatRoughnessMap,sn=ut&&!!k.iridescenceMap,fn=ut&&!!k.iridescenceThicknessMap,On=et&&!!k.sheenColorMap,pn=et&&!!k.sheenRoughnessMap,ai=!!k.specularMap,di=!!k.specularColorMap,sr=!!k.specularIntensityMap,Ce=Lt&&!!k.transmissionMap,pt=Lt&&!!k.thicknessMap,vt=!!k.alphaMap,hi=!!k.extensions;let Hr=eg;k.toneMapped&&(null===Ze||!0===Ze.isXRRenderTarget)&&(Hr=e.toneMapping);const wo={shaderID:Te,shaderType:k.type,shaderName:k.name,vertexShader:Qe,fragmentShader:Pe,defines:k.defines,customVertexShaderID:Be,customFragmentShaderID:Fe,isRawShaderMaterial:!0===k.isRawShaderMaterial,glslVersion:k.glslVersion,precision:p,batching:it,batchingColor:it&&null!==ae._colorsTexture,instancing:ft,instancingColor:ft&&null!==ae.instanceColor,instancingMorph:ft&&null!==ae.morphTexture,supportsVertexTextures:u,outputColorSpace:null===Ze?e.outputColorSpace:!0===Ze.isXRRenderTarget?Ze.texture.colorSpace:Fy,alphaToCoverage:!!k.alphaToCoverage,map:Nt,matcap:!!k.matcap,envMap:st,envMapMode:st&&be.mapping,envMapCubeUVHeight:me,aoMap:Ie,lightMap:Yt,bumpMap:wt,normalMap:Xt,displacementMap:u&&Ct,emissiveMap:Wt,normalMapObjectSpace:Xt&&k.normalMapType===tPe,normalMapTangentSpace:Xt&&k.normalMapType===nv,metalnessMap:Qt,roughnessMap:Ae,anisotropy:re,anisotropyMap:$t,clearcoat:fe,clearcoatMap:qt,clearcoatNormalMap:Bt,clearcoatRoughnessMap:It,dispersion:k.dispersion>0,iridescence:ut,iridescenceMap:sn,iridescenceThicknessMap:fn,sheen:et,sheenColorMap:On,sheenRoughnessMap:pn,specularMap:ai,specularColorMap:di,specularIntensityMap:sr,transmission:Lt,transmissionMap:Ce,thicknessMap:pt,gradientMap:!!k.gradientMap,opaque:!1===k.transparent&&k.blending===Ty&&!1===k.alphaToCoverage,alphaMap:vt,alphaTest:k.alphaTest>0,alphaHash:!!k.alphaHash,combine:k.combine,mapUv:Nt&&v(k.map.channel),aoMapUv:Ie&&v(k.aoMap.channel),lightMapUv:Yt&&v(k.lightMap.channel),bumpMapUv:wt&&v(k.bumpMap.channel),normalMapUv:Xt&&v(k.normalMap.channel),displacementMapUv:Ct&&v(k.displacementMap.channel),emissiveMapUv:Wt&&v(k.emissiveMap.channel),metalnessMapUv:Qt&&v(k.metalnessMap.channel),roughnessMapUv:Ae&&v(k.roughnessMap.channel),anisotropyMapUv:$t&&v(k.anisotropyMap.channel),clearcoatMapUv:qt&&v(k.clearcoatMap.channel),clearcoatNormalMapUv:Bt&&v(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:It&&v(k.clearcoatRoughnessMap.channel),iridescenceMapUv:sn&&v(k.iridescenceMap.channel),iridescenceThicknessMapUv:fn&&v(k.iridescenceThicknessMap.channel),sheenColorMapUv:On&&v(k.sheenColorMap.channel),sheenRoughnessMapUv:pn&&v(k.sheenRoughnessMap.channel),specularMapUv:ai&&v(k.specularMap.channel),specularColorMapUv:di&&v(k.specularColorMap.channel),specularIntensityMapUv:sr&&v(k.specularIntensityMap.channel),transmissionMapUv:Ce&&v(k.transmissionMap.channel),thicknessMapUv:pt&&v(k.thicknessMap.channel),alphaMapUv:vt&&v(k.alphaMap.channel),vertexTangents:!!xe.attributes.tangent&&(Xt||re),vertexColors:k.vertexColors,vertexAlphas:!0===k.vertexColors&&!!xe.attributes.color&&4===xe.attributes.color.itemSize,pointsUvs:!0===ae.isPoints&&!!xe.attributes.uv&&(Nt||vt),fog:!!he,useFog:!0===k.fog,fogExp2:!!he&&he.isFogExp2,flatShading:!0===k.flatShading,sizeAttenuation:!0===k.sizeAttenuation,logarithmicDepthBuffer:h,reverseDepthBuffer:$e,skinning:!0===ae.isSkinnedMesh,morphTargets:void 0!==xe.morphAttributes.position,morphNormals:void 0!==xe.morphAttributes.normal,morphColors:void 0!==xe.morphAttributes.color,morphTargetsCount:ke,morphTextureStride:Re,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:k.dithering,shadowMapEnabled:e.shadowMap.enabled&&Q.length>0,shadowMapType:e.shadowMap.type,toneMapping:Hr,decodeVideoTexture:Nt&&!0===k.map.isVideoTexture&&ps.getTransfer(k.map.colorSpace)===$s,decodeVideoTextureEmissive:Wt&&!0===k.emissiveMap.isVideoTexture&&ps.getTransfer(k.emissiveMap.colorSpace)===$s,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===vf,flipSided:k.side===Hc,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionClipCullDistance:hi&&!0===k.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(hi&&!0===k.extensions.multiDraw||it)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:k.customProgramCacheKey()};return wo.vertexUv1s=c.has(1),wo.vertexUv2s=c.has(2),wo.vertexUv3s=c.has(3),c.clear(),wo},getProgramCacheKey:function b(k){const L=[];if(k.shaderID?L.push(k.shaderID):(L.push(k.customVertexShaderID),L.push(k.customFragmentShaderID)),void 0!==k.defines)for(const Q in k.defines)L.push(Q),L.push(k.defines[Q]);return!1===k.isRawShaderMaterial&&(function x(k,L){k.push(L.precision),k.push(L.outputColorSpace),k.push(L.envMapMode),k.push(L.envMapCubeUVHeight),k.push(L.mapUv),k.push(L.alphaMapUv),k.push(L.lightMapUv),k.push(L.aoMapUv),k.push(L.bumpMapUv),k.push(L.normalMapUv),k.push(L.displacementMapUv),k.push(L.emissiveMapUv),k.push(L.metalnessMapUv),k.push(L.roughnessMapUv),k.push(L.anisotropyMapUv),k.push(L.clearcoatMapUv),k.push(L.clearcoatNormalMapUv),k.push(L.clearcoatRoughnessMapUv),k.push(L.iridescenceMapUv),k.push(L.iridescenceThicknessMapUv),k.push(L.sheenColorMapUv),k.push(L.sheenRoughnessMapUv),k.push(L.specularMapUv),k.push(L.specularColorMapUv),k.push(L.specularIntensityMapUv),k.push(L.transmissionMapUv),k.push(L.thicknessMapUv),k.push(L.combine),k.push(L.fogExp2),k.push(L.sizeAttenuation),k.push(L.morphTargetsCount),k.push(L.morphAttributeCount),k.push(L.numDirLights),k.push(L.numPointLights),k.push(L.numSpotLights),k.push(L.numSpotLightMaps),k.push(L.numHemiLights),k.push(L.numRectAreaLights),k.push(L.numDirLightShadows),k.push(L.numPointLightShadows),k.push(L.numSpotLightShadows),k.push(L.numSpotLightShadowsWithMaps),k.push(L.numLightProbes),k.push(L.shadowMapType),k.push(L.toneMapping),k.push(L.numClippingPlanes),k.push(L.numClipIntersection),k.push(L.depthPacking)}(L,k),function w(k,L){a.disableAll(),L.supportsVertexTextures&&a.enable(0),L.instancing&&a.enable(1),L.instancingColor&&a.enable(2),L.instancingMorph&&a.enable(3),L.matcap&&a.enable(4),L.envMap&&a.enable(5),L.normalMapObjectSpace&&a.enable(6),L.normalMapTangentSpace&&a.enable(7),L.clearcoat&&a.enable(8),L.iridescence&&a.enable(9),L.alphaTest&&a.enable(10),L.vertexColors&&a.enable(11),L.vertexAlphas&&a.enable(12),L.vertexUv1s&&a.enable(13),L.vertexUv2s&&a.enable(14),L.vertexUv3s&&a.enable(15),L.vertexTangents&&a.enable(16),L.anisotropy&&a.enable(17),L.alphaHash&&a.enable(18),L.batching&&a.enable(19),L.dispersion&&a.enable(20),L.batchingColor&&a.enable(21),k.push(a.mask),a.disableAll(),L.fog&&a.enable(0),L.useFog&&a.enable(1),L.flatShading&&a.enable(2),L.logarithmicDepthBuffer&&a.enable(3),L.reverseDepthBuffer&&a.enable(4),L.skinning&&a.enable(5),L.morphTargets&&a.enable(6),L.morphNormals&&a.enable(7),L.morphColors&&a.enable(8),L.premultipliedAlpha&&a.enable(9),L.shadowMapEnabled&&a.enable(10),L.doubleSided&&a.enable(11),L.flipSided&&a.enable(12),L.useDepthPacking&&a.enable(13),L.dithering&&a.enable(14),L.transmission&&a.enable(15),L.sheen&&a.enable(16),L.opaque&&a.enable(17),L.pointsUvs&&a.enable(18),L.decodeVideoTexture&&a.enable(19),L.decodeVideoTextureEmissive&&a.enable(20),L.alphaToCoverage&&a.enable(21),k.push(a.mask)}(L,k),L.push(e.outputColorSpace)),L.push(k.customProgramCacheKey),L.join()},getUniforms:function P(k){const L=m[k.type];let Q;return Q=L?qPe.clone(op[L].uniforms):k.uniforms,Q},acquireProgram:function A(k,L){let Q;for(let le=0,ae=d.length;le<ae;le++){const he=d[le];if(he.cacheKey===L){Q=he,++Q.usedTimes;break}}return void 0===Q&&(Q=new POe(e,L,k,s),d.push(Q)),Q},releaseProgram:function D(k){if(0==--k.usedTimes){const L=d.indexOf(k);d[L]=d[d.length-1],d.pop(),k.destroy()}},releaseShaderCache:function R(k){l.remove(k)},programs:d,dispose:function N(){l.dispose()}}}function TOe(){let e=new WeakMap;return{has:function t(o){return e.has(o)},get:function n(o){let a=e.get(o);return void 0===a&&(a={},e.set(o,a)),a},remove:function i(o){e.delete(o)},update:function r(o,a,l){e.get(o)[a]=l},dispose:function s(){e=new WeakMap}}}function DOe(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function wY(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function MY(){const e=[];let t=0;const n=[],i=[],r=[];function o(h,u,p,m,v,g){let b=e[t];return void 0===b?(b={id:h.id,object:h,geometry:u,material:p,groupOrder:m,renderOrder:h.renderOrder,z:v,group:g},e[t]=b):(b.id=h.id,b.object=h,b.geometry=u,b.material=p,b.groupOrder=m,b.renderOrder=h.renderOrder,b.z=v,b.group=g),t++,b}return{opaque:n,transmissive:i,transparent:r,init:function s(){t=0,n.length=0,i.length=0,r.length=0},push:function a(h,u,p,m,v,g){const b=o(h,u,p,m,v,g);p.transmission>0?i.push(b):!0===p.transparent?r.push(b):n.push(b)},unshift:function l(h,u,p,m,v,g){const b=o(h,u,p,m,v,g);p.transmission>0?i.unshift(b):!0===p.transparent?r.unshift(b):n.unshift(b)},finish:function d(){for(let h=t,u=e.length;h<u;h++){const p=e[h];if(null===p.id)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}},sort:function c(h,u){n.length>1&&n.sort(h||DOe),i.length>1&&i.sort(u||wY),r.length>1&&r.sort(u||wY)}}}function IOe(){let e=new WeakMap;return{get:function t(i,r){const s=e.get(i);let o;return void 0===s?(o=new MY,e.set(i,[o])):r>=s.length?(o=new MY,s.push(o)):o=s[r],o},dispose:function n(){e=new WeakMap}}}function ROe(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new qe,color:new ci};break;case"SpotLight":n={position:new qe,direction:new qe,color:new ci,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new qe,color:new ci,distance:0,decay:0};break;case"HemisphereLight":n={direction:new qe,skyColor:new ci,groundColor:new ci};break;case"RectAreaLight":n={color:new ci,position:new qe,halfWidth:new qe,halfHeight:new qe}}return e[t.id]=n,n}}}let NOe=0;function LOe(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function FOe(e){const t=new ROe,n=function kOe(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new bn};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new bn,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new qe);const r=new qe,s=new rr,o=new rr;return{setup:function a(c){let d=0,h=0,u=0;for(let k=0;k<9;k++)i.probe[k].set(0,0,0);let p=0,m=0,v=0,g=0,b=0,x=0,w=0,P=0,A=0,D=0,R=0;c.sort(LOe);for(let k=0,L=c.length;k<L;k++){const Q=c[k],le=Q.color,ae=Q.intensity,he=Q.distance,xe=Q.shadow&&Q.shadow.map?Q.shadow.map.texture:null;if(Q.isAmbientLight)d+=le.r*ae,h+=le.g*ae,u+=le.b*ae;else if(Q.isLightProbe){for(let _e=0;_e<9;_e++)i.probe[_e].addScaledVector(Q.sh.coefficients[_e],ae);R++}else if(Q.isDirectionalLight){const _e=t.get(Q);if(_e.color.copy(Q.color).multiplyScalar(Q.intensity),Q.castShadow){const be=Q.shadow,me=n.get(Q);me.shadowIntensity=be.intensity,me.shadowBias=be.bias,me.shadowNormalBias=be.normalBias,me.shadowRadius=be.radius,me.shadowMapSize=be.mapSize,i.directionalShadow[p]=me,i.directionalShadowMap[p]=xe,i.directionalShadowMatrix[p]=Q.shadow.matrix,x++}i.directional[p]=_e,p++}else if(Q.isSpotLight){const _e=t.get(Q);_e.position.setFromMatrixPosition(Q.matrixWorld),_e.color.copy(le).multiplyScalar(ae),_e.distance=he,_e.coneCos=Math.cos(Q.angle),_e.penumbraCos=Math.cos(Q.angle*(1-Q.penumbra)),_e.decay=Q.decay,i.spot[v]=_e;const be=Q.shadow;if(Q.map&&(i.spotLightMap[A]=Q.map,A++,be.updateMatrices(Q),Q.castShadow&&D++),i.spotLightMatrix[v]=be.matrix,Q.castShadow){const me=n.get(Q);me.shadowIntensity=be.intensity,me.shadowBias=be.bias,me.shadowNormalBias=be.normalBias,me.shadowRadius=be.radius,me.shadowMapSize=be.mapSize,i.spotShadow[v]=me,i.spotShadowMap[v]=xe,P++}v++}else if(Q.isRectAreaLight){const _e=t.get(Q);_e.color.copy(le).multiplyScalar(ae),_e.halfWidth.set(.5*Q.width,0,0),_e.halfHeight.set(0,.5*Q.height,0),i.rectArea[g]=_e,g++}else if(Q.isPointLight){const _e=t.get(Q);if(_e.color.copy(Q.color).multiplyScalar(Q.intensity),_e.distance=Q.distance,_e.decay=Q.decay,Q.castShadow){const be=Q.shadow,me=n.get(Q);me.shadowIntensity=be.intensity,me.shadowBias=be.bias,me.shadowNormalBias=be.normalBias,me.shadowRadius=be.radius,me.shadowMapSize=be.mapSize,me.shadowCameraNear=be.camera.near,me.shadowCameraFar=be.camera.far,i.pointShadow[m]=me,i.pointShadowMap[m]=xe,i.pointShadowMatrix[m]=Q.shadow.matrix,w++}i.point[m]=_e,m++}else if(Q.isHemisphereLight){const _e=t.get(Q);_e.skyColor.copy(Q.color).multiplyScalar(ae),_e.groundColor.copy(Q.groundColor).multiplyScalar(ae),i.hemi[b]=_e,b++}}g>0&&(!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=$n.LTC_FLOAT_1,i.rectAreaLTC2=$n.LTC_FLOAT_2):(i.rectAreaLTC1=$n.LTC_HALF_1,i.rectAreaLTC2=$n.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=h,i.ambient[2]=u;const N=i.hash;(N.directionalLength!==p||N.pointLength!==m||N.spotLength!==v||N.rectAreaLength!==g||N.hemiLength!==b||N.numDirectionalShadows!==x||N.numPointShadows!==w||N.numSpotShadows!==P||N.numSpotMaps!==A||N.numLightProbes!==R)&&(i.directional.length=p,i.spot.length=v,i.rectArea.length=g,i.point.length=m,i.hemi.length=b,i.directionalShadow.length=x,i.directionalShadowMap.length=x,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=P,i.spotShadowMap.length=P,i.directionalShadowMatrix.length=x,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=P+A-D,i.spotLightMap.length=A,i.numSpotLightShadowsWithMaps=D,i.numLightProbes=R,N.directionalLength=p,N.pointLength=m,N.spotLength=v,N.rectAreaLength=g,N.hemiLength=b,N.numDirectionalShadows=x,N.numPointShadows=w,N.numSpotShadows=P,N.numSpotMaps=A,N.numLightProbes=R,i.version=NOe++)},setupView:function l(c,d){let h=0,u=0,p=0,m=0,v=0;const g=d.matrixWorldInverse;for(let b=0,x=c.length;b<x;b++){const w=c[b];if(w.isDirectionalLight){const P=i.directional[h];P.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),P.direction.sub(r),P.direction.transformDirection(g),h++}else if(w.isSpotLight){const P=i.spot[p];P.position.setFromMatrixPosition(w.matrixWorld),P.position.applyMatrix4(g),P.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),P.direction.sub(r),P.direction.transformDirection(g),p++}else if(w.isRectAreaLight){const P=i.rectArea[m];P.position.setFromMatrixPosition(w.matrixWorld),P.position.applyMatrix4(g),o.identity(),s.copy(w.matrixWorld),s.premultiply(g),o.extractRotation(s),P.halfWidth.set(.5*w.width,0,0),P.halfHeight.set(0,.5*w.height,0),P.halfWidth.applyMatrix4(o),P.halfHeight.applyMatrix4(o),m++}else if(w.isPointLight){const P=i.point[u];P.position.setFromMatrixPosition(w.matrixWorld),P.position.applyMatrix4(g),u++}else if(w.isHemisphereLight){const P=i.hemi[v];P.direction.setFromMatrixPosition(w.matrixWorld),P.direction.transformDirection(g),v++}}},state:i}}function CY(e){const t=new FOe(e),n=[],i=[],c={lightsArray:n,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function r(d){c.camera=d,n.length=0,i.length=0},state:c,setupLights:function a(){t.setup(n)},setupLightsView:function l(d){t.setupView(n,d)},pushLight:function s(d){n.push(d)},pushShadow:function o(d){i.push(d)}}}function BOe(e){let t=new WeakMap;return{get:function n(r,s=0){const o=t.get(r);let a;return void 0===o?(a=new CY(e),t.set(r,[a])):s>=o.length?(a=new CY(e),o.push(a)):a=o[s],a},dispose:function i(){t=new WeakMap}}}class PY extends $w{static get type(){return"MeshDepthMaterial"}constructor(t){super(),this.isMeshDepthMaterial=!0,this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class SY extends $w{static get type(){return"MeshDistanceMaterial"}constructor(t){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const zOe="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",UOe="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function VOe(e,t,n){let i=new nE;const r=new bn,s=new bn,o=new xs,a=new PY({depthPacking:ePe}),l=new SY,c={},d=n.maxTextureSize,h={[Qm]:Hc,[Hc]:Qm,[vf]:vf},u=new Tf({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new bn},radius:{value:4}},vertexShader:zOe,fragmentShader:UOe}),p=u.clone();p.defines.HORIZONTAL_PASS=1;const m=new jr;m.setAttribute("position",new xa(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new uc(m,u),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=iX;let b=this.type;function x(D,R){const N=t.update(v);u.defines.VSM_SAMPLES!==D.blurSamples&&(u.defines.VSM_SAMPLES=D.blurSamples,p.defines.VSM_SAMPLES=D.blurSamples,u.needsUpdate=!0,p.needsUpdate=!0),null===D.mapPass&&(D.mapPass=new rv(r.x,r.y)),u.uniforms.shadow_pass.value=D.map.texture,u.uniforms.resolution.value=D.mapSize,u.uniforms.radius.value=D.radius,e.setRenderTarget(D.mapPass),e.clear(),e.renderBufferDirect(R,null,N,u,v,null),p.uniforms.shadow_pass.value=D.mapPass.texture,p.uniforms.resolution.value=D.mapSize,p.uniforms.radius.value=D.radius,e.setRenderTarget(D.map),e.clear(),e.renderBufferDirect(R,null,N,p,v,null)}function w(D,R,N,k){let L=null;const Q=!0===N.isPointLight?D.customDistanceMaterial:D.customDepthMaterial;if(void 0!==Q)L=Q;else if(L=!0===N.isPointLight?l:a,e.localClippingEnabled&&!0===R.clipShadows&&Array.isArray(R.clippingPlanes)&&0!==R.clippingPlanes.length||R.displacementMap&&0!==R.displacementScale||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const le=L.uuid,ae=R.uuid;let he=c[le];void 0===he&&(he={},c[le]=he);let xe=he[ae];void 0===xe&&(xe=L.clone(),he[ae]=xe,R.addEventListener("dispose",A)),L=xe}return L.visible=R.visible,L.wireframe=R.wireframe,L.side=k===gf?null!==R.shadowSide?R.shadowSide:R.side:null!==R.shadowSide?R.shadowSide:h[R.side],L.alphaMap=R.alphaMap,L.alphaTest=R.alphaTest,L.map=R.map,L.clipShadows=R.clipShadows,L.clippingPlanes=R.clippingPlanes,L.clipIntersection=R.clipIntersection,L.displacementMap=R.displacementMap,L.displacementScale=R.displacementScale,L.displacementBias=R.displacementBias,L.wireframeLinewidth=R.wireframeLinewidth,L.linewidth=R.linewidth,!0===N.isPointLight&&!0===L.isMeshDistanceMaterial&&(e.properties.get(L).light=N),L}function P(D,R,N,k,L){if(!1===D.visible)return;if(D.layers.test(R.layers)&&(D.isMesh||D.isLine||D.isPoints)&&(D.castShadow||D.receiveShadow&&L===gf)&&(!D.frustumCulled||i.intersectsObject(D))){D.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,D.matrixWorld);const ae=t.update(D),he=D.material;if(Array.isArray(he)){const xe=ae.groups;for(let _e=0,be=xe.length;_e<be;_e++){const me=xe[_e],Te=he[me.materialIndex];if(Te&&Te.visible){const Le=w(D,Te,k,L);D.onBeforeShadow(e,D,R,N,ae,Le,me),e.renderBufferDirect(N,null,ae,Le,D,me),D.onAfterShadow(e,D,R,N,ae,Le,me)}}}else if(he.visible){const xe=w(D,he,k,L);D.onBeforeShadow(e,D,R,N,ae,xe,null),e.renderBufferDirect(N,null,ae,xe,D,null),D.onAfterShadow(e,D,R,N,ae,xe,null)}}const le=D.children;for(let ae=0,he=le.length;ae<he;ae++)P(le[ae],R,N,k,L)}function A(D){D.target.removeEventListener("dispose",A);for(const N in c){const k=c[N],L=D.target.uuid;L in k&&(k[L].dispose(),delete k[L])}}this.render=function(D,R,N){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===D.length)return;const k=e.getRenderTarget(),L=e.getActiveCubeFace(),Q=e.getActiveMipmapLevel(),le=e.state;le.setBlending(Jm),le.buffers.color.setClear(1,1,1,1),le.buffers.depth.setTest(!0),le.setScissorTest(!1);const ae=b!==gf&&this.type===gf,he=b===gf&&this.type!==gf;for(let xe=0,_e=D.length;xe<_e;xe++){const be=D[xe],me=be.shadow;if(void 0===me){console.warn("THREE.WebGLShadowMap:",be,"has no shadow.");continue}if(!1===me.autoUpdate&&!1===me.needsUpdate)continue;r.copy(me.mapSize);const Te=me.getFrameExtents();if(r.multiply(Te),s.copy(me.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/Te.x),r.x=s.x*Te.x,me.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/Te.y),r.y=s.y*Te.y,me.mapSize.y=s.y)),null===me.map||!0===ae||!0===he){const ke=this.type!==gf?{minFilter:Fl,magFilter:Fl}:{};null!==me.map&&me.map.dispose(),me.map=new rv(r.x,r.y,ke),me.map.texture.name=be.name+".shadowMap",me.camera.updateProjectionMatrix()}e.setRenderTarget(me.map),e.clear();const Le=me.getViewportCount();for(let ke=0;ke<Le;ke++){const Re=me.getViewport(ke);o.set(s.x*Re.x,s.y*Re.y,s.x*Re.z,s.y*Re.w),le.viewport(o),me.updateMatrices(be,ke),i=me.getFrustum(),P(R,N,me.camera,be,this.type)}!0!==me.isPointLightShadow&&this.type===gf&&x(me,N),me.needsUpdate=!1}b=this.type,g.needsUpdate=!1,e.setRenderTarget(k,L,Q)}}const jOe={[Ak]:Tk,[Dk]:kk,[Ik]:Nk,[Dy]:Rk,[Tk]:Ak,[kk]:Dk,[Nk]:Ik,[Rk]:Dy};function HOe(e,t){const s=new function n(){let Ce=!1;const pt=new xs;let rt=null;const vt=new xs(0,0,0,0);return{setMask:function(an){rt!==an&&!Ce&&(e.colorMask(an,an,an,an),rt=an)},setLocked:function(an){Ce=an},setClear:function(an,wn,hi,Hr,wo){!0===wo&&(an*=Hr,wn*=Hr,hi*=Hr),pt.set(an,wn,hi,Hr),!1===vt.equals(pt)&&(e.clearColor(an,wn,hi,Hr),vt.copy(pt))},reset:function(){Ce=!1,rt=null,vt.set(-1,0,0,0)}}},o=new function i(){let Ce=!1,pt=!1,rt=null,vt=null,an=null;return{setReversed:function(wn){if(pt!==wn){const hi=t.get("EXT_clip_control");hi.clipControlEXT(hi.LOWER_LEFT_EXT,pt?hi.ZERO_TO_ONE_EXT:hi.NEGATIVE_ONE_TO_ONE_EXT);const Hr=an;an=null,this.setClear(Hr)}pt=wn},getReversed:function(){return pt},setTest:function(wn){wn?Ze(e.DEPTH_TEST):$e(e.DEPTH_TEST)},setMask:function(wn){rt!==wn&&!Ce&&(e.depthMask(wn),rt=wn)},setFunc:function(wn){if(pt&&(wn=jOe[wn]),vt!==wn){switch(wn){case Ak:e.depthFunc(e.NEVER);break;case Tk:e.depthFunc(e.ALWAYS);break;case Dk:e.depthFunc(e.LESS);break;case Dy:e.depthFunc(e.LEQUAL);break;case Ik:e.depthFunc(e.EQUAL);break;case Rk:e.depthFunc(e.GEQUAL);break;case kk:e.depthFunc(e.GREATER);break;case Nk:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}vt=wn}},setLocked:function(wn){Ce=wn},setClear:function(wn){an!==wn&&(pt&&(wn=1-wn),e.clearDepth(wn),an=wn)},reset:function(){Ce=!1,rt=null,vt=null,an=null,pt=!1}}},a=new function r(){let Ce=!1,pt=null,rt=null,vt=null,an=null,wn=null,hi=null,Hr=null,wo=null;return{setTest:function(ki){Ce||(ki?Ze(e.STENCIL_TEST):$e(e.STENCIL_TEST))},setMask:function(ki){pt!==ki&&!Ce&&(e.stencilMask(ki),pt=ki)},setFunc:function(ki,ha,Go){(rt!==ki||vt!==ha||an!==Go)&&(e.stencilFunc(ki,ha,Go),rt=ki,vt=ha,an=Go)},setOp:function(ki,ha,Go){(wn!==ki||hi!==ha||Hr!==Go)&&(e.stencilOp(ki,ha,Go),wn=ki,hi=ha,Hr=Go)},setLocked:function(ki){Ce=ki},setClear:function(ki){wo!==ki&&(e.clearStencil(ki),wo=ki)},reset:function(){Ce=!1,pt=null,rt=null,vt=null,an=null,wn=null,hi=null,Hr=null,wo=null}}},l=new WeakMap,c=new WeakMap;let d={},h={},u=new WeakMap,p=[],m=null,v=!1,g=null,b=null,x=null,w=null,P=null,A=null,D=null,R=new ci(0,0,0),N=0,k=!1,L=null,Q=null,le=null,ae=null,he=null;const xe=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let _e=!1,be=0;const me=e.getParameter(e.VERSION);-1!==me.indexOf("WebGL")?(be=parseFloat(/^WebGL (\d)/.exec(me)[1]),_e=be>=1):-1!==me.indexOf("OpenGL ES")&&(be=parseFloat(/^OpenGL ES (\d)/.exec(me)[1]),_e=be>=2);let Te=null,Le={};const ke=e.getParameter(e.SCISSOR_BOX),Re=e.getParameter(e.VIEWPORT),Qe=(new xs).fromArray(ke),Pe=(new xs).fromArray(Re);function Be(Ce,pt,rt,vt){const an=new Uint8Array(4),wn=e.createTexture();e.bindTexture(Ce,wn),e.texParameteri(Ce,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(Ce,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let hi=0;hi<rt;hi++)Ce===e.TEXTURE_3D||Ce===e.TEXTURE_2D_ARRAY?e.texImage3D(pt,0,e.RGBA,1,1,vt,0,e.RGBA,e.UNSIGNED_BYTE,an):e.texImage2D(pt+hi,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,an);return wn}const Fe={};function Ze(Ce){!0!==d[Ce]&&(e.enable(Ce),d[Ce]=!0)}function $e(Ce){!1!==d[Ce]&&(e.disable(Ce),d[Ce]=!1)}Fe[e.TEXTURE_2D]=Be(e.TEXTURE_2D,e.TEXTURE_2D,1),Fe[e.TEXTURE_CUBE_MAP]=Be(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),Fe[e.TEXTURE_2D_ARRAY]=Be(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),Fe[e.TEXTURE_3D]=Be(e.TEXTURE_3D,e.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),Ze(e.DEPTH_TEST),o.setFunc(Dy),wt(!1),Xt(nX),Ze(e.CULL_FACE),Ie(Jm);const nt={[ev]:e.FUNC_ADD,[MCe]:e.FUNC_SUBTRACT,[CCe]:e.FUNC_REVERSE_SUBTRACT};nt[PCe]=e.MIN,nt[SCe]=e.MAX;const st={[ECe]:e.ZERO,[OCe]:e.ONE,[ACe]:e.SRC_COLOR,[Ek]:e.SRC_ALPHA,[NCe]:e.SRC_ALPHA_SATURATE,[RCe]:e.DST_COLOR,[DCe]:e.DST_ALPHA,[TCe]:e.ONE_MINUS_SRC_COLOR,[Ok]:e.ONE_MINUS_SRC_ALPHA,[kCe]:e.ONE_MINUS_DST_COLOR,[ICe]:e.ONE_MINUS_DST_ALPHA,[LCe]:e.CONSTANT_COLOR,[FCe]:e.ONE_MINUS_CONSTANT_COLOR,[BCe]:e.CONSTANT_ALPHA,[zCe]:e.ONE_MINUS_CONSTANT_ALPHA};function Ie(Ce,pt,rt,vt,an,wn,hi,Hr,wo,ki){if(Ce!==Jm){if(!1===v&&(Ze(e.BLEND),v=!0),Ce===wCe)an=an||pt,wn=wn||rt,hi=hi||vt,(pt!==b||an!==P)&&(e.blendEquationSeparate(nt[pt],nt[an]),b=pt,P=an),(rt!==x||vt!==w||wn!==A||hi!==D)&&(e.blendFuncSeparate(st[rt],st[vt],st[wn],st[hi]),x=rt,w=vt,A=wn,D=hi),(!1===Hr.equals(R)||wo!==N)&&(e.blendColor(Hr.r,Hr.g,Hr.b,wo),R.copy(Hr),N=wo),g=Ce,k=!1;else if(Ce!==g||ki!==k){if((b!==ev||P!==ev)&&(e.blendEquation(e.FUNC_ADD),b=ev,P=ev),ki)switch(Ce){case Ty:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case rX:e.blendFunc(e.ONE,e.ONE);break;case sX:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case oX:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce)}else switch(Ce){case Ty:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case rX:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case sX:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case oX:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce)}x=null,w=null,A=null,D=null,R.set(0,0,0),N=0,g=Ce,k=ki}}else!0===v&&($e(e.BLEND),v=!1)}function wt(Ce){L!==Ce&&(e.frontFace(Ce?e.CW:e.CCW),L=Ce)}function Xt(Ce){Ce!==_Ce?(Ze(e.CULL_FACE),Ce!==Q&&e.cullFace(Ce===nX?e.BACK:Ce===bCe?e.FRONT:e.FRONT_AND_BACK)):$e(e.CULL_FACE),Q=Ce}function Wt(Ce,pt,rt){Ce?(Ze(e.POLYGON_OFFSET_FILL),(ae!==pt||he!==rt)&&(e.polygonOffset(pt,rt),ae=pt,he=rt)):$e(e.POLYGON_OFFSET_FILL)}return{buffers:{color:s,depth:o,stencil:a},enable:Ze,disable:$e,bindFramebuffer:function ft(Ce,pt){return h[Ce]!==pt&&(e.bindFramebuffer(Ce,pt),h[Ce]=pt,Ce===e.DRAW_FRAMEBUFFER&&(h[e.FRAMEBUFFER]=pt),Ce===e.FRAMEBUFFER&&(h[e.DRAW_FRAMEBUFFER]=pt),!0)},drawBuffers:function it(Ce,pt){let rt=p,vt=!1;if(Ce){rt=u.get(pt),void 0===rt&&(rt=[],u.set(pt,rt));const an=Ce.textures;if(rt.length!==an.length||rt[0]!==e.COLOR_ATTACHMENT0){for(let wn=0,hi=an.length;wn<hi;wn++)rt[wn]=e.COLOR_ATTACHMENT0+wn;rt.length=an.length,vt=!0}}else rt[0]!==e.BACK&&(rt[0]=e.BACK,vt=!0);vt&&e.drawBuffers(rt)},useProgram:function Nt(Ce){return m!==Ce&&(e.useProgram(Ce),m=Ce,!0)},setBlending:Ie,setMaterial:function Yt(Ce,pt){Ce.side===vf?$e(e.CULL_FACE):Ze(e.CULL_FACE);let rt=Ce.side===Hc;pt&&(rt=!rt),wt(rt),Ce.blending===Ty&&!1===Ce.transparent?Ie(Jm):Ie(Ce.blending,Ce.blendEquation,Ce.blendSrc,Ce.blendDst,Ce.blendEquationAlpha,Ce.blendSrcAlpha,Ce.blendDstAlpha,Ce.blendColor,Ce.blendAlpha,Ce.premultipliedAlpha),o.setFunc(Ce.depthFunc),o.setTest(Ce.depthTest),o.setMask(Ce.depthWrite),s.setMask(Ce.colorWrite);const vt=Ce.stencilWrite;a.setTest(vt),vt&&(a.setMask(Ce.stencilWriteMask),a.setFunc(Ce.stencilFunc,Ce.stencilRef,Ce.stencilFuncMask),a.setOp(Ce.stencilFail,Ce.stencilZFail,Ce.stencilZPass)),Wt(Ce.polygonOffset,Ce.polygonOffsetFactor,Ce.polygonOffsetUnits),!0===Ce.alphaToCoverage?Ze(e.SAMPLE_ALPHA_TO_COVERAGE):$e(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:wt,setCullFace:Xt,setLineWidth:function Ct(Ce){Ce!==le&&(_e&&e.lineWidth(Ce),le=Ce)},setPolygonOffset:Wt,setScissorTest:function Qt(Ce){Ce?Ze(e.SCISSOR_TEST):$e(e.SCISSOR_TEST)},activeTexture:function Ae(Ce){void 0===Ce&&(Ce=e.TEXTURE0+xe-1),Te!==Ce&&(e.activeTexture(Ce),Te=Ce)},bindTexture:function re(Ce,pt,rt){void 0===rt&&(rt=null===Te?e.TEXTURE0+xe-1:Te);let vt=Le[rt];void 0===vt&&(vt={type:void 0,texture:void 0},Le[rt]=vt),(vt.type!==Ce||vt.texture!==pt)&&(Te!==rt&&(e.activeTexture(rt),Te=rt),e.bindTexture(Ce,pt||Fe[Ce]),vt.type=Ce,vt.texture=pt)},unbindTexture:function fe(){const Ce=Le[Te];void 0!==Ce&&void 0!==Ce.type&&(e.bindTexture(Ce.type,null),Ce.type=void 0,Ce.texture=void 0)},compressedTexImage2D:function He(){try{e.compressedTexImage2D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},compressedTexImage3D:function ut(){try{e.compressedTexImage3D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},texImage2D:function sn(){try{e.texImage2D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},texImage3D:function fn(){try{e.texImage3D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},updateUBOMapping:function ai(Ce,pt){let rt=c.get(pt);void 0===rt&&(rt=new WeakMap,c.set(pt,rt));let vt=rt.get(Ce);void 0===vt&&(vt=e.getUniformBlockIndex(pt,Ce.name),rt.set(Ce,vt))},uniformBlockBinding:function di(Ce,pt){const vt=c.get(pt).get(Ce);l.get(pt)!==vt&&(e.uniformBlockBinding(pt,vt,Ce.__bindingPointIndex),l.set(pt,vt))},texStorage2D:function Bt(){try{e.texStorage2D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},texStorage3D:function It(){try{e.texStorage3D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},texSubImage2D:function et(){try{e.texSubImage2D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},texSubImage3D:function Lt(){try{e.texSubImage3D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},compressedTexSubImage2D:function $t(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},compressedTexSubImage3D:function qt(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},scissor:function On(Ce){!1===Qe.equals(Ce)&&(e.scissor(Ce.x,Ce.y,Ce.z,Ce.w),Qe.copy(Ce))},viewport:function pn(Ce){!1===Pe.equals(Ce)&&(e.viewport(Ce.x,Ce.y,Ce.z,Ce.w),Pe.copy(Ce))},reset:function sr(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),o.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),d={},Te=null,Le={},h={},u=new WeakMap,p=[],m=null,v=!1,g=null,b=null,x=null,w=null,P=null,A=null,D=null,R=new ci(0,0,0),N=0,k=!1,L=null,Q=null,le=null,ae=null,he=null,Qe.set(0,0,e.canvas.width,e.canvas.height),Pe.set(0,0,e.canvas.width,e.canvas.height),s.reset(),o.reset(),a.reset()}}}function ZN(e,t,n,i){const r=function XOe(e){switch(e){case _f:case cX:return{byteLength:1,components:1};case Uw:case dX:case Vw:return{byteLength:2,components:1};case Bk:case zk:return{byteLength:2,components:4};case ng:case Fk:case Id:return{byteLength:4,components:1};case hX:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${e}.`)}(i);switch(n){case uX:case fX:return e*t;case mX:return e*t*2;case Uk:case E2:return e*t/r.components*r.byteLength;case gX:case Vk:return e*t*2/r.components*r.byteLength;case pX:return e*t*3/r.components*r.byteLength;case Gc:case jk:return e*t*4/r.components*r.byteLength;case O2:case A2:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case T2:case D2:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Gk:case qk:return Math.max(e,16)*Math.max(t,8)/4;case Hk:case Wk:return Math.max(e,8)*Math.max(t,8)/2;case Xk:case Yk:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case $k:case Kk:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Zk:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case Qk:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case Jk:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case eN:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case tN:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case nN:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case iN:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case rN:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case sN:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case oN:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case aN:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case lN:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case cN:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case I2:case dN:case hN:return Math.ceil(e/4)*Math.ceil(t/4)*16;case vX:case uN:return Math.ceil(e/4)*Math.ceil(t/4)*8;case pN:case fN:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function YOe(e,t,n,i,r,s,o){const a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),c=new bn,d=new WeakMap;let h;const u=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function m(Ae,re){return p?new OffscreenCanvas(Ae,re):Hw("canvas")}function v(Ae,re,fe){let He=1;const ut=Qt(Ae);if((ut.width>fe||ut.height>fe)&&(He=fe/Math.max(ut.width,ut.height)),He<1){if(typeof HTMLImageElement<"u"&&Ae instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ae instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ae instanceof ImageBitmap||typeof VideoFrame<"u"&&Ae instanceof VideoFrame){const et=Math.floor(He*ut.width),Lt=Math.floor(He*ut.height);void 0===h&&(h=m(et,Lt));const $t=re?m(et,Lt):h;return $t.width=et,$t.height=Lt,$t.getContext("2d").drawImage(Ae,0,0,et,Lt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ut.width+"x"+ut.height+") to ("+et+"x"+Lt+")."),$t}return"data"in Ae&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ut.width+"x"+ut.height+")."),Ae}return Ae}function g(Ae){return Ae.generateMipmaps}function b(Ae){e.generateMipmap(Ae)}function x(Ae){return Ae.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:Ae.isWebGL3DRenderTarget?e.TEXTURE_3D:Ae.isWebGLArrayRenderTarget||Ae.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function w(Ae,re,fe,He,ut=!1){if(null!==Ae){if(void 0!==e[Ae])return e[Ae];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ae+"'")}let et=re;if(re===e.RED&&(fe===e.FLOAT&&(et=e.R32F),fe===e.HALF_FLOAT&&(et=e.R16F),fe===e.UNSIGNED_BYTE&&(et=e.R8)),re===e.RED_INTEGER&&(fe===e.UNSIGNED_BYTE&&(et=e.R8UI),fe===e.UNSIGNED_SHORT&&(et=e.R16UI),fe===e.UNSIGNED_INT&&(et=e.R32UI),fe===e.BYTE&&(et=e.R8I),fe===e.SHORT&&(et=e.R16I),fe===e.INT&&(et=e.R32I)),re===e.RG&&(fe===e.FLOAT&&(et=e.RG32F),fe===e.HALF_FLOAT&&(et=e.RG16F),fe===e.UNSIGNED_BYTE&&(et=e.RG8)),re===e.RG_INTEGER&&(fe===e.UNSIGNED_BYTE&&(et=e.RG8UI),fe===e.UNSIGNED_SHORT&&(et=e.RG16UI),fe===e.UNSIGNED_INT&&(et=e.RG32UI),fe===e.BYTE&&(et=e.RG8I),fe===e.SHORT&&(et=e.RG16I),fe===e.INT&&(et=e.RG32I)),re===e.RGB_INTEGER&&(fe===e.UNSIGNED_BYTE&&(et=e.RGB8UI),fe===e.UNSIGNED_SHORT&&(et=e.RGB16UI),fe===e.UNSIGNED_INT&&(et=e.RGB32UI),fe===e.BYTE&&(et=e.RGB8I),fe===e.SHORT&&(et=e.RGB16I),fe===e.INT&&(et=e.RGB32I)),re===e.RGBA_INTEGER&&(fe===e.UNSIGNED_BYTE&&(et=e.RGBA8UI),fe===e.UNSIGNED_SHORT&&(et=e.RGBA16UI),fe===e.UNSIGNED_INT&&(et=e.RGBA32UI),fe===e.BYTE&&(et=e.RGBA8I),fe===e.SHORT&&(et=e.RGBA16I),fe===e.INT&&(et=e.RGBA32I)),re===e.RGB&&fe===e.UNSIGNED_INT_5_9_9_9_REV&&(et=e.RGB9_E5),re===e.RGBA){const Lt=ut?N2:ps.getTransfer(He);fe===e.FLOAT&&(et=e.RGBA32F),fe===e.HALF_FLOAT&&(et=e.RGBA16F),fe===e.UNSIGNED_BYTE&&(et=Lt===$s?e.SRGB8_ALPHA8:e.RGBA8),fe===e.UNSIGNED_SHORT_4_4_4_4&&(et=e.RGBA4),fe===e.UNSIGNED_SHORT_5_5_5_1&&(et=e.RGB5_A1)}return(et===e.R16F||et===e.R32F||et===e.RG16F||et===e.RG32F||et===e.RGBA16F||et===e.RGBA32F)&&t.get("EXT_color_buffer_float"),et}function P(Ae,re){let fe;return Ae?null===re||re===ng||re===Iy?fe=e.DEPTH24_STENCIL8:re===Id?fe=e.DEPTH32F_STENCIL8:re===Uw&&(fe=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===re||re===ng||re===Iy?fe=e.DEPTH_COMPONENT24:re===Id?fe=e.DEPTH_COMPONENT32F:re===Uw&&(fe=e.DEPTH_COMPONENT16),fe}function A(Ae,re){return!0===g(Ae)||Ae.isFramebufferTexture&&Ae.minFilter!==Fl&&Ae.minFilter!==sl?Math.log2(Math.max(re.width,re.height))+1:void 0!==Ae.mipmaps&&Ae.mipmaps.length>0?Ae.mipmaps.length:Ae.isCompressedTexture&&Array.isArray(Ae.image)?re.mipmaps.length:1}function D(Ae){const re=Ae.target;re.removeEventListener("dispose",D),function N(Ae){const re=i.get(Ae);if(void 0===re.__webglInit)return;const fe=Ae.source,He=u.get(fe);if(He){const ut=He[re.__cacheKey];ut.usedTimes--,0===ut.usedTimes&&k(Ae),0===Object.keys(He).length&&u.delete(fe)}i.remove(Ae)}(re),re.isVideoTexture&&d.delete(re)}function R(Ae){const re=Ae.target;re.removeEventListener("dispose",R),function L(Ae){const re=i.get(Ae);if(Ae.depthTexture&&(Ae.depthTexture.dispose(),i.remove(Ae.depthTexture)),Ae.isWebGLCubeRenderTarget)for(let He=0;He<6;He++){if(Array.isArray(re.__webglFramebuffer[He]))for(let ut=0;ut<re.__webglFramebuffer[He].length;ut++)e.deleteFramebuffer(re.__webglFramebuffer[He][ut]);else e.deleteFramebuffer(re.__webglFramebuffer[He]);re.__webglDepthbuffer&&e.deleteRenderbuffer(re.__webglDepthbuffer[He])}else{if(Array.isArray(re.__webglFramebuffer))for(let He=0;He<re.__webglFramebuffer.length;He++)e.deleteFramebuffer(re.__webglFramebuffer[He]);else e.deleteFramebuffer(re.__webglFramebuffer);if(re.__webglDepthbuffer&&e.deleteRenderbuffer(re.__webglDepthbuffer),re.__webglMultisampledFramebuffer&&e.deleteFramebuffer(re.__webglMultisampledFramebuffer),re.__webglColorRenderbuffer)for(let He=0;He<re.__webglColorRenderbuffer.length;He++)re.__webglColorRenderbuffer[He]&&e.deleteRenderbuffer(re.__webglColorRenderbuffer[He]);re.__webglDepthRenderbuffer&&e.deleteRenderbuffer(re.__webglDepthRenderbuffer)}const fe=Ae.textures;for(let He=0,ut=fe.length;He<ut;He++){const et=i.get(fe[He]);et.__webglTexture&&(e.deleteTexture(et.__webglTexture),o.memory.textures--),i.remove(fe[He])}i.remove(Ae)}(re)}function k(Ae){const re=i.get(Ae);e.deleteTexture(re.__webglTexture),delete u.get(Ae.source)[re.__cacheKey],o.memory.textures--}let Q=0;function xe(Ae,re){const fe=i.get(Ae);if(Ae.isVideoTexture&&function Ct(Ae){const re=o.render.frame;d.get(Ae)!==re&&(d.set(Ae,re),Ae.update())}(Ae),!1===Ae.isRenderTargetTexture&&Ae.version>0&&fe.__version!==Ae.version){const He=Ae.image;if(null===He)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==He.complete)return void Pe(fe,Ae,re);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,fe.__webglTexture,e.TEXTURE0+re)}const Te={[C2]:e.REPEAT,[su]:e.CLAMP_TO_EDGE,[P2]:e.MIRRORED_REPEAT},Le={[Fl]:e.NEAREST,[lX]:e.NEAREST_MIPMAP_NEAREST,[zw]:e.NEAREST_MIPMAP_LINEAR,[sl]:e.LINEAR,[S2]:e.LINEAR_MIPMAP_NEAREST,[yf]:e.LINEAR_MIPMAP_LINEAR},ke={[nPe]:e.NEVER,[lPe]:e.ALWAYS,[iPe]:e.LESS,[bX]:e.LEQUAL,[rPe]:e.EQUAL,[aPe]:e.GEQUAL,[sPe]:e.GREATER,[oPe]:e.NOTEQUAL};function Re(Ae,re){if(re.type===Id&&!1===t.has("OES_texture_float_linear")&&(re.magFilter===sl||re.magFilter===S2||re.magFilter===zw||re.magFilter===yf||re.minFilter===sl||re.minFilter===S2||re.minFilter===zw||re.minFilter===yf)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(Ae,e.TEXTURE_WRAP_S,Te[re.wrapS]),e.texParameteri(Ae,e.TEXTURE_WRAP_T,Te[re.wrapT]),(Ae===e.TEXTURE_3D||Ae===e.TEXTURE_2D_ARRAY)&&e.texParameteri(Ae,e.TEXTURE_WRAP_R,Te[re.wrapR]),e.texParameteri(Ae,e.TEXTURE_MAG_FILTER,Le[re.magFilter]),e.texParameteri(Ae,e.TEXTURE_MIN_FILTER,Le[re.minFilter]),re.compareFunction&&(e.texParameteri(Ae,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(Ae,e.TEXTURE_COMPARE_FUNC,ke[re.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(re.magFilter===Fl||re.minFilter!==zw&&re.minFilter!==yf||re.type===Id&&!1===t.has("OES_texture_float_linear"))return;if(re.anisotropy>1||i.get(re).__currentAnisotropy){const fe=t.get("EXT_texture_filter_anisotropic");e.texParameterf(Ae,fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(re.anisotropy,r.getMaxAnisotropy())),i.get(re).__currentAnisotropy=re.anisotropy}}}function Qe(Ae,re){let fe=!1;void 0===Ae.__webglInit&&(Ae.__webglInit=!0,re.addEventListener("dispose",D));const He=re.source;let ut=u.get(He);void 0===ut&&(ut={},u.set(He,ut));const et=function he(Ae){const re=[];return re.push(Ae.wrapS),re.push(Ae.wrapT),re.push(Ae.wrapR||0),re.push(Ae.magFilter),re.push(Ae.minFilter),re.push(Ae.anisotropy),re.push(Ae.internalFormat),re.push(Ae.format),re.push(Ae.type),re.push(Ae.generateMipmaps),re.push(Ae.premultiplyAlpha),re.push(Ae.flipY),re.push(Ae.unpackAlignment),re.push(Ae.colorSpace),re.join()}(re);if(et!==Ae.__cacheKey){void 0===ut[et]&&(ut[et]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,fe=!0),ut[et].usedTimes++;const Lt=ut[Ae.__cacheKey];void 0!==Lt&&(ut[Ae.__cacheKey].usedTimes--,0===Lt.usedTimes&&k(re)),Ae.__cacheKey=et,Ae.__webglTexture=ut[et].texture}return fe}function Pe(Ae,re,fe){let He=e.TEXTURE_2D;(re.isDataArrayTexture||re.isCompressedArrayTexture)&&(He=e.TEXTURE_2D_ARRAY),re.isData3DTexture&&(He=e.TEXTURE_3D);const ut=Qe(Ae,re),et=re.source;n.bindTexture(He,Ae.__webglTexture,e.TEXTURE0+fe);const Lt=i.get(et);if(et.version!==Lt.__version||!0===ut){n.activeTexture(e.TEXTURE0+fe);const $t=ps.getPrimaries(ps.workingColorSpace),qt=re.colorSpace===ig?null:ps.getPrimaries(re.colorSpace),Bt=re.colorSpace===ig||$t===qt?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,re.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,re.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,Bt);let It=v(re.image,!1,r.maxTextureSize);It=Wt(re,It);const sn=s.convert(re.format,re.colorSpace),fn=s.convert(re.type);let pn,On=w(re.internalFormat,sn,fn,re.colorSpace,re.isVideoTexture);Re(He,re);const ai=re.mipmaps,di=!0!==re.isVideoTexture,sr=void 0===Lt.__version||!0===ut,Ce=et.dataReady,pt=A(re,It);if(re.isDepthTexture)On=P(re.format===ky,re.type),sr&&(di?n.texStorage2D(e.TEXTURE_2D,1,On,It.width,It.height):n.texImage2D(e.TEXTURE_2D,0,On,It.width,It.height,0,sn,fn,null));else if(re.isDataTexture)if(ai.length>0){di&&sr&&n.texStorage2D(e.TEXTURE_2D,pt,On,ai[0].width,ai[0].height);for(let rt=0,vt=ai.length;rt<vt;rt++)pn=ai[rt],di?Ce&&n.texSubImage2D(e.TEXTURE_2D,rt,0,0,pn.width,pn.height,sn,fn,pn.data):n.texImage2D(e.TEXTURE_2D,rt,On,pn.width,pn.height,0,sn,fn,pn.data);re.generateMipmaps=!1}else di?(sr&&n.texStorage2D(e.TEXTURE_2D,pt,On,It.width,It.height),Ce&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,It.width,It.height,sn,fn,It.data)):n.texImage2D(e.TEXTURE_2D,0,On,It.width,It.height,0,sn,fn,It.data);else if(re.isCompressedTexture)if(re.isCompressedArrayTexture){di&&sr&&n.texStorage3D(e.TEXTURE_2D_ARRAY,pt,On,ai[0].width,ai[0].height,It.depth);for(let rt=0,vt=ai.length;rt<vt;rt++)if(pn=ai[rt],re.format!==Gc)if(null!==sn)if(di){if(Ce)if(re.layerUpdates.size>0){const an=ZN(pn.width,pn.height,re.format,re.type);for(const wn of re.layerUpdates){const hi=pn.data.subarray(wn*an/pn.data.BYTES_PER_ELEMENT,(wn+1)*an/pn.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,rt,0,0,wn,pn.width,pn.height,1,sn,hi)}re.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,rt,0,0,0,pn.width,pn.height,It.depth,sn,pn.data)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,rt,On,pn.width,pn.height,It.depth,0,pn.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else di?Ce&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,rt,0,0,0,pn.width,pn.height,It.depth,sn,fn,pn.data):n.texImage3D(e.TEXTURE_2D_ARRAY,rt,On,pn.width,pn.height,It.depth,0,sn,fn,pn.data)}else{di&&sr&&n.texStorage2D(e.TEXTURE_2D,pt,On,ai[0].width,ai[0].height);for(let rt=0,vt=ai.length;rt<vt;rt++)pn=ai[rt],re.format!==Gc?null!==sn?di?Ce&&n.compressedTexSubImage2D(e.TEXTURE_2D,rt,0,0,pn.width,pn.height,sn,pn.data):n.compressedTexImage2D(e.TEXTURE_2D,rt,On,pn.width,pn.height,0,pn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):di?Ce&&n.texSubImage2D(e.TEXTURE_2D,rt,0,0,pn.width,pn.height,sn,fn,pn.data):n.texImage2D(e.TEXTURE_2D,rt,On,pn.width,pn.height,0,sn,fn,pn.data)}else if(re.isDataArrayTexture)if(di){if(sr&&n.texStorage3D(e.TEXTURE_2D_ARRAY,pt,On,It.width,It.height,It.depth),Ce)if(re.layerUpdates.size>0){const rt=ZN(It.width,It.height,re.format,re.type);for(const vt of re.layerUpdates){const an=It.data.subarray(vt*rt/It.data.BYTES_PER_ELEMENT,(vt+1)*rt/It.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,vt,It.width,It.height,1,sn,fn,an)}re.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,It.width,It.height,It.depth,sn,fn,It.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,On,It.width,It.height,It.depth,0,sn,fn,It.data);else if(re.isData3DTexture)di?(sr&&n.texStorage3D(e.TEXTURE_3D,pt,On,It.width,It.height,It.depth),Ce&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,It.width,It.height,It.depth,sn,fn,It.data)):n.texImage3D(e.TEXTURE_3D,0,On,It.width,It.height,It.depth,0,sn,fn,It.data);else if(re.isFramebufferTexture){if(sr)if(di)n.texStorage2D(e.TEXTURE_2D,pt,On,It.width,It.height);else{let rt=It.width,vt=It.height;for(let an=0;an<pt;an++)n.texImage2D(e.TEXTURE_2D,an,On,rt,vt,0,sn,fn,null),rt>>=1,vt>>=1}}else if(ai.length>0){if(di&&sr){const rt=Qt(ai[0]);n.texStorage2D(e.TEXTURE_2D,pt,On,rt.width,rt.height)}for(let rt=0,vt=ai.length;rt<vt;rt++)pn=ai[rt],di?Ce&&n.texSubImage2D(e.TEXTURE_2D,rt,0,0,sn,fn,pn):n.texImage2D(e.TEXTURE_2D,rt,On,sn,fn,pn);re.generateMipmaps=!1}else if(di){if(sr){const rt=Qt(It);n.texStorage2D(e.TEXTURE_2D,pt,On,rt.width,rt.height)}Ce&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,sn,fn,It)}else n.texImage2D(e.TEXTURE_2D,0,On,sn,fn,It);g(re)&&b(He),Lt.__version=et.version,re.onUpdate&&re.onUpdate(re)}Ae.__version=re.version}function Fe(Ae,re,fe,He,ut,et){const Lt=s.convert(fe.format,fe.colorSpace),$t=s.convert(fe.type),qt=w(fe.internalFormat,Lt,$t,fe.colorSpace),Bt=i.get(re),It=i.get(fe);if(It.__renderTarget=re,!Bt.__hasExternalTextures){const sn=Math.max(1,re.width>>et),fn=Math.max(1,re.height>>et);ut===e.TEXTURE_3D||ut===e.TEXTURE_2D_ARRAY?n.texImage3D(ut,et,qt,sn,fn,re.depth,0,Lt,$t,null):n.texImage2D(ut,et,qt,sn,fn,0,Lt,$t,null)}n.bindFramebuffer(e.FRAMEBUFFER,Ae),Xt(re)?a.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,He,ut,It.__webglTexture,0,wt(re)):(ut===e.TEXTURE_2D||ut>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&ut<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,He,ut,It.__webglTexture,et),n.bindFramebuffer(e.FRAMEBUFFER,null)}function Ze(Ae,re,fe){if(e.bindRenderbuffer(e.RENDERBUFFER,Ae),re.depthBuffer){const He=re.depthTexture,et=P(re.stencilBuffer,He&&He.isDepthTexture?He.type:null),Lt=re.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,$t=wt(re);Xt(re)?a.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,$t,et,re.width,re.height):fe?e.renderbufferStorageMultisample(e.RENDERBUFFER,$t,et,re.width,re.height):e.renderbufferStorage(e.RENDERBUFFER,et,re.width,re.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,Lt,e.RENDERBUFFER,Ae)}else{const He=re.textures;for(let ut=0;ut<He.length;ut++){const et=He[ut],Lt=s.convert(et.format,et.colorSpace),$t=s.convert(et.type),qt=w(et.internalFormat,Lt,$t,et.colorSpace),Bt=wt(re);fe&&!1===Xt(re)?e.renderbufferStorageMultisample(e.RENDERBUFFER,Bt,qt,re.width,re.height):Xt(re)?a.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,Bt,qt,re.width,re.height):e.renderbufferStorage(e.RENDERBUFFER,qt,re.width,re.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function ft(Ae){const re=i.get(Ae),fe=!0===Ae.isWebGLCubeRenderTarget;if(re.__boundDepthTexture!==Ae.depthTexture){const He=Ae.depthTexture;if(re.__depthDisposeCallback&&re.__depthDisposeCallback(),He){const ut=()=>{delete re.__boundDepthTexture,delete re.__depthDisposeCallback,He.removeEventListener("dispose",ut)};He.addEventListener("dispose",ut),re.__depthDisposeCallback=ut}re.__boundDepthTexture=He}if(Ae.depthTexture&&!re.__autoAllocateDepthBuffer){if(fe)throw new Error("target.depthTexture not supported in Cube render targets");!function $e(Ae,re){if(re&&re.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,Ae),!re.depthTexture||!re.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const He=i.get(re.depthTexture);He.__renderTarget=re,(!He.__webglTexture||re.depthTexture.image.width!==re.width||re.depthTexture.image.height!==re.height)&&(re.depthTexture.image.width=re.width,re.depthTexture.image.height=re.height,re.depthTexture.needsUpdate=!0),xe(re.depthTexture,0);const ut=He.__webglTexture,et=wt(re);if(re.depthTexture.format===Ry)Xt(re)?a.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,ut,0,et):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,ut,0);else{if(re.depthTexture.format!==ky)throw new Error("Unknown depthTexture format");Xt(re)?a.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,ut,0,et):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,ut,0)}}(re.__webglFramebuffer,Ae)}else if(fe){re.__webglDepthbuffer=[];for(let He=0;He<6;He++)if(n.bindFramebuffer(e.FRAMEBUFFER,re.__webglFramebuffer[He]),void 0===re.__webglDepthbuffer[He])re.__webglDepthbuffer[He]=e.createRenderbuffer(),Ze(re.__webglDepthbuffer[He],Ae,!1);else{const ut=Ae.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,et=re.__webglDepthbuffer[He];e.bindRenderbuffer(e.RENDERBUFFER,et),e.framebufferRenderbuffer(e.FRAMEBUFFER,ut,e.RENDERBUFFER,et)}}else if(n.bindFramebuffer(e.FRAMEBUFFER,re.__webglFramebuffer),void 0===re.__webglDepthbuffer)re.__webglDepthbuffer=e.createRenderbuffer(),Ze(re.__webglDepthbuffer,Ae,!1);else{const He=Ae.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,ut=re.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,ut),e.framebufferRenderbuffer(e.FRAMEBUFFER,He,e.RENDERBUFFER,ut)}n.bindFramebuffer(e.FRAMEBUFFER,null)}const st=[],Ie=[];function wt(Ae){return Math.min(r.maxSamples,Ae.samples)}function Xt(Ae){const re=i.get(Ae);return Ae.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==re.__useRenderToTexture}function Wt(Ae,re){const fe=Ae.colorSpace,He=Ae.format,ut=Ae.type;return!0===Ae.isCompressedTexture||!0===Ae.isVideoTexture||fe!==Fy&&fe!==ig&&(ps.getTransfer(fe)===$s?(He!==Gc||ut!==_f)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",fe)),re}function Qt(Ae){return typeof HTMLImageElement<"u"&&Ae instanceof HTMLImageElement?(c.width=Ae.naturalWidth||Ae.width,c.height=Ae.naturalHeight||Ae.height):typeof VideoFrame<"u"&&Ae instanceof VideoFrame?(c.width=Ae.displayWidth,c.height=Ae.displayHeight):(c.width=Ae.width,c.height=Ae.height),c}this.allocateTextureUnit=function ae(){const Ae=Q;return Ae>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Ae+" texture units while this GPU supports only "+r.maxTextures),Q+=1,Ae},this.resetTextureUnits=function le(){Q=0},this.setTexture2D=xe,this.setTexture2DArray=function _e(Ae,re){const fe=i.get(Ae);Ae.version>0&&fe.__version!==Ae.version?Pe(fe,Ae,re):n.bindTexture(e.TEXTURE_2D_ARRAY,fe.__webglTexture,e.TEXTURE0+re)},this.setTexture3D=function be(Ae,re){const fe=i.get(Ae);Ae.version>0&&fe.__version!==Ae.version?Pe(fe,Ae,re):n.bindTexture(e.TEXTURE_3D,fe.__webglTexture,e.TEXTURE0+re)},this.setTextureCube=function me(Ae,re){const fe=i.get(Ae);Ae.version>0&&fe.__version!==Ae.version?function Be(Ae,re,fe){if(6!==re.image.length)return;const He=Qe(Ae,re),ut=re.source;n.bindTexture(e.TEXTURE_CUBE_MAP,Ae.__webglTexture,e.TEXTURE0+fe);const et=i.get(ut);if(ut.version!==et.__version||!0===He){n.activeTexture(e.TEXTURE0+fe);const Lt=ps.getPrimaries(ps.workingColorSpace),$t=re.colorSpace===ig?null:ps.getPrimaries(re.colorSpace),qt=re.colorSpace===ig||Lt===$t?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,re.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,re.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,qt);const Bt=re.isCompressedTexture||re.image[0].isCompressedTexture,It=re.image[0]&&re.image[0].isDataTexture,sn=[];for(let vt=0;vt<6;vt++)sn[vt]=Bt||It?It?re.image[vt].image:re.image[vt]:v(re.image[vt],!0,r.maxCubemapSize),sn[vt]=Wt(re,sn[vt]);const fn=sn[0],On=s.convert(re.format,re.colorSpace),pn=s.convert(re.type),ai=w(re.internalFormat,On,pn,re.colorSpace),di=!0!==re.isVideoTexture,sr=void 0===et.__version||!0===He,Ce=ut.dataReady;let rt,pt=A(re,fn);if(Re(e.TEXTURE_CUBE_MAP,re),Bt){di&&sr&&n.texStorage2D(e.TEXTURE_CUBE_MAP,pt,ai,fn.width,fn.height);for(let vt=0;vt<6;vt++){rt=sn[vt].mipmaps;for(let an=0;an<rt.length;an++){const wn=rt[an];re.format!==Gc?null!==On?di?Ce&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+vt,an,0,0,wn.width,wn.height,On,wn.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+vt,an,ai,wn.width,wn.height,0,wn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):di?Ce&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+vt,an,0,0,wn.width,wn.height,On,pn,wn.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+vt,an,ai,wn.width,wn.height,0,On,pn,wn.data)}}}else{if(rt=re.mipmaps,di&&sr){rt.length>0&&pt++;const vt=Qt(sn[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,pt,ai,vt.width,vt.height)}for(let vt=0;vt<6;vt++)if(It){di?Ce&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+vt,0,0,0,sn[vt].width,sn[vt].height,On,pn,sn[vt].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+vt,0,ai,sn[vt].width,sn[vt].height,0,On,pn,sn[vt].data);for(let an=0;an<rt.length;an++){const hi=rt[an].image[vt].image;di?Ce&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+vt,an+1,0,0,hi.width,hi.height,On,pn,hi.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+vt,an+1,ai,hi.width,hi.height,0,On,pn,hi.data)}}else{di?Ce&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+vt,0,0,0,On,pn,sn[vt]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+vt,0,ai,On,pn,sn[vt]);for(let an=0;an<rt.length;an++){const wn=rt[an];di?Ce&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+vt,an+1,0,0,On,pn,wn.image[vt]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+vt,an+1,ai,On,pn,wn.image[vt])}}}g(re)&&b(e.TEXTURE_CUBE_MAP),et.__version=ut.version,re.onUpdate&&re.onUpdate(re)}Ae.__version=re.version}(fe,Ae,re):n.bindTexture(e.TEXTURE_CUBE_MAP,fe.__webglTexture,e.TEXTURE0+re)},this.rebindTextures=function it(Ae,re,fe){const He=i.get(Ae);void 0!==re&&Fe(He.__webglFramebuffer,Ae,Ae.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==fe&&ft(Ae)},this.setupRenderTarget=function Nt(Ae){const re=Ae.texture,fe=i.get(Ae),He=i.get(re);Ae.addEventListener("dispose",R);const ut=Ae.textures,et=!0===Ae.isWebGLCubeRenderTarget,Lt=ut.length>1;if(Lt||(void 0===He.__webglTexture&&(He.__webglTexture=e.createTexture()),He.__version=re.version,o.memory.textures++),et){fe.__webglFramebuffer=[];for(let $t=0;$t<6;$t++)if(re.mipmaps&&re.mipmaps.length>0){fe.__webglFramebuffer[$t]=[];for(let qt=0;qt<re.mipmaps.length;qt++)fe.__webglFramebuffer[$t][qt]=e.createFramebuffer()}else fe.__webglFramebuffer[$t]=e.createFramebuffer()}else{if(re.mipmaps&&re.mipmaps.length>0){fe.__webglFramebuffer=[];for(let $t=0;$t<re.mipmaps.length;$t++)fe.__webglFramebuffer[$t]=e.createFramebuffer()}else fe.__webglFramebuffer=e.createFramebuffer();if(Lt)for(let $t=0,qt=ut.length;$t<qt;$t++){const Bt=i.get(ut[$t]);void 0===Bt.__webglTexture&&(Bt.__webglTexture=e.createTexture(),o.memory.textures++)}if(Ae.samples>0&&!1===Xt(Ae)){fe.__webglMultisampledFramebuffer=e.createFramebuffer(),fe.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,fe.__webglMultisampledFramebuffer);for(let $t=0;$t<ut.length;$t++){const qt=ut[$t];fe.__webglColorRenderbuffer[$t]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,fe.__webglColorRenderbuffer[$t]);const Bt=s.convert(qt.format,qt.colorSpace),It=s.convert(qt.type),sn=w(qt.internalFormat,Bt,It,qt.colorSpace,!0===Ae.isXRRenderTarget),fn=wt(Ae);e.renderbufferStorageMultisample(e.RENDERBUFFER,fn,sn,Ae.width,Ae.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+$t,e.RENDERBUFFER,fe.__webglColorRenderbuffer[$t])}e.bindRenderbuffer(e.RENDERBUFFER,null),Ae.depthBuffer&&(fe.__webglDepthRenderbuffer=e.createRenderbuffer(),Ze(fe.__webglDepthRenderbuffer,Ae,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(et){n.bindTexture(e.TEXTURE_CUBE_MAP,He.__webglTexture),Re(e.TEXTURE_CUBE_MAP,re);for(let $t=0;$t<6;$t++)if(re.mipmaps&&re.mipmaps.length>0)for(let qt=0;qt<re.mipmaps.length;qt++)Fe(fe.__webglFramebuffer[$t][qt],Ae,re,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+$t,qt);else Fe(fe.__webglFramebuffer[$t],Ae,re,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+$t,0);g(re)&&b(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Lt){for(let $t=0,qt=ut.length;$t<qt;$t++){const Bt=ut[$t],It=i.get(Bt);n.bindTexture(e.TEXTURE_2D,It.__webglTexture),Re(e.TEXTURE_2D,Bt),Fe(fe.__webglFramebuffer,Ae,Bt,e.COLOR_ATTACHMENT0+$t,e.TEXTURE_2D,0),g(Bt)&&b(e.TEXTURE_2D)}n.unbindTexture()}else{let $t=e.TEXTURE_2D;if((Ae.isWebGL3DRenderTarget||Ae.isWebGLArrayRenderTarget)&&($t=Ae.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture($t,He.__webglTexture),Re($t,re),re.mipmaps&&re.mipmaps.length>0)for(let qt=0;qt<re.mipmaps.length;qt++)Fe(fe.__webglFramebuffer[qt],Ae,re,e.COLOR_ATTACHMENT0,$t,qt);else Fe(fe.__webglFramebuffer,Ae,re,e.COLOR_ATTACHMENT0,$t,0);g(re)&&b($t),n.unbindTexture()}Ae.depthBuffer&&ft(Ae)},this.updateRenderTargetMipmap=function nt(Ae){const re=Ae.textures;for(let fe=0,He=re.length;fe<He;fe++){const ut=re[fe];if(g(ut)){const et=x(Ae),Lt=i.get(ut).__webglTexture;n.bindTexture(et,Lt),b(et),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function Yt(Ae){if(Ae.samples>0)if(!1===Xt(Ae)){const re=Ae.textures,fe=Ae.width,He=Ae.height;let ut=e.COLOR_BUFFER_BIT;const et=Ae.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,Lt=i.get(Ae),$t=re.length>1;if($t)for(let qt=0;qt<re.length;qt++)n.bindFramebuffer(e.FRAMEBUFFER,Lt.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+qt,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,Lt.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+qt,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,Lt.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,Lt.__webglFramebuffer);for(let qt=0;qt<re.length;qt++){if(Ae.resolveDepthBuffer&&(Ae.depthBuffer&&(ut|=e.DEPTH_BUFFER_BIT),Ae.stencilBuffer&&Ae.resolveStencilBuffer&&(ut|=e.STENCIL_BUFFER_BIT)),$t){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,Lt.__webglColorRenderbuffer[qt]);const Bt=i.get(re[qt]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,Bt,0)}e.blitFramebuffer(0,0,fe,He,0,0,fe,He,ut,e.NEAREST),!0===l&&(st.length=0,Ie.length=0,st.push(e.COLOR_ATTACHMENT0+qt),Ae.depthBuffer&&!1===Ae.resolveDepthBuffer&&(st.push(et),Ie.push(et),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,Ie)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,st))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),$t)for(let qt=0;qt<re.length;qt++){n.bindFramebuffer(e.FRAMEBUFFER,Lt.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+qt,e.RENDERBUFFER,Lt.__webglColorRenderbuffer[qt]);const Bt=i.get(re[qt]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,Lt.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+qt,e.TEXTURE_2D,Bt,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,Lt.__webglMultisampledFramebuffer)}else Ae.depthBuffer&&!1===Ae.resolveDepthBuffer&&l&&e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[Ae.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=ft,this.setupFrameBufferTexture=Fe,this.useMultisampledRTT=Xt}function $Oe(e,t){return{convert:function n(i,r=ig){let s;const o=ps.getTransfer(r);if(i===_f)return e.UNSIGNED_BYTE;if(i===Bk)return e.UNSIGNED_SHORT_4_4_4_4;if(i===zk)return e.UNSIGNED_SHORT_5_5_5_1;if(i===hX)return e.UNSIGNED_INT_5_9_9_9_REV;if(i===cX)return e.BYTE;if(i===dX)return e.SHORT;if(i===Uw)return e.UNSIGNED_SHORT;if(i===Fk)return e.INT;if(i===ng)return e.UNSIGNED_INT;if(i===Id)return e.FLOAT;if(i===Vw)return e.HALF_FLOAT;if(i===uX)return e.ALPHA;if(i===pX)return e.RGB;if(i===Gc)return e.RGBA;if(i===fX)return e.LUMINANCE;if(i===mX)return e.LUMINANCE_ALPHA;if(i===Ry)return e.DEPTH_COMPONENT;if(i===ky)return e.DEPTH_STENCIL;if(i===Uk)return e.RED;if(i===E2)return e.RED_INTEGER;if(i===gX)return e.RG;if(i===Vk)return e.RG_INTEGER;if(i===jk)return e.RGBA_INTEGER;if(i===O2||i===A2||i===T2||i===D2)if(o===$s){if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(i===O2)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===A2)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===T2)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===D2)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=t.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(i===O2)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===A2)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===T2)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===D2)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===Hk||i===Gk||i===Wk||i===qk){if(s=t.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(i===Hk)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Gk)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Wk)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===qk)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===Xk||i===Yk||i===$k){if(s=t.get("WEBGL_compressed_texture_etc"),null===s)return null;if(i===Xk||i===Yk)return o===$s?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===$k)return o===$s?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(i===Kk||i===Zk||i===Qk||i===Jk||i===eN||i===tN||i===nN||i===iN||i===rN||i===sN||i===oN||i===aN||i===lN||i===cN){if(s=t.get("WEBGL_compressed_texture_astc"),null===s)return null;if(i===Kk)return o===$s?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Zk)return o===$s?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Qk)return o===$s?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Jk)return o===$s?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===eN)return o===$s?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===tN)return o===$s?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===nN)return o===$s?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===iN)return o===$s?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===rN)return o===$s?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===sN)return o===$s?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===oN)return o===$s?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===aN)return o===$s?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===lN)return o===$s?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===cN)return o===$s?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===I2||i===dN||i===hN){if(s=t.get("EXT_texture_compression_bptc"),null===s)return null;if(i===I2)return o===$s?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===dN)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===hN)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(i===vX||i===uN||i===pN||i===fN){if(s=t.get("EXT_texture_compression_rgtc"),null===s)return null;if(i===I2)return s.COMPRESSED_RED_RGTC1_EXT;if(i===uN)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===pN)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===fN)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===Iy?e.UNSIGNED_INT_24_8:void 0!==e[i]?e[i]:null}}}class KOe extends Pl{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class eM extends Fd{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ZOe={type:"move"};class QN{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new eM,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new eM,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new qe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new qe),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new eM,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new qe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new qe),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const n=this._hand;if(n)for(const i of t.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,n,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(t&&"visible-blurred"!==n.session.visibilityState){if(c&&t.hand){o=!0;for(const v of t.hand.values()){const g=n.getJointPose(v,i),b=this._getHandJoint(c,v);null!==g&&(b.matrix.fromArray(g.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=g.radius),b.visible=null!==g}const u=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),p=.02,m=.005;c.inputState.pinching&&u>p+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&u<=p-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==l&&t.gripSpace&&(s=n.getPose(t.gripSpace,i),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=n.getPose(t.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ZOe)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}_getHandJoint(t,n){if(void 0===t.joints[n.jointName]){const i=new eM;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[n.jointName]=i,t.add(i)}return t.joints[n.jointName]}}class eAe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,n,i){if(null===this.texture){const r=new wf;t.properties.get(r).__webglTexture=n.texture,(n.depthNear!=i.depthNear||n.depthFar!=i.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=r}}getMesh(t){if(null!==this.texture&&null===this.mesh){const n=t.cameras[0].viewport,i=new Tf({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new uc(new Qw(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class tAe extends zy{constructor(t,n){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,d=null,h=null,u=null,p=null,m=null;const v=new eAe,g=n.getContextAttributes();let b=null,x=null;const w=[],P=[],A=new bn;let D=null;const R=new Pl;R.viewport=new xs;const N=new Pl;N.viewport=new xs;const k=[R,N],L=new KOe;let Q=null,le=null;function ae(Pe){const Be=P.indexOf(Pe.inputSource);if(-1===Be)return;const Fe=w[Be];void 0!==Fe&&(Fe.update(Pe.inputSource,Pe.frame,c||o),Fe.dispatchEvent({type:Pe.type,data:Pe.inputSource}))}function he(){r.removeEventListener("select",ae),r.removeEventListener("selectstart",ae),r.removeEventListener("selectend",ae),r.removeEventListener("squeeze",ae),r.removeEventListener("squeezestart",ae),r.removeEventListener("squeezeend",ae),r.removeEventListener("end",he),r.removeEventListener("inputsourceschange",xe);for(let Pe=0;Pe<w.length;Pe++){const Be=P[Pe];null!==Be&&(P[Pe]=null,w[Pe].disconnect(Be))}Q=null,le=null,v.reset(),t.setRenderTarget(b),p=null,u=null,h=null,r=null,x=null,Qe.stop(),i.isPresenting=!1,t.setPixelRatio(D),t.setSize(A.width,A.height,!1),i.dispatchEvent({type:"sessionend"})}function xe(Pe){for(let Be=0;Be<Pe.removed.length;Be++){const Fe=Pe.removed[Be],Ze=P.indexOf(Fe);Ze>=0&&(P[Ze]=null,w[Ze].disconnect(Fe))}for(let Be=0;Be<Pe.added.length;Be++){const Fe=Pe.added[Be];let Ze=P.indexOf(Fe);if(-1===Ze){for(let ft=0;ft<w.length;ft++){if(ft>=P.length){P.push(Fe),Ze=ft;break}if(null===P[ft]){P[ft]=Fe,Ze=ft;break}}if(-1===Ze)break}const $e=w[Ze];$e&&$e.connect(Fe)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Pe){let Be=w[Pe];return void 0===Be&&(Be=new QN,w[Pe]=Be),Be.getTargetRaySpace()},this.getControllerGrip=function(Pe){let Be=w[Pe];return void 0===Be&&(Be=new QN,w[Pe]=Be),Be.getGripSpace()},this.getHand=function(Pe){let Be=w[Pe];return void 0===Be&&(Be=new QN,w[Pe]=Be),Be.getHandSpace()},this.setFramebufferScaleFactor=function(Pe){s=Pe,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Pe){a=Pe,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(Pe){c=Pe},this.getBaseLayer=function(){return null!==u?u:p},this.getBinding=function(){return h},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=function(){var Pe=(0,xo.Z)(function*(Be){if(r=Be,null!==r){if(b=t.getRenderTarget(),r.addEventListener("select",ae),r.addEventListener("selectstart",ae),r.addEventListener("selectend",ae),r.addEventListener("squeeze",ae),r.addEventListener("squeezestart",ae),r.addEventListener("squeezeend",ae),r.addEventListener("end",he),r.addEventListener("inputsourceschange",xe),!0!==g.xrCompatible&&(yield n.makeXRCompatible()),D=t.getPixelRatio(),t.getSize(A),void 0===r.renderState.layers)p=new XRWebGLLayer(r,n,{antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:p}),t.setPixelRatio(1),t.setSize(p.framebufferWidth,p.framebufferHeight,!1),x=new rv(p.framebufferWidth,p.framebufferHeight,{format:Gc,type:_f,colorSpace:t.outputColorSpace,stencilBuffer:g.stencil});else{let Fe=null,Ze=null,$e=null;g.depth&&($e=g.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Fe=g.stencil?ky:Ry,Ze=g.stencil?Iy:ng);const ft={colorFormat:n.RGBA8,depthFormat:$e,scaleFactor:s};h=new XRWebGLBinding(r,n),u=h.createProjectionLayer(ft),r.updateRenderState({layers:[u]}),t.setPixelRatio(1),t.setSize(u.textureWidth,u.textureHeight,!1),x=new rv(u.textureWidth,u.textureHeight,{format:Gc,type:_f,depthTexture:new iY(u.textureWidth,u.textureHeight,Ze,void 0,void 0,void 0,void 0,void 0,void 0,Fe),stencilBuffer:g.stencil,colorSpace:t.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:!1===u.ignoreDepthValues})}x.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield r.requestReferenceSpace(a),Qe.setContext(r),Qe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(Be){return Pe.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};const _e=new qe,be=new qe;function Te(Pe,Be){null===Be?Pe.matrixWorld.copy(Pe.matrix):Pe.matrixWorld.multiplyMatrices(Be.matrixWorld,Pe.matrix),Pe.matrixWorldInverse.copy(Pe.matrixWorld).invert()}this.updateCamera=function(Pe){if(null===r)return;let Be=Pe.near,Fe=Pe.far;null!==v.texture&&(v.depthNear>0&&(Be=v.depthNear),v.depthFar>0&&(Fe=v.depthFar)),L.near=N.near=R.near=Be,L.far=N.far=R.far=Fe,(Q!==L.near||le!==L.far)&&(r.updateRenderState({depthNear:L.near,depthFar:L.far}),Q=L.near,le=L.far),R.layers.mask=2|Pe.layers.mask,N.layers.mask=4|Pe.layers.mask,L.layers.mask=R.layers.mask|N.layers.mask;const Ze=Pe.parent,$e=L.cameras;Te(L,Ze);for(let ft=0;ft<$e.length;ft++)Te($e[ft],Ze);2===$e.length?function me(Pe,Be,Fe){_e.setFromMatrixPosition(Be.matrixWorld),be.setFromMatrixPosition(Fe.matrixWorld);const Ze=_e.distanceTo(be),$e=Be.projectionMatrix.elements,ft=Fe.projectionMatrix.elements,it=$e[14]/($e[10]-1),Nt=$e[14]/($e[10]+1),nt=($e[9]+1)/$e[5],st=($e[9]-1)/$e[5],Ie=($e[8]-1)/$e[0],Yt=(ft[8]+1)/ft[0],wt=it*Ie,Xt=it*Yt,Ct=Ze/(-Ie+Yt),Wt=Ct*-Ie;if(Be.matrixWorld.decompose(Pe.position,Pe.quaternion,Pe.scale),Pe.translateX(Wt),Pe.translateZ(Ct),Pe.matrixWorld.compose(Pe.position,Pe.quaternion,Pe.scale),Pe.matrixWorldInverse.copy(Pe.matrixWorld).invert(),-1===$e[10])Pe.projectionMatrix.copy(Be.projectionMatrix),Pe.projectionMatrixInverse.copy(Be.projectionMatrixInverse);else{const Qt=it+Ct,Ae=Nt+Ct;Pe.projectionMatrix.makePerspective(wt-Wt,Xt+(Ze-Wt),nt*Nt/Ae*Qt,st*Nt/Ae*Qt,Qt,Ae),Pe.projectionMatrixInverse.copy(Pe.projectionMatrix).invert()}}(L,R,N):L.projectionMatrix.copy(R.projectionMatrix),function Le(Pe,Be,Fe){null===Fe?Pe.matrix.copy(Be.matrixWorld):(Pe.matrix.copy(Fe.matrixWorld),Pe.matrix.invert(),Pe.matrix.multiply(Be.matrixWorld)),Pe.matrix.decompose(Pe.position,Pe.quaternion,Pe.scale),Pe.updateMatrixWorld(!0),Pe.projectionMatrix.copy(Be.projectionMatrix),Pe.projectionMatrixInverse.copy(Be.projectionMatrixInverse),Pe.isPerspectiveCamera&&(Pe.fov=2*Uy*Math.atan(1/Pe.projectionMatrix.elements[5]),Pe.zoom=1)}(Pe,L,Ze)},this.getCamera=function(){return L},this.getFoveation=function(){if(null!==u||null!==p)return l},this.setFoveation=function(Pe){l=Pe,null!==u&&(u.fixedFoveation=Pe),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=Pe)},this.hasDepthSensing=function(){return null!==v.texture},this.getDepthSensingMesh=function(){return v.getMesh(L)};let ke=null;const Qe=new $X;Qe.setAnimationLoop(function Re(Pe,Be){if(d=Be.getViewerPose(c||o),m=Be,null!==d){const Fe=d.views;null!==p&&(t.setRenderTargetFramebuffer(x,p.framebuffer),t.setRenderTarget(x));let Ze=!1;Fe.length!==L.cameras.length&&(L.cameras.length=0,Ze=!0);for(let ft=0;ft<Fe.length;ft++){const it=Fe[ft];let Nt=null;if(null!==p)Nt=p.getViewport(it);else{const st=h.getViewSubImage(u,it);Nt=st.viewport,0===ft&&(t.setRenderTargetTextures(x,st.colorTexture,u.ignoreDepthValues?void 0:st.depthStencilTexture),t.setRenderTarget(x))}let nt=k[ft];void 0===nt&&(nt=new Pl,nt.layers.enable(ft),nt.viewport=new xs,k[ft]=nt),nt.matrix.fromArray(it.transform.matrix),nt.matrix.decompose(nt.position,nt.quaternion,nt.scale),nt.projectionMatrix.fromArray(it.projectionMatrix),nt.projectionMatrixInverse.copy(nt.projectionMatrix).invert(),nt.viewport.set(Nt.x,Nt.y,Nt.width,Nt.height),0===ft&&(L.matrix.copy(nt.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),!0===Ze&&L.cameras.push(nt)}const $e=r.enabledFeatures;if($e&&$e.includes("depth-sensing")){const ft=h.getDepthInformation(Fe[0]);ft&&ft.isValid&&ft.texture&&v.init(t,ft,r.renderState)}}for(let Fe=0;Fe<w.length;Fe++){const Ze=P[Fe],$e=w[Fe];null!==Ze&&void 0!==$e&&$e.update(Ze,Be,c||o)}ke&&ke(Pe,Be),Be.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Be}),m=null}),this.setAnimationLoop=function(Pe){ke=Pe},this.dispose=function(){}}}const fv=new Pf,nAe=new rr;function iAe(e,t){function n(g,b){!0===g.matrixAutoUpdate&&g.updateMatrix(),b.value.copy(g.matrix)}function s(g,b){g.opacity.value=b.opacity,b.color&&g.diffuse.value.copy(b.color),b.emissive&&g.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(g.map.value=b.map,n(b.map,g.mapTransform)),b.alphaMap&&(g.alphaMap.value=b.alphaMap,n(b.alphaMap,g.alphaMapTransform)),b.bumpMap&&(g.bumpMap.value=b.bumpMap,n(b.bumpMap,g.bumpMapTransform),g.bumpScale.value=b.bumpScale,b.side===Hc&&(g.bumpScale.value*=-1)),b.normalMap&&(g.normalMap.value=b.normalMap,n(b.normalMap,g.normalMapTransform),g.normalScale.value.copy(b.normalScale),b.side===Hc&&g.normalScale.value.negate()),b.displacementMap&&(g.displacementMap.value=b.displacementMap,n(b.displacementMap,g.displacementMapTransform),g.displacementScale.value=b.displacementScale,g.displacementBias.value=b.displacementBias),b.emissiveMap&&(g.emissiveMap.value=b.emissiveMap,n(b.emissiveMap,g.emissiveMapTransform)),b.specularMap&&(g.specularMap.value=b.specularMap,n(b.specularMap,g.specularMapTransform)),b.alphaTest>0&&(g.alphaTest.value=b.alphaTest);const x=t.get(b),w=x.envMap,P=x.envMapRotation;w&&(g.envMap.value=w,fv.copy(P),fv.x*=-1,fv.y*=-1,fv.z*=-1,w.isCubeTexture&&!1===w.isRenderTargetTexture&&(fv.y*=-1,fv.z*=-1),g.envMapRotation.value.setFromMatrix4(nAe.makeRotationFromEuler(fv)),g.flipEnvMap.value=w.isCubeTexture&&!1===w.isRenderTargetTexture?-1:1,g.reflectivity.value=b.reflectivity,g.ior.value=b.ior,g.refractionRatio.value=b.refractionRatio),b.lightMap&&(g.lightMap.value=b.lightMap,g.lightMapIntensity.value=b.lightMapIntensity,n(b.lightMap,g.lightMapTransform)),b.aoMap&&(g.aoMap.value=b.aoMap,g.aoMapIntensity.value=b.aoMapIntensity,n(b.aoMap,g.aoMapTransform))}return{refreshFogUniforms:function i(g,b){b.color.getRGB(g.fogColor.value,qX(e)),b.isFog?(g.fogNear.value=b.near,g.fogFar.value=b.far):b.isFogExp2&&(g.fogDensity.value=b.density)},refreshMaterialUniforms:function r(g,b,x,w,P){b.isMeshBasicMaterial||b.isMeshLambertMaterial?s(g,b):b.isMeshToonMaterial?(s(g,b),function h(g,b){b.gradientMap&&(g.gradientMap.value=b.gradientMap)}(g,b)):b.isMeshPhongMaterial?(s(g,b),function d(g,b){g.specular.value.copy(b.specular),g.shininess.value=Math.max(b.shininess,1e-4)}(g,b)):b.isMeshStandardMaterial?(s(g,b),function u(g,b){g.metalness.value=b.metalness,b.metalnessMap&&(g.metalnessMap.value=b.metalnessMap,n(b.metalnessMap,g.metalnessMapTransform)),g.roughness.value=b.roughness,b.roughnessMap&&(g.roughnessMap.value=b.roughnessMap,n(b.roughnessMap,g.roughnessMapTransform)),b.envMap&&(g.envMapIntensity.value=b.envMapIntensity)}(g,b),b.isMeshPhysicalMaterial&&function p(g,b,x){g.ior.value=b.ior,b.sheen>0&&(g.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),g.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(g.sheenColorMap.value=b.sheenColorMap,n(b.sheenColorMap,g.sheenColorMapTransform)),b.sheenRoughnessMap&&(g.sheenRoughnessMap.value=b.sheenRoughnessMap,n(b.sheenRoughnessMap,g.sheenRoughnessMapTransform))),b.clearcoat>0&&(g.clearcoat.value=b.clearcoat,g.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(g.clearcoatMap.value=b.clearcoatMap,n(b.clearcoatMap,g.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,n(b.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(g.clearcoatNormalMap.value=b.clearcoatNormalMap,n(b.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===Hc&&g.clearcoatNormalScale.value.negate())),b.dispersion>0&&(g.dispersion.value=b.dispersion),b.iridescence>0&&(g.iridescence.value=b.iridescence,g.iridescenceIOR.value=b.iridescenceIOR,g.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(g.iridescenceMap.value=b.iridescenceMap,n(b.iridescenceMap,g.iridescenceMapTransform)),b.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=b.iridescenceThicknessMap,n(b.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),b.transmission>0&&(g.transmission.value=b.transmission,g.transmissionSamplerMap.value=x.texture,g.transmissionSamplerSize.value.set(x.width,x.height),b.transmissionMap&&(g.transmissionMap.value=b.transmissionMap,n(b.transmissionMap,g.transmissionMapTransform)),g.thickness.value=b.thickness,b.thicknessMap&&(g.thicknessMap.value=b.thicknessMap,n(b.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=b.attenuationDistance,g.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(g.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(g.anisotropyMap.value=b.anisotropyMap,n(b.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=b.specularIntensity,g.specularColor.value.copy(b.specularColor),b.specularColorMap&&(g.specularColorMap.value=b.specularColorMap,n(b.specularColorMap,g.specularColorMapTransform)),b.specularIntensityMap&&(g.specularIntensityMap.value=b.specularIntensityMap,n(b.specularIntensityMap,g.specularIntensityMapTransform))}(g,b,P)):b.isMeshMatcapMaterial?(s(g,b),function m(g,b){b.matcap&&(g.matcap.value=b.matcap)}(g,b)):b.isMeshDepthMaterial?s(g,b):b.isMeshDistanceMaterial?(s(g,b),function v(g,b){const x=t.get(b).light;g.referencePosition.value.setFromMatrixPosition(x.matrixWorld),g.nearDistance.value=x.shadow.camera.near,g.farDistance.value=x.shadow.camera.far}(g,b)):b.isMeshNormalMaterial?s(g,b):b.isLineBasicMaterial?(function o(g,b){g.diffuse.value.copy(b.color),g.opacity.value=b.opacity,b.map&&(g.map.value=b.map,n(b.map,g.mapTransform))}(g,b),b.isLineDashedMaterial&&function a(g,b){g.dashSize.value=b.dashSize,g.totalSize.value=b.dashSize+b.gapSize,g.scale.value=b.scale}(g,b)):b.isPointsMaterial?function l(g,b,x,w){g.diffuse.value.copy(b.color),g.opacity.value=b.opacity,g.size.value=b.size*x,g.scale.value=.5*w,b.map&&(g.map.value=b.map,n(b.map,g.uvTransform)),b.alphaMap&&(g.alphaMap.value=b.alphaMap,n(b.alphaMap,g.alphaMapTransform)),b.alphaTest>0&&(g.alphaTest.value=b.alphaTest)}(g,b,x,w):b.isSpriteMaterial?function c(g,b){g.diffuse.value.copy(b.color),g.opacity.value=b.opacity,g.rotation.value=b.rotation,b.map&&(g.map.value=b.map,n(b.map,g.mapTransform)),b.alphaMap&&(g.alphaMap.value=b.alphaMap,n(b.alphaMap,g.alphaMapTransform)),b.alphaTest>0&&(g.alphaTest.value=b.alphaTest)}(g,b):b.isShadowMaterial?(g.color.value.copy(b.color),g.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}}}function rAe(e,t,n,i){let r={},s={},o=[];const a=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function p(x,w,P,A){const D=x.value,R=w+"_"+P;if(void 0===A[R])return A[R]="number"==typeof D||"boolean"==typeof D?D:D.clone(),!0;{const N=A[R];if("number"==typeof D||"boolean"==typeof D){if(N!==D)return A[R]=D,!0}else if(!1===N.equals(D))return N.copy(D),!0}return!1}function v(x){const w={boundary:0,storage:0};return"number"==typeof x||"boolean"==typeof x?(w.boundary=4,w.storage=4):x.isVector2?(w.boundary=8,w.storage=8):x.isVector3||x.isColor?(w.boundary=16,w.storage=12):x.isVector4?(w.boundary=16,w.storage=16):x.isMatrix3?(w.boundary=48,w.storage=48):x.isMatrix4?(w.boundary=64,w.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),w}function g(x){const w=x.target;w.removeEventListener("dispose",g);const P=o.indexOf(w.__bindingPointIndex);o.splice(P,1),e.deleteBuffer(r[w.id]),delete r[w.id],delete s[w.id]}return{bind:function l(x,w){i.uniformBlockBinding(x,w.program)},update:function c(x,w){let P=r[x.id];void 0===P&&(function m(x){const w=x.uniforms;let P=0;for(let R=0,N=w.length;R<N;R++){const k=Array.isArray(w[R])?w[R]:[w[R]];for(let L=0,Q=k.length;L<Q;L++){const le=k[L],ae=Array.isArray(le.value)?le.value:[le.value];for(let he=0,xe=ae.length;he<xe;he++){const be=v(ae[he]),me=P%16,Te=me%be.boundary,Le=me+Te;P+=Te,0!==Le&&16-Le<be.storage&&(P+=16-Le),le.__data=new Float32Array(be.storage/Float32Array.BYTES_PER_ELEMENT),le.__offset=P,P+=be.storage}}}const D=P%16;D>0&&(P+=16-D),x.__size=P,x.__cache={}}(x),P=function d(x){const w=function h(){for(let x=0;x<a;x++)if(-1===o.indexOf(x))return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();x.__bindingPointIndex=w;const P=e.createBuffer(),A=x.__size,D=x.usage;return e.bindBuffer(e.UNIFORM_BUFFER,P),e.bufferData(e.UNIFORM_BUFFER,A,D),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,w,P),P}(x),r[x.id]=P,x.addEventListener("dispose",g)),i.updateUBOMapping(x,w.program);const D=t.render.frame;s[x.id]!==D&&(function u(x){const P=x.uniforms,A=x.__cache;e.bindBuffer(e.UNIFORM_BUFFER,r[x.id]);for(let D=0,R=P.length;D<R;D++){const N=Array.isArray(P[D])?P[D]:[P[D]];for(let k=0,L=N.length;k<L;k++){const Q=N[k];if(!0===p(Q,D,k,A)){const le=Q.__offset,ae=Array.isArray(Q.value)?Q.value:[Q.value];let he=0;for(let xe=0;xe<ae.length;xe++){const _e=ae[xe],be=v(_e);"number"==typeof _e||"boolean"==typeof _e?(Q.__data[0]=_e,e.bufferSubData(e.UNIFORM_BUFFER,le+he,Q.__data)):_e.isMatrix3?(Q.__data[0]=_e.elements[0],Q.__data[1]=_e.elements[1],Q.__data[2]=_e.elements[2],Q.__data[3]=0,Q.__data[4]=_e.elements[3],Q.__data[5]=_e.elements[4],Q.__data[6]=_e.elements[5],Q.__data[7]=0,Q.__data[8]=_e.elements[6],Q.__data[9]=_e.elements[7],Q.__data[10]=_e.elements[8],Q.__data[11]=0):(_e.toArray(Q.__data,he),he+=be.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,le,Q.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(x),s[x.id]=D)},dispose:function b(){for(const x in r)e.deleteBuffer(r[x]);o=[],r={},s={}}}}class sAe{constructor(t={}){const{canvas:n=SPe(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:u=!1}=t;let p;if(this.isWebGLRenderer=!0,null!==i){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),v=new Int32Array(4);let g=null,b=null;const x=[],w=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Rd,this.toneMapping=eg,this.toneMappingExposure=1;const P=this;let A=!1,D=0,R=0,N=null,k=-1,L=null;const Q=new xs,le=new xs;let ae=null;const he=new ci(0);let xe=0,_e=n.width,be=n.height,me=1,Te=null,Le=null;const ke=new xs(0,0,_e,be),Re=new xs(0,0,_e,be);let Qe=!1;const Pe=new nE;let Be=!1,Fe=!1;const Ze=new rr,$e=new rr,ft=new qe,it=new xs,Nt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let nt=!1;function st(){return null===N?me:1}let wt,Xt,Ct,Wt,Qt,Ae,re,fe,He,ut,et,Lt,$t,qt,Bt,It,sn,fn,On,pn,ai,di,sr,Ce,Ie=i;function Yt(Oe,at){return n.getContext(Oe,at)}try{const Oe={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:h};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r170"),n.addEventListener("webglcontextlost",vt,!1),n.addEventListener("webglcontextrestored",an,!1),n.addEventListener("webglcontextcreationerror",wn,!1),null===Ie){const at="webgl2";if(Ie=Yt(at,Oe),null===Ie)throw Yt(at)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Oe){throw console.error("THREE.WebGLRenderer: "+Oe.message),Oe}function pt(){wt=new cEe(Ie),wt.init(),di=new $Oe(Ie,wt),Xt=new iEe(Ie,wt,t,di),Ct=new HOe(Ie,wt),Xt.reverseDepthBuffer&&u&&Ct.buffers.depth.setReversed(!0),Wt=new uEe(Ie),Qt=new TOe,Ae=new YOe(Ie,wt,Ct,Qt,Xt,di,Wt),re=new sEe(P),fe=new lEe(P),He=new JPe(Ie),sr=new tEe(Ie,He),ut=new dEe(Ie,He,Wt,sr),et=new fEe(Ie,ut,He,Wt),On=new pEe(Ie,Xt,Ae),It=new rEe(Qt),Lt=new AOe(P,re,fe,wt,Xt,sr,It),$t=new iAe(P,Qt),qt=new IOe,Bt=new BOe(wt),fn=new eEe(P,re,fe,Ct,et,p,l),sn=new VOe(P,et,Xt),Ce=new rAe(Ie,Wt,Xt,Ct),pn=new nEe(Ie,wt,Wt),ai=new hEe(Ie,wt,Wt),Wt.programs=Lt.programs,P.capabilities=Xt,P.extensions=wt,P.properties=Qt,P.renderLists=qt,P.shadowMap=sn,P.state=Ct,P.info=Wt}pt();const rt=new tAe(P,Ie);function vt(Oe){Oe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function an(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const Oe=Wt.autoReset,at=sn.enabled,Dt=sn.autoUpdate,Rt=sn.needsUpdate,yt=sn.type;pt(),Wt.autoReset=Oe,sn.enabled=at,sn.autoUpdate=Dt,sn.needsUpdate=Rt,sn.type=yt}function wn(Oe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Oe.statusMessage)}function hi(Oe){const at=Oe.target;at.removeEventListener("dispose",hi),function Hr(Oe){(function wo(Oe){const at=Qt.get(Oe).programs;void 0!==at&&(at.forEach(function(Dt){Lt.releaseProgram(Dt)}),Oe.isShaderMaterial&&Lt.releaseShaderCache(Oe))})(Oe),Qt.remove(Oe)}(at)}function ki(Oe,at,Dt){!0===Oe.transparent&&Oe.side===vf&&!1===Oe.forceSinglePass?(Oe.side=Hc,Oe.needsUpdate=!0,on(Oe,at,Dt),Oe.side=Qm,Oe.needsUpdate=!0,on(Oe,at,Dt),Oe.side=vf):on(Oe,at,Dt)}this.xr=rt,this.getContext=function(){return Ie},this.getContextAttributes=function(){return Ie.getContextAttributes()},this.forceContextLoss=function(){const Oe=wt.get("WEBGL_lose_context");Oe&&Oe.loseContext()},this.forceContextRestore=function(){const Oe=wt.get("WEBGL_lose_context");Oe&&Oe.restoreContext()},this.getPixelRatio=function(){return me},this.setPixelRatio=function(Oe){void 0!==Oe&&(me=Oe,this.setSize(_e,be,!1))},this.getSize=function(Oe){return Oe.set(_e,be)},this.setSize=function(Oe,at,Dt=!0){rt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(_e=Oe,be=at,n.width=Math.floor(Oe*me),n.height=Math.floor(at*me),!0===Dt&&(n.style.width=Oe+"px",n.style.height=at+"px"),this.setViewport(0,0,Oe,at))},this.getDrawingBufferSize=function(Oe){return Oe.set(_e*me,be*me).floor()},this.setDrawingBufferSize=function(Oe,at,Dt){_e=Oe,be=at,me=Dt,n.width=Math.floor(Oe*Dt),n.height=Math.floor(at*Dt),this.setViewport(0,0,Oe,at)},this.getCurrentViewport=function(Oe){return Oe.copy(Q)},this.getViewport=function(Oe){return Oe.copy(ke)},this.setViewport=function(Oe,at,Dt,Rt){Oe.isVector4?ke.set(Oe.x,Oe.y,Oe.z,Oe.w):ke.set(Oe,at,Dt,Rt),Ct.viewport(Q.copy(ke).multiplyScalar(me).round())},this.getScissor=function(Oe){return Oe.copy(Re)},this.setScissor=function(Oe,at,Dt,Rt){Oe.isVector4?Re.set(Oe.x,Oe.y,Oe.z,Oe.w):Re.set(Oe,at,Dt,Rt),Ct.scissor(le.copy(Re).multiplyScalar(me).round())},this.getScissorTest=function(){return Qe},this.setScissorTest=function(Oe){Ct.setScissorTest(Qe=Oe)},this.setOpaqueSort=function(Oe){Te=Oe},this.setTransparentSort=function(Oe){Le=Oe},this.getClearColor=function(Oe){return Oe.copy(fn.getClearColor())},this.setClearColor=function(){fn.setClearColor.apply(fn,arguments)},this.getClearAlpha=function(){return fn.getClearAlpha()},this.setClearAlpha=function(){fn.setClearAlpha.apply(fn,arguments)},this.clear=function(Oe=!0,at=!0,Dt=!0){let Rt=0;if(Oe){let yt=!1;if(null!==N){const Tn=N.texture.format;yt=Tn===jk||Tn===Vk||Tn===E2}if(yt){const Tn=N.texture.type,Dn=Tn===_f||Tn===ng||Tn===Uw||Tn===Iy||Tn===Bk||Tn===zk,In=fn.getClearColor(),pi=fn.getClearAlpha(),Ji=In.r,$i=In.g,_i=In.b;Dn?(m[0]=Ji,m[1]=$i,m[2]=_i,m[3]=pi,Ie.clearBufferuiv(Ie.COLOR,0,m)):(v[0]=Ji,v[1]=$i,v[2]=_i,v[3]=pi,Ie.clearBufferiv(Ie.COLOR,0,v))}else Rt|=Ie.COLOR_BUFFER_BIT}at&&(Rt|=Ie.DEPTH_BUFFER_BIT),Dt&&(Rt|=Ie.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Ie.clear(Rt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",vt,!1),n.removeEventListener("webglcontextrestored",an,!1),n.removeEventListener("webglcontextcreationerror",wn,!1),qt.dispose(),Bt.dispose(),Qt.dispose(),re.dispose(),fe.dispose(),et.dispose(),sr.dispose(),Ce.dispose(),Lt.dispose(),rt.dispose(),rt.removeEventListener("sessionstart",qC),rt.removeEventListener("sessionend",$T),mm.stop()},this.renderBufferDirect=function(Oe,at,Dt,Rt,yt,Tn){null===at&&(at=Nt);const Dn=yt.isMesh&&yt.matrixWorld.determinant()<0,In=function Lr(Oe,at,Dt,Rt,yt){!0!==at.isScene&&(at=Nt),Ae.resetTextureUnits();const Tn=at.fog,In=null===N?P.outputColorSpace:!0===N.isXRRenderTarget?N.texture.colorSpace:Fy,pi=(Rt.isMeshStandardMaterial?fe:re).get(Rt.envMap||(Rt.isMeshStandardMaterial?at.environment:null)),Ji=!0===Rt.vertexColors&&!!Dt.attributes.color&&4===Dt.attributes.color.itemSize,$i=!!Dt.attributes.tangent&&(!!Rt.normalMap||Rt.anisotropy>0),_i=!!Dt.morphAttributes.position,Fr=!!Dt.morphAttributes.normal,Hs=!!Dt.morphAttributes.color;let ur=eg;Rt.toneMapped&&(null===N||!0===N.isXRRenderTarget)&&(ur=P.toneMapping);const Wo=Dt.morphAttributes.position||Dt.morphAttributes.normal||Dt.morphAttributes.color,ms=void 0!==Wo?Wo.length:0,ii=Qt.get(Rt),Kd=b.state.lights;!0!==Be||!0!==Fe&&Oe===L||It.setState(Rt,Oe,Oe===L&&Rt.id===k);let Ms=!1;Rt.version===ii.__version?(ii.needsLights&&ii.lightsStateVersion!==Kd.state.version||ii.outputColorSpace!==In||yt.isBatchedMesh&&!1===ii.batching||!yt.isBatchedMesh&&!0===ii.batching||yt.isBatchedMesh&&!0===ii.batchingColor&&null===yt.colorTexture||yt.isBatchedMesh&&!1===ii.batchingColor&&null!==yt.colorTexture||yt.isInstancedMesh&&!1===ii.instancing||!yt.isInstancedMesh&&!0===ii.instancing||yt.isSkinnedMesh&&!1===ii.skinning||!yt.isSkinnedMesh&&!0===ii.skinning||yt.isInstancedMesh&&!0===ii.instancingColor&&null===yt.instanceColor||yt.isInstancedMesh&&!1===ii.instancingColor&&null!==yt.instanceColor||yt.isInstancedMesh&&!0===ii.instancingMorph&&null===yt.morphTexture||yt.isInstancedMesh&&!1===ii.instancingMorph&&null!==yt.morphTexture||ii.envMap!==pi||!0===Rt.fog&&ii.fog!==Tn||void 0!==ii.numClippingPlanes&&(ii.numClippingPlanes!==It.numPlanes||ii.numIntersection!==It.numIntersection)||ii.vertexAlphas!==Ji||ii.vertexTangents!==$i||ii.morphTargets!==_i||ii.morphNormals!==Fr||ii.morphColors!==Hs||ii.toneMapping!==ur||ii.morphTargetsCount!==ms)&&(Ms=!0):(Ms=!0,ii.__version=Rt.version);let ld=ii.currentProgram;!0===Ms&&(ld=on(Rt,at,yt));let cx=!1,Zd=!1,YC=!1;const yo=ld.getUniforms(),Vp=ii.uniforms;if(Ct.useProgram(ld.program)&&(cx=!0,Zd=!0,YC=!0),Rt.id!==k&&(k=Rt.id,Zd=!0),cx||L!==Oe){Ct.buffers.depth.getReversed()?(Ze.copy(Oe.projectionMatrix),function OPe(e){const t=e.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(Ze),function APe(e){const t=e.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}(Ze),yo.setValue(Ie,"projectionMatrix",Ze)):yo.setValue(Ie,"projectionMatrix",Oe.projectionMatrix),yo.setValue(Ie,"viewMatrix",Oe.matrixWorldInverse);const e0=yo.map.cameraPosition;void 0!==e0&&e0.setValue(Ie,ft.setFromMatrixPosition(Oe.matrixWorld)),Xt.logarithmicDepthBuffer&&yo.setValue(Ie,"logDepthBufFC",2/(Math.log(Oe.far+1)/Math.LN2)),(Rt.isMeshPhongMaterial||Rt.isMeshToonMaterial||Rt.isMeshLambertMaterial||Rt.isMeshBasicMaterial||Rt.isMeshStandardMaterial||Rt.isShaderMaterial)&&yo.setValue(Ie,"isOrthographic",!0===Oe.isOrthographicCamera),L!==Oe&&(L=Oe,Zd=!0,YC=!0)}if(yt.isSkinnedMesh){yo.setOptional(Ie,yt,"bindMatrix"),yo.setOptional(Ie,yt,"bindMatrixInverse");const zh=yt.skeleton;zh&&(null===zh.boneTexture&&zh.computeBoneTexture(),yo.setValue(Ie,"boneTexture",zh.boneTexture,Ae))}yt.isBatchedMesh&&(yo.setOptional(Ie,yt,"batchingTexture"),yo.setValue(Ie,"batchingTexture",yt._matricesTexture,Ae),yo.setOptional(Ie,yt,"batchingIdTexture"),yo.setValue(Ie,"batchingIdTexture",yt._indirectTexture,Ae),yo.setOptional(Ie,yt,"batchingColorTexture"),null!==yt._colorsTexture&&yo.setValue(Ie,"batchingColorTexture",yt._colorsTexture,Ae));const $C=Dt.morphAttributes;if((void 0!==$C.position||void 0!==$C.normal||void 0!==$C.color)&&On.update(yt,Dt,ld),(Zd||ii.receiveShadow!==yt.receiveShadow)&&(ii.receiveShadow=yt.receiveShadow,yo.setValue(Ie,"receiveShadow",yt.receiveShadow)),Rt.isMeshGouraudMaterial&&null!==Rt.envMap&&(Vp.envMap.value=pi,Vp.flipEnvMap.value=pi.isCubeTexture&&!1===pi.isRenderTargetTexture?-1:1),Rt.isMeshStandardMaterial&&null===Rt.envMap&&null!==at.environment&&(Vp.envMapIntensity.value=at.environmentIntensity),Zd&&(yo.setValue(Ie,"toneMappingExposure",P.toneMappingExposure),ii.needsLights&&function Wr(Oe,at){Oe.ambientLightColor.needsUpdate=at,Oe.lightProbe.needsUpdate=at,Oe.directionalLights.needsUpdate=at,Oe.directionalLightShadows.needsUpdate=at,Oe.pointLights.needsUpdate=at,Oe.pointLightShadows.needsUpdate=at,Oe.spotLights.needsUpdate=at,Oe.spotLightShadows.needsUpdate=at,Oe.rectAreaLights.needsUpdate=at,Oe.hemisphereLights.needsUpdate=at}(Vp,YC),Tn&&!0===Rt.fog&&$t.refreshFogUniforms(Vp,Tn),$t.refreshMaterialUniforms(Vp,Rt,me,be,b.state.transmissionRenderTarget[Oe.id]),oE.upload(Ie,vi(ii),Vp,Ae)),Rt.isShaderMaterial&&!0===Rt.uniformsNeedUpdate&&(oE.upload(Ie,vi(ii),Vp,Ae),Rt.uniformsNeedUpdate=!1),Rt.isSpriteMaterial&&yo.setValue(Ie,"center",yt.center),yo.setValue(Ie,"modelViewMatrix",yt.modelViewMatrix),yo.setValue(Ie,"normalMatrix",yt.normalMatrix),yo.setValue(Ie,"modelMatrix",yt.matrixWorld),Rt.isShaderMaterial||Rt.isRawShaderMaterial){const zh=Rt.uniformsGroups;for(let e0=0,t0=zh.length;e0<t0;e0++){const doe=zh[e0];Ce.update(doe,ld),Ce.bind(doe,ld)}}return ld}(Oe,at,Dt,Rt,yt);Ct.setMaterial(Rt,Dn);let pi=Dt.index,Ji=1;if(!0===Rt.wireframe){if(pi=ut.getWireframeAttribute(Dt),void 0===pi)return;Ji=2}const $i=Dt.drawRange,_i=Dt.attributes.position;let Fr=$i.start*Ji,Hs=($i.start+$i.count)*Ji;null!==Tn&&(Fr=Math.max(Fr,Tn.start*Ji),Hs=Math.min(Hs,(Tn.start+Tn.count)*Ji)),null!==pi?(Fr=Math.max(Fr,0),Hs=Math.min(Hs,pi.count)):null!=_i&&(Fr=Math.max(Fr,0),Hs=Math.min(Hs,_i.count));const ur=Hs-Fr;if(ur<0||ur===1/0)return;sr.setup(yt,Rt,In,Dt,pi);let Wo,ms=pn;if(null!==pi&&(Wo=He.get(pi),ms=ai,ms.setIndex(Wo)),yt.isMesh)!0===Rt.wireframe?(Ct.setLineWidth(Rt.wireframeLinewidth*st()),ms.setMode(Ie.LINES)):ms.setMode(Ie.TRIANGLES);else if(yt.isLine){let ii=Rt.linewidth;void 0===ii&&(ii=1),Ct.setLineWidth(ii*st()),ms.setMode(yt.isLineSegments?Ie.LINES:yt.isLineLoop?Ie.LINE_LOOP:Ie.LINE_STRIP)}else yt.isPoints?ms.setMode(Ie.POINTS):yt.isSprite&&ms.setMode(Ie.TRIANGLES);if(yt.isBatchedMesh)if(null!==yt._multiDrawInstances)ms.renderMultiDrawInstances(yt._multiDrawStarts,yt._multiDrawCounts,yt._multiDrawCount,yt._multiDrawInstances);else if(wt.get("WEBGL_multi_draw"))ms.renderMultiDraw(yt._multiDrawStarts,yt._multiDrawCounts,yt._multiDrawCount);else{const ii=yt._multiDrawStarts,Kd=yt._multiDrawCounts,Ms=yt._multiDrawCount,ld=pi?He.get(pi).bytesPerElement:1,cx=Qt.get(Rt).currentProgram.getUniforms();for(let Zd=0;Zd<Ms;Zd++)cx.setValue(Ie,"_gl_DrawID",Zd),ms.render(ii[Zd]/ld,Kd[Zd])}else if(yt.isInstancedMesh)ms.renderInstances(Fr,ur,yt.count);else if(Dt.isInstancedBufferGeometry){const Kd=Math.min(Dt.instanceCount,void 0!==Dt._maxInstanceCount?Dt._maxInstanceCount:1/0);ms.renderInstances(Fr,ur,Kd)}else ms.render(Fr,ur)},this.compile=function(Oe,at,Dt=null){null===Dt&&(Dt=Oe),b=Bt.get(Dt),b.init(at),w.push(b),Dt.traverseVisible(function(yt){yt.isLight&&yt.layers.test(at.layers)&&(b.pushLight(yt),yt.castShadow&&b.pushShadow(yt))}),Oe!==Dt&&Oe.traverseVisible(function(yt){yt.isLight&&yt.layers.test(at.layers)&&(b.pushLight(yt),yt.castShadow&&b.pushShadow(yt))}),b.setupLights();const Rt=new Set;return Oe.traverse(function(yt){if(!(yt.isMesh||yt.isPoints||yt.isLine||yt.isSprite))return;const Tn=yt.material;if(Tn)if(Array.isArray(Tn))for(let Dn=0;Dn<Tn.length;Dn++){const In=Tn[Dn];ki(In,Dt,yt),Rt.add(In)}else ki(Tn,Dt,yt),Rt.add(Tn)}),w.pop(),b=null,Rt},this.compileAsync=function(Oe,at,Dt=null){const Rt=this.compile(Oe,at,Dt);return new Promise(yt=>{function Tn(){Rt.forEach(function(Dn){Qt.get(Dn).currentProgram.isReady()&&Rt.delete(Dn)}),0!==Rt.size?setTimeout(Tn,10):yt(Oe)}null!==wt.get("KHR_parallel_shader_compile")?Tn():setTimeout(Tn,10)})};let ha=null;function qC(){mm.stop()}function $T(){mm.start()}const mm=new $X;function XC(Oe,at,Dt,Rt){if(!1===Oe.visible)return;if(Oe.layers.test(at.layers))if(Oe.isGroup)Dt=Oe.renderOrder;else if(Oe.isLOD)!0===Oe.autoUpdate&&Oe.update(at);else if(Oe.isLight)b.pushLight(Oe),Oe.castShadow&&b.pushShadow(Oe);else if(Oe.isSprite){if(!Oe.frustumCulled||Pe.intersectsSprite(Oe)){Rt&&it.setFromMatrixPosition(Oe.matrixWorld).applyMatrix4($e);const Dn=et.update(Oe),In=Oe.material;In.visible&&g.push(Oe,Dn,In,Dt,it.z,null)}}else if((Oe.isMesh||Oe.isLine||Oe.isPoints)&&(!Oe.frustumCulled||Pe.intersectsObject(Oe))){const Dn=et.update(Oe),In=Oe.material;if(Rt&&(void 0!==Oe.boundingSphere?(null===Oe.boundingSphere&&Oe.computeBoundingSphere(),it.copy(Oe.boundingSphere.center)):(null===Dn.boundingSphere&&Dn.computeBoundingSphere(),it.copy(Dn.boundingSphere.center)),it.applyMatrix4(Oe.matrixWorld).applyMatrix4($e)),Array.isArray(In)){const pi=Dn.groups;for(let Ji=0,$i=pi.length;Ji<$i;Ji++){const _i=pi[Ji],Fr=In[_i.materialIndex];Fr&&Fr.visible&&g.push(Oe,Dn,Fr,Dt,it.z,_i)}}else In.visible&&g.push(Oe,Dn,In,Dt,it.z,null)}const Tn=Oe.children;for(let Dn=0,In=Tn.length;Dn<In;Dn++)XC(Tn[Dn],at,Dt,Rt)}function We(Oe,at,Dt,Rt){const yt=Oe.opaque,Tn=Oe.transmissive,Dn=Oe.transparent;b.setupLightsView(Dt),!0===Be&&It.setGlobalState(P.clippingPlanes,Dt),Rt&&Ct.viewport(Q.copy(Rt)),yt.length>0&&rn(yt,at,Dt),Tn.length>0&&rn(Tn,at,Dt),Dn.length>0&&rn(Dn,at,Dt),Ct.buffers.depth.setTest(!0),Ct.buffers.depth.setMask(!0),Ct.buffers.color.setMask(!0),Ct.setPolygonOffset(!1)}function Ut(Oe,at,Dt,Rt){if(null!==(!0===Dt.isScene?Dt.overrideMaterial:null))return;void 0===b.state.transmissionRenderTarget[Rt.id]&&(b.state.transmissionRenderTarget[Rt.id]=new rv(1,1,{generateMipmaps:!0,type:wt.has("EXT_color_buffer_half_float")||wt.has("EXT_color_buffer_float")?Vw:_f,minFilter:yf,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ps.workingColorSpace}));const Tn=b.state.transmissionRenderTarget[Rt.id],Dn=Rt.viewport||Q;Tn.setSize(Dn.z,Dn.w);const In=P.getRenderTarget();P.setRenderTarget(Tn),P.getClearColor(he),xe=P.getClearAlpha(),xe<1&&P.setClearColor(16777215,.5),P.clear(),nt&&fn.render(Dt);const pi=P.toneMapping;P.toneMapping=eg;const Ji=Rt.viewport;if(void 0!==Rt.viewport&&(Rt.viewport=void 0),b.setupLightsView(Rt),!0===Be&&It.setGlobalState(P.clippingPlanes,Rt),rn(Oe,Dt,Rt),Ae.updateMultisampleRenderTarget(Tn),Ae.updateRenderTargetMipmap(Tn),!1===wt.has("WEBGL_multisampled_render_to_texture")){let $i=!1;for(let _i=0,Fr=at.length;_i<Fr;_i++){const Hs=at[_i],ur=Hs.object,Wo=Hs.geometry,ms=Hs.material,ii=Hs.group;if(ms.side===vf&&ur.layers.test(Rt.layers)){const Kd=ms.side;ms.side=Hc,ms.needsUpdate=!0,Tt(ur,Dt,Rt,Wo,ms,ii),ms.side=Kd,ms.needsUpdate=!0,$i=!0}}!0===$i&&(Ae.updateMultisampleRenderTarget(Tn),Ae.updateRenderTargetMipmap(Tn))}P.setRenderTarget(In),P.setClearColor(he,xe),void 0!==Ji&&(Rt.viewport=Ji),P.toneMapping=pi}function rn(Oe,at,Dt){const Rt=!0===at.isScene?at.overrideMaterial:null;for(let yt=0,Tn=Oe.length;yt<Tn;yt++){const Dn=Oe[yt],In=Dn.object,pi=Dn.geometry,Ji=null===Rt?Dn.material:Rt,$i=Dn.group;In.layers.test(Dt.layers)&&Tt(In,at,Dt,pi,Ji,$i)}}function Tt(Oe,at,Dt,Rt,yt,Tn){Oe.onBeforeRender(P,at,Dt,Rt,yt,Tn),Oe.modelViewMatrix.multiplyMatrices(Dt.matrixWorldInverse,Oe.matrixWorld),Oe.normalMatrix.getNormalMatrix(Oe.modelViewMatrix),yt.onBeforeRender(P,at,Dt,Rt,Oe,Tn),!0===yt.transparent&&yt.side===vf&&!1===yt.forceSinglePass?(yt.side=Hc,yt.needsUpdate=!0,P.renderBufferDirect(Dt,at,Rt,yt,Oe,Tn),yt.side=Qm,yt.needsUpdate=!0,P.renderBufferDirect(Dt,at,Rt,yt,Oe,Tn),yt.side=vf):P.renderBufferDirect(Dt,at,Rt,yt,Oe,Tn),Oe.onAfterRender(P,at,Dt,Rt,yt,Tn)}function on(Oe,at,Dt){!0!==at.isScene&&(at=Nt);const Rt=Qt.get(Oe),yt=b.state.lights,Dn=yt.state.version,In=Lt.getParameters(Oe,yt.state,b.state.shadowsArray,at,Dt),pi=Lt.getProgramCacheKey(In);let Ji=Rt.programs;Rt.environment=Oe.isMeshStandardMaterial?at.environment:null,Rt.fog=at.fog,Rt.envMap=(Oe.isMeshStandardMaterial?fe:re).get(Oe.envMap||Rt.environment),Rt.envMapRotation=null!==Rt.environment&&null===Oe.envMap?at.environmentRotation:Oe.envMapRotation,void 0===Ji&&(Oe.addEventListener("dispose",hi),Ji=new Map,Rt.programs=Ji);let $i=Ji.get(pi);if(void 0!==$i){if(Rt.currentProgram===$i&&Rt.lightsStateVersion===Dn)return hr(Oe,In),$i}else In.uniforms=Lt.getUniforms(Oe),Oe.onBeforeCompile(In,P),$i=Lt.acquireProgram(In,pi),Ji.set(pi,$i),Rt.uniforms=In.uniforms;const _i=Rt.uniforms;return(!Oe.isShaderMaterial&&!Oe.isRawShaderMaterial||!0===Oe.clipping)&&(_i.clippingPlanes=It.uniform),hr(Oe,In),Rt.needsLights=function js(Oe){return Oe.isMeshLambertMaterial||Oe.isMeshToonMaterial||Oe.isMeshPhongMaterial||Oe.isMeshStandardMaterial||Oe.isShadowMaterial||Oe.isShaderMaterial&&!0===Oe.lights}(Oe),Rt.lightsStateVersion=Dn,Rt.needsLights&&(_i.ambientLightColor.value=yt.state.ambient,_i.lightProbe.value=yt.state.probe,_i.directionalLights.value=yt.state.directional,_i.directionalLightShadows.value=yt.state.directionalShadow,_i.spotLights.value=yt.state.spot,_i.spotLightShadows.value=yt.state.spotShadow,_i.rectAreaLights.value=yt.state.rectArea,_i.ltc_1.value=yt.state.rectAreaLTC1,_i.ltc_2.value=yt.state.rectAreaLTC2,_i.pointLights.value=yt.state.point,_i.pointLightShadows.value=yt.state.pointShadow,_i.hemisphereLights.value=yt.state.hemi,_i.directionalShadowMap.value=yt.state.directionalShadowMap,_i.directionalShadowMatrix.value=yt.state.directionalShadowMatrix,_i.spotShadowMap.value=yt.state.spotShadowMap,_i.spotLightMatrix.value=yt.state.spotLightMatrix,_i.spotLightMap.value=yt.state.spotLightMap,_i.pointShadowMap.value=yt.state.pointShadowMap,_i.pointShadowMatrix.value=yt.state.pointShadowMatrix),Rt.currentProgram=$i,Rt.uniformsList=null,$i}function vi(Oe){if(null===Oe.uniformsList){const at=Oe.currentProgram.getUniforms();Oe.uniformsList=oE.seqWithValue(at.seq,Oe.uniforms)}return Oe.uniformsList}function hr(Oe,at){const Dt=Qt.get(Oe);Dt.outputColorSpace=at.outputColorSpace,Dt.batching=at.batching,Dt.batchingColor=at.batchingColor,Dt.instancing=at.instancing,Dt.instancingColor=at.instancingColor,Dt.instancingMorph=at.instancingMorph,Dt.skinning=at.skinning,Dt.morphTargets=at.morphTargets,Dt.morphNormals=at.morphNormals,Dt.morphColors=at.morphColors,Dt.morphTargetsCount=at.morphTargetsCount,Dt.numClippingPlanes=at.numClippingPlanes,Dt.numIntersection=at.numClipIntersection,Dt.vertexAlphas=at.vertexAlphas,Dt.vertexTangents=at.vertexTangents,Dt.toneMapping=at.toneMapping}mm.setAnimationLoop(function Go(Oe){ha&&ha(Oe)}),typeof self<"u"&&mm.setContext(self),this.setAnimationLoop=function(Oe){ha=Oe,rt.setAnimationLoop(Oe),null===Oe?mm.stop():mm.start()},rt.addEventListener("sessionstart",qC),rt.addEventListener("sessionend",$T),this.render=function(Oe,at){if(void 0!==at&&!0!==at.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===A)return;if(!0===Oe.matrixWorldAutoUpdate&&Oe.updateMatrixWorld(),null===at.parent&&!0===at.matrixWorldAutoUpdate&&at.updateMatrixWorld(),!0===rt.enabled&&!0===rt.isPresenting&&(!0===rt.cameraAutoUpdate&&rt.updateCamera(at),at=rt.getCamera()),!0===Oe.isScene&&Oe.onBeforeRender(P,Oe,at,N),b=Bt.get(Oe,w.length),b.init(at),w.push(b),$e.multiplyMatrices(at.projectionMatrix,at.matrixWorldInverse),Pe.setFromProjectionMatrix($e),Fe=this.localClippingEnabled,Be=It.init(this.clippingPlanes,Fe),g=qt.get(Oe,x.length),g.init(),x.push(g),!0===rt.enabled&&!0===rt.isPresenting){const Tn=P.xr.getDepthSensingMesh();null!==Tn&&XC(Tn,at,-1/0,P.sortObjects)}XC(Oe,at,0,P.sortObjects),g.finish(),!0===P.sortObjects&&g.sort(Te,Le),nt=!1===rt.enabled||!1===rt.isPresenting||!1===rt.hasDepthSensing(),nt&&fn.addToRenderList(g,Oe),this.info.render.frame++,!0===Be&&It.beginShadows(),sn.render(b.state.shadowsArray,Oe,at),!0===Be&&It.endShadows(),!0===this.info.autoReset&&this.info.reset();const Rt=g.opaque,yt=g.transmissive;if(b.setupLights(),at.isArrayCamera){const Tn=at.cameras;if(yt.length>0)for(let Dn=0,In=Tn.length;Dn<In;Dn++)Ut(Rt,yt,Oe,Tn[Dn]);nt&&fn.render(Oe);for(let Dn=0,In=Tn.length;Dn<In;Dn++){const pi=Tn[Dn];We(g,Oe,pi,pi.viewport)}}else yt.length>0&&Ut(Rt,yt,Oe,at),nt&&fn.render(Oe),We(g,Oe,at);null!==N&&(Ae.updateMultisampleRenderTarget(N),Ae.updateRenderTargetMipmap(N)),!0===Oe.isScene&&Oe.onAfterRender(P,Oe,at),sr.resetDefaultState(),k=-1,L=null,w.pop(),w.length>0?(b=w[w.length-1],!0===Be&&It.setGlobalState(P.clippingPlanes,b.state.camera)):b=null,x.pop(),g=x.length>0?x[x.length-1]:null},this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(Oe,at,Dt){Qt.get(Oe.texture).__webglTexture=at,Qt.get(Oe.depthTexture).__webglTexture=Dt;const Rt=Qt.get(Oe);Rt.__hasExternalTextures=!0,Rt.__autoAllocateDepthBuffer=void 0===Dt,Rt.__autoAllocateDepthBuffer||!0===wt.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Rt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Oe,at){const Dt=Qt.get(Oe);Dt.__webglFramebuffer=at,Dt.__useDefaultFramebuffer=void 0===at},this.setRenderTarget=function(Oe,at=0,Dt=0){N=Oe,D=at,R=Dt;let Rt=!0,yt=null,Tn=!1,Dn=!1;if(Oe){const pi=Qt.get(Oe);if(void 0!==pi.__useDefaultFramebuffer)Ct.bindFramebuffer(Ie.FRAMEBUFFER,null),Rt=!1;else if(void 0===pi.__webglFramebuffer)Ae.setupRenderTarget(Oe);else if(pi.__hasExternalTextures)Ae.rebindTextures(Oe,Qt.get(Oe.texture).__webglTexture,Qt.get(Oe.depthTexture).__webglTexture);else if(Oe.depthBuffer){const _i=Oe.depthTexture;if(pi.__boundDepthTexture!==_i){if(null!==_i&&Qt.has(_i)&&(Oe.width!==_i.image.width||Oe.height!==_i.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Ae.setupDepthRenderbuffer(Oe)}}const Ji=Oe.texture;(Ji.isData3DTexture||Ji.isDataArrayTexture||Ji.isCompressedArrayTexture)&&(Dn=!0);const $i=Qt.get(Oe).__webglFramebuffer;Oe.isWebGLCubeRenderTarget?(yt=Array.isArray($i[at])?$i[at][Dt]:$i[at],Tn=!0):yt=Oe.samples>0&&!1===Ae.useMultisampledRTT(Oe)?Qt.get(Oe).__webglMultisampledFramebuffer:Array.isArray($i)?$i[Dt]:$i,Q.copy(Oe.viewport),le.copy(Oe.scissor),ae=Oe.scissorTest}else Q.copy(ke).multiplyScalar(me).floor(),le.copy(Re).multiplyScalar(me).floor(),ae=Qe;if(Ct.bindFramebuffer(Ie.FRAMEBUFFER,yt)&&Rt&&Ct.drawBuffers(Oe,yt),Ct.viewport(Q),Ct.scissor(le),Ct.setScissorTest(ae),Tn){const pi=Qt.get(Oe.texture);Ie.framebufferTexture2D(Ie.FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,Ie.TEXTURE_CUBE_MAP_POSITIVE_X+at,pi.__webglTexture,Dt)}else if(Dn){const pi=Qt.get(Oe.texture);Ie.framebufferTextureLayer(Ie.FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,pi.__webglTexture,Dt||0,at||0)}k=-1},this.readRenderTargetPixels=function(Oe,at,Dt,Rt,yt,Tn,Dn){if(!Oe||!Oe.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let In=Qt.get(Oe).__webglFramebuffer;if(Oe.isWebGLCubeRenderTarget&&void 0!==Dn&&(In=In[Dn]),In){Ct.bindFramebuffer(Ie.FRAMEBUFFER,In);try{const pi=Oe.texture,Ji=pi.format,$i=pi.type;if(!Xt.textureFormatReadable(Ji))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Xt.textureTypeReadable($i))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");at>=0&&at<=Oe.width-Rt&&Dt>=0&&Dt<=Oe.height-yt&&Ie.readPixels(at,Dt,Rt,yt,di.convert(Ji),di.convert($i),Tn)}finally{const pi=null!==N?Qt.get(N).__webglFramebuffer:null;Ct.bindFramebuffer(Ie.FRAMEBUFFER,pi)}}},this.readRenderTargetPixelsAsync=function(){var Oe=(0,xo.Z)(function*(at,Dt,Rt,yt,Tn,Dn,In){if(!at||!at.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let pi=Qt.get(at).__webglFramebuffer;if(at.isWebGLCubeRenderTarget&&void 0!==In&&(pi=pi[In]),pi){const Ji=at.texture,$i=Ji.format,_i=Ji.type;if(!Xt.textureFormatReadable($i))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Xt.textureTypeReadable(_i))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Dt>=0&&Dt<=at.width-yt&&Rt>=0&&Rt<=at.height-Tn){Ct.bindFramebuffer(Ie.FRAMEBUFFER,pi);const Fr=Ie.createBuffer();Ie.bindBuffer(Ie.PIXEL_PACK_BUFFER,Fr),Ie.bufferData(Ie.PIXEL_PACK_BUFFER,Dn.byteLength,Ie.STREAM_READ),Ie.readPixels(Dt,Rt,yt,Tn,di.convert($i),di.convert(_i),0);const Hs=null!==N?Qt.get(N).__webglFramebuffer:null;Ct.bindFramebuffer(Ie.FRAMEBUFFER,Hs);const ur=Ie.fenceSync(Ie.SYNC_GPU_COMMANDS_COMPLETE,0);return Ie.flush(),yield function EPe(e,t,n){return new Promise(function(i,r){setTimeout(function s(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:r();break;case e.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:i()}},n)})}(Ie,ur,4),Ie.bindBuffer(Ie.PIXEL_PACK_BUFFER,Fr),Ie.getBufferSubData(Ie.PIXEL_PACK_BUFFER,0,Dn),Ie.deleteBuffer(Fr),Ie.deleteSync(ur),Dn}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}});return function(at,Dt,Rt,yt,Tn,Dn,In){return Oe.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(Oe,at=null,Dt=0){!0!==Oe.isTexture&&(Gw("WebGLRenderer: copyFramebufferToTexture function signature has changed."),at=arguments[0]||null,Oe=arguments[1]);const Rt=Math.pow(2,-Dt),yt=Math.floor(Oe.image.width*Rt),Tn=Math.floor(Oe.image.height*Rt),Dn=null!==at?at.x:0,In=null!==at?at.y:0;Ae.setTexture2D(Oe,0),Ie.copyTexSubImage2D(Ie.TEXTURE_2D,Dt,0,0,Dn,In,yt,Tn),Ct.unbindTexture()},this.copyTextureToTexture=function(Oe,at,Dt=null,Rt=null,yt=0){let Tn,Dn,In,pi,Ji,$i,_i,Fr,Hs;!0!==Oe.isTexture&&(Gw("WebGLRenderer: copyTextureToTexture function signature has changed."),Rt=arguments[0]||null,Oe=arguments[1],at=arguments[2],yt=arguments[3]||0,Dt=null);const ur=Oe.isCompressedTexture?Oe.mipmaps[yt]:Oe.image;null!==Dt?(Tn=Dt.max.x-Dt.min.x,Dn=Dt.max.y-Dt.min.y,In=Dt.isBox3?Dt.max.z-Dt.min.z:1,pi=Dt.min.x,Ji=Dt.min.y,$i=Dt.isBox3?Dt.min.z:0):(Tn=ur.width,Dn=ur.height,In=ur.depth||1,pi=0,Ji=0,$i=0),null!==Rt?(_i=Rt.x,Fr=Rt.y,Hs=Rt.z):(_i=0,Fr=0,Hs=0);const Wo=di.convert(at.format),ms=di.convert(at.type);let ii;at.isData3DTexture?(Ae.setTexture3D(at,0),ii=Ie.TEXTURE_3D):at.isDataArrayTexture||at.isCompressedArrayTexture?(Ae.setTexture2DArray(at,0),ii=Ie.TEXTURE_2D_ARRAY):(Ae.setTexture2D(at,0),ii=Ie.TEXTURE_2D),Ie.pixelStorei(Ie.UNPACK_FLIP_Y_WEBGL,at.flipY),Ie.pixelStorei(Ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,at.premultiplyAlpha),Ie.pixelStorei(Ie.UNPACK_ALIGNMENT,at.unpackAlignment);const Kd=Ie.getParameter(Ie.UNPACK_ROW_LENGTH),Ms=Ie.getParameter(Ie.UNPACK_IMAGE_HEIGHT),ld=Ie.getParameter(Ie.UNPACK_SKIP_PIXELS),cx=Ie.getParameter(Ie.UNPACK_SKIP_ROWS),Zd=Ie.getParameter(Ie.UNPACK_SKIP_IMAGES);Ie.pixelStorei(Ie.UNPACK_ROW_LENGTH,ur.width),Ie.pixelStorei(Ie.UNPACK_IMAGE_HEIGHT,ur.height),Ie.pixelStorei(Ie.UNPACK_SKIP_PIXELS,pi),Ie.pixelStorei(Ie.UNPACK_SKIP_ROWS,Ji),Ie.pixelStorei(Ie.UNPACK_SKIP_IMAGES,$i);const YC=Oe.isDataArrayTexture||Oe.isData3DTexture,yo=at.isDataArrayTexture||at.isData3DTexture;if(Oe.isRenderTargetTexture||Oe.isDepthTexture){const Vp=Qt.get(Oe),$C=Qt.get(at),zh=Qt.get(Vp.__renderTarget),e0=Qt.get($C.__renderTarget);Ct.bindFramebuffer(Ie.READ_FRAMEBUFFER,zh.__webglFramebuffer),Ct.bindFramebuffer(Ie.DRAW_FRAMEBUFFER,e0.__webglFramebuffer);for(let t0=0;t0<In;t0++)YC&&Ie.framebufferTextureLayer(Ie.READ_FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,Qt.get(Oe).__webglTexture,yt,$i+t0),Oe.isDepthTexture?(yo&&Ie.framebufferTextureLayer(Ie.DRAW_FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,Qt.get(at).__webglTexture,yt,Hs+t0),Ie.blitFramebuffer(pi,Ji,Tn,Dn,_i,Fr,Tn,Dn,Ie.DEPTH_BUFFER_BIT,Ie.NEAREST)):yo?Ie.copyTexSubImage3D(ii,yt,_i,Fr,Hs+t0,pi,Ji,Tn,Dn):Ie.copyTexSubImage2D(ii,yt,_i,Fr,Hs+t0,pi,Ji,Tn,Dn);Ct.bindFramebuffer(Ie.READ_FRAMEBUFFER,null),Ct.bindFramebuffer(Ie.DRAW_FRAMEBUFFER,null)}else yo?Oe.isDataTexture||Oe.isData3DTexture?Ie.texSubImage3D(ii,yt,_i,Fr,Hs,Tn,Dn,In,Wo,ms,ur.data):at.isCompressedArrayTexture?Ie.compressedTexSubImage3D(ii,yt,_i,Fr,Hs,Tn,Dn,In,Wo,ur.data):Ie.texSubImage3D(ii,yt,_i,Fr,Hs,Tn,Dn,In,Wo,ms,ur):Oe.isDataTexture?Ie.texSubImage2D(Ie.TEXTURE_2D,yt,_i,Fr,Tn,Dn,Wo,ms,ur.data):Oe.isCompressedTexture?Ie.compressedTexSubImage2D(Ie.TEXTURE_2D,yt,_i,Fr,ur.width,ur.height,Wo,ur.data):Ie.texSubImage2D(Ie.TEXTURE_2D,yt,_i,Fr,Tn,Dn,Wo,ms,ur);Ie.pixelStorei(Ie.UNPACK_ROW_LENGTH,Kd),Ie.pixelStorei(Ie.UNPACK_IMAGE_HEIGHT,Ms),Ie.pixelStorei(Ie.UNPACK_SKIP_PIXELS,ld),Ie.pixelStorei(Ie.UNPACK_SKIP_ROWS,cx),Ie.pixelStorei(Ie.UNPACK_SKIP_IMAGES,Zd),0===yt&&at.generateMipmaps&&Ie.generateMipmap(ii),Ct.unbindTexture()},this.copyTextureToTexture3D=function(Oe,at,Dt=null,Rt=null,yt=0){return!0!==Oe.isTexture&&(Gw("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Dt=arguments[0]||null,Rt=arguments[1]||null,Oe=arguments[2],at=arguments[3],yt=arguments[4]||0),Gw('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Oe,at,Dt,Rt,yt)},this.initRenderTarget=function(Oe){void 0===Qt.get(Oe).__webglFramebuffer&&Ae.setupRenderTarget(Oe)},this.initTexture=function(Oe){Oe.isCubeTexture?Ae.setTextureCube(Oe,0):Oe.isData3DTexture?Ae.setTexture3D(Oe,0):Oe.isDataArrayTexture||Oe.isCompressedArrayTexture?Ae.setTexture2DArray(Oe,0):Ae.setTexture2D(Oe,0),Ct.unbindTexture()},this.resetState=function(){D=0,R=0,N=null,Ct.reset(),sr.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return bf}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const n=this.getContext();n.drawingBufferColorspace=ps._getDrawingBufferColorSpace(t),n.unpackColorSpace=ps._getUnpackColorSpace()}}class EY extends Fd{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Pf,this.environmentIntensity=1,this.environmentRotation=new Pf,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,n){return super.copy(t,n),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const n=super.toJSON(t);return null!==this.fog&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}function _v(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}class NE{constructor(t,n,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],s=n[i-1];e:{t:{let o;n:{i:if(!(t<r)){for(let a=i+2;;){if(void 0===r){if(t<s)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=n[++i],t<r)break t}o=n.length;break n}if(t>=s)break e;{const a=n[1];t<a&&(i=2,s=a);for(let l=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=n[--i-1],t>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;t<n[a]?o=a:i=a+1}if(r=n[i],s=n[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)n[o]=i[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class mTe extends NE{constructor(t,n,i,r){super(t,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,n,i){const r=this.parameterPositions;let s=t-2,o=t+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=t,a=2*n-i;break;case 2402:s=r.length-2,a=n+r[s]-r[s+1];break;default:s=t,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=t,l=2*i-n;break;case 2402:o=1,l=i+r[1]-r[0];break;default:o=t-1,l=n}const c=.5*(i-n),d=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-i),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(t,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,d=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,p=this._weightNext,m=(i-n)/(r-n),v=m*m,g=v*m,b=-u*g+2*u*v-u*m,x=(1+u)*g+(-1.5-2*u)*v+(-.5+u)*m+1,w=(-1-p)*g+(1.5+p)*v+.5*m,P=p*g-p*v;for(let A=0;A!==a;++A)s[A]=b*o[d+A]+x*o[c+A]+w*o[l+A]+P*o[h+A];return s}}class f$ extends NE{constructor(t,n,i,r){super(t,n,i,r)}interpolate_(t,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,d=(i-n)/(r-n),h=1-d;for(let u=0;u!==a;++u)s[u]=o[c+u]*h+o[l+u]*d;return s}}class gTe extends NE{constructor(t,n,i,r){super(t,n,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class lp{constructor(t,n,i,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=_v(n,this.TimeBufferType),this.values=_v(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const n=t.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(t);else{i={name:t.name,times:_v(t.times,Array),values:_v(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(i.interpolation=r)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new gTe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new f$(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new mTe(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let n;switch(t){case 2300:n=this.InterpolantFactoryMethodDiscrete;break;case 2301:n=this.InterpolantFactoryMethodLinear;break;case 2302:n=this.InterpolantFactoryMethodSmooth}if(void 0===n){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=t}return this}scale(t){if(1!==t){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=t}return this}trim(t,n){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<t;)++s;for(;-1!==o&&i[o]>n;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let t=!0;const n=this.getValueSize();n-Math.floor(n)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),t=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),t=!1;break}o=l}if(void 0!==r&&function u$(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}return t}optimize(){const t=this.times.slice(),n=this.values.slice(),i=this.getValueSize(),r=2302===this.getInterpolation(),s=t.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=t[a];if(c!==t[a+1]&&(1!==a||c!==t[0]))if(r)l=!0;else{const h=a*i,u=h-i,p=h+i;for(let m=0;m!==i;++m){const v=n[h+m];if(v!==n[u+m]||v!==n[p+m]){l=!0;break}}}if(l){if(a!==o){t[o]=t[a];const h=a*i,u=o*i;for(let p=0;p!==i;++p)n[u+p]=n[h+p]}++o}}if(s>0){t[o]=t[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)n[l+c]=n[a+c];++o}return o!==t.length?(this.times=t.slice(0,o),this.values=n.slice(0,o*i)):(this.times=t,this.values=n),this}clone(){const t=this.times.slice(),n=this.values.slice(),r=new(0,this.constructor)(this.name,t,n);return r.createInterpolant=this.createInterpolant,r}}lp.prototype.TimeBufferType=Float32Array,lp.prototype.ValueBufferType=Float32Array,lp.prototype.DefaultInterpolation=2301;class m_ extends lp{constructor(t,n,i){super(t,n,i)}}m_.prototype.ValueTypeName="bool",m_.prototype.ValueBufferType=Array,m_.prototype.DefaultInterpolation=2300,m_.prototype.InterpolantFactoryMethodLinear=void 0,m_.prototype.InterpolantFactoryMethodSmooth=void 0;(class m$ extends lp{}).prototype.ValueTypeName="color";(class LE extends lp{}).prototype.ValueTypeName="number";class vTe extends NE{constructor(t,n,i,r){super(t,n,i,r)}interpolate_(t,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-n)/(r-n);let c=t*a;for(let d=c+a;c!==d;c+=4)Nd.slerpFlat(s,0,o,c-a,o,c,l);return s}}class FE extends lp{InterpolantFactoryMethodLinear(t){return new vTe(this.times,this.values,this.getValueSize(),t)}}FE.prototype.ValueTypeName="quaternion",FE.prototype.InterpolantFactoryMethodSmooth=void 0;class g_ extends lp{constructor(t,n,i){super(t,n,i)}}g_.prototype.ValueTypeName="string",g_.prototype.ValueBufferType=Array,g_.prototype.DefaultInterpolation=2300,g_.prototype.InterpolantFactoryMethodLinear=void 0,g_.prototype.InterpolantFactoryMethodSmooth=void 0;(class BE extends lp{}).prototype.ValueTypeName="vector";class bTe extends Error{constructor(t,n){super(t),this.response=n}}const N4="\\[\\]\\.:\\/",zTe=new RegExp("["+N4+"]","g"),L4="[^"+N4+"]",UTe="[^"+N4.replace("\\.","")+"]",WTe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",L4)+/(WCOD+)?/.source.replace("WCOD",UTe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",L4)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",L4)+"$"),qTe=["material","materials","bones","map"];class XTe{constructor(t,n,i){const r=i||go.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,r)}getValue(t,n){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,n)}setValue(t,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(t,n)}bind(){const t=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=t.length;n!==i;++n)t[n].bind()}unbind(){const t=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=t.length;n!==i;++n)t[n].unbind()}}let go=(()=>{class e{constructor(n,i,r){this.path=i,this.parsedPath=r||e.parseTrackName(i),this.node=e.findNode(n,this.parsedPath.nodeName),this.rootNode=n,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(n,i,r){return n&&n.isAnimationObjectGroup?new e.Composite(n,i,r):new e(n,i,r)}static sanitizeNodeName(n){return n.replace(/\s/g,"_").replace(zTe,"")}static parseTrackName(n){const i=WTe.exec(n);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+n);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==qTe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+n);return r}static findNode(n,i){if(void 0===i||""===i||"."===i||-1===i||i===n.name||i===n.uuid)return n;if(n.skeleton){const r=n.skeleton.getBoneByName(i);if(void 0!==r)return r}if(n.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=r(l.children);if(c)return c}return null},s=r(n.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(n,i){n[i]=this.targetObject[this.propertyName]}_getValue_array(n,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)n[i++]=r[s]}_getValue_arrayElement(n,i){n[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(n,i){this.resolvedProperty.toArray(n,i)}_setValue_direct(n,i){this.targetObject[this.propertyName]=n[i]}_setValue_direct_setNeedsUpdate(n,i){this.targetObject[this.propertyName]=n[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(n,i){this.targetObject[this.propertyName]=n[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(n,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=n[i++]}_setValue_array_setNeedsUpdate(n,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=n[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(n,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=n[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(n,i){this.resolvedProperty[this.propertyIndex]=n[i]}_setValue_arrayElement_setNeedsUpdate(n,i){this.resolvedProperty[this.propertyIndex]=n[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(n,i){this.resolvedProperty[this.propertyIndex]=n[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(n,i){this.resolvedProperty.fromArray(n,i)}_setValue_fromArray_setNeedsUpdate(n,i){this.resolvedProperty.fromArray(n,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(n,i){this.resolvedProperty.fromArray(n,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(n,i){this.bind(),this.getValue(n,i)}_setValue_unbound(n,i){this.bind(),this.setValue(n,i)}bind(){let n=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(n||(n=e.findNode(this.rootNode,i.nodeName),this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!n)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let d=i.objectIndex;switch(r){case"materials":if(!n.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!n.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);n=n.material.materials;break;case"bones":if(!n.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);n=n.skeleton.bones;for(let h=0;h<n.length;h++)if(n[h].name===d){d=h;break}break;case"map":if("map"in n){n=n.map;break}if(!n.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!n.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);n=n.material.map;break;default:if(void 0===n[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);n=n[r]}if(void 0!==d){if(void 0===n[d])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);n=n[d]}}const a=n[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",n);let l=this.Versioning.None;this.targetObject=n,void 0!==n.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==n.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!n.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!n.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==n.morphTargetDictionary[o]&&(o=n.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return e.Composite=XTe,e})();go.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},go.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},go.prototype.GetterByBindingType=[go.prototype._getValue_direct,go.prototype._getValue_array,go.prototype._getValue_arrayElement,go.prototype._getValue_toArray],go.prototype.SetterByBindingTypeAndVersioning=[[go.prototype._setValue_direct,go.prototype._setValue_direct_setNeedsUpdate,go.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[go.prototype._setValue_array,go.prototype._setValue_array_setNeedsUpdate,go.prototype._setValue_array_setMatrixWorldNeedsUpdate],[go.prototype._setValue_arrayElement,go.prototype._setValue_arrayElement_setNeedsUpdate,go.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[go.prototype._setValue_fromArray,go.prototype._setValue_fromArray_setNeedsUpdate,go.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"170"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="170");var QTe=Object.create,YE=Object.defineProperty,JTe=Object.getOwnPropertyDescriptor,eDe=Object.getOwnPropertyNames,tDe=Object.getPrototypeOf,nDe=Object.prototype.hasOwnProperty,Vl=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),al=(e,t,n)=>(n=null!=e?QTe(tDe(e)):{},((e,t,n,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of eDe(t))!nDe.call(e,r)&&undefined!==r&&YE(e,r,{get:()=>t[r],enumerable:!(i=JTe(t,r))||i.enumerable});return e})(!t&&e&&e.__esModule?n:YE(n,"default",{value:e,enumerable:!0}),e)),mc=(e,t,n)=>(((e,t,n)=>{t in e?YE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),oDe=Vl((e,t)=>{var n,i;n=e,i=function(){return n.importState=function(r){var s=new n;return s.importState(r),s},n;function n(){return function(r){var s=0,o=0,a=0,l=1;0==r.length&&(r=[+new Date]);var c=function i(){var r=4022871197,s=function(o){o=o.toString();for(var a=0;a<o.length;a++){var l=.02519603282416938*(r+=o.charCodeAt(a));l-=r=l>>>0,r=(l*=r)>>>0,r+=4294967296*(l-=r)}return 2.3283064365386963e-10*(r>>>0)};return s.version="Mash 0.9",s}();s=c(" "),o=c(" "),a=c(" ");for(var d=0;d<r.length;d++)(s-=c(r[d]))<0&&(s+=1),(o-=c(r[d]))<0&&(o+=1),(a-=c(r[d]))<0&&(a+=1);c=null;var h=function(){var u=2091639*s+2.3283064365386963e-10*l;return s=o,o=a,a=u-(l=0|u)};return h.next=h,h.uint32=function(){return 4294967296*h()},h.fract53=function(){return h()+11102230246251565e-32*(2097152*h()|0)},h.version="Alea 0.9",h.args=r,h.exportState=function(){return[s,o,a,l]},h.importState=function(u){s=+u[0]||0,o=+u[1]||0,a=+u[2]||0,l=+u[3]||0},h}(Array.prototype.slice.call(arguments))}},"object"==typeof e?t.exports=i():"function"==typeof define&&define.amd?define(i):n.Alea=i()}),j$=Vl((e,t)=>{var n,i;n=e,i=function(n){n.SVD=function(i,r,s,o,a){if(r=void 0===r||r,s=void 0===s||s,a=1e-64/(o=o||Math.pow(2,-52)),!i)throw new TypeError("Matrix a is not defined");var l,c,d,h,u,p,m,v,g,b,x,w,P=i[0].length,A=i.length;if(A<P)throw new TypeError("Invalid matrix: m < n");for(var D=[],R=[],N=[],k="f"===r?A:P,L=b=m=0;L<A;L++)R[L]=new Array(k).fill(0);for(L=0;L<P;L++)N[L]=new Array(P).fill(0);var Q,le=new Array(P).fill(0);for(L=0;L<A;L++)for(l=0;l<P;l++)R[L][l]=i[L][l];for(L=0;L<P;L++){for(D[L]=m,g=0,d=L+1,l=L;l<A;l++)g+=Math.pow(R[l][L],2);if(g<a)m=0;else for(v=(p=R[L][L])*(m=p<0?Math.sqrt(g):-Math.sqrt(g))-g,R[L][L]=p-m,l=d;l<P;l++){for(g=0,c=L;c<A;c++)g+=R[c][L]*R[c][l];for(p=g/v,c=L;c<A;c++)R[c][l]=R[c][l]+p*R[c][L]}for(le[L]=m,g=0,l=d;l<P;l++)g+=Math.pow(R[L][l],2);if(g<a)m=0;else{for(v=(p=R[L][L+1])*(m=p<0?Math.sqrt(g):-Math.sqrt(g))-g,R[L][L+1]=p-m,l=d;l<P;l++)D[l]=R[L][l]/v;for(l=d;l<A;l++){for(g=0,c=d;c<P;c++)g+=R[l][c]*R[L][c];for(c=d;c<P;c++)R[l][c]=R[l][c]+g*D[c]}}b<(x=Math.abs(le[L])+Math.abs(D[L]))&&(b=x)}if(s)for(L=P-1;0<=L;L--){if(0!==m){for(v=R[L][L+1]*m,l=d;l<P;l++)N[l][L]=R[L][l]/v;for(l=d;l<P;l++){for(g=0,c=d;c<P;c++)g+=R[L][c]*N[c][l];for(c=d;c<P;c++)N[c][l]=N[c][l]+g*N[c][L]}}for(l=d;l<P;l++)N[L][l]=0,N[l][L]=0;N[L][L]=1,m=D[L],d=L}if(r){if("f"===r)for(L=P;L<A;L++){for(l=P;l<A;l++)R[L][l]=0;R[L][L]=1}for(L=P-1;0<=L;L--){for(m=le[L],l=d=L+1;l<k;l++)R[L][l]=0;if(0!==m){for(v=R[L][L]*m,l=d;l<k;l++){for(g=0,c=d;c<A;c++)g+=R[c][L]*R[c][l];for(p=g/v,c=L;c<A;c++)R[c][l]=R[c][l]+p*R[c][L]}for(l=L;l<A;l++)R[l][L]=R[l][L]/m}else for(l=L;l<A;l++)R[l][L]=0;R[L][L]=R[L][L]+1}}for(o*=b,c=P-1;0<=c;c--)for(var ae=0;ae<50;ae++){for(Q=!1,d=c;0<=d;d--){if(Math.abs(D[d])<=o){Q=!0;break}if(Math.abs(le[d-1])<=o)break}if(!Q)for(u=0,h=d-(g=1),L=d;L<c+1&&(p=g*D[L],D[L]=u*D[L],!(Math.abs(p)<=o));L++)if(m=le[L],le[L]=Math.sqrt(p*p+m*m),u=m/(v=le[L]),g=-p/v,r)for(l=0;l<A;l++)R[l][h]=(x=R[l][h])*u+(w=R[l][L])*g,R[l][L]=-x*g+w*u;if(w=le[c],d===c){if(w<0&&(le[c]=-w,s))for(l=0;l<P;l++)N[l][c]=-N[l][c];break}for(b=le[d],p=(((x=le[c-1])-w)*(x+w)+((m=D[c-1])-(v=D[c]))*(m+v))/(2*v*x),m=Math.sqrt(p*p+1),p=((b-w)*(b+w)+v*(x/(p<0?p-m:p+m)-v))/b,L=d+(g=u=1);L<c+1;L++){if(x=le[L],v=g*(m=D[L]),m*=u,w=Math.sqrt(p*p+v*v),p=b*(u=p/(D[L-1]=w))+m*(g=v/w),m=-b*g+m*u,v=x*g,x*=u,s)for(l=0;l<P;l++)N[l][L-1]=(b=N[l][L-1])*u+(w=N[l][L])*g,N[l][L]=-b*g+w*u;if(w=Math.sqrt(p*p+v*v),p=(u=p/(le[L-1]=w))*m+(g=v/w)*x,b=-g*m+u*x,r)for(l=0;l<A;l++)R[l][L-1]=(x=R[l][L-1])*u+(w=R[l][L])*g,R[l][L]=-x*g+w*u}D[d]=0,D[c]=p,le[c]=b}for(L=0;L<P;L++)le[L]<o&&(le[L]=0);return{u:R,q:le,v:N}},n.VERSION="1.1.1",Object.defineProperty(n,"__esModule",{value:!0})},"object"==typeof e&&typeof t<"u"?i(e):"function"==typeof define&&define.amd?define(["exports"],i):i((n=typeof globalThis<"u"?globalThis:n||self).SVDJS={})}),aDe=Vl((e,t)=>{var n,i;n=e,i=function(){var n=function(r,s){if(void 0===r&&(r=[]),void 0===s&&(s=i),this.data=r,this.length=this.data.length,this.compare=s,this.length>0)for(var o=(this.length>>1)-1;o>=0;o--)this._down(o)};function i(r,s){return r<s?-1:r>s?1:0}return n.prototype.push=function(r){this.data.push(r),this.length++,this._up(this.length-1)},n.prototype.pop=function(){if(0!==this.length){var r=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),r}},n.prototype.peek=function(){return this.data[0]},n.prototype._up=function(r){for(var o=this.data,a=this.compare,l=o[r];r>0;){var c=r-1>>1,d=o[c];if(a(l,d)>=0)break;o[r]=d,r=c}o[r]=l},n.prototype._down=function(r){for(var o=this.data,a=this.compare,l=this.length>>1,c=o[r];r<l;){var d=1+(r<<1),h=o[d],u=d+1;if(u<this.length&&a(o[u],h)<0&&(d=u,h=o[u]),a(h,c)>=0)break;o[r]=h,r=d}o[r]=c},n},"object"==typeof e&&typeof t<"u"?t.exports=i():"function"==typeof define&&define.amd?define(i):(n=n||self).TinyQueue=i()}),lDe=Vl((e,t)=>{var n=aDe();function i(c,d,h){d=d||1;for(var u,p,m,v,g=0;g<c[0].length;g++){var b=c[0][g];(!g||b[0]<u)&&(u=b[0]),(!g||b[1]<p)&&(p=b[1]),(!g||b[0]>m)&&(m=b[0]),(!g||b[1]>v)&&(v=b[1])}var x=m-u,w=v-p,P=Math.min(x,w),A=P/2;if(0===P){var D=[u,p];return D.distance=0,D}for(var R=new n(void 0,r),N=u;N<m;N+=P)for(var k=p;k<v;k+=P)R.push(new s(N+A,k+A,A,c));var L=function a(c){for(var d=0,h=0,u=0,p=c[0],m=0,v=p.length,g=v-1;m<v;g=m++){var b=p[m],x=p[g],w=b[0]*x[1]-x[0]*b[1];h+=(b[0]+x[0])*w,u+=(b[1]+x[1])*w,d+=3*w}return 0===d?new s(p[0][0],p[0][1],0,c):new s(h/d,u/d,0,c)}(c),Q=new s(u+x/2,p+w/2,0,c);Q.d>L.d&&(L=Q);for(var le=R.length;R.length;){var ae=R.pop();ae.d>L.d&&(L=ae,h&&console.log("found best %d after %d probes",Math.round(1e4*ae.d)/1e4,le)),!(ae.max-L.d<=d)&&(R.push(new s(ae.x-(A=ae.h/2),ae.y-A,A,c)),R.push(new s(ae.x+A,ae.y-A,A,c)),R.push(new s(ae.x-A,ae.y+A,A,c)),R.push(new s(ae.x+A,ae.y+A,A,c)),le+=4)}h&&(console.log("num probes: "+le),console.log("best distance: "+L.d));var he=[L.x,L.y];return he.distance=L.d,he}function r(c,d){return d.max-c.max}function s(c,d,h,u){this.x=c,this.y=d,this.h=h,this.d=function o(c,d,h){for(var u=!1,p=1/0,m=0;m<h.length;m++)for(var v=h[m],g=0,b=v.length,x=b-1;g<b;x=g++){var w=v[g],P=v[x];w[1]>d!=P[1]>d&&c<(P[0]-w[0])*(d-w[1])/(P[1]-w[1])+w[0]&&(u=!u),p=Math.min(p,l(c,d,w,P))}return 0===p?0:(u?1:-1)*Math.sqrt(p)}(c,d,u),this.max=this.d+this.h*Math.SQRT2}function l(c,d,h,u){var p=h[0],m=h[1],v=u[0]-p,g=u[1]-m;if(0!==v||0!==g){var b=((c-p)*v+(d-m)*g)/(v*v+g*g);b>1?(p=u[0],m=u[1]):b>0&&(p+=v*b,m+=g*b)}return(v=c-p)*v+(g=d-m)*g}n.default&&(n=n.default),t.exports=i,t.exports.default=i}),cDe=Vl((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function n(i){if(null===i||!0===i||!1===i)return NaN;var r=Number(i);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)},t.exports=e.default}),dDe=Vl((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function n(i){var r=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return r.setUTCFullYear(i.getFullYear()),i.getTime()-r.getTime()},t.exports=e.default}),hDe=Vl(e=>{(function(){var t=function(){this.init()};t.prototype={init:function(){var h=this||n;return h._counter=1e3,h._html5AudioPool=[],h.html5PoolSize=10,h._codecs={},h._howls=[],h._muted=!1,h._volume=1,h._canPlayEvent="canplaythrough",h._navigator=typeof window<"u"&&window.navigator?window.navigator:null,h.masterGain=null,h.noAudio=!1,h.usingWebAudio=!0,h.autoSuspend=!0,h.ctx=null,h.autoUnlock=!0,h._setup(),h},volume:function(h){var u=this||n;if(h=parseFloat(h),u.ctx||d(),typeof h<"u"&&h>=0&&h<=1){if(u._volume=h,u._muted)return u;u.usingWebAudio&&u.masterGain.gain.setValueAtTime(h,n.ctx.currentTime);for(var p=0;p<u._howls.length;p++)if(!u._howls[p]._webAudio)for(var m=u._howls[p]._getSoundIds(),v=0;v<m.length;v++){var g=u._howls[p]._soundById(m[v]);g&&g._node&&(g._node.volume=g._volume*h)}return u}return u._volume},mute:function(h){var u=this||n;u.ctx||d(),u._muted=h,u.usingWebAudio&&u.masterGain.gain.setValueAtTime(h?0:u._volume,n.ctx.currentTime);for(var p=0;p<u._howls.length;p++)if(!u._howls[p]._webAudio)for(var m=u._howls[p]._getSoundIds(),v=0;v<m.length;v++){var g=u._howls[p]._soundById(m[v]);g&&g._node&&(g._node.muted=!!h||g._muted)}return u},stop:function(){for(var h=this||n,u=0;u<h._howls.length;u++)h._howls[u].stop();return h},unload:function(){for(var h=this||n,u=h._howls.length-1;u>=0;u--)h._howls[u].unload();return h.usingWebAudio&&h.ctx&&typeof h.ctx.close<"u"&&(h.ctx.close(),h.ctx=null,d()),h},codecs:function(h){return(this||n)._codecs[h.replace(/^x-/,"")]},_setup:function(){var h=this||n;if(h.state=h.ctx&&h.ctx.state||"suspended",h._autoSuspend(),!h.usingWebAudio)if(typeof Audio<"u")try{typeof(new Audio).oncanplaythrough>"u"&&(h._canPlayEvent="canplay")}catch{h.noAudio=!0}else h.noAudio=!0;try{(new Audio).muted&&(h.noAudio=!0)}catch{}return h.noAudio||h._setupCodecs(),h},_setupCodecs:function(){var h=this||n,u=null;try{u=typeof Audio<"u"?new Audio:null}catch{return h}if(!u||"function"!=typeof u.canPlayType)return h;var p=u.canPlayType("audio/mpeg;").replace(/^no$/,""),m=h._navigator?h._navigator.userAgent:"",v=m.match(/OPR\/([0-6].)/g),g=v&&parseInt(v[0].split("/")[1],10)<33,b=-1!==m.indexOf("Safari")&&-1===m.indexOf("Chrome"),x=m.match(/Version\/(.*?) /),w=b&&x&&parseInt(x[1],10)<15;return h._codecs={mp3:!(g||!p&&!u.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!p,opus:!!u.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(u.canPlayType('audio/wav; codecs="1"')||u.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!u.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!u.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(u.canPlayType("audio/x-m4a;")||u.canPlayType("audio/m4a;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(u.canPlayType("audio/x-m4b;")||u.canPlayType("audio/m4b;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(u.canPlayType("audio/x-mp4;")||u.canPlayType("audio/mp4;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(w||!u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(w||!u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!u.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(u.canPlayType("audio/x-flac;")||u.canPlayType("audio/flac;")).replace(/^no$/,"")},h},_unlockAudio:function(){var h=this||n;if(!h._audioUnlocked&&h.ctx){h._audioUnlocked=!1,h.autoUnlock=!1,!h._mobileUnloaded&&44100!==h.ctx.sampleRate&&(h._mobileUnloaded=!0,h.unload()),h._scratchBuffer=h.ctx.createBuffer(1,1,22050);var u=function(p){for(;h._html5AudioPool.length<h.html5PoolSize;)try{var m=new Audio;m._unlocked=!0,h._releaseHtml5Audio(m)}catch{h.noAudio=!0;break}for(var v=0;v<h._howls.length;v++)if(!h._howls[v]._webAudio)for(var g=h._howls[v]._getSoundIds(),b=0;b<g.length;b++){var x=h._howls[v]._soundById(g[b]);x&&x._node&&!x._node._unlocked&&(x._node._unlocked=!0,x._node.load())}h._autoResume();var w=h.ctx.createBufferSource();w.buffer=h._scratchBuffer,w.connect(h.ctx.destination),typeof w.start>"u"?w.noteOn(0):w.start(0),"function"==typeof h.ctx.resume&&h.ctx.resume(),w.onended=function(){w.disconnect(0),h._audioUnlocked=!0,document.removeEventListener("touchstart",u,!0),document.removeEventListener("touchend",u,!0),document.removeEventListener("click",u,!0),document.removeEventListener("keydown",u,!0);for(var P=0;P<h._howls.length;P++)h._howls[P]._emit("unlock")}};return document.addEventListener("touchstart",u,!0),document.addEventListener("touchend",u,!0),document.addEventListener("click",u,!0),document.addEventListener("keydown",u,!0),h}},_obtainHtml5Audio:function(){var h=this||n;if(h._html5AudioPool.length)return h._html5AudioPool.pop();var u=(new Audio).play();return u&&typeof Promise<"u"&&(u instanceof Promise||"function"==typeof u.then)&&u.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(h){var u=this||n;return h._unlocked&&u._html5AudioPool.push(h),u},_autoSuspend:function(){var h=this;if(h.autoSuspend&&h.ctx&&!(typeof h.ctx.suspend>"u")&&n.usingWebAudio){for(var u=0;u<h._howls.length;u++)if(h._howls[u]._webAudio)for(var p=0;p<h._howls[u]._sounds.length;p++)if(!h._howls[u]._sounds[p]._paused)return h;return h._suspendTimer&&clearTimeout(h._suspendTimer),h._suspendTimer=setTimeout(function(){if(h.autoSuspend){h._suspendTimer=null,h.state="suspending";var m=function(){h.state="suspended",h._resumeAfterSuspend&&(delete h._resumeAfterSuspend,h._autoResume())};h.ctx.suspend().then(m,m)}},3e4),h}},_autoResume:function(){var h=this;if(h.ctx&&!(typeof h.ctx.resume>"u")&&n.usingWebAudio)return"running"===h.state&&"interrupted"!==h.ctx.state&&h._suspendTimer?(clearTimeout(h._suspendTimer),h._suspendTimer=null):"suspended"===h.state||"running"===h.state&&"interrupted"===h.ctx.state?(h.ctx.resume().then(function(){h.state="running";for(var u=0;u<h._howls.length;u++)h._howls[u]._emit("resume")}),h._suspendTimer&&(clearTimeout(h._suspendTimer),h._suspendTimer=null)):"suspending"===h.state&&(h._resumeAfterSuspend=!0),h}};var n=new t,i=function(h){h.src&&0!==h.src.length?this.init(h):console.error("An array of source files must be passed with any new Howl.")};i.prototype={init:function(h){var u=this;return n.ctx||d(),u._autoplay=h.autoplay||!1,u._format="string"!=typeof h.format?h.format:[h.format],u._html5=h.html5||!1,u._muted=h.mute||!1,u._loop=h.loop||!1,u._pool=h.pool||5,u._preload="boolean"!=typeof h.preload&&"metadata"!==h.preload||h.preload,u._rate=h.rate||1,u._sprite=h.sprite||{},u._src="string"!=typeof h.src?h.src:[h.src],u._volume=void 0!==h.volume?h.volume:1,u._xhr={method:h.xhr&&h.xhr.method?h.xhr.method:"GET",headers:h.xhr&&h.xhr.headers?h.xhr.headers:null,withCredentials:!(!h.xhr||!h.xhr.withCredentials)&&h.xhr.withCredentials},u._duration=0,u._state="unloaded",u._sounds=[],u._endTimers={},u._queue=[],u._playLock=!1,u._onend=h.onend?[{fn:h.onend}]:[],u._onfade=h.onfade?[{fn:h.onfade}]:[],u._onload=h.onload?[{fn:h.onload}]:[],u._onloaderror=h.onloaderror?[{fn:h.onloaderror}]:[],u._onplayerror=h.onplayerror?[{fn:h.onplayerror}]:[],u._onpause=h.onpause?[{fn:h.onpause}]:[],u._onplay=h.onplay?[{fn:h.onplay}]:[],u._onstop=h.onstop?[{fn:h.onstop}]:[],u._onmute=h.onmute?[{fn:h.onmute}]:[],u._onvolume=h.onvolume?[{fn:h.onvolume}]:[],u._onrate=h.onrate?[{fn:h.onrate}]:[],u._onseek=h.onseek?[{fn:h.onseek}]:[],u._onunlock=h.onunlock?[{fn:h.onunlock}]:[],u._onresume=[],u._webAudio=n.usingWebAudio&&!u._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(u),u._autoplay&&u._queue.push({event:"play",action:function(){u.play()}}),u._preload&&"none"!==u._preload&&u.load(),u},load:function(){var h=this,u=null;if(n.noAudio)h._emit("loaderror",null,"No audio support.");else{"string"==typeof h._src&&(h._src=[h._src]);for(var p=0;p<h._src.length;p++){var m,v;if(h._format&&h._format[p])m=h._format[p];else{if("string"!=typeof(v=h._src[p])){h._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(m=/^data:audio\/([^;,]+);/i.exec(v))||(m=/\.([^.]+)$/.exec(v.split("?",1)[0])),m&&(m=m[1].toLowerCase())}if(m||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),m&&n.codecs(m)){u=h._src[p];break}}if(u)return h._src=u,h._state="loading","https:"===window.location.protocol&&"http:"===u.slice(0,5)&&(h._html5=!0,h._webAudio=!1),new r(h),h._webAudio&&o(h),h;h._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(h,u){var p=this,m=null;if("number"==typeof h)m=h,h=null;else{if("string"==typeof h&&"loaded"===p._state&&!p._sprite[h])return null;if(typeof h>"u"&&(h="__default",!p._playLock)){for(var v=0,g=0;g<p._sounds.length;g++)p._sounds[g]._paused&&!p._sounds[g]._ended&&(v++,m=p._sounds[g]._id);1===v?h=null:m=null}}var b=m?p._soundById(m):p._inactiveSound();if(!b)return null;if(m&&!h&&(h=b._sprite||"__default"),"loaded"!==p._state){b._sprite=h,b._ended=!1;var x=b._id;return p._queue.push({event:"play",action:function(){p.play(x)}}),x}if(m&&!b._paused)return u||p._loadQueue("play"),b._id;p._webAudio&&n._autoResume();var w=Math.max(0,b._seek>0?b._seek:p._sprite[h][0]/1e3),P=Math.max(0,(p._sprite[h][0]+p._sprite[h][1])/1e3-w),A=1e3*P/Math.abs(b._rate),D=p._sprite[h][0]/1e3,R=(p._sprite[h][0]+p._sprite[h][1])/1e3;b._sprite=h,b._ended=!1;var N=function(){b._paused=!1,b._seek=w,b._start=D,b._stop=R,b._loop=!(!b._loop&&!p._sprite[h][2])};if(!(w>=R)){var k=b._node;if(p._webAudio){var L=function(){p._playLock=!1,N(),p._refreshBuffer(b),k.gain.setValueAtTime(b._muted||p._muted?0:b._volume,n.ctx.currentTime),b._playStart=n.ctx.currentTime,typeof k.bufferSource.start>"u"?k.bufferSource.noteGrainOn(0,w,b._loop?86400:P):k.bufferSource.start(0,w,b._loop?86400:P),A!==1/0&&(p._endTimers[b._id]=setTimeout(p._ended.bind(p,b),A)),u||setTimeout(function(){p._emit("play",b._id),p._loadQueue()},0)};"running"===n.state&&"interrupted"!==n.ctx.state?L():(p._playLock=!0,p.once("resume",L),p._clearTimer(b._id))}else{var Q=function(){k.currentTime=w,k.muted=b._muted||p._muted||n._muted||k.muted,k.volume=b._volume*n.volume(),k.playbackRate=b._rate;try{var he=k.play();if(he&&typeof Promise<"u"&&(he instanceof Promise||"function"==typeof he.then)?(p._playLock=!0,N(),he.then(function(){p._playLock=!1,k._unlocked=!0,u?p._loadQueue():p._emit("play",b._id)}).catch(function(){p._playLock=!1,p._emit("playerror",b._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),b._ended=!0,b._paused=!0})):u||(p._playLock=!1,N(),p._emit("play",b._id)),k.playbackRate=b._rate,k.paused)return void p._emit("playerror",b._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==h||b._loop?p._endTimers[b._id]=setTimeout(p._ended.bind(p,b),A):(p._endTimers[b._id]=function(){p._ended(b),k.removeEventListener("ended",p._endTimers[b._id],!1)},k.addEventListener("ended",p._endTimers[b._id],!1))}catch(xe){p._emit("playerror",b._id,xe)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===k.src&&(k.src=p._src,k.load());var le=window&&window.ejecta||!k.readyState&&n._navigator.isCocoonJS;if(k.readyState>=3||le)Q();else{p._playLock=!0,p._state="loading";var ae=function(){p._state="loaded",Q(),k.removeEventListener(n._canPlayEvent,ae,!1)};k.addEventListener(n._canPlayEvent,ae,!1),p._clearTimer(b._id)}}return b._id}p._ended(b)},pause:function(h){var u=this;if("loaded"!==u._state||u._playLock)return u._queue.push({event:"pause",action:function(){u.pause(h)}}),u;for(var p=u._getSoundIds(h),m=0;m<p.length;m++){u._clearTimer(p[m]);var v=u._soundById(p[m]);if(v&&!v._paused&&(v._seek=u.seek(p[m]),v._rateSeek=0,v._paused=!0,u._stopFade(p[m]),v._node))if(u._webAudio){if(!v._node.bufferSource)continue;typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),u._cleanBuffer(v._node)}else(!isNaN(v._node.duration)||v._node.duration===1/0)&&v._node.pause();arguments[1]||u._emit("pause",v?v._id:null)}return u},stop:function(h,u){var p=this;if("loaded"!==p._state||p._playLock)return p._queue.push({event:"stop",action:function(){p.stop(h)}}),p;for(var m=p._getSoundIds(h),v=0;v<m.length;v++){p._clearTimer(m[v]);var g=p._soundById(m[v]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,p._stopFade(m[v]),g._node&&(p._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),p._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&p._clearSound(g._node))),u||p._emit("stop",g._id))}return p},mute:function(h,u){var p=this;if("loaded"!==p._state||p._playLock)return p._queue.push({event:"mute",action:function(){p.mute(h,u)}}),p;if(typeof u>"u"){if("boolean"!=typeof h)return p._muted;p._muted=h}for(var m=p._getSoundIds(u),v=0;v<m.length;v++){var g=p._soundById(m[v]);g&&(g._muted=h,g._interval&&p._stopFade(g._id),p._webAudio&&g._node?g._node.gain.setValueAtTime(h?0:g._volume,n.ctx.currentTime):g._node&&(g._node.muted=!!n._muted||h),p._emit("mute",g._id))}return p},volume:function(){var p,m,b,h=this,u=arguments;if(0===u.length)return h._volume;if(1===u.length||2===u.length&&typeof u[1]>"u"?h._getSoundIds().indexOf(u[0])>=0?m=parseInt(u[0],10):p=parseFloat(u[0]):u.length>=2&&(p=parseFloat(u[0]),m=parseInt(u[1],10)),!(typeof p<"u"&&p>=0&&p<=1))return(b=m?h._soundById(m):h._sounds[0])?b._volume:0;if("loaded"!==h._state||h._playLock)return h._queue.push({event:"volume",action:function(){h.volume.apply(h,u)}}),h;typeof m>"u"&&(h._volume=p),m=h._getSoundIds(m);for(var x=0;x<m.length;x++)(b=h._soundById(m[x]))&&(b._volume=p,u[2]||h._stopFade(m[x]),h._webAudio&&b._node&&!b._muted?b._node.gain.setValueAtTime(p,n.ctx.currentTime):b._node&&!b._muted&&(b._node.volume=p*n.volume()),h._emit("volume",b._id));return h},fade:function(h,u,p,m){var v=this;if("loaded"!==v._state||v._playLock)return v._queue.push({event:"fade",action:function(){v.fade(h,u,p,m)}}),v;h=Math.min(Math.max(0,parseFloat(h)),1),u=Math.min(Math.max(0,parseFloat(u)),1),p=parseFloat(p),v.volume(h,m);for(var g=v._getSoundIds(m),b=0;b<g.length;b++){var x=v._soundById(g[b]);if(x){if(m||v._stopFade(g[b]),v._webAudio&&!x._muted){var w=n.ctx.currentTime,P=w+p/1e3;x._volume=h,x._node.gain.setValueAtTime(h,w),x._node.gain.linearRampToValueAtTime(u,P)}v._startFadeInterval(x,h,u,p,g[b],typeof m>"u")}}return v},_startFadeInterval:function(h,u,p,m,v,g){var b=this,x=u,w=p-u,P=Math.abs(w/.01),A=Math.max(4,P>0?m/P:m),D=Date.now();h._fadeTo=p,h._interval=setInterval(function(){var R=(Date.now()-D)/m;D=Date.now(),x+=w*R,x=Math.round(100*x)/100,x=w<0?Math.max(p,x):Math.min(p,x),b._webAudio?h._volume=x:b.volume(x,h._id,!0),g&&(b._volume=x),(p<u&&x<=p||p>u&&x>=p)&&(clearInterval(h._interval),h._interval=null,h._fadeTo=null,b.volume(p,h._id),b._emit("fade",h._id))},A)},_stopFade:function(h){var u=this,p=u._soundById(h);return p&&p._interval&&(u._webAudio&&p._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(p._interval),p._interval=null,u.volume(p._fadeTo,h),p._fadeTo=null,u._emit("fade",h)),u},loop:function(){var p,m,v,h=this,u=arguments;if(0===u.length)return h._loop;if(1===u.length){if("boolean"!=typeof u[0])return!!(v=h._soundById(parseInt(u[0],10)))&&v._loop;h._loop=p=u[0]}else 2===u.length&&(p=u[0],m=parseInt(u[1],10));for(var g=h._getSoundIds(m),b=0;b<g.length;b++)(v=h._soundById(g[b]))&&(v._loop=p,h._webAudio&&v._node&&v._node.bufferSource&&(v._node.bufferSource.loop=p,p&&(v._node.bufferSource.loopStart=v._start||0,v._node.bufferSource.loopEnd=v._stop,h.playing(g[b])&&(h.pause(g[b],!0),h.play(g[b],!0)))));return h},rate:function(){var p,m,b,h=this,u=arguments;if(0===u.length?m=h._sounds[0]._id:1===u.length?h._getSoundIds().indexOf(u[0])>=0?m=parseInt(u[0],10):p=parseFloat(u[0]):2===u.length&&(p=parseFloat(u[0]),m=parseInt(u[1],10)),"number"!=typeof p)return(b=h._soundById(m))?b._rate:h._rate;if("loaded"!==h._state||h._playLock)return h._queue.push({event:"rate",action:function(){h.rate.apply(h,u)}}),h;typeof m>"u"&&(h._rate=p),m=h._getSoundIds(m);for(var x=0;x<m.length;x++)if(b=h._soundById(m[x])){h.playing(m[x])&&(b._rateSeek=h.seek(m[x]),b._playStart=h._webAudio?n.ctx.currentTime:b._playStart),b._rate=p,h._webAudio&&b._node&&b._node.bufferSource?b._node.bufferSource.playbackRate.setValueAtTime(p,n.ctx.currentTime):b._node&&(b._node.playbackRate=p);var w=h.seek(m[x]),A=1e3*((h._sprite[b._sprite][0]+h._sprite[b._sprite][1])/1e3-w)/Math.abs(b._rate);(h._endTimers[m[x]]||!b._paused)&&(h._clearTimer(m[x]),h._endTimers[m[x]]=setTimeout(h._ended.bind(h,b),A)),h._emit("rate",b._id)}return h},seek:function(){var p,m,h=this,u=arguments;if(0===u.length?h._sounds.length&&(m=h._sounds[0]._id):1===u.length?h._getSoundIds().indexOf(u[0])>=0?m=parseInt(u[0],10):h._sounds.length&&(m=h._sounds[0]._id,p=parseFloat(u[0])):2===u.length&&(p=parseFloat(u[0]),m=parseInt(u[1],10)),typeof m>"u")return 0;if("number"==typeof p&&("loaded"!==h._state||h._playLock))return h._queue.push({event:"seek",action:function(){h.seek.apply(h,u)}}),h;var b=h._soundById(m);if(b){if(!("number"==typeof p&&p>=0)){if(h._webAudio){var A=h.playing(m)?n.ctx.currentTime-b._playStart:0;return b._seek+((b._rateSeek?b._rateSeek-b._seek:0)+A*Math.abs(b._rate))}return b._node.currentTime}var x=h.playing(m);x&&h.pause(m,!0),b._seek=p,b._ended=!1,h._clearTimer(m),!h._webAudio&&b._node&&!isNaN(b._node.duration)&&(b._node.currentTime=p);var w=function(){x&&h.play(m,!0),h._emit("seek",m)};if(x&&!h._webAudio){var P=function(){h._playLock?setTimeout(P,0):w()};setTimeout(P,0)}else w()}return h},playing:function(h){var u=this;if("number"==typeof h){var p=u._soundById(h);return!!p&&!p._paused}for(var m=0;m<u._sounds.length;m++)if(!u._sounds[m]._paused)return!0;return!1},duration:function(h){var u=this,p=u._duration,m=u._soundById(h);return m&&(p=u._sprite[m._sprite][1]/1e3),p},state:function(){return this._state},unload:function(){for(var h=this,u=h._sounds,p=0;p<u.length;p++)u[p]._paused||h.stop(u[p]._id),h._webAudio||(h._clearSound(u[p]._node),u[p]._node.removeEventListener("error",u[p]._errorFn,!1),u[p]._node.removeEventListener(n._canPlayEvent,u[p]._loadFn,!1),u[p]._node.removeEventListener("ended",u[p]._endFn,!1),n._releaseHtml5Audio(u[p]._node)),delete u[p]._node,h._clearTimer(u[p]._id);var m=n._howls.indexOf(h);m>=0&&n._howls.splice(m,1);var v=!0;for(p=0;p<n._howls.length;p++)if(n._howls[p]._src===h._src||h._src.indexOf(n._howls[p]._src)>=0){v=!1;break}return s&&v&&delete s[h._src],n.noAudio=!1,h._state="unloaded",h._sounds=[],h=null,null},on:function(h,u,p,m){return"function"==typeof u&&this["_on"+h].push(m?{id:p,fn:u,once:m}:{id:p,fn:u}),this},off:function(h,u,p){var m=this,v=m["_on"+h],g=0;if("number"==typeof u&&(p=u,u=null),u||p)for(g=0;g<v.length;g++){var b=p===v[g].id;if(u===v[g].fn&&b||!u&&b){v.splice(g,1);break}}else if(h)m["_on"+h]=[];else{var x=Object.keys(m);for(g=0;g<x.length;g++)0===x[g].indexOf("_on")&&Array.isArray(m[x[g]])&&(m[x[g]]=[])}return m},once:function(h,u,p){return this.on(h,u,p,1),this},_emit:function(h,u,p){for(var m=this,v=m["_on"+h],g=v.length-1;g>=0;g--)(!v[g].id||v[g].id===u||"load"===h)&&(setTimeout(function(b){b.call(this,u,p)}.bind(m,v[g].fn),0),v[g].once&&m.off(h,v[g].fn,v[g].id));return m._loadQueue(h),m},_loadQueue:function(h){var u=this;if(u._queue.length>0){var p=u._queue[0];p.event===h&&(u._queue.shift(),u._loadQueue()),h||p.action()}return u},_ended:function(h){var u=this,p=h._sprite;if(!u._webAudio&&h._node&&!h._node.paused&&!h._node.ended&&h._node.currentTime<h._stop)return setTimeout(u._ended.bind(u,h),100),u;var m=!(!h._loop&&!u._sprite[p][2]);if(u._emit("end",h._id),!u._webAudio&&m&&u.stop(h._id,!0).play(h._id),u._webAudio&&m){u._emit("play",h._id),h._seek=h._start||0,h._rateSeek=0,h._playStart=n.ctx.currentTime;var v=1e3*(h._stop-h._start)/Math.abs(h._rate);u._endTimers[h._id]=setTimeout(u._ended.bind(u,h),v)}return u._webAudio&&!m&&(h._paused=!0,h._ended=!0,h._seek=h._start||0,h._rateSeek=0,u._clearTimer(h._id),u._cleanBuffer(h._node),n._autoSuspend()),!u._webAudio&&!m&&u.stop(h._id,!0),u},_clearTimer:function(h){var u=this;if(u._endTimers[h]){if("function"!=typeof u._endTimers[h])clearTimeout(u._endTimers[h]);else{var p=u._soundById(h);p&&p._node&&p._node.removeEventListener("ended",u._endTimers[h],!1)}delete u._endTimers[h]}return u},_soundById:function(h){for(var u=this,p=0;p<u._sounds.length;p++)if(h===u._sounds[p]._id)return u._sounds[p];return null},_inactiveSound:function(){var h=this;h._drain();for(var u=0;u<h._sounds.length;u++)if(h._sounds[u]._ended)return h._sounds[u].reset();return new r(h)},_drain:function(){var h=this,u=h._pool,p=0,m=0;if(!(h._sounds.length<u)){for(m=0;m<h._sounds.length;m++)h._sounds[m]._ended&&p++;for(m=h._sounds.length-1;m>=0;m--){if(p<=u)return;h._sounds[m]._ended&&(h._webAudio&&h._sounds[m]._node&&h._sounds[m]._node.disconnect(0),h._sounds.splice(m,1),p--)}}},_getSoundIds:function(h){if(typeof h>"u"){for(var p=[],m=0;m<this._sounds.length;m++)p.push(this._sounds[m]._id);return p}return[h]},_refreshBuffer:function(h){return h._node.bufferSource=n.ctx.createBufferSource(),h._node.bufferSource.buffer=s[this._src],h._node.bufferSource.connect(h._panner?h._panner:h._node),h._node.bufferSource.loop=h._loop,h._loop&&(h._node.bufferSource.loopStart=h._start||0,h._node.bufferSource.loopEnd=h._stop||0),h._node.bufferSource.playbackRate.setValueAtTime(h._rate,n.ctx.currentTime),this},_cleanBuffer:function(h){var p=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&h.bufferSource&&(h.bufferSource.onended=null,h.bufferSource.disconnect(0),p))try{h.bufferSource.buffer=n._scratchBuffer}catch{}return h.bufferSource=null,this},_clearSound:function(h){/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent)||(h.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(h){this._parent=h,this.init()};r.prototype={init:function(){var h=this,u=h._parent;return h._muted=u._muted,h._loop=u._loop,h._volume=u._volume,h._rate=u._rate,h._seek=0,h._paused=!0,h._ended=!0,h._sprite="__default",h._id=++n._counter,u._sounds.push(h),h.create(),h},create:function(){var h=this,u=h._parent,p=n._muted||h._muted||h._parent._muted?0:h._volume;return u._webAudio?(h._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),h._node.gain.setValueAtTime(p,n.ctx.currentTime),h._node.paused=!0,h._node.connect(n.masterGain)):n.noAudio||(h._node=n._obtainHtml5Audio(),h._errorFn=h._errorListener.bind(h),h._node.addEventListener("error",h._errorFn,!1),h._loadFn=h._loadListener.bind(h),h._node.addEventListener(n._canPlayEvent,h._loadFn,!1),h._endFn=h._endListener.bind(h),h._node.addEventListener("ended",h._endFn,!1),h._node.src=u._src,h._node.preload=!0===u._preload?"auto":u._preload,h._node.volume=p*n.volume(),h._node.load()),h},reset:function(){var h=this,u=h._parent;return h._muted=u._muted,h._loop=u._loop,h._volume=u._volume,h._rate=u._rate,h._seek=0,h._rateSeek=0,h._paused=!0,h._ended=!0,h._sprite="__default",h._id=++n._counter,h},_errorListener:function(){var h=this;h._parent._emit("loaderror",h._id,h._node.error?h._node.error.code:0),h._node.removeEventListener("error",h._errorFn,!1)},_loadListener:function(){var h=this,u=h._parent;u._duration=Math.ceil(10*h._node.duration)/10,0===Object.keys(u._sprite).length&&(u._sprite={__default:[0,1e3*u._duration]}),"loaded"!==u._state&&(u._state="loaded",u._emit("load"),u._loadQueue()),h._node.removeEventListener(n._canPlayEvent,h._loadFn,!1)},_endListener:function(){var h=this,u=h._parent;u._duration===1/0&&(u._duration=Math.ceil(10*h._node.duration)/10,u._sprite.__default[1]===1/0&&(u._sprite.__default[1]=1e3*u._duration),u._ended(h)),h._node.removeEventListener("ended",h._endFn,!1)}};var s={},o=function(h){var u=h._src;if(s[u])return h._duration=s[u].duration,void c(h);if(/^data:[^;]+;base64,/.test(u)){for(var p=atob(u.split(",")[1]),m=new Uint8Array(p.length),v=0;v<p.length;++v)m[v]=p.charCodeAt(v);l(m.buffer,h)}else{var g=new XMLHttpRequest;g.open(h._xhr.method,u,!0),g.withCredentials=h._xhr.withCredentials,g.responseType="arraybuffer",h._xhr.headers&&Object.keys(h._xhr.headers).forEach(function(b){g.setRequestHeader(b,h._xhr.headers[b])}),g.onload=function(){var b=(g.status+"")[0];"0"===b||"2"===b||"3"===b?l(g.response,h):h._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".")},g.onerror=function(){h._webAudio&&(h._html5=!0,h._webAudio=!1,h._sounds=[],delete s[u],h.load())},a(g)}},a=function(h){try{h.send()}catch{h.onerror()}},l=function(h,u){var p=function(){u._emit("loaderror",null,"Decoding audio data failed.")},m=function(v){v&&u._sounds.length>0?(s[u._src]=v,c(u,v)):p()};typeof Promise<"u"&&1===n.ctx.decodeAudioData.length?n.ctx.decodeAudioData(h).then(m).catch(p):n.ctx.decodeAudioData(h,m,p)},c=function(h,u){u&&!h._duration&&(h._duration=u.duration),0===Object.keys(h._sprite).length&&(h._sprite={__default:[0,1e3*h._duration]}),"loaded"!==h._state&&(h._state="loaded",h._emit("load"),h._loadQueue())},d=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var h=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),u=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),p=u?parseInt(u[1],10):null;if(h&&p&&p<9){var m=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!m&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};"function"==typeof define&&define.amd&&define([],function(){return{Howler:n,Howl:i}}),typeof e<"u"&&(e.Howler=n,e.Howl=i),typeof global<"u"?(global.HowlerGlobal=t,global.Howler=n,global.Howl=i,global.Sound=r):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=n,window.Howl=i,window.Sound=r)})(),function(){var n;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var r=i._howls.length-1;r>=0;r--)i._howls[r].stereo(n);return i},HowlerGlobal.prototype.pos=function(n,i,r){var s=this;return s.ctx&&s.ctx.listener?"number"!=typeof n?s._pos:(s._pos=[n,i="number"!=typeof i?s._pos[1]:i,r="number"!=typeof r?s._pos[2]:r],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]),s):s},HowlerGlobal.prototype.orientation=function(n,i,r,s,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var c=l._orientation;return"number"!=typeof n?c:(l._orientation=[n,i="number"!=typeof i?c[1]:i,r="number"!=typeof r?c[2]:r,s="number"!=typeof s?c[3]:s,o="number"!=typeof o?c[4]:o,a="number"!=typeof a?c[5]:a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(n,i,r,s,o,a),l)},Howl.prototype.init=(n=Howl.prototype.init,function(i){var r=this;return r._orientation=i.orientation||[1,0,0],r._stereo=i.stereo||null,r._pos=i.pos||null,r._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},r._onstereo=i.onstereo?[{fn:i.onstereo}]:[],r._onpos=i.onpos?[{fn:i.onpos}]:[],r._onorientation=i.onorientation?[{fn:i.onorientation}]:[],n.call(this,i)}),Howl.prototype.stereo=function(n,i){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(n,i)}}),r;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u"){if("number"!=typeof n)return r._stereo;r._stereo=n,r._pos=[n,0,0]}for(var o=r._getSoundIds(i),a=0;a<o.length;a++){var l=r._soundById(o[a]);if(l){if("number"!=typeof n)return l._stereo;l._stereo=n,l._pos=[n,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&t(l,s),"spatial"===s?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(n,0,0):l._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),r._emit("stereo",l._id)}}return r},Howl.prototype.pos=function(n,i,r,s){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(n,i,r,s)}}),o;if(i="number"!=typeof i?0:i,r="number"!=typeof r?-.5:r,typeof s>"u"){if("number"!=typeof n)return o._pos;o._pos=[n,i,r]}for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c){if("number"!=typeof n)return c._pos;c._pos=[n,i,r],c._node&&((!c._panner||c._panner.pan)&&t(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setPosition(n,i,r)),o._emit("pos",c._id)}}return o},Howl.prototype.orientation=function(n,i,r,s){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(n,i,r,s)}}),o;if(i="number"!=typeof i?o._orientation[1]:i,r="number"!=typeof r?o._orientation[2]:r,typeof s>"u"){if("number"!=typeof n)return o._orientation;o._orientation=[n,i,r]}for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c){if("number"!=typeof n)return c._orientation;c._orientation=[n,i,r],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),t(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setOrientation(n,i,r)),o._emit("orientation",c._id)}}return o},Howl.prototype.pannerAttr=function(){var r,s,o,n=this,i=arguments;if(!n._webAudio)return n;if(0===i.length)return n._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return(o=n._soundById(parseInt(i[0],10)))?o._pannerAttr:n._pannerAttr;r=i[0],typeof s>"u"&&(r.pannerAttr||(r.pannerAttr={coneInnerAngle:r.coneInnerAngle,coneOuterAngle:r.coneOuterAngle,coneOuterGain:r.coneOuterGain,distanceModel:r.distanceModel,maxDistance:r.maxDistance,refDistance:r.refDistance,rolloffFactor:r.rolloffFactor,panningModel:r.panningModel}),n._pannerAttr={coneInnerAngle:typeof r.pannerAttr.coneInnerAngle<"u"?r.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof r.pannerAttr.coneOuterAngle<"u"?r.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof r.pannerAttr.coneOuterGain<"u"?r.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof r.pannerAttr.distanceModel<"u"?r.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof r.pannerAttr.maxDistance<"u"?r.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof r.pannerAttr.refDistance<"u"?r.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof r.pannerAttr.rolloffFactor<"u"?r.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof r.pannerAttr.panningModel<"u"?r.pannerAttr.panningModel:n._panningModel})}else 2===i.length&&(r=i[0],s=parseInt(i[1],10));for(var a=n._getSoundIds(s),l=0;l<a.length;l++)if(o=n._soundById(a[l])){var c=o._pannerAttr;c={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:c.coneOuterGain,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:c.distanceModel,maxDistance:typeof r.maxDistance<"u"?r.maxDistance:c.maxDistance,refDistance:typeof r.refDistance<"u"?r.refDistance:c.refDistance,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:c.rolloffFactor,panningModel:typeof r.panningModel<"u"?r.panningModel:c.panningModel};var d=o._panner;d?(d.coneInnerAngle=c.coneInnerAngle,d.coneOuterAngle=c.coneOuterAngle,d.coneOuterGain=c.coneOuterGain,d.distanceModel=c.distanceModel,d.maxDistance=c.maxDistance,d.refDistance=c.refDistance,d.rolloffFactor=c.rolloffFactor,d.panningModel=c.panningModel):(o._pos||(o._pos=n._pos||[0,0,-.5]),t(o,"spatial"))}return n},Sound.prototype.init=function(n){return function(){var i=this,r=i._parent;i._orientation=r._orientation,i._stereo=r._stereo,i._pos=r._pos,i._pannerAttr=r._pannerAttr,n.call(this),i._stereo?r.stereo(i._stereo):i._pos&&r.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var i=this,r=i._parent;return i._orientation=r._orientation,i._stereo=r._stereo,i._pos=r._pos,i._pannerAttr=r._pannerAttr,i._stereo?r.stereo(i._stereo):i._pos?r.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,r._refreshBuffer(i)),n.call(this)}}(Sound.prototype.reset);var t=function(n,i){"spatial"===(i=i||"spatial")?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}}()}),uDe=Vl((e,t)=>{t.exports=function n(i){for(var r=new Array(i),s=0;s<i;++s)r[s]=s;return r}}),pDe=Vl((e,t)=>{function n(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}t.exports=function(r){return null!=r&&(n(r)||function i(r){return"function"==typeof r.readFloatLE&&"function"==typeof r.slice&&n(r.slice(0,0))}(r)||!!r._isBuffer)}}),gM=Vl((e,t)=>{var n=uDe(),i=pDe(),r=typeof Float64Array<"u";function s(h,u){return h[0]-u[0]}function o(){var p,h=this.stride,u=new Array(h.length);for(p=0;p<u.length;++p)u[p]=[Math.abs(h[p]),p];u.sort(s);var m=new Array(u.length);for(p=0;p<m.length;++p)m[p]=u[p][1];return m}function a(h,u){var p=["View",u,"d",h].join("");u<0&&(p="View_Nil"+h);var m="generic"===h;if(-1===u){var v="function "+p+"(a){this.data=a;};var proto="+p+".prototype;proto.dtype='"+h+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+p+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+p+"(a){return new "+p+"(a);}";return new Function(v)()}if(0===u)return v="function "+p+"(a,d) {this.data = a;this.offset = d};var proto="+p+".prototype;proto.dtype='"+h+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+p+"_copy() {return new "+p+"(this.data,this.offset)};proto.pick=function "+p+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+p+"_get(){return "+(m?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+p+"_set(v){return "+(m?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+p+"(a,b,c,d){return new "+p+"(a,d)}",new Function("TrivialArray",v)(c[h][0]);v=["'use strict'"];var g=n(u),b=g.map(function(Q){return"i"+Q}),x="this.offset+"+g.map(function(Q){return"this.stride["+Q+"]*i"+Q}).join("+"),w=g.map(function(Q){return"b"+Q}).join(","),P=g.map(function(Q){return"c"+Q}).join(",");v.push("function "+p+"(a,"+w+","+P+",d){this.data=a","this.shape=["+w+"]","this.stride=["+P+"]","this.offset=d|0}","var proto="+p+".prototype","proto.dtype='"+h+"'","proto.dimension="+u),v.push("Object.defineProperty(proto,'size',{get:function "+p+"_size(){return "+g.map(function(Q){return"this.shape["+Q+"]"}).join("*"),"}})"),1===u?v.push("proto.order=[0]"):(v.push("Object.defineProperty(proto,'order',{get:"),u<4?(v.push("function "+p+"_order(){"),2===u?v.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===u&&v.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):v.push("ORDER})")),v.push("proto.set=function "+p+"_set("+b.join(",")+",v){"),v.push(m?"return this.data.set("+x+",v)}":"return this.data["+x+"]=v}"),v.push("proto.get=function "+p+"_get("+b.join(",")+"){"),v.push(m?"return this.data.get("+x+")}":"return this.data["+x+"]}"),v.push("proto.index=function "+p+"_index(",b.join(),"){return "+x+"}"),v.push("proto.hi=function "+p+"_hi("+b.join(",")+"){return new "+p+"(this.data,"+g.map(function(Q){return["(typeof i",Q,"!=='number'||i",Q,"<0)?this.shape[",Q,"]:i",Q,"|0"].join("")}).join(",")+","+g.map(function(Q){return"this.stride["+Q+"]"}).join(",")+",this.offset)}");var A=g.map(function(Q){return"a"+Q+"=this.shape["+Q+"]"}),D=g.map(function(Q){return"c"+Q+"=this.stride["+Q+"]"});v.push("proto.lo=function "+p+"_lo("+b.join(",")+"){var b=this.offset,d=0,"+A.join(",")+","+D.join(","));for(var R=0;R<u;++R)v.push("if(typeof i"+R+"==='number'&&i"+R+">=0){d=i"+R+"|0;b+=c"+R+"*d;a"+R+"-=d}");for(v.push("return new "+p+"(this.data,"+g.map(function(Q){return"a"+Q}).join(",")+","+g.map(function(Q){return"c"+Q}).join(",")+",b)}"),v.push("proto.step=function "+p+"_step("+b.join(",")+"){var "+g.map(function(Q){return"a"+Q+"=this.shape["+Q+"]"}).join(",")+","+g.map(function(Q){return"b"+Q+"=this.stride["+Q+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil"),R=0;R<u;++R)v.push("if(typeof i"+R+"==='number'){d=i"+R+"|0;if(d<0){c+=b"+R+"*(a"+R+"-1);a"+R+"=ceil(-a"+R+"/d)}else{a"+R+"=ceil(a"+R+"/d)}b"+R+"*=d}");v.push("return new "+p+"(this.data,"+g.map(function(Q){return"a"+Q}).join(",")+","+g.map(function(Q){return"b"+Q}).join(",")+",c)}");var N=new Array(u),k=new Array(u);for(R=0;R<u;++R)N[R]="a[i"+R+"]",k[R]="b[i"+R+"]";for(v.push("proto.transpose=function "+p+"_transpose("+b+"){"+b.map(function(Q,le){return Q+"=("+Q+"===undefined?"+le+":"+Q+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+p+"(this.data,"+N.join(",")+","+k.join(",")+",this.offset)}"),v.push("proto.pick=function "+p+"_pick("+b+"){var a=[],b=[],c=this.offset"),R=0;R<u;++R)v.push("if(typeof i"+R+"==='number'&&i"+R+">=0){c=(c+this.stride["+R+"]*i"+R+")|0}else{a.push(this.shape["+R+"]);b.push(this.stride["+R+"])}");return v.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),v.push("return function construct_"+p+"(data,shape,stride,offset){return new "+p+"(data,"+g.map(function(Q){return"shape["+Q+"]"}).join(",")+","+g.map(function(Q){return"stride["+Q+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",v.join("\n"))(c[h],o)}var c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};t.exports=function d(h,u,p,m){if(void 0===h)return(0,c.array[0])([]);"number"==typeof h&&(h=[h]),void 0===u&&(u=[h.length]);var v=u.length;if(void 0===p){p=new Array(v);for(var g=v-1,b=1;g>=0;--g)p[g]=b,b*=u[g]}if(void 0===m)for(m=0,g=0;g<v;++g)p[g]<0&&(m-=(u[g]-1)*p[g]);for(var x=function l(h){if(i(h))return"buffer";if(r)switch(Object.prototype.toString.call(h)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(h)?"array":"generic"}(h),w=c[x];w.length<=v+1;)w.push(a(x,w.length-1));return(0,w[v+1])(h,u,p,m)}}),fDe=Vl((e,t)=>{t.exports=function r(s,o,a){return 0===s.length?s:o?(a||s.sort(o),function n(s,o){for(var a=1,l=s.length,c=s[0],d=s[0],h=1;h<l;++h)if(d=c,o(c=s[h],d)){if(h===a){a++;continue}s[a++]=c}return s.length=a,s}(s,o)):(a||s.sort(),function i(s){for(var o=1,a=s.length,l=s[0],c=s[0],d=1;d<a;++d,c=l)if(c=l,(l=s[d])!==c){if(d===o){o++;continue}s[o++]=l}return s.length=o,s}(s))}}),mDe=Vl((e,t)=>{var n=fDe();function i(c,d,h){var w,P,u=c.length,p=d.arrayArgs.length,m=d.indexArgs.length>0,v=[],g=[],b=0,x=0;for(w=0;w<u;++w)g.push(["i",w,"=0"].join(""));for(P=0;P<p;++P)for(w=0;w<u;++w)x=b,b=c[w],g.push(0===w?["d",P,"s",w,"=t",P,"p",b].join(""):["d",P,"s",w,"=(t",P,"p",b,"-s",x,"*t",P,"p",x,")"].join(""));for(g.length>0&&v.push("var "+g.join(",")),w=u-1;w>=0;--w)v.push(["for(i",w,"=0;i",w,"<s",b=c[w],";++i",w,"){"].join(""));for(v.push(h),w=0;w<u;++w){for(x=b,b=c[w],P=0;P<p;++P)v.push(["p",P,"+=d",P,"s",w].join(""));m&&(w>0&&v.push(["index[",x,"]-=s",x].join("")),v.push(["++index[",b,"]"].join(""))),v.push("}")}return v.join("\n")}function o(c,d,h){for(var u=c.body,p=[],m=[],v=0;v<c.args.length;++v){var g=c.args[v];if(!(g.count<=0)){var b=new RegExp(g.name,"g"),x="",w=d.arrayArgs.indexOf(v);switch(d.argTypes[v]){case"offset":var P=d.offsetArgIndex.indexOf(v);w=d.offsetArgs[P].array,x="+q"+P;case"array":x="p"+w+x;var D="l"+v,R="a"+w;if(0===d.arrayBlockIndices[w])1===g.count?"generic"===h[w]?g.lvalue?(p.push(["var ",D,"=",R,".get(",x,")"].join("")),u=u.replace(b,D),m.push([R,".set(",x,",",D,")"].join(""))):u=u.replace(b,[R,".get(",x,")"].join("")):u=u.replace(b,[R,"[",x,"]"].join("")):"generic"===h[w]?(p.push(["var ",D,"=",R,".get(",x,")"].join("")),u=u.replace(b,D),g.lvalue&&m.push([R,".set(",x,",",D,")"].join(""))):(p.push(["var ",D,"=",R,"[",x,"]"].join("")),u=u.replace(b,D),g.lvalue&&m.push([R,"[",x,"]=",D].join("")));else{for(var N=[g.name],k=[x],L=0;L<Math.abs(d.arrayBlockIndices[w]);L++)N.push("\\s*\\[([^\\]]+)\\]"),k.push("$"+(L+1)+"*t"+w+"b"+L);if(b=new RegExp(N.join(""),"g"),x=k.join("+"),"generic"===h[w])throw new Error("cwise: Generic arrays not supported in combination with blocks!");u=u.replace(b,[R,"[",x,"]"].join(""))}break;case"scalar":u=u.replace(b,"Y"+d.scalarArgs.indexOf(v));break;case"index":u=u.replace(b,"index");break;case"shape":u=u.replace(b,"shape")}}}return[p.join("\n"),u,m.join("\n")].join("\n").trim()}function a(c){for(var d=new Array(c.length),h=!0,u=0;u<c.length;++u){var p=c[u],m=p.match(/\d+/);m=m?m[0]:"",d[u]=0===p.charAt(0)?"u"+p.charAt(1)+m:p.charAt(0)+m,u>0&&(h=h&&d[u]===d[u-1])}return h?d[0]:d.join("")}t.exports=function l(c,d){for(var h=d[1].length-Math.abs(c.arrayBlockIndices[0])|0,u=new Array(c.arrayArgs.length),p=new Array(c.arrayArgs.length),m=0;m<c.arrayArgs.length;++m)p[m]=d[2*m],u[m]=d[2*m+1];var v=[],g=[],b=[],x=[],w=[];for(m=0;m<c.arrayArgs.length;++m){c.arrayBlockIndices[m]<0?(b.push(0),x.push(h),v.push(h),g.push(h+c.arrayBlockIndices[m])):(b.push(c.arrayBlockIndices[m]),x.push(c.arrayBlockIndices[m]+h),v.push(0),g.push(c.arrayBlockIndices[m]));for(var P=[],A=0;A<u[m].length;A++)b[m]<=u[m][A]&&u[m][A]<x[m]&&P.push(u[m][A]-b[m]);w.push(P)}var D=["SS"],R=["'use strict'"],N=[];for(A=0;A<h;++A)N.push(["s",A,"=SS[",A,"]"].join(""));for(m=0;m<c.arrayArgs.length;++m){for(D.push("a"+m),D.push("t"+m),D.push("p"+m),A=0;A<h;++A)N.push(["t",m,"p",A,"=t",m,"[",b[m]+A,"]"].join(""));for(A=0;A<Math.abs(c.arrayBlockIndices[m]);++A)N.push(["t",m,"b",A,"=t",m,"[",v[m]+A,"]"].join(""))}for(m=0;m<c.scalarArgs.length;++m)D.push("Y"+m);if(c.shapeArgs.length>0&&N.push("shape=SS.slice(0)"),c.indexArgs.length>0){var k=new Array(h);for(m=0;m<h;++m)k[m]="0";N.push(["index=[",k.join(","),"]"].join(""))}for(m=0;m<c.offsetArgs.length;++m){var L=c.offsetArgs[m],Q=[];for(A=0;A<L.offset.length;++A)0!==L.offset[A]&&Q.push(1===L.offset[A]?["t",L.array,"p",A].join(""):[L.offset[A],"*t",L.array,"p",A].join(""));N.push(0===Q.length?"q"+m+"=0":["q",m,"=",Q.join("+")].join(""))}var le=n([].concat(c.pre.thisVars).concat(c.body.thisVars).concat(c.post.thisVars));for((N=N.concat(le)).length>0&&R.push("var "+N.join(",")),m=0;m<c.arrayArgs.length;++m)R.push("p"+m+"|=0");c.pre.body.length>3&&R.push(o(c.pre,c,p));var ae=o(c.body,c,p),he=function s(c){for(var d=0,h=c[0].length;d<h;){for(var u=1;u<c.length;++u)if(c[u][d]!==c[0][d])return d;++d}return d}(w);R.push(he<h?function r(c,d,h,u){for(var p=d.length,m=h.arrayArgs.length,v=h.blockSize,g=h.indexArgs.length>0,b=[],x=0;x<m;++x)b.push(["var offset",x,"=p",x].join(""));for(x=c;x<p;++x)b.push(["for(var j"+x+"=SS[",d[x],"]|0;j",x,">0;){"].join("")),b.push(["if(j",x,"<",v,"){"].join("")),b.push(["s",d[x],"=j",x].join("")),b.push(["j",x,"=0"].join("")),b.push(["}else{s",d[x],"=",v].join("")),b.push(["j",x,"-=",v,"}"].join("")),g&&b.push(["index[",d[x],"]=j",x].join(""));for(x=0;x<m;++x){for(var w=["offset"+x],P=c;P<p;++P)w.push(["j",P,"*t",x,"p",d[P]].join(""));b.push(["p",x,"=(",w.join("+"),")"].join(""))}for(b.push(i(d,h,u)),x=c;x<p;++x)b.push("}");return b.join("\n")}(he,w[0],c,ae):i(w[0],c,ae)),c.post.body.length>3&&R.push(o(c.post,c,p)),c.debug&&console.log("-----Generated cwise routine for ",d,":\n"+R.join("\n")+"\n----------");var xe=[c.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",he,a(p)].join("");return new Function(["function ",xe,"(",D.join(","),"){",R.join("\n"),"} return ",xe].join(""))()}}),gDe=Vl((e,t)=>{var n=mDe();t.exports=function i(r){var s=["'use strict'","var CACHED={}"],o=[];s.push(["return function ",r.funcName+"_cwise_thunk","(",r.shimArgs.join(","),"){"].join(""));for(var l=[],c=[],d=[["array",r.arrayArgs[0],".shape.slice(",Math.max(0,r.arrayBlockIndices[0]),r.arrayBlockIndices[0]<0?","+r.arrayBlockIndices[0]+")":")"].join("")],h=[],u=[],p=0;p<r.arrayArgs.length;++p){var m=r.arrayArgs[p];o.push(["t",m,"=array",m,".dtype,","r",m,"=array",m,".order"].join("")),l.push("t"+m),l.push("r"+m),c.push("t"+m),c.push("r"+m+".join()"),d.push("array"+m+".data"),d.push("array"+m+".stride"),d.push("array"+m+".offset|0"),p>0&&(h.push("array"+r.arrayArgs[0]+".shape.length===array"+m+".shape.length+"+(Math.abs(r.arrayBlockIndices[0])-Math.abs(r.arrayBlockIndices[p]))),u.push("array"+r.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[0])+"]===array"+m+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[p])+"]"))}for(r.arrayArgs.length>1&&(s.push("if (!("+h.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),s.push("for(var shapeIndex=array"+r.arrayArgs[0]+".shape.length-"+Math.abs(r.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),s.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),s.push("}")),p=0;p<r.scalarArgs.length;++p)d.push("scalar"+r.scalarArgs[p]);return o.push(["type=[",c.join(","),"].join()"].join("")),o.push("proc=CACHED[type]"),s.push("var "+o.join(",")),s.push(["if(!proc){","CACHED[type]=proc=compile([",l.join(","),"])}","return proc(",d.join(","),")}"].join("")),r.debug&&console.log("-----Generated thunk:\n"+s.join("\n")+"\n----------"),new Function("compile",s.join("\n"))(n.bind(void 0,r))}}),vDe=Vl((e,t)=>{var n=gDe();function i(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}t.exports=function r(s){var o=new i;o.pre=s.pre,o.body=s.body,o.post=s.post;var a=s.args.slice(0);o.argTypes=a;for(var l=0;l<a.length;++l){var c=a[l];if("array"===c||"object"==typeof c&&c.blockIndices){if(o.argTypes[l]="array",o.arrayArgs.push(l),o.arrayBlockIndices.push(c.blockIndices?c.blockIndices:0),o.shimArgs.push("array"+l),l<o.pre.args.length&&o.pre.args[l].count>0)throw new Error("cwise: pre() block may not reference array args");if(l<o.post.args.length&&o.post.args[l].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===c)o.scalarArgs.push(l),o.shimArgs.push("scalar"+l);else if("index"===c){if(o.indexArgs.push(l),l<o.pre.args.length&&o.pre.args[l].count>0)throw new Error("cwise: pre() block may not reference array index");if(l<o.body.args.length&&o.body.args[l].lvalue)throw new Error("cwise: body() block may not write to array index");if(l<o.post.args.length&&o.post.args[l].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===c){if(o.shapeArgs.push(l),l<o.pre.args.length&&o.pre.args[l].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(l<o.body.args.length&&o.body.args[l].lvalue)throw new Error("cwise: body() block may not write to array shape");if(l<o.post.args.length&&o.post.args[l].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof c||!c.offset)throw new Error("cwise: Unknown argument type "+a[l]);o.argTypes[l]="offset",o.offsetArgs.push({array:c.array,offset:c.offset}),o.offsetArgIndex.push(l)}}if(o.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(o.pre.args.length>a.length)throw new Error("cwise: Too many arguments in pre() block");if(o.body.args.length>a.length)throw new Error("cwise: Too many arguments in body() block");if(o.post.args.length>a.length)throw new Error("cwise: Too many arguments in post() block");return o.debug=!!s.printCode||!!s.debug,o.funcName=s.funcName||"cwise",o.blockSize=s.blockSize||64,n(o)}}),vM=Vl(e=>{var t=vDe(),n={body:"",args:[],thisVars:[],localVars:[]};function i(u){if(!u)return n;for(var p=0;p<u.args.length;++p){var m=u.args[p];u.args[p]=0===p?{name:m,lvalue:!0,rvalue:!!u.rvalue,count:u.count||1}:{name:m,lvalue:!1,rvalue:!0,count:1}}return u.thisVars||(u.thisVars=[]),u.localVars||(u.localVars=[]),u}function s(u){for(var p=[],m=0;m<u.args.length;++m)p.push("a"+m);return new Function("P",["return function ",u.funcName,"_ndarrayops(",p.join(","),") {P(",p.join(","),");return a0}"].join(""))(function r(u){return t({args:u.args,pre:i(u.pre),body:i(u.body),post:i(u.proc),funcName:u.funcName})}(u))}var o={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var u in o){var p=o[u];e[u]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+p+"c"},funcName:u}),e[u+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a"+p+"=b"},rvalue:!0,funcName:u+"eq"}),e[u+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+p+"s"},funcName:u+"s"}),e[u+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a"+p+"=s"},rvalue:!0,funcName:u+"seq"})}}();var a={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var u in a){var p=a[u];e[u]=s({args:["array","array"],body:{args:["a","b"],body:"a="+p+"b"},funcName:u}),e[u+"eq"]=s({args:["array"],body:{args:["a"],body:"a="+p+"a"},rvalue:!0,count:2,funcName:u+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var u in l){var p=l[u];e[u]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+p+"c"},funcName:u}),e[u+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+p+"s"},funcName:u+"s"}),e[u+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a=a"+p+"b"},rvalue:!0,count:2,funcName:u+"eq"}),e[u+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+p+"s"},rvalue:!0,count:2,funcName:u+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var u=0;u<c.length;++u){var p=c[u];e[p]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:p}),e[p+"eq"]=s({args:["array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"eq"})}}();var d=["max","min","atan2","pow"];!function(){for(var u=0;u<d.length;++u){var p=d[u];e[p]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:p}),e[p+"s"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:p+"s"}),e[p+"eq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"eq"}),e[p+"seq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"seq"})}}();var h=["atan2","pow"];(function(){for(var u=0;u<h.length;++u){var p=h[u];e[p+"op"]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:p+"op"}),e[p+"ops"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:p+"ops"}),e[p+"opeq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"opeq"}),e[p+"opseq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"opseq"})}})(),e.any=t({args:["array"],pre:n,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=t({args:["array"],pre:n,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=t({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=t({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=t({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=t({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=s({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=s({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=s({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=t({args:["array","array"],pre:n,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})}),yDe=Vl((e,t)=>{t.exports=function(n,i){for(var r=n.split("."),s=i.split("."),o=0;o<3;o++){var a=Number(r[o]),l=Number(s[o]);if(a>l)return 1;if(l>a)return-1;if(!isNaN(a)&&isNaN(l))return 1;if(isNaN(a)&&!isNaN(l))return-1}return 0}}),v_="149",_De=0,H$=1,bDe=2,U4=1,xDe=2,yM=3,cu=0,ll=1,Yc=2,wa=0,Pv=1,G$=2,W$=3,q$=4,wDe=5,y_=100,MDe=101,CDe=102,X$=103,Y$=104,PDe=200,SDe=201,EDe=202,ODe=203,$$=204,K$=205,ADe=206,TDe=207,DDe=208,IDe=209,RDe=210,kDe=0,NDe=1,LDe=2,V4=3,FDe=4,BDe=5,zDe=6,UDe=7,Z$=0,VDe=1,jDe=2,kf=0,HDe=1,GDe=2,WDe=3,qDe=4,XDe=5,Sv=301,Ev=302,j4=303,H4=304,_M=306,Nf=1e3,na=1001,G4=1002,eo=1003,J$=1004,W4=1005,Or=1006,YDe=1007,__=1008,jl=1009,$De=1010,KDe=1011,eK=1012,ZDe=1013,Lf=1014,gc=1015,Ov=1016,QDe=1017,JDe=1018,Av=1020,e3e=1021,Vd=1023,t3e=1024,n3e=1025,Tv=1026,Dv=1027,i3e=1028,r3e=1029,$E=1030,s3e=1031,tK=1033,q4=33776,X4=33777,Y4=33778,$4=33779,nK=35840,iK=35841,rK=35842,sK=35843,o3e=36196,oK=37492,aK=37496,lK=37808,cK=37809,dK=37810,hK=37811,uK=37812,pK=37813,fK=37814,mK=37815,gK=37816,vK=37817,yK=37818,_K=37819,bK=37820,xK=37821,K4=36492,a3e=36283,wK=36284,MK=36285,CK=36286,PK=2200,Z4=2202,b_=2400,x_=2401,cp=3e3,fr=3001,Ff=3200,EK=3201,c3e=0,d3e=1,dp="srgb",JE="srgb-linear",OK="300 es",nL=1035,Sl=class{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let n=this._listeners[e];if(void 0!==n){let i=n.indexOf(t);-1!==i&&n.splice(i,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners[e.type];if(void 0!==t){e.target=this;let n=t.slice(0);for(let i=0,r=n.length;i<r;i++)n[i].call(this,e);e.target=null}}},Hl=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],AK=1234567,bM=Math.PI/180,xM=180/Math.PI;function Mh(){let e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Hl[255&e]+Hl[e>>8&255]+Hl[e>>16&255]+Hl[e>>24&255]+"-"+Hl[255&t]+Hl[t>>8&255]+"-"+Hl[t>>16&15|64]+Hl[t>>24&255]+"-"+Hl[63&n|128]+Hl[n>>8&255]+"-"+Hl[n>>16&255]+Hl[n>>24&255]+Hl[255&i]+Hl[i>>8&255]+Hl[i>>16&255]+Hl[i>>24&255]).toLowerCase()}function Ma(e,t,n){return Math.max(t,Math.min(n,e))}function iL(e,t){return(e%t+t)%t}function wM(e,t,n){return(1-n)*e+n*t}function rL(e){return 0==(e&e-1)&&0!==e}function TK(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function eO(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Bf(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function to(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var gi=Object.freeze({__proto__:null,DEG2RAD:bM,RAD2DEG:xM,ceilPowerOfTwo:TK,clamp:Ma,damp:function m3e(e,t,n,i){return wM(e,t,1-Math.exp(-n*i))},degToRad:function M3e(e){return e*bM},denormalize:Bf,euclideanModulo:iL,floorPowerOfTwo:eO,generateUUID:Mh,inverseLerp:function f3e(e,t,n){return e!==t?(n-e)/(t-e):0},isPowerOfTwo:rL,lerp:wM,mapLinear:function p3e(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},normalize:to,pingpong:function g3e(e,t=1){return t-Math.abs(iL(e,2*t)-t)},radToDeg:function C3e(e){return e*xM},randFloat:function b3e(e,t){return e+Math.random()*(t-e)},randFloatSpread:function x3e(e){return e*(.5-Math.random())},randInt:function _3e(e,t){return e+Math.floor(Math.random()*(t-e+1))},seededRandom:function w3e(e){void 0!==e&&(AK=e);let t=AK+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},setQuaternionFromProperEuler:function P3e(e,t,n,i,r){let s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((t+i)/2),d=o((t+i)/2),h=s((t-i)/2),u=o((t-i)/2),p=s((i-t)/2),m=o((i-t)/2);switch(r){case"XYX":e.set(a*d,l*h,l*u,a*c);break;case"YZY":e.set(l*u,a*d,l*h,a*c);break;case"ZXZ":e.set(l*h,l*u,a*d,a*c);break;case"XZX":e.set(a*d,l*m,l*p,a*c);break;case"YXY":e.set(l*p,a*d,l*m,a*c);break;case"ZYZ":e.set(l*m,l*p,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},smootherstep:function y3e(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},smoothstep:function v3e(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)}}),tt=class{constructor(e=0,t=0){tt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,s=this.y-e.y;return this.x=r*n-s*i+e.x,this.y=r*i+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},ia=class{constructor(){ia.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,i,r,s,o,a,l){let c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=t,c[4]=r,c[5]=a,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,i=t.elements,r=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],c=n[4],d=n[7],h=n[2],u=n[5],p=n[8],m=i[0],v=i[3],g=i[6],b=i[1],x=i[4],w=i[7],P=i[2],A=i[5],D=i[8];return r[0]=s*m+o*b+a*P,r[3]=s*v+o*x+a*A,r[6]=s*g+o*w+a*D,r[1]=l*m+c*b+d*P,r[4]=l*v+c*x+d*A,r[7]=l*g+c*w+d*D,r[2]=h*m+u*b+p*P,r[5]=h*v+u*x+p*A,r[8]=h*g+u*w+p*D,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8];return t*s*c-t*o*l-n*r*c+n*o*a+i*r*l-i*s*a}invert(){let e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],d=c*s-o*l,h=o*a-c*r,u=l*r-s*a,p=t*d+n*h+i*u;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);let m=1/p;return e[0]=d*m,e[1]=(i*l-c*n)*m,e[2]=(o*n-i*s)*m,e[3]=h*m,e[4]=(c*t-i*a)*m,e[5]=(i*r-o*t)*m,e[6]=u*m,e[7]=(n*a-l*t)*m,e[8]=(s*t-n*r)*m,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,s,o){let a=Math.cos(r),l=Math.sin(r);return this.set(n*a,n*l,-n*(a*s+l*o)+s+e,-i*l,i*a,-i*(-l*s+a*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(sL.makeScale(e,t)),this}rotate(e){return this.premultiply(sL.makeRotation(-e)),this}translate(e,t){return this.premultiply(sL.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}},sL=new ia;function DK(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var S3e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function tO(e,t){return new S3e[e](t)}function nO(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Iv(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function iO(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var oL={[dp]:{[JE]:Iv},[JE]:{[dp]:iO}},vc={legacyMode:!0,get workingColorSpace(){return JE},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(oL[t]&&void 0!==oL[t][n]){let i=oL[t][n];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},IK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ga={r:0,g:0,b:0},du={h:0,s:0,l:0},rO={h:0,s:0,l:0};function aL(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function sO(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var Di=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=dp){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,vc.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=vc.workingColorSpace){return this.r=e,this.g=t,this.b=n,vc.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=vc.workingColorSpace){if(e=iL(e,1),t=Ma(t,0,1),n=Ma(n,0,1),0===t)this.r=this.g=this.b=n;else{let r=n<=.5?n*(1+t):n+t-n*t,s=2*n-r;this.r=aL(s,r,e+1/3),this.g=aL(s,r,e),this.b=aL(s,r,e-1/3)}return vc.toWorkingColorSpace(this,i),this}setStyle(e,t=dp){function n(r){void 0!==r&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let r,o=i[2];switch(i[1]){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,vc.toWorkingColorSpace(this,t),n(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,vc.toWorkingColorSpace(this,t),n(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){let a=parseFloat(r[1])/360,l=parseFloat(r[2])/100,c=parseFloat(r[3])/100;return n(r[4]),this.setHSL(a,l,c,t)}}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){let r=i[1],s=r.length;if(3===s)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,vc.toWorkingColorSpace(this,t),this;if(6===s)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,vc.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=dp){let n=IK[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Iv(e.r),this.g=Iv(e.g),this.b=Iv(e.b),this}copyLinearToSRGB(e){return this.r=iO(e.r),this.g=iO(e.g),this.b=iO(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=dp){return vc.fromWorkingColorSpace(sO(this,Ga),e),Ma(255*Ga.r,0,255)<<16^Ma(255*Ga.g,0,255)<<8^Ma(255*Ga.b,0,255)<<0}getHexString(e=dp){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=vc.workingColorSpace){vc.fromWorkingColorSpace(sO(this,Ga),t);let a,l,n=Ga.r,i=Ga.g,r=Ga.b,s=Math.max(n,i,r),o=Math.min(n,i,r),c=(o+s)/2;if(o===s)a=0,l=0;else{let d=s-o;switch(l=c<=.5?d/(s+o):d/(2-s-o),s){case n:a=(i-r)/d+(i<r?6:0);break;case i:a=(r-n)/d+2;break;case r:a=(n-i)/d+4}a/=6}return e.h=a,e.s=l,e.l=c,e}getRGB(e,t=vc.workingColorSpace){return vc.fromWorkingColorSpace(sO(this,Ga),t),e.r=Ga.r,e.g=Ga.g,e.b=Ga.b,e}getStyle(e=dp){return vc.fromWorkingColorSpace(sO(this,Ga),e),e!==dp?`color(${e} ${Ga.r} ${Ga.g} ${Ga.b})`:`rgb(${255*Ga.r|0},${255*Ga.g|0},${255*Ga.b|0})`}offsetHSL(e,t,n){return this.getHSL(du),du.h+=e,du.s+=t,du.l+=n,this.setHSL(du.h,du.s,du.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(du),e.getHSL(rO);let n=wM(du.h,rO.h,t),i=wM(du.s,rO.s,t),r=wM(du.l,rO.l,t);return this.setHSL(n,i,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};Di.NAMES=IK;var w_,RK=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===w_&&(w_=nO("canvas")),w_.width=e.width,w_.height=e.height;let n=w_.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=w_}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=nO("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let s=0;s<r.length;s++)r[s]=255*Iv(r[s]/255);return n.putImageData(i,0,0),t}if(e.data){let t=e.data.slice(0);for(let n=0;n<t.length;n++)t[n]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Iv(t[n]/255)):Iv(t[n]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},kK=class{constructor(e=null){this.isSource=!0,this.uuid=Mh(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];let n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let r;if(Array.isArray(i)){r=[];for(let s=0,o=i.length;s<o;s++)r.push(lL(i[s].isDataTexture?i[s].image:i[s]))}else r=lL(i);n.url=r}return t||(e.images[this.uuid]=n),n}};function lL(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?RK.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var E3e=0,Wa=class extends Sl{constructor(e=Wa.DEFAULT_IMAGE,t=Wa.DEFAULT_MAPPING,n=na,i=na,r=Or,s=__,o=Vd,a=jl,l=Wa.DEFAULT_ANISOTROPY,c=cp){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:E3e++}),this.uuid=Mh(),this.name="",this.source=new kK(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new tt(0,0),this.repeat=new tt(1,1),this.center=new tt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ia,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];let n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Nf:e.x=e.x-Math.floor(e.x);break;case na:e.x=e.x<0?0:1;break;case G4:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Nf:e.y=e.y-Math.floor(e.y);break;case na:e.y=e.y<0?0:1;break;case G4:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}};Wa.DEFAULT_IMAGE=null,Wa.DEFAULT_MAPPING=300,Wa.DEFAULT_ANISOTROPY=1;var mr=class{constructor(e=0,t=0,n=0,i=1){mr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,i=this.z,r=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*t+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*t+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*t+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r,s=e.elements,o=s[0],a=s[4],l=s[8],c=s[1],d=s[5],h=s[9],u=s[2],p=s[6],m=s[10];if(Math.abs(a-c)<.01&&Math.abs(l-u)<.01&&Math.abs(h-p)<.01){if(Math.abs(a+c)<.1&&Math.abs(l+u)<.1&&Math.abs(h+p)<.1&&Math.abs(o+d+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let g=(o+1)/2,b=(d+1)/2,x=(m+1)/2,w=(a+c)/4,P=(l+u)/4,A=(h+p)/4;return g>b&&g>x?g<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(g),i=w/n,r=P/n):b>x?b<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(b),n=w/i,r=A/i):x<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(x),n=P/r,i=A/r),this.set(n,i,r,t),this}let v=Math.sqrt((p-h)*(p-h)+(l-u)*(l-u)+(c-a)*(c-a));return Math.abs(v)<.001&&(v=1),this.x=(p-h)/v,this.y=(l-u)/v,this.z=(c-a)/v,this.w=Math.acos((o+d+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Ls=class extends Sl{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new mr(0,0,e,t),this.scissorTest=!1,this.viewport=new mr(0,0,e,t),this.texture=new Wa({width:e,height:t,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Or,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new kK(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},NK=class extends Wa{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=eo,this.minFilter=eo,this.wrapR=na,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},A3e=class extends Ls{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;let r=this.texture;this.texture=[];for(let s=0;s<n;s++)this.texture[s]=r.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},Qi=class{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,s,o){let a=n[i+0],l=n[i+1],c=n[i+2],d=n[i+3],h=r[s+0],u=r[s+1],p=r[s+2],m=r[s+3];if(0===o)return e[t+0]=a,e[t+1]=l,e[t+2]=c,void(e[t+3]=d);if(1===o)return e[t+0]=h,e[t+1]=u,e[t+2]=p,void(e[t+3]=m);if(d!==m||a!==h||l!==u||c!==p){let v=1-o,g=a*h+l*u+c*p+d*m,b=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){let P=Math.sqrt(x),A=Math.atan2(P,g*b);v=Math.sin(v*A)/P,o=Math.sin(o*A)/P}let w=o*b;if(a=a*v+h*w,l=l*v+u*w,c=c*v+p*w,d=d*v+m*w,v===1-o){let P=1/Math.sqrt(a*a+l*l+c*c+d*d);a*=P,l*=P,c*=P,d*=P}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,i,r,s){let o=n[i],a=n[i+1],l=n[i+2],c=n[i+3],d=r[s],h=r[s+1],u=r[s+2],p=r[s+3];return e[t]=o*p+c*d+a*u-l*h,e[t+1]=a*p+c*h+l*d-o*u,e[t+2]=l*p+c*u+o*h-a*d,e[t+3]=c*p-o*d-a*h-l*u,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let n=e._x,i=e._y,r=e._z,s=e._order,o=Math.cos,a=Math.sin,l=o(n/2),c=o(i/2),d=o(r/2),h=a(n/2),u=a(i/2),p=a(r/2);switch(s){case"XYZ":this._x=h*c*d+l*u*p,this._y=l*u*d-h*c*p,this._z=l*c*p+h*u*d,this._w=l*c*d-h*u*p;break;case"YXZ":this._x=h*c*d+l*u*p,this._y=l*u*d-h*c*p,this._z=l*c*p-h*u*d,this._w=l*c*d+h*u*p;break;case"ZXY":this._x=h*c*d-l*u*p,this._y=l*u*d+h*c*p,this._z=l*c*p+h*u*d,this._w=l*c*d-h*u*p;break;case"ZYX":this._x=h*c*d-l*u*p,this._y=l*u*d+h*c*p,this._z=l*c*p-h*u*d,this._w=l*c*d+h*u*p;break;case"YZX":this._x=h*c*d+l*u*p,this._y=l*u*d+h*c*p,this._z=l*c*p-h*u*d,this._w=l*c*d-h*u*p;break;case"XZY":this._x=h*c*d-l*u*p,this._y=l*u*d-h*c*p,this._z=l*c*p+h*u*d,this._w=l*c*d+h*u*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,n=t[0],i=t[4],r=t[8],s=t[1],o=t[5],a=t[9],l=t[2],c=t[6],d=t[10],h=n+o+d;if(h>0){let u=.5/Math.sqrt(h+1);this._w=.25/u,this._x=(c-a)*u,this._y=(r-l)*u,this._z=(s-i)*u}else if(n>o&&n>d){let u=2*Math.sqrt(1+n-o-d);this._w=(c-a)/u,this._x=.25*u,this._y=(i+s)/u,this._z=(r+l)/u}else if(o>d){let u=2*Math.sqrt(1+o-n-d);this._w=(r-l)/u,this._x=(i+s)/u,this._y=.25*u,this._z=(a+c)/u}else{let u=2*Math.sqrt(1+d-n-o);this._w=(s-i)/u,this._x=(r+l)/u,this._y=(a+c)/u,this._z=.25*u}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ma(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);if(0===n)return this;let i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let n=e._x,i=e._y,r=e._z,s=e._w,o=t._x,a=t._y,l=t._z,c=t._w;return this._x=n*c+s*o+i*l-r*a,this._y=i*c+s*a+r*o-n*l,this._z=r*c+s*l+n*a-i*o,this._w=s*c-n*o-i*a-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);let n=this._x,i=this._y,r=this._z,s=this._w,o=s*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;let a=1-o*o;if(a<=Number.EPSILON){let u=1-t;return this._w=u*s+t*this._w,this._x=u*n+t*this._x,this._y=u*i+t*this._y,this._z=u*r+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(a),c=Math.atan2(l,o),d=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=s*d+this._w*h,this._x=n*d+this._x*h,this._y=i*d+this._y*h,this._z=r*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){let e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},oe=class{constructor(e=0,t=0,n=0){oe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(LK.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(LK.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,n=this.y,i=this.z,r=e.elements,s=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(e){let t=this.x,n=this.y,i=this.z,r=e.x,s=e.y,o=e.z,a=e.w,l=a*t+s*i-o*n,c=a*n+o*t-r*i,d=a*i+r*n-s*t,h=-r*t-s*n-o*i;return this.x=l*a+h*-r+c*-o-d*-s,this.y=c*a+h*-s+d*-r-l*-o,this.z=d*a+h*-o+l*-s-c*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let n=e.x,i=e.y,r=e.z,s=t.x,o=t.y,a=t.z;return this.x=i*a-r*o,this.y=r*s-n*a,this.z=n*o-i*s,this}projectOnVector(e){let t=e.lengthSq();if(0===t)return this.set(0,0,0);let n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return cL.copy(this).projectOnVector(e),this.sub(cL)}reflect(e){return this.sub(cL.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;let n=this.dot(e)/t;return Math.acos(Ma(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){let i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},cL=new oe,LK=new Qi,ra=class{constructor(e=new oe(1/0,1/0,1/0),t=new oe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=e.length;a<l;a+=3){let c=e[a],d=e[a+1],h=e[a+2];c<t&&(t=c),d<n&&(n=d),h<i&&(i=h),c>r&&(r=c),d>s&&(s=d),h>o&&(o=h)}return this.min.set(t,n,i),this.max.set(r,s,o),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=e.count;a<l;a++){let c=e.getX(a),d=e.getY(a),h=e.getZ(a);c<t&&(t=c),d<n&&(n=d),h<i&&(i=h),c>r&&(r=c),d>s&&(s=d),h>o&&(o=h)}return this.min.set(t,n,i),this.max.set(r,s,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=Rv.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position){let r=n.attributes.position;for(let s=0,o=r.count;s<o;s++)Rv.fromBufferAttribute(r,s).applyMatrix4(e.matrixWorld),this.expandByPoint(Rv)}else null===n.boundingBox&&n.computeBoundingBox(),dL.copy(n.boundingBox),dL.applyMatrix4(e.matrixWorld),this.union(dL);let i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Rv),Rv.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(MM),oO.subVectors(this.max,MM),M_.subVectors(e.a,MM),C_.subVectors(e.b,MM),P_.subVectors(e.c,MM),pg.subVectors(C_,M_),fg.subVectors(P_,C_),kv.subVectors(M_,P_);let t=[0,-pg.z,pg.y,0,-fg.z,fg.y,0,-kv.z,kv.y,pg.z,0,-pg.x,fg.z,0,-fg.x,kv.z,0,-kv.x,-pg.y,pg.x,0,-fg.y,fg.x,0,-kv.y,kv.x,0];return!(!hL(t,M_,C_,P_,oO)||(t=[1,0,0,0,1,0,0,0,1],!hL(t,M_,C_,P_,oO)))&&(aO.crossVectors(pg,fg),t=[aO.x,aO.y,aO.z],hL(t,M_,C_,P_,oO))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Rv.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Rv).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(zf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),zf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),zf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),zf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),zf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),zf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),zf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),zf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(zf)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},zf=[new oe,new oe,new oe,new oe,new oe,new oe,new oe,new oe],Rv=new oe,dL=new ra,M_=new oe,C_=new oe,P_=new oe,pg=new oe,fg=new oe,kv=new oe,MM=new oe,oO=new oe,aO=new oe,Nv=new oe;function hL(e,t,n,i,r){for(let s=0,o=e.length-3;s<=o;s+=3){Nv.fromArray(e,s);let a=r.x*Math.abs(Nv.x)+r.y*Math.abs(Nv.y)+r.z*Math.abs(Nv.z),l=t.dot(Nv),c=n.dot(Nv),d=i.dot(Nv);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}var T3e=new ra,CM=new oe,uL=new oe,$c=class{constructor(e=new oe,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;void 0!==t?n.copy(t):T3e.setFromPoints(e).getCenter(n);let i=0;for(let r=0,s=e.length;r<s;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;CM.subVectors(e,this.center);let t=CM.lengthSq();if(t>this.radius*this.radius){let n=Math.sqrt(t),i=.5*(n-this.radius);this.center.addScaledVector(CM,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(uL.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(CM.copy(e.center).add(uL)),this.expandByPoint(CM.copy(e.center).sub(uL))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}},Uf=new oe,pL=new oe,lO=new oe,mg=new oe,fL=new oe,cO=new oe,mL=new oe,S_=class{constructor(e=new oe,t=new oe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Uf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Uf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Uf.copy(this.direction).multiplyScalar(t).add(this.origin),Uf.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){pL.copy(e).add(t).multiplyScalar(.5),lO.copy(t).sub(e).normalize(),mg.copy(this.origin).sub(pL);let d,h,u,p,r=.5*e.distanceTo(t),s=-this.direction.dot(lO),o=mg.dot(this.direction),a=-mg.dot(lO),l=mg.lengthSq(),c=Math.abs(1-s*s);if(c>0)if(d=s*a-o,h=s*o-a,p=r*c,d>=0)if(h>=-p)if(h<=p){let m=1/c;d*=m,h*=m,u=d*(d+s*h+2*o)+h*(s*d+h+2*a)+l}else h=r,d=Math.max(0,-(s*h+o)),u=-d*d+h*(h+2*a)+l;else h=-r,d=Math.max(0,-(s*h+o)),u=-d*d+h*(h+2*a)+l;else h<=-p?(d=Math.max(0,-(-s*r+o)),h=d>0?-r:Math.min(Math.max(-r,-a),r),u=-d*d+h*(h+2*a)+l):h<=p?(d=0,h=Math.min(Math.max(-r,-a),r),u=h*(h+2*a)+l):(d=Math.max(0,-(s*r+o)),h=d>0?r:Math.min(Math.max(-r,-a),r),u=-d*d+h*(h+2*a)+l);else h=s>0?-r:r,d=Math.max(0,-(s*h+o)),u=-d*d+h*(h+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(d).add(this.origin),i&&i.copy(lO).multiplyScalar(h).add(pL),u}intersectSphere(e,t){Uf.subVectors(e.center,this.origin);let n=Uf.dot(this.direction),i=Uf.dot(Uf)-n*n,r=e.radius*e.radius;if(i>r)return null;let s=Math.sqrt(r-i),o=n-s,a=n+s;return o<0&&a<0?null:this.at(o<0?a:o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,s,o,a,l=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,s=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,s=(e.min.y-h.y)*c),n>s||r>i||((r>n||isNaN(n))&&(n=r),(s<i||isNaN(i))&&(i=s),d>=0?(o=(e.min.z-h.z)*d,a=(e.max.z-h.z)*d):(o=(e.max.z-h.z)*d,a=(e.min.z-h.z)*d),n>a||o>i)||((o>n||n!=n)&&(n=o),(a<i||i!=i)&&(i=a),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return null!==this.intersectBox(e,Uf)}intersectTriangle(e,t,n,i,r){fL.subVectors(t,e),cO.subVectors(n,e),mL.crossVectors(fL,cO);let o,s=this.direction.dot(mL);if(s>0){if(i)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}mg.subVectors(this.origin,e);let a=o*this.direction.dot(cO.crossVectors(mg,cO));if(a<0)return null;let l=o*this.direction.dot(fL.cross(mg));if(l<0||a+l>s)return null;let c=-o*mg.dot(mL);return c<0?null:this.at(c/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}},vn=class{constructor(){vn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,i,r,s,o,a,l,c,d,h,u,p,m,v){let g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=o,g[13]=a,g[2]=l,g[6]=c,g[10]=d,g[14]=h,g[3]=u,g[7]=p,g[11]=m,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new vn).fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,n=e.elements,i=1/E_.setFromMatrixColumn(e,0).length(),r=1/E_.setFromMatrixColumn(e,1).length(),s=1/E_.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,n=e.x,i=e.y,r=e.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(i),l=Math.sin(i),c=Math.cos(r),d=Math.sin(r);if("XYZ"===e.order){let h=s*c,u=s*d,p=o*c,m=o*d;t[0]=a*c,t[4]=-a*d,t[8]=l,t[1]=u+p*l,t[5]=h-m*l,t[9]=-o*a,t[2]=m-h*l,t[6]=p+u*l,t[10]=s*a}else if("YXZ"===e.order){let h=a*c,u=a*d,p=l*c,m=l*d;t[0]=h+m*o,t[4]=p*o-u,t[8]=s*l,t[1]=s*d,t[5]=s*c,t[9]=-o,t[2]=u*o-p,t[6]=m+h*o,t[10]=s*a}else if("ZXY"===e.order){let h=a*c,u=a*d,p=l*c,m=l*d;t[0]=h-m*o,t[4]=-s*d,t[8]=p+u*o,t[1]=u+p*o,t[5]=s*c,t[9]=m-h*o,t[2]=-s*l,t[6]=o,t[10]=s*a}else if("ZYX"===e.order){let h=s*c,u=s*d,p=o*c,m=o*d;t[0]=a*c,t[4]=p*l-u,t[8]=h*l+m,t[1]=a*d,t[5]=m*l+h,t[9]=u*l-p,t[2]=-l,t[6]=o*a,t[10]=s*a}else if("YZX"===e.order){let h=s*a,u=s*l,p=o*a,m=o*l;t[0]=a*c,t[4]=m-h*d,t[8]=p*d+u,t[1]=d,t[5]=s*c,t[9]=-o*c,t[2]=-l*c,t[6]=u*d+p,t[10]=h-m*d}else if("XZY"===e.order){let h=s*a,u=s*l,p=o*a,m=o*l;t[0]=a*c,t[4]=-d,t[8]=l*c,t[1]=h*d+m,t[5]=s*c,t[9]=u*d-p,t[2]=p*d-u,t[6]=o*c,t[10]=m*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(D3e,e,I3e)}lookAt(e,t,n){let i=this.elements;return jd.subVectors(e,t),0===jd.lengthSq()&&(jd.z=1),jd.normalize(),gg.crossVectors(n,jd),0===gg.lengthSq()&&(1===Math.abs(n.z)?jd.x+=1e-4:jd.z+=1e-4,jd.normalize(),gg.crossVectors(n,jd)),gg.normalize(),dO.crossVectors(jd,gg),i[0]=gg.x,i[4]=dO.x,i[8]=jd.x,i[1]=gg.y,i[5]=dO.y,i[9]=jd.y,i[2]=gg.z,i[6]=dO.z,i[10]=jd.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,i=t.elements,r=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],c=n[1],d=n[5],h=n[9],u=n[13],p=n[2],m=n[6],v=n[10],g=n[14],b=n[3],x=n[7],w=n[11],P=n[15],A=i[0],D=i[4],R=i[8],N=i[12],k=i[1],L=i[5],Q=i[9],le=i[13],ae=i[2],he=i[6],xe=i[10],_e=i[14],be=i[3],me=i[7],Te=i[11],Le=i[15];return r[0]=s*A+o*k+a*ae+l*be,r[4]=s*D+o*L+a*he+l*me,r[8]=s*R+o*Q+a*xe+l*Te,r[12]=s*N+o*le+a*_e+l*Le,r[1]=c*A+d*k+h*ae+u*be,r[5]=c*D+d*L+h*he+u*me,r[9]=c*R+d*Q+h*xe+u*Te,r[13]=c*N+d*le+h*_e+u*Le,r[2]=p*A+m*k+v*ae+g*be,r[6]=p*D+m*L+v*he+g*me,r[10]=p*R+m*Q+v*xe+g*Te,r[14]=p*N+m*le+v*_e+g*Le,r[3]=b*A+x*k+w*ae+P*be,r[7]=b*D+x*L+w*he+P*me,r[11]=b*R+x*Q+w*xe+P*Te,r[15]=b*N+x*le+w*_e+P*Le,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],s=e[1],o=e[5],a=e[9],l=e[13],c=e[2],d=e[6],h=e[10],u=e[14];return e[3]*(+r*a*d-i*l*d-r*o*h+n*l*h+i*o*u-n*a*u)+e[7]*(+t*a*u-t*l*h+r*s*h-i*s*u+i*l*c-r*a*c)+e[11]*(+t*l*d-t*o*u-r*s*d+n*s*u+r*o*c-n*l*c)+e[15]*(-i*o*c-t*a*d+t*o*h+i*s*d-n*s*h+n*a*c)}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){let i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){let e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],d=e[9],h=e[10],u=e[11],p=e[12],m=e[13],v=e[14],g=e[15],b=d*v*l-m*h*l+m*a*u-o*v*u-d*a*g+o*h*g,x=p*h*l-c*v*l-p*a*u+s*v*u+c*a*g-s*h*g,w=c*m*l-p*d*l+p*o*u-s*m*u-c*o*g+s*d*g,P=p*d*a-c*m*a-p*o*h+s*m*h+c*o*v-s*d*v,A=t*b+n*x+i*w+r*P;if(0===A)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let D=1/A;return e[0]=b*D,e[1]=(m*h*r-d*v*r-m*i*u+n*v*u+d*i*g-n*h*g)*D,e[2]=(o*v*r-m*a*r+m*i*l-n*v*l-o*i*g+n*a*g)*D,e[3]=(d*a*r-o*h*r-d*i*l+n*h*l+o*i*u-n*a*u)*D,e[4]=x*D,e[5]=(c*v*r-p*h*r+p*i*u-t*v*u-c*i*g+t*h*g)*D,e[6]=(p*a*r-s*v*r-p*i*l+t*v*l+s*i*g-t*a*g)*D,e[7]=(s*h*r-c*a*r+c*i*l-t*h*l-s*i*u+t*a*u)*D,e[8]=w*D,e[9]=(p*d*r-c*m*r-p*n*u+t*m*u+c*n*g-t*d*g)*D,e[10]=(s*m*r-p*o*r+p*n*l-t*m*l-s*n*g+t*o*g)*D,e[11]=(c*o*r-s*d*r-c*n*l+t*d*l+s*n*u-t*o*u)*D,e[12]=P*D,e[13]=(c*m*i-p*d*i+p*n*h-t*m*h-c*n*v+t*d*v)*D,e[14]=(p*o*i-s*m*i-p*n*a+t*m*a+s*n*v-t*o*v)*D,e[15]=(s*d*i-c*o*i+c*n*a-t*d*a-s*n*h+t*o*h)*D,this}scale(e){let t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){let e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let n=Math.cos(t),i=Math.sin(t),r=1-n,s=e.x,o=e.y,a=e.z,l=r*s,c=r*o;return this.set(l*s+n,l*o-i*a,l*a+i*o,0,l*o+i*a,c*o+n,c*a-i*s,0,l*a-i*o,c*a+i*s,r*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,s){return this.set(1,n,r,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){let i=this.elements,r=t._x,s=t._y,o=t._z,a=t._w,l=r+r,c=s+s,d=o+o,h=r*l,u=r*c,p=r*d,m=s*c,v=s*d,g=o*d,b=a*l,x=a*c,w=a*d,P=n.x,A=n.y,D=n.z;return i[0]=(1-(m+g))*P,i[1]=(u+w)*P,i[2]=(p-x)*P,i[3]=0,i[4]=(u-w)*A,i[5]=(1-(h+g))*A,i[6]=(v+b)*A,i[7]=0,i[8]=(p+x)*D,i[9]=(v-b)*D,i[10]=(1-(h+m))*D,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){let i=this.elements,r=E_.set(i[0],i[1],i[2]).length(),s=E_.set(i[4],i[5],i[6]).length(),o=E_.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],hu.copy(this);let a=1/r,l=1/s,c=1/o;return hu.elements[0]*=a,hu.elements[1]*=a,hu.elements[2]*=a,hu.elements[4]*=l,hu.elements[5]*=l,hu.elements[6]*=l,hu.elements[8]*=c,hu.elements[9]*=c,hu.elements[10]*=c,t.setFromRotationMatrix(hu),n.x=r,n.y=s,n.z=o,this}makePerspective(e,t,n,i,r,s){let o=this.elements,l=2*r/(n-i),c=(t+e)/(t-e),d=(n+i)/(n-i),h=-(s+r)/(s-r),u=-2*s*r/(s-r);return o[0]=2*r/(t-e),o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=u,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,i,r,s){let o=this.elements,a=1/(t-e),l=1/(n-i),c=1/(s-r),d=(t+e)*a,h=(n+i)*l,u=(s+r)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-u,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},E_=new oe,hu=new vn,D3e=new oe(0,0,0),I3e=new oe(1,1,1),gg=new oe,dO=new oe,jd=new oe,FK=new vn,BK=new Qi,cl=class{constructor(e=0,t=0,n=0,i=cl.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){let i=e.elements,r=i[0],s=i[4],o=i[8],a=i[1],l=i[5],c=i[9],d=i[2],h=i[6],u=i[10];switch(t){case"XYZ":this._y=Math.asin(Ma(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,u),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Ma(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,u),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(Ma(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,u),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-Ma(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,u),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Ma(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(o,u));break;case"XZY":this._z=Math.asin(-Ma(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-c,u),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return FK.makeRotationFromQuaternion(e),this.setFromRotationMatrix(FK,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return BK.setFromEuler(this),this.setFromQuaternion(BK,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};cl.DEFAULT_ORDER="XYZ";var gL=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}},R3e=0,zK=new oe,O_=new Qi,Vf=new vn,hO=new oe,PM=new oe,k3e=new oe,N3e=new Qi,UK=new oe(1,0,0),VK=new oe(0,1,0),jK=new oe(0,0,1),L3e={type:"added"},HK={type:"removed"},Fs=class extends Sl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:R3e++}),this.uuid=Mh(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Fs.DEFAULT_UP.clone();let e=new oe,t=new cl,n=new Qi,i=new oe(1,1,1);t._onChange(function r(){n.setFromEuler(t,!1)}),n._onChange(function s(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new vn},normalMatrix:{value:new ia}}),this.matrix=new vn,this.matrixWorld=new vn,this.matrixAutoUpdate=Fs.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Fs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new gL,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return O_.setFromAxisAngle(e,t),this.quaternion.multiply(O_),this}rotateOnWorldAxis(e,t){return O_.setFromAxisAngle(e,t),this.quaternion.premultiply(O_),this}rotateX(e){return this.rotateOnAxis(UK,e)}rotateY(e){return this.rotateOnAxis(VK,e)}rotateZ(e){return this.rotateOnAxis(jK,e)}translateOnAxis(e,t){return zK.copy(e).applyQuaternion(this.quaternion),this.position.add(zK.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(UK,e)}translateY(e){return this.translateOnAxis(VK,e)}translateZ(e){return this.translateOnAxis(jK,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Vf.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?hO.copy(e):hO.set(e,t,n);let i=this.parent;this.updateWorldMatrix(!0,!1),PM.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Vf.lookAt(PM,hO,this.up):Vf.lookAt(hO,PM,this.up),this.quaternion.setFromRotationMatrix(Vf),i&&(Vf.extractRotation(i.matrixWorld),O_.setFromRotationMatrix(Vf),this.quaternion.premultiply(O_.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(L3e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}let t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(HK)),this}removeFromParent(){let e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(HK)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Vf.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Vf.multiply(e.parent.matrixWorld)),e.applyMatrix4(Vf),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){let r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){let s=this.children[i].getObjectsByProperty(e,t);s.length>0&&(n=n.concat(s))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(PM,e,k3e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(PM,N3e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);let t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){let t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let n=0,i=t.length;n<i;n++){let r=t[n];(!0===r.matrixWorldAutoUpdate||!0===e)&&r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){let i=this.children;for(let r=0,s=i.length;r<s;r++){let o=i[r];!0===o.matrixWorldAutoUpdate&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};function r(o,a){return void 0===o[a.uuid]&&(o[a.uuid]=a.toJSON(e)),a.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);let o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){let a=o.shapes;if(Array.isArray(a))for(let l=0,c=a.length;l<c;l++)r(e.shapes,a[l]);else r(e.shapes,a)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){let o=[];for(let a=0,l=this.material.length;a<l;a++)o.push(r(e.materials,this.material[a]));i.material=o}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++)i.animations.push(r(e.animations,this.animations[o]))}if(t){let o=s(e.geometries),a=s(e.materials),l=s(e.textures),c=s(e.images),d=s(e.shapes),h=s(e.skeletons),u=s(e.animations),p=s(e.nodes);o.length>0&&(n.geometries=o),a.length>0&&(n.materials=a),l.length>0&&(n.textures=l),c.length>0&&(n.images=c),d.length>0&&(n.shapes=d),h.length>0&&(n.skeletons=h),u.length>0&&(n.animations=u),p.length>0&&(n.nodes=p)}return n.object=i,n;function s(o){let a=[];for(let l in o){let c=o[l];delete c.metadata,a.push(c)}return a}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++)this.add(e.children[n].clone());return this}};Fs.DEFAULT_UP=new oe(0,1,0),Fs.DEFAULT_MATRIX_AUTO_UPDATE=!0,Fs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var uu=new oe,jf=new oe,vL=new oe,Hf=new oe,A_=new oe,T_=new oe,GK=new oe,yL=new oe,_L=new oe,bL=new oe,Gl=class{constructor(e=new oe,t=new oe,n=new oe){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),uu.subVectors(e,t),i.cross(uu);let r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){uu.subVectors(i,t),jf.subVectors(n,t),vL.subVectors(e,t);let s=uu.dot(uu),o=uu.dot(jf),a=uu.dot(vL),l=jf.dot(jf),c=jf.dot(vL),d=s*l-o*o;if(0===d)return r.set(-2,-1,-1);let h=1/d,u=(l*a-o*c)*h,p=(s*c-o*a)*h;return r.set(1-u-p,p,u)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Hf),Hf.x>=0&&Hf.y>=0&&Hf.x+Hf.y<=1}static getUV(e,t,n,i,r,s,o,a){return this.getBarycoord(e,t,n,i,Hf),a.set(0,0),a.addScaledVector(r,Hf.x),a.addScaledVector(s,Hf.y),a.addScaledVector(o,Hf.z),a}static isFrontFacing(e,t,n,i){return uu.subVectors(n,t),jf.subVectors(e,t),uu.cross(jf).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return uu.subVectors(this.c,this.b),jf.subVectors(this.a,this.b),.5*uu.cross(jf).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Gl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Gl.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return Gl.getUV(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return Gl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Gl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let s,o,n=this.a,i=this.b,r=this.c;A_.subVectors(i,n),T_.subVectors(r,n),yL.subVectors(e,n);let a=A_.dot(yL),l=T_.dot(yL);if(a<=0&&l<=0)return t.copy(n);_L.subVectors(e,i);let c=A_.dot(_L),d=T_.dot(_L);if(c>=0&&d<=c)return t.copy(i);let h=a*d-c*l;if(h<=0&&a>=0&&c<=0)return s=a/(a-c),t.copy(n).addScaledVector(A_,s);bL.subVectors(e,r);let u=A_.dot(bL),p=T_.dot(bL);if(p>=0&&u<=p)return t.copy(r);let m=u*l-a*p;if(m<=0&&l>=0&&p<=0)return o=l/(l-p),t.copy(n).addScaledVector(T_,o);let v=c*p-u*d;if(v<=0&&d-c>=0&&u-p>=0)return GK.subVectors(r,i),o=(d-c)/(d-c+(u-p)),t.copy(i).addScaledVector(GK,o);let g=1/(v+m+h);return s=m*g,o=h*g,t.copy(n).addScaledVector(A_,s).addScaledVector(T_,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},F3e=0,SM=class extends Sl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:F3e++}),this.uuid=Mh(),this.name="",this.type="Material",this.blending=Pv,this.side=cu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=$$,this.blendDst=K$,this.blendEquation=y_,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=V4,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(let t in e){let n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){let t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});let n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(r){let s=[];for(let o in r){let a=r[o];delete a.metadata,s.push(a)}return s}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Pv&&(n.blending=this.blending),this.side!==cu&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){let r=i(e.textures),s=i(e.images);r.length>0&&(n.textures=r),s.length>0&&(n.images=s)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(null!==t){let i=t.length;n=new Array(i);for(let r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}},EM=class extends SM{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Di(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Z$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Ca=new oe,uO=new tt,Bi=class{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)uO.fromBufferAttribute(this,t),uO.applyMatrix3(e),this.setXY(t,uO.x,uO.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Ca.fromBufferAttribute(this,t),Ca.applyMatrix3(e),this.setXYZ(t,Ca.x,Ca.y,Ca.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Ca.fromBufferAttribute(this,t),Ca.applyMatrix4(e),this.setXYZ(t,Ca.x,Ca.y,Ca.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ca.fromBufferAttribute(this,t),Ca.applyNormalMatrix(e),this.setXYZ(t,Ca.x,Ca.y,Ca.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ca.fromBufferAttribute(this,t),Ca.transformDirection(e),this.setXYZ(t,Ca.x,Ca.y,Ca.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Bf(t,this.array)),t}setX(e,t){return this.normalized&&(t=to(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Bf(t,this.array)),t}setY(e,t){return this.normalized&&(t=to(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Bf(t,this.array)),t}setZ(e,t){return this.normalized&&(t=to(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Bf(t,this.array)),t}setW(e,t){return this.normalized&&(t=to(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=to(t,this.array),n=to(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=to(t,this.array),n=to(n,this.array),i=to(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=to(t,this.array),n=to(n,this.array),i=to(i,this.array),r=to(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},WK=class extends Bi{constructor(e,t,n){super(new Uint16Array(e),t,n)}},D_=class extends Bi{constructor(e,t,n){super(new Uint32Array(e),t,n)}},Qn=class extends Bi{constructor(e,t,n){super(new Float32Array(e),t,n)}},B3e=0,Ch=new vn,xL=new Fs,I_=new oe,Hd=new ra,OM=new ra,dl=new oe,Pi=class extends Sl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:B3e++}),this.uuid=Mh(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(DK(e)?D_:WK)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(void 0!==n){let r=(new ia).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}let i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ch.makeRotationFromQuaternion(e),this.applyMatrix4(Ch),this}rotateX(e){return Ch.makeRotationX(e),this.applyMatrix4(Ch),this}rotateY(e){return Ch.makeRotationY(e),this.applyMatrix4(Ch),this}rotateZ(e){return Ch.makeRotationZ(e),this.applyMatrix4(Ch),this}translate(e,t,n){return Ch.makeTranslation(e,t,n),this.applyMatrix4(Ch),this}scale(e,t,n){return Ch.makeScale(e,t,n),this.applyMatrix4(Ch),this}lookAt(e){return xL.lookAt(e),xL.updateMatrix(),this.applyMatrix4(xL.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(I_).negate(),this.translate(I_.x,I_.y,I_.z),this}setFromPoints(e){let t=[];for(let n=0,i=e.length;n<i;n++){let r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Qn(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ra);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new oe(-1/0,-1/0,-1/0),new oe(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++)Hd.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(dl.addVectors(this.boundingBox.min,Hd.min),this.boundingBox.expandByPoint(dl),dl.addVectors(this.boundingBox.max,Hd.max),this.boundingBox.expandByPoint(dl)):(this.boundingBox.expandByPoint(Hd.min),this.boundingBox.expandByPoint(Hd.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new $c);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new oe,1/0);if(e){let n=this.boundingSphere.center;if(Hd.setFromBufferAttribute(e),t)for(let r=0,s=t.length;r<s;r++)OM.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(dl.addVectors(Hd.min,OM.min),Hd.expandByPoint(dl),dl.addVectors(Hd.max,OM.max),Hd.expandByPoint(dl)):(Hd.expandByPoint(OM.min),Hd.expandByPoint(OM.max));Hd.getCenter(n);let i=0;for(let r=0,s=e.count;r<s;r++)dl.fromBufferAttribute(e,r),i=Math.max(i,n.distanceToSquared(dl));if(t)for(let r=0,s=t.length;r<s;r++){let o=t[r],a=this.morphTargetsRelative;for(let l=0,c=o.count;l<c;l++)dl.fromBufferAttribute(o,l),a&&(I_.fromBufferAttribute(e,l),dl.add(I_)),i=Math.max(i,n.distanceToSquared(dl))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");let n=e.array,i=t.position.array,r=t.normal.array,s=t.uv.array,o=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Bi(new Float32Array(4*o),4));let a=this.getAttribute("tangent").array,l=[],c=[];for(let k=0;k<o;k++)l[k]=new oe,c[k]=new oe;let d=new oe,h=new oe,u=new oe,p=new tt,m=new tt,v=new tt,g=new oe,b=new oe;function x(k,L,Q){d.fromArray(i,3*k),h.fromArray(i,3*L),u.fromArray(i,3*Q),p.fromArray(s,2*k),m.fromArray(s,2*L),v.fromArray(s,2*Q),h.sub(d),u.sub(d),m.sub(p),v.sub(p);let le=1/(m.x*v.y-v.x*m.y);!isFinite(le)||(g.copy(h).multiplyScalar(v.y).addScaledVector(u,-m.y).multiplyScalar(le),b.copy(u).multiplyScalar(m.x).addScaledVector(h,-v.x).multiplyScalar(le),l[k].add(g),l[L].add(g),l[Q].add(g),c[k].add(b),c[L].add(b),c[Q].add(b))}let w=this.groups;0===w.length&&(w=[{start:0,count:n.length}]);for(let k=0,L=w.length;k<L;++k){let Q=w[k],le=Q.start;for(let he=le,xe=le+Q.count;he<xe;he+=3)x(n[he+0],n[he+1],n[he+2])}let P=new oe,A=new oe,D=new oe,R=new oe;function N(k){D.fromArray(r,3*k),R.copy(D);let L=l[k];P.copy(L),P.sub(D.multiplyScalar(D.dot(L))).normalize(),A.crossVectors(R,L);let Q=A.dot(c[k])<0?-1:1;a[4*k]=P.x,a[4*k+1]=P.y,a[4*k+2]=P.z,a[4*k+3]=Q}for(let k=0,L=w.length;k<L;++k){let Q=w[k],le=Q.start;for(let he=le,xe=le+Q.count;he<xe;he+=3)N(n[he+0]),N(n[he+1]),N(n[he+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Bi(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let h=0,u=n.count;h<u;h++)n.setXYZ(h,0,0,0);let i=new oe,r=new oe,s=new oe,o=new oe,a=new oe,l=new oe,c=new oe,d=new oe;if(e)for(let h=0,u=e.count;h<u;h+=3){let p=e.getX(h+0),m=e.getX(h+1),v=e.getX(h+2);i.fromBufferAttribute(t,p),r.fromBufferAttribute(t,m),s.fromBufferAttribute(t,v),c.subVectors(s,r),d.subVectors(i,r),c.cross(d),o.fromBufferAttribute(n,p),a.fromBufferAttribute(n,m),l.fromBufferAttribute(n,v),o.add(c),a.add(c),l.add(c),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(m,a.x,a.y,a.z),n.setXYZ(v,l.x,l.y,l.z)}else for(let h=0,u=t.count;h<u;h+=3)i.fromBufferAttribute(t,h+0),r.fromBufferAttribute(t,h+1),s.fromBufferAttribute(t,h+2),c.subVectors(s,r),d.subVectors(i,r),c.cross(d),n.setXYZ(h+0,c.x,c.y,c.z),n.setXYZ(h+1,c.x,c.y,c.z),n.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)dl.fromBufferAttribute(e,t),dl.normalize(),e.setXYZ(t,dl.x,dl.y,dl.z)}toNonIndexed(){function e(o,a){let l=o.array,c=o.itemSize,d=o.normalized,h=new l.constructor(a.length*c),u=0,p=0;for(let m=0,v=a.length;m<v;m++){u=o.isInterleavedBufferAttribute?a[m]*o.data.stride+o.offset:a[m]*c;for(let g=0;g<c;g++)h[p++]=l[u++]}return new Bi(h,c,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new Pi,n=this.index.array,i=this.attributes;for(let o in i){let l=e(i[o],n);t.setAttribute(o,l)}let r=this.morphAttributes;for(let o in r){let a=[],l=r[o];for(let c=0,d=l.length;c<d;c++){let u=e(l[c],n);a.push(u)}t.morphAttributes[o]=a}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let o=0,a=s.length;o<a;o++){let l=s[o];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){let a=this.parameters;for(let l in a)void 0!==a[l]&&(e[l]=a[l]);return e}e.data={attributes:{}};let t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let a in n)e.data.attributes[a]=n[a].toJSON(e.data);let i={},r=!1;for(let a in this.morphAttributes){let l=this.morphAttributes[a],c=[];for(let d=0,h=l.length;d<h;d++)c.push(l[d].toJSON(e.data));c.length>0&&(i[a]=c,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let n=e.index;null!==n&&this.setIndex(n.clone(t));let i=e.attributes;for(let l in i)this.setAttribute(l,i[l].clone(t));let r=e.morphAttributes;for(let l in r){let c=[],d=r[l];for(let h=0,u=d.length;h<u;h++)c.push(d[h].clone(t));this.morphAttributes[l]=c}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let l=0,c=s.length;l<c;l++){let d=s[l];this.addGroup(d.start,d.count,d.materialIndex)}let o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());let a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},qK=new vn,R_=new S_,wL=new $c,AM=new oe,TM=new oe,DM=new oe,ML=new oe,pO=new oe,fO=new tt,mO=new tt,gO=new tt,CL=new oe,vO=new oe,yc=class extends Fs{constructor(e=new Pi,t=new EM){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++){let s=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}getVertexPosition(e,t){let n=this.geometry,r=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(n.attributes.position,e);let o=this.morphTargetInfluences;if(r&&o){pO.set(0,0,0);for(let a=0,l=r.length;a<l;a++){let c=o[a];0!==c&&(ML.fromBufferAttribute(r[a],e),pO.addScaledVector(s?ML:ML.sub(t),c))}t.add(pO)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){let n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i||(null===n.boundingSphere&&n.computeBoundingSphere(),wL.copy(n.boundingSphere),wL.applyMatrix4(r),!1===e.ray.intersectsSphere(wL))||(qK.copy(r).invert(),R_.copy(e.ray).applyMatrix4(qK),null!==n.boundingBox&&!1===R_.intersectsBox(n.boundingBox)))return;let s,o=n.index,a=n.attributes.position,l=n.attributes.uv,c=n.attributes.uv2,d=n.groups,h=n.drawRange;if(null!==o)if(Array.isArray(i))for(let u=0,p=d.length;u<p;u++){let m=d[u],v=i[m.materialIndex];for(let x=Math.max(m.start,h.start),w=Math.min(o.count,Math.min(m.start+m.count,h.start+h.count));x<w;x+=3){let P=o.getX(x),A=o.getX(x+1),D=o.getX(x+2);s=yO(this,v,e,R_,l,c,P,A,D),s&&(s.faceIndex=Math.floor(x/3),s.face.materialIndex=m.materialIndex,t.push(s))}}else for(let m=Math.max(0,h.start),v=Math.min(o.count,h.start+h.count);m<v;m+=3){let g=o.getX(m),b=o.getX(m+1),x=o.getX(m+2);s=yO(this,i,e,R_,l,c,g,b,x),s&&(s.faceIndex=Math.floor(m/3),t.push(s))}else if(void 0!==a)if(Array.isArray(i))for(let u=0,p=d.length;u<p;u++){let m=d[u],v=i[m.materialIndex];for(let x=Math.max(m.start,h.start),w=Math.min(a.count,Math.min(m.start+m.count,h.start+h.count));x<w;x+=3)s=yO(this,v,e,R_,l,c,x,x+1,x+2),s&&(s.faceIndex=Math.floor(x/3),s.face.materialIndex=m.materialIndex,t.push(s))}else for(let m=Math.max(0,h.start),v=Math.min(a.count,h.start+h.count);m<v;m+=3)s=yO(this,i,e,R_,l,c,m,m+1,m+2),s&&(s.faceIndex=Math.floor(m/3),t.push(s))}};function yO(e,t,n,i,r,s,o,a,l){e.getVertexPosition(o,AM),e.getVertexPosition(a,TM),e.getVertexPosition(l,DM);let c=function z3e(e,t,n,i,r,s,o,a){let l;if(l=t.side===ll?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,t.side===cu,a),null===l)return null;vO.copy(a),vO.applyMatrix4(e.matrixWorld);let c=n.ray.origin.distanceTo(vO);return c<n.near||c>n.far?null:{distance:c,point:vO.clone(),object:e}}(e,t,n,i,AM,TM,DM,CL);if(c){r&&(fO.fromBufferAttribute(r,o),mO.fromBufferAttribute(r,a),gO.fromBufferAttribute(r,l),c.uv=Gl.getUV(CL,AM,TM,DM,fO,mO,gO,new tt)),s&&(fO.fromBufferAttribute(s,o),mO.fromBufferAttribute(s,a),gO.fromBufferAttribute(s,l),c.uv2=Gl.getUV(CL,AM,TM,DM,fO,mO,gO,new tt));let d={a:o,b:a,c:l,normal:new oe,materialIndex:0};Gl.getNormal(AM,TM,DM,d.normal),c.face=d}return c}var hp=class extends Pi{constructor(e=1,t=1,n=1,i=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};let o=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);let a=[],l=[],c=[],d=[],h=0,u=0;function p(m,v,g,b,x,w,P,A,D,R,N){let k=w/D,L=P/R,Q=w/2,le=P/2,ae=A/2,he=D+1,xe=R+1,_e=0,be=0,me=new oe;for(let Te=0;Te<xe;Te++){let Le=Te*L-le;for(let ke=0;ke<he;ke++)me[m]=(ke*k-Q)*b,me[v]=Le*x,me[g]=ae,l.push(me.x,me.y,me.z),me[m]=0,me[v]=0,me[g]=A>0?1:-1,c.push(me.x,me.y,me.z),d.push(ke/D),d.push(1-Te/R),_e+=1}for(let Te=0;Te<R;Te++)for(let Le=0;Le<D;Le++){let Re=h+Le+he*(Te+1),Qe=h+(Le+1)+he*(Te+1),Pe=h+(Le+1)+he*Te;a.push(h+Le+he*Te,Re,Pe),a.push(Re,Qe,Pe),be+=6}o.addGroup(u,be,N),u+=be,h+=_e}p("z","y","x",-1,-1,n,t,e,s,r,0),p("z","y","x",1,-1,n,t,-e,s,r,1),p("x","z","y",1,1,e,n,t,i,s,2),p("x","z","y",1,-1,e,n,-t,i,s,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(a),this.setAttribute("position",new Qn(l,3)),this.setAttribute("normal",new Qn(c,3)),this.setAttribute("uv",new Qn(d,2))}static fromJSON(e){return new hp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function k_(e){let t={};for(let n in e){t[n]={};for(let i in e[n]){let r=e[n][i];t[n][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return t}function _c(e){let t={};for(let n=0;n<e.length;n++){let i=k_(e[n]);for(let r in i)t[r]=i[r]}return t}function XK(e){return null===e.getRenderTarget()&&e.outputEncoding===fr?dp:JE}var N_={clone:k_,merge:_c},Ks=class extends SM{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=k_(e.uniforms),this.uniformsGroups=function U3e(e){let t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let i in this.uniforms){let r=this.uniforms[i].value;t.uniforms[i]=r&&r.isTexture?{type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?{type:"c",value:r.getHex()}:r&&r.isVector2?{type:"v2",value:r.toArray()}:r&&r.isVector3?{type:"v3",value:r.toArray()}:r&&r.isVector4?{type:"v4",value:r.toArray()}:r&&r.isMatrix3?{type:"m3",value:r.toArray()}:r&&r.isMatrix4?{type:"m4",value:r.toArray()}:{value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let n={};for(let i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}},L_=class extends Fs{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new vn,this.projectionMatrix=new vn,this.projectionMatrixInverse=new vn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}},Wl=class extends L_{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=2*xM*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(.5*bM*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*xM*Math.atan(Math.tan(.5*bM*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,r,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(.5*bM*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,s=this.view;if(null!==this.view&&this.view.enabled){let a=s.fullWidth,l=s.fullHeight;r+=s.offsetX*i/a,t-=s.offsetY*n/l,i*=s.width/a,n*=s.height/l}let o=this.filmOffset;0!==o&&(r+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},H3e=class extends Fs{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;let i=new Wl(-90,1,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);let r=new Wl(-90,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);let s=new Wl(-90,1,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);let o=new Wl(-90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(0,-1,0),this.add(o);let a=new Wl(-90,1,e,t);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(0,0,1),this.add(a);let l=new Wl(-90,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();let n=this.renderTarget,[i,r,s,o,a,l]=this.children,c=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=kf,e.xr.enabled=!1;let u=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,a),n.texture.generateMipmaps=u,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=d,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}},PL=class extends Wa{constructor(e,t,n,i,r,s,o,a,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:Sv,n,i,r,s,o,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},G3e=class extends Ls{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1};this.texture=new PL([n,n,n,n,n,n],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Or}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",i=new hp(5,5,5),r=new Ks({name:"CubemapFromEquirect",uniforms:k_(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:ll,blending:wa});r.uniforms.tEquirect.value=t;let s=new yc(i,r),o=t.minFilter;return t.minFilter===__&&(t.minFilter=Or),new H3e(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,i){let r=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,i);e.setRenderTarget(r)}},SL=new oe,W3e=new oe,q3e=new ia,Gd=class{constructor(e=new oe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let i=SL.subVectors(n,t).cross(W3e.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let n=e.delta(SL),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;let r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(n).multiplyScalar(r).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||q3e.getNormalMatrix(e),i=this.coplanarPoint(SL).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}},z_=new $c,_O=new oe,EL=class{constructor(e=new Gd,t=new Gd,n=new Gd,i=new Gd,r=new Gd,s=new Gd){this.planes=[e,t,n,i,r,s]}set(e,t,n,i,r,s){let o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(s),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=this.planes,n=e.elements,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],d=n[7],h=n[8],u=n[9],p=n[10],m=n[11],v=n[12],g=n[13],b=n[14],x=n[15];return t[0].setComponents(o-i,d-a,m-h,x-v).normalize(),t[1].setComponents(o+i,d+a,m+h,x+v).normalize(),t[2].setComponents(o+r,d+l,m+u,x+g).normalize(),t[3].setComponents(o-r,d-l,m-u,x-g).normalize(),t[4].setComponents(o-s,d-c,m-p,x-b).normalize(),t[5].setComponents(o+s,d+c,m+p,x+b).normalize(),this}intersectsObject(e){let t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),z_.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(z_)}intersectsSprite(e){return z_.center.set(0,0,0),z_.radius=.7071067811865476,z_.applyMatrix4(e.matrixWorld),this.intersectsSphere(z_)}intersectsSphere(e){let t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let i=t[n];if(_O.x=i.normal.x>0?e.max.x:e.min.x,_O.y=i.normal.y>0?e.max.y:e.min.y,_O.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(_O)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}};function YK(){let e=null,t=!1,n=null,i=null;function r(s,o){n(s,o),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){n=s},setContext:function(s){e=s}}}function X3e(e,t){let n=t.isWebGL2,i=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);let d=i.get(c);d&&(e.deleteBuffer(d.buffer),i.delete(c))},update:function l(c,d){if(c.isGLBufferAttribute){let u=i.get(c);return void((!u||u.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);let h=i.get(c);void 0===h?i.set(c,function r(c,d){let m,h=c.array,u=c.usage,p=e.createBuffer();if(e.bindBuffer(d,p),e.bufferData(d,h,u),c.onUploadCallback(),h instanceof Float32Array)m=5126;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");m=5131}else m=5123;else if(h instanceof Int16Array)m=5122;else if(h instanceof Uint32Array)m=5125;else if(h instanceof Int32Array)m=5124;else if(h instanceof Int8Array)m=5120;else if(h instanceof Uint8Array)m=5121;else{if(!(h instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);m=5121}return{buffer:p,type:m,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}(c,d)):h.version<c.version&&(function s(c,d,h){let u=d.array,p=d.updateRange;e.bindBuffer(h,c),-1===p.count?e.bufferSubData(h,0,u):(n?e.bufferSubData(h,p.offset*u.BYTES_PER_ELEMENT,u,p.offset,p.count):e.bufferSubData(h,p.offset*u.BYTES_PER_ELEMENT,u.subarray(p.offset,p.offset+p.count)),p.count=-1),d.onUploadCallback()}(h.buffer,c,d),h.version=c.version)}}}var bO=class extends Pi{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};let r=e/2,s=t/2,o=Math.floor(n),a=Math.floor(i),l=o+1,c=a+1,d=e/o,h=t/a,u=[],p=[],m=[],v=[];for(let g=0;g<c;g++){let b=g*h-s;for(let x=0;x<l;x++)p.push(x*d-r,-b,0),m.push(0,0,1),v.push(x/o),v.push(1-g/a)}for(let g=0;g<a;g++)for(let b=0;b<o;b++){let w=b+l*(g+1),P=b+1+l*(g+1),A=b+1+l*g;u.push(b+l*g,w,A),u.push(w,P,A)}this.setIndex(u),this.setAttribute("position",new Qn(p,3)),this.setAttribute("normal",new Qn(m,3)),this.setAttribute("uv",new Qn(v,2))}static fromJSON(e){return new bO(e.width,e.height,e.widthSegments,e.heightSegments)}},yr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Fn={common:{diffuse:{value:new Di(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ia},uv2Transform:{value:new ia},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new tt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Di(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Di(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ia}},sprite:{diffuse:{value:new Di(16777215)},opacity:{value:1},center:{value:new tt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ia}}},up={basic:{uniforms:_c([Fn.common,Fn.specularmap,Fn.envmap,Fn.aomap,Fn.lightmap,Fn.fog]),vertexShader:yr.meshbasic_vert,fragmentShader:yr.meshbasic_frag},lambert:{uniforms:_c([Fn.common,Fn.specularmap,Fn.envmap,Fn.aomap,Fn.lightmap,Fn.emissivemap,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.fog,Fn.lights,{emissive:{value:new Di(0)}}]),vertexShader:yr.meshlambert_vert,fragmentShader:yr.meshlambert_frag},phong:{uniforms:_c([Fn.common,Fn.specularmap,Fn.envmap,Fn.aomap,Fn.lightmap,Fn.emissivemap,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.fog,Fn.lights,{emissive:{value:new Di(0)},specular:{value:new Di(1118481)},shininess:{value:30}}]),vertexShader:yr.meshphong_vert,fragmentShader:yr.meshphong_frag},standard:{uniforms:_c([Fn.common,Fn.envmap,Fn.aomap,Fn.lightmap,Fn.emissivemap,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.roughnessmap,Fn.metalnessmap,Fn.fog,Fn.lights,{emissive:{value:new Di(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:yr.meshphysical_vert,fragmentShader:yr.meshphysical_frag},toon:{uniforms:_c([Fn.common,Fn.aomap,Fn.lightmap,Fn.emissivemap,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.gradientmap,Fn.fog,Fn.lights,{emissive:{value:new Di(0)}}]),vertexShader:yr.meshtoon_vert,fragmentShader:yr.meshtoon_frag},matcap:{uniforms:_c([Fn.common,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.fog,{matcap:{value:null}}]),vertexShader:yr.meshmatcap_vert,fragmentShader:yr.meshmatcap_frag},points:{uniforms:_c([Fn.points,Fn.fog]),vertexShader:yr.points_vert,fragmentShader:yr.points_frag},dashed:{uniforms:_c([Fn.common,Fn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:yr.linedashed_vert,fragmentShader:yr.linedashed_frag},depth:{uniforms:_c([Fn.common,Fn.displacementmap]),vertexShader:yr.depth_vert,fragmentShader:yr.depth_frag},normal:{uniforms:_c([Fn.common,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,{opacity:{value:1}}]),vertexShader:yr.meshnormal_vert,fragmentShader:yr.meshnormal_frag},sprite:{uniforms:_c([Fn.sprite,Fn.fog]),vertexShader:yr.sprite_vert,fragmentShader:yr.sprite_frag},background:{uniforms:{uvTransform:{value:new ia},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:yr.background_vert,fragmentShader:yr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:yr.backgroundCube_vert,fragmentShader:yr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:yr.cube_vert,fragmentShader:yr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:yr.equirect_vert,fragmentShader:yr.equirect_frag},distanceRGBA:{uniforms:_c([Fn.common,Fn.displacementmap,{referencePosition:{value:new oe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:yr.distanceRGBA_vert,fragmentShader:yr.distanceRGBA_frag},shadow:{uniforms:_c([Fn.lights,Fn.fog,{color:{value:new Di(0)},opacity:{value:1}}]),vertexShader:yr.shadow_vert,fragmentShader:yr.shadow_frag}};up.physical={uniforms:_c([up.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new tt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Di(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new tt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Di(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Di(1,1,1)},specularColorMap:{value:null}}]),vertexShader:yr.meshphysical_vert,fragmentShader:yr.meshphysical_frag};var xO={r:0,b:0,g:0};function Ske(e,t,n,i,r,s,o){let c,d,a=new Di(0),l=!0===s?0:1,h=null,u=0,p=null;function v(g,b){g.getRGB(xO,XK(e)),i.buffers.color.setClear(xO.r,xO.g,xO.b,b,o)}return{getClearColor:function(){return a},setClearColor:function(g,b=1){a.set(g),l=b,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,v(a,l)},render:function m(g,b){let x=!1,w=!0===b.isScene?b.background:null;w&&w.isTexture&&(w=(b.backgroundBlurriness>0?n:t).get(w));let P=e.xr,A=P.getSession&&P.getSession();A&&"additive"===A.environmentBlendMode&&(w=null),null===w?v(a,l):w&&w.isColor&&(v(w,1),x=!0),(e.autoClear||x)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),w&&(w.isCubeTexture||w.mapping===_M)?(void 0===d&&(d=new yc(new hp(1,1,1),new Ks({name:"BackgroundCubeMaterial",uniforms:k_(up.backgroundCube.uniforms),vertexShader:up.backgroundCube.vertexShader,fragmentShader:up.backgroundCube.fragmentShader,side:ll,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(D,R,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=w,d.material.uniforms.flipEnvMap.value=w.isCubeTexture&&!1===w.isRenderTargetTexture?-1:1,d.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,d.material.toneMapped=w.encoding!==fr,(h!==w||u!==w.version||p!==e.toneMapping)&&(d.material.needsUpdate=!0,h=w,u=w.version,p=e.toneMapping),d.layers.enableAll(),g.unshift(d,d.geometry,d.material,0,0,null)):w&&w.isTexture&&(void 0===c&&(c=new yc(new bO(2,2),new Ks({name:"BackgroundMaterial",uniforms:k_(up.background.uniforms),vertexShader:up.background.vertexShader,fragmentShader:up.background.fragmentShader,side:cu,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,c.material.toneMapped=w.encoding!==fr,!0===w.matrixAutoUpdate&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(h!==w||u!==w.version||p!==e.toneMapping)&&(c.material.needsUpdate=!0,h=w,u=w.version,p=e.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null))}}}function Eke(e,t,n,i){let r=e.getParameter(34921),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},l=g(null),c=l,d=!1;function p(he){return i.isWebGL2?e.bindVertexArray(he):s.bindVertexArrayOES(he)}function m(he){return i.isWebGL2?e.deleteVertexArray(he):s.deleteVertexArrayOES(he)}function g(he){let xe=[],_e=[],be=[];for(let me=0;me<r;me++)xe[me]=0,_e[me]=0,be[me]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:xe,enabledAttributes:_e,attributeDivisors:be,object:he,attributes:{},index:null}}function w(){let he=c.newAttributes;for(let xe=0,_e=he.length;xe<_e;xe++)he[xe]=0}function P(he){A(he,0)}function A(he,xe){let be=c.enabledAttributes,me=c.attributeDivisors;c.newAttributes[he]=1,0===be[he]&&(e.enableVertexAttribArray(he),be[he]=1),me[he]!==xe&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](he,xe),me[he]=xe)}function D(){let he=c.newAttributes,xe=c.enabledAttributes;for(let _e=0,be=xe.length;_e<be;_e++)xe[_e]!==he[_e]&&(e.disableVertexAttribArray(_e),xe[_e]=0)}function R(he,xe,_e,be,me,Te){!0!==i.isWebGL2||5124!==_e&&5125!==_e?e.vertexAttribPointer(he,xe,_e,be,me,Te):e.vertexAttribIPointer(he,xe,_e,me,Te)}function le(){ae(),d=!0,c!==l&&(c=l,p(c.object))}function ae(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function h(he,xe,_e,be,me){let Te=!1;if(o){let Le=function v(he,xe,_e){let be=!0===_e.wireframe,me=a[he.id];void 0===me&&(me={},a[he.id]=me);let Te=me[xe.id];void 0===Te&&(Te={},me[xe.id]=Te);let Le=Te[be];return void 0===Le&&(Le=g(function u(){return i.isWebGL2?e.createVertexArray():s.createVertexArrayOES()}()),Te[be]=Le),Le}(be,_e,xe);c!==Le&&(c=Le,p(c.object)),Te=function b(he,xe,_e,be){let me=c.attributes,Te=xe.attributes,Le=0,ke=_e.getAttributes();for(let Re in ke)if(ke[Re].location>=0){let Qe=me[Re],Pe=Te[Re];if(void 0===Pe&&("instanceMatrix"===Re&&he.instanceMatrix&&(Pe=he.instanceMatrix),"instanceColor"===Re&&he.instanceColor&&(Pe=he.instanceColor)),void 0===Qe||Qe.attribute!==Pe||Pe&&Qe.data!==Pe.data)return!0;Le++}return c.attributesNum!==Le||c.index!==be}(he,be,_e,me),Te&&function x(he,xe,_e,be){let me={},Te=xe.attributes,Le=0,ke=_e.getAttributes();for(let Re in ke)if(ke[Re].location>=0){let Qe=Te[Re];void 0===Qe&&("instanceMatrix"===Re&&he.instanceMatrix&&(Qe=he.instanceMatrix),"instanceColor"===Re&&he.instanceColor&&(Qe=he.instanceColor));let Pe={};Pe.attribute=Qe,Qe&&Qe.data&&(Pe.data=Qe.data),me[Re]=Pe,Le++}c.attributes=me,c.attributesNum=Le,c.index=be}(he,be,_e,me)}else{let Le=!0===xe.wireframe;(c.geometry!==be.id||c.program!==_e.id||c.wireframe!==Le)&&(c.geometry=be.id,c.program=_e.id,c.wireframe=Le,Te=!0)}null!==me&&n.update(me,34963),(Te||d)&&(d=!1,function N(he,xe,_e,be){if(!1===i.isWebGL2&&(he.isInstancedMesh||be.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;w();let me=be.attributes,Te=_e.getAttributes(),Le=xe.defaultAttributeValues;for(let ke in Te){let Re=Te[ke];if(Re.location>=0){let Qe=me[ke];if(void 0===Qe&&("instanceMatrix"===ke&&he.instanceMatrix&&(Qe=he.instanceMatrix),"instanceColor"===ke&&he.instanceColor&&(Qe=he.instanceColor)),void 0!==Qe){let Pe=Qe.normalized,Be=Qe.itemSize,Fe=n.get(Qe);if(void 0===Fe)continue;let Ze=Fe.buffer,$e=Fe.type,ft=Fe.bytesPerElement;if(Qe.isInterleavedBufferAttribute){let it=Qe.data,Nt=it.stride,nt=Qe.offset;if(it.isInstancedInterleavedBuffer){for(let st=0;st<Re.locationSize;st++)A(Re.location+st,it.meshPerAttribute);!0!==he.isInstancedMesh&&void 0===be._maxInstanceCount&&(be._maxInstanceCount=it.meshPerAttribute*it.count)}else for(let st=0;st<Re.locationSize;st++)P(Re.location+st);e.bindBuffer(34962,Ze);for(let st=0;st<Re.locationSize;st++)R(Re.location+st,Be/Re.locationSize,$e,Pe,Nt*ft,(nt+Be/Re.locationSize*st)*ft)}else{if(Qe.isInstancedBufferAttribute){for(let it=0;it<Re.locationSize;it++)A(Re.location+it,Qe.meshPerAttribute);!0!==he.isInstancedMesh&&void 0===be._maxInstanceCount&&(be._maxInstanceCount=Qe.meshPerAttribute*Qe.count)}else for(let it=0;it<Re.locationSize;it++)P(Re.location+it);e.bindBuffer(34962,Ze);for(let it=0;it<Re.locationSize;it++)R(Re.location+it,Be/Re.locationSize,$e,Pe,Be*ft,Be/Re.locationSize*it*ft)}}else if(void 0!==Le){let Pe=Le[ke];if(void 0!==Pe)switch(Pe.length){case 2:e.vertexAttrib2fv(Re.location,Pe);break;case 3:e.vertexAttrib3fv(Re.location,Pe);break;case 4:e.vertexAttrib4fv(Re.location,Pe);break;default:e.vertexAttrib1fv(Re.location,Pe)}}}}D()}(he,xe,_e,be),null!==me&&e.bindBuffer(34963,n.get(me).buffer))},reset:le,resetDefaultState:ae,dispose:function k(){le();for(let he in a){let xe=a[he];for(let _e in xe){let be=xe[_e];for(let me in be)m(be[me].object),delete be[me];delete xe[_e]}delete a[he]}},releaseStatesOfGeometry:function L(he){if(void 0===a[he.id])return;let xe=a[he.id];for(let _e in xe){let be=xe[_e];for(let me in be)m(be[me].object),delete be[me];delete xe[_e]}delete a[he.id]},releaseStatesOfProgram:function Q(he){for(let xe in a){let _e=a[xe];if(void 0===_e[he.id])continue;let be=_e[he.id];for(let me in be)m(be[me].object),delete be[me];delete _e[he.id]}},initAttributes:w,enableAttribute:P,disableUnusedAttributes:D}}function Oke(e,t,n,i){let s,r=i.isWebGL2;this.setMode=function o(c){s=c},this.render=function a(c,d){e.drawArrays(s,c,d),n.update(d,s,1)},this.renderInstances=function l(c,d,h){if(0===h)return;let u,p;if(r)u=e,p="drawArraysInstanced";else if(u=t.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",null===u)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[p](s,c,d,h),n.update(d,s,h)}}function Ake(e,t,n){let i;function s(R){if("highp"===R){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";R="mediump"}return"mediump"===R&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let o=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,a=void 0!==n.precision?n.precision:"highp",l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);let c=o||t.has("WEBGL_draw_buffers"),d=!0===n.logarithmicDepthBuffer,h=e.getParameter(34930),u=e.getParameter(35660),p=e.getParameter(3379),m=e.getParameter(34076),v=e.getParameter(34921),g=e.getParameter(36347),b=e.getParameter(36348),x=e.getParameter(36349),w=u>0,P=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){let R=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:u,maxTextureSize:p,maxCubemapSize:m,maxAttributes:v,maxVertexUniforms:g,maxVaryings:b,maxFragmentUniforms:x,vertexTextures:w,floatFragmentTextures:P,floatVertexTextures:w&&P,maxSamples:o?e.getParameter(36183):0}}function Tke(e){let t=this,n=null,i=0,r=!1,s=!1,o=new Gd,a=new ia,l={value:null,needsUpdate:!1};function d(h,u,p,m){let v=null!==h?h.length:0,g=null;if(0!==v){if(g=l.value,!0!==m||null===g){let b=p+4*v,x=u.matrixWorldInverse;a.getNormalMatrix(x),(null===g||g.length<b)&&(g=new Float32Array(b));for(let w=0,P=p;w!==v;++w,P+=4)o.copy(h[w]).applyMatrix4(x,a),o.normal.toArray(g,P),g[P+3]=o.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=v,t.numIntersection=0,g}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,u){let p=0!==h.length||u||0!==i||r;return r=u,i=h.length,p},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,u){n=d(h,u,0)},this.setState=function(h,u,p){let m=h.clippingPlanes,v=h.clipIntersection,g=h.clipShadows,b=e.get(h);if(!r||null===m||0===m.length||s&&!g)s?d(null):function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}();else{let x=s?0:i,w=4*x,P=b.clippingState||null;l.value=P,P=d(m,u,w,p);for(let A=0;A!==w;++A)P[A]=n[A];b.clippingState=P,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=x}}}function Dke(e){let t=new WeakMap;function n(o,a){return a===j4?o.mapping=Sv:a===H4&&(o.mapping=Ev),o}function r(o){let a=o.target;a.removeEventListener("dispose",r);let l=t.get(a);void 0!==l&&(t.delete(a),l.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){let a=o.mapping;if(a===j4||a===H4){if(t.has(o))return n(t.get(o).texture,o.mapping);{let l=o.image;if(l&&l.height>0){let c=new G3e(l.height/2);return c.fromEquirectangularTexture(e,o),t.set(o,c),o.addEventListener("dispose",r),n(c.texture,o.mapping)}return null}}}return o},dispose:function s(){t=new WeakMap}}}var OL=class extends L_{constructor(e=-1,t=1,n=1,i=-1,r=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,s=n+e,o=i+t,a=i-t;if(null!==this.view&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=l*this.view.offsetX,s=r+l*this.view.width,o-=c*this.view.offsetY,a=o-c*this.view.height}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}},$K=[.125,.215,.35,.446,.526,.582],AL=new OL,KK=new Di,TL=null,Fv=(1+Math.sqrt(5))/2,V_=1/Fv,ZK=[new oe(1,1,1),new oe(-1,1,1),new oe(1,1,-1),new oe(-1,1,-1),new oe(0,Fv,V_),new oe(0,Fv,-V_),new oe(V_,0,Fv),new oe(-V_,0,Fv),new oe(Fv,V_,0),new oe(-Fv,V_,0)],QK=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){TL=this._renderer.getRenderTarget(),this._setSize(256);let r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=tZ(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=eZ(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(TL),e.scissorTest=!1,wO(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===Sv||e.mapping===Ev?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),TL=this._renderer.getRenderTarget();let n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Or,minFilter:Or,generateMipmaps:!1,type:Ov,format:Vd,encoding:cp,depthBuffer:!1},i=JK(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=JK(e,t,n);let{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Ike(e){let t=[],n=[],i=[],r=e,s=e-4+1+$K.length;for(let o=0;o<s;o++){let a=Math.pow(2,r);n.push(a);let l=1/a;o>e-4?l=$K[o-e+4-1]:0===o&&(l=0),i.push(l);let c=1/(a-2),d=-c,h=1+c,u=[d,d,h,d,h,h,d,d,h,h,d,h],p=6,m=6,v=3,g=2,b=1,x=new Float32Array(v*m*p),w=new Float32Array(g*m*p),P=new Float32Array(b*m*p);for(let D=0;D<p;D++){let R=D%3*2/3-1,N=D>2?0:-1;x.set([R,N,0,R+2/3,N,0,R+2/3,N+1,0,R,N,0,R+2/3,N+1,0,R,N+1,0],v*m*D),w.set(u,g*m*D),P.set([D,D,D,D,D,D],b*m*D)}let A=new Pi;A.setAttribute("position",new Bi(x,v)),A.setAttribute("uv",new Bi(w,g)),A.setAttribute("faceIndex",new Bi(P,b)),t.push(A),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(r)),this._blurMaterial=function Rke(e,t,n){let i=new Float32Array(20),r=new oe(0,1,0);return new Ks({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:wa,depthTest:!1,depthWrite:!1})}(r,e,t)}return i}_compileMaterial(e){let t=new yc(this._lodPlanes[0],e);this._renderer.compile(t,AL)}_sceneToCubeUV(e,t,n,i){let r=new Wl(90,1,t,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.toneMapping;a.getClearColor(KK),a.toneMapping=kf,a.autoClear=!1;let d=new EM({name:"PMREM.Background",side:ll,depthWrite:!1,depthTest:!1}),h=new yc(new hp,d),u=!1,p=e.background;p?p.isColor&&(d.color.copy(p),e.background=null,u=!0):(d.color.copy(KK),u=!0);for(let m=0;m<6;m++){let v=m%3;0===v?(r.up.set(0,s[m],0),r.lookAt(o[m],0,0)):1===v?(r.up.set(0,0,s[m]),r.lookAt(0,o[m],0)):(r.up.set(0,s[m],0),r.lookAt(0,0,o[m]));let g=this._cubeSize;wO(i,v*g,m>2?g:0,g,g),a.setRenderTarget(i),u&&a.render(h,r),a.render(e,r)}h.geometry.dispose(),h.material.dispose(),a.toneMapping=c,a.autoClear=l,e.background=p}_textureToCubeUV(e,t){let n=this._renderer,i=e.mapping===Sv||e.mapping===Ev;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=tZ()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=eZ());let r=i?this._cubemapMaterial:this._equirectMaterial,s=new yc(this._lodPlanes[0],r);r.uniforms.envMap.value=e;let a=this._cubeSize;wO(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(s,AL)}_applyPMREM(e){let t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){let r=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]);this._blur(e,i-1,i,r,ZK[(i-1)%ZK.length])}t.autoClear=n}_blur(e,t,n,i,r){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,i,"latitudinal",r),this._halfBlur(s,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,s,o){let a=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");let d=new yc(this._lodPlanes[i],l),h=l.uniforms,u=this._sizeLods[n]-1,p=isFinite(r)?Math.PI/(2*u):2*Math.PI/39,m=r/p,v=isFinite(r)?1+Math.floor(3*m):20;v>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${v} samples when the maximum is set to 20`);let g=[],b=0;for(let D=0;D<20;++D){let R=D/m,N=Math.exp(-R*R/2);g.push(N),0===D?b+=N:D<v&&(b+=2*N)}for(let D=0;D<g.length;D++)g[D]=g[D]/b;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=g,h.latitudinal.value="latitudinal"===s,o&&(h.poleAxis.value=o);let{_lodMax:x}=this;h.dTheta.value=p,h.mipInt.value=x-n;let w=this._sizeLods[i];wO(t,3*w*(i>x-4?i-x+4:0),4*(this._cubeSize-w),3*w,2*w),a.setRenderTarget(t),a.render(d,AL)}};function JK(e,t,n){let i=new Ls(e,t,n);return i.texture.mapping=_M,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function wO(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function eZ(){return new Ks({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:wa,depthTest:!1,depthWrite:!1})}function tZ(){return new Ks({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:wa,depthTest:!1,depthWrite:!1})}function kke(e){let t=new WeakMap,n=null;function s(a){let l=a.target;l.removeEventListener("dispose",s);let c=t.get(l);void 0!==c&&(t.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){let l=a.mapping,c=l===j4||l===H4,d=l===Sv||l===Ev;if(c||d){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let h=t.get(a);return null===n&&(n=new QK(e)),h=c?n.fromEquirectangular(a,h):n.fromCubemap(a,h),t.set(a,h),h.texture}if(t.has(a))return t.get(a).texture;{let h=a.image;if(c&&h&&h.height>0||d&&h&&function r(a){let l=0;for(let d=0;d<6;d++)void 0!==a[d]&&l++;return 6===l}(h)){null===n&&(n=new QK(e));let u=c?n.fromEquirectangular(a):n.fromCubemap(a);return t.set(a,u),a.addEventListener("dispose",s),u.texture}return null}}}return a},dispose:function o(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Nke(e){let t={};function n(i){if(void 0!==t[i])return t[i];let r;switch(i){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(i)}return t[i]=r,r}return{has:function(i){return null!==n(i)},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){let r=n(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Lke(e,t,n,i){let r={},s=new WeakMap;function o(h){let u=h.target;null!==u.index&&t.remove(u.index);for(let m in u.attributes)t.remove(u.attributes[m]);u.removeEventListener("dispose",o),delete r[u.id];let p=s.get(u);p&&(t.remove(p),s.delete(u)),i.releaseStatesOfGeometry(u),!0===u.isInstancedBufferGeometry&&delete u._maxInstanceCount,n.memory.geometries--}function c(h){let u=[],p=h.index,m=h.attributes.position,v=0;if(null!==p){let x=p.array;v=p.version;for(let w=0,P=x.length;w<P;w+=3){let A=x[w+0],D=x[w+1],R=x[w+2];u.push(A,D,D,R,R,A)}}else{v=m.version;for(let w=0,P=m.array.length/3-1;w<P;w+=3){let A=w+0,D=w+1,R=w+2;u.push(A,D,D,R,R,A)}}let g=new(DK(u)?D_:WK)(u,1);g.version=v;let b=s.get(h);b&&t.remove(b),s.set(h,g)}return{get:function a(h,u){return!0===r[u.id]||(u.addEventListener("dispose",o),r[u.id]=!0,n.memory.geometries++),u},update:function l(h){let u=h.attributes;for(let m in u)t.update(u[m],34962);let p=h.morphAttributes;for(let m in p){let v=p[m];for(let g=0,b=v.length;g<b;g++)t.update(v[g],34962)}},getWireframeAttribute:function d(h){let u=s.get(h);if(u){let p=h.index;null!==p&&u.version<p.version&&c(h)}else c(h);return s.get(h)}}}function Fke(e,t,n,i){let s,a,l,r=i.isWebGL2;this.setMode=function o(u){s=u},this.setIndex=function c(u){a=u.type,l=u.bytesPerElement},this.render=function d(u,p){e.drawElements(s,p,a,u*l),n.update(p,s,1)},this.renderInstances=function h(u,p,m){if(0===m)return;let v,g;if(r)v=e,g="drawElementsInstanced";else if(v=t.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",null===v)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");v[g](s,p,a,u*l,m),n.update(p,s,m)}}function Bke(e){let n={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0},update:function i(s,o,a){switch(n.calls++,o){case 4:n.triangles+=a*(s/3);break;case 1:n.lines+=a*(s/2);break;case 3:n.lines+=a*(s-1);break;case 2:n.lines+=a*s;break;case 0:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function zke(e,t){return e[0]-t[0]}function Uke(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Vke(e,t,n){let i={},r=new Float32Array(8),s=new WeakMap,o=new mr,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,d,h,u){let p=c.morphTargetInfluences;if(!0===t.isWebGL2){let m=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,v=void 0!==m?m.length:0,g=s.get(d);if(void 0===g||g.count!==v){let w=function(){he.dispose(),s.delete(d),d.removeEventListener("dispose",w)};void 0!==g&&g.texture.dispose();let P=void 0!==d.morphAttributes.position,A=void 0!==d.morphAttributes.normal,D=void 0!==d.morphAttributes.color,R=d.morphAttributes.position||[],N=d.morphAttributes.normal||[],k=d.morphAttributes.color||[],L=0;!0===P&&(L=1),!0===A&&(L=2),!0===D&&(L=3);let Q=d.attributes.position.count*L,le=1;Q>t.maxTextureSize&&(le=Math.ceil(Q/t.maxTextureSize),Q=t.maxTextureSize);let ae=new Float32Array(Q*le*4*v),he=new NK(ae,Q,le,v);he.type=gc,he.needsUpdate=!0;let xe=4*L;for(let _e=0;_e<v;_e++){let be=R[_e],me=N[_e],Te=k[_e],Le=Q*le*4*_e;for(let ke=0;ke<be.count;ke++){let Re=ke*xe;!0===P&&(o.fromBufferAttribute(be,ke),ae[Le+Re+0]=o.x,ae[Le+Re+1]=o.y,ae[Le+Re+2]=o.z,ae[Le+Re+3]=0),!0===A&&(o.fromBufferAttribute(me,ke),ae[Le+Re+4]=o.x,ae[Le+Re+5]=o.y,ae[Le+Re+6]=o.z,ae[Le+Re+7]=0),!0===D&&(o.fromBufferAttribute(Te,ke),ae[Le+Re+8]=o.x,ae[Le+Re+9]=o.y,ae[Le+Re+10]=o.z,ae[Le+Re+11]=4===Te.itemSize?o.w:1)}}g={count:v,texture:he,size:new tt(Q,le)},s.set(d,g),d.addEventListener("dispose",w)}let b=0;for(let w=0;w<p.length;w++)b+=p[w];let x=d.morphTargetsRelative?1:1-b;u.getUniforms().setValue(e,"morphTargetBaseInfluence",x),u.getUniforms().setValue(e,"morphTargetInfluences",p),u.getUniforms().setValue(e,"morphTargetsTexture",g.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",g.size)}else{let m=void 0===p?0:p.length,v=i[d.id];if(void 0===v||v.length!==m){v=[];for(let P=0;P<m;P++)v[P]=[P,0];i[d.id]=v}for(let P=0;P<m;P++){let A=v[P];A[0]=P,A[1]=p[P]}v.sort(Uke);for(let P=0;P<8;P++)P<m&&v[P][1]?(a[P][0]=v[P][0],a[P][1]=v[P][1]):(a[P][0]=Number.MAX_SAFE_INTEGER,a[P][1]=0);a.sort(zke);let g=d.morphAttributes.position,b=d.morphAttributes.normal,x=0;for(let P=0;P<8;P++){let A=a[P],D=A[0],R=A[1];D!==Number.MAX_SAFE_INTEGER&&R?(g&&d.getAttribute("morphTarget"+P)!==g[D]&&d.setAttribute("morphTarget"+P,g[D]),b&&d.getAttribute("morphNormal"+P)!==b[D]&&d.setAttribute("morphNormal"+P,b[D]),r[P]=R,x+=R):(g&&!0===d.hasAttribute("morphTarget"+P)&&d.deleteAttribute("morphTarget"+P),b&&!0===d.hasAttribute("morphNormal"+P)&&d.deleteAttribute("morphNormal"+P),r[P]=0)}let w=d.morphTargetsRelative?1:1-x;u.getUniforms().setValue(e,"morphTargetBaseInfluence",w),u.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function jke(e,t,n,i){let r=new WeakMap;function a(l){let c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),null!==c.instanceColor&&n.remove(c.instanceColor)}return{update:function s(l){let c=i.render.frame,h=t.get(l,l.geometry);return r.get(h)!==c&&(t.update(h),r.set(h,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,34962),null!==l.instanceColor&&n.update(l.instanceColor,34962)),h},dispose:function o(){r=new WeakMap}}}var nZ=new Wa,iZ=new NK,rZ=new class extends Wa{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=eo,this.minFilter=eo,this.wrapR=na,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},sZ=new PL,oZ=[],aZ=[],lZ=new Float32Array(16),cZ=new Float32Array(9),dZ=new Float32Array(4);function j_(e,t,n){let i=e[0];if(i<=0||i>0)return e;let r=t*n,s=oZ[r];if(void 0===s&&(s=new Float32Array(r),oZ[r]=s),0!==t){i.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=n,e[o].toArray(s,a)}return s}function qa(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Xa(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function MO(e,t){let n=aZ[t];void 0===n&&(n=new Int32Array(t),aZ[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function Hke(e,t){let n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Gke(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(qa(n,t))return;e.uniform2fv(this.addr,t),Xa(n,t)}}function Wke(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(qa(n,t))return;e.uniform3fv(this.addr,t),Xa(n,t)}}function qke(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(qa(n,t))return;e.uniform4fv(this.addr,t),Xa(n,t)}}function Xke(e,t){let n=this.cache,i=t.elements;if(void 0===i){if(qa(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Xa(n,t)}else{if(qa(n,i))return;dZ.set(i),e.uniformMatrix2fv(this.addr,!1,dZ),Xa(n,i)}}function Yke(e,t){let n=this.cache,i=t.elements;if(void 0===i){if(qa(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Xa(n,t)}else{if(qa(n,i))return;cZ.set(i),e.uniformMatrix3fv(this.addr,!1,cZ),Xa(n,i)}}function $ke(e,t){let n=this.cache,i=t.elements;if(void 0===i){if(qa(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Xa(n,t)}else{if(qa(n,i))return;lZ.set(i),e.uniformMatrix4fv(this.addr,!1,lZ),Xa(n,i)}}function Kke(e,t){let n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Zke(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(qa(n,t))return;e.uniform2iv(this.addr,t),Xa(n,t)}}function Qke(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(qa(n,t))return;e.uniform3iv(this.addr,t),Xa(n,t)}}function Jke(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(qa(n,t))return;e.uniform4iv(this.addr,t),Xa(n,t)}}function eNe(e,t){let n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function tNe(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(qa(n,t))return;e.uniform2uiv(this.addr,t),Xa(n,t)}}function nNe(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(qa(n,t))return;e.uniform3uiv(this.addr,t),Xa(n,t)}}function iNe(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(qa(n,t))return;e.uniform4uiv(this.addr,t),Xa(n,t)}}function rNe(e,t,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(t||nZ,r)}function sNe(e,t,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||rZ,r)}function oNe(e,t,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||sZ,r)}function aNe(e,t,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||iZ,r)}function cNe(e,t){e.uniform1fv(this.addr,t)}function dNe(e,t){let n=j_(t,this.size,2);e.uniform2fv(this.addr,n)}function hNe(e,t){let n=j_(t,this.size,3);e.uniform3fv(this.addr,n)}function uNe(e,t){let n=j_(t,this.size,4);e.uniform4fv(this.addr,n)}function pNe(e,t){let n=j_(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function fNe(e,t){let n=j_(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function mNe(e,t){let n=j_(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function gNe(e,t){e.uniform1iv(this.addr,t)}function vNe(e,t){e.uniform2iv(this.addr,t)}function yNe(e,t){e.uniform3iv(this.addr,t)}function _Ne(e,t){e.uniform4iv(this.addr,t)}function bNe(e,t){e.uniform1uiv(this.addr,t)}function xNe(e,t){e.uniform2uiv(this.addr,t)}function wNe(e,t){e.uniform3uiv(this.addr,t)}function MNe(e,t){e.uniform4uiv(this.addr,t)}function CNe(e,t,n){let i=this.cache,r=t.length,s=MO(n,r);qa(i,s)||(e.uniform1iv(this.addr,s),Xa(i,s));for(let o=0;o!==r;++o)n.setTexture2D(t[o]||nZ,s[o])}function PNe(e,t,n){let i=this.cache,r=t.length,s=MO(n,r);qa(i,s)||(e.uniform1iv(this.addr,s),Xa(i,s));for(let o=0;o!==r;++o)n.setTexture3D(t[o]||rZ,s[o])}function SNe(e,t,n){let i=this.cache,r=t.length,s=MO(n,r);qa(i,s)||(e.uniform1iv(this.addr,s),Xa(i,s));for(let o=0;o!==r;++o)n.setTextureCube(t[o]||sZ,s[o])}function ENe(e,t,n){let i=this.cache,r=t.length,s=MO(n,r);qa(i,s)||(e.uniform1iv(this.addr,s),Xa(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(t[o]||iZ,s[o])}var ANe=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function lNe(e){switch(e){case 5126:return Hke;case 35664:return Gke;case 35665:return Wke;case 35666:return qke;case 35674:return Xke;case 35675:return Yke;case 35676:return $ke;case 5124:case 35670:return Kke;case 35667:case 35671:return Zke;case 35668:case 35672:return Qke;case 35669:case 35673:return Jke;case 5125:return eNe;case 36294:return tNe;case 36295:return nNe;case 36296:return iNe;case 35678:case 36198:case 36298:case 36306:case 35682:return rNe;case 35679:case 36299:case 36307:return sNe;case 35680:case 36300:case 36308:case 36293:return oNe;case 36289:case 36303:case 36311:case 36292:return aNe}}(t.type)}},TNe=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function ONe(e){switch(e){case 5126:return cNe;case 35664:return dNe;case 35665:return hNe;case 35666:return uNe;case 35674:return pNe;case 35675:return fNe;case 35676:return mNe;case 5124:case 35670:return gNe;case 35667:case 35671:return vNe;case 35668:case 35672:return yNe;case 35669:case 35673:return _Ne;case 5125:return bNe;case 36294:return xNe;case 36295:return wNe;case 36296:return MNe;case 35678:case 36198:case 36298:case 36306:case 35682:return CNe;case 35679:case 36299:case 36307:return PNe;case 35680:case 36300:case 36308:case 36293:return SNe;case 36289:case 36303:case 36311:case 36292:return ENe}}(t.type)}},DNe=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){let i=this.seq;for(let r=0,s=i.length;r!==s;++r){let o=i[r];o.setValue(e,t[o.id],n)}}},IL=/(\w+)(\])?(\[|\.)?/g;function hZ(e,t){e.seq.push(t),e.map[t.id]=t}function INe(e,t,n){let i=e.name,r=i.length;for(IL.lastIndex=0;;){let s=IL.exec(i),a=s[1],c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&IL.lastIndex+2===r){hZ(n,void 0===c?new ANe(a,e,t):new TNe(a,e,t));break}{let d=n.map[a];void 0===d&&(d=new DNe(a),hZ(n,d)),n=d}}}var CO=class{constructor(e,t){this.seq=[],this.map={};let n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){let r=e.getActiveUniform(t,i);INe(r,e.getUniformLocation(t,r.name),this)}}setValue(e,t,n,i){let r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){let i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,s=t.length;r!==s;++r){let o=t[r],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,i)}}static seqWithValue(e,t){let n=[];for(let i=0,r=e.length;i!==r;++i){let s=e[i];s.id in t&&n.push(s)}return n}};function uZ(e,t,n){let i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}var RNe=0;function pZ(e,t,n){let i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";let s=/ERROR: 0:(\d+)/.exec(r);if(s){let o=parseInt(s[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function kNe(e,t){let n=e.split("\n"),i=[],r=Math.max(t-6,0),s=Math.min(t+6,n.length);for(let o=r;o<s;o++){let a=o+1;i.push(`${a===t?">":" "} ${a}: ${n[o]}`)}return i.join("\n")}(e.getShaderSource(t),o)}return r}function LNe(e,t){let n=function NNe(e){switch(e){case cp:return["Linear","( value )"];case fr:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function FNe(e,t){let n;switch(t){case HDe:n="Linear";break;case GDe:n="Reinhard";break;case WDe:n="OptimizedCineon";break;case qDe:n="ACESFilmic";break;case XDe:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function IM(e){return""!==e}function fZ(e,t){let n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function mZ(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var VNe=/^[ \t]*#include +<([\w\d./]+)>/gm;function RL(e){return e.replace(VNe,jNe)}function jNe(e,t){let n=yr[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return RL(n)}var HNe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function gZ(e){return e.replace(HNe,GNe)}function GNe(e,t,n,i){let r="";for(let s=parseInt(t);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function vZ(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function KNe(e,t,n,i){let g,b,r=e.getContext(),s=n.defines,o=n.vertexShader,a=n.fragmentShader,l=function WNe(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===U4?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===xDe?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===yM&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function qNe(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Sv:case Ev:t="ENVMAP_TYPE_CUBE";break;case _M:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),d=function XNe(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===Ev&&(t="ENVMAP_MODE_REFRACTION"),t}(n),h=function YNe(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Z$:t="ENVMAP_BLENDING_MULTIPLY";break;case VDe:t="ENVMAP_BLENDING_MIX";break;case jDe:t="ENVMAP_BLENDING_ADD"}return t}(n),u=function $Ne(e){let t=e.envMapCubeUVHeight;if(null===t)return null;let n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),p=n.isWebGL2?"":function BNe(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(IM).join("\n")}(n),m=function zNe(e){let t=[];for(let n in e){let i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(s),v=r.createProgram(),x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[m].filter(IM).join("\n"),g.length>0&&(g+="\n"),b=[p,m].filter(IM).join("\n"),b.length>0&&(b+="\n")):(g=[vZ(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(IM).join("\n"),b=[p,vZ(n),"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",u?"#define CUBEUV_TEXEL_WIDTH "+u.texelWidth:"",u?"#define CUBEUV_TEXEL_HEIGHT "+u.texelHeight:"",u?"#define CUBEUV_MAX_MIP "+u.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==kf?"#define TONE_MAPPING":"",n.toneMapping!==kf?yr.tonemapping_pars_fragment:"",n.toneMapping!==kf?FNe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",yr.encodings_pars_fragment,LNe("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(IM).join("\n")),o=RL(o),o=fZ(o,n),o=mZ(o,n),a=RL(a),a=fZ(a,n),a=mZ(a,n),o=gZ(o),a=gZ(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,b=["#define varying in",n.glslVersion===OK?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===OK?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);let R,N,P=x+b+a,A=uZ(r,35633,x+g+o),D=uZ(r,35632,P);if(r.attachShader(v,A),r.attachShader(v,D),void 0!==n.index0AttributeName?r.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),e.debug.checkShaderErrors){let k=r.getProgramInfoLog(v).trim(),L=r.getShaderInfoLog(A).trim(),Q=r.getShaderInfoLog(D).trim(),le=!0,ae=!0;if(!1===r.getProgramParameter(v,35714)){le=!1;let he=pZ(r,A,"vertex"),xe=pZ(r,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,35715)+"\n\nProgram Info Log: "+k+"\n"+he+"\n"+xe)}else""!==k?console.warn("THREE.WebGLProgram: Program Info Log:",k):(""===L||""===Q)&&(ae=!1);ae&&(this.diagnostics={runnable:le,programLog:k,vertexShader:{log:L,prefix:g},fragmentShader:{log:Q,prefix:b}})}return r.deleteShader(A),r.deleteShader(D),this.getUniforms=function(){return void 0===R&&(R=new CO(r,v)),R},this.getAttributes=function(){return void 0===N&&(N=function UNe(e,t){let n={},i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){let s=e.getActiveAttrib(t,r),o=s.name,a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),n[o]={type:s.type,location:e.getAttribLocation(t,o),locationSize:a}}return n}(r,v)),N},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=RNe++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=A,this.fragmentShader=D,this}var ZNe=0,QNe=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let n=e.fragmentShader,i=this._getShaderStage(e.vertexShader),r=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){let t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new JNe(e),t.set(e,n)),n}},JNe=class{constructor(e){this.id=ZNe++,this.code=e,this.usedTimes=0}};function e4e(e,t,n,i,r,s,o){let a=new gL,l=new QNe,c=[],d=r.isWebGL2,h=r.logarithmicDepthBuffer,u=r.vertexTextures,p=r.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function v(N,k,L,Q,le){let ae=Q.fog,he=le.geometry,_e=(N.isMeshStandardMaterial?n:t).get(N.envMap||(N.isMeshStandardMaterial?Q.environment:null)),be=_e&&_e.mapping===_M?_e.image.height:null,me=m[N.type];null!==N.precision&&(p=r.getMaxPrecision(N.precision),p!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",p,"instead."));let Re,Qe,Pe,Be,Te=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,Le=void 0!==Te?Te.length:0,ke=0;if(void 0!==he.morphAttributes.position&&(ke=1),void 0!==he.morphAttributes.normal&&(ke=2),void 0!==he.morphAttributes.color&&(ke=3),me){let it=up[me];Re=it.vertexShader,Qe=it.fragmentShader}else Re=N.vertexShader,Qe=N.fragmentShader,l.update(N),Pe=l.getVertexShaderID(N),Be=l.getFragmentShaderID(N);let Fe=e.getRenderTarget(),$e=N.clearcoat>0,ft=N.iridescence>0;return{isWebGL2:d,shaderID:me,shaderName:N.type,vertexShader:Re,fragmentShader:Qe,defines:N.defines,customVertexShaderID:Pe,customFragmentShaderID:Be,isRawShaderMaterial:!0===N.isRawShaderMaterial,glslVersion:N.glslVersion,precision:p,instancing:!0===le.isInstancedMesh,instancingColor:!0===le.isInstancedMesh&&null!==le.instanceColor,supportsVertexTextures:u,outputEncoding:null===Fe?e.outputEncoding:!0===Fe.isXRRenderTarget?Fe.texture.encoding:cp,map:!!N.map,matcap:!!N.matcap,envMap:!!_e,envMapMode:_e&&_e.mapping,envMapCubeUVHeight:be,lightMap:!!N.lightMap,aoMap:!!N.aoMap,emissiveMap:!!N.emissiveMap,bumpMap:!!N.bumpMap,normalMap:!!N.normalMap,objectSpaceNormalMap:N.normalMapType===d3e,tangentSpaceNormalMap:N.normalMapType===c3e,decodeVideoTexture:!!N.map&&!0===N.map.isVideoTexture&&N.map.encoding===fr,clearcoat:$e,clearcoatMap:$e&&!!N.clearcoatMap,clearcoatRoughnessMap:$e&&!!N.clearcoatRoughnessMap,clearcoatNormalMap:$e&&!!N.clearcoatNormalMap,iridescence:ft,iridescenceMap:ft&&!!N.iridescenceMap,iridescenceThicknessMap:ft&&!!N.iridescenceThicknessMap,displacementMap:!!N.displacementMap,roughnessMap:!!N.roughnessMap,metalnessMap:!!N.metalnessMap,specularMap:!!N.specularMap,specularIntensityMap:!!N.specularIntensityMap,specularColorMap:!!N.specularColorMap,opaque:!1===N.transparent&&N.blending===Pv,alphaMap:!!N.alphaMap,alphaTest:N.alphaTest>0,gradientMap:!!N.gradientMap,sheen:N.sheen>0,sheenColorMap:!!N.sheenColorMap,sheenRoughnessMap:!!N.sheenRoughnessMap,transmission:N.transmission>0,transmissionMap:!!N.transmissionMap,thicknessMap:!!N.thicknessMap,combine:N.combine,vertexTangents:!!N.normalMap&&!!he.attributes.tangent,vertexColors:N.vertexColors,vertexAlphas:!0===N.vertexColors&&!!he.attributes.color&&4===he.attributes.color.itemSize,vertexUvs:!!(N.map||N.bumpMap||N.normalMap||N.specularMap||N.alphaMap||N.emissiveMap||N.roughnessMap||N.metalnessMap||N.clearcoatMap||N.clearcoatRoughnessMap||N.clearcoatNormalMap||N.iridescenceMap||N.iridescenceThicknessMap||N.displacementMap||N.transmissionMap||N.thicknessMap||N.specularIntensityMap||N.specularColorMap||N.sheenColorMap||N.sheenRoughnessMap),uvsVertexOnly:!(N.map||N.bumpMap||N.normalMap||N.specularMap||N.alphaMap||N.emissiveMap||N.roughnessMap||N.metalnessMap||N.clearcoatNormalMap||N.iridescenceMap||N.iridescenceThicknessMap||N.transmission>0||N.transmissionMap||N.thicknessMap||N.specularIntensityMap||N.specularColorMap||N.sheen>0||N.sheenColorMap||N.sheenRoughnessMap||!N.displacementMap),fog:!!ae,useFog:!0===N.fog,fogExp2:ae&&ae.isFogExp2,flatShading:!!N.flatShading,sizeAttenuation:N.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===le.isSkinnedMesh,morphTargets:void 0!==he.morphAttributes.position,morphNormals:void 0!==he.morphAttributes.normal,morphColors:void 0!==he.morphAttributes.color,morphTargetsCount:Le,morphTextureStride:ke,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:N.dithering,shadowMapEnabled:e.shadowMap.enabled&&L.length>0,shadowMapType:e.shadowMap.type,toneMapping:N.toneMapped?e.toneMapping:kf,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===Yc,flipSided:N.side===ll,useDepthPacking:!!N.depthPacking,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionDerivatives:N.extensions&&N.extensions.derivatives,extensionFragDepth:N.extensions&&N.extensions.fragDepth,extensionDrawBuffers:N.extensions&&N.extensions.drawBuffers,extensionShaderTextureLOD:N.extensions&&N.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),customProgramCacheKey:N.customProgramCacheKey()}},getProgramCacheKey:function g(N){let k=[];if(N.shaderID?k.push(N.shaderID):(k.push(N.customVertexShaderID),k.push(N.customFragmentShaderID)),void 0!==N.defines)for(let L in N.defines)k.push(L),k.push(N.defines[L]);return!1===N.isRawShaderMaterial&&(function b(N,k){N.push(k.precision),N.push(k.outputEncoding),N.push(k.envMapMode),N.push(k.envMapCubeUVHeight),N.push(k.combine),N.push(k.vertexUvs),N.push(k.fogExp2),N.push(k.sizeAttenuation),N.push(k.morphTargetsCount),N.push(k.morphAttributeCount),N.push(k.numDirLights),N.push(k.numPointLights),N.push(k.numSpotLights),N.push(k.numSpotLightMaps),N.push(k.numHemiLights),N.push(k.numRectAreaLights),N.push(k.numDirLightShadows),N.push(k.numPointLightShadows),N.push(k.numSpotLightShadows),N.push(k.numSpotLightShadowsWithMaps),N.push(k.shadowMapType),N.push(k.toneMapping),N.push(k.numClippingPlanes),N.push(k.numClipIntersection),N.push(k.depthPacking)}(k,N),function x(N,k){a.disableAll(),k.isWebGL2&&a.enable(0),k.supportsVertexTextures&&a.enable(1),k.instancing&&a.enable(2),k.instancingColor&&a.enable(3),k.map&&a.enable(4),k.matcap&&a.enable(5),k.envMap&&a.enable(6),k.lightMap&&a.enable(7),k.aoMap&&a.enable(8),k.emissiveMap&&a.enable(9),k.bumpMap&&a.enable(10),k.normalMap&&a.enable(11),k.objectSpaceNormalMap&&a.enable(12),k.tangentSpaceNormalMap&&a.enable(13),k.clearcoat&&a.enable(14),k.clearcoatMap&&a.enable(15),k.clearcoatRoughnessMap&&a.enable(16),k.clearcoatNormalMap&&a.enable(17),k.iridescence&&a.enable(18),k.iridescenceMap&&a.enable(19),k.iridescenceThicknessMap&&a.enable(20),k.displacementMap&&a.enable(21),k.specularMap&&a.enable(22),k.roughnessMap&&a.enable(23),k.metalnessMap&&a.enable(24),k.gradientMap&&a.enable(25),k.alphaMap&&a.enable(26),k.alphaTest&&a.enable(27),k.vertexColors&&a.enable(28),k.vertexAlphas&&a.enable(29),k.vertexUvs&&a.enable(30),k.vertexTangents&&a.enable(31),k.uvsVertexOnly&&a.enable(32),N.push(a.mask),a.disableAll(),k.fog&&a.enable(0),k.useFog&&a.enable(1),k.flatShading&&a.enable(2),k.logarithmicDepthBuffer&&a.enable(3),k.skinning&&a.enable(4),k.morphTargets&&a.enable(5),k.morphNormals&&a.enable(6),k.morphColors&&a.enable(7),k.premultipliedAlpha&&a.enable(8),k.shadowMapEnabled&&a.enable(9),k.physicallyCorrectLights&&a.enable(10),k.doubleSided&&a.enable(11),k.flipSided&&a.enable(12),k.useDepthPacking&&a.enable(13),k.dithering&&a.enable(14),k.specularIntensityMap&&a.enable(15),k.specularColorMap&&a.enable(16),k.transmission&&a.enable(17),k.transmissionMap&&a.enable(18),k.thicknessMap&&a.enable(19),k.sheen&&a.enable(20),k.sheenColorMap&&a.enable(21),k.sheenRoughnessMap&&a.enable(22),k.decodeVideoTexture&&a.enable(23),k.opaque&&a.enable(24),N.push(a.mask)}(k,N),k.push(e.outputEncoding)),k.push(N.customProgramCacheKey),k.join()},getUniforms:function w(N){let L,k=m[N.type];return L=k?N_.clone(up[k].uniforms):N.uniforms,L},acquireProgram:function P(N,k){let L;for(let Q=0,le=c.length;Q<le;Q++){let ae=c[Q];if(ae.cacheKey===k){L=ae,++L.usedTimes;break}}return void 0===L&&(L=new KNe(e,k,N,s),c.push(L)),L},releaseProgram:function A(N){if(0==--N.usedTimes){let k=c.indexOf(N);c[k]=c[c.length-1],c.pop(),N.destroy()}},releaseShaderCache:function D(N){l.remove(N)},programs:c,dispose:function R(){l.dispose()}}}function t4e(){let e=new WeakMap;return{get:function t(s){let o=e.get(s);return void 0===o&&(o={},e.set(s,o)),o},remove:function n(s){e.delete(s)},update:function i(s,o,a){e.get(s)[o]=a},dispose:function r(){e=new WeakMap}}}function n4e(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function yZ(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function _Z(){let e=[],t=0,n=[],i=[],r=[];function o(h,u,p,m,v,g){let b=e[t];return void 0===b?(b={id:h.id,object:h,geometry:u,material:p,groupOrder:m,renderOrder:h.renderOrder,z:v,group:g},e[t]=b):(b.id=h.id,b.object=h,b.geometry=u,b.material=p,b.groupOrder=m,b.renderOrder=h.renderOrder,b.z=v,b.group=g),t++,b}return{opaque:n,transmissive:i,transparent:r,init:function s(){t=0,n.length=0,i.length=0,r.length=0},push:function a(h,u,p,m,v,g){let b=o(h,u,p,m,v,g);p.transmission>0?i.push(b):!0===p.transparent?r.push(b):n.push(b)},unshift:function l(h,u,p,m,v,g){let b=o(h,u,p,m,v,g);p.transmission>0?i.unshift(b):!0===p.transparent?r.unshift(b):n.unshift(b)},finish:function d(){for(let h=t,u=e.length;h<u;h++){let p=e[h];if(null===p.id)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}},sort:function c(h,u){n.length>1&&n.sort(h||n4e),i.length>1&&i.sort(u||yZ),r.length>1&&r.sort(u||yZ)}}}function i4e(){let e=new WeakMap;return{get:function t(i,r){let o,s=e.get(i);return void 0===s?(o=new _Z,e.set(i,[o])):r>=s.length?(o=new _Z,s.push(o)):o=s[r],o},dispose:function n(){e=new WeakMap}}}function r4e(){let e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new oe,color:new Di};break;case"SpotLight":n={position:new oe,direction:new oe,color:new Di,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new oe,color:new Di,distance:0,decay:0};break;case"HemisphereLight":n={direction:new oe,skyColor:new Di,groundColor:new Di};break;case"RectAreaLight":n={color:new Di,position:new oe,halfWidth:new oe,halfHeight:new oe}}return e[t.id]=n,n}}}var o4e=0;function a4e(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function l4e(e,t){let n=new r4e,i=function s4e(){let e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)r.probe.push(new oe);let s=new oe,o=new vn,a=new vn;return{setup:function l(d,h){let u=0,p=0,m=0;for(let Q=0;Q<9;Q++)r.probe[Q].set(0,0,0);let v=0,g=0,b=0,x=0,w=0,P=0,A=0,D=0,R=0,N=0;d.sort(a4e);let k=!0!==h?Math.PI:1;for(let Q=0,le=d.length;Q<le;Q++){let ae=d[Q],he=ae.color,xe=ae.intensity,_e=ae.distance,be=ae.shadow&&ae.shadow.map?ae.shadow.map.texture:null;if(ae.isAmbientLight)u+=he.r*xe*k,p+=he.g*xe*k,m+=he.b*xe*k;else if(ae.isLightProbe)for(let me=0;me<9;me++)r.probe[me].addScaledVector(ae.sh.coefficients[me],xe);else if(ae.isDirectionalLight){let me=n.get(ae);if(me.color.copy(ae.color).multiplyScalar(ae.intensity*k),ae.castShadow){let Te=ae.shadow,Le=i.get(ae);Le.shadowBias=Te.bias,Le.shadowNormalBias=Te.normalBias,Le.shadowRadius=Te.radius,Le.shadowMapSize=Te.mapSize,r.directionalShadow[v]=Le,r.directionalShadowMap[v]=be,r.directionalShadowMatrix[v]=ae.shadow.matrix,P++}r.directional[v]=me,v++}else if(ae.isSpotLight){let me=n.get(ae);me.position.setFromMatrixPosition(ae.matrixWorld),me.color.copy(he).multiplyScalar(xe*k),me.distance=_e,me.coneCos=Math.cos(ae.angle),me.penumbraCos=Math.cos(ae.angle*(1-ae.penumbra)),me.decay=ae.decay,r.spot[b]=me;let Te=ae.shadow;if(ae.map&&(r.spotLightMap[R]=ae.map,R++,Te.updateMatrices(ae),ae.castShadow&&N++),r.spotLightMatrix[b]=Te.matrix,ae.castShadow){let Le=i.get(ae);Le.shadowBias=Te.bias,Le.shadowNormalBias=Te.normalBias,Le.shadowRadius=Te.radius,Le.shadowMapSize=Te.mapSize,r.spotShadow[b]=Le,r.spotShadowMap[b]=be,D++}b++}else if(ae.isRectAreaLight){let me=n.get(ae);me.color.copy(he).multiplyScalar(xe),me.halfWidth.set(.5*ae.width,0,0),me.halfHeight.set(0,.5*ae.height,0),r.rectArea[x]=me,x++}else if(ae.isPointLight){let me=n.get(ae);if(me.color.copy(ae.color).multiplyScalar(ae.intensity*k),me.distance=ae.distance,me.decay=ae.decay,ae.castShadow){let Te=ae.shadow,Le=i.get(ae);Le.shadowBias=Te.bias,Le.shadowNormalBias=Te.normalBias,Le.shadowRadius=Te.radius,Le.shadowMapSize=Te.mapSize,Le.shadowCameraNear=Te.camera.near,Le.shadowCameraFar=Te.camera.far,r.pointShadow[g]=Le,r.pointShadowMap[g]=be,r.pointShadowMatrix[g]=ae.shadow.matrix,A++}r.point[g]=me,g++}else if(ae.isHemisphereLight){let me=n.get(ae);me.skyColor.copy(ae.color).multiplyScalar(xe*k),me.groundColor.copy(ae.groundColor).multiplyScalar(xe*k),r.hemi[w]=me,w++}}x>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Fn.LTC_FLOAT_1,r.rectAreaLTC2=Fn.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Fn.LTC_HALF_1,r.rectAreaLTC2=Fn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=u,r.ambient[1]=p,r.ambient[2]=m;let L=r.hash;(L.directionalLength!==v||L.pointLength!==g||L.spotLength!==b||L.rectAreaLength!==x||L.hemiLength!==w||L.numDirectionalShadows!==P||L.numPointShadows!==A||L.numSpotShadows!==D||L.numSpotMaps!==R)&&(r.directional.length=v,r.spot.length=b,r.rectArea.length=x,r.point.length=g,r.hemi.length=w,r.directionalShadow.length=P,r.directionalShadowMap.length=P,r.pointShadow.length=A,r.pointShadowMap.length=A,r.spotShadow.length=D,r.spotShadowMap.length=D,r.directionalShadowMatrix.length=P,r.pointShadowMatrix.length=A,r.spotLightMatrix.length=D+R-N,r.spotLightMap.length=R,r.numSpotLightShadowsWithMaps=N,L.directionalLength=v,L.pointLength=g,L.spotLength=b,L.rectAreaLength=x,L.hemiLength=w,L.numDirectionalShadows=P,L.numPointShadows=A,L.numSpotShadows=D,L.numSpotMaps=R,r.version=o4e++)},setupView:function c(d,h){let u=0,p=0,m=0,v=0,g=0,b=h.matrixWorldInverse;for(let x=0,w=d.length;x<w;x++){let P=d[x];if(P.isDirectionalLight){let A=r.directional[u];A.direction.setFromMatrixPosition(P.matrixWorld),s.setFromMatrixPosition(P.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(b),u++}else if(P.isSpotLight){let A=r.spot[m];A.position.setFromMatrixPosition(P.matrixWorld),A.position.applyMatrix4(b),A.direction.setFromMatrixPosition(P.matrixWorld),s.setFromMatrixPosition(P.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(b),m++}else if(P.isRectAreaLight){let A=r.rectArea[v];A.position.setFromMatrixPosition(P.matrixWorld),A.position.applyMatrix4(b),a.identity(),o.copy(P.matrixWorld),o.premultiply(b),a.extractRotation(o),A.halfWidth.set(.5*P.width,0,0),A.halfHeight.set(0,.5*P.height,0),A.halfWidth.applyMatrix4(a),A.halfHeight.applyMatrix4(a),v++}else if(P.isPointLight){let A=r.point[p];A.position.setFromMatrixPosition(P.matrixWorld),A.position.applyMatrix4(b),p++}else if(P.isHemisphereLight){let A=r.hemi[g];A.direction.setFromMatrixPosition(P.matrixWorld),A.direction.transformDirection(b),g++}}},state:r}}function bZ(e,t){let n=new l4e(e,t),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function l(d){n.setup(i,d)},setupLightsView:function c(d){n.setupView(i,d)},pushLight:function o(d){i.push(d)},pushShadow:function a(d){r.push(d)}}}function c4e(e,t){let n=new WeakMap;return{get:function i(s,o=0){let l,a=n.get(s);return void 0===a?(l=new bZ(e,t),n.set(s,[l])):o>=a.length?(l=new bZ(e,t),a.push(l)):l=a[o],l},dispose:function r(){n=new WeakMap}}}var xZ=class extends SM{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ff,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},d4e=class extends SM{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new oe,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},h4e="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",u4e="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function p4e(e,t,n){let i=new EL,r=new tt,s=new tt,o=new mr,a=new xZ({depthPacking:EK}),l=new d4e,c={},d=n.maxTextureSize,h={[cu]:ll,[ll]:cu,[Yc]:Yc},u=new Ks({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new tt},radius:{value:4}},vertexShader:h4e,fragmentShader:u4e}),p=u.clone();p.defines.HORIZONTAL_PASS=1;let m=new Pi;m.setAttribute("position",new Bi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let v=new yc(m,u),g=this;function b(P,A){let D=t.update(v);u.defines.VSM_SAMPLES!==P.blurSamples&&(u.defines.VSM_SAMPLES=P.blurSamples,p.defines.VSM_SAMPLES=P.blurSamples,u.needsUpdate=!0,p.needsUpdate=!0),null===P.mapPass&&(P.mapPass=new Ls(r.x,r.y)),u.uniforms.shadow_pass.value=P.map.texture,u.uniforms.resolution.value=P.mapSize,u.uniforms.radius.value=P.radius,e.setRenderTarget(P.mapPass),e.clear(),e.renderBufferDirect(A,null,D,u,v,null),p.uniforms.shadow_pass.value=P.mapPass.texture,p.uniforms.resolution.value=P.mapSize,p.uniforms.radius.value=P.radius,e.setRenderTarget(P.map),e.clear(),e.renderBufferDirect(A,null,D,p,v,null)}function x(P,A,D,R,N,k){let L=null,Q=!0===D.isPointLight?P.customDistanceMaterial:P.customDepthMaterial;if(void 0!==Q)L=Q;else if(L=!0===D.isPointLight?l:a,e.localClippingEnabled&&!0===A.clipShadows&&Array.isArray(A.clippingPlanes)&&0!==A.clippingPlanes.length||A.displacementMap&&0!==A.displacementScale||A.alphaMap&&A.alphaTest>0||A.map&&A.alphaTest>0){let le=L.uuid,ae=A.uuid,he=c[le];void 0===he&&(he={},c[le]=he);let xe=he[ae];void 0===xe&&(xe=L.clone(),he[ae]=xe),L=xe}return L.visible=A.visible,L.wireframe=A.wireframe,L.side=k===yM?null!==A.shadowSide?A.shadowSide:A.side:null!==A.shadowSide?A.shadowSide:h[A.side],L.alphaMap=A.alphaMap,L.alphaTest=A.alphaTest,L.map=A.map,L.clipShadows=A.clipShadows,L.clippingPlanes=A.clippingPlanes,L.clipIntersection=A.clipIntersection,L.displacementMap=A.displacementMap,L.displacementScale=A.displacementScale,L.displacementBias=A.displacementBias,L.wireframeLinewidth=A.wireframeLinewidth,L.linewidth=A.linewidth,!0===D.isPointLight&&!0===L.isMeshDistanceMaterial&&(L.referencePosition.setFromMatrixPosition(D.matrixWorld),L.nearDistance=R,L.farDistance=N),L}function w(P,A,D,R,N){if(!1===P.visible)return;if(P.layers.test(A.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&N===yM)&&(!P.frustumCulled||i.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,P.matrixWorld);let L=t.update(P),Q=P.material;if(Array.isArray(Q)){let le=L.groups;for(let ae=0,he=le.length;ae<he;ae++){let xe=le[ae],_e=Q[xe.materialIndex];if(_e&&_e.visible){let be=x(P,_e,R,D.near,D.far,N);e.renderBufferDirect(D,null,L,be,P,xe)}}}else if(Q.visible){let le=x(P,Q,R,D.near,D.far,N);e.renderBufferDirect(D,null,L,le,P,null)}}let k=P.children;for(let L=0,Q=k.length;L<Q;L++)w(k[L],A,D,R,N)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=U4,this.render=function(P,A,D){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===P.length)return;let R=e.getRenderTarget(),N=e.getActiveCubeFace(),k=e.getActiveMipmapLevel(),L=e.state;L.setBlending(wa),L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);for(let Q=0,le=P.length;Q<le;Q++){let ae=P[Q],he=ae.shadow;if(void 0===he){console.warn("THREE.WebGLShadowMap:",ae,"has no shadow.");continue}if(!1===he.autoUpdate&&!1===he.needsUpdate)continue;r.copy(he.mapSize);let xe=he.getFrameExtents();r.multiply(xe),s.copy(he.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/xe.x),r.x=s.x*xe.x,he.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/xe.y),r.y=s.y*xe.y,he.mapSize.y=s.y)),null===he.map&&(he.map=new Ls(r.x,r.y,this.type!==yM?{minFilter:eo,magFilter:eo}:{}),he.map.texture.name=ae.name+".shadowMap",he.camera.updateProjectionMatrix()),e.setRenderTarget(he.map),e.clear();let _e=he.getViewportCount();for(let be=0;be<_e;be++){let me=he.getViewport(be);o.set(s.x*me.x,s.y*me.y,s.x*me.z,s.y*me.w),L.viewport(o),he.updateMatrices(ae,be),i=he.getFrustum(),w(A,D,he.camera,ae,this.type)}!0!==he.isPointLightShadow&&this.type===yM&&b(he,D),he.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(R,N,k)}}function f4e(e,t,n){let i=n.isWebGL2,a=new function r(){let Ce=!1,pt=new mr,rt=null,vt=new mr(0,0,0,0);return{setMask:function(an){rt!==an&&!Ce&&(e.colorMask(an,an,an,an),rt=an)},setLocked:function(an){Ce=an},setClear:function(an,wn,hi,Hr,wo){!0===wo&&(an*=Hr,wn*=Hr,hi*=Hr),pt.set(an,wn,hi,Hr),!1===vt.equals(pt)&&(e.clearColor(an,wn,hi,Hr),vt.copy(pt))},reset:function(){Ce=!1,rt=null,vt.set(-1,0,0,0)}}},l=new function s(){let Ce=!1,pt=null,rt=null,vt=null;return{setTest:function(an){an?Ze(2929):$e(2929)},setMask:function(an){pt!==an&&!Ce&&(e.depthMask(an),pt=an)},setFunc:function(an){if(rt!==an){switch(an){case kDe:e.depthFunc(512);break;case NDe:e.depthFunc(519);break;case LDe:e.depthFunc(513);break;case V4:e.depthFunc(515);break;case FDe:e.depthFunc(514);break;case BDe:e.depthFunc(518);break;case zDe:e.depthFunc(516);break;case UDe:e.depthFunc(517);break;default:e.depthFunc(515)}rt=an}},setLocked:function(an){Ce=an},setClear:function(an){vt!==an&&(e.clearDepth(an),vt=an)},reset:function(){Ce=!1,pt=null,rt=null,vt=null}}},c=new function o(){let Ce=!1,pt=null,rt=null,vt=null,an=null,wn=null,hi=null,Hr=null,wo=null;return{setTest:function(ki){Ce||(ki?Ze(2960):$e(2960))},setMask:function(ki){pt!==ki&&!Ce&&(e.stencilMask(ki),pt=ki)},setFunc:function(ki,ha,Go){(rt!==ki||vt!==ha||an!==Go)&&(e.stencilFunc(ki,ha,Go),rt=ki,vt=ha,an=Go)},setOp:function(ki,ha,Go){(wn!==ki||hi!==ha||Hr!==Go)&&(e.stencilOp(ki,ha,Go),wn=ki,hi=ha,Hr=Go)},setLocked:function(ki){Ce=ki},setClear:function(ki){wo!==ki&&(e.clearStencil(ki),wo=ki)},reset:function(){Ce=!1,pt=null,rt=null,vt=null,an=null,wn=null,hi=null,Hr=null,wo=null}}},d=new WeakMap,h=new WeakMap,u={},p={},m=new WeakMap,v=[],g=null,b=!1,x=null,w=null,P=null,A=null,D=null,R=null,N=null,k=!1,L=null,Q=null,le=null,ae=null,he=null,xe=e.getParameter(35661),_e=!1,be=0,me=e.getParameter(7938);-1!==me.indexOf("WebGL")?(be=parseFloat(/^WebGL (\d)/.exec(me)[1]),_e=be>=1):-1!==me.indexOf("OpenGL ES")&&(be=parseFloat(/^OpenGL ES (\d)/.exec(me)[1]),_e=be>=2);let Te=null,Le={},ke=e.getParameter(3088),Re=e.getParameter(2978),Qe=(new mr).fromArray(ke),Pe=(new mr).fromArray(Re);function Be(Ce,pt,rt){let vt=new Uint8Array(4),an=e.createTexture();e.bindTexture(Ce,an),e.texParameteri(Ce,10241,9728),e.texParameteri(Ce,10240,9728);for(let wn=0;wn<rt;wn++)e.texImage2D(pt+wn,0,6408,1,1,0,6408,5121,vt);return an}let Fe={};function Ze(Ce){!0!==u[Ce]&&(e.enable(Ce),u[Ce]=!0)}function $e(Ce){!1!==u[Ce]&&(e.disable(Ce),u[Ce]=!1)}Fe[3553]=Be(3553,3553,1),Fe[34067]=Be(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Ze(2929),l.setFunc(V4),wt(!1),Xt(H$),Ze(2884),Ie(wa);let nt={[y_]:32774,[MDe]:32778,[CDe]:32779};if(i)nt[X$]=32775,nt[Y$]=32776;else{let Ce=t.get("EXT_blend_minmax");null!==Ce&&(nt[X$]=Ce.MIN_EXT,nt[Y$]=Ce.MAX_EXT)}let st={[PDe]:0,[SDe]:1,[EDe]:768,[$$]:770,[RDe]:776,[DDe]:774,[ADe]:772,[ODe]:769,[K$]:771,[IDe]:775,[TDe]:773};function Ie(Ce,pt,rt,vt,an,wn,hi,Hr){if(Ce!==wa){if(!1===b&&(Ze(3042),b=!0),Ce===wDe)an=an||pt,wn=wn||rt,hi=hi||vt,(pt!==w||an!==D)&&(e.blendEquationSeparate(nt[pt],nt[an]),w=pt,D=an),(rt!==P||vt!==A||wn!==R||hi!==N)&&(e.blendFuncSeparate(st[rt],st[vt],st[wn],st[hi]),P=rt,A=vt,R=wn,N=hi),x=Ce,k=!1;else if(Ce!==x||Hr!==k){if((w!==y_||D!==y_)&&(e.blendEquation(32774),w=y_,D=y_),Hr)switch(Ce){case Pv:e.blendFuncSeparate(1,771,1,771);break;case G$:e.blendFunc(1,1);break;case W$:e.blendFuncSeparate(0,769,0,1);break;case q$:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce)}else switch(Ce){case Pv:e.blendFuncSeparate(770,771,1,771);break;case G$:e.blendFunc(770,1);break;case W$:e.blendFuncSeparate(0,769,0,1);break;case q$:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce)}P=null,A=null,R=null,N=null,x=Ce,k=Hr}}else!0===b&&($e(3042),b=!1)}function wt(Ce){L!==Ce&&(e.frontFace(Ce?2304:2305),L=Ce)}function Xt(Ce){Ce!==_De?(Ze(2884),Ce!==Q&&e.cullFace(Ce===H$?1029:Ce===bDe?1028:1032)):$e(2884),Q=Ce}function Wt(Ce,pt,rt){Ce?(Ze(32823),(ae!==pt||he!==rt)&&(e.polygonOffset(pt,rt),ae=pt,he=rt)):$e(32823)}return{buffers:{color:a,depth:l,stencil:c},enable:Ze,disable:$e,bindFramebuffer:function ft(Ce,pt){return p[Ce]!==pt&&(e.bindFramebuffer(Ce,pt),p[Ce]=pt,i&&(36009===Ce&&(p[36160]=pt),36160===Ce&&(p[36009]=pt)),!0)},drawBuffers:function it(Ce,pt){let rt=v,vt=!1;if(Ce)if(rt=m.get(pt),void 0===rt&&(rt=[],m.set(pt,rt)),Ce.isWebGLMultipleRenderTargets){let an=Ce.texture;if(rt.length!==an.length||36064!==rt[0]){for(let wn=0,hi=an.length;wn<hi;wn++)rt[wn]=36064+wn;rt.length=an.length,vt=!0}}else 36064!==rt[0]&&(rt[0]=36064,vt=!0);else 1029!==rt[0]&&(rt[0]=1029,vt=!0);vt&&(n.isWebGL2?e.drawBuffers(rt):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(rt))},useProgram:function Nt(Ce){return g!==Ce&&(e.useProgram(Ce),g=Ce,!0)},setBlending:Ie,setMaterial:function Yt(Ce,pt){Ce.side===Yc?$e(2884):Ze(2884);let rt=Ce.side===ll;pt&&(rt=!rt),wt(rt),Ce.blending===Pv&&!1===Ce.transparent?Ie(wa):Ie(Ce.blending,Ce.blendEquation,Ce.blendSrc,Ce.blendDst,Ce.blendEquationAlpha,Ce.blendSrcAlpha,Ce.blendDstAlpha,Ce.premultipliedAlpha),l.setFunc(Ce.depthFunc),l.setTest(Ce.depthTest),l.setMask(Ce.depthWrite),a.setMask(Ce.colorWrite);let vt=Ce.stencilWrite;c.setTest(vt),vt&&(c.setMask(Ce.stencilWriteMask),c.setFunc(Ce.stencilFunc,Ce.stencilRef,Ce.stencilFuncMask),c.setOp(Ce.stencilFail,Ce.stencilZFail,Ce.stencilZPass)),Wt(Ce.polygonOffset,Ce.polygonOffsetFactor,Ce.polygonOffsetUnits),!0===Ce.alphaToCoverage?Ze(32926):$e(32926)},setFlipSided:wt,setCullFace:Xt,setLineWidth:function Ct(Ce){Ce!==le&&(_e&&e.lineWidth(Ce),le=Ce)},setPolygonOffset:Wt,setScissorTest:function Qt(Ce){Ce?Ze(3089):$e(3089)},activeTexture:function Ae(Ce){void 0===Ce&&(Ce=33984+xe-1),Te!==Ce&&(e.activeTexture(Ce),Te=Ce)},bindTexture:function re(Ce,pt,rt){void 0===rt&&(rt=null===Te?33984+xe-1:Te);let vt=Le[rt];void 0===vt&&(vt={type:void 0,texture:void 0},Le[rt]=vt),(vt.type!==Ce||vt.texture!==pt)&&(Te!==rt&&(e.activeTexture(rt),Te=rt),e.bindTexture(Ce,pt||Fe[Ce]),vt.type=Ce,vt.texture=pt)},unbindTexture:function fe(){let Ce=Le[Te];void 0!==Ce&&void 0!==Ce.type&&(e.bindTexture(Ce.type,null),Ce.type=void 0,Ce.texture=void 0)},compressedTexImage2D:function He(){try{e.compressedTexImage2D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},compressedTexImage3D:function ut(){try{e.compressedTexImage3D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},texImage2D:function sn(){try{e.texImage2D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},texImage3D:function fn(){try{e.texImage3D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},updateUBOMapping:function ai(Ce,pt){let rt=h.get(pt);void 0===rt&&(rt=new WeakMap,h.set(pt,rt));let vt=rt.get(Ce);void 0===vt&&(vt=e.getUniformBlockIndex(pt,Ce.name),rt.set(Ce,vt))},uniformBlockBinding:function di(Ce,pt){let rt=h.get(pt).get(Ce);d.get(pt)!==rt&&(e.uniformBlockBinding(pt,rt,Ce.__bindingPointIndex),d.set(pt,rt))},texStorage2D:function Bt(){try{e.texStorage2D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},texStorage3D:function It(){try{e.texStorage3D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},texSubImage2D:function et(){try{e.texSubImage2D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},texSubImage3D:function Lt(){try{e.texSubImage3D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},compressedTexSubImage2D:function $t(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},compressedTexSubImage3D:function qt(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},scissor:function On(Ce){!1===Qe.equals(Ce)&&(e.scissor(Ce.x,Ce.y,Ce.z,Ce.w),Qe.copy(Ce))},viewport:function pn(Ce){!1===Pe.equals(Ce)&&(e.viewport(Ce.x,Ce.y,Ce.z,Ce.w),Pe.copy(Ce))},reset:function sr(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===i&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},Te=null,Le={},p={},m=new WeakMap,v=[],g=null,b=!1,x=null,w=null,P=null,A=null,D=null,R=null,N=null,k=!1,L=null,Q=null,le=null,ae=null,he=null,Qe.set(0,0,e.canvas.width,e.canvas.height),Pe.set(0,0,e.canvas.width,e.canvas.height),a.reset(),l.reset(),c.reset()}}}function m4e(e,t,n,i,r,s,o){let v,a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,d=r.maxTextureSize,h=r.maxSamples,u=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,g=new WeakMap,b=!1;try{b=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function x(re,fe){return b?new OffscreenCanvas(re,fe):nO("canvas")}function w(re,fe,He,ut){let et=1;if((re.width>ut||re.height>ut)&&(et=ut/Math.max(re.width,re.height)),et<1||!0===fe){if(typeof HTMLImageElement<"u"&&re instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&re instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&re instanceof ImageBitmap){let Lt=fe?eO:Math.floor,$t=Lt(et*re.width),qt=Lt(et*re.height);void 0===v&&(v=x($t,qt));let Bt=He?x($t,qt):v;return Bt.width=$t,Bt.height=qt,Bt.getContext("2d").drawImage(re,0,0,$t,qt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+re.width+"x"+re.height+") to ("+$t+"x"+qt+")."),Bt}return"data"in re&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+re.width+"x"+re.height+")."),re}return re}function P(re){return rL(re.width)&&rL(re.height)}function D(re,fe){return re.generateMipmaps&&fe&&re.minFilter!==eo&&re.minFilter!==Or}function R(re){e.generateMipmap(re)}function N(re,fe,He,ut,et=!1){if(!1===a)return fe;if(null!==re){if(void 0!==e[re])return e[re];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+re+"'")}let Lt=fe;return 6403===fe&&(5126===He&&(Lt=33326),5131===He&&(Lt=33325),5121===He&&(Lt=33321)),33319===fe&&(5126===He&&(Lt=33328),5131===He&&(Lt=33327),5121===He&&(Lt=33323)),6408===fe&&(5126===He&&(Lt=34836),5131===He&&(Lt=34842),5121===He&&(Lt=ut===fr&&!1===et?35907:32856),32819===He&&(Lt=32854),32820===He&&(Lt=32855)),(33325===Lt||33326===Lt||33327===Lt||33328===Lt||34842===Lt||34836===Lt)&&t.get("EXT_color_buffer_float"),Lt}function k(re,fe,He){return!0===D(re,He)||re.isFramebufferTexture&&re.minFilter!==eo&&re.minFilter!==Or?Math.log2(Math.max(fe.width,fe.height))+1:void 0!==re.mipmaps&&re.mipmaps.length>0?re.mipmaps.length:re.isCompressedTexture&&Array.isArray(re.image)?fe.mipmaps.length:1}function L(re){return re===eo||re===J$||re===W4?9728:9729}function Q(re){let fe=re.target;fe.removeEventListener("dispose",Q),function ae(re){let fe=i.get(re);if(void 0===fe.__webglInit)return;let He=re.source,ut=g.get(He);if(ut){let et=ut[fe.__cacheKey];et.usedTimes--,0===et.usedTimes&&he(re),0===Object.keys(ut).length&&g.delete(He)}i.remove(re)}(fe),fe.isVideoTexture&&m.delete(fe)}function le(re){let fe=re.target;fe.removeEventListener("dispose",le),function xe(re){let fe=re.texture,He=i.get(re),ut=i.get(fe);if(void 0!==ut.__webglTexture&&(e.deleteTexture(ut.__webglTexture),o.memory.textures--),re.depthTexture&&re.depthTexture.dispose(),re.isWebGLCubeRenderTarget)for(let et=0;et<6;et++)e.deleteFramebuffer(He.__webglFramebuffer[et]),He.__webglDepthbuffer&&e.deleteRenderbuffer(He.__webglDepthbuffer[et]);else{if(e.deleteFramebuffer(He.__webglFramebuffer),He.__webglDepthbuffer&&e.deleteRenderbuffer(He.__webglDepthbuffer),He.__webglMultisampledFramebuffer&&e.deleteFramebuffer(He.__webglMultisampledFramebuffer),He.__webglColorRenderbuffer)for(let et=0;et<He.__webglColorRenderbuffer.length;et++)He.__webglColorRenderbuffer[et]&&e.deleteRenderbuffer(He.__webglColorRenderbuffer[et]);He.__webglDepthRenderbuffer&&e.deleteRenderbuffer(He.__webglDepthRenderbuffer)}if(re.isWebGLMultipleRenderTargets)for(let et=0,Lt=fe.length;et<Lt;et++){let $t=i.get(fe[et]);$t.__webglTexture&&(e.deleteTexture($t.__webglTexture),o.memory.textures--),i.remove(fe[et])}i.remove(fe),i.remove(re)}(fe)}function he(re){let fe=i.get(re);e.deleteTexture(fe.__webglTexture),delete g.get(re.source)[fe.__cacheKey],o.memory.textures--}let _e=0;function Le(re,fe){let He=i.get(re);if(re.isVideoTexture&&function Qt(re){let fe=o.render.frame;m.get(re)!==fe&&(m.set(re,fe),re.update())}(re),!1===re.isRenderTargetTexture&&re.version>0&&He.__version!==re.version){let ut=re.image;if(null===ut)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==ut.complete)return void $e(He,re,fe);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,He.__webglTexture,33984+fe)}let Pe={[Nf]:10497,[na]:33071,[G4]:33648},Be={[eo]:9728,[J$]:9984,[W4]:9986,[Or]:9729,[YDe]:9985,[__]:9987};function Fe(re,fe,He){if(He?(e.texParameteri(re,10242,Pe[fe.wrapS]),e.texParameteri(re,10243,Pe[fe.wrapT]),(32879===re||35866===re)&&e.texParameteri(re,32882,Pe[fe.wrapR]),e.texParameteri(re,10240,Be[fe.magFilter]),e.texParameteri(re,10241,Be[fe.minFilter])):(e.texParameteri(re,10242,33071),e.texParameteri(re,10243,33071),(32879===re||35866===re)&&e.texParameteri(re,32882,33071),(fe.wrapS!==na||fe.wrapT!==na)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(re,10240,L(fe.magFilter)),e.texParameteri(re,10241,L(fe.minFilter)),fe.minFilter!==eo&&fe.minFilter!==Or&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){let ut=t.get("EXT_texture_filter_anisotropic");if(fe.magFilter===eo||fe.minFilter!==W4&&fe.minFilter!==__||fe.type===gc&&!1===t.has("OES_texture_float_linear")||!1===a&&fe.type===Ov&&!1===t.has("OES_texture_half_float_linear"))return;(fe.anisotropy>1||i.get(fe).__currentAnisotropy)&&(e.texParameterf(re,ut.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(fe.anisotropy,r.getMaxAnisotropy())),i.get(fe).__currentAnisotropy=fe.anisotropy)}}function Ze(re,fe){let He=!1;void 0===re.__webglInit&&(re.__webglInit=!0,fe.addEventListener("dispose",Q));let ut=fe.source,et=g.get(ut);void 0===et&&(et={},g.set(ut,et));let Lt=function Te(re){let fe=[];return fe.push(re.wrapS),fe.push(re.wrapT),fe.push(re.wrapR||0),fe.push(re.magFilter),fe.push(re.minFilter),fe.push(re.anisotropy),fe.push(re.internalFormat),fe.push(re.format),fe.push(re.type),fe.push(re.generateMipmaps),fe.push(re.premultiplyAlpha),fe.push(re.flipY),fe.push(re.unpackAlignment),fe.push(re.encoding),fe.join()}(fe);if(Lt!==re.__cacheKey){void 0===et[Lt]&&(et[Lt]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,He=!0),et[Lt].usedTimes++;let $t=et[re.__cacheKey];void 0!==$t&&(et[re.__cacheKey].usedTimes--,0===$t.usedTimes&&he(fe)),re.__cacheKey=Lt,re.__webglTexture=et[Lt].texture}return He}function $e(re,fe,He){let ut=3553;(fe.isDataArrayTexture||fe.isCompressedArrayTexture)&&(ut=35866),fe.isData3DTexture&&(ut=32879);let et=Ze(re,fe),Lt=fe.source;n.bindTexture(ut,re.__webglTexture,33984+He);let $t=i.get(Lt);if(Lt.version!==$t.__version||!0===et){n.activeTexture(33984+He),e.pixelStorei(37440,fe.flipY),e.pixelStorei(37441,fe.premultiplyAlpha),e.pixelStorei(3317,fe.unpackAlignment),e.pixelStorei(37443,0);let qt=function A(re){return!a&&(re.wrapS!==na||re.wrapT!==na||re.minFilter!==eo&&re.minFilter!==Or)}(fe)&&!1===P(fe.image),Bt=w(fe.image,qt,!1,d);Bt=Ae(fe,Bt);let It=P(Bt)||a,sn=s.convert(fe.format,fe.encoding),fn=s.convert(fe.type),On=N(fe.internalFormat,sn,fn,fe.encoding,fe.isVideoTexture);Fe(ut,fe,It);let pn,ai=fe.mipmaps,di=a&&!0!==fe.isVideoTexture,sr=void 0===$t.__version||!0===et,Ce=k(fe,Bt,It);if(fe.isDepthTexture)On=6402,a?On=fe.type===gc?36012:fe.type===Lf?33190:fe.type===Av?35056:33189:fe.type===gc&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),fe.format===Tv&&6402===On&&fe.type!==eK&&fe.type!==Lf&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),fe.type=Lf,fn=s.convert(fe.type)),fe.format===Dv&&6402===On&&(On=34041,fe.type!==Av&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),fe.type=Av,fn=s.convert(fe.type))),sr&&(di?n.texStorage2D(3553,1,On,Bt.width,Bt.height):n.texImage2D(3553,0,On,Bt.width,Bt.height,0,sn,fn,null));else if(fe.isDataTexture)if(ai.length>0&&It){di&&sr&&n.texStorage2D(3553,Ce,On,ai[0].width,ai[0].height);for(let pt=0,rt=ai.length;pt<rt;pt++)pn=ai[pt],di?n.texSubImage2D(3553,pt,0,0,pn.width,pn.height,sn,fn,pn.data):n.texImage2D(3553,pt,On,pn.width,pn.height,0,sn,fn,pn.data);fe.generateMipmaps=!1}else di?(sr&&n.texStorage2D(3553,Ce,On,Bt.width,Bt.height),n.texSubImage2D(3553,0,0,0,Bt.width,Bt.height,sn,fn,Bt.data)):n.texImage2D(3553,0,On,Bt.width,Bt.height,0,sn,fn,Bt.data);else if(fe.isCompressedTexture)if(fe.isCompressedArrayTexture){di&&sr&&n.texStorage3D(35866,Ce,On,ai[0].width,ai[0].height,Bt.depth);for(let pt=0,rt=ai.length;pt<rt;pt++)pn=ai[pt],fe.format!==Vd?null!==sn?di?n.compressedTexSubImage3D(35866,pt,0,0,0,pn.width,pn.height,Bt.depth,sn,pn.data,0,0):n.compressedTexImage3D(35866,pt,On,pn.width,pn.height,Bt.depth,0,pn.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):di?n.texSubImage3D(35866,pt,0,0,0,pn.width,pn.height,Bt.depth,sn,fn,pn.data):n.texImage3D(35866,pt,On,pn.width,pn.height,Bt.depth,0,sn,fn,pn.data)}else{di&&sr&&n.texStorage2D(3553,Ce,On,ai[0].width,ai[0].height);for(let pt=0,rt=ai.length;pt<rt;pt++)pn=ai[pt],fe.format!==Vd?null!==sn?di?n.compressedTexSubImage2D(3553,pt,0,0,pn.width,pn.height,sn,pn.data):n.compressedTexImage2D(3553,pt,On,pn.width,pn.height,0,pn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):di?n.texSubImage2D(3553,pt,0,0,pn.width,pn.height,sn,fn,pn.data):n.texImage2D(3553,pt,On,pn.width,pn.height,0,sn,fn,pn.data)}else if(fe.isDataArrayTexture)di?(sr&&n.texStorage3D(35866,Ce,On,Bt.width,Bt.height,Bt.depth),n.texSubImage3D(35866,0,0,0,0,Bt.width,Bt.height,Bt.depth,sn,fn,Bt.data)):n.texImage3D(35866,0,On,Bt.width,Bt.height,Bt.depth,0,sn,fn,Bt.data);else if(fe.isData3DTexture)di?(sr&&n.texStorage3D(32879,Ce,On,Bt.width,Bt.height,Bt.depth),n.texSubImage3D(32879,0,0,0,0,Bt.width,Bt.height,Bt.depth,sn,fn,Bt.data)):n.texImage3D(32879,0,On,Bt.width,Bt.height,Bt.depth,0,sn,fn,Bt.data);else if(fe.isFramebufferTexture){if(sr)if(di)n.texStorage2D(3553,Ce,On,Bt.width,Bt.height);else{let pt=Bt.width,rt=Bt.height;for(let vt=0;vt<Ce;vt++)n.texImage2D(3553,vt,On,pt,rt,0,sn,fn,null),pt>>=1,rt>>=1}}else if(ai.length>0&&It){di&&sr&&n.texStorage2D(3553,Ce,On,ai[0].width,ai[0].height);for(let pt=0,rt=ai.length;pt<rt;pt++)pn=ai[pt],di?n.texSubImage2D(3553,pt,0,0,sn,fn,pn):n.texImage2D(3553,pt,On,sn,fn,pn);fe.generateMipmaps=!1}else di?(sr&&n.texStorage2D(3553,Ce,On,Bt.width,Bt.height),n.texSubImage2D(3553,0,0,0,sn,fn,Bt)):n.texImage2D(3553,0,On,sn,fn,Bt);D(fe,It)&&R(ut),$t.__version=Lt.version,fe.onUpdate&&fe.onUpdate(fe)}re.__version=fe.version}function it(re,fe,He,ut,et){let Lt=s.convert(He.format,He.encoding),$t=s.convert(He.type),qt=N(He.internalFormat,Lt,$t,He.encoding);i.get(fe).__hasExternalTextures||(32879===et||35866===et?n.texImage3D(et,0,qt,fe.width,fe.height,fe.depth,0,Lt,$t,null):n.texImage2D(et,0,qt,fe.width,fe.height,0,Lt,$t,null)),n.bindFramebuffer(36160,re),Wt(fe)?u.framebufferTexture2DMultisampleEXT(36160,ut,et,i.get(He).__webglTexture,0,Ct(fe)):(3553===et||et>=34069&&et<=34074)&&e.framebufferTexture2D(36160,ut,et,i.get(He).__webglTexture,0),n.bindFramebuffer(36160,null)}function Nt(re,fe,He){if(e.bindRenderbuffer(36161,re),fe.depthBuffer&&!fe.stencilBuffer){let ut=33189;if(He||Wt(fe)){let et=fe.depthTexture;et&&et.isDepthTexture&&(et.type===gc?ut=36012:et.type===Lf&&(ut=33190));let Lt=Ct(fe);Wt(fe)?u.renderbufferStorageMultisampleEXT(36161,Lt,ut,fe.width,fe.height):e.renderbufferStorageMultisample(36161,Lt,ut,fe.width,fe.height)}else e.renderbufferStorage(36161,ut,fe.width,fe.height);e.framebufferRenderbuffer(36160,36096,36161,re)}else if(fe.depthBuffer&&fe.stencilBuffer){let ut=Ct(fe);He&&!1===Wt(fe)?e.renderbufferStorageMultisample(36161,ut,35056,fe.width,fe.height):Wt(fe)?u.renderbufferStorageMultisampleEXT(36161,ut,35056,fe.width,fe.height):e.renderbufferStorage(36161,34041,fe.width,fe.height),e.framebufferRenderbuffer(36160,33306,36161,re)}else{let ut=!0===fe.isWebGLMultipleRenderTargets?fe.texture:[fe.texture];for(let et=0;et<ut.length;et++){let Lt=ut[et],$t=s.convert(Lt.format,Lt.encoding),qt=s.convert(Lt.type),Bt=N(Lt.internalFormat,$t,qt,Lt.encoding),It=Ct(fe);He&&!1===Wt(fe)?e.renderbufferStorageMultisample(36161,It,Bt,fe.width,fe.height):Wt(fe)?u.renderbufferStorageMultisampleEXT(36161,It,Bt,fe.width,fe.height):e.renderbufferStorage(36161,Bt,fe.width,fe.height)}}e.bindRenderbuffer(36161,null)}function st(re){let fe=i.get(re),He=!0===re.isWebGLCubeRenderTarget;if(re.depthTexture&&!fe.__autoAllocateDepthBuffer){if(He)throw new Error("target.depthTexture not supported in Cube render targets");!function nt(re,fe){if(fe&&fe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,re),!fe.depthTexture||!fe.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(fe.depthTexture).__webglTexture||fe.depthTexture.image.width!==fe.width||fe.depthTexture.image.height!==fe.height)&&(fe.depthTexture.image.width=fe.width,fe.depthTexture.image.height=fe.height,fe.depthTexture.needsUpdate=!0),Le(fe.depthTexture,0);let He=i.get(fe.depthTexture).__webglTexture,ut=Ct(fe);if(fe.depthTexture.format===Tv)Wt(fe)?u.framebufferTexture2DMultisampleEXT(36160,36096,3553,He,0,ut):e.framebufferTexture2D(36160,36096,3553,He,0);else{if(fe.depthTexture.format!==Dv)throw new Error("Unknown depthTexture format");Wt(fe)?u.framebufferTexture2DMultisampleEXT(36160,33306,3553,He,0,ut):e.framebufferTexture2D(36160,33306,3553,He,0)}}(fe.__webglFramebuffer,re)}else if(He){fe.__webglDepthbuffer=[];for(let ut=0;ut<6;ut++)n.bindFramebuffer(36160,fe.__webglFramebuffer[ut]),fe.__webglDepthbuffer[ut]=e.createRenderbuffer(),Nt(fe.__webglDepthbuffer[ut],re,!1)}else n.bindFramebuffer(36160,fe.__webglFramebuffer),fe.__webglDepthbuffer=e.createRenderbuffer(),Nt(fe.__webglDepthbuffer,re,!1);n.bindFramebuffer(36160,null)}function Ct(re){return Math.min(h,re.samples)}function Wt(re){let fe=i.get(re);return a&&re.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==fe.__useRenderToTexture}function Ae(re,fe){let He=re.encoding,ut=re.format,et=re.type;return!0===re.isCompressedTexture||!0===re.isVideoTexture||re.format===nL||He!==cp&&(He===fr?!1===a?!0===t.has("EXT_sRGB")&&ut===Vd?(re.format=nL,re.minFilter=Or,re.generateMipmaps=!1):fe=RK.sRGBToLinear(fe):(ut!==Vd||et!==jl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",He)),fe}this.allocateTextureUnit=function me(){let re=_e;return re>=l&&console.warn("THREE.WebGLTextures: Trying to use "+re+" texture units while this GPU supports only "+l),_e+=1,re},this.resetTextureUnits=function be(){_e=0},this.setTexture2D=Le,this.setTexture2DArray=function ke(re,fe){let He=i.get(re);re.version>0&&He.__version!==re.version?$e(He,re,fe):n.bindTexture(35866,He.__webglTexture,33984+fe)},this.setTexture3D=function Re(re,fe){let He=i.get(re);re.version>0&&He.__version!==re.version?$e(He,re,fe):n.bindTexture(32879,He.__webglTexture,33984+fe)},this.setTextureCube=function Qe(re,fe){let He=i.get(re);re.version>0&&He.__version!==re.version?function ft(re,fe,He){if(6!==fe.image.length)return;let ut=Ze(re,fe),et=fe.source;n.bindTexture(34067,re.__webglTexture,33984+He);let Lt=i.get(et);if(et.version!==Lt.__version||!0===ut){n.activeTexture(33984+He),e.pixelStorei(37440,fe.flipY),e.pixelStorei(37441,fe.premultiplyAlpha),e.pixelStorei(3317,fe.unpackAlignment),e.pixelStorei(37443,0);let $t=fe.isCompressedTexture||fe.image[0].isCompressedTexture,qt=fe.image[0]&&fe.image[0].isDataTexture,Bt=[];for(let pt=0;pt<6;pt++)Bt[pt]=$t||qt?qt?fe.image[pt].image:fe.image[pt]:w(fe.image[pt],!1,!0,c),Bt[pt]=Ae(fe,Bt[pt]);let Ce,It=Bt[0],sn=P(It)||a,fn=s.convert(fe.format,fe.encoding),On=s.convert(fe.type),pn=N(fe.internalFormat,fn,On,fe.encoding),ai=a&&!0!==fe.isVideoTexture,di=void 0===Lt.__version||!0===ut,sr=k(fe,It,sn);if(Fe(34067,fe,sn),$t){ai&&di&&n.texStorage2D(34067,sr,pn,It.width,It.height);for(let pt=0;pt<6;pt++){Ce=Bt[pt].mipmaps;for(let rt=0;rt<Ce.length;rt++){let vt=Ce[rt];fe.format!==Vd?null!==fn?ai?n.compressedTexSubImage2D(34069+pt,rt,0,0,vt.width,vt.height,fn,vt.data):n.compressedTexImage2D(34069+pt,rt,pn,vt.width,vt.height,0,vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ai?n.texSubImage2D(34069+pt,rt,0,0,vt.width,vt.height,fn,On,vt.data):n.texImage2D(34069+pt,rt,pn,vt.width,vt.height,0,fn,On,vt.data)}}}else{Ce=fe.mipmaps,ai&&di&&(Ce.length>0&&sr++,n.texStorage2D(34067,sr,pn,Bt[0].width,Bt[0].height));for(let pt=0;pt<6;pt++)if(qt){ai?n.texSubImage2D(34069+pt,0,0,0,Bt[pt].width,Bt[pt].height,fn,On,Bt[pt].data):n.texImage2D(34069+pt,0,pn,Bt[pt].width,Bt[pt].height,0,fn,On,Bt[pt].data);for(let rt=0;rt<Ce.length;rt++){let vt=Ce[rt].image[pt].image;ai?n.texSubImage2D(34069+pt,rt+1,0,0,vt.width,vt.height,fn,On,vt.data):n.texImage2D(34069+pt,rt+1,pn,vt.width,vt.height,0,fn,On,vt.data)}}else{ai?n.texSubImage2D(34069+pt,0,0,0,fn,On,Bt[pt]):n.texImage2D(34069+pt,0,pn,fn,On,Bt[pt]);for(let rt=0;rt<Ce.length;rt++){let vt=Ce[rt];ai?n.texSubImage2D(34069+pt,rt+1,0,0,fn,On,vt.image[pt]):n.texImage2D(34069+pt,rt+1,pn,fn,On,vt.image[pt])}}}D(fe,sn)&&R(34067),Lt.__version=et.version,fe.onUpdate&&fe.onUpdate(fe)}re.__version=fe.version}(He,re,fe):n.bindTexture(34067,He.__webglTexture,33984+fe)},this.rebindTextures=function Ie(re,fe,He){let ut=i.get(re);void 0!==fe&&it(ut.__webglFramebuffer,re,re.texture,36064,3553),void 0!==He&&st(re)},this.setupRenderTarget=function Yt(re){let fe=re.texture,He=i.get(re),ut=i.get(fe);re.addEventListener("dispose",le),!0!==re.isWebGLMultipleRenderTargets&&(void 0===ut.__webglTexture&&(ut.__webglTexture=e.createTexture()),ut.__version=fe.version,o.memory.textures++);let et=!0===re.isWebGLCubeRenderTarget,Lt=!0===re.isWebGLMultipleRenderTargets,$t=P(re)||a;if(et){He.__webglFramebuffer=[];for(let qt=0;qt<6;qt++)He.__webglFramebuffer[qt]=e.createFramebuffer()}else{if(He.__webglFramebuffer=e.createFramebuffer(),Lt)if(r.drawBuffers){let qt=re.texture;for(let Bt=0,It=qt.length;Bt<It;Bt++){let sn=i.get(qt[Bt]);void 0===sn.__webglTexture&&(sn.__webglTexture=e.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&re.samples>0&&!1===Wt(re)){let qt=Lt?fe:[fe];He.__webglMultisampledFramebuffer=e.createFramebuffer(),He.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,He.__webglMultisampledFramebuffer);for(let Bt=0;Bt<qt.length;Bt++){let It=qt[Bt];He.__webglColorRenderbuffer[Bt]=e.createRenderbuffer(),e.bindRenderbuffer(36161,He.__webglColorRenderbuffer[Bt]);let sn=s.convert(It.format,It.encoding),fn=s.convert(It.type),On=N(It.internalFormat,sn,fn,It.encoding,!0===re.isXRRenderTarget),pn=Ct(re);e.renderbufferStorageMultisample(36161,pn,On,re.width,re.height),e.framebufferRenderbuffer(36160,36064+Bt,36161,He.__webglColorRenderbuffer[Bt])}e.bindRenderbuffer(36161,null),re.depthBuffer&&(He.__webglDepthRenderbuffer=e.createRenderbuffer(),Nt(He.__webglDepthRenderbuffer,re,!0)),n.bindFramebuffer(36160,null)}}if(et){n.bindTexture(34067,ut.__webglTexture),Fe(34067,fe,$t);for(let qt=0;qt<6;qt++)it(He.__webglFramebuffer[qt],re,fe,36064,34069+qt);D(fe,$t)&&R(34067),n.unbindTexture()}else if(Lt){let qt=re.texture;for(let Bt=0,It=qt.length;Bt<It;Bt++){let sn=qt[Bt],fn=i.get(sn);n.bindTexture(3553,fn.__webglTexture),Fe(3553,sn,$t),it(He.__webglFramebuffer,re,sn,36064+Bt,3553),D(sn,$t)&&R(3553)}n.unbindTexture()}else{let qt=3553;(re.isWebGL3DRenderTarget||re.isWebGLArrayRenderTarget)&&(a?qt=re.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(qt,ut.__webglTexture),Fe(qt,fe,$t),it(He.__webglFramebuffer,re,fe,36064,qt),D(fe,$t)&&R(qt),n.unbindTexture()}re.depthBuffer&&st(re)},this.updateRenderTargetMipmap=function wt(re){let fe=P(re)||a,He=!0===re.isWebGLMultipleRenderTargets?re.texture:[re.texture];for(let ut=0,et=He.length;ut<et;ut++){let Lt=He[ut];if(D(Lt,fe)){let $t=re.isWebGLCubeRenderTarget?34067:3553,qt=i.get(Lt).__webglTexture;n.bindTexture($t,qt),R($t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function Xt(re){if(a&&re.samples>0&&!1===Wt(re)){let fe=re.isWebGLMultipleRenderTargets?re.texture:[re.texture],He=re.width,ut=re.height,et=16384,Lt=[],$t=re.stencilBuffer?33306:36096,qt=i.get(re),Bt=!0===re.isWebGLMultipleRenderTargets;if(Bt)for(let It=0;It<fe.length;It++)n.bindFramebuffer(36160,qt.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+It,36161,null),n.bindFramebuffer(36160,qt.__webglFramebuffer),e.framebufferTexture2D(36009,36064+It,3553,null,0);n.bindFramebuffer(36008,qt.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,qt.__webglFramebuffer);for(let It=0;It<fe.length;It++){Lt.push(36064+It),re.depthBuffer&&Lt.push($t);let sn=void 0!==qt.__ignoreDepthValues&&qt.__ignoreDepthValues;if(!1===sn&&(re.depthBuffer&&(et|=256),re.stencilBuffer&&(et|=1024)),Bt&&e.framebufferRenderbuffer(36008,36064,36161,qt.__webglColorRenderbuffer[It]),!0===sn&&(e.invalidateFramebuffer(36008,[$t]),e.invalidateFramebuffer(36009,[$t])),Bt){let fn=i.get(fe[It]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,fn,0)}e.blitFramebuffer(0,0,He,ut,0,0,He,ut,et,9728),p&&e.invalidateFramebuffer(36008,Lt)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),Bt)for(let It=0;It<fe.length;It++){n.bindFramebuffer(36160,qt.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+It,36161,qt.__webglColorRenderbuffer[It]);let sn=i.get(fe[It]).__webglTexture;n.bindFramebuffer(36160,qt.__webglFramebuffer),e.framebufferTexture2D(36009,36064+It,3553,sn,0)}n.bindFramebuffer(36009,qt.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=st,this.setupFrameBufferTexture=it,this.useMultisampledRTT=Wt}function g4e(e,t,n){let i=n.isWebGL2;return{convert:function r(s,o=null){let a;if(s===jl)return 5121;if(s===QDe)return 32819;if(s===JDe)return 32820;if(s===$De)return 5120;if(s===KDe)return 5122;if(s===eK)return 5123;if(s===ZDe)return 5124;if(s===Lf)return 5125;if(s===gc)return 5126;if(s===Ov)return i?5131:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(s===e3e)return 6406;if(s===Vd)return 6408;if(s===t3e)return 6409;if(s===n3e)return 6410;if(s===Tv)return 6402;if(s===Dv)return 34041;if(s===nL)return a=t.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(s===i3e)return 6403;if(s===r3e)return 36244;if(s===$E)return 33319;if(s===s3e)return 33320;if(s===tK)return 36249;if(s===q4||s===X4||s===Y4||s===$4)if(o===fr){if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(s===q4)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===X4)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Y4)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===$4)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(s===q4)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===X4)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Y4)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===$4)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(s===nK||s===iK||s===rK||s===sK){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(s===nK)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===iK)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===rK)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===sK)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(s===o3e)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===oK||s===aK){if(a=t.get("WEBGL_compressed_texture_etc"),null===a)return null;if(s===oK)return o===fr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===aK)return o===fr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(s===lK||s===cK||s===dK||s===hK||s===uK||s===pK||s===fK||s===mK||s===gK||s===vK||s===yK||s===_K||s===bK||s===xK){if(a=t.get("WEBGL_compressed_texture_astc"),null===a)return null;if(s===lK)return o===fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===cK)return o===fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===dK)return o===fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===hK)return o===fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===uK)return o===fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===pK)return o===fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===fK)return o===fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===mK)return o===fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===gK)return o===fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===vK)return o===fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===yK)return o===fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===_K)return o===fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===bK)return o===fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===xK)return o===fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(s===K4){if(a=t.get("EXT_texture_compression_bptc"),null===a)return null;if(s===K4)return o===fr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(s===a3e||s===wK||s===MK||s===CK){if(a=t.get("EXT_texture_compression_rgtc"),null===a)return null;if(s===K4)return a.COMPRESSED_RED_RGTC1_EXT;if(s===wK)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===MK)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===CK)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===Av?i?34042:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[s]?e[s]:null}}}var v4e=class extends Wl{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},H_=class extends Fs{constructor(){super(),this.isGroup=!0,this.type="Group"}},y4e={type:"move"},kL=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new H_,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new H_,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new oe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new oe),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new H_,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new oe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new oe),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,s=null,o=this._targetRay,a=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){s=!0;for(let m of e.hand.values()){let v=t.getJointPose(m,n),g=this._getHandJoint(l,m);null!==v&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=v.radius),g.visible=null!==v}let h=l.joints["index-finger-tip"].position.distanceTo(l.joints["thumb-tip"].position),u=.02,p=.005;l.inputState.pinching&&h>u+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=u-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));null!==o&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(y4e)))}return null!==o&&(o.visible=null!==i),null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){let n=new H_;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}},G_=class extends Wa{constructor(e,t,n,i,r,s,o,a,l,c){if((c=void 0!==c?c:Tv)!==Tv&&c!==Dv)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Tv&&(n=Lf),void 0===n&&c===Dv&&(n=Av),super(null,i,r,s,o,a,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==o?o:eo,this.minFilter=void 0!==a?a:eo,this.flipY=!1,this.generateMipmaps=!1}},_4e=class extends Sl{constructor(e,t){super();let n=this,i=null,r=1,s=null,o="local-floor",a=1,l=null,c=null,d=null,h=null,u=null,p=null,m=t.getContextAttributes(),v=null,g=null,b=[],x=[],w=new Set,P=new Map,A=new Wl;A.layers.enable(1),A.viewport=new mr;let D=new Wl;D.layers.enable(2),D.viewport=new mr;let R=[A,D],N=new v4e;N.layers.enable(1),N.layers.enable(2);let k=null,L=null;function Q(ke){let Re=x.indexOf(ke.inputSource);if(-1===Re)return;let Qe=b[Re];void 0!==Qe&&Qe.dispatchEvent({type:ke.type,data:ke.inputSource})}function le(){i.removeEventListener("select",Q),i.removeEventListener("selectstart",Q),i.removeEventListener("selectend",Q),i.removeEventListener("squeeze",Q),i.removeEventListener("squeezestart",Q),i.removeEventListener("squeezeend",Q),i.removeEventListener("end",le),i.removeEventListener("inputsourceschange",ae);for(let ke=0;ke<b.length;ke++){let Re=x[ke];null!==Re&&(x[ke]=null,b[ke].disconnect(Re))}k=null,L=null,e.setRenderTarget(v),u=null,h=null,d=null,i=null,g=null,Le.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function ae(ke){for(let Re=0;Re<ke.removed.length;Re++){let Qe=ke.removed[Re],Pe=x.indexOf(Qe);Pe>=0&&(x[Pe]=null,b[Pe].disconnect(Qe))}for(let Re=0;Re<ke.added.length;Re++){let Qe=ke.added[Re],Pe=x.indexOf(Qe);if(-1===Pe){for(let Fe=0;Fe<b.length;Fe++){if(Fe>=x.length){x.push(Qe),Pe=Fe;break}if(null===x[Fe]){x[Fe]=Qe,Pe=Fe;break}}if(-1===Pe)break}let Be=b[Pe];Be&&Be.connect(Qe)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ke){let Re=b[ke];return void 0===Re&&(Re=new kL,b[ke]=Re),Re.getTargetRaySpace()},this.getControllerGrip=function(ke){let Re=b[ke];return void 0===Re&&(Re=new kL,b[ke]=Re),Re.getGripSpace()},this.getHand=function(ke){let Re=b[ke];return void 0===Re&&(Re=new kL,b[ke]=Re),Re.getHandSpace()},this.setFramebufferScaleFactor=function(ke){r=ke,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ke){o=ke,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(ke){l=ke},this.getBaseLayer=function(){return null!==h?h:u},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=function(){var ke=(0,xo.Z)(function*(Re){if(i=Re,null!==i){if(v=e.getRenderTarget(),i.addEventListener("select",Q),i.addEventListener("selectstart",Q),i.addEventListener("selectend",Q),i.addEventListener("squeeze",Q),i.addEventListener("squeezestart",Q),i.addEventListener("squeezeend",Q),i.addEventListener("end",le),i.addEventListener("inputsourceschange",ae),!0!==m.xrCompatible&&(yield t.makeXRCompatible()),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2)u=new XRWebGLLayer(i,t,{antialias:void 0!==i.renderState.layers||m.antialias,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:r}),i.updateRenderState({baseLayer:u}),g=new Ls(u.framebufferWidth,u.framebufferHeight,{format:Vd,type:jl,encoding:e.outputEncoding,stencilBuffer:m.stencil});else{let Qe=null,Pe=null,Be=null;m.depth&&(Be=m.stencil?35056:33190,Qe=m.stencil?Dv:Tv,Pe=m.stencil?Av:Lf);let Fe={colorFormat:32856,depthFormat:Be,scaleFactor:r};d=new XRWebGLBinding(i,t),h=d.createProjectionLayer(Fe),i.updateRenderState({layers:[h]}),g=new Ls(h.textureWidth,h.textureHeight,{format:Vd,type:jl,depthTexture:new G_(h.textureWidth,h.textureHeight,Pe,void 0,void 0,void 0,void 0,void 0,void 0,Qe),stencilBuffer:m.stencil,encoding:e.outputEncoding,samples:m.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(a),l=null,s=yield i.requestReferenceSpace(o),Le.setContext(i),Le.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(Re){return ke.apply(this,arguments)}}();let he=new oe,xe=new oe;function be(ke,Re){null===Re?ke.matrixWorld.copy(ke.matrix):ke.matrixWorld.multiplyMatrices(Re.matrixWorld,ke.matrix),ke.matrixWorldInverse.copy(ke.matrixWorld).invert()}this.updateCamera=function(ke){if(null===i)return;N.near=D.near=A.near=ke.near,N.far=D.far=A.far=ke.far,(k!==N.near||L!==N.far)&&(i.updateRenderState({depthNear:N.near,depthFar:N.far}),k=N.near,L=N.far);let Re=ke.parent,Qe=N.cameras;be(N,Re);for(let Be=0;Be<Qe.length;Be++)be(Qe[Be],Re);N.matrixWorld.decompose(N.position,N.quaternion,N.scale),ke.matrix.copy(N.matrix),ke.matrix.decompose(ke.position,ke.quaternion,ke.scale);let Pe=ke.children;for(let Be=0,Fe=Pe.length;Be<Fe;Be++)Pe[Be].updateMatrixWorld(!0);2===Qe.length?function _e(ke,Re,Qe){he.setFromMatrixPosition(Re.matrixWorld),xe.setFromMatrixPosition(Qe.matrixWorld);let Pe=he.distanceTo(xe),Be=Re.projectionMatrix.elements,Fe=Qe.projectionMatrix.elements,Ze=Be[14]/(Be[10]-1),$e=Be[14]/(Be[10]+1),ft=(Be[9]+1)/Be[5],it=(Be[9]-1)/Be[5],Nt=(Be[8]-1)/Be[0],nt=(Fe[8]+1)/Fe[0],st=Ze*Nt,Ie=Ze*nt,Yt=Pe/(-Nt+nt),wt=Yt*-Nt;Re.matrixWorld.decompose(ke.position,ke.quaternion,ke.scale),ke.translateX(wt),ke.translateZ(Yt),ke.matrixWorld.compose(ke.position,ke.quaternion,ke.scale),ke.matrixWorldInverse.copy(ke.matrixWorld).invert();let Xt=Ze+Yt,Ct=$e+Yt;ke.projectionMatrix.makePerspective(st-wt,Ie+(Pe-wt),ft*$e/Ct*Xt,it*$e/Ct*Xt,Xt,Ct)}(N,A,D):N.projectionMatrix.copy(A.projectionMatrix)},this.getCamera=function(){return N},this.getFoveation=function(){if(null!==h||null!==u)return a},this.setFoveation=function(ke){a=ke,null!==h&&(h.fixedFoveation=ke),null!==u&&void 0!==u.fixedFoveation&&(u.fixedFoveation=ke)},this.getPlanes=function(){return w};let me=null,Le=new YK;Le.setAnimationLoop(function Te(ke,Re){if(c=Re.getViewerPose(l||s),p=Re,null!==c){let Qe=c.views;null!==u&&(e.setRenderTargetFramebuffer(g,u.framebuffer),e.setRenderTarget(g));let Pe=!1;Qe.length!==N.cameras.length&&(N.cameras.length=0,Pe=!0);for(let Be=0;Be<Qe.length;Be++){let Fe=Qe[Be],Ze=null;if(null!==u)Ze=u.getViewport(Fe);else{let ft=d.getViewSubImage(h,Fe);Ze=ft.viewport,0===Be&&(e.setRenderTargetTextures(g,ft.colorTexture,h.ignoreDepthValues?void 0:ft.depthStencilTexture),e.setRenderTarget(g))}let $e=R[Be];void 0===$e&&($e=new Wl,$e.layers.enable(Be),$e.viewport=new mr,R[Be]=$e),$e.matrix.fromArray(Fe.transform.matrix),$e.projectionMatrix.fromArray(Fe.projectionMatrix),$e.viewport.set(Ze.x,Ze.y,Ze.width,Ze.height),0===Be&&N.matrix.copy($e.matrix),!0===Pe&&N.cameras.push($e)}}for(let Qe=0;Qe<b.length;Qe++){let Pe=x[Qe],Be=b[Qe];null!==Pe&&void 0!==Be&&Be.update(Pe,Re,l||s)}if(me&&me(ke,Re),Re.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:Re.detectedPlanes});let Qe=null;for(let Pe of w)Re.detectedPlanes.has(Pe)||(null===Qe&&(Qe=[]),Qe.push(Pe));if(null!==Qe)for(let Pe of Qe)w.delete(Pe),P.delete(Pe),n.dispatchEvent({type:"planeremoved",data:Pe});for(let Pe of Re.detectedPlanes)if(w.has(Pe)){let Be=P.get(Pe);Pe.lastChangedTime>Be&&(P.set(Pe,Pe.lastChangedTime),n.dispatchEvent({type:"planechanged",data:Pe}))}else w.add(Pe),P.set(Pe,Re.lastChangedTime),n.dispatchEvent({type:"planeadded",data:Pe})}p=null}),this.setAnimationLoop=function(ke){me=ke},this.dispose=function(){}}};function b4e(e,t){function r(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap),g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===ll&&(v.bumpScale.value*=-1)),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===ll&&v.normalScale.value.negate()),g.specularMap&&(v.specularMap.value=g.specularMap),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);let x,w,b=t.get(g).envMap;if(b&&(v.envMap.value=b,v.flipEnvMap.value=b.isCubeTexture&&!1===b.isRenderTargetTexture?-1:1,v.reflectivity.value=g.reflectivity,v.ior.value=g.ior,v.refractionRatio.value=g.refractionRatio),g.lightMap){v.lightMap.value=g.lightMap;let P=!0!==e.physicallyCorrectLights?Math.PI:1;v.lightMapIntensity.value=g.lightMapIntensity*P}g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity),g.map?x=g.map:g.specularMap?x=g.specularMap:g.displacementMap?x=g.displacementMap:g.normalMap?x=g.normalMap:g.bumpMap?x=g.bumpMap:g.roughnessMap?x=g.roughnessMap:g.metalnessMap?x=g.metalnessMap:g.alphaMap?x=g.alphaMap:g.emissiveMap?x=g.emissiveMap:g.clearcoatMap?x=g.clearcoatMap:g.clearcoatNormalMap?x=g.clearcoatNormalMap:g.clearcoatRoughnessMap?x=g.clearcoatRoughnessMap:g.iridescenceMap?x=g.iridescenceMap:g.iridescenceThicknessMap?x=g.iridescenceThicknessMap:g.specularIntensityMap?x=g.specularIntensityMap:g.specularColorMap?x=g.specularColorMap:g.transmissionMap?x=g.transmissionMap:g.thicknessMap?x=g.thicknessMap:g.sheenColorMap?x=g.sheenColorMap:g.sheenRoughnessMap&&(x=g.sheenRoughnessMap),void 0!==x&&(x.isWebGLRenderTarget&&(x=x.texture),!0===x.matrixAutoUpdate&&x.updateMatrix(),v.uvTransform.value.copy(x.matrix)),g.aoMap?w=g.aoMap:g.lightMap&&(w=g.lightMap),void 0!==w&&(w.isWebGLRenderTarget&&(w=w.texture),!0===w.matrixAutoUpdate&&w.updateMatrix(),v.uv2Transform.value.copy(w.matrix))}return{refreshFogUniforms:function n(v,g){g.color.getRGB(v.fogColor.value,XK(e)),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)},refreshMaterialUniforms:function i(v,g,b,x,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(v,g):g.isMeshToonMaterial?(r(v,g),function d(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap)}(v,g)):g.isMeshPhongMaterial?(r(v,g),function c(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4)}(v,g)):g.isMeshStandardMaterial?(r(v,g),function h(v,g){v.roughness.value=g.roughness,v.metalness.value=g.metalness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap),t.get(g).envMap&&(v.envMapIntensity.value=g.envMapIntensity)}(v,g),g.isMeshPhysicalMaterial&&function u(v,g,b){v.ior.value=g.ior,g.sheen>0&&(v.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),v.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(v.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(v.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),v.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===ll&&v.clearcoatNormalScale.value.negate())),g.iridescence>0&&(v.iridescence.value=g.iridescence,v.iridescenceIOR.value=g.iridescenceIOR,v.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(v.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(v.transmission.value=g.transmission,v.transmissionSamplerMap.value=b.texture,v.transmissionSamplerSize.value.set(b.width,b.height),g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap),v.attenuationDistance.value=g.attenuationDistance,v.attenuationColor.value.copy(g.attenuationColor)),v.specularIntensity.value=g.specularIntensity,v.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(v.specularColorMap.value=g.specularColorMap)}(v,g,w)):g.isMeshMatcapMaterial?(r(v,g),function p(v,g){g.matcap&&(v.matcap.value=g.matcap)}(v,g)):g.isMeshDepthMaterial?r(v,g):g.isMeshDistanceMaterial?(r(v,g),function m(v,g){v.referencePosition.value.copy(g.referencePosition),v.nearDistance.value=g.nearDistance,v.farDistance.value=g.farDistance}(v,g)):g.isMeshNormalMaterial?r(v,g):g.isLineBasicMaterial?(function s(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity}(v,g),g.isLineDashedMaterial&&function o(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}(v,g)):g.isPointsMaterial?function a(v,g,b,x){let w;v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*b,v.scale.value=.5*x,g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest),g.map?w=g.map:g.alphaMap&&(w=g.alphaMap),void 0!==w&&(!0===w.matrixAutoUpdate&&w.updateMatrix(),v.uvTransform.value.copy(w.matrix))}(v,g,b,x):g.isSpriteMaterial?function l(v,g){let b;v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest),g.map?b=g.map:g.alphaMap&&(b=g.alphaMap),void 0!==b&&(!0===b.matrixAutoUpdate&&b.updateMatrix(),v.uvTransform.value.copy(b.matrix))}(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function x4e(e,t,n,i){let r={},s={},o=[],a=n.isWebGL2?e.getParameter(35375):0;function p(x,w,P){let A=x.value;if(void 0===P[w]){if("number"==typeof A)P[w]=A;else{let D=Array.isArray(A)?A:[A],R=[];for(let N=0;N<D.length;N++)R.push(D[N].clone());P[w]=R}return!0}if("number"==typeof A){if(P[w]!==A)return P[w]=A,!0}else{let D=Array.isArray(P[w])?P[w]:[P[w]],R=Array.isArray(A)?A:[A];for(let N=0;N<D.length;N++){let k=D[N];if(!1===k.equals(R[N]))return k.copy(R[N]),!0}}return!1}function v(x){let w={boundary:0,storage:0};return"number"==typeof x?(w.boundary=4,w.storage=4):x.isVector2?(w.boundary=8,w.storage=8):x.isVector3||x.isColor?(w.boundary=16,w.storage=12):x.isVector4?(w.boundary=16,w.storage=16):x.isMatrix3?(w.boundary=48,w.storage=48):x.isMatrix4?(w.boundary=64,w.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),w}function g(x){let w=x.target;w.removeEventListener("dispose",g);let P=o.indexOf(w.__bindingPointIndex);o.splice(P,1),e.deleteBuffer(r[w.id]),delete r[w.id],delete s[w.id]}return{bind:function l(x,w){i.uniformBlockBinding(x,w.program)},update:function c(x,w){let P=r[x.id];void 0===P&&(function m(x){let w=x.uniforms,P=0,D=0;for(let R=0,N=w.length;R<N;R++){let k=w[R],L={boundary:0,storage:0},Q=Array.isArray(k.value)?k.value:[k.value];for(let le=0,ae=Q.length;le<ae;le++){let xe=v(Q[le]);L.boundary+=xe.boundary,L.storage+=xe.storage}k.__data=new Float32Array(L.storage/Float32Array.BYTES_PER_ELEMENT),k.__offset=P,R>0&&(D=P%16,0!==D&&16-D-L.boundary<0&&(P+=16-D,k.__offset=P)),P+=L.storage}D=P%16,D>0&&(P+=16-D),x.__size=P,x.__cache={}}(x),P=function d(x){let w=function h(){for(let x=0;x<a;x++)if(-1===o.indexOf(x))return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();x.__bindingPointIndex=w;let P=e.createBuffer(),A=x.__size,D=x.usage;return e.bindBuffer(35345,P),e.bufferData(35345,A,D),e.bindBuffer(35345,null),e.bindBufferBase(35345,w,P),P}(x),r[x.id]=P,x.addEventListener("dispose",g)),i.updateUBOMapping(x,w.program);let D=t.render.frame;s[x.id]!==D&&(function u(x){let P=x.uniforms,A=x.__cache;e.bindBuffer(35345,r[x.id]);for(let D=0,R=P.length;D<R;D++){let N=P[D];if(!0===p(N,D,A)){let k=N.__offset,L=Array.isArray(N.value)?N.value:[N.value],Q=0;for(let le=0;le<L.length;le++){let ae=L[le],he=v(ae);"number"==typeof ae?(N.__data[0]=ae,e.bufferSubData(35345,k+Q,N.__data)):ae.isMatrix3?(N.__data[0]=ae.elements[0],N.__data[1]=ae.elements[1],N.__data[2]=ae.elements[2],N.__data[3]=ae.elements[0],N.__data[4]=ae.elements[3],N.__data[5]=ae.elements[4],N.__data[6]=ae.elements[5],N.__data[7]=ae.elements[0],N.__data[8]=ae.elements[6],N.__data[9]=ae.elements[7],N.__data[10]=ae.elements[8],N.__data[11]=ae.elements[0]):(ae.toArray(N.__data,Q),Q+=he.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,k,N.__data)}}e.bindBuffer(35345,null)}(x),s[x.id]=D)},dispose:function b(){for(let x in r)e.deleteBuffer(r[x]);o=[],r={},s={}}}}function wZ(e={}){this.isWebGLRenderer=!0;let d,t=void 0!==e.canvas?e.canvas:function w4e(){let e=nO("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,i=void 0===e.depth||e.depth,r=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,a=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;d=null!==n?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let h=null,u=null,p=[],m=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=cp,this.physicallyCorrectLights=!1,this.toneMapping=kf,this.toneMappingExposure=1;let v=this,g=!1,b=0,x=0,w=null,P=-1,A=null,D=new mr,R=new mr,N=null,k=t.width,L=t.height,Q=1,le=null,ae=null,he=new mr(0,0,k,L),xe=new mr(0,0,k,L),_e=!1,be=new EL,me=!1,Te=!1,Le=null,ke=new vn,Re=new tt,Qe=new oe,Pe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Be(){return null===w?Q:1}let $e,ft,it,Nt,nt,st,Ie,Yt,wt,Xt,Ct,Wt,Qt,Ae,re,fe,He,ut,et,Lt,$t,qt,Bt,It,Fe=n;function Ze(We,Ut){for(let rn=0;rn<We.length;rn++){let on=t.getContext(We[rn],Ut);if(null!==on)return on}return null}try{let We={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${v_}`),t.addEventListener("webglcontextlost",On,!1),t.addEventListener("webglcontextrestored",pn,!1),t.addEventListener("webglcontextcreationerror",ai,!1),null===Fe){let Ut=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&Ut.shift(),Fe=Ze(Ut,We),null===Fe)throw Ze(Ut)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Fe.getShaderPrecisionFormat&&(Fe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(We){throw console.error("THREE.WebGLRenderer: "+We.message),We}function sn(){$e=new Nke(Fe),ft=new Ake(Fe,$e,e),$e.init(ft),qt=new g4e(Fe,$e,ft),it=new f4e(Fe,$e,ft),Nt=new Bke,nt=new t4e,st=new m4e(Fe,$e,it,nt,ft,qt,Nt),Ie=new Dke(v),Yt=new kke(v),wt=new X3e(Fe,ft),Bt=new Eke(Fe,$e,wt,ft),Xt=new Lke(Fe,wt,Nt,Bt),Ct=new jke(Fe,Xt,wt,Nt),et=new Vke(Fe,ft,st),fe=new Tke(nt),Wt=new e4e(v,Ie,Yt,$e,ft,Bt,fe),Qt=new b4e(v,nt),Ae=new i4e,re=new c4e($e,ft),ut=new Ske(v,Ie,Yt,it,Ct,d,o),He=new p4e(v,Ct,ft),It=new x4e(Fe,Nt,ft,it),Lt=new Oke(Fe,$e,Nt,ft),$t=new Fke(Fe,$e,Nt,ft),Nt.programs=Wt.programs,v.capabilities=ft,v.extensions=$e,v.properties=nt,v.renderLists=Ae,v.shadowMap=He,v.state=it,v.info=Nt}sn();let fn=new _4e(v,Fe);function On(We){We.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function pn(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;let We=Nt.autoReset,Ut=He.enabled,rn=He.autoUpdate,Tt=He.needsUpdate,on=He.type;sn(),Nt.autoReset=We,He.enabled=Ut,He.autoUpdate=rn,He.needsUpdate=Tt,He.type=on}function ai(We){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",We.statusMessage)}function di(We){let Ut=We.target;Ut.removeEventListener("dispose",di),function sr(We){(function Ce(We){let Ut=nt.get(We).programs;void 0!==Ut&&(Ut.forEach(function(rn){Wt.releaseProgram(rn)}),We.isShaderMaterial&&Wt.releaseShaderCache(We))})(We),nt.remove(We)}(Ut)}this.xr=fn,this.getContext=function(){return Fe},this.getContextAttributes=function(){return Fe.getContextAttributes()},this.forceContextLoss=function(){let We=$e.get("WEBGL_lose_context");We&&We.loseContext()},this.forceContextRestore=function(){let We=$e.get("WEBGL_lose_context");We&&We.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(We){void 0!==We&&(Q=We,this.setSize(k,L,!1))},this.getSize=function(We){return We.set(k,L)},this.setSize=function(We,Ut,rn){fn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(k=We,L=Ut,t.width=Math.floor(We*Q),t.height=Math.floor(Ut*Q),!1!==rn&&(t.style.width=We+"px",t.style.height=Ut+"px"),this.setViewport(0,0,We,Ut))},this.getDrawingBufferSize=function(We){return We.set(k*Q,L*Q).floor()},this.setDrawingBufferSize=function(We,Ut,rn){k=We,L=Ut,Q=rn,t.width=Math.floor(We*rn),t.height=Math.floor(Ut*rn),this.setViewport(0,0,We,Ut)},this.getCurrentViewport=function(We){return We.copy(D)},this.getViewport=function(We){return We.copy(he)},this.setViewport=function(We,Ut,rn,Tt){We.isVector4?he.set(We.x,We.y,We.z,We.w):he.set(We,Ut,rn,Tt),it.viewport(D.copy(he).multiplyScalar(Q).floor())},this.getScissor=function(We){return We.copy(xe)},this.setScissor=function(We,Ut,rn,Tt){We.isVector4?xe.set(We.x,We.y,We.z,We.w):xe.set(We,Ut,rn,Tt),it.scissor(R.copy(xe).multiplyScalar(Q).floor())},this.getScissorTest=function(){return _e},this.setScissorTest=function(We){it.setScissorTest(_e=We)},this.setOpaqueSort=function(We){le=We},this.setTransparentSort=function(We){ae=We},this.getClearColor=function(We){return We.copy(ut.getClearColor())},this.setClearColor=function(){ut.setClearColor.apply(ut,arguments)},this.getClearAlpha=function(){return ut.getClearAlpha()},this.setClearAlpha=function(){ut.setClearAlpha.apply(ut,arguments)},this.clear=function(We=!0,Ut=!0,rn=!0){let Tt=0;We&&(Tt|=16384),Ut&&(Tt|=256),rn&&(Tt|=1024),Fe.clear(Tt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",On,!1),t.removeEventListener("webglcontextrestored",pn,!1),t.removeEventListener("webglcontextcreationerror",ai,!1),Ae.dispose(),re.dispose(),nt.dispose(),Ie.dispose(),Yt.dispose(),Ct.dispose(),Bt.dispose(),It.dispose(),Wt.dispose(),fn.dispose(),fn.removeEventListener("sessionstart",vt),fn.removeEventListener("sessionend",an),Le&&(Le.dispose(),Le=null),wn.stop()},this.renderBufferDirect=function(We,Ut,rn,Tt,on,vi){null===Ut&&(Ut=Pe);let hr=on.isMesh&&on.matrixWorld.determinant()<0,Lr=function $T(We,Ut,rn,Tt,on){!0!==Ut.isScene&&(Ut=Pe),st.resetTextureUnits();let vi=Ut.fog,Lr=null===w?v.outputEncoding:!0===w.isXRRenderTarget?w.texture.encoding:cp,Wr=(Tt.isMeshStandardMaterial?Yt:Ie).get(Tt.envMap||(Tt.isMeshStandardMaterial?Ut.environment:null)),js=!0===Tt.vertexColors&&!!rn.attributes.color&&4===rn.attributes.color.itemSize,Oe=!!Tt.normalMap&&!!rn.attributes.tangent,at=!!rn.morphAttributes.position,Dt=!!rn.morphAttributes.normal,Rt=!!rn.morphAttributes.color,yt=Tt.toneMapped?v.toneMapping:kf,Tn=rn.morphAttributes.position||rn.morphAttributes.normal||rn.morphAttributes.color,Dn=void 0!==Tn?Tn.length:0,In=nt.get(Tt),pi=u.state.lights;!0!==me||!0!==Te&&We===A||fe.setState(Tt,We,We===A&&Tt.id===P);let Ji=!1;Tt.version===In.__version?(In.needsLights&&In.lightsStateVersion!==pi.state.version||In.outputEncoding!==Lr||on.isInstancedMesh&&!1===In.instancing||!on.isInstancedMesh&&!0===In.instancing||on.isSkinnedMesh&&!1===In.skinning||!on.isSkinnedMesh&&!0===In.skinning||In.envMap!==Wr||!0===Tt.fog&&In.fog!==vi||void 0!==In.numClippingPlanes&&(In.numClippingPlanes!==fe.numPlanes||In.numIntersection!==fe.numIntersection)||In.vertexAlphas!==js||In.vertexTangents!==Oe||In.morphTargets!==at||In.morphNormals!==Dt||In.morphColors!==Rt||In.toneMapping!==yt||!0===ft.isWebGL2&&In.morphTargetsCount!==Dn)&&(Ji=!0):(Ji=!0,In.__version=Tt.version);let $i=In.currentProgram;!0===Ji&&($i=Go(Tt,Ut,on));let _i=!1,Fr=!1,Hs=!1,ur=$i.getUniforms(),Wo=In.uniforms;if(it.useProgram($i.program)&&(_i=!0,Fr=!0,Hs=!0),Tt.id!==P&&(P=Tt.id,Fr=!0),_i||A!==We){if(ur.setValue(Fe,"projectionMatrix",We.projectionMatrix),ft.logarithmicDepthBuffer&&ur.setValue(Fe,"logDepthBufFC",2/(Math.log(We.far+1)/Math.LN2)),A!==We&&(A=We,Fr=!0,Hs=!0),Tt.isShaderMaterial||Tt.isMeshPhongMaterial||Tt.isMeshToonMaterial||Tt.isMeshStandardMaterial||Tt.envMap){let ii=ur.map.cameraPosition;void 0!==ii&&ii.setValue(Fe,Qe.setFromMatrixPosition(We.matrixWorld))}(Tt.isMeshPhongMaterial||Tt.isMeshToonMaterial||Tt.isMeshLambertMaterial||Tt.isMeshBasicMaterial||Tt.isMeshStandardMaterial||Tt.isShaderMaterial)&&ur.setValue(Fe,"isOrthographic",!0===We.isOrthographicCamera),(Tt.isMeshPhongMaterial||Tt.isMeshToonMaterial||Tt.isMeshLambertMaterial||Tt.isMeshBasicMaterial||Tt.isMeshStandardMaterial||Tt.isShaderMaterial||Tt.isShadowMaterial||on.isSkinnedMesh)&&ur.setValue(Fe,"viewMatrix",We.matrixWorldInverse)}if(on.isSkinnedMesh){ur.setOptional(Fe,on,"bindMatrix"),ur.setOptional(Fe,on,"bindMatrixInverse");let ii=on.skeleton;ii&&(ft.floatVertexTextures?(null===ii.boneTexture&&ii.computeBoneTexture(),ur.setValue(Fe,"boneTexture",ii.boneTexture,st),ur.setValue(Fe,"boneTextureSize",ii.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let ms=rn.morphAttributes;if((void 0!==ms.position||void 0!==ms.normal||void 0!==ms.color&&!0===ft.isWebGL2)&&et.update(on,rn,Tt,$i),(Fr||In.receiveShadow!==on.receiveShadow)&&(In.receiveShadow=on.receiveShadow,ur.setValue(Fe,"receiveShadow",on.receiveShadow)),Tt.isMeshGouraudMaterial&&null!==Tt.envMap&&(Wo.envMap.value=Wr,Wo.flipEnvMap.value=Wr.isCubeTexture&&!1===Wr.isRenderTargetTexture?-1:1),Fr&&(ur.setValue(Fe,"toneMappingExposure",v.toneMappingExposure),In.needsLights&&function mm(We,Ut){We.ambientLightColor.needsUpdate=Ut,We.lightProbe.needsUpdate=Ut,We.directionalLights.needsUpdate=Ut,We.directionalLightShadows.needsUpdate=Ut,We.pointLights.needsUpdate=Ut,We.pointLightShadows.needsUpdate=Ut,We.spotLights.needsUpdate=Ut,We.spotLightShadows.needsUpdate=Ut,We.rectAreaLights.needsUpdate=Ut,We.hemisphereLights.needsUpdate=Ut}(Wo,Hs),vi&&!0===Tt.fog&&Qt.refreshFogUniforms(Wo,vi),Qt.refreshMaterialUniforms(Wo,Tt,Q,L,Le),CO.upload(Fe,In.uniformsList,Wo,st)),Tt.isShaderMaterial&&!0===Tt.uniformsNeedUpdate&&(CO.upload(Fe,In.uniformsList,Wo,st),Tt.uniformsNeedUpdate=!1),Tt.isSpriteMaterial&&ur.setValue(Fe,"center",on.center),ur.setValue(Fe,"modelViewMatrix",on.modelViewMatrix),ur.setValue(Fe,"normalMatrix",on.normalMatrix),ur.setValue(Fe,"modelMatrix",on.matrixWorld),on.previousModelViewMatrix&&ur.setValue(Fe,"previousModelViewMatrix",on.previousModelViewMatrix),We.previousProjectionMatrix&&ur.setValue(Fe,"previousProjectionMatrix",We.previousProjectionMatrix),Tt.isShaderMaterial||Tt.isRawShaderMaterial){let ii=Tt.uniformsGroups;for(let Kd=0,Ms=ii.length;Kd<Ms;Kd++)if(ft.isWebGL2){let ld=ii[Kd];It.update(ld,$i),It.bind(ld,$i)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return $i}(We,Ut,rn,Tt,on);it.setMaterial(Tt,hr);let Wr=rn.index,js=1;!0===Tt.wireframe&&(Wr=Xt.getWireframeAttribute(rn),js=2);let Oe=rn.drawRange,at=rn.attributes.position,Dt=Oe.start*js,Rt=(Oe.start+Oe.count)*js;null!==vi&&(Dt=Math.max(Dt,vi.start*js),Rt=Math.min(Rt,(vi.start+vi.count)*js)),null!==Wr?(Dt=Math.max(Dt,0),Rt=Math.min(Rt,Wr.count)):null!=at&&(Dt=Math.max(Dt,0),Rt=Math.min(Rt,at.count));let yt=Rt-Dt;if(yt<0||yt===1/0)return;Bt.setup(on,Tt,Lr,rn,Wr);let Tn,Dn=Lt;if(null!==Wr&&(Tn=wt.get(Wr),Dn=$t,Dn.setIndex(Tn)),on.isMesh)!0===Tt.wireframe?(it.setLineWidth(Tt.wireframeLinewidth*Be()),Dn.setMode(1)):Dn.setMode(4);else if(on.isLine){let In=Tt.linewidth;void 0===In&&(In=1),it.setLineWidth(In*Be()),Dn.setMode(on.isLineSegments?1:on.isLineLoop?2:3)}else on.isPoints?Dn.setMode(0):on.isSprite&&Dn.setMode(4);if(on.isInstancedMesh)Dn.renderInstances(Dt,yt,on.count);else if(rn.isInstancedBufferGeometry){let pi=Math.min(rn.instanceCount,void 0!==rn._maxInstanceCount?rn._maxInstanceCount:1/0);Dn.renderInstances(Dt,yt,pi)}else Dn.render(Dt,yt)},this.compile=function(We,Ut){function rn(Tt,on,vi){!0===Tt.transparent&&Tt.side===Yc&&!1===Tt.forceSinglePass?(Tt.side=ll,Tt.needsUpdate=!0,Go(Tt,on,vi),Tt.side=cu,Tt.needsUpdate=!0,Go(Tt,on,vi),Tt.side=Yc):Go(Tt,on,vi)}u=re.get(We),u.init(),m.push(u),We.traverseVisible(function(Tt){Tt.isLight&&Tt.layers.test(Ut.layers)&&(u.pushLight(Tt),Tt.castShadow&&u.pushShadow(Tt))}),u.setupLights(v.physicallyCorrectLights),We.traverse(function(Tt){let on=Tt.material;if(on)if(Array.isArray(on))for(let vi=0;vi<on.length;vi++)rn(on[vi],We,Tt);else rn(on,We,Tt)}),m.pop(),u=null};let pt=null;function vt(){wn.stop()}function an(){wn.start()}let wn=new YK;function hi(We,Ut,rn,Tt){if(!1===We.visible)return;if(We.layers.test(Ut.layers))if(We.isGroup)rn=We.renderOrder;else if(We.isLOD)!0===We.autoUpdate&&We.update(Ut);else if(We.isLight)u.pushLight(We),We.castShadow&&u.pushShadow(We);else if(We.isSprite){if(!We.frustumCulled||be.intersectsSprite(We)){Tt&&Qe.setFromMatrixPosition(We.matrixWorld).applyMatrix4(ke);let vi=Ct.update(We),hr=We.material;hr.visible&&h.push(We,vi,hr,rn,Qe.z,null)}}else if((We.isMesh||We.isLine||We.isPoints)&&(We.isSkinnedMesh&&We.skeleton.frame!==Nt.render.frame&&(We.skeleton.update(),We.skeleton.frame=Nt.render.frame),!We.frustumCulled||be.intersectsObject(We))){Tt&&Qe.setFromMatrixPosition(We.matrixWorld).applyMatrix4(ke);let vi=Ct.update(We),hr=We.material;if(Array.isArray(hr)){let Lr=vi.groups;for(let Wr=0,js=Lr.length;Wr<js;Wr++){let Oe=Lr[Wr],at=hr[Oe.materialIndex];at&&at.visible&&h.push(We,vi,at,rn,Qe.z,Oe)}}else hr.visible&&h.push(We,vi,hr,rn,Qe.z,null)}let on=We.children;for(let vi=0,hr=on.length;vi<hr;vi++)hi(on[vi],Ut,rn,Tt)}function Hr(We,Ut,rn,Tt){let on=We.opaque,vi=We.transmissive,hr=We.transparent;u.setupLightsView(rn),!0===me&&fe.setGlobalState(v.clippingPlanes,rn),vi.length>0&&function wo(We,Ut,rn){let Tt=ft.isWebGL2;null===Le&&(Le=new Ls(1,1,{generateMipmaps:!0,type:$e.has("EXT_color_buffer_half_float")?Ov:jl,minFilter:__,samples:Tt&&!0===s?4:0})),v.getDrawingBufferSize(Re),Tt?Le.setSize(Re.x,Re.y):Le.setSize(eO(Re.x),eO(Re.y));let on=v.getRenderTarget();v.setRenderTarget(Le),v.clear();let vi=v.toneMapping;v.toneMapping=kf,ki(We,Ut,rn),v.toneMapping=vi,st.updateMultisampleRenderTarget(Le),st.updateRenderTargetMipmap(Le),v.setRenderTarget(on)}(on,Ut,rn),Tt&&it.viewport(D.copy(Tt)),on.length>0&&ki(on,Ut,rn),vi.length>0&&ki(vi,Ut,rn),hr.length>0&&ki(hr,Ut,rn),it.buffers.depth.setTest(!0),it.buffers.depth.setMask(!0),it.buffers.color.setMask(!0),it.setPolygonOffset(!1)}function ki(We,Ut,rn){let Tt=!0===Ut.isScene?Ut.overrideMaterial:null;for(let on=0,vi=We.length;on<vi;on++){let hr=We[on],Lr=hr.object,Wr=hr.geometry,js=null===Tt?hr.material:Tt,Oe=hr.group;Lr.layers.test(rn.layers)&&ha(Lr,Ut,rn,Wr,js,Oe)}}function ha(We,Ut,rn,Tt,on,vi){We.onBeforeRender(v,Ut,rn,Tt,on,vi),We.modelViewMatrix.multiplyMatrices(rn.matrixWorldInverse,We.matrixWorld),We.normalMatrix.getNormalMatrix(We.modelViewMatrix),on.onBeforeRender(v,Ut,rn,Tt,We,vi),!0===on.transparent&&on.side===Yc&&!1===on.forceSinglePass?(on.side=ll,on.needsUpdate=!0,v.renderBufferDirect(rn,Ut,Tt,on,We,vi),on.side=cu,on.needsUpdate=!0,v.renderBufferDirect(rn,Ut,Tt,on,We,vi),on.side=Yc):v.renderBufferDirect(rn,Ut,Tt,on,We,vi),We.onAfterRender(v,Ut,rn,Tt,on,vi)}function Go(We,Ut,rn){!0!==Ut.isScene&&(Ut=Pe);let Tt=nt.get(We),on=u.state.lights,hr=on.state.version,Lr=Wt.getParameters(We,on.state,u.state.shadowsArray,Ut,rn),Wr=Wt.getProgramCacheKey(Lr),js=Tt.programs;Tt.environment=We.isMeshStandardMaterial?Ut.environment:null,Tt.fog=Ut.fog,Tt.envMap=(We.isMeshStandardMaterial?Yt:Ie).get(We.envMap||Tt.environment),void 0===js&&(We.addEventListener("dispose",di),js=new Map,Tt.programs=js);let Oe=js.get(Wr);if(void 0!==Oe){if(Tt.currentProgram===Oe&&Tt.lightsStateVersion===hr)return qC(We,Lr),Oe}else Lr.uniforms=Wt.getUniforms(We),We.onBuild(rn,Lr,v),We.onBeforeCompile(Lr,v),Oe=Wt.acquireProgram(Lr,Wr),js.set(Wr,Oe),Tt.uniforms=Lr.uniforms;let at=Tt.uniforms;(!We.isShaderMaterial&&!We.isRawShaderMaterial||!0===We.clipping)&&(at.clippingPlanes=fe.uniform),qC(We,Lr),Tt.needsLights=function XC(We){return We.isMeshLambertMaterial||We.isMeshToonMaterial||We.isMeshPhongMaterial||We.isMeshStandardMaterial||We.isShadowMaterial||We.isShaderMaterial&&!0===We.lights}(We),Tt.lightsStateVersion=hr,Tt.needsLights&&(at.ambientLightColor.value=on.state.ambient,at.lightProbe.value=on.state.probe,at.directionalLights.value=on.state.directional,at.directionalLightShadows.value=on.state.directionalShadow,at.spotLights.value=on.state.spot,at.spotLightShadows.value=on.state.spotShadow,at.rectAreaLights.value=on.state.rectArea,at.ltc_1.value=on.state.rectAreaLTC1,at.ltc_2.value=on.state.rectAreaLTC2,at.pointLights.value=on.state.point,at.pointLightShadows.value=on.state.pointShadow,at.hemisphereLights.value=on.state.hemi,at.directionalShadowMap.value=on.state.directionalShadowMap,at.directionalShadowMatrix.value=on.state.directionalShadowMatrix,at.spotShadowMap.value=on.state.spotShadowMap,at.spotLightMatrix.value=on.state.spotLightMatrix,at.spotLightMap.value=on.state.spotLightMap,at.pointShadowMap.value=on.state.pointShadowMap,at.pointShadowMatrix.value=on.state.pointShadowMatrix);let Dt=Oe.getUniforms(),Rt=CO.seqWithValue(Dt.seq,at);return Tt.currentProgram=Oe,Tt.uniformsList=Rt,Oe}function qC(We,Ut){let rn=nt.get(We);rn.outputEncoding=Ut.outputEncoding,rn.instancing=Ut.instancing,rn.skinning=Ut.skinning,rn.morphTargets=Ut.morphTargets,rn.morphNormals=Ut.morphNormals,rn.morphColors=Ut.morphColors,rn.morphTargetsCount=Ut.morphTargetsCount,rn.numClippingPlanes=Ut.numClippingPlanes,rn.numIntersection=Ut.numClipIntersection,rn.vertexAlphas=Ut.vertexAlphas,rn.vertexTangents=Ut.vertexTangents,rn.toneMapping=Ut.toneMapping}wn.setAnimationLoop(function rt(We){pt&&pt(We)}),typeof self<"u"&&wn.setContext(self),this.setAnimationLoop=function(We){pt=We,fn.setAnimationLoop(We),null===We?wn.stop():wn.start()},fn.addEventListener("sessionstart",vt),fn.addEventListener("sessionend",an),this.render=function(We,Ut){if(void 0===Ut||!0===Ut.isCamera){if(!0!==g){if(!0===We.matrixWorldAutoUpdate&&We.updateMatrixWorld(),null===Ut.parent&&!0===Ut.matrixWorldAutoUpdate&&Ut.updateMatrixWorld(),!0===fn.enabled&&!0===fn.isPresenting&&(!0===fn.cameraAutoUpdate&&fn.updateCamera(Ut),Ut=fn.getCamera()),!0===We.isScene&&We.onBeforeRender(v,We,Ut,w),u=re.get(We,m.length),u.init(),m.push(u),ke.multiplyMatrices(Ut.projectionMatrix,Ut.matrixWorldInverse),be.setFromProjectionMatrix(ke),Te=this.localClippingEnabled,me=fe.init(this.clippingPlanes,Te),h=Ae.get(We,p.length),h.init(),p.push(h),hi(We,Ut,0,v.sortObjects),h.finish(),!0===v.sortObjects&&h.sort(le,ae),!0===me&&fe.beginShadows(),He.render(u.state.shadowsArray,We,Ut),!0===me&&fe.endShadows(),!0===this.info.autoReset&&this.info.reset(),ut.render(h,We),u.setupLights(v.physicallyCorrectLights),Ut.isArrayCamera){let Tt=Ut.cameras;for(let on=0,vi=Tt.length;on<vi;on++){let hr=Tt[on];Hr(h,We,hr,hr.viewport)}}else Hr(h,We,Ut);null!==w&&(st.updateMultisampleRenderTarget(w),st.updateRenderTargetMipmap(w)),!0===We.isScene&&We.onAfterRender(v,We,Ut),Bt.resetDefaultState(),P=-1,A=null,m.pop(),u=m.length>0?m[m.length-1]:null,p.pop(),h=p.length>0?p[p.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(We,Ut,rn){nt.get(We.texture).__webglTexture=Ut,nt.get(We.depthTexture).__webglTexture=rn;let Tt=nt.get(We);Tt.__hasExternalTextures=!0,Tt.__hasExternalTextures&&(Tt.__autoAllocateDepthBuffer=void 0===rn,Tt.__autoAllocateDepthBuffer||!0===$e.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Tt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(We,Ut){let rn=nt.get(We);rn.__webglFramebuffer=Ut,rn.__useDefaultFramebuffer=void 0===Ut},this.setRenderTarget=function(We,Ut=0,rn=0){w=We,b=Ut,x=rn;let Tt=!0,on=null,vi=!1,hr=!1;if(We){let Lr=nt.get(We);void 0!==Lr.__useDefaultFramebuffer?(it.bindFramebuffer(36160,null),Tt=!1):void 0===Lr.__webglFramebuffer?st.setupRenderTarget(We):Lr.__hasExternalTextures&&st.rebindTextures(We,nt.get(We.texture).__webglTexture,nt.get(We.depthTexture).__webglTexture);let Wr=We.texture;(Wr.isData3DTexture||Wr.isDataArrayTexture||Wr.isCompressedArrayTexture)&&(hr=!0);let js=nt.get(We).__webglFramebuffer;We.isWebGLCubeRenderTarget?(on=js[Ut],vi=!0):on=ft.isWebGL2&&We.samples>0&&!1===st.useMultisampledRTT(We)?nt.get(We).__webglMultisampledFramebuffer:js,D.copy(We.viewport),R.copy(We.scissor),N=We.scissorTest}else D.copy(he).multiplyScalar(Q).floor(),R.copy(xe).multiplyScalar(Q).floor(),N=_e;if(it.bindFramebuffer(36160,on)&&ft.drawBuffers&&Tt&&it.drawBuffers(We,on),it.viewport(D),it.scissor(R),it.setScissorTest(N),vi){let Lr=nt.get(We.texture);Fe.framebufferTexture2D(36160,36064,34069+Ut,Lr.__webglTexture,rn)}else if(hr){let Lr=nt.get(We.texture);Fe.framebufferTextureLayer(36160,36064,Lr.__webglTexture,rn||0,Ut||0)}P=-1},this.readRenderTargetPixels=function(We,Ut,rn,Tt,on,vi,hr){if(!We||!We.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Lr=nt.get(We).__webglFramebuffer;if(We.isWebGLCubeRenderTarget&&void 0!==hr&&(Lr=Lr[hr]),Lr){it.bindFramebuffer(36160,Lr);try{let Wr=We.texture,js=Wr.format,Oe=Wr.type;if(js!==Vd&&qt.convert(js)!==Fe.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");let at=Oe===Ov&&($e.has("EXT_color_buffer_half_float")||ft.isWebGL2&&$e.has("EXT_color_buffer_float"));if(!(Oe===jl||qt.convert(Oe)===Fe.getParameter(35738)||Oe===gc&&(ft.isWebGL2||$e.has("OES_texture_float")||$e.has("WEBGL_color_buffer_float"))||at))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Ut>=0&&Ut<=We.width-Tt&&rn>=0&&rn<=We.height-on&&Fe.readPixels(Ut,rn,Tt,on,qt.convert(js),qt.convert(Oe),vi)}finally{let Wr=null!==w?nt.get(w).__webglFramebuffer:null;it.bindFramebuffer(36160,Wr)}}},this.copyFramebufferToTexture=function(We,Ut,rn=0){let Tt=Math.pow(2,-rn),on=Math.floor(Ut.image.width*Tt),vi=Math.floor(Ut.image.height*Tt);st.setTexture2D(Ut,0),Fe.copyTexSubImage2D(3553,rn,0,0,We.x,We.y,on,vi),it.unbindTexture()},this.copyTextureToTexture=function(We,Ut,rn,Tt=0){let on=Ut.image.width,vi=Ut.image.height,hr=qt.convert(rn.format),Lr=qt.convert(rn.type);st.setTexture2D(rn,0),Fe.pixelStorei(37440,rn.flipY),Fe.pixelStorei(37441,rn.premultiplyAlpha),Fe.pixelStorei(3317,rn.unpackAlignment),Ut.isDataTexture?Fe.texSubImage2D(3553,Tt,We.x,We.y,on,vi,hr,Lr,Ut.image.data):Ut.isCompressedTexture?Fe.compressedTexSubImage2D(3553,Tt,We.x,We.y,Ut.mipmaps[0].width,Ut.mipmaps[0].height,hr,Ut.mipmaps[0].data):Fe.texSubImage2D(3553,Tt,We.x,We.y,hr,Lr,Ut.image),0===Tt&&rn.generateMipmaps&&Fe.generateMipmap(3553),it.unbindTexture()},this.copyTextureToTexture3D=function(We,Ut,rn,Tt,on=0){if(v.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");let Oe,vi=We.max.x-We.min.x+1,hr=We.max.y-We.min.y+1,Lr=We.max.z-We.min.z+1,Wr=qt.convert(Tt.format),js=qt.convert(Tt.type);if(Tt.isData3DTexture)st.setTexture3D(Tt,0),Oe=32879;else{if(!Tt.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");st.setTexture2DArray(Tt,0),Oe=35866}Fe.pixelStorei(37440,Tt.flipY),Fe.pixelStorei(37441,Tt.premultiplyAlpha),Fe.pixelStorei(3317,Tt.unpackAlignment);let at=Fe.getParameter(3314),Dt=Fe.getParameter(32878),Rt=Fe.getParameter(3316),yt=Fe.getParameter(3315),Tn=Fe.getParameter(32877),Dn=rn.isCompressedTexture?rn.mipmaps[0]:rn.image;Fe.pixelStorei(3314,Dn.width),Fe.pixelStorei(32878,Dn.height),Fe.pixelStorei(3316,We.min.x),Fe.pixelStorei(3315,We.min.y),Fe.pixelStorei(32877,We.min.z),rn.isDataTexture||rn.isData3DTexture?Fe.texSubImage3D(Oe,on,Ut.x,Ut.y,Ut.z,vi,hr,Lr,Wr,js,Dn.data):rn.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Fe.compressedTexSubImage3D(Oe,on,Ut.x,Ut.y,Ut.z,vi,hr,Lr,Wr,Dn.data)):Fe.texSubImage3D(Oe,on,Ut.x,Ut.y,Ut.z,vi,hr,Lr,Wr,js,Dn),Fe.pixelStorei(3314,at),Fe.pixelStorei(32878,Dt),Fe.pixelStorei(3316,Rt),Fe.pixelStorei(3315,yt),Fe.pixelStorei(32877,Tn),0===on&&Tt.generateMipmaps&&Fe.generateMipmap(Oe),it.unbindTexture()},this.initTexture=function(We){We.isCubeTexture?st.setTextureCube(We,0):We.isData3DTexture?st.setTexture3D(We,0):We.isDataArrayTexture||We.isCompressedArrayTexture?st.setTexture2DArray(We,0):st.setTexture2D(We,0),it.unbindTexture()},this.resetState=function(){b=0,x=0,w=null,it.reset(),Bt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends wZ{}).prototype.isWebGL1Renderer=!0;var MZ=class{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Di(e),this.near=t,this.far=n}clone(){return new MZ(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},vg=class extends Fs{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},C4e=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Mh()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Mh()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Mh()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},bc=new oe,NL=class{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)bc.fromBufferAttribute(this,t),bc.applyMatrix4(e),this.setXYZ(t,bc.x,bc.y,bc.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)bc.fromBufferAttribute(this,t),bc.applyNormalMatrix(e),this.setXYZ(t,bc.x,bc.y,bc.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)bc.fromBufferAttribute(this,t),bc.transformDirection(e),this.setXYZ(t,bc.x,bc.y,bc.z);return this}setX(e,t){return this.normalized&&(t=to(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=to(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=to(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=to(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Bf(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Bf(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Bf(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Bf(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=to(t,this.array),n=to(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=to(t,this.array),n=to(n,this.array),i=to(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=to(t,this.array),n=to(n,this.array),i=to(i,this.array),r=to(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let n=0;n<this.count;n++){let i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return new Bi(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new NL(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let n=0;n<this.count;n++){let i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},CZ=class extends Fs{constructor(){super(),this.isBone=!0,this.type="Bone"}},yg=class extends Wa{constructor(e=null,t=1,n=1,i,r,s,o,a,l=eo,c=eo,d,h){super(null,s,o,a,l,c,i,r,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},PZ=new vn,P4e=new vn,LL=class{constructor(e=[],t=[]){this.uuid=Mh(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new vn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let n=new vn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){let e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,s=e.length;r<s;r++)PZ.multiplyMatrices(e[r]?e[r].matrixWorld:P4e,t[r]),PZ.toArray(n,16*r);null!==i&&(i.needsUpdate=!0)}clone(){return new LL(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=TK(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let n=new yg(t,e,e,Vd,gc);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){let i=this.bones[t];if(i.name===e)return i}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){let r=e.bones[n],s=t[r];void 0===s&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),s=new CZ),this.bones.push(s),this.boneInverses.push((new vn).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++)e.bones.push(t[i].uuid),e.boneInverses.push(n[i].toArray());return e}},SZ=class extends Bi{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},_g=class extends SM{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Di(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},EZ=new oe,OZ=new oe,AZ=new vn,FL=new S_,PO=new $c,SO=class extends Fs{constructor(e=new Pi,t=new _g){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[0];for(let i=1,r=t.count;i<r;i++)EZ.fromBufferAttribute(t,i-1),OZ.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=EZ.distanceTo(OZ);e.setAttribute("lineDistance",new Qn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),PO.copy(n.boundingSphere),PO.applyMatrix4(i),PO.radius+=r,!1===e.ray.intersectsSphere(PO))return;AZ.copy(i).invert(),FL.copy(e.ray).applyMatrix4(AZ);let o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=new oe,c=new oe,d=new oe,h=new oe,u=this.isLineSegments?2:1,p=n.index,m=n.attributes.position;if(null!==p)for(let b=Math.max(0,s.start),x=Math.min(p.count,s.start+s.count)-1;b<x;b+=u){let w=p.getX(b),P=p.getX(b+1);if(l.fromBufferAttribute(m,w),c.fromBufferAttribute(m,P),FL.distanceSqToSegment(l,c,h,d)>a)continue;h.applyMatrix4(this.matrixWorld);let A=e.ray.origin.distanceTo(h);A<e.near||A>e.far||t.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}else for(let b=Math.max(0,s.start),x=Math.min(m.count,s.start+s.count)-1;b<x;b+=u){if(l.fromBufferAttribute(m,b),c.fromBufferAttribute(m,b+1),FL.distanceSqToSegment(l,c,h,d)>a)continue;h.applyMatrix4(this.matrixWorld);let w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||t.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++){let s=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}},TZ=new oe,DZ=new oe,RM=class extends SO{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[];for(let i=0,r=t.count;i<r;i+=2)TZ.fromBufferAttribute(t,i),DZ.fromBufferAttribute(t,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+TZ.distanceTo(DZ);e.setAttribute("lineDistance",new Qn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},S4e=class extends Wa{constructor(e,t,n,i,r,s,o,a,l){super(e,t,n,i,r,s,o,a,l),this.isVideoTexture=!0,this.minFilter=void 0!==s?s:Or,this.magFilter=void 0!==r?r:Or,this.generateMipmaps=!1;let c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function d(){c.needsUpdate=!0,e.requestVideoFrameCallback(d)})}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},pp=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let n,t=[],i=this.getPoint(0),r=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let s,n=this.getLengths(),i=0,r=n.length;s=t||e*n[r-1];let l,o=0,a=r-1;for(;o<=a;)if(i=Math.floor(o+(a-o)/2),l=n[i]-s,l<0)o=i+1;else{if(!(l>0)){a=i;break}a=i-1}if(i=a,n[i]===s)return i/(r-1);let c=n[i];return(i+(s-c)/(n[i+1]-c))/(r-1)}getTangent(e,t){let n=e-1e-4,i=e+1e-4;n<0&&(n=0),i>1&&(i=1);let r=this.getPoint(n),s=this.getPoint(i),o=t||(r.isVector2?new tt:new oe);return o.copy(s).sub(r).normalize(),o}getTangentAt(e,t){let n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){let n=new oe,i=[],r=[],s=[],o=new oe,a=new vn;for(let u=0;u<=e;u++)i[u]=this.getTangentAt(u/e,new oe);r[0]=new oe,s[0]=new oe;let l=Number.MAX_VALUE,c=Math.abs(i[0].x),d=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),d<=l&&(l=d,n.set(0,1,0)),h<=l&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),s[0].crossVectors(i[0],r[0]);for(let u=1;u<=e;u++){if(r[u]=r[u-1].clone(),s[u]=s[u-1].clone(),o.crossVectors(i[u-1],i[u]),o.length()>Number.EPSILON){o.normalize();let p=Math.acos(Ma(i[u-1].dot(i[u]),-1,1));r[u].applyMatrix4(a.makeRotationAxis(o,p))}s[u].crossVectors(i[u],r[u])}if(!0===t){let u=Math.acos(Ma(r[0].dot(r[e]),-1,1));u/=e,i[0].dot(o.crossVectors(r[0],r[e]))>0&&(u=-u);for(let p=1;p<=e;p++)r[p].applyMatrix4(a.makeRotationAxis(i[p],u*p)),s[p].crossVectors(i[p],r[p])}return{tangents:i,normals:r,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},EO=class extends pp{constructor(e=0,t=0,n=1,i=1,r=0,s=2*Math.PI,o=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(e,t){let n=t||new tt,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=s?0:i),!0===this.aClockwise&&!s&&(r===i?r=-i:r-=i);let o=this.aStartAngle+e*r,a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){let c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=a-this.aX,u=l-this.aY;a=h*c-u*d+this.aX,l=h*d+u*c+this.aY}return n.set(a,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}};function BL(){let e=0,t=0,n=0,i=0;function r(s,o,a,l){e=s,t=a,n=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,h){let u=(o-s)/c-(a-s)/(c+d)+(a-o)/d,p=(a-o)/d-(l-o)/(d+h)+(l-a)/h;u*=d,p*=d,r(o,a,u,p)},calc:function(s){let o=s*s;return e+t*s+n*o+i*(o*s)}}}var OO=new oe,zL=new BL,UL=new BL,VL=new BL;function IZ(e,t,n,i,r){let s=.5*(i-t),o=.5*(r-n),a=e*e;return(2*n-2*i+s+o)*(e*a)+(-3*n+3*i-2*s-o)*a+s*e+n}function kM(e,t,n,i){return function A4e(e,t){let n=1-e;return n*n*t}(e,t)+function T4e(e,t){return 2*(1-e)*e*t}(e,n)+function D4e(e,t){return e*e*t}(e,i)}function NM(e,t,n,i,r){return function I4e(e,t){let n=1-e;return n*n*n*t}(e,t)+function R4e(e,t){let n=1-e;return 3*n*n*e*t}(e,n)+function k4e(e,t){return 3*(1-e)*e*e*t}(e,i)+function N4e(e,t){return e*e*e*t}(e,r)}var pu=class extends pp{constructor(e=new tt,t=new tt,n=new tt,i=new tt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new tt){let n=t,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(NM(e,i.x,r.x,s.x,o.x),NM(e,i.y,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},AO=class extends pp{constructor(e=new oe,t=new oe,n=new oe,i=new oe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new oe){let n=t,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(NM(e,i.x,r.x,s.x,o.x),NM(e,i.y,r.y,s.y,o.y),NM(e,i.z,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},fu=class extends pp{constructor(e=new tt,t=new tt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new tt){let n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let n=t||new tt;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},RZ=class extends pp{constructor(e=new oe,t=new oe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new oe){let n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},bg=class extends pp{constructor(e=new tt,t=new tt,n=new tt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new tt){let n=t,i=this.v0,r=this.v1,s=this.v2;return n.set(kM(e,i.x,r.x,s.x),kM(e,i.y,r.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},jL=class extends pp{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new tt){let n=t,i=this.points,r=(i.length-1)*e,s=Math.floor(r),o=r-s,a=i[0===s?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],d=i[s>i.length-3?i.length-1:s+2];return n.set(IZ(o,a.x,l.x,c.x,d.x),IZ(o,a.y,l.y,c.y,d.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let i=e.points[t];this.points.push((new tt).fromArray(i))}return this}},F4e=Object.freeze({__proto__:null,ArcCurve:class extends EO{constructor(e,t,n,i,r,s){super(e,t,n,n,i,r,s),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends pp{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new oe){let l,c,n=t,i=this.points,r=i.length,s=(r-(this.closed?0:1))*e,o=Math.floor(s),a=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:0===a&&o===r-1&&(o=r-2,a=1),this.closed||o>0?l=i[(o-1)%r]:(OO.subVectors(i[0],i[1]).add(i[0]),l=OO);let d=i[o%r],h=i[(o+1)%r];if(this.closed||o+2<r?c=i[(o+2)%r]:(OO.subVectors(i[r-1],i[r-2]).add(i[r-1]),c=OO),"centripetal"===this.curveType||"chordal"===this.curveType){let u="chordal"===this.curveType?.5:.25,p=Math.pow(l.distanceToSquared(d),u),m=Math.pow(d.distanceToSquared(h),u),v=Math.pow(h.distanceToSquared(c),u);m<1e-4&&(m=1),p<1e-4&&(p=m),v<1e-4&&(v=m),zL.initNonuniformCatmullRom(l.x,d.x,h.x,c.x,p,m,v),UL.initNonuniformCatmullRom(l.y,d.y,h.y,c.y,p,m,v),VL.initNonuniformCatmullRom(l.z,d.z,h.z,c.z,p,m,v)}else"catmullrom"===this.curveType&&(zL.initCatmullRom(l.x,d.x,h.x,c.x,this.tension),UL.initCatmullRom(l.y,d.y,h.y,c.y,this.tension),VL.initCatmullRom(l.z,d.z,h.z,c.z,this.tension));return n.set(zL.calc(a),UL.calc(a),VL.calc(a)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let i=e.points[t];this.points.push((new oe).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:pu,CubicBezierCurve3:AO,EllipseCurve:EO,LineCurve:fu,LineCurve3:RZ,QuadraticBezierCurve:bg,QuadraticBezierCurve3:class extends pp{constructor(e=new oe,t=new oe,n=new oe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new oe){let n=t,i=this.v0,r=this.v1,s=this.v2;return n.set(kM(e,i.x,r.x,s.x),kM(e,i.y,r.y,s.y),kM(e,i.z,r.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:jL}),kZ=class extends pp{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new fu(t,e))}getPoint(e,t){let n=e*this.getLength(),i=this.getCurveLengths(),r=0;for(;r<i.length;){if(i[r]>=n){let s=i[r]-n,o=this.curves[r],a=o.getLength();return o.getPointAt(0===a?0:1-s/a,t)}r++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let n,t=[];for(let i=0,r=this.curves;i<r.length;i++){let s=r[i],a=s.getPoints(s.isEllipseCurve?2*e:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e);for(let l=0;l<a.length;l++){let c=a[l];n&&n.equals(c)||(t.push(c),n=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let i=e.curves[t];this.curves.push((new F4e[i.type]).fromJSON(i))}return this}},TO=class extends kZ{constructor(e){super(),this.type="Path",this.currentPoint=new tt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let n=new fu(this.currentPoint.clone(),new tt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){let r=new bg(this.currentPoint.clone(),new tt(e,t),new tt(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,s){let o=new pu(this.currentPoint.clone(),new tt(e,t),new tt(n,i),new tt(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),n=new jL(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,s){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,i,r,s),this}absarc(e,t,n,i,r,s){return this.absellipse(e,t,n,n,i,r,s),this}ellipse(e,t,n,i,r,s,o,a){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,i,r,s,o,a),this}absellipse(e,t,n,i,r,s,o,a){let l=new EO(e,t,n,i,r,s,o,a);if(this.curves.length>0){let d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);let c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},NZ=class extends Pi{constructor(e=[new tt(0,-.5),new tt(.5,0),new tt(0,.5)],t=12,n=0,i=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=Ma(i,0,2*Math.PI);let r=[],s=[],o=[],a=[],l=[],c=1/t,d=new oe,h=new tt,u=new oe,p=new oe,m=new oe,v=0,g=0;for(let b=0;b<=e.length-1;b++)switch(b){case 0:v=e[b+1].x-e[b].x,g=e[b+1].y-e[b].y,u.x=1*g,u.y=-v,u.z=0*g,m.copy(u),u.normalize(),a.push(u.x,u.y,u.z);break;case e.length-1:a.push(m.x,m.y,m.z);break;default:v=e[b+1].x-e[b].x,g=e[b+1].y-e[b].y,u.x=1*g,u.y=-v,u.z=0*g,p.copy(u),u.x+=m.x,u.y+=m.y,u.z+=m.z,u.normalize(),a.push(u.x,u.y,u.z),m.copy(p)}for(let b=0;b<=t;b++){let x=n+b*c*i,w=Math.sin(x),P=Math.cos(x);for(let A=0;A<=e.length-1;A++)d.x=e[A].x*w,d.y=e[A].y,d.z=e[A].x*P,s.push(d.x,d.y,d.z),h.x=b/t,h.y=A/(e.length-1),o.push(h.x,h.y),l.push(a[3*A+0]*w,a[3*A+1],a[3*A+0]*P)}for(let b=0;b<t;b++)for(let x=0;x<e.length-1;x++){let w=x+b*e.length,A=w+e.length,D=w+e.length+1,R=w+1;r.push(w,A,R),r.push(D,R,A)}this.setIndex(r),this.setAttribute("position",new Qn(s,3)),this.setAttribute("uv",new Qn(o,2)),this.setAttribute("normal",new Qn(l,3))}static fromJSON(e){return new NZ(e.points,e.segments,e.phiStart,e.phiLength)}},HL=class extends Pi{constructor(e=1,t=1,n=1,i=32,r=1,s=!1,o=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a};let l=this;i=Math.floor(i),r=Math.floor(r);let c=[],d=[],h=[],u=[],p=0,m=[],v=n/2,g=0;function x(w){let P=p,A=new tt,D=new oe,R=0,N=!0===w?e:t,k=!0===w?1:-1;for(let Q=1;Q<=i;Q++)d.push(0,v*k,0),h.push(0,k,0),u.push(.5,.5),p++;let L=p;for(let Q=0;Q<=i;Q++){let le=Q/i*a+o,ae=Math.cos(le),he=Math.sin(le);D.x=N*he,D.y=v*k,D.z=N*ae,d.push(D.x,D.y,D.z),h.push(0,k,0),A.x=.5*ae+.5,A.y=.5*he*k+.5,u.push(A.x,A.y),p++}for(let Q=0;Q<i;Q++){let le=P+Q,ae=L+Q;!0===w?c.push(ae,ae+1,le):c.push(ae+1,ae,le),R+=3}l.addGroup(g,R,!0===w?1:2),g+=R}(function b(){let w=new oe,P=new oe,A=0,D=(t-e)/n;for(let R=0;R<=r;R++){let N=[],k=R/r,L=k*(t-e)+e;for(let Q=0;Q<=i;Q++){let le=Q/i,ae=le*a+o,he=Math.sin(ae),xe=Math.cos(ae);P.x=L*he,P.y=-k*n+v,P.z=L*xe,d.push(P.x,P.y,P.z),w.set(he,D,xe).normalize(),h.push(w.x,w.y,w.z),u.push(le,1-k),N.push(p++)}m.push(N)}for(let R=0;R<i;R++)for(let N=0;N<r;N++){let L=m[N+1][R],Q=m[N+1][R+1],le=m[N][R+1];c.push(m[N][R],L,le),c.push(L,Q,le),A+=6}l.addGroup(g,A,0),g+=A})(),!1===s&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(c),this.setAttribute("position",new Qn(d,3)),this.setAttribute("normal",new Qn(h,3)),this.setAttribute("uv",new Qn(u,2))}static fromJSON(e){return new HL(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},LZ=class extends HL{constructor(e=1,t=1,n=32,i=1,r=!1,s=0,o=2*Math.PI){super(0,e,t,n,i,r,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:o}}static fromJSON(e){return new LZ(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},GL=class extends Pi{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};let r=[],s=[];function a(b,x,w,P){let A=P+1,D=[];for(let R=0;R<=A;R++){D[R]=[];let N=b.clone().lerp(w,R/A),k=x.clone().lerp(w,R/A),L=A-R;for(let Q=0;Q<=L;Q++)D[R][Q]=0===Q&&R===A?N:N.clone().lerp(k,Q/L)}for(let R=0;R<A;R++)for(let N=0;N<2*(A-R)-1;N++){let k=Math.floor(N/2);N%2==0?(h(D[R][k+1]),h(D[R+1][k]),h(D[R][k])):(h(D[R][k+1]),h(D[R+1][k+1]),h(D[R+1][k]))}}function h(b){r.push(b.x,b.y,b.z)}function u(b,x){let w=3*b;x.x=e[w+0],x.y=e[w+1],x.z=e[w+2]}function m(b,x,w,P){P<0&&1===b.x&&(s[x]=b.x-1),0===w.x&&0===w.z&&(s[x]=P/2/Math.PI+.5)}function v(b){return Math.atan2(b.z,-b.x)}function g(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}(function o(b){let x=new oe,w=new oe,P=new oe;for(let A=0;A<t.length;A+=3)u(t[A+0],x),u(t[A+1],w),u(t[A+2],P),a(x,w,P,b)})(i),function l(b){let x=new oe;for(let w=0;w<r.length;w+=3)x.x=r[w+0],x.y=r[w+1],x.z=r[w+2],x.normalize().multiplyScalar(b),r[w+0]=x.x,r[w+1]=x.y,r[w+2]=x.z}(n),function c(){let b=new oe;for(let x=0;x<r.length;x+=3){b.x=r[x+0],b.y=r[x+1],b.z=r[x+2];let w=v(b)/2/Math.PI+.5,P=g(b)/Math.PI+.5;s.push(w,1-P)}(function p(){let b=new oe,x=new oe,w=new oe,P=new oe,A=new tt,D=new tt,R=new tt;for(let N=0,k=0;N<r.length;N+=9,k+=6){b.set(r[N+0],r[N+1],r[N+2]),x.set(r[N+3],r[N+4],r[N+5]),w.set(r[N+6],r[N+7],r[N+8]),A.set(s[k+0],s[k+1]),D.set(s[k+2],s[k+3]),R.set(s[k+4],s[k+5]),P.copy(b).add(x).add(w).divideScalar(3);let L=v(P);m(A,k+0,b,L),m(D,k+2,x,L),m(R,k+4,w,L)}})(),function d(){for(let b=0;b<s.length;b+=6){let x=s[b+0],w=s[b+2],P=s[b+4],A=Math.max(x,w,P),D=Math.min(x,w,P);A>.9&&D<.1&&(x<.2&&(s[b+0]+=1),w<.2&&(s[b+2]+=1),P<.2&&(s[b+4]+=1))}}()}(),this.setAttribute("position",new Qn(r,3)),this.setAttribute("normal",new Qn(r.slice(),3)),this.setAttribute("uv",new Qn(s,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new GL(e.vertices,e.indices,e.radius,e.details)}},FZ=class extends GL{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new FZ(e.radius,e.detail)}},DO=class extends TO{constructor(e){super(e),this.uuid=Mh(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let i=e.holes[t];this.holes.push((new TO).fromJSON(i))}return this}};function BZ(e,t,n,i,r){let s,o;if(r===function eLe(e,t,n,i){let r=0;for(let s=t,o=n-i;s<n;s+=i)r+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return r}(e,t,n,i)>0)for(s=t;s<n;s+=i)o=VZ(s,e[s],e[s+1],o);else for(s=n-i;s>=t;s-=i)o=VZ(s,e[s],e[s+1],o);return o&&IO(o,o.next)&&(BM(o),o=o.next),o}function Bv(e,t){if(!e)return e;t||(t=e);let i,n=e;do{if(i=!1,n.steiner||!IO(n,n.next)&&0!==To(n.prev,n,n.next))n=n.next;else{if(BM(n),n=t=n.prev,n===n.next)break;i=!0}}while(i||n!==t);return t}function LM(e,t,n,i,r,s,o){if(!e)return;!o&&s&&function Y4e(e,t,n,i){let r=e;do{0===r.z&&(r.z=WL(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function $4e(e){let t,n,i,r,s,o,a,l,c=1;do{for(n=e,e=null,s=null,o=0;n;){for(o++,i=n,a=0,t=0;t<c&&(a++,i=i.nextZ,i);t++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:e=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1)}(r)}(e,i,r,s);let l,c,a=e;for(;e.prev!==e.next;)if(l=e.prev,c=e.next,s?U4e(e,i,r,s):z4e(e))t.push(l.i/n|0),t.push(e.i/n|0),t.push(c.i/n|0),BM(e),e=c.next,a=c.next;else if((e=c)===a){o?1===o?LM(e=V4e(Bv(e),t,n),t,n,i,r,s,2):2===o&&j4e(e,t,n,i,r,s):LM(Bv(e),t,n,i,r,s,1);break}}function z4e(e){let t=e.prev,n=e,i=e.next;if(To(t,n,i)>=0)return!1;let r=t.x,s=n.x,o=i.x,a=t.y,l=n.y,c=i.y,d=r<s?r<o?r:o:s<o?s:o,h=a<l?a<c?a:c:l<c?l:c,u=r>s?r>o?r:o:s>o?s:o,p=a>l?a>c?a:c:l>c?l:c,m=i.next;for(;m!==t;){if(m.x>=d&&m.x<=u&&m.y>=h&&m.y<=p&&W_(r,a,s,l,o,c,m.x,m.y)&&To(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function U4e(e,t,n,i){let r=e.prev,s=e,o=e.next;if(To(r,s,o)>=0)return!1;let a=r.x,l=s.x,c=o.x,d=r.y,h=s.y,u=o.y,p=a<l?a<c?a:c:l<c?l:c,m=d<h?d<u?d:u:h<u?h:u,v=a>l?a>c?a:c:l>c?l:c,g=d>h?d>u?d:u:h>u?h:u,b=WL(p,m,t,n,i),x=WL(v,g,t,n,i),w=e.prevZ,P=e.nextZ;for(;w&&w.z>=b&&P&&P.z<=x;){if(w.x>=p&&w.x<=v&&w.y>=m&&w.y<=g&&w!==r&&w!==o&&W_(a,d,l,h,c,u,w.x,w.y)&&To(w.prev,w,w.next)>=0||(w=w.prevZ,P.x>=p&&P.x<=v&&P.y>=m&&P.y<=g&&P!==r&&P!==o&&W_(a,d,l,h,c,u,P.x,P.y)&&To(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;w&&w.z>=b;){if(w.x>=p&&w.x<=v&&w.y>=m&&w.y<=g&&w!==r&&w!==o&&W_(a,d,l,h,c,u,w.x,w.y)&&To(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;P&&P.z<=x;){if(P.x>=p&&P.x<=v&&P.y>=m&&P.y<=g&&P!==r&&P!==o&&W_(a,d,l,h,c,u,P.x,P.y)&&To(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function V4e(e,t,n){let i=e;do{let r=i.prev,s=i.next.next;!IO(r,s)&&zZ(r,i,i.next,s)&&FM(r,s)&&FM(s,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(s.i/n|0),BM(i),BM(i.next),i=e=s),i=i.next}while(i!==e);return Bv(i)}function j4e(e,t,n,i,r,s){let o=e;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Z4e(o,a)){let l=UZ(o,a);return o=Bv(o,o.next),l=Bv(l,l.next),LM(o,t,n,i,r,s,0),void LM(l,t,n,i,r,s,0)}a=a.next}o=o.next}while(o!==e)}function G4e(e,t){return e.x-t.x}function W4e(e,t){let n=function q4e(e,t){let r,n=t,i=-1/0,s=e.x,o=e.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){let u=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(u<=s&&u>i&&(i=u,r=n.x<n.next.x?n:n.next,u===s))return r}n=n.next}while(n!==t);if(!r)return null;let h,a=r,l=r.x,c=r.y,d=1/0;n=r;do{s>=n.x&&n.x>=l&&s!==n.x&&W_(o<c?s:i,o,l,c,o<c?i:s,o,n.x,n.y)&&(h=Math.abs(o-n.y)/(s-n.x),FM(n,e)&&(h<d||h===d&&(n.x>r.x||n.x===r.x&&X4e(r,n)))&&(r=n,d=h)),n=n.next}while(n!==a);return r}(e,t);if(!n)return t;let i=UZ(n,e);return Bv(i,i.next),Bv(n,n.next)}function X4e(e,t){return To(e.prev,e,t.prev)<0&&To(t.next,e,e.next)<0}function WL(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function K4e(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function W_(e,t,n,i,r,s,o,a){return(r-o)*(t-a)>=(e-o)*(s-a)&&(e-o)*(i-a)>=(n-o)*(t-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function Z4e(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function Q4e(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&zZ(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(FM(e,t)&&FM(t,e)&&function J4e(e,t){let n=e,i=!1,r=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(To(e.prev,e,t.prev)||To(e,t.prev,t))||IO(e,t)&&To(e.prev,e,e.next)>0&&To(t.prev,t,t.next)>0)}function To(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function IO(e,t){return e.x===t.x&&e.y===t.y}function zZ(e,t,n,i){let r=kO(To(e,t,n)),s=kO(To(e,t,i)),o=kO(To(n,i,e)),a=kO(To(n,i,t));return!!(r!==s&&o!==a||0===r&&RO(e,n,t)||0===s&&RO(e,i,t)||0===o&&RO(n,e,i)||0===a&&RO(n,t,i))}function RO(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function kO(e){return e>0?1:e<0?-1:0}function FM(e,t){return To(e.prev,e,e.next)<0?To(e,t,e.next)>=0&&To(e,e.prev,t)>=0:To(e,t,e.prev)<0||To(e,e.next,t)<0}function UZ(e,t){let n=new qL(e.i,e.x,e.y),i=new qL(t.i,t.x,t.y),r=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function VZ(e,t,n,i){let r=new qL(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function BM(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function qL(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}var jZ=class{static area(e){let t=e.length,n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}static isClockWise(e){return jZ.area(e)<0}static triangulateShape(e,t){let n=[],i=[],r=[];HZ(e),GZ(n,e);let s=e.length;t.forEach(HZ);for(let a=0;a<t.length;a++)i.push(s),s+=t[a].length,GZ(n,t[a]);let o=function(e,t,n=2){let a,l,c,d,h,u,p,i=t&&t.length,r=i?t[0]*n:e.length,s=BZ(e,0,r,n,!0),o=[];if(!s||s.next===s.prev)return o;if(i&&(s=function H4e(e,t,n,i){let s,o,a,l,c,r=[];for(s=0,o=t.length;s<o;s++)a=t[s]*i,l=s<o-1?t[s+1]*i:e.length,c=BZ(e,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(K4e(c));for(r.sort(G4e),s=0;s<r.length;s++)n=W4e(r[s],n);return n}(e,t,s,n)),e.length>80*n){a=c=e[0],l=d=e[1];for(let m=n;m<r;m+=n)h=e[m],u=e[m+1],h<a&&(a=h),u<l&&(l=u),h>c&&(c=h),u>d&&(d=u);p=Math.max(c-a,d-l),p=0!==p?32767/p:0}return LM(s,o,n,a,l,p,0),o}(n,i);for(let a=0;a<o.length;a+=3)r.push(o.slice(a,a+3));return r}};function HZ(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function GZ(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var WZ=class extends GL{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new WZ(e.radius,e.detail)}},XL=class extends Pi{constructor(e=1,t=32,n=16,i=0,r=2*Math.PI,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));let a=Math.min(s+o,Math.PI),l=0,c=[],d=new oe,h=new oe,u=[],p=[],m=[],v=[];for(let g=0;g<=n;g++){let b=[],x=g/n,w=0;0==g&&0==s?w=.5/t:g==n&&a==Math.PI&&(w=-.5/t);for(let P=0;P<=t;P++){let A=P/t;d.x=-e*Math.cos(i+A*r)*Math.sin(s+x*o),d.y=e*Math.cos(s+x*o),d.z=e*Math.sin(i+A*r)*Math.sin(s+x*o),p.push(d.x,d.y,d.z),h.copy(d).normalize(),m.push(h.x,h.y,h.z),v.push(A+w,1-x),b.push(l++)}c.push(b)}for(let g=0;g<n;g++)for(let b=0;b<t;b++){let w=c[g][b],P=c[g+1][b],A=c[g+1][b+1];(0!==g||s>0)&&u.push(c[g][b+1],w,A),(g!==n-1||a<Math.PI)&&u.push(w,P,A)}this.setIndex(u),this.setAttribute("position",new Qn(p,3)),this.setAttribute("normal",new Qn(m,3)),this.setAttribute("uv",new Qn(v,2))}static fromJSON(e){return new XL(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},qZ=class extends Pi{constructor(e=1,t=.4,n=64,i=8,r=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:s},n=Math.floor(n),i=Math.floor(i);let o=[],a=[],l=[],c=[],d=new oe,h=new oe,u=new oe,p=new oe,m=new oe,v=new oe,g=new oe;for(let x=0;x<=n;++x){let w=x/n*r*Math.PI*2;b(w,r,s,e,u),b(w+.01,r,s,e,p),v.subVectors(p,u),g.addVectors(p,u),m.crossVectors(v,g),g.crossVectors(m,v),m.normalize(),g.normalize();for(let P=0;P<=i;++P){let A=P/i*Math.PI*2,D=-t*Math.cos(A),R=t*Math.sin(A);d.x=u.x+(D*g.x+R*m.x),d.y=u.y+(D*g.y+R*m.y),d.z=u.z+(D*g.z+R*m.z),a.push(d.x,d.y,d.z),h.subVectors(d,u).normalize(),l.push(h.x,h.y,h.z),c.push(x/n),c.push(P/i)}}for(let x=1;x<=n;x++)for(let w=1;w<=i;w++){let A=(i+1)*x+(w-1),D=(i+1)*x+w,R=(i+1)*(x-1)+w;o.push((i+1)*(x-1)+(w-1),A,R),o.push(A,D,R)}function b(x,w,P,A,D){let R=Math.cos(x),N=Math.sin(x),k=P/w*x,L=Math.cos(k);D.x=A*(2+L)*.5*R,D.y=A*(2+L)*N*.5,D.z=A*Math.sin(k)*.5}this.setIndex(o),this.setAttribute("position",new Qn(a,3)),this.setAttribute("normal",new Qn(l,3)),this.setAttribute("uv",new Qn(c,2))}static fromJSON(e){return new qZ(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}};function xg(e,t,n){return XZ(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function NO(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function XZ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function tLe(e){let n=e.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(function t(r,s){return e[r]-e[s]}),i}function YZ(e,t,n){let i=e.length,r=new e.constructor(i);for(let s=0,o=0;o!==i;++s){let a=n[s]*t;for(let l=0;l!==t;++l)r[o++]=e[a+l]}return r}function $Z(e,t,n,i){let r=1,s=e[0];for(;void 0!==s&&void 0===s[i];)s=e[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(t.push(s.time),n.push.apply(n,o)),s=e[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(t.push(s.time),o.toArray(n,n.length)),s=e[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(t.push(s.time),n.push(o)),s=e[r++]}while(void 0!==s)}var LO=class{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let s;n:{i:if(!(e<i)){for(let o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(r=i,i=t[++n],e<i)break t}s=t.length;break n}if(e>=r)break e;{let o=t[1];e<o&&(n=2,r=o);for(let a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(i=r,r=t[--n-1],e>=r)break t}s=n,n=0}}for(;n<s;){let o=n+s>>>1;e<t[o]?s=o:n=o+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let s=0;s!==i;++s)t[s]=n[r+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},nLe=class extends LO{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:b_,endingEnd:b_}}intervalChanged_(e,t,n){let i=this.parameterPositions,r=e-2,s=e+1,o=i[r],a=i[s];if(void 0===o)switch(this.getSettings_().endingStart){case x_:r=e,o=2*t-n;break;case 2402:r=i.length-2,o=t+i[r]-i[r+1];break;default:r=e,o=n}if(void 0===a)switch(this.getSettings_().endingEnd){case x_:s=e,a=2*n-t;break;case 2402:s=1,a=n+i[1]-i[0];break;default:s=e-1,a=t}let l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(a-n),this._offsetPrev=r*c,this._offsetNext=s*c}interpolate_(e,t,n,i){let r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,c=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,u=this._weightNext,p=(n-t)/(i-t),m=p*p,v=m*p,g=-h*v+2*h*m-h*p,b=(1+h)*v+(-1.5-2*h)*m+(-.5+h)*p+1,x=(-1-u)*v+(1.5+u)*m+.5*p,w=u*v-u*m;for(let P=0;P!==o;++P)r[P]=g*s[c+P]+b*s[l+P]+x*s[a+P]+w*s[d+P];return r}},KZ=class extends LO{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){let r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,c=(n-t)/(i-t),d=1-c;for(let h=0;h!==o;++h)r[h]=s[l+h]*d+s[a+h]*c;return r}},iLe=class extends LO{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}},fp=class{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=NO(t,this.TimeBufferType),this.values=NO(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){let n,t=e.constructor;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:NO(e.times,Array),values:NO(e.values,Array)};let i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new iLe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new KZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new nLe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){let n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){let t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){let t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){let n=this.times,i=n.length,r=0,s=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==r||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);let o=this.getValueSize();this.times=xg(n,r,s),this.values=xg(this.values,r*o,s*o)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==r;o++){let a=n[o];if("number"==typeof a&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,a),e=!1;break}if(null!==s&&s>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,a,s),e=!1;break}s=a}if(void 0!==i&&XZ(i))for(let o=0,a=i.length;o!==a;++o){let l=i[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),e=!1;break}}return e}optimize(){let e=xg(this.times),t=xg(this.values),n=this.getValueSize(),i=2302===this.getInterpolation(),r=e.length-1,s=1;for(let o=1;o<r;++o){let a=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==e[0]))if(i)a=!0;else{let d=o*n,h=d-n,u=d+n;for(let p=0;p!==n;++p){let m=t[d+p];if(m!==t[h+p]||m!==t[u+p]){a=!0;break}}}if(a){if(o!==s){e[s]=e[o];let d=o*n,h=s*n;for(let u=0;u!==n;++u)t[h+u]=t[d+u]}++s}}if(r>0){e[s]=e[r];for(let o=r*n,a=s*n,l=0;l!==n;++l)t[a+l]=t[o+l];++s}return s!==e.length?(this.times=xg(e,0,s),this.values=xg(t,0,s*n)):(this.times=e,this.values=t),this}clone(){let e=xg(this.times,0),t=xg(this.values,0),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}};fp.prototype.TimeBufferType=Float32Array,fp.prototype.ValueBufferType=Float32Array,fp.prototype.DefaultInterpolation=2301;var q_=class extends fp{};q_.prototype.ValueTypeName="bool",q_.prototype.ValueBufferType=Array,q_.prototype.DefaultInterpolation=2300,q_.prototype.InterpolantFactoryMethodLinear=void 0,q_.prototype.InterpolantFactoryMethodSmooth=void 0;var ZZ=class extends fp{};ZZ.prototype.ValueTypeName="color";var FO=class extends fp{};FO.prototype.ValueTypeName="number";var rLe=class extends LO{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){let r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=(n-t)/(i-t),l=e*o;for(let c=l+o;l!==c;l+=4)Qi.slerpFlat(r,0,s,l-o,s,l,a);return r}},zM=class extends fp{InterpolantFactoryMethodLinear(e){return new rLe(this.times,this.values,this.getValueSize(),e)}};zM.prototype.ValueTypeName="quaternion",zM.prototype.DefaultInterpolation=2301,zM.prototype.InterpolantFactoryMethodSmooth=void 0;var X_=class extends fp{};X_.prototype.ValueTypeName="string",X_.prototype.ValueBufferType=Array,X_.prototype.DefaultInterpolation=2300,X_.prototype.InterpolantFactoryMethodLinear=void 0,X_.prototype.InterpolantFactoryMethodSmooth=void 0;var BO=class extends fp{};BO.prototype.ValueTypeName="vector";var YL=class{constructor(e,t=-1,n,i=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Mh(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],n=e.tracks,i=1/(e.fps||1);for(let s=0,o=n.length;s!==o;++s)t.push(oLe(n[s]).scale(i));let r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){let t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,s=n.length;r!==s;++r)t.push(fp.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(e,t,n,i){let r=t.length,s=[];for(let o=0;o<r;o++){let a=[],l=[];a.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);let c=tLe(a);a=YZ(a,1,c),l=YZ(l,1,c),!i&&0===a[0]&&(a.push(r),l.push(l[0])),s.push(new FO(".morphTargetInfluences["+t[o].name+"]",a,l).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations);for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){let i={},r=/^([\w-]*?)([\d]+)$/;for(let o=0,a=e.length;o<a;o++){let l=e[o],c=l.name.match(r);if(c&&c.length>1){let d=c[1],h=i[d];h||(i[d]=h=[]),h.push(l)}}let s=[];for(let o in i)s.push(this.CreateFromMorphTargetSequence(o,i[o],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let n=function(c,d,h,u,p){if(0!==h.length){let m=[],v=[];$Z(h,m,v,u),0!==m.length&&p.push(new c(d,m,v))}},i=[],r=e.name||"default",s=e.fps||30,o=e.blendMode,a=e.length||-1,l=e.hierarchy||[];for(let c=0;c<l.length;c++){let d=l[c].keys;if(d&&0!==d.length)if(d[0].morphTargets){let u,h={};for(u=0;u<d.length;u++)if(d[u].morphTargets)for(let p=0;p<d[u].morphTargets.length;p++)h[d[u].morphTargets[p]]=-1;for(let p in h){let m=[],v=[];for(let g=0;g!==d[u].morphTargets.length;++g){let b=d[u];m.push(b.time),v.push(b.morphTarget===p?1:0)}i.push(new FO(".morphTargetInfluence["+p+"]",m,v))}a=h.length*s}else{let h=".bones["+t[c].name+"]";n(BO,h+".position",d,"pos",i),n(zM,h+".quaternion",d,"rot",i),n(BO,h+".scale",d,"scl",i)}}return 0===i.length?null:new this(r,a,i,o)}resetDuration(){let t=0;for(let n=0,i=this.tracks.length;n!==i;++n){let r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function oLe(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=function sLe(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return FO;case"vector":case"vector2":case"vector3":case"vector4":return BO;case"color":return ZZ;case"quaternion":return zM;case"bool":case"boolean":return q_;case"string":return X_}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){let n=[],i=[];$Z(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var QZ={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},JZ=class{constructor(e,t,n){let a,i=this,r=!1,s=0,o=0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(c){o++,!1===r&&void 0!==i.onStart&&i.onStart(c,s,o),r=!0},this.itemEnd=function(c){s++,void 0!==i.onProgress&&i.onProgress(c,s,o),s===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(c){void 0!==i.onError&&i.onError(c)},this.resolveURL=function(c){return a?a(c):c},this.setURLModifier=function(c){return a=c,this},this.addHandler=function(c,d){return l.push(c,d),this},this.removeHandler=function(c){let d=l.indexOf(c);return-1!==d&&l.splice(d,2),this},this.getHandler=function(c){for(let d=0,h=l.length;d<h;d+=2){let u=l[d],p=l[d+1];if(u.global&&(u.lastIndex=0),u.test(c))return p}return null}}},aLe=new JZ,$L=class{constructor(e){this.manager=void 0!==e?e:aLe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let n=this;return new Promise(function(i,r){n.load(e,i,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},Gf={},lLe=class extends Error{constructor(e,t){super(e),this.response=t}},KL=class extends $L{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let r=QZ.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(void 0!==Gf[e])return void Gf[e].push({onLoad:t,onProgress:n,onError:i});Gf[e]=[],Gf[e].push({onLoad:t,onProgress:n,onError:i});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(s).then(l=>{if(200===l.status||0===l.status){if(0===l.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===l.body||void 0===l.body.getReader)return l;let c=Gf[e],d=l.body.getReader(),h=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),u=h?parseInt(h):0,p=0!==u,m=0,v=new ReadableStream({start(g){!function b(){d.read().then(({done:x,value:w})=>{if(x)g.close();else{m+=w.byteLength;let P=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:u});for(let A=0,D=c.length;A<D;A++){let R=c[A];R.onProgress&&R.onProgress(P)}g.enqueue(w),b()}})}()}});return new Response(v)}throw new lLe(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(a){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>(new DOMParser).parseFromString(c,o));case"json":return l.json();default:if(void 0===o)return l.text();{let c=/charset="?([^;"\s]*)"?/i.exec(o),d=c&&c[1]?c[1].toLowerCase():void 0,h=new TextDecoder(d);return l.arrayBuffer().then(u=>h.decode(u))}}}).then(l=>{QZ.add(e,l);let c=Gf[e];delete Gf[e];for(let d=0,h=c.length;d<h;d++){let u=c[d];u.onLoad&&u.onLoad(l)}}).catch(l=>{let c=Gf[e];if(void 0===c)throw this.manager.itemError(e),l;delete Gf[e];for(let d=0,h=c.length;d<h;d++){let u=c[d];u.onError&&u.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},UM=class extends Fs{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Di(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}},cLe=class extends UM{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Fs.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Di(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},ZL=new vn,eQ=new oe,tQ=new oe,QL=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new tt(512,512),this.map=null,this.mapPass=null,this.matrix=new vn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new EL,this._frameExtents=new tt(1,1),this._viewportCount=1,this._viewports=[new mr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,n=this.matrix;eQ.setFromMatrixPosition(e.matrixWorld),t.position.copy(eQ),tQ.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(tQ),t.updateMatrixWorld(),ZL.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ZL),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(ZL)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){let e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},dLe=class extends QL{constructor(){super(new Wl(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,n=2*xM*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(n!==t.fov||i!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},hLe=class extends UM{constructor(e,t,n=0,i=Math.PI/3,r=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Fs.DEFAULT_UP),this.updateMatrix(),this.target=new Fs,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.map=null,this.shadow=new dLe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},nQ=new vn,VM=new oe,JL=new oe,uLe=class extends QL{constructor(){super(new Wl(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new tt(4,2),this._viewportCount=6,this._viewports=[new mr(2,1,1,1),new mr(0,1,1,1),new mr(3,1,1,1),new mr(1,1,1,1),new mr(3,0,1,1),new mr(1,0,1,1)],this._cubeDirections=[new oe(1,0,0),new oe(-1,0,0),new oe(0,0,1),new oe(0,0,-1),new oe(0,1,0),new oe(0,-1,0)],this._cubeUps=[new oe(0,1,0),new oe(0,1,0),new oe(0,1,0),new oe(0,1,0),new oe(0,0,1),new oe(0,0,-1)]}updateMatrices(e,t=0){let n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),VM.setFromMatrixPosition(e.matrixWorld),n.position.copy(VM),JL.copy(n.position),JL.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(JL),n.updateMatrixWorld(),i.makeTranslation(-VM.x,-VM.y,-VM.z),nQ.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nQ)}},pLe=class extends UM{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new uLe}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},fLe=class extends QL{constructor(){super(new OL(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},mLe=class extends UM{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Fs.DEFAULT_UP),this.updateMatrix(),this.target=new Fs,this.shadow=new fLe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},iQ=class extends Pi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},rQ=class extends $L{constructor(e){super(e)}load(e,t,n,i){let r=this,s=new KL(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,function(o){try{t(r.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)}parse(e){let t={},n={};function i(h,u){if(void 0!==t[u])return t[u];let p=h.interleavedBuffers[u],m=function r(h,u){if(void 0!==n[u])return n[u];let m=new Uint32Array(h.arrayBuffers[u]).buffer;return n[u]=m,m}(h,p.buffer),v=tO(p.type,m),g=new C4e(v,p.stride);return g.uuid=p.uuid,t[u]=g,g}let s=e.isInstancedBufferGeometry?new iQ:new Pi,o=e.data.index;if(void 0!==o){let h=tO(o.type,o.array);s.setIndex(new Bi(h,1))}let a=e.data.attributes;for(let h in a){let p,u=a[h];if(u.isInterleavedBufferAttribute){let m=i(e.data,u.data);p=new NL(m,u.itemSize,u.offset,u.normalized)}else{let m=tO(u.type,u.array);p=new(u.isInstancedBufferAttribute?SZ:Bi)(m,u.itemSize,u.normalized)}void 0!==u.name&&(p.name=u.name),void 0!==u.usage&&p.setUsage(u.usage),void 0!==u.updateRange&&(p.updateRange.offset=u.updateRange.offset,p.updateRange.count=u.updateRange.count),s.setAttribute(h,p)}let l=e.data.morphAttributes;if(l)for(let h in l){let u=l[h],p=[];for(let m=0,v=u.length;m<v;m++){let b,g=u[m];if(g.isInterleavedBufferAttribute){let x=i(e.data,g.data);b=new NL(x,g.itemSize,g.offset,g.normalized)}else{let x=tO(g.type,g.array);b=new Bi(x,g.itemSize,g.normalized)}void 0!==g.name&&(b.name=g.name),p.push(b)}s.morphAttributes[h]=p}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let c=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==c)for(let h=0,u=c.length;h!==u;++h){let p=c[h];s.addGroup(p.start,p.count,p.materialIndex)}let d=e.data.boundingSphere;if(void 0!==d){let h=new oe;void 0!==d.center&&h.fromArray(d.center),s.boundingSphere=new $c(h,d.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}};function sQ(){return(typeof performance>"u"?Date:performance).now()}var vLe=class{constructor(e,t,n){let i,r,s;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let n=this.buffer,i=this.valueSize,r=e*i+i,s=this.cumulativeWeight;if(0===s){for(let o=0;o!==i;++o)n[r+o]=n[o];s=t}else s+=t,this._mixBufferRegion(n,r,0,t/s,i);this.cumulativeWeight=s}accumulateAdditive(e){let t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1&&this._mixBufferRegion(n,i,t*this._origIndex,1-r,t),s>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let a=t,l=t+t;a!==l;++a)if(n[a]!==n[a+t]){o.setValue(n,i);break}}saveOriginalState(){let t=this.buffer,n=this.valueSize,i=n*this._origIndex;this.binding.getValue(t,i);for(let r=n,s=i;r!==s;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let s=0;s!==r;++s)e[t+s]=e[n+s]}_slerp(e,t,n,i){Qi.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){let s=this._workIndex*r;Qi.multiplyQuaternionsFlat(e,s,e,t,e,n),Qi.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,n,i,r){let s=1-i;for(let o=0;o!==r;++o){let a=t+o;e[a]=e[a]*s+e[n+o]*i}}_lerpAdditive(e,t,n,i,r){for(let s=0;s!==r;++s){let o=t+s;e[o]=e[o]+e[n+s]*i}}},eF="\\[\\]\\.:\\/",yLe=new RegExp("["+eF+"]","g"),tF="[^"+eF+"]",_Le="[^"+eF.replace("\\.","")+"]",bLe=/((?:WC+[\/:])*)/.source.replace("WC",tF),xLe=/(WCOD+)?/.source.replace("WCOD",_Le),wLe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",tF),MLe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",tF),CLe=new RegExp("^"+bLe+xLe+wLe+MLe+"$"),PLe=["material","materials","bones","map"],Zs=class{constructor(e,t,n){this.path=t,this.parsedPath=n||Zs.parseTrackName(t),this.node=Zs.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Zs.Composite(e,t,n):new Zs(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(yLe,"")}static parseTrackName(e){let t=CLe.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){let r=n.nodeName.substring(i+1);-1!==PLe.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){let n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){let n=function(r){for(let s=0;s<r.length;s++){let o=r[s];if(o.name===t||o.uuid===t)return o;let a=n(o.children);if(a)return a}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=Zs.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let l=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===l){l=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==l){if(void 0===e[l])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[l]}}let s=e[i];if(void 0===s)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+i+" but it wasn't found.",e);let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}a=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(a=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};Zs.Composite=class{constructor(e,t,n){let i=n||Zs.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();let i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(e,t)}setValue(e,t){let n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Zs.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Zs.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Zs.prototype.GetterByBindingType=[Zs.prototype._getValue_direct,Zs.prototype._getValue_array,Zs.prototype._getValue_arrayElement,Zs.prototype._getValue_toArray],Zs.prototype.SetterByBindingTypeAndVersioning=[[Zs.prototype._setValue_direct,Zs.prototype._setValue_direct_setNeedsUpdate,Zs.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Zs.prototype._setValue_array,Zs.prototype._setValue_array_setNeedsUpdate,Zs.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Zs.prototype._setValue_arrayElement,Zs.prototype._setValue_arrayElement_setNeedsUpdate,Zs.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Zs.prototype._setValue_fromArray,Zs.prototype._setValue_fromArray_setNeedsUpdate,Zs.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var OLe=new Float32Array(1),ALe=class extends Sl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,s=e._propertyBindings,o=e._interpolants,a=n.uuid,l=this._bindingsByRootAndName,c=l[a];void 0===c&&(c={},l[a]=c);for(let d=0;d!==r;++d){let h=i[d],u=h.name,p=c[u];if(void 0!==p)++p.referenceCount,s[d]=p;else{if(p=s[d],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,a,u));continue}p=new vLe(Zs.create(n,u,t&&t._propertyBindings[d].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,a,u),s[d]=p}o[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){let n=(e._localRoot||this._root).uuid,i=e._clip.uuid,r=this._actionsByClip[i];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,i,n)}let t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){let r=t[n];0==r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){let r=t[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){let i=this._actions,r=this._actionsByClip,s=r[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=s;else{let o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){let t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;let r=e._clip.uuid,s=this._actionsByClip,o=s[r],a=o.knownActions,l=a[a.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete s[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){let r=t[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}}_lendAction(e){let t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){let t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){let i=this._bindingsByRootAndName,r=this._bindings,s=i[t];void 0===s&&(s={},i[t]=s),s[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){let t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,o=s[i],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete o[r],0===Object.keys(o).length&&delete s[i]}_lendBinding(e){let t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){let t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new KZ(new Float32Array(2),new Float32Array(2),1,OLe),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){let t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){let i=t||this._root,r=i.uuid,s="string"==typeof e?YL.findByName(i,e):e,o=null!==s?s.uuid:e,a=this._actionsByClip[o],l=null;if(void 0===n&&(n=null!==s?s.blendMode:2500),void 0!==a){let d=a.actionByRoot[r];if(void 0!==d&&d.blendMode===n)return d;l=a.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;let c=new class{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;let r=t.tracks,s=r.length,o=new Array(s),a={endingStart:b_,endingEnd:b_};for(let l=0;l!==s;++l){let c=r[l].createInterpolant(null);o[l]=c,c.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){let i=this._clip.duration,r=e._clip.duration,o=i/r;e.warp(1,r/i,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){let e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){let i=this._mixer,r=i.time,s=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);let a=o.parameterPositions,l=o.sampleValues;return a[0]=r,a[1]=r+n,l[0]=e/s,l[1]=t/s,this}stopWarping(){let e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);let r=this._startTime;if(null!==r){let a=(e-r)*n;a<0||0===n?t=0:(this._startTime=null,t=n*a)}t*=this._updateTimeScale(e);let s=this._updateTime(t),o=this._updateWeight(e);if(o>0){let a=this._interpolants,l=this._propertyBindings;if(2501===this.blendMode)for(let c=0,d=a.length;c!==d;++c)a[c].evaluate(s),l[c].accumulateAdditive(o);else for(let c=0,d=a.length;c!==d;++c)a[c].evaluate(s),l[c].accumulate(i,o)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let n=this._weightInterpolant;if(null!==n){let i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,n=this.loop,i=this.time+e,r=this._loopCount,s=n===Z4;if(0===e)return-1===r?i:s&&1==(1&r)?t-i:i;if(n===PK){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),i>=t||i<0){let o=Math.floor(i/t);i-=t*o,r+=Math.abs(o);let a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){let l=e<0;this._setEndings(l,!l,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(s&&1==(1&r))return t-i}return i}_setEndings(e,t,n){let i=this._interpolantSettings;n?(i.endingStart=x_,i.endingEnd=x_):(i.endingStart=e?this.zeroSlopeAtStart?x_:b_:2402,i.endingEnd=t?this.zeroSlopeAtEnd?x_:b_:2402)}_scheduleFading(e,t,n){let i=this._mixer,r=i.time,s=this._weightInterpolant;null===s&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);let o=s.parameterPositions,a=s.sampleValues;return o[0]=r,a[0]=t,o[1]=r+e,a[1]=n,this}}(this,s,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,r),c}existingAction(e,t){let n=t||this._root,i=n.uuid,r="string"==typeof e?YL.findByName(n,e):e,o=this._actionsByClip[r?r.uuid:e];return void 0!==o&&o.actionByRoot[i]||null}stopAllAction(){let e=this._actions;for(let n=this._nActiveActions-1;n>=0;--n)e[n].stop();return this}update(e){let t=this._actions,n=this._nActiveActions,i=this.time+=e*=this.timeScale,r=Math.sign(e),s=this._accuIndex^=1;for(let l=0;l!==n;++l)t[l]._update(i,e,r,s);let o=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)o[l].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){let s=r.knownActions;for(let o=0,a=s.length;o!==a;++o){let l=s[o];this._deactivateAction(l);let c=l._cacheIndex,d=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,d._cacheIndex=c,t[c]=d,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}}uncacheRoot(e){let t=e.uuid,n=this._actionsByClip;for(let s in n){let a=n[s].actionByRoot[t];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}let r=this._bindingsByRootAndName[t];if(void 0!==r)for(let s in r){let o=r[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){let n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}},yn=class{constructor(e){this.value=e}clone(){return new yn(void 0===this.value.clone?this.value:this.value.clone())}},oQ=class{constructor(e,t,n=0,i=1/0){this.ray=new S_(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new gL,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return nF(e,this,n,t),n.sort(aQ),n}intersectObjects(e,t=!0,n=[]){for(let i=0,r=e.length;i<r;i++)nF(e[i],this,n,t);return n.sort(aQ),n}};function aQ(e,t){return e.distance-t.distance}function nF(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){let r=e.children;for(let s=0,o=r.length;s<o;s++)nF(r[s],t,n,!0)}}var lQ=class{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Ma(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}},cQ=new tt,dQ=class{constructor(e=new tt(1/0,1/0),t=new tt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=cQ.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return cQ.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},hQ=new oe,zO=new oe,Ph=class{constructor(e=new oe,t=new oe){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){hQ.subVectors(e,this.start),zO.subVectors(this.end,this.start);let n=zO.dot(zO),i=zO.dot(hQ)/n;return t&&(i=Ma(i,0,1)),i}closestPointToPoint(e,t,n){let i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},uQ=new oe,TLe=class extends Fs{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let n=new Pi,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,a=32;s<a;s++,o++){let l=s/a*Math.PI*2,c=o/a*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}n.setAttribute("position",new Qn(i,3));let r=new _g({fog:!1,toneMapped:!1});this.cone=new RM(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),uQ.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(uQ),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},DLe=class extends yc{constructor(e,t,n){super(new XL(t,4,2),new EM({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},pQ=new oe,UO=new oe,fQ=new oe,ILe=class extends Fs{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let i=new Pi;i.setAttribute("position",new Qn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let r=new _g({fog:!1,toneMapped:!1});this.lightPlane=new SO(i,r),this.add(this.lightPlane),i=new Pi,i.setAttribute("position",new Qn([0,0,0,0,0,1],3)),this.targetLine=new SO(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),pQ.setFromMatrixPosition(this.light.matrixWorld),UO.setFromMatrixPosition(this.light.target.matrixWorld),fQ.subVectors(UO,pQ),this.lightPlane.lookAt(UO),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(UO),this.targetLine.scale.z=fQ.length()}},VO=new oe,Bo=new L_,jO=class extends RM{constructor(e){let t=new Pi,n=new _g({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],s={};function o(p,m){a(p),a(m)}function a(p){i.push(0,0,0),r.push(0,0,0),void 0===s[p]&&(s[p]=[]),s[p].push(i.length/3-1)}o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4"),t.setAttribute("position",new Qn(i,3)),t.setAttribute("color",new Qn(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();let l=new Di(16755200),c=new Di(16711680),d=new Di(43775),h=new Di(16777215),u=new Di(3355443);this.setColors(l,c,d,h,u)}setColors(e,t,n,i,r){let s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,r.r,r.g,r.b),s.setXYZ(41,r.r,r.g,r.b),s.setXYZ(42,r.r,r.g,r.b),s.setXYZ(43,r.r,r.g,r.b),s.setXYZ(44,r.r,r.g,r.b),s.setXYZ(45,r.r,r.g,r.b),s.setXYZ(46,r.r,r.g,r.b),s.setXYZ(47,r.r,r.g,r.b),s.setXYZ(48,r.r,r.g,r.b),s.setXYZ(49,r.r,r.g,r.b),s.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap;Bo.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),sa("c",t,e,Bo,0,0,-1),sa("t",t,e,Bo,0,0,1),sa("n1",t,e,Bo,-1,-1,-1),sa("n2",t,e,Bo,1,-1,-1),sa("n3",t,e,Bo,-1,1,-1),sa("n4",t,e,Bo,1,1,-1),sa("f1",t,e,Bo,-1,-1,1),sa("f2",t,e,Bo,1,-1,1),sa("f3",t,e,Bo,-1,1,1),sa("f4",t,e,Bo,1,1,1),sa("u1",t,e,Bo,.7,1.1,-1),sa("u2",t,e,Bo,-.7,1.1,-1),sa("u3",t,e,Bo,0,2,-1),sa("cf1",t,e,Bo,-1,0,1),sa("cf2",t,e,Bo,1,0,1),sa("cf3",t,e,Bo,0,-1,1),sa("cf4",t,e,Bo,0,1,1),sa("cn1",t,e,Bo,-1,0,-1),sa("cn2",t,e,Bo,1,0,-1),sa("cn3",t,e,Bo,0,-1,-1),sa("cn4",t,e,Bo,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function sa(e,t,n,i,r,s,o){VO.set(r,s,o).unproject(i);let a=t[e];if(void 0!==a){let l=n.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],VO.x,VO.y,VO.z)}}var HO=class extends RM{constructor(e,t=16776960){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Pi;r.setIndex(new Bi(n,1)),r.setAttribute("position",new Qn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new _g({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},RLe=class extends RM{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=new Pi;i.setAttribute("position",new Qn(t,3)),i.setAttribute("color",new Qn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(i,new _g({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){let i=new Di,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},Wf=function kLe(){let e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){let c=l-127;c<-27?(i[l]=0,i[256|l]=32768,r[l]=24,r[256|l]=24):c<-14?(i[l]=1024>>-c-14,i[256|l]=1024>>-c-14|32768,r[l]=-c-1,r[256|l]=-c-1):c<=15?(i[l]=c+15<<10,i[256|l]=c+15<<10|32768,r[l]=13,r[256|l]=13):c<128?(i[l]=31744,i[256|l]=64512,r[l]=24,r[256|l]=24):(i[l]=31744,i[256|l]=64512,r[l]=13,r[256|l]=13)}let s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;!(8388608&c);)c<<=1,d-=8388608;c&=-8388609,d+=947912704,s[l]=c|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(a[l]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}(),FLe=Object.freeze({__proto__:null,fromHalfFloat:function LLe(e){let t=e>>10;return Wf.uint32View[0]=Wf.mantissaTable[Wf.offsetTable[t]+(1023&e)]+Wf.exponentTable[t],Wf.floatView[0]},toHalfFloat:function NLe(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Ma(e,-65504,65504),Wf.floatView[0]=e;let t=Wf.uint32View[0],n=t>>23&511;return Wf.baseTable[n]+((8388607&t)>>Wf.shiftTable[n])}});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:v_}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=v_);var iF=Symbol("target"),mQ=Symbol("unsubscribe");function rF(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}var mp=Array.isArray;function sF(e){return"symbol"==typeof e}var zLe={after:(e,t)=>mp(e)?e.slice(t.length):""===t?e:e.slice(t.length+1),concat:(e,t)=>mp(e)?(e=[...e],t&&e.push(t),e):t&&void 0!==t.toString?(""!==e&&(e+="."),sF(t)?e+t.toString():e+t):e,initial:e=>{if(mp(e))return e.slice(0,-1);if(""===e)return e;let t=e.lastIndexOf(".");return-1===t?"":e.slice(0,t)},last:e=>{if(mp(e))return e[e.length-1]||"";if(""===e)return e;let t=e.lastIndexOf(".");return-1===t?e:e.slice(t+1)},walk:(e,t)=>{if(mp(e))for(let n of e)t(n);else if(""!==e){let n=0,i=e.indexOf(".");if(-1===i)t(e);else for(;n<e.length;)-1===i&&(i=e.length),t(e.slice(n,i)),n=i+1,i=e.indexOf(".",n)}},get(e,t){return this.walk(t,n=>{e&&(e=e[n])}),e}},Sh=zLe;function gQ(e,t,n){return e.isUnsubscribed||t.ignoreSymbols&&sF(n)||t.ignoreUnderscores&&"_"===n.charAt(0)||"ignoreKeys"in t&&t.ignoreKeys.includes(n)}function oF(e){return"[object Object]"===toString.call(e)}function GO(){return!0}function Y_(e,t){return e.length!==t.length||e.some((n,i)=>t[i]!==n)}var vQ=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),HLe=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),yQ={push:GO,pop:GO,shift:GO,unshift:GO,copyWithin:Y_,reverse:Y_,sort:Y_,splice:Y_,flat:Y_,fill:Y_},GLe=new Set([...vQ,...HLe,...Object.keys(yQ)]);function WO(e,t){if(e.size!==t.size)return!0;for(let n of e)if(!t.has(n))return!0;return!1}var _Q=["keys","values","entries"],bQ=new Set(["has","toString"]),xQ={add:WO,clear:WO,delete:WO,forEach:WO},WLe=new Set([...bQ,...Object.keys(xQ),..._Q]);function qO(e,t){if(e.size!==t.size)return!0;let n;for(let[i,r]of e)if(n=t.get(i),n!==r||void 0===n&&!t.has(i))return!0;return!1}var qLe=new Set([...bQ,"get"]),wQ={set:qO,clear:qO,delete:qO,forEach:qO},XLe=new Set([...qLe,...Object.keys(wQ),..._Q]),wg=class{constructor(e,t,n,i){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=i,this._changes=i?[]:null,this.clone=void 0===t?e:this._shallowClone(e)}static isHandledMethod(e){return vQ.has(e)}_shallowClone(e){let t=e;if(oF(e))t={...e};else if(mp(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(n=>this._shallowClone(n)));else if(e instanceof Map){t=new Map;for(let[n,i]of e.entries())t.set(n,this._shallowClone(i))}return this._clonedCache.add(t),t}preferredThisArg(e,t,n,i){return e?(mp(i)?this._onIsChanged=yQ[t]:i instanceof Set?this._onIsChanged=xQ[t]:i instanceof Map&&(this._onIsChanged=wQ[t]),i):n}update(e,t,n){let i=Sh.after(e,this._path);if("length"!==t){let r=this.clone;Sh.walk(i,s=>{r&&r[s]&&(this._clonedCache.has(r[s])||(r[s]=this._shallowClone(r[s])),r=r[s])}),this._hasOnValidate&&this._changes.push({path:i,property:t,previous:n}),r&&r[t]&&(r[t]=n)}this._isChanged=!0}undo(e){let t;for(let n=this._changes.length-1;-1!==n;n--)t=this._changes[n],Sh.get(e,t.path)[t.property]=t.previous}isChanged(e){return void 0===this._onIsChanged?this._isChanged:this._onIsChanged(this.clone,e)}},MQ=class extends wg{static isHandledMethod(e){return GLe.has(e)}},YLe=class extends wg{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},CQ=class extends wg{static isHandledMethod(e){return WLe.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},PQ=class extends wg{static isHandledMethod(e){return XLe.has(e)}undo(e){for(let[t,n]of this.clone.entries())e.set(t,n);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},$Le=class extends wg{constructor(e,t,n,i){super(void 0,t,n,i),this._arg1=n[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},KLe=class extends wg{constructor(e,t,n,i){super(void 0,t,n,i),this._weakKey=n[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},$_=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return oF(e)||mp(e)||rF(e)}static isHandledMethod(e,t){return oF(e)?wg.isHandledMethod(t):mp(e)?MQ.isHandledMethod(t):e instanceof Set?CQ.isHandledMethod(t):e instanceof Map?PQ.isHandledMethod(t):rF(e)}get isCloning(){return this._stack.length>0}start(e,t,n){let i=wg;mp(e)?i=MQ:e instanceof Date?i=YLe:e instanceof Set?i=CQ:e instanceof Map?i=PQ:e instanceof WeakSet?i=$Le:e instanceof WeakMap&&(i=KLe),this._stack.push(new i(e,t,n,this._hasOnValidate))}update(e,t,n){this._stack[this._stack.length-1].update(e,t,n)}preferredThisArg(e,t,n){let{name:i}=e,r=$_.isHandledMethod(n,i);return this._stack[this._stack.length-1].preferredThisArg(r,i,t,n)}isChanged(e,t,n){return this._stack[this._stack.length-1].isChanged(e,t,n)}undo(e){void 0!==this._previousClone&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},ZLe={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},aF=(e,t,n={})=>{n={...ZLe,...n};let i=Symbol("ProxyTarget"),{equals:r,isShallow:s,ignoreDetached:o,details:a}=n,l=new class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return void 0===this._descriptorCache&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let n=this._getProperties(e),i=n[t];return void 0===i&&(i=Reflect.getOwnPropertyDescriptor(e,t),n[t]=i),i}getProxy(e,t,n,i){if(this.isUnsubscribed)return e;let r=e[i],s=r||e;this._pathCache.set(s,t);let o=this._proxyCache.get(s);return void 0===o&&(o=void 0===r?new Proxy(e,n):e,this._proxyCache.set(s,o)),o}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,Sh.get(t,this.getPath(e)))}defineProperty(e,t,n){return!!Reflect.defineProperty(e,t,n)&&(this.isUnsubscribed||(this._getProperties(e)[t]=n),!0)}setProperty(e,t,n,i,r){if(!this._equals(r,n)||!(t in e)){let s=this._getOwnPropertyDescriptor(e,t);return void 0!==s&&"set"in s?Reflect.set(e,t,n,i):Reflect.set(e,t,n)}return!0}deleteProperty(e,t,n){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let i=this._getDescriptorCache().get(e);i&&(delete i[t],this._pathCache.delete(n))}return!0}return!1}isSameDescriptor(e,t,n){let i=this._getOwnPropertyDescriptor(t,n);return void 0!==e&&void 0!==i&&Object.is(e.value,i.value)&&(e.writable||!1)===(i.writable||!1)&&(e.enumerable||!1)===(i.enumerable||!1)&&(e.configurable||!1)===(i.configurable||!1)&&e.get===i.get&&e.set===i.set}isGetInvariant(e,t){let n=this._getOwnPropertyDescriptor(e,t);return void 0!==n&&!0!==n.configurable&&!0!==n.writable}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}}(r),c="function"==typeof n.onValidate,d=new $_(c),h=(x,w,P,A,D)=>!c||d.isCloning||!0===n.onValidate(Sh.concat(l.getPath(x),w),P,A,D),u=(x,w,P,A)=>{!gQ(l,n,w)&&(!o||!l.isDetached(x,e))&&p(l.getPath(x),w,P,A)},p=(x,w,P,A,D)=>{d.isCloning?d.update(x,w,A):t(Sh.concat(x,w),P,A,D)},m=x=>x&&(x[i]||x),v=(x,w,P,A)=>function BLe(e){return("object"==typeof e?null===e:"function"!=typeof e)||e instanceof RegExp}(x)||"constructor"===P||s&&!$_.isHandledMethod(w,P)||gQ(l,n,P)||l.isGetInvariant(w,P)||o&&l.isDetached(w,e)?x:(void 0===A&&(A=l.getPath(w)),l.getProxy(x,Sh.concat(A,P),g,i)),g={get(x,w,P){if(sF(w)){if(w===i||w===iF)return x;if(w===mQ&&!l.isUnsubscribed&&0===l.getPath(x).length)return l.unsubscribe(),x}let A=rF(x)?Reflect.get(x,w):Reflect.get(x,w,P);return v(A,x,w)},set(x,w,P,A){P=m(P);let D=x[i]||x,R=D[w];if(r(R,P)&&w in x)return!0;let N=h(x,w,P,R);return N&&l.setProperty(D,w,P,A,R)?(u(x,w,x[w],R),!0):!N},defineProperty(x,w,P){if(!l.isSameDescriptor(P,x,w)){let A=x[w];h(x,w,P.value,A)&&l.defineProperty(x,w,P,A)&&u(x,w,P.value,A)}return!0},deleteProperty(x,w){if(!Reflect.has(x,w))return!0;let P=Reflect.get(x,w),A=h(x,w,void 0,P);return A&&l.deleteProperty(x,w,P)?(u(x,w,void 0,P),!0):!A},apply(x,w,P){let A=w[i]||w;if(l.isUnsubscribed)return Reflect.apply(x,A,P);if((!1===a||!0!==a&&!a.includes(x.name))&&$_.isHandledType(A)){let D=Sh.initial(l.getPath(x)),R=$_.isHandledMethod(A,x.name);d.start(A,D,P);let N=Reflect.apply(x,d.preferredThisArg(x,w,A),R?P.map(Q=>m(Q)):P),k=d.isChanged(A,r),L=d.stop();if($_.isHandledType(N)&&R&&(w instanceof Map&&"get"===x.name&&(D=Sh.concat(D,P[0])),N=l.getProxy(N,D,g)),k){let Q={name:x.name,args:P,result:N},le=d.isCloning?Sh.initial(D):D,ae=d.isCloning?Sh.last(D):"";h(Sh.get(e,le),ae,A,L,Q)?p(le,ae,A,L,Q):d.undo(A)}return(w instanceof Map||w instanceof Set)&&function ULe(e){return"object"==typeof e&&"function"==typeof e.next}(N)?function VLe(e,t,n,i,r){let s=e.next;if("entries"===t.name)e.next=function(){let o=s.call(this);return!1===o.done&&(o.value[0]=r(o.value[0],t,o.value[0],i),o.value[1]=r(o.value[1],t,o.value[0],i)),o};else if("values"===t.name){let o=n[iF].keys();e.next=function(){let a=s.call(this);return!1===a.done&&(a.value=r(a.value,t,o.next().value,i)),a}}else e.next=function(){let o=s.call(this);return!1===o.done&&(o.value=r(o.value,t,o.value,i)),o};return e}(N,x,w,D,v):N}return Reflect.apply(x,w,P)}},b=l.getProxy(e,n.pathAsArray?[]:"",g);return t=t.bind(b),c&&(n.onValidate=n.onValidate.bind(b)),b};aF.target=e=>e&&e[iF]||e,aF.unsubscribe=e=>e[mQ]||e;var e,SQ=aF,EQ="object"==typeof global&&global&&global.Object===Object&&global,JLe="object"==typeof self&&self&&self.Object===Object&&self,mu=EQ||JLe||Function("return this")(),Eh=mu.Symbol,OQ=Object.prototype,nFe=OQ.hasOwnProperty,iFe=OQ.toString,HM=Eh?Eh.toStringTag:void 0,aFe=Object.prototype.toString,AQ=Eh?Eh.toStringTag:void 0,zv=function uFe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":AQ&&AQ in Object(e)?function rFe(e){var t=nFe.call(e,HM),n=e[HM];try{e[HM]=void 0;var i=!0}catch{}var r=iFe.call(e);return i&&(t?e[HM]=n:delete e[HM]),r}(e):function lFe(e){return aFe.call(e)}(e)},qf=function pFe(e){return null!=e&&"object"==typeof e},XO=function mFe(e){return"symbol"==typeof e||qf(e)&&"[object Symbol]"==zv(e)},TQ=function gFe(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r},gp=Array.isArray,DQ=Eh?Eh.prototype:void 0,IQ=DQ?DQ.toString:void 0,_Fe=function RQ(e){if("string"==typeof e)return e;if(gp(e))return TQ(e,RQ)+"";if(XO(e))return IQ?IQ.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},bFe=/\s/,MFe=/^\s+/,PFe=function CFe(e){return e&&e.slice(0,function xFe(e){for(var t=e.length;t--&&bFe.test(e.charAt(t)););return t}(e)+1).replace(MFe,"")},gu=function SFe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},EFe=/^[-+]0x[0-9a-f]+$/i,OFe=/^0b[01]+$/i,AFe=/^0o[0-7]+$/i,TFe=parseInt,NQ=function DFe(e){if("number"==typeof e)return e;if(XO(e))return NaN;if(gu(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=gu(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=PFe(e);var n=OFe.test(e);return n||AFe.test(e)?TFe(e.slice(2),n?2:8):EFe.test(e)?NaN:+e},LQ=function BFe(e){if(!gu(e))return!1;var t=zv(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},zFe=mu["__core-js_shared__"],FQ=(e=/[^.]+$/.exec(zFe&&zFe.keys&&zFe.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",HFe=Function.prototype.toString,Uv=function GFe(e){if(null!=e){try{return HFe.call(e)}catch{}try{return e+""}catch{}}return""},qFe=/^\[object .+?Constructor\]$/,ZFe=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),JFe=function QFe(e){return!(!gu(e)||function UFe(e){return!!FQ&&FQ in e}(e))&&(LQ(e)?ZFe:qFe).test(Uv(e))},Vv=function n5e(e,t){var n=function e5e(e,t){return e?.[t]}(e,t);return JFe(n)?n:void 0},cF=Vv(mu,"WeakMap"),BQ=Object.create,r5e=function(){function e(){}return function(t){if(!gu(t))return{};if(BQ)return BQ(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),s5e=r5e,a5e=function o5e(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},d5e=800,h5e=16,u5e=Date.now,g5e=function m5e(e){return function(){return e}},v5e=function(){try{var e=Vv(Object,"defineProperty");return e({},"",{}),e}catch{}}(),YO=v5e,y5e=YO?function(e,t){return YO(e,"toString",{configurable:!0,enumerable:!1,value:g5e(t),writable:!0})}:function IFe(e){return e},x5e=function p5e(e){var t=0,n=0;return function(){var i=u5e(),r=h5e-(i-n);if(n=i,r>0){if(++t>=d5e)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(y5e),P5e=/^(?:0|[1-9]\d*)$/,dF=function S5e(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&("number"==n||"symbol"!=n&&P5e.test(e))&&e>-1&&e%1==0&&e<t},zQ=function E5e(e,t,n){"__proto__"==t&&YO?YO(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},hF=function O5e(e,t){return e===t||e!=e&&t!=t},T5e=Object.prototype.hasOwnProperty,uF=function D5e(e,t,n){var i=e[t];(!T5e.call(e,t)||!hF(i,n)||void 0===n&&!(t in e))&&zQ(e,t,n)},GM=function I5e(e,t,n,i){var r=!n;n||(n={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=i?i(n[a],e[a],a,n,e):void 0;void 0===l&&(l=e[a]),r?zQ(n,a,l):uF(n,a,l)}return n},UQ=Math.max,pF=function L5e(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},VQ=function F5e(e){return null!=e&&pF(e.length)&&!LQ(e)},B5e=Object.prototype,fF=function z5e(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||B5e)},jQ=function H5e(e){return qf(e)&&"[object Arguments]"==zv(e)},HQ=Object.prototype,G5e=HQ.hasOwnProperty,W5e=HQ.propertyIsEnumerable,q5e=jQ(function(){return arguments}())?jQ:function(e){return qf(e)&&G5e.call(e,"callee")&&!W5e.call(e,"callee")},mF=q5e,GQ="object"==typeof exports&&exports&&!exports.nodeType&&exports,WQ=GQ&&"object"==typeof module&&module&&!module.nodeType&&module,qQ=WQ&&WQ.exports===GQ?mu.Buffer:void 0,$O=(qQ?qQ.isBuffer:void 0)||function X5e(){return!1},vo={};vo["[object Float32Array]"]=vo["[object Float64Array]"]=vo["[object Int8Array]"]=vo["[object Int16Array]"]=vo["[object Int32Array]"]=vo["[object Uint8Array]"]=vo["[object Uint8ClampedArray]"]=vo["[object Uint16Array]"]=vo["[object Uint32Array]"]=!0,vo["[object Arguments]"]=vo["[object Array]"]=vo["[object ArrayBuffer]"]=vo["[object Boolean]"]=vo["[object DataView]"]=vo["[object Date]"]=vo["[object Error]"]=vo["[object Function]"]=vo["[object Map]"]=vo["[object Number]"]=vo["[object Object]"]=vo["[object RegExp]"]=vo["[object Set]"]=vo["[object String]"]=vo["[object WeakMap]"]=!1;var gF=function CBe(e){return function(t){return e(t)}},XQ="object"==typeof exports&&exports&&!exports.nodeType&&exports,WM=XQ&&"object"==typeof module&&module&&!module.nodeType&&module,vF=WM&&WM.exports===XQ&&EQ.process,K_=function(){try{return WM&&WM.require&&WM.require("util").types||vF&&vF.binding&&vF.binding("util")}catch{}}(),YQ=K_&&K_.isTypedArray,$Q=YQ?gF(YQ):function wBe(e){return qf(e)&&pF(e.length)&&!!vo[zv(e)]},ABe=Object.prototype.hasOwnProperty,KQ=function TBe(e,t){var n=gp(e),i=!n&&mF(e),r=!n&&!i&&$O(e),s=!n&&!i&&!r&&$Q(e),o=n||i||r||s,a=o?function U5e(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],l=a.length;for(var c in e)(t||ABe.call(e,c))&&(!o||!("length"==c||r&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||dF(c,l)))&&a.push(c);return a},ZQ=function DBe(e,t){return function(n){return e(t(n))}},RBe=ZQ(Object.keys,Object),NBe=Object.prototype.hasOwnProperty,yF=function BBe(e){return VQ(e)?KQ(e):function LBe(e){if(!fF(e))return RBe(e);var t=[];for(var n in Object(e))NBe.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},jBe=Object.prototype.hasOwnProperty,GBe=function HBe(e){if(!gu(e))return function zBe(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=fF(e),n=[];for(var i in e)"constructor"==i&&(t||!jBe.call(e,i))||n.push(i);return n},jv=function WBe(e){return VQ(e)?KQ(e,!0):GBe(e)},qBe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,XBe=/^\w*$/,qM=Vv(Object,"create"),ize=Object.prototype.hasOwnProperty,aze=Object.prototype.hasOwnProperty;function Z_(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Z_.prototype.clear=function ZBe(){this.__data__=qM?qM(null):{},this.size=0},Z_.prototype.delete=function JBe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Z_.prototype.get=function rze(e){var t=this.__data__;if(qM){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ize.call(t,e)?t[e]:void 0},Z_.prototype.has=function lze(e){var t=this.__data__;return qM?void 0!==t[e]:aze.call(t,e)},Z_.prototype.set=function hze(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=qM&&void 0===t?"__lodash_hash_undefined__":t,this};var QQ=Z_,KO=function mze(e,t){for(var n=e.length;n--;)if(hF(e[n][0],t))return n;return-1},vze=Array.prototype.splice;function Q_(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Q_.prototype.clear=function pze(){this.__data__=[],this.size=0},Q_.prototype.delete=function yze(e){var t=this.__data__,n=KO(t,e);return!(n<0||(n==t.length-1?t.pop():vze.call(t,n,1),--this.size,0))},Q_.prototype.get=function bze(e){var t=this.__data__,n=KO(t,e);return n<0?void 0:t[n][1]},Q_.prototype.has=function wze(e){return KO(this.__data__,e)>-1},Q_.prototype.set=function Cze(e,t){var n=this.__data__,i=KO(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};var ZO=Q_,XM=Vv(mu,"Map"),QO=function Dze(e,t){var n=e.__data__;return function Aze(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map};function J_(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}J_.prototype.clear=function Eze(){this.size=0,this.__data__={hash:new QQ,map:new(XM||ZO),string:new QQ}},J_.prototype.delete=function Ize(e){var t=QO(this,e).delete(e);return this.size-=t?1:0,t},J_.prototype.get=function kze(e){return QO(this,e).get(e)},J_.prototype.has=function Lze(e){return QO(this,e).has(e)},J_.prototype.set=function Bze(e,t){var n=QO(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};var JO=J_,Uze="Expected a function";function _F(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Uze);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=e.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(_F.Cache||JO),n}_F.Cache=JO;var Vze=_F,Wze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qze=/\\(\\)?/g,Xze=function Hze(e){var t=Vze(e,function(i){return 500===n.size&&n.clear(),i}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Wze,function(n,i,r,s){t.push(r?s.replace(qze,"$1"):i||n)}),t}),Yze=Xze,Kze=function $ze(e){return null==e?"":_Fe(e)},eb=function Zze(e,t){return gp(e)?e:function YBe(e,t){if(gp(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!XO(e))||XBe.test(e)||!qBe.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:Yze(Kze(e))},eA=function Jze(e){if("string"==typeof e||XO(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},JQ=function eUe(e,t){for(var n=0,i=(t=eb(t,e)).length;null!=e&&n<i;)e=e[eA(t[n++])];return n&&n==i?e:void 0},bF=function tUe(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e},eJ=Eh?Eh.isConcatSpreadable:void 0,iUe=function nUe(e){return gp(e)||mF(e)||!!(eJ&&e&&e[eJ])},rUe=function tJ(e,t,n,i,r){var s=-1,o=e.length;for(n||(n=iUe),r||(r=[]);++s<o;){var a=e[s];t>0&&n(a)?t>1?tJ(a,t-1,n,i,r):bF(r,a):i||(r[r.length]=a)}return r},oUe=function sUe(e){return null!=e&&e.length?rUe(e,1):[]},nJ=function aUe(e){return x5e(function R5e(e,t,n){return t=UQ(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,s=UQ(i.length-t,0),o=Array(s);++r<s;)o[r]=i[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=i[r];return a[t]=n(o),a5e(e,this,a)}}(e,void 0,oUe),e+"")},xF=ZQ(Object.getPrototypeOf,Object),iJ=Function.prototype.toString,uUe=Object.prototype.hasOwnProperty,pUe=iJ.call(Object);function tb(e){var t=this.__data__=new ZO(e);this.size=t.size}tb.prototype.clear=function yUe(){this.__data__=new ZO,this.size=0},tb.prototype.delete=function bUe(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},tb.prototype.get=function wUe(e){return this.__data__.get(e)},tb.prototype.has=function CUe(e){return this.__data__.has(e)},tb.prototype.set=function EUe(e,t){var n=this.__data__;if(n instanceof ZO){var i=n.__data__;if(!XM||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new JO(i)}return n.set(e,t),this.size=n.size,this};var tA=tb,rJ="object"==typeof exports&&exports&&!exports.nodeType&&exports,sJ=rJ&&"object"==typeof module&&module&&!module.nodeType&&module,oJ=sJ&&sJ.exports===rJ?mu.Buffer:void 0,aJ=oJ?oJ.allocUnsafe:void 0,lJ=function BUe(){return[]},UUe=Object.prototype.propertyIsEnumerable,cJ=Object.getOwnPropertySymbols,VUe=cJ?function(e){return null==e?[]:(e=Object(e),function LUe(e,t){for(var n=-1,i=null==e?0:e.length,r=0,s=[];++n<i;){var o=e[n];t(o,n,e)&&(s[r++]=o)}return s}(cJ(e),function(t){return UUe.call(e,t)}))}:lJ,wF=VUe,WUe=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)bF(t,wF(e)),e=xF(e);return t}:lJ,dJ=WUe,hJ=function YUe(e,t,n){var i=t(e);return gp(e)?i:bF(i,n(e))},MF=function $Ue(e){return hJ(e,yF,wF)},uJ=function KUe(e){return hJ(e,jv,dJ)},CF=Vv(mu,"DataView"),PF=Vv(mu,"Promise"),SF=Vv(mu,"Set"),pJ="[object Map]",fJ="[object Promise]",mJ="[object Set]",gJ="[object WeakMap]",vJ="[object DataView]",t6e=Uv(CF),n6e=Uv(XM),i6e=Uv(PF),r6e=Uv(SF),s6e=Uv(cF),Hv=zv;(CF&&Hv(new CF(new ArrayBuffer(1)))!=vJ||XM&&Hv(new XM)!=pJ||PF&&Hv(PF.resolve())!=fJ||SF&&Hv(new SF)!=mJ||cF&&Hv(new cF)!=gJ)&&(Hv=function(e){var t=zv(e),n="[object Object]"==t?e.constructor:void 0,i=n?Uv(n):"";if(i)switch(i){case t6e:return vJ;case n6e:return pJ;case i6e:return fJ;case r6e:return mJ;case s6e:return gJ}return t});var YM=Hv,a6e=Object.prototype.hasOwnProperty,nA=mu.Uint8Array,EF=function h6e(e){var t=new e.constructor(e.byteLength);return new nA(t).set(new nA(e)),t},f6e=/\w*$/,yJ=Eh?Eh.prototype:void 0,_J=yJ?yJ.valueOf:void 0,V6e=function U6e(e,t,n){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return EF(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function u6e(e,t){var n=t?EF(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function _6e(e,t){var n=t?EF(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return function m6e(e){var t=new e.constructor(e.source,f6e.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Symbol]":return function v6e(e){return _J?Object(_J.call(e)):{}}(e)}},bJ=K_&&K_.isMap,Y6e=bJ?gF(bJ):function W6e(e){return qf(e)&&"[object Map]"==YM(e)},xJ=K_&&K_.isSet,J6e=xJ?gF(xJ):function K6e(e){return qf(e)&&"[object Set]"==YM(e)},wJ="[object Arguments]",MJ="[object Function]",CJ="[object Object]",ao={};ao[wJ]=ao["[object Array]"]=ao["[object ArrayBuffer]"]=ao["[object DataView]"]=ao["[object Boolean]"]=ao["[object Date]"]=ao["[object Float32Array]"]=ao["[object Float64Array]"]=ao["[object Int8Array]"]=ao["[object Int16Array]"]=ao["[object Int32Array]"]=ao["[object Map]"]=ao["[object Number]"]=ao[CJ]=ao["[object RegExp]"]=ao["[object Set]"]=ao["[object String]"]=ao["[object Symbol]"]=ao["[object Uint8Array]"]=ao["[object Uint8ClampedArray]"]=ao["[object Uint16Array]"]=ao["[object Uint32Array]"]=!0,ao["[object Error]"]=ao[MJ]=ao["[object WeakMap]"]=!1;var PJ=function iA(e,t,n,i,r,s){var o,a=1&t,l=2&t,c=4&t;if(n&&(o=r?n(e,i,r,s):n(e)),void 0!==o)return o;if(!gu(e))return e;var d=gp(e);if(d){if(o=function l6e(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&a6e.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!a)return function l5e(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}(e,o)}else{var h=YM(e),u=h==MJ||"[object GeneratorFunction]"==h;if($O(e))return function kUe(e,t){if(t)return e.slice();var n=e.length,i=aJ?aJ(n):new e.constructor(n);return e.copy(i),i}(e,a);if(h==CJ||h==wJ||u&&!r){if(o=l||u?{}:function j6e(e){return"function"!=typeof e.constructor||fF(e)?{}:s5e(xF(e))}(e),!a)return l?function qUe(e,t){return GM(e,dJ(e),t)}(e,function DUe(e,t){return e&&GM(t,jv(t),e)}(o,e)):function jUe(e,t){return GM(e,wF(e),t)}(e,function AUe(e,t){return e&&GM(t,yF(t),e)}(o,e))}else{if(!ao[h])return r?e:{};o=V6e(e,h,a)}}s||(s=new tA);var p=s.get(e);if(p)return p;s.set(e,o),J6e(e)?e.forEach(function(g){o.add(iA(g,t,n,g,e,s))}):Y6e(e)&&e.forEach(function(g,b){o.set(b,iA(g,t,n,b,e,s))});var v=d?void 0:(c?l?uJ:MF:l?jv:yF)(e);return function w5e(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););}(v||e,function(g,b){v&&(g=e[b=g]),uF(o,b,iA(g,t,n,b,e,s))}),o},rA=function O8e(e){return PJ(e,5)};function sA(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new JO;++t<n;)this.add(e[t])}sA.prototype.add=sA.prototype.push=function T8e(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},sA.prototype.has=function I8e(e){return this.__data__.has(e)};var k8e=sA,L8e=function N8e(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1},B8e=function F8e(e,t){return e.has(t)},SJ=function V8e(e,t,n,i,r,s){var o=1&n,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(e),d=s.get(t);if(c&&d)return c==t&&d==e;var h=-1,u=!0,p=2&n?new k8e:void 0;for(s.set(e,t),s.set(t,e);++h<a;){var m=e[h],v=t[h];if(i)var g=o?i(v,m,h,t,e,s):i(m,v,h,e,t,s);if(void 0!==g){if(g)continue;u=!1;break}if(p){if(!L8e(t,function(b,x){if(!B8e(p,x)&&(m===b||r(m,b,n,i,s)))return p.push(x)})){u=!1;break}}else if(m!==v&&!r(m,v,n,i,s)){u=!1;break}}return s.delete(e),s.delete(t),u},H8e=function j8e(e){var t=-1,n=Array(e.size);return e.forEach(function(i,r){n[++t]=[r,i]}),n},W8e=function G8e(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n},EJ=Eh?Eh.prototype:void 0,OF=EJ?EJ.valueOf:void 0,cVe=Object.prototype.hasOwnProperty,OJ="[object Arguments]",AJ="[object Array]",oA="[object Object]",TJ=Object.prototype.hasOwnProperty,mVe=function fVe(e,t,n,i,r,s){var o=gp(e),a=gp(t),l=o?AJ:YM(e),c=a?AJ:YM(t),d=(l=l==OJ?oA:l)==oA,h=(c=c==OJ?oA:c)==oA,u=l==c;if(u&&$O(e)){if(!$O(t))return!1;o=!0,d=!1}if(u&&!d)return s||(s=new tA),o||$Q(e)?SJ(e,t,n,i,r,s):function sVe(e,t,n,i,r,s,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new nA(e),new nA(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return hF(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=H8e;case"[object Set]":if(a||(a=W8e),e.size!=t.size&&!(1&i))return!1;var c=o.get(e);if(c)return c==t;i|=2,o.set(e,t);var d=SJ(a(e),a(t),i,r,s,o);return o.delete(e),d;case"[object Symbol]":if(OF)return OF.call(e)==OF.call(t)}return!1}(e,t,l,n,i,r,s);if(!(1&n)){var p=d&&TJ.call(e,"__wrapped__"),m=h&&TJ.call(t,"__wrapped__");if(p||m){var v=p?e.value():e,g=m?t.value():t;return s||(s=new tA),r(v,g,n,i,s)}}return!!u&&(s||(s=new tA),function dVe(e,t,n,i,r,s){var o=1&n,a=MF(e),l=a.length;if(l!=MF(t).length&&!o)return!1;for(var h=l;h--;){var u=a[h];if(!(o?u in t:cVe.call(t,u)))return!1}var p=s.get(e),m=s.get(t);if(p&&m)return p==t&&m==e;var v=!0;s.set(e,t),s.set(t,e);for(var g=o;++h<l;){var b=e[u=a[h]],x=t[u];if(i)var w=o?i(x,b,u,t,e,s):i(b,x,u,e,t,s);if(!(void 0===w?b===x||r(b,x,n,i,s):w)){v=!1;break}g||(g="constructor"==u)}if(v&&!g){var P=e.constructor,A=t.constructor;P!=A&&"constructor"in e&&"constructor"in t&&!("function"==typeof P&&P instanceof P&&"function"==typeof A&&A instanceof A)&&(v=!1)}return s.delete(e),s.delete(t),v}(e,t,n,i,r,s))},gVe=function DJ(e,t,n,i,r){return e===t||(null==e||null==t||!qf(e)&&!qf(t)?e!=e&&t!=t:mVe(e,t,n,i,DJ,r))},yVe=function vVe(e,t){return null!=e&&t in Object(e)},wVe=function xVe(e,t){return null!=e&&function _Ve(e,t,n){for(var i=-1,r=(t=eb(t,e)).length,s=!1;++i<r;){var o=eA(t[i]);if(!(s=null!=e&&n(e,o)))break;e=e[o]}return s||++i!=r?s:!!(r=null==e?0:e.length)&&pF(r)&&dF(o,r)&&(gp(e)||mF(e))}(e,t,yVe)},AF=function(){return mu.Date.now()},PVe=Math.max,SVe=Math.min,TF=function EVe(e,t,n){var i,r,s,o,a,l,c=0,d=!1,h=!1,u=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(D){var R=i,N=r;return i=r=void 0,c=D,o=e.apply(N,R)}function g(D){var R=D-l;return void 0===l||R>=t||R<0||h&&D-c>=s}function b(){var D=AF();if(g(D))return x(D);a=setTimeout(b,function v(D){var k=t-(D-l);return h?SVe(k,s-(D-c)):k}(D))}function x(D){return a=void 0,u&&i?p(D):(i=r=void 0,o)}function A(){var D=AF(),R=g(D);if(i=arguments,r=this,l=D,R){if(void 0===a)return function m(D){return c=D,a=setTimeout(b,t),d?p(D):o}(l);if(h)return clearTimeout(a),a=setTimeout(b,t),p(l)}return void 0===a&&(a=setTimeout(b,t)),o}return t=NQ(t)||0,gu(n)&&(d=!!n.leading,s=(h="maxWait"in n)?PVe(NQ(n.maxWait)||0,t):s,u="trailing"in n?!!n.trailing:u),A.cancel=function w(){void 0!==a&&clearTimeout(a),c=0,i=l=r=a=void 0},A.flush=function P(){return void 0===a?o:x(AF())},A},DVe=function TVe(e,t){return t.length<2?e:JQ(e,function gUe(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(r);++i<r;)s[i]=e[i+t];return s}(t,0,-1))},IJ=function IVe(e,t){return gVe(e,t)},kVe=function RVe(e,t){return t=eb(t,e),null==(e=DVe(e,t))||delete e[eA(function OVe(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}(t))]},LVe=function NVe(e){return function fUe(e){if(!qf(e)||"[object Object]"!=zv(e))return!1;var t=xF(e);if(null===t)return!0;var n=uUe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&iJ.call(n)==pUe}(e)?void 0:e},UVe=nJ(function(e,t){var n={};if(null==e)return n;var i=!1;t=TQ(t,function(s){return s=eb(s,e),i||(i=s.length>1),s}),GM(e,uJ(e),n),i&&(n=PJ(n,7,LVe));for(var r=t.length;r--;)kVe(n,t[r]);return n}),DF=UVe,jVe=function VVe(e,t,n,i){if(!gu(e))return e;for(var r=-1,s=(t=eb(t,e)).length,o=s-1,a=e;null!=a&&++r<s;){var l=eA(t[r]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(r!=o){var d=a[l];void 0===(c=i?i(d,l,a):void 0)&&(c=gu(d)?d:dF(t[r+1])?[]:{})}uF(a,l,c),a=a[l]}return e},qVe=function WVe(e,t){return function HVe(e,t,n){for(var i=-1,r=t.length,s={};++i<r;){var o=t[i],a=JQ(e,o);n(a,o)&&jVe(s,eb(o,e),a)}return s}(e,t,function(n,i){return wVe(e,i)})},XVe=nJ(function(e,t){return null==e?{}:qVe(e,t)}),Xf=XVe;function Yf(e,t){return Object.setPrototypeOf(e,t),e}!(typeof window>"u")&&window.navigator.userAgent.toLowerCase().includes(" electron/")&&(()=>{if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");e?window.localStorage.setItem("desktop-app-version",e):window.localStorage.getItem("desktop-app-version")})();var aA=!(typeof window>"u")&&window.navigator.platform.toUpperCase().includes("MAC"),IF=!(typeof window>"u")&&(/iPad|iPhone|iPod/.test(window.navigator.userAgent)||aA&&"ontouchend"in document),a9e=!(typeof window>"u")&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,Wd=!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0),RJ=(()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)})(),kJ=Number((()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]})());function NJ(e){return Array.isArray(e)?e:[e]}function lA(e){return aA?e.metaKey:e.ctrlKey}var zi=[],cA={},$M={},dA={};function LJ(e){zi.includes(e)||zi.push(e)}function nb(e){delete cA[e.pointerId];for(let t=0;t<zi.length;t++)if(zi[t].pointerId===e.pointerId){zi.splice(t,1);break}}function hA(e){if("touch"!==e.pointerType)return;let t=cA[e.pointerId];void 0===t&&(t={x:0,y:0},cA[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function RF(e){return cA[(e.pointerId===zi[0].pointerId?zi[1]:zi[0]).pointerId]}function FJ(e){$M[e.key]=!0,dA[e.key]=void 0===dA[e.key]?1:dA[e.key]+1}function BJ(e){if(aA&&$M.Meta)for(let t in $M)$M[t]=!1;else $M[e.key]=!1;dA={}}var zJ,uA,u9e=new Promise(e=>{zJ=e});function p9e(){if(uA)return uA;function t(){return(t=(0,xo.Z)(function*(){let i=_.e(642).then(_.bind(_,9642)),[r,s]=yield Promise.all([i,fetch("https://unpkg.com/@splinetool/navmesh-wasm@0.9.526/build/navmesh.wasm").then(l=>l.arrayBuffer())]),o=r.default,a=yield o({wasmBinary:s});zJ(a)})).apply(this,arguments)}return uA=function e(){return t.apply(this,arguments)}(),uA}var UJ,pA,f9e=new Promise(e=>{UJ=e});function m9e(){if(pA)return pA;function t(){return(t=(0,xo.Z)(function*(){let n=yield _.e(615).then(_.bind(_,8615));yield n.init(),UJ(n)})).apply(this,arguments)}return pA=function e(){return t.apply(this,arguments)}(),pA}var Ar=class{modifyById(e,t){let n=this;if(void 0===n[e])throw new Error("not expected");{let i={...n,[e]:t};return Object.setPrototypeOf(i,Ar.prototype),i}}add(e,t){return this.runOp({type:1,id:e,data:t})?.data??this}runOp(e){let t=this;if(1===e.type){let i,n=t[e.id];i=void 0===n?{type:2,id:e.id}:{type:1,id:e.id,data:n};let{id:r,data:s}=e,o={...t,[r]:s};return Object.setPrototypeOf(o,Ar.prototype),{data:o,actual:e,reverse:i}}if(2===e.type){let{id:n}=e,i=t[n];if(void 0===i)return null;{let r={...t};return Object.setPrototypeOf(r,Ar.prototype),delete r[n],{data:r,actual:e,reverse:{type:1,id:n,data:i}}}}return null}};function kF(e){if(void 0!==e.deepFreeze)return void e.deepFreeze(e);let t=Object.getOwnPropertyNames(e);for(let n of t){let i=e[n];i&&"object"==typeof i&&kF(i)}return Object.freeze(e)}var VJ=class extends Error{};function NF(e){let t={...e};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function Mg(e,t,n){if(void 0===e?void 0===t?(e=0,t=10):e=t-10:void 0===t&&(t=e+10),e>t){let s=e;e=t,t=s}let i=[],r=1/(n+1);for(let s=0;s<n;s++){let o=e+(t-e)*(s+.75+.5*Math.random())*r;i.push(o)}return i}function LF(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function jJ(e,t){for(let n of e)!0!==t(n.id,n.data)&&jJ(n.children,t)}function HJ(e,t){if(!0!==t(e.id,e.data))for(let n of e.children)HJ(n,t)}var fA,Kc=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Kc.prototype)}deepFreeze(){let e=0;for(;e<this.length;)kF(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let n of e.children)this.fillCaches0(n,e.id)}fillCaches(){if(void 0===this.objCaches){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(0!==e.length)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let n=this.parent(e);if(n===t)return!0;e=n}return!1}rootAcestor(e){for(;e;){let t=this.parent(e);if(!t)return e;e=t}return e}isDescendantOf(e,t){for(;e;){let n=this.parent(e);if(n===t)return!0;e=n}return!1}data(e){return this.get(e)?.data}has(e){return void 0!==this.childrenOf(e)}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){return null===e?this:this.get(e)?.children}traverseFrom(e,t){if(null===e)this.traverse(t);else{let n=this.get(e);n&&HJ(n,t)}}traverse(e){jJ(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return null===e?this:this.get(e).children}modifyById(e,t){if(void 0===this.get(e))throw new Error("not expected");{let n=this.parent(e),i=this.childrenArray(n),r=i.findIndex(o=>o.id===e);if(r<0)throw new Error("not expected");let s=i[r];return i=[...i],i[r]={...s,data:t},this.modifyArrayBy(n,i)}}modifyArrayBy(e,t){let n=e,i=t;for(;null!==n;){let s=i,o=n;if(n=this.parent(n),void 0===n)throw new Error;i=this.childrenArray(n);let a=i.findIndex(l=>l.id===o);if(a<0)throw new Error;i=[...i],i[a]={...i[a],children:s}}Object.setPrototypeOf(i,Kc.prototype);let r=i;return r.fillCaches(),r}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(void 0!==this.get(e))return!0;for(let n of t)if(this.checkDuplicatedIdRec(n))return!0;return!1}addOp(e){let{parent:t,fi:n,id:i,data:r,children:s}=e;if(null!==t&&void 0===this.get(t)||this.checkDuplicatedIdRec(e))return null;{let o=t,a=this.childrenArray(o),l={fi:n,id:i,data:r,children:s};return a=[...a,l],a.sort((c,d)=>c.fi-d.fi),e.localIndex=a.indexOf(l),{data:this.modifyArrayBy(o,a),actual:e,reverse:{type:8,id:i}}}}deleteOp(e){let{id:t}=e;if(null===this.get(t))return null;{let n=this.parent(t);if(void 0===n)return null;let i=this.childrenArray(n),r=i.findIndex(o=>o.id===t);e.localIndex=r,i=[...i];let s=i.splice(r,1)[0];return{data:this.modifyArrayBy(n,i),actual:e,reverse:{type:7,...s,parent:n}}}}moveOp(e){let{parent:t,fi:n,id:i}=e;if(null!==t&&void 0===this.get(t))return this.deleteOp({type:8,id:i});if(null!==t){let h=t;for(;null!==h;){if(void 0===h)throw new Error;if(h===i)throw new VJ("cyclic tree");h=this.parent(h)}}let r=this.parent(i);if(void 0===r)return null;let s=r,o=this.childrenArray(r),a=o.findIndex(h=>h.id===i);o=[...o];let l=o.splice(a,1)[0],c=this.modifyArrayBy(r,o);r=t,o=c.childrenArray(r);let d=l.fi;return l={...l,fi:n},o=[...o,l],o.sort((h,u)=>h.fi-u.fi),e.localIndex=o.indexOf(l),c=c.modifyArrayBy(r,o),{data:c,actual:e,reverse:{type:9,parent:s,fi:d,id:i}}}previous(e,t){if(null===t){let i=this.childrenArray(e);return 0===i.length?null:i[i.length-1].id}let n=null;for(let i of this.childrenArray(e)){if(i.id===t)return n;n=i.id}return null}traverseSortNext(e){let t=this.parent(e);if(void 0!==t){let n=this.childrenArray(t),i=n.findIndex(r=>r.id===e)+1;if(i<n.length)return n[i].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(void 0!==t){let n=this.childrenArray(t),i=n.findIndex(r=>r.id===e)-1;return i>=0?this.traverseSortPrevious(n[i].id):t}}getAllSorted(e){let t=[];for(let n of e){let i=this.getWithSortKey(n.id);void 0!==i&&t.push({...n,...i})}t.sort((n,i)=>function g9e(e,t){let n=0;for(;n<e.length&&n<t.length;){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1;n+=1}return n!==t.length?-1:n!==e.length?1:0}(n.sortKey,i.sortKey));for(let n of t)delete n.sortKey;return t}getWithSortKey(e){var t=e;let n=[],i=this.get(t),r=i;if(void 0!==i){for(;t;)n.splice(0,0,i.fi),null!==(t=this.parent(t))&&(i=this.get(t));return{...r,sortKey:n}}}insertBeforeHelper(e,t,n){return this.insertAfterHelper(e,this.previous(e,t),n)}insertAfterHelper(e,t,n){let i=this.childrenArray(e);if(null===t){if(0===i.length)return Mg(0,n,n);{let r=i[0].fi;return Mg(r-n,r,n)}}{let r=this.get(t);if(void 0===r||this.parent(t)!==e)throw new Error("illegal args");let s=i.find(o=>o.fi>r.fi);if(void 0===s){let o=i[i.length-1].fi;return Mg(o,o+n,n)}return Mg(r.fi,s.fi,n)}}};(e=>{e.runOp=function t(n,i){if(0!==i.type)return null;if(Array.isArray(n)){let r=i.props,s={},o=[...n],a=!1;if(r)for(let l of Object.keys(r)){let c=parseInt(l);if(isNaN(c))throw new Error("wrong index");s[l]=o[c],o[c]=r[l],a=!0}return a?{data:o,actual:i,reverse:{type:0,props:s}}:null}{let r=i.props,s={},o={...n},a=!1;if(r)for(let l of Object.keys(r)){s[l]=o[l];let c=r[l];void 0===c?delete o[l]:o[l]=c,a=!0}return a?{data:o,actual:i,reverse:{type:0,props:s}}:null}}})(fA||(fA={}));var Fi=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Fi.prototype)}deepFreeze(){let e=0;for(;e<this.length;)kF(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(void 0===this.objCaches){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(0!==e.length)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){return this.get(e)?.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(void 0===this.get(e))throw new Error("not expected");{let n=this,i=n.findIndex(s=>s.id===e);if(i<0)throw new Error("not expected");let r=n[i];return n=[...n],n[i]={...r,data:t},this.modifyArrayBy(n)}}modifyArrayBy(e){Object.setPrototypeOf(e,Fi.prototype);let t=e;return function v9e(){return typeof process<"u"}()||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:t,id:n,data:i}=e,r=this,s={fi:t,id:n,data:i};return r=[...r,s],r.sort((o,a)=>o.fi-a.fi),e.localIndex=r.indexOf(s),{data:this.modifyArrayBy(r),actual:e,reverse:{type:5,id:n}}}deleteOp(e){let{id:t}=e,n=this,i=n.findIndex(s=>s.id===t);if(-1===i)return null;e.localIndex=i,n=[...n];let r=n.splice(i,1)[0];return{data:this.modifyArrayBy(n),actual:e,reverse:{type:4,...r}}}moveOp(e){let{fi:t,id:n}=e,i=this;i=[...i];let r=i.findIndex(a=>a.id===n);if(-1===r)return null;let s=i[r].fi,o={...i[r],fi:t};return i[r]=o,i.sort((a,l)=>a.fi-l.fi),e.localIndex=i.indexOf(o),{data:this.modifyArrayBy(i),actual:e,reverse:{type:6,fi:s,id:n}}}previous(e){if(null===e)return 0===this.length?null:this[this.length-1].id;let t=null;for(let n of this){if(n.id===e)return t;t=n.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let n=this;if(null===e){if(0===n.length)return Mg(0,t,t);{let i=n[0].fi;return Mg(i-t,i,t)}}{let i=this.get(e);if(void 0===i)throw new Error("illegal args");let r=n.find(s=>s.fi>i.fi);if(void 0===r){let s=n[n.length-1].fi;return Mg(s,s+t,t)}return Mg(i.fi,r.fi,t)}}};function ib(e){return e&&"object"==typeof e&&e instanceof Ya}var Cg,zF,ql,UF,Ya=class{unusedFunOverridesTable(e){}runOp(e){let t=[],n=this,i=0,r={};for(;i<e.path.length;){if(t.push(n),n=void 0===n?void 0:n[e.path[i]],void 0!==n&&!ib(n))return null;i+=1}n=n?NF(n):new Ya;for(let[a,l]of Object.entries(e.props))r[a]=n[a],void 0===l?delete n[a]:n[a]=l;for(;i>0;){if(0===Object.keys(n).length){let a=t[i-1];a&&(n=NF(a),delete n[e.path[i-1]])}else{let a=t[i-1];if(a){let l=NF(a);l[e.path[i-1]]=n,n=l}else{let l=new Ya;l[e.path[i-1]]=n,n=l}}i-=1}return{data:Object.setPrototypeOf(n,Ya.prototype),actual:e,reverse:{...e,props:r}}}};function FF(e,t){if(void 0===t)return;let n=!1,i=e.map(r=>{let s=r.id,o=KM(r.data,t[s]);if(n=n||void 0!==o,void 0===o&&(o=r.data),r.children){let a=FF(r.children,t);return void 0!==a?n=!0:a=r.children,{...r,id:s,data:o,children:a}}return{...r,id:s,data:o}});return n?i:void 0}function KM(e,t){if(!ib(t))return t;if(e instanceof Kc){let n=FF(e,t);return void 0!==n&&Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}if(e instanceof Fi)return function y9e(e,t){if(void 0===t)return;let n=!1,i=e.map(r=>{let s=r.id,o=KM(r.data,t[s]);return n=n||void 0!==o,void 0===o&&(o=r.data),{...r,id:s,data:o}});return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}(e,t);if(Array.isArray(e)){let n=!1,i=e.map((r,s)=>{let o=KM(r,t[s]);return n=n||void 0!==o,void 0===o&&(o=r),o});return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}if(e instanceof Ya)return BF(e,t);if(e&&"object"==typeof e){let n={},i=!1;for(let[r,s]of Object.entries(e)){let o=KM(s,t[r]);i=i||void 0!==o,void 0===o&&(o=s),n[r]=o}return i?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}}function BF(e,t){if(void 0===e)return t;if(void 0===t)return e;if(!ib(t))return t;if(!ib(e))return Cg.apply(e,t);let n=new Set;for(let r of Object.keys(e))n.add(r);for(let r of Object.keys(t))n.add(r);let i=new Ya;for(let r of n){let s=BF(void 0===e?void 0:e[r],void 0===t?void 0:t[r]);i[r]=s}return i}function _9e(e,t){let n={cur:[],result:[],len:0};return[e=ZM(e,t,n)??e,n.result]}function mA(e,t){return null===e?null:(e.cur[e.len]=t,e.len+=1,e)}function gA(e){e&&(e.len-=1)}function GJ(e,t,n){let i=!1,r=e.map(s=>{let o=s.id,a=t[o];if(void 0!==a&&"string"==typeof a&&(i=!0,o=a,null!==n))throw new Error("not supported");let l=ZM(s.data,t,mA(n,o));gA(n),i=i||void 0!==l,void 0===l&&(l=s.data);let c=GJ(s.children,t,n);return void 0!==c?i=!0:c=s.children,{...s,id:o,data:l,children:c}});if(i)return r}function ZM(e,t,n){if(e instanceof Kc){let i=GJ(e,t,n);return void 0!==i&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}if(e instanceof Fi)return function x9e(e,t,n){let i=!1,r=e.map(s=>{let o=s.id,a=t[o];if(void 0!==a&&"string"==typeof a&&(i=!0,o=a,null!==n))throw new Error("not supported");let l=ZM(s.data,t,mA(n,o));return gA(n),i=i||void 0!==l,void 0===l&&(l=s.data),{...s,id:o,data:l}});if(i)return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}(e,t,n);if(Array.isArray(e)){let i=!1,r=e.map((s,o)=>{let a=ZM(s,t,mA(n,o));return gA(n),i=i||void 0!==a,void 0===a&&(a=s),a});return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}if(e&&"object"==typeof e&&!LF(e)){let i={},r=!1;for(let[s,o]of Object.entries(e))if("name"!==s){let a=t[s];if("string"==typeof a){if(null!==n)throw new Error("not supported");r=!0,s=a}let l=ZM(o,t,mA(n,s));gA(n),r=r||void 0!==l,void 0===l&&(l=o),i[s]=l}else i[s]=o;return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}if("string"==typeof e){let i=t[e];return void 0!==i&&function b9e(e){if(null===e)return null;e.result.push(e.cur.slice(0,e.len))}(n),i}}(e=>{e.apply=function t(r,s){return KM(r,s)??r},e.merge=function n(r,s){return BF(r,s)},e.filterOp=function i(r,s){let o=0,a=s.path,l=r;for(;o<a.length&&void 0!==l;){if(l=xc.zoomOnce(l,a[o]),void 0===l)return s;if(!ib(l))return;o+=1}if(void 0===l)return s;if(ib(l)){if(0===s.type){let c={...s.props};for(let d of Object.keys(l))delete c[d];return{...s,props:c}}if(1===s.type||4===s.type||7===s.type){let c=FF([s],l);return c?(console.log(c),c):s}return s}}})(Cg||(Cg={})),(e=>{e.replaceProps=function t(n,i){let r=xc.zoom(i,n.path);if("object"==typeof r){let s={};for(let o of Object.keys(n.props))s[o]=r[o];return{...n,props:s}}return{...n,props:{}}}})(zF||(zF={})),(e=>{function i(l,c){let d=c.path;for(var h=[];;){let u;if(l instanceof Ya&&0===c.type&&(u=l.runOp({...c,path:d.slice(h.length)}),null===u&&(u=void 0)),void 0===u&&h.length===d.length&&(u=l instanceof Kc||l instanceof Fi||l instanceof Ar?l.runOp(c):fA.runOp(l,c)),void 0!==u){if(null!==u){let v=u.data;for(let g=h.length-1;g>=0;g--){let b=d[g],x=h[g];if(x instanceof Kc){if("number"==typeof b)throw new Error("illegal arg");v=x.modifyById(b,v)}else if(x instanceof Fi){if("number"==typeof b)throw new Error("illegal arg");v=x.modifyById(b,v)}else if(x instanceof Ar){if("number"==typeof b)throw new Error("illegal arg");v=x.modifyById(b,v)}else if(x instanceof Ya){let w={...x,[b]:v};v=Object.setPrototypeOf(w,Ya.prototype)}else{if("object"!=typeof x)return null;if(Array.isArray(x)){if("string"==typeof b&&(b=parseInt(b),isNaN(b)))throw new Error("Invalid path");let w=v;v=[...x],v[b]=w}else v={...x,[b]:v}}}return{data:v,actual:{...u.actual,path:d},reverse:{...u.reverse,path:d}}}return null}let m,p=d[h.length];if(l instanceof Kc){if("number"==typeof p)throw new Error("");m=l.get(p)?.data}else if(l instanceof Fi){if("number"==typeof p)throw new Error("");m=l.get(p)?.data}else null!==l&&(m=l[p]);if(void 0===m)return null;h.push(l),l=m}}function r(l,c){for(let d=0;d<l.length&&d<c.length;d++)if(l[d]!==c[d])return!0;return!1}function s(l,c){if(l.length!==c.length)return!1;for(let d=0;d<l.length;d++)if(l[d]!==c[d])return!1;return!0}e.drop=function t(l,c){return{...l,path:l.path.slice(c)}},e.applySimple=function n(l,c){return i(l,c)?.data??l},e.apply=i,e.pathDisjoint=r,e.pathEq=s,e.commutative=function o(l,c){return r(l.path,c.path)},e.subsumed=function a(l,c){return!(0!==l.type||0!==c.type||!s(l.path,c.path))&&Object.keys(l.props).every(d=>void 0!==c.props[d])}})(ql||(ql={})),(e=>{function l(c,d){var h=c;let u=[],p=[];for(let m of d)try{if(3===m.type||5===m.type&&"variables"===m.path[m.path.length-1]){let v,g,b;if(3===m.type?(v=xc.zoom(h,[...m.path,m.id]),b=ql.apply(h,{...m,type:2})):(v=xc.zoom(h,[...m.path,m.id,"value"]),b=ql.apply(h,m)),null!==b){h=b.data;let[x,w]=_9e(h,{[m.id]:v});h=x;for(let P=0;P<w.length;P++){let A=w[P],D=A.pop();if("number"==typeof D){let R=[D];for(let k=P+1;k<w.length;k++){let L=w[k],Q=L[L.length-1];if("number"!=typeof Q||!xc.equal(A,L.slice(0,L.length-1)))break;R.push(Q),w.splice(k,1)}let N=xc.zoom(h,A);g=N.map((k,L)=>R.includes(L)?m.id:k),v=N,D=A.pop()}else{if("alphaOverride"===D||"alpha"===D){v/=100;let R=v,N=xc.zoom(h,A.slice(0,A.length-2)),k=N.layers.map(L=>L.id===A[A.length-1]?{...L,data:{...L.data,[D]:R}}:L);Object.setPrototypeOf(k,Object.getPrototypeOf(N.layers)),N.layers=k}g=m.id}u.push({type:0,path:A,props:{[D]:v}}),p.push({type:0,path:A,props:{[D]:g}})}p.push(b.reverse),u.push(b.actual)}}else{let v=ql.apply(h,m);null!==v&&(u.push(v.actual),h=v.data,p.push(v.reverse))}}catch(v){if(v instanceof VJ)return null;throw v}return{data:h,actual:u,reverse:p.reverse()}}e.empty=function t(){return[]},e.removePrefix=function n(c,d){let h=[];for(let u of c){let[p,...m]=u.path;p===d&&h.push({...u,path:m})}return h},e.addPrefix=function i(c,d){return c.map(h=>({...h,path:[d,...h.path]}))},e.concat=function r(c,d){return[...c,...d]},e.compress=function s(c,d){return[...c.filter(h=>!d.some(u=>ql.subsumed(h,u))),...d]},e.commutative=function o(c,d){return c.every(h=>d.every(u=>ql.commutative(h,u)))},e.applyAll=function a(c,d){for(let h of d){let u=l(c,h);null!==u&&(c=u.data)}return c},e.apply=l})(UF||(UF={}));var WJ=Symbol(),w9e=Symbol(),vA=Symbol(),QM=class{reportOp(e,t,n=[]){let i=this;if(null===t)return;i._current=t.data;let r=n;for(;!(i instanceof XJ);){let s=i._path,o=i._current;if(""!==s&&r.splice(0,0,s),i=i._parent,null===i)return;i.update(s,o)}i.push(r,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let n=t[vA];n&&n(),delete this._children[e]}}}},M9e=class extends QM{constructor(e,t,n){super(),this._parent=e,this._path=t,this._current=n}update(e,t){if(Array.isArray(this._current)){if("string"==typeof e&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,fA.runOp(this._current,e),e.path)}},C9e=class extends QM{constructor(e,t,n){super(),this._parent=e,this._path=t,this._current=n}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,Ar.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},qJ={get(e,t){if(t===vA)return()=>{e._parent=null};if(t===WJ)return e._current;if(t===w9e)return e;let{_current:n,_children:i}=e;if("push"===t&&Array.isArray(n))throw new Error("not supported to expand array");let r=void 0===i?void 0:i[t];if(void 0!==r)return r;let s=n[t],o=yA(e,t,s);return o!==s?(void 0===i&&(i={},e._children=i),i[t]=o,o):s},has:(e,t)=>t in e._current,ownKeys:e=>Reflect.ownKeys(e._current),defineProperty(){throw Error("not supported")},getPrototypeOf:e=>Object.getPrototypeOf(e._current),setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let n=e._current,i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:!0,enumerable:i.enumerable,value:n[t]}}},P9e={...qJ,set(e,t,n){let i={type:0,props:{[t]:Pa(n)??n}};return e.deleteChildren(t),e.runOp(i),!0},deleteProperty(e,t){let n={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(n),!0}},S9e={...qJ,set(e,t,n){return void 0===n?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:n})),!0},deleteProperty:(e,t)=>(e.runOp({type:2,id:t}),!0)},VF=class extends QM{constructor(e,t,n){super(),this._children={},this._parent=e,this._path=t,this._current=n,this[vA]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,n)=>{e(t,this.data(t))})}data(e){let{_current:t,_children:n}=this,i=void 0===n?void 0:n[e];if(void 0!==i)return i;let r=t.get(e)?.data,s=yA(this,e,r);return s!==r?(void 0===n&&(n={},this._children=n),n[e]=s,s):r}add(e,t,n,i,r){this.runOp({type:7,parent:e,fi:t,id:n,data:i,children:r})}move(e,t,n){this.runOp({type:9,parent:e,fi:t,id:n})}insertAfter(e,t,n){let i=this._current.insertAfterHelper(e,t,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.add(e,i[r],s.id,s.data,s.children)}}insertBefore(e,t,n){let i=this._current.insertBeforeHelper(e,t,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.add(e,i[r],s.id,s.data,s.children)}}moveAfter(e,t,n){let i=this._current.insertAfterHelper(e,t,n.length);for(let r=0;r<n.length;r++)this.move(e,i[r],n[r])}moveBefore(e,t,n){let i=this._current.insertBeforeHelper(e,t,n.length);for(let r=0;r<n.length;r++)this.move(e,i[r],n[r])}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},jF=class extends QM{constructor(e,t,n){super(),this._children={},this._parent=e,this._path=t,this._current=n,this[vA]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let n=0;n<t;n++){let i=this._current[n].id,r=this._current[n].fi;e(this.data(this._current[n].id),i,r)}}find(e){let t=this.length;for(let n=0;n<t;n++){let i=this._current[n].id;if(e(this.data(i),i))return this.get(i)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){let{_current:t,_children:n}=this,i=void 0===n?void 0:n[e];if(void 0!==i)return i;let r=t.get(e)?.data,s=yA(this,e,r);return s!==r?(void 0===n&&(n={},this._children=n),n[e]=s,s):r}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,n){this.runOp({type:4,fi:e,id:t,data:n})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let n=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let r=t[i];this.add(n[i],r.id,r.data)}}insertBefore(e,t){let n=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let r=t[i];this.add(n[i],r.id,r.data)}}moveAfter(e,t){let n=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++)this.move(n[i],t[i])}moveBefore(e,t){let n=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++)this.move(n[i],t[i])}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function HF(e,t,n){if(e.length>0){let i=e[e.length-1];if(0===i.type&&0===t.type&&xc.equal(i.path,n))return void Object.assign(i.props,t.props)}e.push({...t,path:n})}var xc,XJ=class extends QM{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(""!==e)throw new Error("");this._current=t}push(e,t,n,i){HF(this.ts,t,e),HF(this.actual,n,e),HF(this.reverse,i,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function yA(e,t,n){return n instanceof Kc?new VF(e,t,n):n instanceof Fi?new jF(e,t,n):n instanceof Ar?new Proxy(new C9e(e,t,n),S9e):null!==n&&"object"==typeof n?LF(n)?n:new Proxy(new M9e(e,t,n),P9e):n}function YJ(e){let t=new XJ(e);return[yA(t,"",e),t]}function JM(e,t){let[n,i]=YJ(e);return t(n),i.result()}function Pa(e){return e instanceof VF||e instanceof jF?e._current:null!==e&&"object"==typeof e?e[WJ]:e}function Oh(e,t){let n=[];if(!(t.length<=e.length))return null;for(var i=0;i<t.length;){if("*"===t[i])n.push(e[i]);else if(e[i]!==t[i])return null;i+=1}return n}(e=>{function i(s,o){return(s instanceof Kc||s instanceof VF)&&"string"==typeof o||(s instanceof Fi||s instanceof jF)&&"string"==typeof o?s.data(o):"number"==typeof o&&Array.isArray(s)||"string"==typeof o&&"object"==typeof s&&null!==s?s[o]:void 0}function r(s,o,a=0){for(;a<o.length&&void 0!==s;)s=i(s,o[a]),a+=1;return s}e.equal=function t(s,o){if(o.length!==s.length)return!1;for(var a=0;a<s.length;){if(s[a]!==o[a])return!1;a+=1}return!0},e.removeOverridden=function n(s,o,a){let l=r(a,s);if(void 0!==l&&"object"==typeof l&&null!==l){let c={...o};return Object.keys(l).forEach(d=>{delete c[d]}),c}return o},e.zoomOnce=i,e.zoom=r})(xc||(xc={}));var GF,$J=class{},KJ=class extends $J{constructor(e){super(),this.id=e}},ZJ=class extends $J{constructor(e){super(),this.data=e}};try{GF=new TextDecoder}catch{}var ni,Pg,ws,Sg,qd,$f,Is,Pt=0,QJ=[],WF=QJ,qF=0,Zc={},Ah=0,vp=0,wc=[],JJ={useRecords:!1,mapsAsObjects:!0},eee=class{},tee=new eee;tee.name="MessagePack 0xC1";var rb=!1,_A=class{constructor(e){e&&(!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(ni)return pee(()=>(ZF(),this?this.unpack(e,t):_A.prototype.unpack.call(JJ,e,t)));Pg=t>-1?t:e.length,Pt=0,qF=0,vp=0,Sg=null,WF=QJ,qd=null,ni=e;try{Is=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(n){throw ni=null,e instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}if(this instanceof _A){if(Zc=this,this.structures)return ws=this.structures,bA();(!ws||ws.length>0)&&(ws=[])}else Zc=JJ,(!ws||ws.length>0)&&(ws=[]);return bA()}unpackMultiple(e,t){let n,i=0;try{rb=!0;let r=e.length,s=this?this.unpack(e,r):wA.unpack(e,r);if(!t){for(n=[s];Pt<r;)i=Pt,n.push(bA());return n}for(t(s);Pt<r;)if(i=Pt,!1===t(bA()))return}catch(r){throw r.lastPosition=i,r.values=n,r}finally{rb=!1,ZF()}}_mergeStructures(e,t){for(let n=0,i=(e=e||[]).length;n<i;n++){let r=e[n];r&&(r.isShared=!0,n>=32&&(r.highByte=n-32>>5))}e.sharedLength=e.length;for(let n in t||[])if(n>=0){let i=e[n],r=t[n];r&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[n]=i),e[n]=r)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function bA(){try{if(!Zc.trusted&&!rb){let t=ws.sharedLength||0;t<ws.length&&(ws.length=t)}let e=zo();if(Pt==Pg)ws.restoreStructures&&nee(),ws=null,ni=null,$f&&($f=null);else{if(Pt>Pg){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}if(!rb)throw new Error("Data read, but end of buffer not reached")}return e}catch(e){throw ws.restoreStructures&&nee(),ZF(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function nee(){for(let e in ws.restoreStructures)ws[e]=ws.restoreStructures[e];ws.restoreStructures=null}function zo(){let e=ni[Pt++];if(e<160){if(e<128){if(e<64)return e;{let t=ws[63&e]||Zc.getStructures&&ree()[63&e];return t?(t.read||(t.read=XF(t,63&e)),t.read()):e}}if(e<144){if(e-=128,Zc.mapsAsObjects){let t={};for(let n=0;n<e;n++)t[cee()]=zo();return t}{let t=new Map;for(let n=0;n<e;n++)t.set(zo(),zo());return t}}{e-=144;let t=new Array(e);for(let n=0;n<e;n++)t[n]=zo();return t}}if(e<192){let t=e-160;if(vp>=Pt)return Sg.slice(Pt-Ah,(Pt+=t)-Ah);if(0==vp&&Pg<140){let n=t<16?$F(t):aee(t);if(null!=n)return n}return YF(t)}{let t;switch(e){case 192:return null;case 193:return qd?(t=zo(),t>0?qd[1].slice(qd.position1,qd.position1+=t):qd[0].slice(qd.position0,qd.position0-=t)):tee;case 194:return!1;case 195:return!0;case 196:return KF(ni[Pt++]);case 197:return t=Is.getUint16(Pt),Pt+=2,KF(t);case 198:return t=Is.getUint32(Pt),Pt+=4,KF(t);case 199:return Gv(ni[Pt++]);case 200:return t=Is.getUint16(Pt),Pt+=2,Gv(t);case 201:return t=Is.getUint32(Pt),Pt+=4,Gv(t);case 202:if(t=Is.getFloat32(Pt),Zc.useFloat32>2){let n=QF[(127&ni[Pt])<<1|ni[Pt+1]>>7];return Pt+=4,(n*t+(t>0?.5:-.5)>>0)/n}return Pt+=4,t;case 203:return t=Is.getFloat64(Pt),Pt+=8,t;case 204:return ni[Pt++];case 205:return t=Is.getUint16(Pt),Pt+=2,t;case 206:return t=Is.getUint32(Pt),Pt+=4,t;case 207:return Zc.int64AsNumber?(t=4294967296*Is.getUint32(Pt),t+=Is.getUint32(Pt+4)):t=Is.getBigUint64(Pt),Pt+=8,t;case 208:return Is.getInt8(Pt++);case 209:return t=Is.getInt16(Pt),Pt+=2,t;case 210:return t=Is.getInt32(Pt),Pt+=4,t;case 211:return Zc.int64AsNumber?(t=4294967296*Is.getInt32(Pt),t+=Is.getUint32(Pt+4)):t=Is.getBigInt64(Pt),Pt+=8,t;case 212:if(t=ni[Pt++],114==t)return dee(63&ni[Pt++]);{let n=wc[t];if(n)return n.read?(Pt++,n.read(zo())):n.noBuffer?(Pt++,n()):n(ni.subarray(Pt,++Pt));throw new Error("Unknown extension "+t)}case 213:return t=ni[Pt],114==t?(Pt++,dee(63&ni[Pt++],ni[Pt++])):Gv(2);case 214:return Gv(4);case 215:return Gv(8);case 216:return Gv(16);case 217:return t=ni[Pt++],vp>=Pt?Sg.slice(Pt-Ah,(Pt+=t)-Ah):A9e(t);case 218:return t=Is.getUint16(Pt),vp>=(Pt+=2)?Sg.slice(Pt-Ah,(Pt+=t)-Ah):T9e(t);case 219:return t=Is.getUint32(Pt),vp>=(Pt+=4)?Sg.slice(Pt-Ah,(Pt+=t)-Ah):D9e(t);case 220:return t=Is.getUint16(Pt),Pt+=2,see(t);case 221:return t=Is.getUint32(Pt),Pt+=4,see(t);case 222:return t=Is.getUint16(Pt),Pt+=2,oee(t);case 223:return t=Is.getUint32(Pt),Pt+=4,oee(t);default:if(e>=224)return e-256;if(void 0===e){let n=new Error("Unexpected end of MessagePack data");throw n.incomplete=!0,n}throw new Error("Unknown MessagePack token "+e)}}}var O9e=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function XF(e,t){function n(){if(n.count++>2){let r=e.read=new Function("r","return function(){return {"+e.map(s=>O9e.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(zo);return 0===e.highByte&&(e.read=iee(t,e.read)),r()}let i={};for(let r=0,s=e.length;r<s;r++)i[e[r]]=zo();return i}return n.count=0,0===e.highByte?iee(t,n):n}var iee=(e,t)=>function(){let n=ni[Pt++];if(0===n)return t();let i=e<32?-(e+(n<<5)):e+(n<<5),r=ws[i]||ree()[i];if(!r)throw new Error("Record id is not defined for "+i);return r.read||(r.read=XF(r,e)),r.read()};function ree(){let e=pee(()=>(ni=null,Zc.getStructures()));return ws=Zc._mergeStructures(e,ws)}var YF=xA,A9e=xA,T9e=xA,D9e=xA;function xA(e){let t;if(e<16&&(t=$F(e)))return t;if(e>64&&GF)return GF.decode(ni.subarray(Pt,Pt+=e));let n=Pt+e,i=[];for(t="";Pt<n;){let r=ni[Pt++];if(128&r)if(192==(224&r)){let s=63&ni[Pt++];i.push((31&r)<<6|s)}else if(224==(240&r)){let s=63&ni[Pt++],o=63&ni[Pt++];i.push((31&r)<<12|s<<6|o)}else if(240==(248&r)){let l=(7&r)<<18|(63&ni[Pt++])<<12|(63&ni[Pt++])<<6|63&ni[Pt++];l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|1023&l),i.push(l)}else i.push(r);else i.push(r);i.length>=4096&&(t+=hl.apply(String,i),i.length=0)}return i.length>0&&(t+=hl.apply(String,i)),t}function see(e){let t=new Array(e);for(let n=0;n<e;n++)t[n]=zo();return t}function oee(e){if(Zc.mapsAsObjects){let t={};for(let n=0;n<e;n++)t[cee()]=zo();return t}{let t=new Map;for(let n=0;n<e;n++)t.set(zo(),zo());return t}}var hl=String.fromCharCode;function aee(e){let t=Pt,n=new Array(e);for(let i=0;i<e;i++){let r=ni[Pt++];if((128&r)>0)return void(Pt=t);n[i]=r}return hl.apply(String,n)}function $F(e){if(e<4){if(e<2){if(0===e)return"";{let t=ni[Pt++];return(128&t)>1?void(Pt-=1):hl(t)}}{let t=ni[Pt++],n=ni[Pt++];if((128&t)>0||(128&n)>0)return void(Pt-=2);if(e<3)return hl(t,n);let i=ni[Pt++];return(128&i)>0?void(Pt-=3):hl(t,n,i)}}{let t=ni[Pt++],n=ni[Pt++],i=ni[Pt++],r=ni[Pt++];if((128&t)>0||(128&n)>0||(128&i)>0||(128&r)>0)return void(Pt-=4);if(e<6){if(4===e)return hl(t,n,i,r);{let s=ni[Pt++];return(128&s)>0?void(Pt-=5):hl(t,n,i,r,s)}}if(e<8){let s=ni[Pt++],o=ni[Pt++];if((128&s)>0||(128&o)>0)return void(Pt-=6);if(e<7)return hl(t,n,i,r,s,o);let a=ni[Pt++];return(128&a)>0?void(Pt-=7):hl(t,n,i,r,s,o,a)}{let s=ni[Pt++],o=ni[Pt++],a=ni[Pt++],l=ni[Pt++];if((128&s)>0||(128&o)>0||(128&a)>0||(128&l)>0)return void(Pt-=8);if(e<10){if(8===e)return hl(t,n,i,r,s,o,a,l);{let c=ni[Pt++];return(128&c)>0?void(Pt-=9):hl(t,n,i,r,s,o,a,l,c)}}if(e<12){let c=ni[Pt++],d=ni[Pt++];if((128&c)>0||(128&d)>0)return void(Pt-=10);if(e<11)return hl(t,n,i,r,s,o,a,l,c,d);let h=ni[Pt++];return(128&h)>0?void(Pt-=11):hl(t,n,i,r,s,o,a,l,c,d,h)}{let c=ni[Pt++],d=ni[Pt++],h=ni[Pt++],u=ni[Pt++];if((128&c)>0||(128&d)>0||(128&h)>0||(128&u)>0)return void(Pt-=12);if(e<14){if(12===e)return hl(t,n,i,r,s,o,a,l,c,d,h,u);{let p=ni[Pt++];return(128&p)>0?void(Pt-=13):hl(t,n,i,r,s,o,a,l,c,d,h,u,p)}}{let p=ni[Pt++],m=ni[Pt++];if((128&p)>0||(128&m)>0)return void(Pt-=14);if(e<15)return hl(t,n,i,r,s,o,a,l,c,d,h,u,p,m);let v=ni[Pt++];return(128&v)>0?void(Pt-=15):hl(t,n,i,r,s,o,a,l,c,d,h,u,p,m,v)}}}}}function KF(e){return Zc.copyBuffers?Uint8Array.prototype.slice.call(ni,Pt,Pt+=e):ni.subarray(Pt,Pt+=e)}function Gv(e){let t=ni[Pt++];if(wc[t])return wc[t](ni.subarray(Pt,Pt+=e));throw new Error("Unknown extension type "+t)}var lee=new Array(4096);function cee(){let e=ni[Pt++];if(!(e>=160&&e<192))return Pt--,zo();if(e-=160,vp>=Pt)return Sg.slice(Pt-Ah,(Pt+=e)-Ah);if(!(0==vp&&Pg<180))return YF(e);let s,t=4095&(e<<5^(e>1?Is.getUint16(Pt):e>0?ni[Pt]:0)),n=lee[t],i=Pt,r=Pt+e-3,o=0;if(n&&n.bytes==e){for(;i<r;){if(s=Is.getUint32(i),s!=n[o++]){i=1879048192;break}i+=4}for(r+=3;i<r;)if(s=ni[i++],s!=n[o++]){i=1879048192;break}if(i===r)return Pt=i,n.string;r-=3,i=Pt}for(n=[],lee[t]=n,n.bytes=e;i<r;)s=Is.getUint32(i),n.push(s),i+=4;for(r+=3;i<r;)s=ni[i++],n.push(s);let a=e<16?$F(e):aee(e);return n.string=null!=a?a:YF(e)}var dee=(e,t)=>{var n=zo();let i=e;void 0!==t&&(e=e<32?-((t<<5)+e):(t<<5)+e,n.highByte=t);let r=ws[e];return r&&r.isShared&&((ws.restoreStructures||(ws.restoreStructures=[]))[e]=r),ws[e]=n,n.read=XF(n,i),n.read()},hee="object"==typeof self?self:global;wc[0]=()=>{},wc[0].noBuffer=!0,wc[101]=()=>{let e=zo();return(hee[e[0]]||Error)(e[1])},wc[105]=e=>{let t=Is.getUint32(Pt-4);$f||($f=new Map);let i,n=ni[Pt];i=n>=144&&n<160||220==n||221==n?[]:{};let r={target:i};$f.set(t,r);let s=zo();return r.used?Object.assign(i,s):(r.target=s,s)},wc[112]=e=>{let t=Is.getUint32(Pt-4),n=$f.get(t);return n.used=!0,n.target},wc[115]=()=>new Set(zo());var uee=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");function pee(e){let t=Pg,n=Pt,i=qF,r=Ah,s=vp,o=Sg,a=WF,l=$f,c=qd,d=new Uint8Array(ni.slice(0,Pg)),h=ws,u=ws.slice(0,ws.length),p=Zc,m=rb,v=e();return Pg=t,Pt=n,qF=i,Ah=r,vp=s,Sg=o,WF=a,$f=l,qd=c,ni=d,rb=m,(ws=h).splice(0,ws.length,...u),Zc=p,Is=new DataView(ni.buffer,ni.byteOffset,ni.byteLength),v}function ZF(){ni=null,$f=null,ws=null}wc[116]=e=>{let t=e[0],n=uee[t];if(!n)throw new Error("Could not find typed array for code "+t);return new hee[n](Uint8Array.prototype.slice.call(e,1).buffer)},wc[120]=()=>{let e=zo();return new RegExp(e[0],e[1])},wc[98]=e=>{let n=Pt;Pt+=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3]-4,(qd=[zo(),zo()]).position0=0,qd.position1=0;let i=Pt;Pt=n;try{return zo()}finally{Pt=i}},wc[255]=e=>4==e.length?new Date(1e3*(16777216*e[0]+(e[1]<<16)+(e[2]<<8)+e[3])):8==e.length?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+1e3*(4294967296*(3&e[3])+16777216*e[4]+(e[5]<<16)+(e[6]<<8)+e[7])):12==e.length?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+1e3*((128&e[4]?-281474976710656:0)+1099511627776*e[6]+4294967296*e[7]+16777216*e[8]+(e[9]<<16)+(e[10]<<8)+e[11])):new Date("invalid");var QF=new Array(147);for(let e=0;e<256;e++)QF[e]=+("1e"+Math.floor(45.15-.30103*e));var MA,wA=new _A({useRecords:!1}),k9e=new Float32Array(1);new Uint8Array(k9e.buffer,0,4);try{MA=new TextEncoder}catch{}var CA,JF,hn,oa,yp,PA=typeof Buffer<"u",e5=PA?Buffer.allocUnsafeSlow:Uint8Array,fee=PA?Buffer:Uint8Array,mee=PA?4294967296:2144337920,Ht=0,_p=null,N9e=/[\u0080-\uFFFF]/,eC=Symbol("record-id"),gee=class extends _A{constructor(e){super(e),this.offset=0;let n,i,r,s,o,a=0,l=fee.prototype.utf8Write?function(R,N,k){return hn.utf8Write(R,N,k)}:!(!MA||!MA.encodeInto)&&function(R,N){return MA.encodeInto(R,hn.subarray(N)).written},c=this;e||(e={});let d=e&&e.sequential,h=e.structures||e.saveStructures,u=e.maxSharedStructures;if(null==u&&(u=h?32:0),u>8160)throw new Error("Maximum maxSharedStructure is 8160");let p=e.maxOwnStructures;null==p&&(p=h?32:64),d&&!e.saveStructures&&(this.structures=[]);let m=u>32||p+u>64,v=u+64,g=u+p+64;if(g>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let b=[],x=0,w=0;this.pack=this.encode=function(R,N){if(hn||(hn=new e5(8192),oa=new DataView(hn.buffer,0,8192),Ht=0),(yp=hn.length-10)-Ht<2048?(hn=new e5(hn.length),oa=new DataView(hn.buffer,0,hn.length),yp=hn.length-10,Ht=0):Ht=Ht+7&2147483640,n=Ht,o=c.structuredClone?new Map:null,c.bundleStrings?(_p=["",""],hn[Ht++]=214,hn[Ht++]=98,_p.position=Ht-n,Ht+=4):_p=null,i=c.structures,i){i.uninitialized&&(i=c._mergeStructures(c.getStructures()));let k=i.sharedLength||0;if(k>u)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let L=0;L<k;L++){let Q=i[L];if(!Q)continue;let le,ae=i.transitions;for(let he=0,xe=Q.length;he<xe;he++){let _e=Q[he];le=ae[_e],le||(le=ae[_e]=Object.create(null)),ae=le}ae[eC]=L+64}a=k}d||(i.nextId=k+64)}r&&(r=!1),s=i||[];try{if(P(R),_p){oa.setUint32(_p.position+n,Ht-_p.position-n);let k=_p;_p=null,P(k[0]),P(k[1])}if(c.offset=Ht,o&&o.idsToInsert){(Ht+=6*o.idsToInsert.length)>yp&&D(Ht),c.offset=Ht;let k=function F9e(e,t){let n,i=6*t.length,r=e.length-i;for(t.sort((s,o)=>s.offset>o.offset?1:-1);n=t.pop();){let s=n.offset,o=n.id;e.copyWithin(s+i,s,r),i-=6;let a=s+i;e[a++]=214,e[a++]=105,e[a++]=o>>24,e[a++]=o>>16&255,e[a++]=o>>8&255,e[a++]=255&o,r=s}return e}(hn.subarray(n,Ht),o.idsToInsert);return o=null,k}return N&B9e?(hn.start=n,hn.end=Ht,hn):hn.subarray(n,Ht)}finally{if(i){if(w<10&&w++,x>1e4)i.transitions=null,w=0,x=0,b.length>0&&(b=[]);else if(b.length>0&&!d){for(let k=0,L=b.length;k<L;k++)b[k][eC]=0;b=[]}if(r&&c.saveStructures){let k=i.sharedLength||u;i.length>k&&(i=i.slice(0,k));let L=hn.subarray(n,Ht);return!1===c.saveStructures(i,a)?(c._mergeStructures(c.getStructures()),c.pack(R)):(a=k,L)}}N&z9e&&(Ht=n)}};let P=R=>{Ht>yp&&(hn=D(Ht));var k,N=typeof R;if("string"===N){let Q,L=R.length;if(_p&&L>=8&&L<4096){let ae=N9e.test(R);return _p[ae?0:1]+=R,hn[Ht++]=193,void P(ae?-L:L)}Q=L<32?1:L<256?2:L<65536?3:5;let le=3*L;if(Ht+le>yp&&(hn=D(Ht+le)),L<64||!l){let ae,he,xe,_e=Ht+Q;for(ae=0;ae<L;ae++)he=R.charCodeAt(ae),he<128?hn[_e++]=he:he<2048?(hn[_e++]=he>>6|192,hn[_e++]=63&he|128):55296==(64512&he)&&56320==(64512&(xe=R.charCodeAt(ae+1)))?(he=65536+((1023&he)<<10)+(1023&xe),ae++,hn[_e++]=he>>18|240,hn[_e++]=he>>12&63|128,hn[_e++]=he>>6&63|128,hn[_e++]=63&he|128):(hn[_e++]=he>>12|224,hn[_e++]=he>>6&63|128,hn[_e++]=63&he|128);k=_e-Ht-Q}else k=l(R,Ht+Q,le);k<32?hn[Ht++]=160|k:k<256?(Q<2&&hn.copyWithin(Ht+2,Ht+1,Ht+1+k),hn[Ht++]=217,hn[Ht++]=k):k<65536?(Q<3&&hn.copyWithin(Ht+3,Ht+2,Ht+2+k),hn[Ht++]=218,hn[Ht++]=k>>8,hn[Ht++]=255&k):(Q<5&&hn.copyWithin(Ht+5,Ht+3,Ht+3+k),hn[Ht++]=219,oa.setUint32(Ht,k),Ht+=4),Ht+=k}else if("number"===N)if(R>>>0===R)R<64?hn[Ht++]=R:R<256?(hn[Ht++]=204,hn[Ht++]=R):R<65536?(hn[Ht++]=205,hn[Ht++]=R>>8,hn[Ht++]=255&R):(hn[Ht++]=206,oa.setUint32(Ht,R),Ht+=4);else if(R>>0===R)R>=-32?hn[Ht++]=256+R:R>=-128?(hn[Ht++]=208,hn[Ht++]=R+256):R>=-32768?(hn[Ht++]=209,oa.setInt16(Ht,R),Ht+=2):(hn[Ht++]=210,oa.setInt32(Ht,R),Ht+=4);else{let L;if((L=this.useFloat32)>0&&R<4294967296&&R>=-2147483648){let Q;if(hn[Ht++]=202,oa.setFloat32(Ht,R),L<4||(Q=R*QF[(127&hn[Ht])<<1|hn[Ht+1]>>7])>>0===Q)return void(Ht+=4);Ht--}hn[Ht++]=203,oa.setFloat64(Ht,R),Ht+=8}else if("object"===N)if(R){if(o){let Q=o.get(R);if(Q){if(!Q.id){let le=o.idsToInsert||(o.idsToInsert=[]);Q.id=le.push(Q)}return hn[Ht++]=214,hn[Ht++]=112,oa.setUint32(Ht,Q.id),void(Ht+=4)}o.set(R,{offset:Ht-n})}let L=R.constructor;if(L===Object)A(R,!0);else if(L===Array){(k=R.length)<16?hn[Ht++]=144|k:k<65536?(hn[Ht++]=220,hn[Ht++]=k>>8,hn[Ht++]=255&k):(hn[Ht++]=221,oa.setUint32(Ht,k),Ht+=4);for(let Q=0;Q<k;Q++)P(R[Q])}else if(L===Map){(k=R.size)<16?hn[Ht++]=128|k:k<65536?(hn[Ht++]=222,hn[Ht++]=k>>8,hn[Ht++]=255&k):(hn[Ht++]=223,oa.setUint32(Ht,k),Ht+=4);for(let[Q,le]of R)P(Q),P(le)}else{for(let Q=0,le=CA.length;Q<le;Q++)if(R instanceof JF[Q]){let he=CA[Q];if(he.write)return he.type&&(hn[Ht++]=212,hn[Ht++]=he.type,hn[Ht++]=0),void P(he.write.call(this,R));let me,xe=hn,_e=oa,be=Ht;hn=null;try{me=he.pack.call(this,R,Te=>(hn=xe,xe=null,(Ht+=Te)>yp&&D(Ht),{target:hn,targetView:oa,position:Ht-Te}),P)}finally{xe&&(oa=_e,Ht=be,yp=(hn=xe).length-10)}return void(me&&(me.length+Ht>yp&&D(me.length+Ht),Ht=L9e(me,hn,Ht,he.type)))}A(R,!R.hasOwnProperty)}}else hn[Ht++]=192;else if("boolean"===N)hn[Ht++]=R?195:194;else if("bigint"===N){if(R<BigInt(1)<<BigInt(63)&&R>=-(BigInt(1)<<BigInt(63)))hn[Ht++]=211,oa.setBigInt64(Ht,R);else if(R<BigInt(1)<<BigInt(64)&&R>0)hn[Ht++]=207,oa.setBigUint64(Ht,R);else{if(!this.largeBigIntToFloat)throw new RangeError(R+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");hn[Ht++]=203,oa.setFloat64(Ht,Number(R))}Ht+=8}else if("undefined"===N)this.encodeUndefinedAsNil?hn[Ht++]=192:(hn[Ht++]=212,hn[Ht++]=0,hn[Ht++]=0);else{if("function"!==N)throw new Error("Unknown type: "+N);P(this.writeFunction&&this.writeFunction())}},A=!1===this.useRecords?this.variableMapSize?R=>{let L,N=Object.keys(R),k=N.length;k<16?hn[Ht++]=128|k:k<65536?(hn[Ht++]=222,hn[Ht++]=k>>8,hn[Ht++]=255&k):(hn[Ht++]=223,oa.setUint32(Ht,k),Ht+=4);for(let Q=0;Q<k;Q++)P(L=N[Q]),P(R[L])}:(R,N)=>{hn[Ht++]=222;let k=Ht-n;Ht+=2;let L=0;for(let Q in R)(N||R.hasOwnProperty(Q))&&(P(Q),P(R[Q]),L++);hn[k+++n]=L>>8,hn[k+n]=255&L}:R=>{let k,N=Object.keys(R),L=s.transitions||(s.transitions=Object.create(null)),Q=0;for(let ae=0,he=N.length;ae<he;ae++){let xe=N[ae];k=L[xe],k||(k=L[xe]=Object.create(null),Q++),L=k}let le=L[eC];if(le)le>=96&&m?(hn[Ht++]=96+(31&(le-=96)),hn[Ht++]=le>>5):hn[Ht++]=le;else{le=s.nextId,le||(le=64),le<v&&this.shouldShareStructure&&!this.shouldShareStructure(N)?(le=s.nextOwnId,le<g||(le=v),s.nextOwnId=le+1):(le>=g&&(le=v),s.nextId=le+1);let ae=N.highByte=le>=96&&m?le-96>>5:-1;L[eC]=le,s[le-64]=N,le<v?(N.isShared=!0,s.sharedLength=le-63,r=!0,ae>=0?(hn[Ht++]=96+(31&le),hn[Ht++]=ae):hn[Ht++]=le):(ae>=0?(hn[Ht++]=213,hn[Ht++]=114,hn[Ht++]=96+(31&le),hn[Ht++]=ae):(hn[Ht++]=212,hn[Ht++]=114,hn[Ht++]=le),Q&&(x+=w*Q),b.length>=p&&(b.shift()[eC]=0),b.push(L),P(N))}for(let ae=0,he=N.length;ae<he;ae++)P(R[N[ae]])},D=R=>{let N;if(R>16777216){if(R-n>mee)throw new Error("Packed buffer would be larger than maximum buffer size");N=Math.min(mee,4096*Math.round(Math.max((R-n)*(R>67108864?1.25:2),4194304)/4096))}else N=1+(Math.max(R-n<<2,hn.length-1)>>12)<<12;let k=new e5(N);return oa=new DataView(k.buffer,0,N),hn.copy?hn.copy(k,0,n,R):k.set(hn.slice(n,R)),Ht-=n,n=0,yp=k.length-10,hn=k}}useBuffer(e){hn=e,oa=new DataView(hn.buffer,hn.byteOffset,hn.byteLength),Ht=0}};function vee(e,t,n,i){let r=e.byteLength;if(r+1<256){var{target:s,position:o}=n(4+r);s[o++]=199,s[o++]=r+1}else if(r+1<65536){var{target:s,position:o}=n(5+r);s[o++]=200,s[o++]=r+1>>8,s[o++]=r+1&255}else{var{target:s,position:o,targetView:a}=n(7+r);s[o++]=201,a.setUint32(o,r+1),o+=4}s[o++]=116,s[o++]=t,s.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o)}function yee(e,t){let n=e.byteLength;var i,r;if(n<256){var{target:i,position:r}=t(n+2);i[r++]=196,i[r++]=n}else if(n<65536){var{target:i,position:r}=t(n+3);i[r++]=197,i[r++]=n>>8,i[r++]=255&n}else{var{target:i,position:r,targetView:s}=t(n+5);i[r++]=198,s.setUint32(r,n),r+=4}i.set(e,r)}function L9e(e,t,n,i){let r=e.length;switch(r){case 1:t[n++]=212;break;case 2:t[n++]=213;break;case 4:t[n++]=214;break;case 8:t[n++]=215;break;case 16:t[n++]=216;break;default:r<256?(t[n++]=199,t[n++]=r):r<65536?(t[n++]=200,t[n++]=r>>8,t[n++]=255&r):(t[n++]=201,t[n++]=r>>24,t[n++]=r>>16&255,t[n++]=r>>8&255,t[n++]=255&r)}return t[n++]=i,t.set(e,n),n+r}function sb(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");JF.unshift(e.Class),CA.unshift(e)}!function I9e(e){wc[e.type]=e.unpack?e.unpack:e}(e)}JF=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,eee],CA=[{pack(e,t,n){let i=e.getTime()/1e3;if((this.useTimestamp32||0===e.getMilliseconds())&&i>=0&&i<4294967296){let{target:r,targetView:s,position:o}=t(6);r[o++]=214,r[o++]=255,s.setUint32(o,i)}else if(i>0&&i<17179869184){let{target:r,targetView:s,position:o}=t(10);r[o++]=215,r[o++]=255,s.setUint32(o,4e6*e.getMilliseconds()+(i/1e3/4294967296>>0)),s.setUint32(o+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return t(0),n(this.onInvalidDate());let{target:r,position:o}=t(3);r[o++]=212,r[o++]=255,r[o++]=255}else{let{target:r,targetView:s,position:o}=t(15);r[o++]=199,r[o++]=12,r[o++]=255,s.setUint32(o,1e6*e.getMilliseconds()),s.setBigInt64(o+4,BigInt(Math.floor(i)))}}},{pack(e,t,n){let i=Array.from(e),{target:r,position:s}=t(this.structuredClone?3:0);this.structuredClone&&(r[s++]=212,r[s++]=115,r[s++]=0),n(i)}},{pack(e,t,n){let{target:i,position:r}=t(this.structuredClone?3:0);this.structuredClone&&(i[r++]=212,i[r++]=101,i[r++]=0),n([e.name,e.message])}},{pack(e,t,n){let{target:i,position:r}=t(this.structuredClone?3:0);this.structuredClone&&(i[r++]=212,i[r++]=120,i[r++]=0),n([e.source,e.flags])}},{pack(e,t){this.structuredClone?vee(e,16,t):yee(PA?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let n=e.constructor;n!==fee&&this.structuredClone?vee(e,uee.indexOf(n.name),t):yee(e,t)}},{pack(e,t){let{target:n,position:i}=t(1);n[i]=193}}],new gee({useRecords:!1});var n5,xee,B9e=512,z9e=1024,bee=new gee({structuredClone:!0});function t5(e){if(LF(e))return e;if(Array.isArray(e))return e.map(t5);if("object"==typeof e&&null!==e){let t={};for(let n of Object.keys(e).sort())t[n]=t5(e[n]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}return e}sb({Class:Ar.prototype.constructor,type:1,write:e=>({...e}),read:e=>(Object.setPrototypeOf(e,Ar.prototype),e)}),sb({Class:Fi.prototype.constructor,type:2,write:e=>[...e],read:e=>(Object.setPrototypeOf(e,Fi.prototype),e)}),sb({Class:Kc.prototype.constructor,type:3,write:e=>[...e],read:e=>(Object.setPrototypeOf(e,Kc.prototype),e)}),sb({Class:KJ.prototype.constructor,type:4,write:e=>e.id,read:e=>new KJ(e)}),sb({Class:ZJ.prototype.constructor,type:5,write:e=>e.data,read:e=>new ZJ(e)}),sb({Class:Ya.prototype.constructor,type:6,write:e=>({...e}),read:e=>(Object.setPrototypeOf(e,Ya.prototype),e)}),(e=>{function t(r){return bee.pack(r)}e.serialize=t,e.deserialize=function n(r){return bee.unpack(r)},e.checksum=function i(r){return function U9e(e){var t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e[n],t&=t;return t}(t(t5(r))).toString()}})(n5||(n5={})),(e=>{e.toEventUIType=function t(i){return"Conditional"===i.type?"Distance"===i.condition.type?"Distance":"StateChange":i.type},e.fromEventUIType=function n(i){return"Distance"===i||"StateChange"===i?"Conditional":i}})(xee||(xee={}));var wee,SA,i5,Mee,Cee,r5,s5,Pee,See,Eee,Oee,Aee,o5,a5,Xd={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Create","SetVariable","DynamicVariablePlay","Conditional"],MouseHover:["Transition","Animation","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional"],Scroll:["Transition","Animation","Create","SetVariable","DynamicVariablePlay","Conditional"],Start:["Transition","Animation","Audio","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],Conditional:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MouseDown:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MouseUp:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MousePress:["Transition","Animation","Audio","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyDown:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyUp:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyPress:["Transition","Animation","Audio","Video","Link","Create","SwitchCamera","Reset","SetVariable","DynamicVariablePlay","Conditional"],GameControl:["Transition","Animation","Audio","Create","Conditional"],Collision:["Transition","Animation","Audio","Video","Create","Destroy","Reset","SetVariable","DynamicVariablePlay","Conditional"],Trigger:["Transition","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],Resize:["Transition","Animation","Audio","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],VariableChange:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"]};(e=>{e.is=function t(i){return"MouseDown"===i.type||"MouseUp"===i.type||"MousePress"===i.type||"KeyDown"===i.type||"KeyUp"===i.type||"KeyPress"===i.type},e.defaultData=function n(i){return"MouseDown"===i||"MouseUp"===i||"MousePress"===i?{type:i,mode:"Object",disabled:!1,runMode:"Once",actions:new Fi}:{type:i,disabled:!1,key:void 0,runMode:"Once",actions:new Fi}}})(wee||(wee={})),(e=>{e.propertyDefaultData=function t(n){return{type:"Property",value:[n??null,"position","x"]}},e.valueDefaultData={type:"Literal",value:0}})(SA||(SA={})),(e=>{e.comparisonDefaultData=function t(r){return{type:"Comparison",operator:"==",lOperand:SA.propertyDefaultData(r),rOperand:{...SA.valueDefaultData}}},e.distanceDefaultData=function n(r){return{type:"Distance",toObject:r??null,fromObject:r??null,distance:200}},e.stateDefaultData=function i(r,s){return{type:"State",object:r??null,state:s??null}}})(i5||(i5={})),(e=>{e.is=function t(i){return"Conditional"===i.type},e.defaultData=function n(i){return{type:"Conditional",disabled:!1,inActions:new Fi,outActions:new Fi,condition:i5.distanceDefaultData(i)}}})(Mee||(Mee={})),(e=>{e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new Fi,drop:new Fi}}})(Cee||(Cee={})),(e=>{e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new Fi}})(r5||(r5={})),(e=>{e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5}})(s5||(s5={})),(e=>{e.is=function t(i){return"MouseHover"===i.type},e.defaultData=function n(){return{type:"MouseHover",disabled:!1,actions:new Fi}}})(Pee||(Pee={})),(e=>{e.is=function t(i){return"Scroll"===i.type},e.defaultData=function n(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new Fi}}})(See||(See={})),(e=>{e.is=function t(i){return"Start"===i.type},e.defaultData=function n(){return{type:"Start",disabled:!1,actions:new Fi}}})(Eee||(Eee={})),(e=>{e.is=function t(i){return"Collision"===i.type},e.defaultData=function n(){return{type:"Collision",disabled:!1,runMode:"Once",target:"character",actions:new Fi}}})(Oee||(Oee={})),(e=>{e.is=function t(i){return"Trigger"===i.type},e.defaultData=function n(i,r){return{type:"Trigger",disabled:!1,runMode:"Once",target:"all",triggeringObjects:[],actions:new Fi,triggerZone:"box",position:r.toArray(),rotation:[0,0,0],size:i.toArray(),radius:i.length()/2,helperVisible:!0}}})(Aee||(Aee={})),(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]},e.is=function t(o){return"Resize"===o.type},e.sizeToDevice=function n(o){return"string"==typeof o?o:"custom"},e.deviceToSize=function i(o){return"string"==typeof o?[...e.defaultSizes[o]]:[...o]},e.defaultData=function r(){let o={size:"mobile",operator:"<",actions:new Fi},a={size:"tablet",operator:"<",actions:new Fi},l={size:[...e.defaultSizes.custom],operator:"<>",actions:new Fi},c=new Fi;return c.push({id:gi.generateUUID(),fi:0,data:o},{id:gi.generateUUID(),fi:1,data:a},{id:gi.generateUUID(),fi:2,data:l}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:c}},e.defaultBreakpointData=function s(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new Fi}}})(o5||(o5={})),(e=>{e.propertyPaths={Position:["position"],"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],Rotation:["rotation"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],Scale:["scale"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]},e.is=function t(i){return"VariableChange"===i.type},e.defaultData=function n(){return{disabled:!1,type:"VariableChange",actions:new Fi,variableId:"",objectId:null,property:"Position X"}}})(a5||(a5={}));var lb,Wv,EA,cb,Mc,vu,l5,Tee,Dee,Eg,qv,db,Og,c5,ab="personal camera",tC="a218fcc3-276b-49b9-b485-49037fd14f5f",Th=5526619;function Iee(e){return"string"==typeof e&&36===e.length&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)}(e=>{e.isEqual=function t(i,r){return i[0]===r[0]&&i[1]===r[1]},e.lerp=function n(i,r,s){return[i[0]+(r[0]-i[0])*s,i[1]+(r[1]-i[1])*s]}})(lb||(lb={})),(e=>{e.isEqual=function t(l,c){return l[0]===c[0]&&l[1]===c[1]&&l[2]===c[2]},e.add=function n(l,c){return[l[0]+c[0],l[1]+c[1],l[2]+c[2]]},e.sub=function i(l,c){return[l[0]-c[0],l[1]-c[1],l[2]-c[2]]},e.div=function r(l,c){return[l[0]/c[0],l[1]/c[1],l[2]/c[2]]},e.mul=function s(l,c){return[l[0]*c[0],l[1]*c[1],l[2]*c[2]]},e.dist=function o(l,c){return Math.hypot(l[0]-c[0],l[1]-c[1],l[2]-c[2])},e.lerp=function a(l,c,d){return[l[0]+(c[0]-l[0])*d,l[1]+(c[1]-l[1])*d,l[2]+(c[2]-l[2])*d]}})(Wv||(Wv={})),(e=>{e.isEqual=function t(i,r){return i[0]===r[0]&&i[1]===r[1]&&i[2]===r[2]&&i[3]===r[3]},e.lerp=function n(i,r,s){return[i[0]+(r[0]-i[0])*s,i[1]+(r[1]-i[1])*s,i[2]+(r[2]-i[2])*s,i[3]+(r[3]-i[3])*s]}})(EA||(EA={})),(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e.isEqual=function t(r,s){for(let o=0;o<16;o++)if(r[o]!==s[o])return!1;return!0},e.simplify=function n(r){return r??e.identity},e.applyMatrix4=function i(r,s){let o=s.slice(0);for(var a=0,l=s.length;a<l;a+=3){let c=r[3]*s[a]+r[7]*s[a+1]+r[11]*s[a+2]+r[15];o[a]=(r[0]*s[a]+r[4]*s[a+1]+r[8]*s[a+2]+r[12])/c,o[a+1]=(r[1]*s[a]+r[5]*s[a+1]+r[9]*s[a+2]+r[13])/c,o[a+2]=(r[2]*s[a]+r[6]*s[a+1]+r[10]*s[a+2]+r[14])/c}return o}})(cb||(cb={})),(e=>{e.isRGB=function t(l){return"object"==typeof l&&"number"==typeof l.r&&"number"==typeof l.g&&"number"==typeof l.b},e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0},e.toRgb255a1=function n(l){return{r:Math.round(255*l.r),g:Math.round(255*l.g),b:Math.round(255*l.b),a:1}},e.clone=function i(l){return{r:l.r,g:l.g,b:l.b}},e.fromHex=function r(l){return{r:((l=Math.floor(l))>>16&255)/255,g:(l>>8&255)/255,b:(255&l)/255}},e.toHex=function s(l){return 65536*Math.round(255*l.r)+256*Math.round(255*l.g)+Math.round(255*l.b)},e.equals=function o(l,c){return l.r===c.r&&l.g===c.g&&l.b===c.b},e.lerp=function a(l,c,d){return{r:l.r+(c.r-l.r)*d,g:l.g+(c.g-l.g)*d,b:l.b+(c.b-l.b)*d}}})(Mc||(Mc={})),(e=>{e.white={...Mc.white,a:1},e.transparent={...Mc.white,a:0},e.from0to1=function t(o){return{r:o[0],g:o[1],b:o[2],a:o[3]}},e.fromHexAndA=function n(o,a){return{...Mc.fromHex(o),a}},e.toRgb255a1=function i(o){return{r:Math.round(255*o.r),g:Math.round(255*o.g),b:Math.round(255*o.b),a:o.a}},e.equals=function r(o,a){return Mc.equals(o,a)&&o.a===a.a},e.lerp=function s(o,a,l){return{r:o.r+(a.r-o.r)*l,g:o.g+(a.g-o.g)*l,b:o.b+(a.b-o.b)*l,a:o.a+(a.a-o.a)*l}}})(vu||(vu={})),(e=>{e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]}})(l5||(l5={})),(e=>{e.defaultData={mass:1,stiffness:80,damping:10,velocity:0}})(Tee||(Tee={})),(e=>{e.defaultData={control1:[.5,0],control2:[.5,1]}})(Dee||(Dee={})),(e=>{e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]})(Eg||(Eg={})),(e=>{e.all=["PerspectiveCamera","OrthographicCamera"],e.is=function t(n){return e.all.includes(n)}})(qv||(qv={})),(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset},e.getZoom=function t(n){return"PerspectiveCamera"===n.type?n.perspective.zoom:n.orthographic.zoom}})(db||(db={})),(e=>{e.defaultData=function t(i,r=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:2*Math.max(i[0],i[1]),start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[i[0]+i[0]*r,0,0]},grid:{count:[2,2,2],size:i.map(s=>s*(1+r)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}},e.merge=function n(i,r){let s={...i};if(Ree.forEach(o=>{Object.assign(s,{[o]:r[o]??i[o]})}),s.radial={...i.radial},r.radial){let o=i.radial,a=r.radial;kee.forEach(l=>{Object.assign(s.radial,{[l]:a[l]??o[l]})})}if(s.linear={...i.linear},r.linear){let o=i.linear,a=r.linear;Nee.forEach(l=>{Object.assign(s.linear,{[l]:a[l]??o[l]})})}if(s.grid={...i.grid},r.grid){let o=i.grid,a=r.grid;Lee.forEach(l=>{Object.assign(s.grid,{[l]:a[l]??o[l]})})}if(s.toObject={...i.toObject},r.toObject){let o=i.toObject,a=r.toObject;Fee.forEach(l=>{Object.assign(s.toObject,{[l]:a[l]??o[l]})})}if(s.randomnessObject={...i.randomnessObject},r.randomnessObject){let o=i.randomnessObject,a=r.randomnessObject;Bee.forEach(l=>{Object.assign(s.randomnessObject,{[l]:a[l]??o[l]})})}return s}})(Og||(Og={})),(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];e.toOps=function n(i,r){let s=[];void 0!==i.count&&s.push({type:0,path:r,props:{count:i.count}});for(let o of t){let a=i[o];a&&Object.keys(a).length>0&&s.push({type:0,path:[...r,o],props:a})}return s}})(c5||(c5={}));var d5,h5,hb,u5,p5,f5,zee,OA,Uee,Vee,Ree=["count"],kee=["radius","start","end","position","scale","rotation"],Nee=["position","scale","rotation"],Lee=["count","size"],Fee=["count","position","scale","rotation"],Bee=["strength","scale","rotation","position","movement","seed","freqScale"];(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"],e.is=function t(n){return e.all.includes(n)}})(d5||(d5={})),(e=>{e.defaultData=function t(i){return function n(i){if("PointLight"===i)return{type:i,color:vu.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if("SpotLight"===i)return{type:i,color:vu.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if("DirectionalLight"===i)return{type:i,color:vu.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}(i)}})(h5||(h5={})),(e=>{e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]}})(hb||(hb={})),(e=>{e.defaultData={castShadow:!0,receiveShadow:!0},e.equals=function t(n,i){return n.castShadow===i.castShadow&&n.receiveShadow===i.receiveShadow}})(u5||(u5={})),(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0},e.equals=function t(n,i){return n.flatShading===i.flatShading&&n.side===i.side&&n.wireframe===i.wireframe}})(p5||(p5={})),(e=>{e.defaultData={...p5.defaultData,...u5.defaultData}})(f5||(f5={})),(e=>{e.getMaterialData=function t(n,i){let r=[];if("material"in n){let s="string"==typeof n.material?i.materials[n.material]??i.lib.materials[n.material]?.asset:n.material;s&&r.push(s)}else if("materials"in n)for(let s of n.materials){let o="string"==typeof s?i.materials[s]??i.lib.materials[s]?.asset:s;o&&r.push(o)}return r}})(zee||(zee={})),(e=>{e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7})(OA||(OA={})),(e=>{e.is=function t(n){return"texture"===n||"video"===n||"color"===n||"depth"===n||"normal"===n||"gradient"===n||"noise"===n||"fresnel"===n||"rainbow"===n||"toon"===n||"outline"===n||"transmission"===n||"matcap"===n||"displace"===n||"pattern"===n||"light"===n}})(Uee||(Uee={})),(e=>{e.is=function t(n){return"phong"===n||"toon"===n||"lambert"===n||"physical"===n}})(Vee||(Vee={}));var Qc,Xl,AA,TA,jee=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],H9e=["wrapping","image","video","name"];(e=>{e.patch=function t(s,o){let{texture:a,...l}=o;if(Object.assign(s,l),a){let c=s.texture;c&&Object.assign(c,a)}},e.defaultData=function n(s,o){return"light"===s&&o?function i(s){let o={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(s){case"phong":return{...o,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...o,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...o,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...o,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}(o):function r(s){let o={alpha:1,mode:0,isMask:!1,visible:!0};switch(s){case"texture":return{...o,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0]},crop:!1};case"video":return{...o,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:OA.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!1};case"color":return{...o,type:"color",color:Mc.fromHex(Th)};case"depth":return{...o,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...o,type:"normal",cnormal:[1,1,1]};case"gradient":return{...o,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...o,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Mc.fromHex(6710886),a:1},colorB:{...Mc.fromHex(6710886),a:1},colorC:{...Mc.fromHex(16777215),a:1},colorD:{...Mc.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...o,type:"fresnel",color:vu.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...o,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...o,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:vu.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...o,type:"outline",outlineColor:vu.fromHexAndA(0,1),contourColor:vu.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...o,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{...o,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...o,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...Mc.fromHex(0),a:1},colorB:{...Mc.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}(s)}})(Qc||(Qc={})),(e=>{function o(c,d="layer1",h="layer2"){let u=new Fi;return u.push({fi:0,data:Qc.defaultData("light",c),id:d}),u.push({fi:1,data:Qc.defaultData("color"),id:h}),{layers:u}}e.isMergable=function t(c){return!c.layers.some(d=>"texture"===d.data.type&&0!==d.data.projection||"depth"===d.data.type&&!d.data.isWorldSpace||"noise"===d.data.type||"displace"===d.data.type)},e.getHash=function n(c){let d="";return c.layers.forEach(h=>{Object.entries(h.data).forEach(([u,p])=>{d+=`${u}${p}`,Array.isArray(p)?p.forEach(m=>d+=`${m}`):"object"==typeof p?Object.values(p).forEach(m=>{d+="number"==typeof m?`${m.toFixed(4)}`:`${m}`}):d+=`${p}`})}),d},e.defaultEmptyData=function i(){return{layers:new Fi}},e.defaultData=function r(c="layer1",d="layer2"){return o("phong",c,d)},e.withName=function s(c,d){return{...c,name:d}},e.defaultTwoLayerData=o,e.defaultTwoLayerTextureData=function a(c,d="phong",h="layer1",u="layer2"){let p=Qc.defaultData("texture");Object.assign(p.texture,{image:c});let m=new Fi;return m.push({fi:0,data:p,id:h}),m.push({fi:1,data:Qc.defaultData("light",d),id:u}),{layers:m}},e.defaultTwoLayerVideoTextureData=function l(c,d="phong",h="layer1",u="layer2"){let p=Qc.defaultData("video");Object.assign(p.texture,{video:c});let m=new Fi;return m.push({fi:0,data:p,id:h}),m.push({fi:1,data:Qc.defaultData("light",d),id:u}),{layers:m}}})(Xl||(Xl={})),(e=>{e.defaultData=function t(){return{points:new Fi,roundness:0,shapeHoles:[],isClosed:!1}}})(AA||(AA={})),(e=>{e.defaultData=function t(){return{points:new Fi,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}})(TA||(TA={}));var m5,Hee={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0};(e=>{e.merge=function t(n,i){let r={...n};return Wee.forEach(s=>{Object.assign(r,{[s]:i[s]??n[s]})}),r}})(m5||(m5={}));var DA,g5,ub,Gee={shape:Hee,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},Wee=["depth","offset","angle","twist","startScale","endScale"];(e=>{e.is2DParametricMesh=function t(i){return"PolygonGeometry"===i||"RectangleGeometry"===i||"StarGeometry"===i||"TriangleGeometry"===i||"EllipseGeometry"===i},e.isParametricMesh=function n(i){return"PolygonGeometry"===i||"PolygonGeometry"===i||"RectangleGeometry"===i||"StarGeometry"===i||"TriangleGeometry"===i||"EllipseGeometry"===i||"PathGeometry"===i||"VectorGeometry"===i||"ConeGeometry"===i||"CubeGeometry"===i||"CylinderGeometry"===i||"DodecahedronGeometry"===i||"HelixGeometry"===i||"IcosahedronGeometry"===i||"LatheGeometry"===i||"PyramidGeometry"===i||"SphereGeometry"===i||"PlaneGeometry"===i||"BackdropGeometry"===i||"TorusGeometry"===i||"TorusKnotGeometry"===i||"BooleanGeometry"===i||"TextGeometry"===i}})(DA||(DA={})),(e=>{e.merge=function t(n,i){let r={...n};return Object.assign(r,i),"PathGeometry"===r.type&&"extrusion"in i&&i.extrusion&&(r.extrusion={...n.extrusion},Object.assign(r.extrusion,m5.merge(r.extrusion,i.extrusion))),r}})(g5||(g5={})),(e=>{e.defaultData=function t(n){if("RectangleGeometry"===n)return{width:320,height:320,type:n,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if("PathGeometry"===n)return{type:n,width:1,height:1,depth:1,path:TA.defaultData(),extrusion:Gee};if("VectorGeometry"===n)return{width:1,height:1,type:n,subdivisions:12,shape:AA.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if("BooleanGeometry"===n)return{type:n,operation:2,width:0,height:0,depth:0,phongAngle:35};if("TextGeometry"===n)return{type:n,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};if("SphereGeometry"===n)return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")}})(ub||(ub={}));var v5,IA,y5,_5,b5,pb,x5,w5,Xee,fb,Cc,M5,Yee,mb,nC,C5,RA,Ag,gb,P5,Xv,kA,Yv,S5,E5,vb,iC,yb,rC,NA,Yd,O5,$ee,Kee,_b,yu,LA,FA,qee=["width","height","depth"];function Zee(e){e.layers.forEach(t=>{if("depth"===t.type&&void 0!==t.colorA){let n=t.colorA,i=t.colorB,r=[[n.r,n.g,n.b,n.a],[i.r,i.g,i.b,i.a]],s=[0,1];for(let a=2;a<10;a++)r.push(r[1]),s.push(1);let o={...Xf(Pa(t),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,t.near),far:Math.max(0,t.far),colors:r,steps:s,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(t,o)}else if("depth"===t.type&&1===t.gradientType&&(t.near<0||t.far<0)){let n={...Pa(t),near:Math.max(t.near,0),far:Math.max(t.far,0)};Object.assign(t,n)}})}function Tg(e,t){Object.values(e.shared.materials).forEach(n=>t(n))}function Dg(e,t){e.scene.objects.traverse((n,i)=>{"materials"in i?i.materials.forEach((r,s)=>{void 0===r&&(i.materials[s]=Xl.defaultData(),r=i.materials[s]),"string"!=typeof r&&t(r)}):"material"in i?"string"!=typeof i.material&&(void 0===i.material&&(i.material=Xl.defaultData()),t(i.material)):"Mesh"===i.type&&(void 0===i.material&&(i.material=Xl.defaultData()),t(i.material)),"overrides"in i&&Object.values(i.overrides).forEach(r=>{r.material&&"string"!=typeof r.material&&t(r.material)})})}function Qee(e){void 0===e.layers&&Object.assign(e,Xl.defaultTwoLayerData("lambert"))}function A5(e){!e.layers||e.layers.forEach(t=>{if("depth"===t.type&&10===t.colors.length){let n=[...t.colors];n.push(t.colors[9]);let i=[...t.steps];i.push(t.steps[9]);let r={...Pa(t),colors:n,steps:i};Object.assign(t,r)}})}function Jee(e){e.scene.objects.traverse((t,n)=>{"materials"in n?n.materials.forEach(i=>{"string"!=typeof i&&A5(i)}):"material"in n&&"string"!=typeof n.material&&A5(n.material)}),Object.values(e.shared.materials).forEach(t=>A5(t))}function ete(e){e.layers&&e.layers.forEach(t=>{"depth"===t.type&&void 0!==t.num&&(t.colors=t.colors.slice(0,t.num),t.steps=t.steps.slice(0,t.num),delete t.num)})}function tte(e){e.layers&&e.layers.forEach(t=>{(function j9e(e){return"displace"!==e.type})(t)&&void 0===t.isMask&&(t.isMask=!1),("texture"===t.type||"video"===t.type)&&void 0===t.blending&&(t.blending=0),("noise"===t.type||"displace"===t.type&&"noise"===t.displacementType)&&(void 0===t.voronoiStyle&&(t.voronoiStyle=0),void 0===t.highCut&&(t.highCut=1),void 0===t.lowCut&&(t.lowCut=0),void 0===t.smoothness&&(t.smoothness=.3),void 0===t.seed&&(t.seed=0),void 0===t.quality&&(t.quality=1))})}function nte(e){let t=e.layers.find(n=>"light"===n.type)?.data;if("basic"===t?.category){let n=Qc.defaultData("light","phong"),i=t;Object.assign(i,n),i.visible=!1}}function ite(e){Tg(e,nte),Dg(e,nte)}function rte(e){e.layers.forEach(t=>{"light"===t.type&&"toon"!==t.category&&void 0===t.occlusion&&(t.occlusion=!0)})}function ste(e){e.layers&&e.layers.forEach(t=>{"light"===t.type&&void 0===t.bumpMapIntensity&&(t.bumpMapIntensity=5)})}function ote(e){e.layers&&e.layers.forEach(t=>{"light"===t.type&&void 0===t.alphaOverride&&(t.alphaOverride=1)})}(e=>{e.defaultData={enabled:!1,useBackgroundColor:!1,color:Mc.white,near:.1,far:2e3}})(v5||(v5={})),(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focalLength:2,focusDistance:2,bokehScale:2},noise:{...t,blendFunction:16}}})(IA||(IA={})),(e=>{e.defaultData={softShadowQuality:"low"}})(y5||(y5={})),(e=>{e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75}})(_5||(_5={})),(e=>{e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}}})(b5||(b5={})),(e=>{e.defaultData={usePhysics:!1,gravity:-10}})(pb||(pb={})),(e=>{e.defaultData={playCamera:ab,gameControlObject:null}})(x5||(x5={})),(e=>{e.defaultData={backgroundColor:vu.fromHexAndA(2960946,1),postprocessing:IA.defaultData,fog:v5.defaultData,globalPhysics:pb.defaultData,ambient:_5.defaultData,ao:b5.defaultData,shadow:y5.defaultData,publish:x5.defaultData}})(w5||(w5={})),(e=>{e.isComponentRelated=function t(i){return"Component"===i||"Instance"===i},e.isEmptyOrComponent=function n(i){return"Empty"===i||"Instance"===i}})(Xee||(Xee={})),(e=>{e.identity={...l5.identity,hiddenMatrix:cb.identity},e.fromObject=function t(r){return{position:r.position,rotation:r.rotation,scale:r.scale,hiddenMatrix:r.hiddenMatrix}},e.merge=function n(r,s){return{position:s?.position||r.position,rotation:s?.rotation||r.rotation,scale:s?.scale||r.scale,hiddenMatrix:s?.hiddenMatrix||r.hiddenMatrix}},e.diff=function i(r,s){return function ZVe(e){for(let t of Object.keys(e))void 0===e[t]&&delete e[t];return e}({position:Wv.isEqual(r.position,s.position)?void 0:s.position,rotation:Wv.isEqual(r.rotation,s.rotation)?void 0:s.rotation,scale:Wv.isEqual(r.scale,s.scale)?null:s.scale,hiddenMatrix:cb.isEqual(r.hiddenMatrix,s.hiddenMatrix)?void 0:s.hiddenMatrix})}})(fb||(fb={})),(e=>{e.defaultData={states:new Fi,events:new Fi,visible:!0,raycastLock:!1,physics:hb.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...fb.identity,cloner:null}})(Cc||(Cc={})),(e=>{e.defaultData={type:"Empty",...Cc.defaultData}})(M5||(M5={})),(e=>{e.defaultData={type:"Component",...Cc.defaultData}})(Yee||(Yee={})),(e=>{e.defaultData={type:"Mesh",...Cc.defaultData,...f5.defaultData}})(mb||(mb={})),(e=>{e.defaultData={...Cc.defaultData,...fb.identity,position:[0,0,db.DefaultTargetOffset],...db.defaultData}})(nC||(nC={})),(e=>{e.defaultData=function t(n){return{...Cc.defaultData,...h5.defaultData(n)}},e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(C5||(C5={})),(e=>{function t(i,r,s=0){for(;s<r.length;){let o=i?i[r[s]]:void 0;if(r.length===s+1)return o;if(!o)return;i=o.descendants,s+=1}}e.resolveWithDes=t,e.resolve=function n(i,r,s=0){let o=t(i,r,s);if(o){let a=Object.keys(o);if(1===a.length&&"descendants"===a[0])return}return o}})(RA||(RA={})),(e=>{function t(i,r){return{...Cc.defaultData,...r,component:i,overrides:new Ya,physics:void 0,events:void 0,type:"Instance"}}e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"],e.ofComponent=t,e.fromComponentData=function n(i){let r=fb.fromObject(i.data);return t(i.id,r)}})(Ag||(Ag={})),(e=>{e.defaultData={type:"Page",...Cc.defaultData,physics:{...hb.defaultData,fusedBody:!1},...w5.defaultData,camera:nC.defaultData}})(gb||(gb={})),(e=>{e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:cb.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:hb.defaultData,states:new Fi,events:new Fi,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...db.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...Cc.defaultData,...mb.defaultData,geometry:ub.defaultData("RectangleGeometry"),material:Xl.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...Cc.defaultData,...mb.defaultData,geometry:ub.defaultData("BooleanGeometry"),material:Xl.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...Cc.defaultData,...mb.defaultData,geometry:ub.defaultData("TextGeometry"),material:Xl.defaultTwoLayerData("phong","layer1","layer2")}})(P5||(P5={})),(e=>{e.newEmpty=function t(s,o){let a={name:o};return"Mesh"===s.type?(a.geometry={},"material"in s&&(a.material={layers:new Ya}),"materials"in s&&(a.materials=s.materials.map(l=>({layers:new Ya})))):qv.is(s.type)&&(a.perspective={},a.orthographic={}),a},e.toOps=function i(s,o){let a,l=[],c={orthographic:0,perspective:0,geometry:0};function d(h,u){for(let[p,m]of Object.entries(u.layers)){let{texture:v,...g}=m;if(void 0!==v&&Object.keys(v).length>0){let b={path:[...h,"layers",p,"texture"],props:v,type:0};l.push(b)}if(Object.keys(g).length>0){let b={path:[...h,"layers",p],props:g,type:0};l.push(b)}}}for(let[h,u]of Object.entries(o))if("name"!==h)if("cloner"===h)l.push(...c5.toOps(u,["cloner"]));else if("pathSnapping"===h)l.push({path:[h],props:{slide:u.slide,offset:u.offset},type:0});else if("material"===h)d(["material"],u);else if("materials"===h)for(let[p,m]of Object.entries(u))d(["materials",p],m);else 0===c[h]?("geometry"===h&&void 0!==u.extrusion&&(l.push({path:[h,"extrusion"],props:u.extrusion,type:0}),u={...u},delete u.extrusion),Object.keys(u).length>0&&l.push({path:[h],props:u,type:0})):(void 0===a&&(a={path:[],props:{},type:0},l.push(a)),a.props[h]=u);return l},e.patch=function r(s,o){if(void 0===o)return s;let a={...s};if(Object.assign(a,fb.merge(a,o)),Object.assign(a,{pathSnapping:Object.assign({},a.pathSnapping,{slide:o.pathSnapping?.slide??a.pathSnapping?.slide??0,offset:o.pathSnapping?.offset??a.pathSnapping?.offset??0})}),qv.is(s.type)){a.orthographic={...a.orthographic},a.perspective={...a.perspective};let l=o;void 0!==l.orthographic?.zoom&&(a.orthographic.zoom=l.orthographic.zoom),void 0!==l.perspective?.zoom&&(a.perspective.zoom=l.perspective.zoom),void 0!==l.isUpVectorFlipped&&(a.isUpVectorFlipped=l.isUpVectorFlipped),void 0!==l.targetOffset&&(a.targetOffset=l.targetOffset)}else if("Mesh"===s.type)"geometry"in o&&Object.assign(a,{geometry:g5.merge(a.geometry,o.geometry)}),(o.material||o.materials)&&(a=function n(s,o){if(void 0===o)return s;let a={...s};return"material"in a&&"material"in o&&o.material&&(a.material=JM(a.material,l=>{if("string"!=typeof l)for(let[c,d]of Object.entries(o.material.layers)){let h=l.layers.data(c);h&&Qc.patch(h,d)}}).data),a.materials&&o.materials&&(a.materials=JM(a.materials,l=>{for(let c=0;c<a.materials.length;c++){let d=o.materials[c];if("string"!=typeof d)for(let[h,u]of Object.entries(d.layers)){let p=l[c]?.layers?.data(h);p&&Qc.patch(p,u)}}}).data),a}(a,o)),a.cloner&&"cloner"in o&&Object.assign(a,{cloner:Og.merge(a.cloner,o.cloner)});else if("Empty"===s.type)a.cloner&&"cloner"in o&&Object.assign(a,{cloner:Og.merge(a.cloner,o.cloner)});else if(d5.is(s.type)){let l=o;void 0!==l.intensity&&(a.intensity=l.intensity),void 0!==l.color&&(a.color="string"==typeof l.color?l.color:Mc.clone(l.color))}return a}})(Xv||(Xv={})),(e=>{e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,hoverRotateDamping:.125,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0}})(kA||(kA={})),(e=>{e.defaultData={orbitControls:kA.defaultData,playPage:tC,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((t,n)=>{let i=0,r=0;return n<5?r=-30:n<10&&(r=30),0===n||10===n||5===n?i=30:(4===n||11===n||9===n)&&(i=-30),[120,[i,r],"show"]}),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1}},stopRaycast:!0,hdTransmission:!1}})(Yv||(Yv={})),(e=>{e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""}})(S5||(S5={})),(e=>{e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0}})(E5||(E5={})),(e=>{e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...S5.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:E5.defaultData}),e.generateSeed=()=>Math.round(1e5*Math.random())})(vb||(vb={})),(e=>{e.physicsEnabled=function t(i){return void 0!==i.find(r=>"Page"===r.data.type&&r.data.globalPhysics.usePhysics)},e.traverseModuleInstances=function n(i,r,s){i.scene.objects.traverseFrom(r,(o,a)=>{if("Instance"===a.type){let l=BA.getComponentData(i,a.component)?.data;l&&s(o,a,l.events)}else s(o,a,a.events)})}})(iC||(iC={})),(e=>{function t(r={withLight:!0,withSquare:!0}){let s=[],o=P5.defaultMeshObject;!0===r.withLight&&s.push({fi:-1,data:C5.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),!0===r.withSquare&&s.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:o,children:[]});let a=new Kc;return a.push({fi:1,id:tC,data:{...gb.defaultData,name:"Scene 1"},children:s}),a}function n(r){return{...e.defaultData,objects:Yf(r,Kc.prototype)}}e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222",e.defaultData={objects:t(),publish:Yv.defaultData,styles:vb.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new Kc,publish:Yv.defaultData,styles:vb.defaultData()}},e.emptyDataWithPage=function(r){return{objects:t(r),publish:Yv.defaultData,styles:vb.defaultData()}},e.withObjs=n,e.withObj=function i(r,s){return n([{id:r,data:s,children:[],fi:0}])}})(yb||(yb={})),(e=>{e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}}})(rC||(rC={})),(e=>{e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"}})(NA||(NA={})),(e=>{function t(o){return void 0!==o.textValue}function i(o){return"boolean"==typeof o}e.isTextValue=t,e.isNumber=function n(o){return"number"==typeof o},e.isBoolean=i,e.typeOfVariable=function r(o){return t(o)?"string":i(o)?"boolean":"number"},e.getDisplayedValue=function s(o){return e.isTextValue(o)?Array.isArray(o.textValue)?o.textValue.map(a=>a.toString().padStart(o.padding??2,"0")).join(o.deliminator??":")+(void 0!==o.suffix?" "+o.suffix:""):o.textValue.toString():e.isBoolean(o)?o?"True":"False":e.isNumber(o)?parseFloat(o.toFixed(3)).toString():o.toString()}})(Yd||(Yd={})),(e=>{e.all=["images","videos","colors","audios","fonts","materials","variables"]})(O5||(O5={})),(e=>{e.all=[...O5.all,"components"]})($ee||($ee={})),(e=>{e.defaultData=function t(){return{images:new Ar,videos:new Ar,colors:new Ar,audios:new Ar,fonts:new Ar,materials:new Ar,components:new Ar,variables:new Ar}}})(Kee||(Kee={})),(e=>{e.defaultData=function t(){return{images:new Ar,videos:new Ar,colors:new Ar,audios:new Ar,fonts:new Ar,materials:new Ar,components:new Ar,variables:new Ar}}})(_b||(_b={})),(e=>{e.defaultColors=function t(){return Yf({"89b10010-844c-11ec-a8a3-0242ac120002":{r:.5,g:.5,b:.5,a:1,name:"Default Color"}},Ar.prototype)},e.defaultImages=function n(o){let a={};return o?.withAITexture&&(a["a1b10010-844c-a8a3-11ec-0242ac2011ec"]={...NA.emptyImage,name:"AI generated image"}),Yf(a,Ar.prototype)},e.emptyData=function i(){return{catelogs:new Ar,materials:new Ar,images:new Ar,videos:new Ar,colors:new Ar,audios:new Ar,fonts:new Ar,variables:new Fi,lib:_b.defaultData()}},e.defaultVariables=function r(o){switch(o){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let a=[0,0,0];return{name:"Time",value:{textValue:a,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:a,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0};default:console.error("Unknown variable type",o)}},e.getFormattedTimerTime=function s(o,a){if("HH:mm:ss"===a.format){let l=Math.floor(o/3600),c=Math.floor((o-3600*l)/60);return{textValue:[l,c,Math.round(o-3600*l-60*c)]}}if("mm:ss"===a.format){let l=Math.floor(o/60);return{textValue:[l,Math.round(o-60*l)]}}return"number"===a.format?Math.round(o):Math.round(1e3*o)/1e3}})(yu||(yu={})),(e=>{e.list=["idle","move","jump","run"]})(LA||(LA={})),(e=>{e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","\u25b2"],["rotPosY","\u25c0"],["rotNegX","\u25bc"],["rotNegY","\u25b6"],["jump","Space"],["run","\u21e7"],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new Fi,move:new Fi,jump:new Fi,run:new Fi},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:vu.fromHexAndA(3728051,1)}}})(FA||(FA={}));var bb=180/Math.PI;function ate(e){e.rotation=e.rotation.slice(0,3).map(t=>t*bb)}function lte(e){ate(e),"Page"===e.type&&ate(e.camera),e.states?.forEach(n=>{null==n.rotation||(n.rotation=n.rotation.slice(0,3).map(i=>i*bb))});let t=e.geometry;t&&"SphereGeometry"===t.type&&(t.thetaLength=(t.thetaLength??180)*bb),t&&"TorusGeometry"===t.type&&(t.arc=t.arc*bb),t&&"PathGeometry"===t.type&&(t.extrusion.angle*=bb,t.extrusion.twist*=bb),"Mesh"===e.type&&"TextGeometry"===e.geometry.type&&(e.geometry.text={textValue:e.geometry.text}),Array.isArray(Pa(e.events))&&e.events?.forEach(n=>{("MouseDown"===n.type||"MouseUp"===n.type||"MousePress"===n.type||"KeyDown"===n.type||"KeyUp"===n.type||"KeyPress"===n.type||"Collision"===n.type||"Trigger"===n.type)&&(n.runMode=n.toggle?"Toggle":"Once")})}var BA,Ig=107;function cte(e,t){t(e.data);for(let n of e.children)cte(n,t)}function T7e(e){let t=e.schema??104;t!==Ig&&t<105&&(cte(e.asset,lte),e.schema=105)}function dte(e){let t=e.schema??0;if(t!==Ig){console.warn("updating from ",t,"to ",Ig),function S7e(e,t){if(t<1&&(Dg(e,Zee),Tg(e,Zee),e.schema=1),t<2&&(function G9e(e){Object.assign(e.scene.publish,{orbitControls:{...kA.defaultData,...Pa(e.scene.publish.orbitControls)}})}(e),e.schema=2),t<3&&(function q9e(e){function t(n){if(n.layers)for(let i of Object.values(n.layers))if(i)for(let[r,s]of Object.entries(i))if((jee.includes(r)||"boolean"==typeof s)&&delete i[r],"texture"===r)for(let[o,a]of Object.entries(s))(H9e.includes(o)||"boolean"==typeof a)&&delete s[o]}e.scene.objects.traverse((n,i)=>{i.states.forEach(r=>{let s=r;s.material?t(s.material):s.materials&&s.materials.forEach(o=>{t(o)})})})}(e),e.schema=3),t<4&&(function X9e(e){e.scene.publish.withBackground=!0}(e),e.schema=4),t<5&&(function Y9e(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}(e),e.schema=5),t<6&&(function $9e(e){e.scene.objects.traverse((t,n)=>{let i=n.cloner;i&&(i.radial.scale=i.radial.scale.map(r=>r+1),i.linear.scale=i.linear.scale.map(r=>r+1))})}(e),e.schema=6),t<7&&(function K9e(e){e.scene.objects.traverse((t,n)=>{let i=n.geometry;i&&("DodecahedronGeometry"===i.type||"IcosahedronGeometry"===i.type)&&(i.detail=Math.round(i.detail))})}(e),e.schema=7),t<8&&(e.schema=8),t<9&&(Jee(e),e.schema=9),t<10&&(function e7e(e){e.scene.objects.traverse((t,n)=>{"Mesh"===n.type&&("BooleanGeometry"===n.geometry.type||"SubdivGeometry"===n.geometry.type)&&(n.geometry.phongAngle=35)})}(e),e.schema=10),t<11&&(function t7e(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((t,n)=>{("DirectionalLight"===n.type||"SpotLight"===n.type)&&(n.shadowResolution=1024,n.shadowRadius=1,n.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}(e),e.schema=11),t<12&&(Jee(e),e.schema=12),t<13&&(function n7e(e){e.shared.audios=Yf({},Ar.prototype)}(e),e.schema=13),t<14&&(function r7e(e){let t=e.shared.materials;Object.entries(t).forEach(([n,i])=>{i.layers||Object.assign(t,{[n]:{name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]}})})}(e),e.schema=14),t<15&&(function s7e(e){Object.entries(Pa(e.shared.images)).filter(t=>!1===t[1].asset).map(t=>t[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries(Pa(e.shared.audios)).filter(t=>!1===t[1].asset).map(t=>t[0]).forEach(t=>{delete e.shared.audios[t]})}(e),e.schema=15),t<16&&(function o7e(e){e.scene.publish.settings.web.preload=!1}(e),e.schema=16),t<17&&(Dg(e,ete),Tg(e,ete),e.schema=17),t<18&&(Dg(e,Qee),Tg(e,Qee),e.schema=18),t<19&&(function W9e(e){Object.assign(e.scene.publish.settings,{video:{...Yv.defaultData.settings.video,...Pa(e.scene.publish.settings.video)}})}(e),e.schema=19),t<20&&(function a7e(e){e.shared.fonts=Yf({},Ar.prototype)}(e),function c7e(e){let t=[];e.scene.objects.traverse((n,i)=>{let r=i;if("TextFrame"===r.type){let s=Xl.defaultTwoLayerData("phong"),o="string"==typeof r.color?e.shared.colors[r.color]:r.color;s.layers[1].data.color={r:o.r,g:o.g,b:o.b},s.layers[1].data.alpha=r.alpha;let a=function l7e(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}(r.font);void 0===e.shared.fonts[a]&&(e.shared.fonts[a]={name:a});let l={name:r.name,...Cc.defaultData,...mb.defaultData,flatShading:!1,wireframe:!1,geometry:{...ub.defaultData("TextGeometry"),width:r.width,height:r.height,font:a,depth:0,horizontalAlign:r.horizontalAlign,verticalAlign:r.verticalAlign,fontSize:1.40625*r.fontSize,lineHeight:r.lineHeight/1.40625,letterSpacing:r.letterSpacing-1,text:r.text,textTransform:r.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:s,states:Pa(r.states),events:Pa(r.events),visible:r.visible,raycastLock:r.raycastLock,position:r.position,rotation:r.rotation,scale:r.scale,hiddenMatrix:r.hiddenMatrix},c=Pa(e.scene.objects).parent(n);e.scene.objects.insertAfter(c??null,n,[{id:n+"new",data:l,children:[]}]),t.push(n)}}),t.forEach(n=>{e.scene.objects.delete(n)})}(e),e.schema=20),t<21&&(function d7e(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((n,i)=>{i.events.forEach(r=>{if(t[Number(r.type)])if(Object.assign(r,{type:t[Number(r.type)]}),"Audio"===r.type&&"audioEvent"in r&&(Object.assign(r,{playAudio:r.audioEvent}),delete r.audioEvent),"GameControl"===r.type)Object.assign(r,{gameActions:{idle:new Fi,move:new Fi,jump:new Fi}});else{let s=new Fi;Object.assign(r,{actions:s}),("MouseDown"===r.type||"MouseUp"===r.type||"KeyDown"===r.type||"KeyUp"===r.type)&&"url"in r&&s.push({fi:0,id:gi.generateUUID(),data:{type:"Link",url:r.url,delay:0}}),"targets"in r&&(r.targets.forEach((o,a,l)=>{let d={easing:o.easing,duration:o.duration};6===o.easing?Object.assign(d,Xf(o,"mass","stiffness","damping","velocity")):5===o.easing&&Object.assign(d,{control1:{...o.control1},control2:{...o.control2}});let u={state:o.state,repeat:o.repeat?-1:0,delay:o.delay,delayDirection:o.delayDirection,direction:o.cycle&&o.rewind?"pingpong-rewind":o.cycle?"pingpong":"normal",...d},p={allowSlerp:!0,type:"Transition",object:o.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new Fi({fi:0,id:gi.generateUUID(),data:{state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4}},{fi:1,id:gi.generateUUID(),data:u})};s.push({fi:l,id:a,data:p})}),delete r.targets)}})})}(e),function h7e(e){e.scene.objects.traverse((t,n)=>{function i(r,s){let o=new Fi,a=[];if(n.events.forEach((l,c,d)=>{if("Audio"===l.type&&l.trigger===s){let h;a.push(c),"play"===l.interaction?h={...Xf(l,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in l?l.after:void 0,toggle:"after"in l?l.toggle:void 0,type:"Audio"}:("pause"===l.interaction||"stop"===l.interaction)&&(h={...Xf(l,"interaction","delay","object","playAudio"),type:"Audio"}),h&&o.push({fi:d,id:c,data:h})}}),a.forEach(l=>n.events.delete(l)),o.length){let l=n.events.find(c=>c.type===r)?.data;l?"actions"in l&&l.actions.insertBefore(null,o):n.events.insertBefore(null,[{id:gi.generateUUID(),data:{type:r,actions:o}}])}}i("Start","start"),i("MouseDown","mouseDown"),i("MouseUp","mouseUp"),i("KeyDown","keyDown"),i("KeyUp","keyUp")})}(e),e.schema=21),t<22&&(ite(e),e.schema=22),t<23&&(function u7e(e){e.scene.objects.traverse((t,n)=>{"Mesh"===n.type&&"SubdivGeometry"===n.geometry.type&&(n.geometry.scaleBaked||(n.geometry.scaleBaked=[1,1,1]))})}(e),e.schema=23),t<24&&(function p7e(e){e.scene.objects.traverse((t,n)=>{("Empty"===n.type||"Mesh"===n.type)&&n.cloner&&!n.cloner.randomnessObject&&!n.cloner.toObject&&!n.cloner.randomness&&(n.cloner={...n.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}(e),e.schema=24),(t<25||void 0===e.shared.videos)&&(function i7e(e){e.shared.videos=Yf({},Ar.prototype)}(e),t<25&&(e.schema=25)),t<26&&(function Z9e(e){e.scene.objects.traverse((t,n)=>{let i=e.scene.objects.unproxy().parent(t);if(i){let r=Pa(e.scene.objects.data(i));r&&"Mesh"===r.type&&"BooleanGeometry"===r.geometry.type&&"Mesh"===n.type&&(n.visible=!0!==Pa(n).booleanExclude)}})}(e),e.schema=26),t<27&&(function Q9e(e){e.scene.objects.traverse((t,n)=>{if("Mesh"===n.type){let i=n;"NonParametricGeometry"===n.geometry.type?void 0!==i.material&&delete i.material:void 0!==i.materials&&delete i.materials}})}(e),e.schema=27),t<28&&(ite(e),e.schema=28),t<29&&(function J9e(e){function t(i){Object.setPrototypeOf(i,Ya.prototype),i.texture&&Object.setPrototypeOf(i.texture,Ya.prototype)}function n(i){Object.setPrototypeOf(i,Ya.prototype);for(let r in i)t(i[r])}e.scene.objects.traverse((i,r)=>{r.states.forEach(s=>{let o=s;if(o.material){let a=Pa(o.material).layers;n(a),o.material.layers=a}if(o.materials)for(let a=0;a<o.materials.length;a++){let l=o.materials[a],c=Pa(l).layers;n(c),l.layers=c}})})}(e),e.schema=29),t<30&&(function f7e(e){e.scene.objects.traverse((t,n)=>{"Mesh"===n.type&&"NonParametricGeometry"===n.geometry.type&&!("material"in n)&&!("materials"in n)&&(n.material=Xl.defaultTwoLayerData("phong"))})}(e),e.schema=30),t<31&&(function m7e(e){void 0===e.scene.publish.orbitControls.autoZoom&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((t,n)=>{("OrthographicCamera"===n.type||"PerspectiveCamera"===n.type)&&(void 0===n.orthographic.autoZoom&&(n.orthographic.autoZoom=!1),void 0===n.orthographic.autoZoomFrustumSize&&(n.orthographic.autoZoomFrustumSize=790))})}(e),e.schema=31),t<33&&(function g7e(e){e.scene.objects.traverse((t,n)=>{void 0===n.pathSnapping&&(n.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),void 0===n.pathSnapping.offset&&(n.pathSnapping.offset=0)})}(e),e.schema=33),t<34&&(function v7e(e){void 0===e.scene.publish.mouseEventTarget&&(e.scene.publish.mouseEventTarget="canvas"),void 0===e.scene.publish.settings.web.hint&&(e.scene.publish.settings.web.hint=!1)}(e),e.schema=34),t<35&&(function y7e(e){let{video:t}=e.scene.publish.settings;"gif"===t.format&&t.fps>48&&(t.fps=15)}(e),e.schema=35),t<36&&(function _7e(e){e.scene.objects.traverse((t,n)=>{n.events.forEach(i=>{"GameControl"===i.type&&(i.resetYPosition=Math.abs(i.resetYPosition-n.position[1]))})})}(e),e.schema=36),t<37&&(function b7e(e){let t=e.scene.environment.usePhysics;e.scene.objects.traverse((n,i)=>{i.collision=(!t||null!==i.physics)&&"visibility"})}(e),e.schema=37),t<38&&(Dg(e,tte),Tg(e,tte),e.schema=38),t<39&&(function x7e(e){e.scene.objects.traverse((t,n)=>{n.events.forEach(i=>{"GameControl"===i.type&&(i.navmesh=FA.defaultDataThirdPerson.navmesh)})})}(e),e.schema=39),t<40&&(function w7e(e){e.scene.styles||(e.scene.styles=vb.defaultData())}(e),e.schema=40),t<41&&(function M7e(e){void 0===e.scene.environment.ambientLight.occlusion&&(e.scene.environment.ambientLight.occlusion=!1),void 0===e.scene.environment.ambientLight.aoFullRes&&(e.scene.environment.ambientLight.aoFullRes=!1),void 0===e.scene.environment.ambientLight.radius&&(e.scene.environment.ambientLight.radius=256),void 0===e.scene.environment.ambientLight.bias&&(e.scene.environment.ambientLight.bias=.5),void 0===e.scene.environment.ambientLight.aoColor&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),Dg(e,rte),Tg(e,rte)}(e),e.schema=41),t<42&&(function C7e(e){e.scene.objects.traverse((t,n)=>{n.events.forEach(i=>{"GameControl"===i.type&&Object.assign(i.gameActions,{run:new Fi})})})}(e),e.schema=42),t<43&&(function P7e(e){e.scene.objects.traverse((t,n)=>{n.events.forEach(i=>{"GameControl"===i.type&&(i.keyAssignments=[...i.keyAssignments,["run","\u21e7"],["none","Ctrl"]])})})}(e),e.schema=43),t<99){Dg(e,ste),Tg(e,ste),null===e.scene.publish.playCamera&&(e.scene.publish.playCamera=ab);let n=Pa(e.scene.objects),i=e.scene.objects;e.scene.publish.playPage=tC,i.insertBefore(null,null,[{id:tC,data:{...gb.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:Xf(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:Xf(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...pb.defaultData,...Xf(e.scene.environment,"usePhysics","gravity")},camera:Pa(e.scene.ownerCamera)??gb.defaultData.camera,name:"Scene"},children:[]}]);for(let o of n)o.id!==yb.TRASH_CAN_ID&&i.move(tC,o.fi,o.id);let r=0,s=0;e.shared.penumbraSize&&e.scene.objects.traverse((o,a)=>{"DirectionalLight"===a.type?(a.penumbraSize=e.shared.penumbraSize[Math.min(r,2)],r+=1):"SpotLight"===a.type&&(a.penumbraSize=e.shared.penumbraSize[3+Math.min(s,1)],s+=1),null==a.physics&&"Instance"!==a.type&&(a.physics={},Object.assign(a.physics,hb.defaultData)),null!=a.physics&&(a.physics.enabled=a.collision??"visibility",delete a.collision)}),e.schema=99}}(e,t),t<100&&(void 0===e.scene.publish.joystickSizeAndXYOffset&&(e.scene.publish.joystickSizeAndXYOffset=Yv.defaultData.joystickSizeAndXYOffset),e.schema=100),t<101&&(Dg(e,ote),Tg(e,ote),e.schema=101),t<102&&(function E7e(e){e.scene.objects.traverse((t,n)=>{let i=n.geometry;i&&"PathGeometry"===i.type&&(i.extrusion.capType="flat",i.extrusion.bevel=50,i.extrusion.bevelSides=6,"Custom"===i.extrusion.shape.type&&(i.extrusion.shape.shapeQuality="low"))})}(e),e.schema=102),t<104&&(e.shared.catelogs=new Ar,e.shared.lib=_b.defaultData(),e.schema=104),t<105&&(function O7e(e){e.shared.variables=Yf({},Ar.prototype)}(e),e.scene.objects.traverse((n,i)=>{lte(i)}),e.schema=105);for(let n of Object.values(e.shared.lib.components))T7e(n);t<106&&(function A7e(e){let t=Pa(e.shared.variables);e.shared.variables=Yf(Object.entries(t??{}).map(([n,i],r)=>({fi:r,id:n,data:i})),Fi.prototype)}(e),e.schema=106),t<107&&(e.shared.lib.variables=_b.defaultData().variables,e.schema=107)}}function $v(e,t=!1){let n=null!==e[0].index,i=new Set(Object.keys(e[0].attributes)),r=new Set(Object.keys(e[0].morphAttributes)),s={},o={},a=e[0].morphTargetsRelative,l=new Pi,c=0;for(let d=0;d<e.length;++d){let h=e[d],u=0;if(n!==(null!==h.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let p in h.attributes){if(!i.has(p))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+'. All geometries must have compatible attributes; make sure "'+p+'" attribute exists among all geometries, or in none of them.'),null;void 0===s[p]&&(s[p]=[]),s[p].push(h.attributes[p]),u++}if(u!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". Make sure all geometries have the same number of attributes."),null;if(a!==h.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let p in h.morphAttributes){if(!r.has(p))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===o[p]&&(o[p]=[]),o[p].push(h.morphAttributes[p])}if(t){let p;if(n)p=h.index.count;else{if(void 0===h.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". The geometry must have either an index or a position attribute"),null;p=h.attributes.position.count}l.addGroup(c,p,d),c+=p}}if(n){let d=0,h=[];for(let u=0;u<e.length;++u){let p=e[u].index;for(let m=0;m<p.count;++m)h.push(p.getX(m)+d);d+=e[u].attributes.position.count}l.setIndex(h)}for(let d in s){let h=hte(s[d]);if(!h)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" attribute."),null;l.setAttribute(d,h)}for(let d in o){let h=o[d][0].length;if(0===h)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[d]=[];for(let u=0;u<h;++u){let p=[];for(let v=0;v<o[d].length;++v)p.push(o[d][v][u]);let m=hte(p);if(!m)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" morphAttribute."),null;l.morphAttributes[d].push(m)}}return l}function hte(e){let t,n,i,r=0;for(let a=0;a<e.length;++a){let l=e[a];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===t&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=l.itemSize),n!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===i&&(i=l.normalized),i!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=l.array.length}let s=new t(r),o=0;for(let a=0;a<e.length;++a)s.set(e[a].array,o),o+=e[a].array.length;return new Bi(s,n,i)}(e=>{e.defaultData={schema:Ig,scene:yb.defaultData,frames:(new Ar).add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",rC.defaultData),shared:{...yu.emptyData(),colors:yu.defaultColors()}},e.emptyDataForImports=function(r){let s=yb.emptyDataWithPage(r);return{schema:Ig,scene:s,frames:(new Ar).add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",rC.defaultData),shared:{...yu.emptyData(),colors:yu.defaultColors(),images:yu.defaultImages(r)}}},e.emptyData=function(){return{schema:Ig,scene:yb.emptyDataWithPage(),frames:(new Ar).add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",rC.defaultData),shared:yu.emptyData()}},e.collabHelper={...UF,updateSchema:r=>(r.schema??0)<Ig?JM(r,dte):(r.schema??0)-Ig},e.updateSchemaDirectly=function t(r){let s=e.collabHelper.updateSchema(r);return"number"==typeof s?0===s?r:null:s.data},e.withoutLib=function n(r){return{...r,shared:{...r.shared,lib:_b.defaultData()}}},e.getComponentData=function i(r,s){let o=r.scene.objects.get(s);if(o&&"Component"===o.data.type)return o;{let a=r.shared.lib.components[s];if(a)return a.asset}}})(BA||(BA={}));var D7e=Math.pow(2,-24),zA=class{constructor(){}};function bp(e,t,n){return n.min.x=t[e],n.min.y=t[e+1],n.min.z=t[e+2],n.max.x=t[e+3],n.max.y=t[e+4],n.max.z=t[e+5],n}function ute(e){let t=-1,n=-1/0;for(let i=0;i<3;i++){let r=e[i+3]-e[i];r>n&&(n=r,t=i)}return t}function pte(e,t){t.set(e)}function fte(e,t,n){let i,r;for(let s=0;s<3;s++){let o=s+3;i=e[s],r=t[s],n[s]=i<r?i:r,i=e[o],r=t[o],n[o]=i>r?i:r}}function UA(e,t,n){for(let i=0;i<3;i++){let r=t[e+2*i],s=t[e+2*i+1],o=r-s,a=r+s;o<n[i]&&(n[i]=o),a>n[i+3]&&(n[i+3]=a)}}function sC(e){let t=e[3]-e[0],n=e[4]-e[1],i=e[5]-e[2];return 2*(t*n+n*i+i*t)}function T5(e,t,n,i,r=null){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,d=-1/0,h=1/0,u=1/0,p=1/0,m=-1/0,v=-1/0,g=-1/0,b=null!==r;for(let x=6*t,w=6*(t+n);x<w;x+=6){let P=e[x+0],A=e[x+1],D=P-A,R=P+A;D<s&&(s=D),R>l&&(l=R),b&&P<h&&(h=P),b&&P>m&&(m=P);let N=e[x+2],k=e[x+3],L=N-k,Q=N+k;L<o&&(o=L),Q>c&&(c=Q),b&&N<u&&(u=N),b&&N>v&&(v=N);let le=e[x+4],ae=e[x+5],he=le-ae,xe=le+ae;he<a&&(a=he),xe>d&&(d=xe),b&&le<p&&(p=le),b&&le>g&&(g=le)}i[0]=s,i[1]=o,i[2]=a,i[3]=l,i[4]=c,i[5]=d,b&&(r[0]=h,r[1]=u,r[2]=p,r[3]=m,r[4]=v,r[5]=g)}var Kf=32,L7e=(e,t)=>e.candidate-t.candidate,Rg=new Array(Kf).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),VA=new Float32Array(6);var xp=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let n=1/0,i=-1/0;for(let r=0,s=e.length;r<s;r++){let o=e[r][t];n=o<n?o:n,i=o>i?o:i}this.min=n,this.max=i}setFromPoints(e,t){let n=1/0,i=-1/0;for(let r=0,s=t.length;r<s;r++){let a=e.dot(t[r]);n=a<n?a:n,i=a>i?a:i}this.min=n,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}};xp.prototype.setFromBox=function(){let e=new oe;return function(t,n){let i=n.min,r=n.max,s=1/0,o=-1/0;for(let a=0;a<=1;a++)for(let l=0;l<=1;l++)for(let c=0;c<=1;c++){e.x=i.x*a+r.x*(1-a),e.y=i.y*l+r.y*(1-l),e.z=i.z*c+r.z*(1-c);let d=t.dot(e);s=Math.min(d,s),o=Math.max(d,o)}this.min=s,this.max=o}}(),new xp;var j7e=function(){let e=new oe,t=new oe,n=new oe;return function(i,r,s){let a=e,c=t;n.subVectors(i.start,r.start),e.subVectors(i.end,i.start),t.subVectors(r.end,r.start);let v,g,d=n.dot(c),h=c.dot(a),u=c.dot(c),p=n.dot(a),m=a.dot(a)*u-h*h;v=0!==m?(d*h-p*u)/m:0,g=(d+v*h)/u,s.x=v,s.y=g}}(),D5=function(){let e=new tt,t=new oe,n=new oe;return function(i,r,s,o){j7e(i,r,e);let a=e.x,l=e.y;if(a>=0&&a<=1&&l>=0&&l<=1)return i.at(a,s),void r.at(l,o);if(a>=0&&a<=1)return r.at(l<0?0:1,o),void i.closestPointToPoint(o,!0,s);if(l>=0&&l<=1)return i.at(a<0?0:1,s),void r.closestPointToPoint(s,!0,o);{let c,d;c=a<0?i.start:i.end,d=l<0?r.start:r.end;let h=t,u=n;return i.closestPointToPoint(d,!0,t),r.closestPointToPoint(c,!0,n),h.distanceToSquared(d)<=u.distanceToSquared(c)?(s.copy(h),void o.copy(d)):(s.copy(c),void o.copy(u))}}}(),H7e=function(){let e=new oe,t=new oe,n=new Gd,i=new Ph;return function(r,s){let{radius:o,center:a}=r,{a:l,b:c,c:d}=s;if(i.start=l,i.end=c,i.closestPointToPoint(a,!0,e).distanceTo(a)<=o||(i.start=l,i.end=d,i.closestPointToPoint(a,!0,e).distanceTo(a)<=o)||(i.start=c,i.end=d,i.closestPointToPoint(a,!0,e).distanceTo(a)<=o))return!0;let h=s.getPlane(n);if(Math.abs(h.distanceToPoint(a))<=o){let u=h.projectPoint(a,t);if(s.containsPoint(u))return!0}return!1}}(),G7e=1e-15;function xb(e){return Math.abs(e)<G7e}var Zf=class extends Gl{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new oe),this.satBounds=new Array(4).fill().map(()=>new xp),this.points=[this.a,this.b,this.c],this.sphere=new $c,this.plane=new Gd,this.needsUpdate=!0}intersectsSphere(e){return H7e(e,this)}update(){let e=this.a,t=this.b,n=this.c,i=this.points,r=this.satAxes,s=this.satBounds,o=r[0],a=s[0];this.getNormal(o),a.setFromPoints(o,i);let l=r[1],c=s[1];l.subVectors(e,t),c.setFromPoints(l,i);let d=r[2],h=s[2];d.subVectors(t,n),h.setFromPoints(d,i);let u=r[3],p=s[3];u.subVectors(n,e),p.setFromPoints(u,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(o,e),this.needsUpdate=!1}};Zf.prototype.closestPointToSegment=function(){let e=new oe,t=new oe,n=new Ph;return function(i,r=null,s=null){let c,{start:o,end:a}=i,l=this.points,d=1/0;for(let h=0;h<3;h++){let u=(h+1)%3;n.start.copy(l[h]),n.end.copy(l[u]),D5(n,i,e,t),c=e.distanceToSquared(t),c<d&&(d=c,r&&r.copy(e),s&&s.copy(t))}return this.closestPointToPoint(o,e),c=o.distanceToSquared(e),c<d&&(d=c,r&&r.copy(e),s&&s.copy(o)),this.closestPointToPoint(a,e),c=a.distanceToSquared(e),c<d&&(d=c,r&&r.copy(e),s&&s.copy(a)),Math.sqrt(d)}}(),Zf.prototype.intersectsTriangle=function(){let e=new Zf,t=new Array(3),n=new Array(3),i=new xp,r=new xp,s=new oe,o=new oe,a=new oe,l=new oe,c=new Ph,d=new Ph,h=new Ph;return function(u,p=null,m=!1){this.needsUpdate&&this.update(),u.isExtendedTriangle?u.needsUpdate&&u.update():(e.copy(u),e.update(),u=e);let v=this.plane,g=u.plane;if(Math.abs(v.normal.dot(g.normal))>1-1e-10){let b=this.satBounds,x=this.satAxes;n[0]=u.a,n[1]=u.b,n[2]=u.c;for(let A=0;A<4;A++){let D=b[A];if(i.setFromPoints(x[A],n),D.isSeparated(i))return!1}let w=u.satBounds,P=u.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let A=0;A<4;A++){let D=w[A];if(i.setFromPoints(P[A],t),D.isSeparated(i))return!1}for(let A=0;A<4;A++){let D=x[A];for(let R=0;R<4;R++)if(s.crossVectors(D,P[R]),i.setFromPoints(s,t),r.setFromPoints(s,n),i.isSeparated(r))return!1}return p&&(m||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),p.start.set(0,0,0),p.end.set(0,0,0)),!0}{let b=this.points,x=!1,w=0;for(let ae=0;ae<3;ae++){let he=b[ae],xe=b[(ae+1)%3];c.start.copy(he),c.end.copy(xe),c.delta(o);let _e=x?d.start:d.end,be=xb(g.distanceToPoint(he));if(xb(g.normal.dot(o))&&be){d.copy(c),w=2;break}if((g.intersectLine(c,_e)||be)&&!xb(_e.distanceTo(xe))){if(w++,x)break;x=!0}}if(1===w&&u.containsPoint(d.end))return p&&(p.start.copy(d.end),p.end.copy(d.end)),!0;if(2!==w)return!1;let P=u.points,A=!1,D=0;for(let ae=0;ae<3;ae++){let he=P[ae],xe=P[(ae+1)%3];c.start.copy(he),c.end.copy(xe),c.delta(a);let _e=A?h.start:h.end,be=xb(v.distanceToPoint(he));if(xb(v.normal.dot(a))&&be){h.copy(c),D=2;break}if((v.intersectLine(c,_e)||be)&&!xb(_e.distanceTo(xe))){if(D++,A)break;A=!0}}if(1===D&&this.containsPoint(h.end))return p&&(p.start.copy(h.end),p.end.copy(h.end)),!0;if(2!==D)return!1;if(d.delta(o),h.delta(a),o.dot(a)<0){let ae=h.start;h.start=h.end,h.end=ae}let R=d.start.dot(o),N=d.end.dot(o),k=h.start.dot(o),L=h.end.dot(o);return(R===L||k===N||N<k!=R<L)&&(p&&(l.subVectors(d.start,h.start),l.dot(o)>0?p.start.copy(d.start):p.start.copy(h.start),l.subVectors(d.end,h.end),l.dot(o)<0?p.end.copy(d.end):p.end.copy(h.end)),!0)}}}(),Zf.prototype.distanceToPoint=function(){let e=new oe;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),Zf.prototype.distanceToTriangle=function(){let e=new oe,t=new oe,n=["a","b","c"],i=new Ph,r=new Ph;return function(s,o=null,a=null){let l=o||a?i:null;if(this.intersectsTriangle(s,l))return(o||a)&&(o&&l.getCenter(o),a&&l.getCenter(a)),0;let c=1/0;for(let d=0;d<3;d++){let h,u=n[d],p=s[u];this.closestPointToPoint(p,e),h=p.distanceToSquared(e),h<c&&(c=h,o&&o.copy(e),a&&a.copy(p));let m=this[u];s.closestPointToPoint(m,e),h=m.distanceToSquared(e),h<c&&(c=h,o&&o.copy(m),a&&a.copy(e))}for(let d=0;d<3;d++){i.set(this[n[d]],this[n[(d+1)%3]]);for(let p=0;p<3;p++){r.set(s[n[p]],s[n[(p+1)%3]]),D5(i,r,e,t);let g=e.distanceToSquared(t);g<c&&(c=g,o&&o.copy(e),a&&a.copy(t))}}return Math.sqrt(c)}}();var wp=class{constructor(e,t,n){this.isOrientedBox=!0,this.min=new oe,this.max=new oe,this.matrix=new vn,this.invMatrix=new vn,this.points=new Array(8).fill().map(()=>new oe),this.satAxes=new Array(3).fill().map(()=>new oe),this.satBounds=new Array(3).fill().map(()=>new xp),this.alignedSatBounds=new Array(3).fill().map(()=>new xp),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),n&&this.matrix.copy(n)}set(e,t,n){this.min.copy(e),this.max.copy(t),this.matrix.copy(n),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};wp.prototype.update=function(){let e=this.matrix,t=this.min,n=this.max,i=this.points;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let d=0;d<=1;d++){let u=i[1*l|2*c|4*d];u.x=l?n.x:t.x,u.y=c?n.y:t.y,u.z=d?n.z:t.z,u.applyMatrix4(e)}let r=this.satBounds,s=this.satAxes,o=i[0];for(let l=0;l<3;l++){let c=s[l],d=r[l];c.subVectors(o,i[1<<l]),d.setFromPoints(c,i)}let a=this.alignedSatBounds;a[0].setFromPointsField(i,"x"),a[1].setFromPointsField(i,"y"),a[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1},wp.prototype.intersectsBox=function(){let e=new xp;return function(t){this.needsUpdate&&this.update();let n=t.min,i=t.max,r=this.satBounds,s=this.satAxes,o=this.alignedSatBounds;if(e.min=n.x,e.max=i.x,o[0].isSeparated(e)||(e.min=n.y,e.max=i.y,o[1].isSeparated(e))||(e.min=n.z,e.max=i.z,o[2].isSeparated(e)))return!1;for(let a=0;a<3;a++){let c=r[a];if(e.setFromBox(s[a],t),c.isSeparated(e))return!1}return!0}}(),wp.prototype.intersectsTriangle=function(){let e=new Zf,t=new Array(3),n=new xp,i=new xp,r=new oe;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(e.copy(s),e.update(),s=e);let o=this.satBounds,a=this.satAxes;t[0]=s.a,t[1]=s.b,t[2]=s.c;for(let h=0;h<3;h++){let u=o[h];if(n.setFromPoints(a[h],t),u.isSeparated(n))return!1}let l=s.satBounds,c=s.satAxes,d=this.points;for(let h=0;h<3;h++){let u=l[h];if(n.setFromPoints(c[h],d),u.isSeparated(n))return!1}for(let h=0;h<3;h++){let u=a[h];for(let p=0;p<4;p++)if(r.crossVectors(u,c[p]),n.setFromPoints(r,t),i.setFromPoints(r,d),n.isSeparated(i))return!1}return!0}}(),wp.prototype.closestPointToPoint=function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t},wp.prototype.distanceToPoint=function(){let e=new oe;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),wp.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new Ph),n=new Array(12).fill().map(()=>new Ph),i=new oe,r=new oe;return function(s,o=0,a=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(a||l)&&(s.getCenter(r),this.closestPointToPoint(r,i),s.closestPointToPoint(i,r),a&&a.copy(i),l&&l.copy(r)),0;let c=o*o,d=s.min,h=s.max,u=this.points,p=1/0;for(let v=0;v<8;v++){let g=u[v];r.copy(g).clamp(d,h);let b=g.distanceToSquared(r);if(b<p&&(p=b,a&&a.copy(g),l&&l.copy(r),b<c))return Math.sqrt(b)}let m=0;for(let v=0;v<3;v++)for(let g=0;g<=1;g++)for(let b=0;b<=1;b++){let x=(v+1)%3,w=(v+2)%3;t[m].set(u[g<<x|b<<w],u[1<<v|g<<x|b<<w]);let N=e[v],k=e[x],L=e[w],Q=n[m],le=Q.start,ae=Q.end;le[N]=d[N],le[k]=g?d[k]:h[k],le[L]=b?d[L]:h[k],ae[N]=h[N],ae[k]=g?d[k]:h[k],ae[L]=b?d[L]:h[k],m++}for(let v=0;v<=1;v++)for(let g=0;g<=1;g++)for(let b=0;b<=1;b++){r.x=v?h.x:d.x,r.y=g?h.y:d.y,r.z=b?h.z:d.z,this.closestPointToPoint(r,i);let x=r.distanceToSquared(i);if(x<p&&(p=x,a&&a.copy(i),l&&l.copy(r),x<c))return Math.sqrt(x)}for(let v=0;v<12;v++){let g=t[v];for(let b=0;b<12;b++){D5(g,n[b],i,r);let w=i.distanceToSquared(r);if(w<p&&(p=w,a&&a.copy(i),l&&l.copy(r),w<c))return Math.sqrt(w)}}return Math.sqrt(p)}}();var wb=new oe,Mb=new oe,Cb=new oe,jA=new tt,HA=new tt,GA=new tt,mte=new oe,gte=new oe,vte=new oe,WA=new oe;function yte(e,t,n,i,r){let s=3*i,o=e.index.getX(s),a=e.index.getX(s+1),l=e.index.getX(s+2),{position:c,normal:d,uv:h,uv1:u}=e.attributes,p=function q7e(e,t,n,i,r,s,o,a,l){wb.fromBufferAttribute(t,s),Mb.fromBufferAttribute(t,o),Cb.fromBufferAttribute(t,a);let c=function W7e(e,t,n,i,r,s){let o;return o=s===ll?e.intersectTriangle(i,n,t,!0,r):e.intersectTriangle(t,n,i,s!==Yc,r),null===o?null:{distance:e.origin.distanceTo(r),point:r.clone()}}(e,wb,Mb,Cb,WA,l);if(c){i&&(jA.fromBufferAttribute(i,s),HA.fromBufferAttribute(i,o),GA.fromBufferAttribute(i,a),c.uv=Gl.getInterpolation(WA,wb,Mb,Cb,jA,HA,GA,new tt)),r&&(jA.fromBufferAttribute(r,s),HA.fromBufferAttribute(r,o),GA.fromBufferAttribute(r,a),c.uv1=Gl.getInterpolation(WA,wb,Mb,Cb,jA,HA,GA,new tt)),n&&(mte.fromBufferAttribute(n,s),gte.fromBufferAttribute(n,o),vte.fromBufferAttribute(n,a),c.normal=Gl.getInterpolation(WA,wb,Mb,Cb,mte,gte,vte,new oe),c.normal.dot(e.direction)>0&&c.normal.multiplyScalar(-1));let d={a:s,b:o,c:a,normal:new oe,materialIndex:0};Gl.getNormal(wb,Mb,Cb,d.normal),c.face=d,c.faceIndex=s}return c}(n,c,d,h,u,o,a,l,t);return p?(p.faceIndex=i,r&&r.push(p),p):null}function Mp(e,t,n,i){let r=e.a,s=e.b,o=e.c,a=t,l=t+1,c=t+2;n&&(a=n.getX(t),l=n.getX(t+1),c=n.getX(t+2)),r.x=i.getX(a),r.y=i.getY(a),r.z=i.getZ(a),s.x=i.getX(l),s.y=i.getY(l),s.z=i.getZ(l),o.x=i.getX(c),o.y=i.getY(c),o.z=i.getZ(c)}function _te(e,t,n,i,r,s,o){let a=n.index,l=n.attributes.position;for(let c=e,d=t+e;c<d;c++)if(Mp(o,3*c,a,l),o.needsUpdate=!0,i(o,c,r,s))return!0;return!1}var bte=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return 0===e.length?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function kg(e,t){return 65535===t[e+15]}function Pb(e,t){return t[e+6]}function oC(e,t){return t[e+14]}function aC(e){return e+8}function lC(e,t){return t[e+6]}var Sb=new ra,qA=new oe,K7e=["x","y","z"];function I5(e,t,n,i,r){let s=2*e,o=Eb,a=Ng,l=Lg;if(kg(s,a))!function X7e(e,t,n,i,r,s){for(let o=i,a=i+r;o<a;o++)yte(e,t,n,o,s)}(t,n,i,Pb(e,l),oC(s,a),r);else{let c=aC(e);XA(c,o,i,qA)&&I5(c,t,n,i,r);let d=lC(e,l);XA(d,o,i,qA)&&I5(d,t,n,i,r)}}function R5(e,t,n,i){let r=2*e,s=Eb,o=Ng,a=Lg;if(kg(r,o))return function Y7e(e,t,n,i,r){let s=1/0,o=null;for(let a=i,l=i+r;a<l;a++){let c=yte(e,t,n,a);c&&c.distance<s&&(o=c,s=c.distance)}return o}(t,n,i,Pb(e,a),oC(r,o));{let h,u,l=function $7e(e,t){return t[e+7]}(e,a),c=K7e[l],d=i.direction[c]>=0;d?(h=aC(e),u=lC(e,a)):(h=lC(e,a),u=aC(e));let p=XA(h,s,i,qA)?R5(h,t,n,i):null;if(p){let v=p.point[c];if(d?v<=s[u+l]:v>=s[u+l+3])return p}let m=XA(u,s,i,qA)?R5(u,t,n,i):null;return p&&m?p.distance<=m.distance?p:m:p||m||null}}var Z7e=function(){let e,t,n=[],i=new bte(()=>new ra);return function(...s){e=i.getPrimitive(),t=i.getPrimitive(),n.push(e,t);let o=r(...s);i.releasePrimitive(e),i.releasePrimitive(t),n.pop(),n.pop();let a=n.length;return a>0&&(t=n[a-1],e=n[a-2]),o};function r(s,o,a,l,c=null,d=0,h=0){function u(x){let w=2*x,P=Ng,A=Lg;for(;!kg(w,P);)w=2*(x=aC(x));return Pb(x,A)}function p(x){let w=2*x,P=Ng,A=Lg;for(;!kg(w,P);)w=2*(x=lC(x,A));return Pb(x,A)+oC(w,P)}let m=2*s,v=Eb,g=Ng,b=Lg;if(kg(m,g)){let x=Pb(s,b),w=oC(m,g);return bp(s,v,e),l(x,w,!1,h,d+s,e)}{let D,R,N,k,x=aC(s),w=lC(s,b),P=x,A=w;if(c&&(N=e,k=t,bp(P,v,N),bp(A,v,k),D=c(N),R=c(k),R<D)){P=w,A=x;let _e=D;D=R,R=_e,N=k}N||(N=e,bp(P,v,N));let le,Q=a(N,kg(2*P,g),D,h+1,d+P);if(2===Q){let _e=u(P);le=l(_e,p(P)-_e,!0,h+1,d+P,N)}else le=Q&&r(P,o,a,l,c,d,h+1);if(le)return!0;k=t,bp(A,v,k);let xe,he=a(k,kg(2*A,g),R,h+1,d+A);if(2===he){let _e=u(A);xe=l(_e,p(A)-_e,!0,h+1,d+A,k)}else xe=he&&r(A,o,a,l,c,d,h+1);return!!xe}}}(),Q7e=function(){let e=new Zf,t=new Zf,n=new vn,i=new wp,r=new wp;return function s(o,a,l,c,d=null){let h=2*o,u=Eb,p=Ng,m=Lg;if(null===d&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,c),d=i),!kg(h,p)){let v=o+8,g=m[o+6];return bp(v,u,Sb),!!(d.intersectsBox(Sb)&&s(v,a,l,c,d)||(bp(g,u,Sb),d.intersectsBox(Sb)&&s(g,a,l,c,d)))}{let g=a.index,b=a.attributes.position,x=l.index,w=l.attributes.position,P=Pb(o,m),A=oC(h,p);if(n.copy(c).invert(),l.boundsTree)return bp(o,u,r),r.matrix.copy(n),r.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:D=>r.intersectsBox(D),intersectsTriangle:D=>{D.a.applyMatrix4(c),D.b.applyMatrix4(c),D.c.applyMatrix4(c),D.needsUpdate=!0;for(let R=3*P,N=3*(A+P);R<N;R+=3)if(Mp(t,R,g,b),t.needsUpdate=!0,D.intersectsTriangle(t))return!0;return!1}});for(let D=3*P,R=A+3*P;D<R;D+=3){Mp(e,D,g,b),e.a.applyMatrix4(n),e.b.applyMatrix4(n),e.c.applyMatrix4(n),e.needsUpdate=!0;for(let N=0,k=x.count;N<k;N+=3)if(Mp(t,N,x,w),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}}}();function XA(e,t,n,i){return bp(e,t,Sb),n.intersectBox(Sb,i)}var YA,Eb,Ng,Lg,k5=[];function cC(e){YA&&k5.push(YA),YA=e,Eb=new Float32Array(e),Ng=new Uint16Array(e),Lg=new Uint32Array(e)}function $A(){YA=null,Eb=null,Ng=null,Lg=null,k5.length&&cC(k5.pop())}var N5=Symbol("skip tree generation"),L5=new ra,F5=new ra,Ob=new vn,Kv=new wp,dC=new wp,hC=new oe,KA=new oe,J7e=new oe,eje=new oe,tje=new oe,xte=new ra,Cp=new bte(()=>new Zf),uC=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),uC.serialize(arguments[0],{cloneBuffers:void 0===arguments[2]||arguments[2]});t={cloneBuffers:!0,...t};let s,i=e._roots,r=e.geometry.getIndex();return s=t.cloneBuffers?{roots:i.map(o=>o.slice()),index:r.array.slice()}:{roots:i,index:r.array},s}static deserialize(e,t,n={}){if("boolean"==typeof n)return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),uC.deserialize(arguments[0],arguments[1],{setIndex:void 0===arguments[2]||arguments[2]});n={setIndex:!0,...n};let{index:i,roots:r}=e,s=new uC(t,{...n,[N5]:!0});if(s._roots=r,n.setIndex){let o=t.getIndex();if(null===o){let a=new Bi(e.index,1,!1);t.setIndex(a)}else o.array!==i&&(o.array.set(i),o.needsUpdate=!0)}return s}constructor(e,t={}){if(!e.isBufferGeometry)throw new Error("MeshBVH: Only BufferGeometries are supported.");if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.");if((t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[N5]:!1},t)).useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[N5]||(this._roots=function V7e(e,t){let i,r,s,n=function U7e(e,t){function n(b){u&&u(b/p)}function i(b,x,w,P=null,A=0){if(!m&&A>=l&&(m=!0,c&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),w<=d||A>=l)return n(x+w),b.offset=x,b.count=w,b;let D=function F7e(e,t,n,i,r,s){let o=-1,a=0;if(0===s)o=ute(t),-1!==o&&(a=(t[o]+t[o+3])/2);else if(1===s)o=ute(e),-1!==o&&(a=function B7e(e,t,n,i){let r=0;for(let s=t,o=t+n;s<o;s++)r+=e[6*s+2*i];return r/n}(n,i,r,o));else if(2===s){let l=sC(e),c=1.25*r,d=6*i,h=6*(i+r);for(let u=0;u<3;u++){let p=t[u],m=(t[u+3]-p)/Kf;if(r<Kf/4){let v=[...Rg];v.length=r;let g=0;for(let x=d;x<h;x+=6,g++){let w=v[g];w.candidate=n[x+2*u],w.count=0;let{bounds:P,leftCacheBounds:A,rightCacheBounds:D}=w;for(let R=0;R<3;R++)D[R]=1/0,D[R+3]=-1/0,A[R]=1/0,A[R+3]=-1/0,P[R]=1/0,P[R+3]=-1/0;UA(x,n,P)}v.sort(L7e);let b=r;for(let x=0;x<b;x++){let w=v[x];for(;x+1<b&&v[x+1].candidate===w.candidate;)v.splice(x+1,1),b--}for(let x=d;x<h;x+=6){let w=n[x+2*u];for(let P=0;P<b;P++){let A=v[P];w>=A.candidate?UA(x,n,A.rightCacheBounds):(UA(x,n,A.leftCacheBounds),A.count++)}}for(let x=0;x<b;x++){let w=v[x],P=w.count,A=r-w.count,R=w.rightCacheBounds,N=0;0!==P&&(N=sC(w.leftCacheBounds)/l);let k=0;0!==A&&(k=sC(R)/l);let L=1+1.25*(N*P+k*A);L<c&&(o=u,c=L,a=w.candidate)}}else{for(let b=0;b<Kf;b++){let x=Rg[b];x.count=0,x.candidate=p+m+b*m;let w=x.bounds;for(let P=0;P<3;P++)w[P]=1/0,w[P+3]=-1/0}for(let b=d;b<h;b+=6){let x=~~((n[b+2*u]-p)/m);x>=Kf&&(x=Kf-1);let w=Rg[x];w.count++,UA(b,n,w.bounds)}let v=Rg[Kf-1];pte(v.bounds,v.rightCacheBounds);for(let b=Kf-2;b>=0;b--){let x=Rg[b];fte(x.bounds,Rg[b+1].rightCacheBounds,x.rightCacheBounds)}let g=0;for(let b=0;b<Kf-1;b++){let x=Rg[b],w=x.count,P=x.bounds,A=Rg[b+1].rightCacheBounds;0!==w&&(0===g?pte(P,VA):fte(P,VA,VA)),g+=w;let D=0,R=0;0!==g&&(D=sC(VA)/l);let N=r-g;0!==N&&(R=sC(A)/l);let k=1+1.25*(D*g+R*N);k<c&&(o=u,c=k,a=x.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}(b.boundingData,P,o,x,w,h);if(-1===D.axis)return n(x+w),b.offset=x,b.count=w,b;let R=function N7e(e,t,n,i,r){let s=n,o=n+i-1,a=r.pos,l=2*r.axis;for(;;){for(;s<=o&&t[6*s+l]<a;)s++;for(;s<=o&&t[6*o+l]>=a;)o--;if(!(s<o))return s;for(let c=0;c<3;c++){let d=e[3*s+c];e[3*s+c]=e[3*o+c],e[3*o+c]=d;let h=t[6*s+2*c+0];t[6*s+2*c+0]=t[6*o+2*c+0],t[6*o+2*c+0]=h;let u=t[6*s+2*c+1];t[6*s+2*c+1]=t[6*o+2*c+1],t[6*o+2*c+1]=u}s++,o--}}(a,o,x,w,D);if(R===x||R===x+w)n(x+w),b.offset=x,b.count=w;else{b.splitAxis=D.axis;let N=new zA,k=x,L=R-x;b.left=N,N.boundingData=new Float32Array(6),T5(o,k,L,N.boundingData,s),i(N,k,L,s,A+1);let Q=new zA,le=R,ae=w-L;b.right=Q,Q.boundingData=new Float32Array(6),T5(o,le,ae,Q.boundingData,s),i(Q,le,ae,s,A+1)}return b}!function I7e(e,t){if(!e.index){let r,n=e.attributes.position.count,i=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;r=n>65535?new Uint32Array(new i(4*n)):new Uint16Array(new i(2*n)),e.setIndex(new Bi(r,1));for(let s=0;s<n;s++)r[s]=s}}(e,t);let r=new Float32Array(6),s=new Float32Array(6),o=function z7e(e,t){let n=e.attributes.position,i=e.index.array,r=i.length/3,s=new Float32Array(6*r),o=n.normalized,a=n.array,l=n.offset||0,c=3;n.isInterleavedBufferAttribute&&(c=n.data.stride);let d=["getX","getY","getZ"];for(let h=0;h<r;h++){let m,v,g,u=3*h,p=6*h;o?(m=i[u+0],v=i[u+1],g=i[u+2]):(m=i[u+0]*c+l,v=i[u+1]*c+l,g=i[u+2]*c+l);for(let b=0;b<3;b++){let x,w,P;o?(x=n[d[b]](m),w=n[d[b]](v),P=n[d[b]](g)):(x=a[m+b],w=a[v+b],P=a[g+b]);let A=x;w<A&&(A=w),P<A&&(A=P);let D=x;w>D&&(D=w),P>D&&(D=P);let R=(D-A)/2,N=2*b;s[p+N+0]=A+R,s[p+N+1]=R+(Math.abs(A)+R)*D7e,A<t[b]&&(t[b]=A),D>t[b+3]&&(t[b+3]=D)}}return s}(e,r),a=e.index.array,l=t.maxDepth,c=t.verbose,d=t.maxLeafTris,h=t.strategy,u=t.onProgress,p=e.index.count/3,m=!1,v=[],g=function R7e(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],n=new Set;for(let r of e.groups)n.add(r.start),n.add(r.start+r.count);let i=Array.from(n.values()).sort((r,s)=>r-s);for(let r=0;r<i.length-1;r++){let s=i[r];t.push({offset:s/3,count:(i[r+1]-s)/3})}return t}(e);if(1===g.length){let b=g[0],x=new zA;x.boundingData=r,function k7e(e,t,n,i){let r=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,c=-1/0;for(let d=6*t,h=6*(t+n);d<h;d+=6){let u=e[d+0];u<r&&(r=u),u>a&&(a=u);let p=e[d+2];p<s&&(s=p),p>l&&(l=p);let m=e[d+4];m<o&&(o=m),m>c&&(c=m)}i[0]=r,i[1]=s,i[2]=o,i[3]=a,i[4]=l,i[5]=c}(o,b.offset,b.count,s),i(x,b.offset,b.count,s),v.push(x)}else for(let b of g){let x=new zA;x.boundingData=new Float32Array(6),T5(o,b.offset,b.count,x.boundingData,s),i(x,b.offset,b.count,s),v.push(x)}return v}(e,t),o=[],a=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let d=0;d<n.length;d++){let h=n[d],p=new a(32*l(h));i=new Float32Array(p),r=new Uint32Array(p),s=new Uint16Array(p),c(0,h),o.push(p)}return o;function l(d){return d.count?1:1+l(d.left)+l(d.right)}function c(d,h){let u=d/4,p=d/2,m=!!h.count,v=h.boundingData;for(let g=0;g<6;g++)i[u+g]=v[g];if(m){let b=h.count;return r[u+6]=h.offset,s[p+14]=b,s[p+15]=65535,d+32}{let w,b=h.right,x=h.splitAxis;if(w=c(d+32,h.left),w/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return r[u+6]=w/4,w=c(w,b),r[u+7]=x,w}}}(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new ra))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let r,s,o,a,t=this.geometry,n=t.index.array,i=t.attributes.position,l=0,c=this._roots;for(let h=0,u=c.length;h<u;h++)r=c[h],s=new Uint32Array(r),o=new Uint16Array(r),a=new Float32Array(r),d(0,l),l+=r.byteLength;function d(h,u,p=!1){let m=2*h;if(65535===o[m+15]){let v=s[h+6],b=1/0,x=1/0,w=1/0,P=-1/0,A=-1/0,D=-1/0;for(let R=3*v,N=3*(v+o[m+14]);R<N;R++){let k=n[R],L=i.getX(k),Q=i.getY(k),le=i.getZ(k);L<b&&(b=L),L>P&&(P=L),Q<x&&(x=Q),Q>A&&(A=Q),le<w&&(w=le),le>D&&(D=le)}return(a[h+0]!==b||a[h+1]!==x||a[h+2]!==w||a[h+3]!==P||a[h+4]!==A||a[h+5]!==D)&&(a[h+0]=b,a[h+1]=x,a[h+2]=w,a[h+3]=P,a[h+4]=A,a[h+5]=D,!0)}{let v=h+8,g=s[h+6],x=g+u,w=p,P=!1,A=!1;e?w||(P=e.has(v+u),A=e.has(x),w=!P&&!A):(P=!0,A=!0);let R=w||A,N=!1;(w||P)&&(N=d(v,u,w));let k=!1;R&&(k=d(g,u,w));let L=N||k;if(L)for(let Q=0;Q<3;Q++){let le=v+Q,ae=g+Q,he=a[le],xe=a[le+3],_e=a[ae],be=a[ae+3];a[h+Q]=he<_e?he:_e,a[h+Q+3]=xe>be?xe:be}return L}}}traverse(e,t=0){let n=this._roots[t],i=new Uint32Array(n),r=new Uint16Array(n);!function s(o,a=0){let l=2*o,c=65535===r[l+15];if(c){let d=i[o+6],h=r[l+14];e(a,c,new Float32Array(n,4*o,6),d,h)}else{let d=o+8,h=i[o+6],u=i[o+7];e(a,c,new Float32Array(n,4*o,6),u)||(s(d,a+1),s(h,a+1))}}(0)}raycast(e,t=cu){let n=this._roots,i=this.geometry,r=[],s=t.isMaterial,o=Array.isArray(t),a=i.groups,l=s?t.side:t;for(let c=0,d=n.length;c<d;c++){let h=o?t[a[c].materialIndex].side:l,u=r.length;if(cC(n[c]),I5(0,i,h,e,r),$A(),o){let p=a[c].materialIndex;for(let m=u,v=r.length;m<v;m++)r[m].face.materialIndex=p}}return r}raycastFirst(e,t=cu){let n=this._roots,i=this.geometry,r=t.isMaterial,s=Array.isArray(t),o=null,a=i.groups,l=r?t.side:t;for(let c=0,d=n.length;c<d;c++){let h=s?t[a[c].materialIndex].side:l;cC(n[c]);let u=R5(0,i,h,e);$A(),null!=u&&(null==o||u.distance<o.distance)&&(o=u,s&&(u.face.materialIndex=a[c].materialIndex))}return o}intersectsGeometry(e,t){let n=this.geometry,i=!1;for(let r of this._roots)if(cC(r),i=Q7e(0,n,e,t),$A(),i)break;return i}shapecast(e,t,n){let i=this.geometry;if(e instanceof Function){if(t){let h=t;t=(u,p,m,v)=>{let g=3*p;return h(u,g,g+1,g+2,m,v)}}e={boundsTraverseOrder:n,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let r=Cp.getPrimitive(),{boundsTraverseOrder:s,intersectsBounds:o,intersectsRange:a,intersectsTriangle:l}=e;if(a&&l){let h=a;a=(u,p,m,v,g)=>!!h(u,p,m,v,g)||_te(u,p,i,l,m,v,r)}else a||(a=l?(h,u,p,m)=>_te(h,u,i,l,p,m,r):(h,u,p)=>p);let c=!1,d=0;for(let h of this._roots){if(cC(h),c=Z7e(0,i,o,a,s,d),$A(),c)break;d+=h.byteLength}return Cp.releasePrimitive(r),c}bvhcast(e,t,n){let{intersectsRanges:i,intersectsTriangles:r}=n,s=this.geometry.index,o=this.geometry.attributes.position,a=e.geometry.index,l=e.geometry.attributes.position;Ob.copy(t).invert();let c=Cp.getPrimitive(),d=Cp.getPrimitive();if(r){let u=function(p,m,v,g,b,x,w,P){for(let A=v,D=v+g;A<D;A++){Mp(d,3*A,a,l),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let R=p,N=p+m;R<N;R++)if(Mp(c,3*R,s,o),c.needsUpdate=!0,r(c,d,R,A,b,x,w,P))return!0}return!1};if(i){let p=i;i=function(m,v,g,b,x,w,P,A){return!!p(m,v,g,b,x,w,P,A)||u(m,v,g,b,x,w,P,A)}}else i=u}e.getBoundingBox(F5),F5.applyMatrix4(t);let h=this.shapecast({intersectsBounds:u=>F5.intersectsBox(u),intersectsRange:(u,p,m,v,g,b)=>(L5.copy(b),L5.applyMatrix4(Ob),e.shapecast({intersectsBounds:x=>L5.intersectsBox(x),intersectsRange:(x,w,P,A,D)=>i(u,p,x,w,v,g,A,D)}))});return Cp.releasePrimitive(c),Cp.releasePrimitive(d),h}intersectsBox(e,t){return Kv.set(e.min,e.max,t),Kv.needsUpdate=!0,this.shapecast({intersectsBounds:n=>Kv.intersectsBox(n),intersectsTriangle:n=>Kv.intersectsTriangle(n)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,n={},i={},r=0,s=1/0){e.boundingBox||e.computeBoundingBox(),Kv.set(e.boundingBox.min,e.boundingBox.max,t),Kv.needsUpdate=!0;let o=this.geometry,a=o.attributes.position,l=o.index,c=e.attributes.position,d=e.index,h=Cp.getPrimitive(),u=Cp.getPrimitive(),p=KA,m=J7e,v=null,g=null;i&&(v=eje,g=tje);let b=1/0,x=null,w=null;return Ob.copy(t).invert(),dC.matrix.copy(Ob),this.shapecast({boundsTraverseOrder:P=>Kv.distanceToBox(P),intersectsBounds:(P,A,D)=>D<b&&D<s&&(A&&(dC.min.copy(P.min),dC.max.copy(P.max),dC.needsUpdate=!0),!0),intersectsRange:(P,A)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:D=>dC.distanceToBox(D),intersectsBounds:(D,R,N)=>N<b&&N<s,intersectsRange:(D,R)=>{for(let N=3*D,k=3*(D+R);N<k;N+=3){Mp(u,N,d,c),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let L=3*P,Q=3*(P+A);L<Q;L+=3){Mp(h,L,l,a),h.needsUpdate=!0;let le=h.distanceToTriangle(u,p,v);if(le<b&&(m.copy(p),g&&g.copy(v),b=le,x=L/3,w=N/3),le<r)return!0}}}});for(let R=0,N=d?d.count:c.count;R<N;R+=3){Mp(u,R,d,c),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let k=3*P,L=3*(P+A);k<L;k+=3){Mp(h,k,l,a),h.needsUpdate=!0;let Q=h.distanceToTriangle(u,p,v);if(Q<b&&(m.copy(p),g&&g.copy(v),b=Q,x=k/3,w=R/3),Q<r)return!0}}}}),Cp.releasePrimitive(h),Cp.releasePrimitive(u),b===1/0?null:(n.point?n.point.copy(m):n.point=m.clone(),n.distance=b,n.faceIndex=x,i&&(i.point?i.point.copy(g):i.point=g.clone(),i.point.applyMatrix4(Ob),m.applyMatrix4(Ob),i.distance=m.sub(i.point).length(),i.faceIndex=w),n)}closestPointToPoint(e,t={},n=0,i=1/0){let r=n*n,s=i*i,o=1/0,a=null;if(this.shapecast({boundsTraverseOrder:c=>(hC.copy(e).clamp(c.min,c.max),hC.distanceToSquared(e)),intersectsBounds:(c,d,h)=>h<o&&h<s,intersectsTriangle:(c,d)=>{c.closestPointToPoint(e,hC);let h=e.distanceToSquared(hC);return h<o&&(KA.copy(hC),o=h,a=d),h<r}}),o===1/0)return null;let l=Math.sqrt(o);return t.point?t.point.copy(KA):t.point=KA.clone(),t.distance=l,t.faceIndex=a,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{bp(0,new Float32Array(t),xte),e.union(xte)}),e}},pC=al(oDe()),nje=.5*(Math.sqrt(3)-1),fC=(3-Math.sqrt(3))/6,Pp=1/6,mC=(Math.sqrt(5),Math.sqrt(5),e=>0|Math.floor(e)),wte=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),B5=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function z5(e=Math.random){let t=Mte(e),n=new Float64Array(t).map(r=>wte[r%12*2]),i=new Float64Array(t).map(r=>wte[r%12*2+1]);return function(r,s){let b,x,o=0,a=0,l=0,c=(r+s)*nje,d=mC(r+c),h=mC(s+c),u=(d+h)*fC,v=r-(d-u),g=s-(h-u);v>g?(b=1,x=0):(b=0,x=1);let w=v-b+fC,P=g-x+fC,A=v-1+2*fC,D=g-1+2*fC,R=255&d,N=255&h,k=.5-v*v-g*g;if(k>=0){let le=R+t[N];k*=k,o=k*k*(n[le]*v+i[le]*g)}let L=.5-w*w-P*P;if(L>=0){let le=R+b+t[N+x];L*=L,a=L*L*(n[le]*w+i[le]*P)}let Q=.5-A*A-D*D;if(Q>=0){let le=R+1+t[N+1];Q*=Q,l=Q*Q*(n[le]*A+i[le]*D)}return 70*(o+a+l)}}function Mte(e){let t=new Uint8Array(512);for(let n=0;n<256;n++)t[n]=n;for(let n=0;n<255;n++){let i=n+~~(e()*(256-n)),r=t[n];t[n]=t[i],t[i]=r}for(let n=256;n<512;n++)t[n]=t[n-256];return t}var gC,_u=new Gl,oje=al(j$()),aje=new vn,lje=new vn,cje=new vn;(e=>{e.is=function t(n){return n&&n.__isSPEObject}})(gC||(gC={}));var es,U5=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new vn,this.copyPreviousMatrix=!0,this.hiddenMatrix=new vn,this.matrixWorldRigid=new vn,this.shearScale=new vn,this.shearScaleInv=new vn}get __isSPEObject(){return!0}isDescendantOf(t){t instanceof Fs&&(t=t.uuid);let n=this;for(;n.parent;){if(n.parent.uuid===t)return!0;n=n.parent}return!1}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let n of this.children)n.updateMatrixWorld(t)}updateWorldMatrix(t,n){let i=this.parent;if(t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),n)for(let r of this.children)r.updateWorldMatrix(!1,!0)}traverseChildren(t,n=0){for(let i of this.children)gC.is(i)&&i.traverseObject(t,n+1)}traverseObject(t,n=0){if(!0!==t(this,n))for(let i of this.children)gC.is(i)&&i.traverseObject(t,n+1)}updateMatrixWorldSVD(){let t=this.matrixWorld.elements,n=[[t[0],t[4],t[8]],[t[1],t[5],t[9]],[t[2],t[6],t[10]]],{u:i,v:r,q:s}=(0,oje.SVD)(n),o=aje.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),a=lje.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),l=cje.copy(a).transpose();this.shearScale.makeScale(s[0],s[1],s[2]).multiply(l).premultiply(a),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(o,l).copyPosition(this.matrixWorld),this.hasNonUniformScale=!s.every(c=>Math.abs(s[0]-c)<.01)}attach(t,n){this.updateWorldMatrix(!0,!1);let i=(new vn).copy(this.matrixWorld).invert();return null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),i.multiply(t.parent.matrixWorld)),"hiddenMatrix"in t&&t.hiddenMatrix instanceof vn?t.hiddenMatrix.premultiply(i):t.applyMatrix4(i),t.updateWorldMatrix(!1,!1),this.add(t),void 0!==n&&(this.children.pop(),this.children.splice(n,0,t)),this}copy(t,n=!1){return super.copy(t,n),this.hasNonUniformScale=t.hasNonUniformScale,this}onAfterRender(t,n,i,r,s,o){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},dje=class extends(U5(Fs)){},Yl=class extends dje{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,t){}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){let n=this.children[e];n?.object!==t&&(n&&this.remove(n),n=new Yl(t),this.add(n),this.children.splice(e,0,this.children.pop()),n.matrixWorldNeedsUpdate=!0,n.matrixAutoUpdate=!1,n.matrix=t.matrix,n.hiddenMatrix=t.hiddenMatrix),n.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){return void 0!==this.playModeVisible?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&!0===this.object.dataPatched.cloner?.hideBase}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return(e=>"Mesh"===this.object.type)()}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},Zv=new oe,Qv=new oe,Ab=new vn,Cte=[new oe(-1,1,1),new oe(-1,-1,1),new oe(1,-1,1),new oe(1,1,1),new oe(-1,1,-1),new oe(-1,-1,-1),new oe(1,-1,-1),new oe(1,1,-1)],uje=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],pje=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],Pte=(e,t,n)=>{e.updateEntityBoxSize(Zv,Qv),Ab.copy(t).multiply(e.matrixWorld),0===Qv.x&&0===Qv.y&&0===Qv.z?n.push(new oe(Zv.x,Zv.y,Zv.z).applyMatrix4(Ab)):Cte.forEach(i=>{n.push(i.clone().multiply(Qv).add(Zv).applyMatrix4(Ab))})},Ste=class extends ra{constructor(){super(...arguments),this.matrix=new vn,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let n=(new vn).copy(e.matrixWorld).invert();return this.expandByObjectSize(e,n,t)}expandByObjectSize(e,t,n=!1){let i=[];return!0===n?e.traverseEntity(r=>{if(r.visible||r.cloner&&r.data.visible){if(!("geometry"in r))return void i.push(new oe);Pte(r,t,i)}}):Pte(e,t,i),this.setFromPoints(i)}getCenter(e){return(e=super.getCenter(e)).applyMatrix4(this.matrix),e}getPositionToCenter(e){return(e=super.getCenter(e)).applyMatrix4(Ab.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(Qv).multiplyScalar(.5),this.getCenter(Zv),Ab.copy(this.matrix).setPosition(Zv),this.vertices=Cte.map(e=>e.clone().multiply(Qv).applyMatrix4(Ab))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=uje.map(([e,t])=>new Ph(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new oe))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=pje.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},Fg={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},fje=class extends kZ{constructor(){super()}getPoints(e=12){let n,t=[],i=this.getCurveLengths(),r=i[i.length-1]/i.length;for(let s=0,o=this.curves;s<o.length;s++){let a=o[s],c=Math.ceil(e*(0===s?i[s]:i[s]-i[s-1])/r),d=a.getPoints(c);for(let h=0;h<d.length;h++){let u=d[h];n&&n.equals(u)||(t.push(u),n=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}},V5=.001;function j5(e,t,n){return t.clone().sub(e).cross(t.clone().sub(n)).length()<=V5}function H5(e,t){let n=new oe(...e.position),i=new oe(...e.controlNext.position),r=new oe(...t.controlPrevious.position),s=new oe(...t.position);return j5(n,i,s)&&j5(n,r,s)}function Ete(e){let t=e.points.map(d=>new oe(...d.data.position)),n=[e.points[0]],i=new oe(...n[0].data.position);for(let d=0;d<e.points.length-1;d++)j5(i,t[d],t[d+1])||(n.push(e.points[d]),i=t[d]);n.push(e.points[e.points.length-1]);let r=e.isClosed,s=n.length-(r?0:1),o=n.length,a=[];for(let d=0;d<o;d++){let h=n[d].data,u=new oe(...h.position),p=new oe(...h.controlPrevious.position),m=new oe(...h.controlNext.position),v={position:u,baseRoundness:h.roundness,controlPrevious:p,controlNext:m};if(0===h.roundness||!e.isClosed&&(0===d||d===o-1)){a[d]={...v,removedLength:0};continue}let x=n[r&&0==d?o-1:d-1].data,w=n[r&&d==o-1?0:d+1].data,P=new oe(...x.position),A=new oe(...w.position),D=P.clone().sub(u).normalize(),R=A.clone().sub(u).normalize();Object.assign(v,{prevDir:D,nextDir:R});let N=H5(x,h),k=H5(h,w);if(N&&k){let L=D.clone().add(R).normalize(),Q=L.clone().cross(D).length()/D.dot(L);a[d]={...v,tan:Q,removedLength:h.roundness/Q}}else a[d]={...v,removedLength:0}}for(let d=0;d<s;d++){let p=a[d],m=a[r&&d===o-1?0:d+1];if(0!==p.removedLength||0!==m.removedLength){let v=p.position.distanceTo(m.position);p.removedLength=Math.min(p.removedLength,v/2),m.removedLength=Math.min(m.removedLength,v/2)}}let l=[];for(let d=0;d<s;d++){let u=r&&d===o-1?0:d+1,p=a[d],m=a[u],v=null;if(H5(n[d].data,n[u].data)){let g=p.position.clone(),b=m.position.clone();(0!==p.removedLength||0!==m.removedLength)&&(p.nextDir&&g.add(p.nextDir.clone().setLength(p.removedLength)),m.prevDir&&b.add(m.prevDir.clone().setLength(m.removedLength))),g.distanceTo(b)>V5&&(v=new AO(g,g.clone().lerp(b,.3),b.clone().lerp(g,.3),b))}else p.position.distanceTo(m.position)>V5&&(v=new AO(p.position,p.controlNext,m.controlPrevious,m.position));l[2*d+1]=v}for(let d=0;d<o;d++){let h=a[d];if(0===h.removedLength){l[2*d]=null;continue}let u=h.position,p=h.prevDir.clone().multiplyScalar(h.removedLength).add(u),m=h.nextDir.clone().multiplyScalar(h.removedLength).add(u),v=h.tan*h.removedLength,g=h.prevDir.clone().add(h.nextDir).normalize(),b=p.clone().lerp(m,.5),x=p.distanceTo(m)/2,w=g.clone().multiplyScalar(Math.sqrt(Math.pow(v,2)-Math.pow(x,2))).add(b),P=g.clone().multiplyScalar(-v).add(w),A=u.distanceTo(P)/u.distanceTo(b),D=h.prevDir.clone().multiplyScalar(A*u.distanceTo(p)).add(u),R=D.clone().lerp(P,2),N=p.clone().lerp(D,4/3),k=m.clone().lerp(R,4/3);l[2*d]=new AO(p,N,k,m)}let c=new fje;return l.forEach(d=>{d&&c.add(d)}),c}(e=>{e.is=function t(n){return n&&n.__isEntity}})(es||(es={}));var Qf=e=>es.is(e),mje={type:"completeState",isfromEntity:!0},gje=["x","y","z"],G5=new oe,vje=(new oe).set(0,1,0),W5=e=>class extends(U5(e)){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new Ste,this._recursiveBBox=new Ste,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(t){let n=this.children[t];if(es.is(n))return n}entityChildrenCount(){let t=this.children.length;for(;t--;)if(es.is(this.children[t]))return t+1;return 0}get isConcreteEntity(){return"string"==typeof this.identity}get isVirtualEntity(){return"string"!=typeof this.identity}get isInstanceRoot(){return this.isConcreteEntity&&"Instance"===this.data.type}nearestInstanceSelfOrParent(){let t=this;for(;"Instance"!==t.data.type;){let n=t.parent;if(!es.is(n))return;t=n}return t}forInstancesRec(t){this.instances.forEach(n=>{n.disposed||t(n),n.forInstancesRec(t)})}super_Entity(t,n){"string"==typeof t&&(this.uuid=t),this.identity=t,this.data=n,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(t,n,i=!1){if(0!==this.data.states.length||i){for(let r of this.data.states)Xv.toOps(this.data,r.data).forEach(s=>{let o=zF.replaceProps(s,this.data);this.dataPatched=this.data,this.updateByPatchedOp(o,this.data,n)});if(null!==t){let r=this.data.states.data(t);r&&(this.dataPatched=Xv.patch(this.data,r),Xv.toOps(this.data,r).forEach(s=>{this.updateByPatchedOp(s,this.dataPatched,n)}))}i&&this.updateTransformState(this.dataPatched,n),this.stateSelection=t,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(t,n){t.setScalar(0),n.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(t=>{Qf(t)&&t.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(t=>{t.resetBBoxNeedsUpdateSelf()})}find(t){let n;return this.traverseEntity(i=>{i.uuid===t&&(n=i)}),n}traverseSortNextHelper(){let t=this.parent;if(t){let n=t.children,i=n.indexOf(this)+1;if(es.is(n[i]))return n[i];if(es.is(t))return t.traverseSortNextHelper()}}sortNext(){let t=this.children;return this.children.length>0&&es.is(this.children[0])?t[0]:this.traverseSortNextHelper()}goUp(t){let n=this;for(;t>0&&null!==n;)n=n.parent,t-=1;return n}hasAnccestorOrSelf(t){return this===t||this.hasAnccestor(t)}hasAnccestor(t){let n=this.parent;for(;n;){if(t===n)return!0;n=n.parent}return!1}countToAccestor(t){let n=0,i=this;for(;i!==t;){if(null===i)return-1;i=i.parent,n+=1}return n}forEachEntity(t){for(let n of this.children)Qf(n)&&t(n)}traverseEntityAncestors(t){this.traverseAncestors(n=>{es.is(n)&&t(n)})}traverseConcreteEntity(t,n=0){if(!0!==t(this,n))for(let i of this.children)Qf(i)&&i.isConcreteEntity&&i.traverseEntity(t,n+1)}traverseEntity(t,n=0){if(!0!==t(this,n))for(let i of this.children)Qf(i)&&i.traverseEntity(t,n+1)}traverseVisibleEntity(t){t(this);for(let n of this.children)Qf(n)&&n.visible&&n.traverseVisibleEntity(t)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(t){super.updateMatrixWorld(t),this.dispatchEvent({type:"updateMatrixWorld"})}copy(t,n=!1){return super.copy(t,n),this.dataPatched=t.dataPatched,this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),this}hasEntityChild(){return this.children.some(t=>Qf(t))}isAncestorOf(t){if(this.uuid===t)return!1;let n=!1;return this.traverseEntity(i=>{i.uuid===t&&(n=!0)}),n}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let n={position:this.position.toArray(),rotation:[this.rotation.x*gi.RAD2DEG,this.rotation.y*gi.RAD2DEG,this.rotation.z*gi.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return DF(n,t)}getTransformValues(t,n,i){return n[t].map((r,s)=>i?.shared.getVariable(r,[this.uuid,t,gje[s]])??r)}updateTransformState(t,n){let i=!1;return t.position&&(this.position.fromArray(this.getTransformValues("position",t,n)),i=!0),t.rotation&&(G5.fromArray(this.getTransformValues("rotation",t,n)).multiplyScalar(gi.DEG2RAD),this.rotation.setFromVector3(G5),i=!0),t.scale&&(this.scale.fromArray(this.getTransformValues("scale",t,n)),i=!0),void 0!==t.hiddenMatrix&&(i=!0,this.hiddenMatrix.fromArray(t.hiddenMatrix??cb.identity)),i&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(r=>{r.invalidateClonerTransform(this)})),t.position&&t.rotation&&t.scale&&void 0!==t.hiddenMatrix&&this.updateWorldMatrix(!1,!0),i}onVariableUpdate(t=!1){t?this.resetBBoxNeedsUpdate():(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(n=>{n.invalidateClonerTransform(this)}))}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let t of this.children)es.is(t)&&t.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(t=>{es.is(t)&&t.disposeRecursively()})}toState(t=[]){let n={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return DF(n,t)}updateByObjUpdateOp(t,n){void 0!==t&&this.updateByOp({type:0,props:t,path:[]},{...this.data,...t},n,!1)}updateByOp(t,n,i,r){let s=this.data;this.data=n;let o=t,a=Oh(t.path,["states","*"]);if(null!==a){if(0===t.type){let[l]=a;if(this?.stateSelection===l){let c={...t.props};if(delete c.name,Object.values(t.props).some(d=>void 0===d)){let d=this.data;if(void 0!==d){let h=xc.zoom(d,t.path.slice(2));if(h)for(let u in t.props)void 0===t.props[u]&&u in h&&(c[u]=h[u])}}o={...t,props:c,path:t.path.slice(2)}}}}else if(0===t.type){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(void 0!==l){if(void 0!==t.props.name&&l.name){let{name:d,...h}=l;l=h}if(void 0!==t.props.material&&"material"in l){let{material:d,...h}=l;l=h}let c=xc.removeOverridden(t.path,t.props,l);o={...t,props:c}}}if(this.updateByPatchedOpBase(o,Xv.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i),Oh(t.path,["overrides"])){let l=[],c=[...t.path];for(l.push(c[1]),c.splice(0,2);c.length>0&&"descendants"===c[0];)l.push(c[1]),c.splice(0,2);if(void 0===l[l.length-1]){if(0===t.type)for(let d of Object.keys(t.props)){l[l.length-1]=d;let h=i.scene.findInstance([this.uuid,...l]);h&&(h.overrideData=t.props[d],h.updateState(Cg.apply(h.component.data,h.overrideData),i))}}else{let d=i.scene.findInstance([this.uuid,...l]);if(d){let h=xc.zoom(d.component.data,c);if(0===(t={...t,path:c}).type){let u=t.props;if(h)for(let[p,m]of Object.entries(t.props))void 0===m&&(u===t.props&&(u={...t.props}),u[p]=h[p]);t={...t,props:u}}d.overrideData=RA.resolve(n.overrides,l),d.updateByOp(t,ql.applySimple(d.data,t),i,!1)}}}else if(this.instances.length>0){let l;if(0===t.path.length&&0===t.type){let c;for(let d of Ag.rootOverrideProps)d in t.props&&(void 0===c&&(c={}),c[d]=t.props[d]);c&&(l={...t,props:c})}else for(let c of Ag.rootOverrideProps)if(Oh(t.path,[c])){l=t;break}void 0!==l&&this.instances.forEach(c=>{if(c.isInstanceRoot){let d=Cg.filterOp(c.overrideData,l);d&&c.updateByOp(d,ql.applySimple(c.data,d),i,!0)}}),this.instances.forEach(c=>{if(!c.isInstanceRoot){let d=Cg.filterOp(c.overrideData,t);if(d){let h;h=s===c.data&&t===d?n:ql.applySimple(c.data,d),c.updateByOp(d,h,i,!0)}}})}}updateByPatchedOpBase(t,n,i){if(this.dataPatched=n,0===t.path.length&&0===t.type)void 0!==t.props.type&&!qv.is(t.props.type)&&Fg.changeEntityProptotype(this,n,i);else if(1===t.path.length&&"geometry"===t.path[0]&&0===t.type&&"type"in t.props){Fg.changeEntityProptotype(this,n,i);for(let r of this.children)es.is(r)&&r.updateVisible(i.scene)}this.updateByPatchedOp(t,n,i)}updateByPatchedOp(t,n,i){if(0===t.path.length&&0===t.type&&this.updateState(t.props,i),null!==Oh(t.path,["pathSnapping"])&&this.updatePathSnapping(n.pathSnapping),null!==Oh(t.path,["cloner"])){let r=ql.drop(t,1);0===r.path.length&&0===r.type&&!0===r.props.disabled?this.setFromClonerState(null,i):this.cloner?this.cloner.updateState(n.cloner,i.scene):(this.setFromClonerState(n.cloner,i),this.expandCloner(i.scene)),this.updateVisible(i.scene)}}updatePathSnapping(t=this.dataPatched.pathSnapping){this._updatedPathSnapping=t,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(t){let n=this._updatedPathSnapping?.pathId??this.dataPatched.pathSnapping.pathId,i=this._updatedPathSnapping?.slide??this.dataPatched.pathSnapping.slide??0,r=this._updatedPathSnapping?.offset??this.dataPatched.pathSnapping.offset??0,s=this._updatedPathSnapping?.orientation??this.dataPatched.pathSnapping.orientation;if(null===n)return;let o=t.find(n);if(!o||!1===this._needApplyPathSnapping)return;this._needApplyPathSnapping=!1;let a=o.data;if(a.geometry.path.points.length<=1)return;let l=Ete(a.geometry.path),c=(i+r)%1;i+r===1&&0===c&&(c=1);let d=l.getPointAt(c);if(null===d)return;let h=this.parent?this.parent?.matrixWorld:new vn;o.updateMatrixWorld();let u=(new vn).multiplyMatrices(h.clone().invert(),o.matrixWorld);d.applyMatrix4(u);let p={position:d.toArray(),rotation:a.rotation};if("tangential"===s){let m=(new vn).extractRotation(o.matrixWorld),v=l.getTangentAt(c).applyMatrix4(m).add(d),g=(new vn).lookAt(d,v,vje),b=G5.setFromEuler((new cl).setFromRotationMatrix(g)).multiplyScalar(gi.RAD2DEG);p={...p,rotation:b.toArray()}}this.updateTransformState(p),this.traverseEntity(m=>{m._cameraType&&m.dispatchEvent(mje)})}updateVisible(t){if(this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||!0!==this.dataPatched.cloner?.hideBase),!t)return;let n=!1;this.traverseEntity(i=>{if("Splat"===i.data.type)return n=!0,!0}),n&&t.reloadSplats()}updateState_Entity(t,n){void 0!==t.name&&(this.name=t.name),void 0!==t.raycastLock&&(this.raycastLock=t.raycastLock),void 0!==t.visible&&(this.updateVisible(n?.scene),this.resetBBoxNeedsUpdate()),n&&"cloner"in t&&void 0!==t.cloner&&(this.setFromClonerState(t.cloner,n),this.updateVisible(n.scene)),this.updateTransformState(t,n)}get attachedSurfaceCloners(){return this.children.filter(t=>t instanceof Fg.Cloner&&"toObject"===t.parameters.type)}setFromClonerState(t,n){this.disposed||(null===t||t.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):void 0===this.cloner?(this.cloner=new Fg.Cloner(this,t),n.scene.addPendingExpandCloner(this)):this.cloner.updateState(t,n.scene))}expandCloner(t){!this.disposed&&this.cloner&&this.cloner.expandClones(t)}invalidateClonerTransform(t){this.cloner&&this.cloner.invalidateTransform(t)}},Ote=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters);n.thetaLength=gi.clamp(n.thetaLength,0,360);let i=n.width/2,r=n.radiusTop??i,s=n.radiusBottom??i;return r===s?(r=i,s=i):r>s?(r=i,s=s*i/r):(r=r*i/s,s=i),{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width),radiusTop:r,radiusBottom:s})}}static build(e){let m,{width:t,depth:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,radiusTop:c,radiusBottom:d,cornerRadius:h,cornerSegments:u,hollow:p}=e.parameters;return 0===l?(m=new Pi,m.setAttribute("position",new Qn([],3))):m=h||p?new Tte(c,d,i,r,s,o,a,l*Math.PI/180,h,h,u,p):new HL(c,d,i,r,s,o,a,l*Math.PI/180),m.scale(1,1,n/t),Object.assign(m,{userData:{...e,type:"CylinderGeometry"}})}};function Bg(e,t,n){n.x=e.x*t.x,n.y=e.y,n.z=e.x*t.y}function Ate(e){return new tt(e.y,-e.x)}var Tte=class extends Pi{constructor(e,t,n,i,r,s,o,a,l,c,d,h,u=!1){super(),this.type="RoundedCylinderBufferGeometry",e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,s=void 0!==s&&s,o=void 0!==o?o:0,a=void 0!==a?a:2*Math.PI,s&&(l=0,c=0);let p=[],m=[],v=[],g=[],b=0,x=n/2,w=new oe,P=new oe;u&&0==e&&(e=l),u&&0==t&&(t=c);let A=new tt(e,x),D=new tt(t,-x),R=null,N=null,k=null,L=null,Q=A.clone().sub(D),le=0,ae=0,he=0;h>0&&(le=Math.min(e,t)*(1-h),ae=e-le,he=t-le);let xe=A.clone();xe.x-=le;let _e=Math.PI-Q.angle(),be=Q.angle(),me=Math.tan(be/2),Te=Math.tan(_e/2),Le=me+Te,Re=h?Le:me;if(l=Math.min(l,(e-ae)/(h?Le:Te),Q.length()/Le),c=Math.min(c,(t-he)/Re,Q.length()/Le),l>0){let $e=l/me;R=A.clone().sub(new tt($e,l)),h&&(k=R.clone(),k.x-=le-Le*l),A.sub(Q.clone().setLength($e))}if(c>0){let $e=c/Te;N=D.clone().sub(new tt($e,-c)),D.add(Q.clone().setLength($e)),h&&(L=N.clone(),L.x-=le-Le*c,xe.sub(Q.clone().setLength($e)))}Q=A.clone().sub(D);let Qe=Q.length()<.5,Pe=[];for(let $e=0;$e<=i;$e++){let ft=[],it=$e/i,Nt=it*a+o,nt=new tt(Math.sin(Nt),Math.cos(Nt));if(L&&N?(Be(ft,it,nt,_e,c,L,-1,!0),Be(ft,it,nt,be,c,N,-1,!1)):N?(Fe(ft,nt,N.x,0,-1),Be(ft,it,nt,be,c,N,-1,!1)):s||Fe(ft,nt,t,he,-1),Bg(Ate(Q).normalize(),nt,w),!Qe)for(let Ie=0;Ie<=r;Ie++){let Yt=Ie/r;Bg(Q.clone().multiplyScalar(Yt).add(D),nt,P),m.push(P.x,P.y,P.z),v.push(w.x,w.y,w.z),g.push(it,.5+P.y/n),ft.push(b++)}if(k&&R?(Be(ft,it,nt,_e,l,R,1,!1),Be(ft,it,nt,be,l,k,1,!0)):R?(Be(ft,it,nt,_e,l,R,1,!1),Fe(ft,nt,R.x,0,1)):s||Fe(ft,nt,e,ae,1),h&&!Qe){Bg(Ate(Q).multiplyScalar(-1).normalize(),nt,w);for(let Yt=0;Yt<=r;Yt++){let wt=Yt/r;Bg(Q.clone().multiplyScalar(-wt).add(xe),nt,P),m.push(P.x,P.y,P.z),v.push(w.x,w.y,w.z),g.push(it,.5+P.y/n),ft.push(b++)}}h&&!s&&ft.push(ft[0]),Pe.push(ft)}for(let $e=0;$e<Pe.length-1;$e++)for(let ft=0;ft<Pe[0].length-1;ft++){if(s&&h&&ft==r)continue;let Nt=Pe[$e+1][ft],nt=Pe[$e+1][ft+1],st=Pe[$e][ft+1],Ie=m[3*nt+0],Yt=m[3*nt+2];p.push(Pe[$e][ft],Nt,st),(0!=Ie||0!=Yt)&&p.push(Nt,nt,st)}function Be($e,ft,it,Nt,nt,st,Ie,Yt){for(let wt=0;wt<d+1;wt++){let Xt=wt/d,Ct=Ie<0?Xt:1-Xt;Yt&&(Ct-=1),Ct*=Nt;let Wt=new tt(Math.sin(Ct),Math.cos(Ct)*Ie);Bg(Wt.clone().multiplyScalar(nt).add(st),it,P),m.push(P.x,P.y,P.z),Bg(Wt,it,w),v.push(w.x,w.y,w.z),g.push(ft,.5+P.y/n),$e.push(b++)}}function Fe($e,ft,it,Nt,nt){let st=new oe,Ie=new tt,Yt=[it,Nt];nt<0&&Yt.reverse();for(let wt of Yt)Ie.set(wt,x*nt),Bg(Ie,ft,st),m.push(st.x,st.y,st.z),v.push(0,nt,0),g.push(.5,.5),$e.push(b++)}function Ze($e,ft,it){let Nt=new tt(Math.sin(it),Math.cos(it)),nt=new tt(-Math.cos(it),Math.sin(it)),st=new oe,Ie=$e<0?(Xt,Ct,Wt)=>p.push(Xt,Ct,Wt):(Xt,Ct,Wt)=>p.push(Xt,Wt,Ct);Bg(new tt((e+t+ae+he)/4,0),Nt,st),m.push(st.x,st.y,st.z),v.push(nt.x,0,nt.y),g.push(.5,.5);let wt=b++;for(let Xt of ft){let Ct=m.slice(3*Xt,3*Xt+3);m.push(...Ct),v.push(nt.x,0,nt.y);let Wt=g.slice(2*Xt,2*Xt+2);g.push(...Wt),b++}for(let Xt=wt+1;Xt<b-1;Xt++)Ie(wt,Xt,Xt+1);Ie(wt,b-1,wt+1)}a<2*Math.PI&&(Ze(-1,Pe[0],o),Ze(1,Pe[Pe.length-1],o+a)),this.setIndex(p),this.setAttribute("position",new Qn(m,3)),this.setAttribute("normal",new Qn(v,3)),this.setAttribute("uv",new Qn(g,2))}},q5=Math.PI/2,bje=class extends Pi{constructor(e=1,t=1,n=1,i=1,r=1,s=1,o=0,a=4){super(),this.type="BoxGeometry";let l=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s),a=Math.floor(a),o=Math.min(o,e/2,t/2,n/2);let c=[],d=[],h=[],u=[],p=0,m=0;function v(x,w,P,A,D,R,N,k,L,Q,le){let ae=(R-2*o)/L,he=(N-2*o)/Q,xe=R/2-o,_e=N/2-o,be=k/2,me=L+1,Te=Q+1,Le=0,ke=0,Re=new oe;for(let Qe=0;Qe<Te;Qe++){let Pe=Qe*he-_e;for(let Be=0;Be<me;Be++)Re[x]=(Be*ae-xe)*A,Re[w]=Pe*D,Re[P]=be,d.push(Re.x,Re.y,Re.z),Re[x]=0,Re[w]=0,Re[P]=k>0?1:-1,h.push(Re.x,Re.y,Re.z),u.push(Be/L),u.push(1-Qe/Q),Le+=1}for(let Qe=0;Qe<Q;Qe++)for(let Pe=0;Pe<L;Pe++){let Fe=p+Pe+me*(Qe+1),Ze=p+(Pe+1)+me*(Qe+1),$e=p+(Pe+1)+me*Qe;c.push(p+Pe+me*Qe,Fe,$e),c.push(Fe,Ze,$e),ke+=6}l.addGroup(m,ke,le),m+=ke,p+=Le}function g(x,w,P,A,D,R,N,k,L,Q,le){let ae=(N-2*o)/Q,he=N/2-o,xe=k/2-o,_e=L/2,be=Q+1,me=0,Te=0,Le=new oe,ke=new oe;for(let Re=0;Re<a+1;Re++){let Qe=Re/a*q5,Pe=Math.sin(Qe)*o,Be=(1-Math.cos(Qe))*o,Fe=Math.sin(Qe),Ze=Math.cos(Qe);Le[w]=(xe+Pe)*D,Le[P]=(_e-Be)*R,ke[x]=0,ke[w]=Fe*Math.sign(Le[w]),ke[P]=Ze*Math.sign(Le[P]);for(let $e=0;$e<be;$e++)Le[x]=($e*ae-he)*A,d.push(Le.x,Le.y,Le.z),h.push(ke.x,ke.y,ke.z),u.push($e/Q),u.push(0),me+=1}for(let Re=0;Re<a;Re++)for(let Qe=0;Qe<Q;Qe++){let Be=p+Qe+be*(Re+1),Fe=p+(Qe+1)+be*(Re+1),Ze=p+(Qe+1)+be*Re;c.push(p+Qe+be*Re,Be,Ze),c.push(Be,Fe,Ze),Te+=6}l.addGroup(m,Te,le),m+=Te,p+=me}function b(x,w,P){let A=new oe,D=new oe(e/2,t/2,n/2);D.subScalar(o);let R=[],N=x*w*P>0?(L,Q,le)=>c.push(L,Q,le):(L,Q,le)=>c.push(L,le,Q);for(let L=0;L<=a;L++){let Q=[],le=q5*(1-L/a),ae=Math.cos(le),he=Math.sin(le),xe=0;for(let _e=0;_e<=L;_e++){let be=Math.cos(xe),me=Math.sin(xe);A.x=ae*be,A.y=he,A.z=ae*me;let Te=D.clone().addScaledVector(A,o);d.push(x*Te.x,w*Te.y,P*Te.z),h.push(x*A.x,w*A.y,P*A.z),u.push(0,0),Q.push(p++),xe+=q5/L}R.push(Q)}let k=R.length-1;for(let L=0;L<k;L++){let Q=R[L],le=R[L+1],ae=Q.length-1;N(Q[0],le[1],le[0]);for(let he=1;he<=ae;he++)N(Q[he-1],Q[he],le[he]),N(Q[he],le[he+1],le[he])}}v("z","y","x",-1,-1,n,t,e,s,r,0),v("z","y","x",1,-1,n,t,-e,s,r,1),v("x","z","y",1,1,e,n,t,i,s,2),v("x","z","y",1,-1,e,n,-t,i,s,3),v("x","y","z",1,-1,e,t,n,i,r,4),v("x","y","z",-1,-1,e,t,-n,i,r,5),o>0&&(g("z","y","x",-1,-1,1,n,t,e,s,0),g("z","y","x",1,-1,-1,n,t,e,s,1),g("z","y","x",-1,1,-1,n,t,e,s,1),g("z","y","x",1,1,1,n,t,e,s,0),g("x","y","z",-1,-1,-1,e,t,n,i,0),g("x","y","z",1,-1,1,e,t,n,i,1),g("x","y","z",-1,1,1,e,t,n,i,0),g("x","y","z",1,1,-1,e,t,n,i,1),g("y","x","z",-1,-1,1,t,e,n,r,0),g("y","x","z",1,-1,-1,t,e,n,r,1),g("y","x","z",1,1,1,t,e,n,r,1),g("y","x","z",-1,1,-1,t,e,n,r,0),b(1,1,1),b(-1,1,1),b(1,-1,1),b(-1,-1,1),b(1,1,-1),b(-1,1,-1),b(1,-1,-1),b(-1,-1,-1)),this.setIndex(c),this.setAttribute("position",new Qn(d,3)),this.setAttribute("normal",new Qn(h,3)),this.setAttribute("uv",new Qn(u,2))}},X5=class extends Pi{constructor(e=[],t=[],n="",i=1,r=.2,s=4){super(),this.type="PolyhedronGeometryRound";let o=[],a=[],l=[];return function c(){0==(r=Math.min(.99999,r))&&(s=0);let h={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[n],u=new oe,p=u.clone(),m=new Gl,v=r*i,g=i-v,b=s+1,x=new oe,w=(be,me)=>x.subVectors(be,me).normalize(),P=(be,me)=>Array(be).fill(void 0).map(me),A=P(e.length/3,(be,me)=>(new oe).fromArray(e,3*me).setLength(i)),D=[],R=1e6;for(let be=0;be<A.length;be++){let Le,ke,Re,me=A[be],Te=[],Qe=1e10,Pe=-1;for(;-1!=(Pe=t.indexOf(be,Pe+1));){let $e=Pe-Pe%3;Le=t[$e+(Pe+1)%3],ke=t[$e+(Pe+2)%3],Re=me.distanceToSquared(A[Le]),Qe=Math.min(Qe,Re),Te.push([Le,ke,Re])}Qe+=1e-6;let Be=[],Fe=0,Ze=Te.length;for(let $e=0;$e<Ze;$e++){[Le,ke,Re]=Te[Fe];let ft=1==D[Le]?.includes(be);Re<=Qe&&Be.push(Le+ +ft*R),Fe=Te.findIndex(it=>it[0]==ke)}D.push(Be)}let N=[];{let Te,Le,be=0,me=0,ke=3==h;for(let Re=0;Re<=s;Re++){Te=Re*(Re+1)/2,Le=(Re+1)*(Re+2)/2;for(let Qe=0;Qe<s-Re;Qe++)[be,me]=[Te+Qe+Re+2,Le+Qe+Re+3],N.push(Te,Le,...ke?[me,Te]:[be,Le],me,be),[Te,Le]=[be,me];N.push(Te,Le,Te+s+2)}}let k=u.clone(),L=u.clone(),Q=u.clone(),le=u.clone(),ae=u.clone(),he=[],xe=P(A.length,()=>P(h,()=>u.clone()));for(let be=0;be<A.length;be++){u.copy(A[be]).normalize(),k.copy(u).multiplyScalar(g);let me=D[be];for(let Be=0;Be<me.length;Be++)m.setFromPointsAndIndices(A,be,me[Be]%R,me[(Be+1)%h]%R),m.b.sub(m.a).setLength(1e10).add(m.a),m.c.sub(m.a).setLength(1e10).add(m.a),m.closestPointToPoint(k,xe[be][Be]);let Te=[],Le=[],ke=[],Re=new oe;0==s&&[...xe[be]].reduce((Be,Fe)=>Be.add(Fe),Re).multiplyScalar(1/h);for(let Be=0;Be<h;Be++){let Fe=[],$e=xe[be][(Be-1+h)%h],ft=xe[be][Be];u.copy($e).sub(k),p.copy(ft).sub(k);let it=k.angleTo(u),Nt=u.angleTo(p),nt=Math.cos(it)*v;0==s?L.copy(Re):L.copy(k).setLength(g+nt),Le.push(nt);let st=[L,$e,ft];for(let Ie=0;Ie<2;Ie++){let Yt=st[Ie],wt=st[Ie+1];le.subVectors(Yt,k),ae.subVectors(wt,k),Q.crossVectors(le,ae).normalize();for(let Xt=0;Xt<b;Xt++){let Ct=[it,Nt][Ie]*Xt/b;u.copy(le).applyAxisAngle(Q,Ct).add(k),Te.push(u.clone()),Ie&&(w(u,k),Fe.push([0==Xt?Yt:u.clone(),x.clone()]))}Ie&&(w(wt,k),Fe.push([wt,x.clone()]))}ke.push(Fe)}he.push(ke);let Qe=2*b,Pe=2;for(let Be=0;Be<h;Be++){let Fe=Qe*Be,Ze=Qe*((Be+1)%h),$e=[Te[Fe]];for(let it=1;it<b;it++){le=Te[Fe+it],ae=Te[Ze+it],$e.push(le);for(let Nt=1,nt=it-Pe+1;Nt<=nt;Nt++)u.lerpVectors(le,ae,Nt/(nt+1)),u.sub(k).setLength(Le[Be]).add(k),$e.push(u.clone());$e.push(ae)}for(let it=0;it<b;it++)$e.push(Te[it+b+Fe]);$e.push(Te[Ze+b]);let ft=N.map(it=>$e[it]);o.push(...ft.map(it=>[it.x,it.y,it.z]).flat()),l.push(...ft.map(it=>(w(it,k),[x.x,x.y,x.z])).flat())}}let _e=[];for(let be=0;be<D.length;be++)for(let me=0;me<h;me++){let Te=D[be][me];if(Te<R){let Le=D[Te].findIndex(Qe=>Qe%R==be),ke=he[be][me],Re=he[Te][Le];for(let Qe=0;Qe<b;Qe++){let Be=Re[b-Qe],Fe=ke[Qe+1];[ke[Qe],Be,Fe,Fe,Be,Re[b-(Qe+1)]].forEach($e=>{o.push($e[0].x,$e[0].y,$e[0].z),l.push($e[1].x,$e[1].y,$e[1].z)})}_e.push(ke[0][0],Re[b][0],ke[b][0],Re[0][0])}}for(;_e.length;){let be,me,Te,Le;[be,me]=_e.splice(0,2);let ke=[be];for(;be!=me;)ke.push(me),Te=_e.indexOf(me),Le=Te%2,me=_e.splice(Te-Le,2)[1-Le];x.subVectors(ke[0],ke[1]).cross(u.subVectors(ke[0],ke[2])).normalize();let Re=x.dot(ke[0])<0;Re&&x.negate();for(let Qe=1;Qe<=ke.length-2;Qe++)[ke[Qe+ +Re],ke[Qe+1-+Re],ke[0]].forEach(Pe=>{o.push(Pe.x,Pe.y,Pe.z),l.push(x.x,x.y,x.z)})}}(),function d(){let h=new oe;for(let D=0;D<o.length;D+=3){h.x=o[D+0],h.y=o[D+1],h.z=o[D+2];let R=P(h)/2/Math.PI+.5,N=A(h)/Math.PI+.5;a.push(R,1-N)}let u=new oe,p=new oe,m=new oe,v=new oe,g=new tt,b=new tt,x=new tt,w=(D,R,N,k)=>{k<0&&1===D.x&&(a[R]=D.x-1),0===N.x&&0===N.z&&(a[R]=k/2/Math.PI+.5)};for(let D=0,R=0;D<o.length;D+=9,R+=6){u.set(o[D+0],o[D+1],o[D+2]),p.set(o[D+3],o[D+4],o[D+5]),m.set(o[D+6],o[D+7],o[D+8]),g.set(a[R+0],a[R+1]),b.set(a[R+2],a[R+3]),x.set(a[R+4],a[R+5]),v.copy(u).add(p).add(m).divideScalar(3);let N=P(v);w(g,R+0,u,N),w(b,R+2,p,N),w(x,R+4,m,N)}for(let D=0;D<a.length;D+=6){let R=a[D+0],N=a[D+2],k=a[D+4],L=Math.max(R,N,k),Q=Math.min(R,N,k);L>.9&&Q<.1&&(R<.2&&(a[D+0]+=1),N<.2&&(a[D+2]+=1),k<.2&&(a[D+4]+=1))}function P(D){return Math.atan2(D.z,-D.x)}function A(D){return Math.atan2(-D.y,Math.sqrt(D.x*D.x+D.z*D.z))}}(),this.setAttribute("position",new Qn(o,3)),this.setAttribute("normal",new Qn(l,3)),void this.setAttribute("uv",new Qn(a,2))}static fromJSON(e){return new X5(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},Dte=class extends X5{constructor(e=1,t=.2,n=4){let i=(1+Math.sqrt(5))/2,r=1/i,a="DodecahedronGeometry";super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,e,t,n),this.type=a}static fromJSON(e){return new Dte(e.radius,e.corner,e.cornerSides)}},vC=1e-12,Y5=class{constructor(e){this.position=new tt,this.startPosition=new tt,this.uuid=gi.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new Y5(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},$5=class extends Y5{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new $5(this.parent).copy(this)}},Tb=class extends Y5{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new $5(this),new $5(this))}static create(e,t){let n=new Tb(e,new tt(...t.position));return n.controls[0].position.set(...t.controlPrevious.position),n.controls[1].position.set(...t.controlNext.position),n.roundness=t.roundness,n.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,n}getOppositeControl(e){let t=this.controls.indexOf(e);return 0===t?this.controls[1]:1===t?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let n=0,i=this.controls.length;n<i;n++){let r=this.controls[n];this.position.distanceTo(r.position)<=t?r.position.copy(this.position):r.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new Tb(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){let e=this.curveBefore?.getTangentAt(1),t=this.curveAfter?.getTangentAt(0);return[e,t]}computeNormals(e=new tt,t=new tt){let[n,i]=this.computeTangents();return n&&i&&(Ite(n,e),Ite(i,t)),[e,t]}computeTangent(e=new tt){let[t,n]=this.computeTangents();return t&&n&&e.copy(t).add(n).normalize(),e}computeNormal(e=new tt){let[t,n]=this.computeNormals();return e.copy(t).add(n).normalize(),e}};function Ite(e,t=new tt){let n=e.length();return t.set(-e.y/n,e.x/n)}var Db=new tt,ZA=new tt,wje=new tt,Mje=new tt,Cje=new tt,Pje=new tt,Rte=new oe,kte=new oe;function Sje(e){let t=new tt;t.addVectors(e.v0,Db.subVectors(e.v1,e.v0).multiplyScalar(2/3));let n=new tt;return n.addVectors(e.v2,ZA.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new pu(e.v0,t,n,e.v2)}function yC(e,t,n=Number.EPSILON){return Math.abs(e-t)<n}function Eje(e,t,n=Number.EPSILON){return e.distanceTo(t)<n}function Oje(e,t,n=Number.EPSILON){return e.distanceTo(t)<n}function Nte(e,t,n){let i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),r=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)),s=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));return Math.acos((r*r+i*i-s*s)/(2*r*i))}function Aje(e,t,n){return Fte(e,t)&&Fte(t,n)&&Z5(e.position,t.position,n.position)}function Z5(e,t,n){return 0===Db.copy(t).sub(e).cross(ZA.copy(n).sub(e))}function Tje(e,t,n,i,r){let s=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),o=(e.y+t.y)/2,a=(e.x+t.x)/2,l=Math.sqrt(Math.pow(n,2)-Math.pow(s/2,2))*(e.y-t.y)/s,c=Math.sqrt(Math.pow(n,2)-Math.pow(s/2,2))*(t.x-e.x)/s;return i.set(a+l,o+c),r.set(a-l,o-c),[i,r]}function Dje(e,t,n){return e.distanceTo(n)<t.distanceTo(n)?t:e}function Ije(e,t,n,i,r,s){let h,o=t.x-e.x,a=t.y-e.y,l=n.x-e.x,c=n.y-e.y,d=Math.sqrt((o+l)*(o+l)+(a+c)*(a+c));return Nte(t,e,n)>Math.PI&&(d*=-1),h=yC(c,a)?(a+c)*(i/d-.5)*8/3/(o-l):(o+l)*(i/d-.5)*8/3/(c-a),r.set(t.x-h*a,t.y+h*o),s.set(n.x+h*c,n.y-h*l),[r,s]}function Lte(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function Fte(e,t){return Z5(e.position,e.controls[1].position,t.position)&&Z5(e.position,t.controls[0].position,t.position)}function Bte(e,t=12,n=!1){let i=[];for(let r=0,s=e.length;r<s;r++){let o=e[r],a=0;if(n&&void 0!==o.roundedCurveCorner){let l=.5*Jv(o.roundedCurveCorner,t);r>0&&(i[r-1]+=l),a+=l}void 0!==o.curveAfter&&(a+=Jv(o.curveAfter,t)),i.push(a)}return e.length>0&&n&&void 0!==e[0].roundedCurveCorner&&(i[e.length-1]+=.5*Jv(e[0].roundedCurveCorner,t)),i}function Jv(e,t=12){return e&&e instanceof EO?2*t:e&&(e instanceof fu||e instanceof RZ)?1:e&&e instanceof jL?t*e.points.length:t}var Bs,Sa,Q5=new tt,Fje=new tt,Bje=new tt,zje=new tt,Uje=new tt,Vje=new tt,Uo=class extends DO{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.plane=new Gd(new oe(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this.isText=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=gi.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,n){let i=new Uo;return i.isClosed=e.isClosed,i.points=e.points.map(r=>Tb.create(r.id,r.data)),"number"==typeof e.roundness&&(i.roundness=e.roundness),i.shapeHoles=e.shapeHoles.map(r=>Uo.createFromState(r)),void 0!==t&&void 0!==n&&i.applySize(t,n),i.update(),i}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,n=this.points.length;t<n;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,n=this.points.findIndex(i=>i.uuid===e);if(n<0){let i=t;for(let r=0,s=this.shapeHoles.length;r<s;r++){let o=this.shapeHoles[r],a=o.points.length,l=o.getPointIndexById(e);if(!(l<0))return l+i;i+=a}}return n}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let n=0,i=this.shapeHoles.length;n<i;n++){let r=this.shapeHoles[n],s=e-t;if(s<=r.points.length-1)return r.points[s];t+=r.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let n=0,i=this.shapeHoles.length;n<i;n++){let r=this.shapeHoles[n],s=r.points.indexOf(e);if(s>=0)return t+s;t+=r.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){0===e&&(e=.001),0===t&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let n=Q5.set(e,t);for(let i=0,r=this.points.length;i<r;i++){let s=this.points[i];s.position.multiply(n),s.controls[0].position.multiply(n),s.controls[1].position.multiply(n)}for(let i=0,r=this.shapeHoles.length;i<r;i++)this.shapeHoles[i].applyScale(e,t);this._update()}createPoint(e,t=0,n=gi.generateUUID()){let i;i=e instanceof tt?e:new tt(e,t);let r=new Tb(n,i);return r.roundness=this.roundness,r}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,n=this.points.length;t<n;t++){let i=this.points[t];if(i.uuid===e)return i}for(let t=0,n=this.shapeHoles.length;t<n;t++){let i=this.shapeHoles[t].getPointByUuid(e);if(i)return i}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(n=>n.uuid===e);t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,t=12,n=!1){this.subdivision=t,void 0===this.curveDivisions&&this.computeCurveDivisions(t);let i=n?this.roundedCurveDivisions:this.curveDivisions;return function kje(e,t,n=12,i=!0){let s,r=kte.set(0,0,0),o=0,a=[];for(let l=0;l<t.length;l++){let c=t[l],d=Db,h=Jv(c,n);a.push(h);for(let u=0;u<=h;u++)if(c instanceof pu||c instanceof bg||c instanceof fu){if(c.getPoint(u/h,d),r.set(d.x,d.y,0),void 0!==s&&Oje(s,r))continue;void 0===s&&(s=Rte),s.copy(r),e.setXYZ(o,r.x,r.y,r.z),o++}}i&&o>1&&!(e.getX(o-1)===e.getX(0)&&e.getY(o-1)===e.getY(0)&&e.getZ(o-1)===e.getZ(0))&&(e.setXYZ(o,e.getX(0),e.getY(0),e.getZ(0)),o++)}(e,n?this.roundedCurves:this.curves,t,this.autoClose),i.reduce((r,s)=>r+s,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=Bte(this.points,e,!1),this.roundedCurveDivisions=Bte(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,n=12){return 2*function Nje(e,t,n,i=12,r=!0){let s=kte.set(0,0,0),o=0,a=[];for(let l=0;l<t.length;l++){if(!1===n[l])continue;let c,d=t[l],h=Db,u=Jv(d,i);a.push(u);for(let p=0;p<=u;p++)if(d instanceof pu||d instanceof bg||d instanceof fu){if(d.getPoint(p/u,h),s.set(h.x,h.y,0),c?.equals(s))continue;void 0===c?c=Rte:(e.setXYZ(o,c.x,c.y,c.z),o++,e.setXYZ(o,s.x,s.y,s.z),o++),c.copy(s)}}return r&&o>1&&!(e.getX(o-1)===e.getX(0)&&e.getY(o-1)===e.getY(0)&&e.getZ(o-1)===e.getZ(0))&&(e.setXYZ(o,e.getX(0),e.getY(0),e.getZ(0)),o++),a}(e,this.curves,t,n,this.autoClose).reduce((i,r)=>i+r,0)}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,void 0===this.curveDivisions&&this.computeCurveDivisions(t),function Lje(e,t,n=12,i=!0){let r,s=0;for(let o=0;o<t.length;o++){let a=t[o],l=Jv(a,n),c=Db;for(let d=0;d<=l;d++)if(a instanceof pu||a instanceof bg||a instanceof fu){if(a.getPoint(d/l,c),void 0!==r&&Eje(r,c,vC))continue;void 0===r&&(r=ZA),r.copy(c),e.push(c.x,c.y),s++}}return yC(e[0],e[e.length-2],vC)&&yC(e[1],e[e.length-1],vC)&&(e.pop(),e.pop()),i&&s>1&&!(yC(e[s-1],e[1],vC)&&yC(e[s-2],e[0],vC))&&(e.push(e[0],e[1]),s++),e}(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let n=0;void 0===this.curveDivisions&&this.computeCurveDivisions(this.subdivision);let i=t?this.roundedCurveDivisions:this.curveDivisions,r=0;t&&void 0!==this.points[0].roundedCurveCorner&&(r=.5*Jv(this.points[0].roundedCurveCorner,this.subdivision));let s=e-r;s<0&&(s+=i.reduce((o,a)=>o+a,0));for(let o=0,a=i.length;o<a;o++){let l=i[o];if(s<n+l)return[o,(s-n+1)/l];n+=l}return[0,1]}getCurveT(e,t,n){let i=this.points[e],r=this.points[e>=this.points.length-1?0:e+1],s=this.curveDivisions,o=s[e];if(Lte(i,r)){let l=i.position.distanceTo(r.position);return i.position.distanceTo(Q5.set(n.x,n.y))/l}let a=0;for(let l=0;l<e;l++)a+=s[l];return(t-a)/o}dispose(){}_applyCurveForPoint(e,t){Lte(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let n=this.curves[this.curves.length-1];e.curveBefore=n,t.curveAfter=n;let i=n.clone();e.roundedCurveBefore=i,t.roundedCurveAfter=i,e.roundedCurveCorner=void 0,this.roundedCurves.push(i)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let t=0,n=this.points.length;t<n;t++){let i=this.points[t];0===t?this.moveTo(i.position.x,i.position.y):this._applyCurveForPoint(i,this.points[t-1])}let e=this.getLastPoint();if(e?.curveAfter&&(e.curveAfter=void 0),this.isClosed&&this._applyCurveForPoint(this.points[0],this.points[this.points.length-1]),this.points.length>2){let t=0;for(let n=0,i=this.points.length;n<i;n++){let r=this.points[n],s=this.points[n-1]??this.points[this.points.length-1],o=this.points[n+1]??this.points[0],a=r.roundness,l=s&&o&&Aje(s,r,o);if(!r.controlsMoved()&&a>0&&!l){let c=r.curveBefore,d=r.curveAfter;if(void 0===c||void 0===d)continue;let D,h=r.roundedCurveBefore,u=r.roundedCurveAfter,p=c.getLength(),m=d.getLength(),v=Math.min(a,.499*p),g=Math.min(a,.499*m),b=Math.min(v,g),x=1-b/p,w=b/m,P=c.getPointAt(x,Q5),A=d.getPointAt(w,Fje);if(this._subSplitCurve(c,h,x,P,void 0),this._subSplitCurve(d,u,w,void 0,A),this.useCubicForRoundedCorners){let R=Nte(P,r.position,A)/2,N=Math.tan(R)*P.distanceTo(r.position),[k,L]=Tje(P,A,N,Bje,zje),Q=Dje(k,L,r.position),[le,ae]=Ije(Q,P,A,N,Uje,Vje);D=new pu(P.clone(),le.clone(),ae.clone(),A.clone())}else D=new bg(P.clone(),r.position.clone(),A.clone());r.roundedCurveCorner=D,this.roundedCurves.splice(n+t,0,D),t++}}}}_subSplitCurve(e,t,n,i,r){if(!(e instanceof fu)){let s=e,o=t,a=s.getUtoTmapping(n,0),l=function Rje(e,t,n,i,r=.5){let s=Db.subVectors(t,e).multiplyScalar(r).add(e),o=ZA.subVectors(n,t).multiplyScalar(r).add(t),a=wje.subVectors(i,n).multiplyScalar(r).add(n),l=s,c=Mje.subVectors(o,s).multiplyScalar(r).add(s),d=Cje.subVectors(a,o).multiplyScalar(r).add(o),h=a,u=Pje.subVectors(d,c).multiplyScalar(r).add(c);return[e.x,e.y,l.x,l.y,c.x,c.y,u.x,u.y,d.x,d.y,h.x,h.y,i.x,i.y]}(s.v0,s.v1,s.v2,s.v3,a);return void 0!==i&&(o.v0.set(l[0],l[1]),o.v1.set(l[2],l[3]),o.v2.set(l[4],l[5]),o.v3.set(l[6],l[7])),void 0!==r&&(o.v0.set(l[6],l[7]),o.v1.set(l[8],l[9]),o.v2.set(l[10],l[11]),o.v3.set(l[12],l[13])),o}return void 0!==i&&t.v2.copy(i),void 0!==r&&t.v1.copy(r),t}clone(){let e=new Uo(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){this.points=[],this.pointIDs=0;let t=e.points.length/7;for(let n=0;n<t;n++){let i=7*n,r=e.points[i+0],s=e.points[i+1],o=e.points[i+2],a=e.points[i+3],l=e.points[i+4],c=e.points[i+5],d=e.points[i+6],h=new Tb(gi.generateUUID(),new tt(r,s));h.controls[0].position.set(o,a),h.controls[1].position.set(l,c),h.roundness=d,this.points.push(h)}return this.shapeHoles=e.shapeHoles?.length?e.shapeHoles.map(n=>{let i=new Uo;return i.fromJSON(n),i}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e,t=!1){this.isText=t;let n=(r,s)=>{s instanceof pu&&s.v3.equals(r.position)&&r.controls[0].position.copy(s.v2)};return this.points=(r=>{let o,a,s=[];for(o=0,a=r.length;o<a;o++)r[o]instanceof bg&&(r[o]=Sje(r[o]));for(o=0,a=r.length;o<a;o++){let u,d=r[o],h=o>0?r[o-1]:null;d instanceof pu?(u=this.createPoint(d.v0),u.controls[1].position.copy(d.v1)):d instanceof fu&&(u=this.createPoint(d.v1)),void 0!==u&&(null!==h&&n(u,h),s.push(u))}let l=r[r.length-1],c=!1;return l instanceof pu?l.v3.equals(s[0].position)&&(s[0].controls[0].position.copy(l.v2),c=!0):l instanceof fu&&l.v2.equals(s[0].position)&&(c=!0),this.isClosed=c,s})(e.curves),e instanceof DO&&(this.shapeHoles=e.holes.map(r=>{let s=new Uo;return s.fromShape(r),s})),this.update(),this}updatePoint(e,t){let n=this.getPointByUuid(e);n&&(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.roundness&&(n.roundness=t.roundness),void 0!==t.areControlsDirectionsMirrored&&(n.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){let n=this.getPointByUuid(e)?.controls[0];n&&(t.position&&n.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){let n=this.getPointByUuid(e)?.controls[1];n&&(t.position&&n.position.fromArray(t.position),this.needsUpdate=!0)}},J5=2*Math.PI;function eB({x:e,y:t},n,i,r,s){return{x:e*n+r,y:t*i+s}}function jje(e,t){let n=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:1.3333333333333333*Math.tan(t/4),i=Math.cos(e),r=Math.sin(e),s=Math.cos(e+t),o=Math.sin(e+t);return[{x:i-r*n,y:r+i*n},{x:s+o*n,y:o-s*n},{x:s,y:o}]}function zte(e,t,n,i){let r=e*i-t*n<0?-1:1,s=Math.min(1,Math.max(-1,e*n+t*i));return r*Math.acos(s)}function Ui(e,t){if(!e)throw t||"Assertion Failed!"}!function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"}(Bs||(Bs={})),function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"}(Sa||(Sa={}));var Oi=function(){function e(){}return e.vertEq=function(t,n){return t.s===n.s&&t.t===n.t},e.vertLeq=function(t,n){return t.s<n.s||t.s===n.s&&t.t<=n.t},e.transLeq=function(t,n){return t.t<n.t||t.t===n.t&&t.s<=n.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,n){return Math.abs(t.s-n.s)+Math.abs(t.t-n.t)},e.edgeEval=function(t,n,i){Ui(e.vertLeq(t,n)&&e.vertLeq(n,i));var r=n.s-t.s,s=i.s-n.s;return r+s>0?r<s?n.t-t.t+r/(r+s)*(t.t-i.t):n.t-i.t+s/(r+s)*(i.t-t.t):0},e.edgeSign=function(t,n,i){Ui(e.vertLeq(t,n)&&e.vertLeq(n,i));var r=n.s-t.s,s=i.s-n.s;return r+s>0?(n.t-i.t)*r+(n.t-t.t)*s:0},e.transEval=function(t,n,i){Ui(e.transLeq(t,n)&&e.transLeq(n,i));var r=n.t-t.t,s=i.t-n.t;return r+s>0?r<s?n.s-t.s+r/(r+s)*(t.s-i.s):n.s-i.s+s/(r+s)*(i.s-t.s):0},e.transSign=function(t,n,i){Ui(e.transLeq(t,n)&&e.transLeq(n,i));var r=n.t-t.t,s=i.t-n.t;return r+s>0?(n.s-i.s)*r+(n.s-t.s)*s:0},e.vertCCW=function(t,n,i){return t.s*(n.t-i.t)+n.s*(i.t-t.t)+i.s*(t.t-n.t)>=0},e.interpolate=function(t,n,i,r){return(t=t<0?0:t)<=(i=i<0?0:i)?0===i?(n+r)/2:n+t/(t+i)*(r-n):r+i/(t+i)*(n-r)},e.intersect=function(t,n,i,r,s){var o,a,l;e.vertLeq(t,n)||(l=t,t=n,n=l),e.vertLeq(i,r)||(l=i,i=r,r=l),e.vertLeq(t,i)||(l=t,t=i,i=l,l=n,n=r,r=l),e.vertLeq(i,n)?e.vertLeq(n,r)?((o=e.edgeEval(t,i,n))+(a=e.edgeEval(i,n,r))<0&&(o=-o,a=-a),s.s=e.interpolate(o,i.s,a,n.s)):((o=e.edgeSign(t,i,n))+(a=-e.edgeSign(t,r,n))<0&&(o=-o,a=-a),s.s=e.interpolate(o,i.s,a,r.s)):s.s=(i.s+n.s)/2,e.transLeq(t,n)||(l=t,t=n,n=l),e.transLeq(i,r)||(l=i,i=r,r=l),e.transLeq(t,i)||(l=t,t=i,i=l,l=n,n=r,r=l),e.transLeq(i,n)?e.transLeq(n,r)?((o=e.transEval(t,i,n))+(a=e.transEval(i,n,r))<0&&(o=-o,a=-a),s.t=e.interpolate(o,i.t,a,n.t)):((o=e.transSign(t,i,n))+(a=-e.transSign(t,r,n))<0&&(o=-o,a=-a),s.t=e.interpolate(o,i.t,a,r.t)):s.t=(i.t+n.t)/2},e}(),_C=function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1},QA=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),Ib=function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0},Ute=function(){function e(){var t=new Ib,n=new _C,i=new QA(0),r=new QA(1);t.next=t.prev=t,t.anEdge=null,n.next=n.prev=n,i.next=i,i.Sym=r,r.next=r,r.Sym=i,this.vHead=t,this.fHead=n,this.eHead=i,this.eHeadSym=r}return e.prototype.makeEdge_=function(t){var n=new QA(0),i=new QA(1);t.Sym.side<t.side&&(t=t.Sym);var r=t.Sym.next;return i.next=r,r.Sym.next=n,n.next=t,t.Sym.next=i,n.Sym=i,n.Onext=n,n.Lnext=i,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,i.Sym=n,i.Onext=i,i.Lnext=n,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,n},e.prototype.splice_=function(t,n){var i=t.Onext,r=n.Onext;i.Sym.Lnext=n,r.Sym.Lnext=t,t.Onext=r,n.Onext=i},e.prototype.makeVertex_=function(t,n,i){var r=t;Ui(r,"Vertex can't be null!");var s=i.prev;r.prev=s,s.next=r,r.next=i,i.prev=r,r.anEdge=n;var o=n;do{o.Org=r,o=o.Onext}while(o!==n)},e.prototype.makeFace_=function(t,n,i){var r=t;Ui(r,"Face can't be null");var s=i.prev;r.prev=s,s.next=r,r.next=i,i.prev=r,r.anEdge=n,r.trail=null,r.marked=!1,r.inside=i.inside;var o=n;do{o.Lface=r,o=o.Lnext}while(o!==n)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var n=t.next,i=t.Sym.next;n.Sym.next=i,i.Sym.next=n},e.prototype.killVertex_=function(t,n){var i=t.anEdge,r=i;do{r.Org=n,r=r.Onext}while(r!==i);var s=t.prev,o=t.next;o.prev=s,s.next=o},e.prototype.killFace_=function(t,n){var i=t.anEdge,r=i;do{r.Lface=n,r=r.Lnext}while(r!==i);var s=t.prev,o=t.next;o.prev=s,s.next=o},e.prototype.makeEdge=function(){var t=new Ib,n=new Ib,i=new _C,r=this.makeEdge_(this.eHead);return this.makeVertex_(t,r,this.vHead),this.makeVertex_(n,r.Sym,this.vHead),this.makeFace_(i,r,this.fHead),r},e.prototype.splice=function(t,n){var i=!1,r=!1;if(t!==n){if(n.Org!==t.Org&&(r=!0,this.killVertex_(n.Org,t.Org)),n.Lface!==t.Lface&&(i=!0,this.killFace_(n.Lface,t.Lface)),this.splice_(n,t),!r){var s=new Ib;this.makeVertex_(s,n,t.Org),t.Org.anEdge=t}if(!i){var o=new _C;this.makeFace_(o,n,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var n=t.Sym,i=!1;if(t.Lface!==t.Rface&&(i=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!i){var r=new _C;this.makeFace_(r,t,t.Lface)}n.Onext===n?(this.killVertex_(n.Org,null),this.killFace_(n.Lface,null)):(t.Lface.anEdge=n.Oprev,n.Org.anEdge=n.Onext,this.splice_(n,n.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var n=this.makeEdge_(t),i=n.Sym;this.splice_(n,t.Lnext),n.Org=t.Dst;var r=new Ib;return this.makeVertex_(r,i,n.Org),n.Lface=i.Lface=t.Lface,n},e.prototype.splitEdge=function(t){var i=this.addEdgeVertex(t).Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,i),t.Dst=i.Org,i.Dst.anEdge=i.Sym,i.Rface=t.Rface,i.winding=t.winding,i.Sym.winding=t.Sym.winding,i.idx=t.idx,i.Sym.idx=t.Sym.idx,i},e.prototype.connect=function(t,n){var i=!1,r=this.makeEdge_(t),s=r.Sym;if(n.Lface!==t.Lface&&(i=!0,this.killFace_(n.Lface,t.Lface)),this.splice_(r,t.Lnext),this.splice_(s,n),r.Org=t.Dst,s.Org=n.Org,r.Lface=s.Lface=t.Lface,t.Lface.anEdge=s,!i){var o=new _C;this.makeFace_(o,r,t.Lface)}return r},e.prototype.zapFace=function(t){var i,r,s,o,a,n=t.anEdge;r=n.Lnext;do{r=(i=r).Lnext,i.Lface=null,null===i.Rface&&(i.Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),(s=i.Sym).Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(i))}while(i!=n);(a=t.next).prev=o=t.prev,o.next=a},e.prototype.countFaceVerts_=function(t){var n=t.anEdge,i=0;do{i++,n=n.Lnext}while(n!==t.anEdge);return i},e.prototype.mergeConvexFaces=function(t){var n,i,r,s,o;for(n=this.fHead.next;n!==this.fHead;n=n.next)if(n.inside)for(o=(i=n.anEdge).Org;r=i.Lnext,(s=i.Sym)&&s.Lface&&s.Lface.inside&&this.countFaceVerts_(n)+this.countFaceVerts_(s.Lface)-2<=t&&Oi.vertCCW(i.Lprev.Org,i.Org,s.Lnext.Lnext.Org)&&Oi.vertCCW(s.Lprev.Org,s.Org,i.Lnext.Lnext.Org)&&(r=s.Lnext,this.delete(s),i=null,s=null),!i||i.Lnext.Org!==o;)i=r;return!0},e.prototype.check=function(){var r,s,o,a,l,c,t=this.fHead,n=this.vHead,i=this.eHead;for(s=t,s=t;(r=s.next)!==t;s=r){Ui(r.prev===s),l=r.anEdge;do{Ui(l.Sym!==l),Ui(l.Sym.Sym===l),Ui(l.Lnext.Onext.Sym===l),Ui(l.Onext.Sym.Lnext===l),Ui(l.Lface===r),l=l.Lnext}while(l!==r.anEdge)}for(Ui(r.prev===s&&null===r.anEdge),a=n,a=n;(o=a.next)!==n;a=o){Ui(o.prev===a),l=o.anEdge;do{Ui(l.Sym!==l),Ui(l.Sym.Sym===l),Ui(l.Lnext.Onext.Sym===l),Ui(l.Onext.Sym.Lnext===l),Ui(l.Org===o),l=l.Onext}while(l!==o.anEdge)}for(Ui(o.prev===a&&null===o.anEdge),c=i,c=i;(l=c.next)!==i;c=l)Ui(l.Sym.next===c.Sym),Ui(l.Sym!==l),Ui(l.Sym.Sym===l),Ui(null!==l.Org),Ui(null!==l.Dst),Ui(l.Lnext.Onext.Sym===l),Ui(l.Onext.Sym.Lnext===l);Ui(l.Sym.next===c.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&null===l.Org&&null===l.Dst&&null===l.Lface&&null===l.Rface)},e}(),Vte=function e(){this.handle=null},jte=function e(){this.key=null,this.node=0},Wje=function(){function e(t,n){this.leq=n,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var i=0;i<t+1;i++)this.nodes[i]=new Vte,this.handles[i]=new jte;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var r,s,o,n=this.nodes,i=this.handles;for(r=n[t].handle;;){if((o=t<<1)<this.size&&this.leq(i[n[o+1].handle].key,i[n[o].handle].key)&&++o,Ui(o<=this.max),s=n[o].handle,o>this.size||this.leq(i[r].key,i[s].key)){n[t].handle=r,i[r].node=t;break}n[t].handle=s,i[s].node=t,t=o}},e.prototype.floatUp_=function(t){var r,s,o,n=this.nodes,i=this.handles;for(r=n[t].handle;;){if(s=n[o=t>>1].handle,0===o||this.leq(i[s].key,i[r].key)){n[t].handle=r,i[r].node=t;break}n[t].handle=s,i[s].node=t,t=o}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var n,i;if(2*(n=++this.size)>this.max){var r,s;for(this.max*=2,s=this.nodes.length,this.nodes.length=this.max+1,r=s;r<this.nodes.length;r++)this.nodes[r]=new Vte;for(s=this.handles.length,this.handles.length=this.max+1,r=s;r<this.handles.length;r++)this.handles[r]=new jte}return 0===this.freeList?i=n:this.freeList=this.handles[i=this.freeList].node,this.nodes[n].handle=i,this.handles[i].node=n,this.handles[i].key=t,this.initialized&&this.floatUp_(n),i},e.prototype.extractMin=function(){var t=this.nodes,n=this.handles,i=t[1].handle,r=n[i].key;return this.size>0&&(t[1].handle=t[this.size].handle,n[t[1].handle].node=1,n[i].key=null,n[i].node=this.freeList,this.freeList=i,--this.size,this.size>0&&this.floatDown_(1)),r},e.prototype.delete=function(t){var r,n=this.nodes,i=this.handles;Ui(t>=1&&t<=this.max&&null!==i[t].key),n[r=i[t].node].handle=n[this.size].handle,i[n[r].handle].node=r,--this.size,r<=this.size&&(r<=1||this.leq(i[n[r>>1].handle].key,i[n[r].handle].key)?this.floatDown_(r):this.floatUp_(r)),i[t].key=null,i[t].node=this.freeList,this.freeList=t},e}(),tB=function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},Hte=function e(){this.key=null,this.next=null,this.prev=null},qje=function(){function e(t,n){this.frame=t,this.leq=n,this.head=new Hte,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var n=this.head;do{n=n.next}while(null!==n.key&&!this.leq(this.frame,t,n.key));return n},e.prototype.insertBefore=function(t,n){do{t=t.prev}while(null!==t.key&&!this.leq(this.frame,t.key,n));var i=new Hte;return i.key=n,i.next=t.next,t.next.prev=i,i.prev=t,t.next=i,i},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),Xje=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,n){t.winding+=n.winding,t.Sym.winding+=n.Sym.winding},e.edgeLeq=function(t,n,i){var r=t.event,s=n.eUp,o=i.eUp;return s.Dst===r?o.Dst===r?Oi.vertLeq(s.Org,o.Org)?Oi.edgeSign(o.Dst,s.Org,o.Org)<=0:Oi.edgeSign(s.Dst,o.Org,s.Org)>=0:Oi.edgeSign(o.Dst,r,o.Org)<=0:o.Dst===r?Oi.edgeSign(s.Dst,r,s.Org)>=0:Oi.edgeEval(s.Dst,r,s.Org)>=Oi.edgeEval(o.Dst,r,o.Org)},e.deleteRegion=function(t,n){n.fixUpperEdge&&Ui(0===n.eUp.winding),n.eUp.activeRegion=null,t.dict.delete(n.nodeUp)},e.fixUpperEdge=function(t,n,i){Ui(n.fixUpperEdge),t.mesh.delete(n.eUp),n.fixUpperEdge=!1,n.eUp=i,i.activeRegion=n},e.topLeftRegion=function(t,n){var r,i=n.eUp.Org;do{n=e.regionAbove(n)}while(n.eUp.Org===i);if(n.fixUpperEdge){if(null===(r=t.mesh.connect(e.regionBelow(n).eUp.Sym,n.eUp.Lnext)))return null;e.fixUpperEdge(t,n,r),n=e.regionAbove(n)}return n},e.topRightRegion=function(t){var n=t.eUp.Dst;do{t=e.regionAbove(t)}while(t.eUp.Dst===n);return t},e.addRegionBelow=function(t,n,i){var r=new tB;return r.eUp=i,r.nodeUp=t.dict.insertBefore(n.nodeUp,r),r.fixUpperEdge=!1,r.sentinel=!1,r.dirty=!1,i.activeRegion=r,r},e.isWindingInside=function(t,n){switch(t.windingRule){case Bs.ODD:return 0!=(1&n);case Bs.NONZERO:return 0!==n;case Bs.POSITIVE:return n>0;case Bs.NEGATIVE:return n<0;case Bs.ABS_GEQ_TWO:return n>=2||n<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,n){n.windingNumber=e.regionAbove(n).windingNumber+n.eUp.winding,n.inside=e.isWindingInside(t,n.windingNumber)},e.finishRegion=function(t,n){var i=n.eUp,r=i.Lface;r.inside=n.inside,r.anEdge=i,e.deleteRegion(t,n)},e.finishLeftRegions=function(t,n,i){for(var r,s=null,o=n,a=n.eUp;o!==i;){if(o.fixUpperEdge=!1,(r=(s=e.regionBelow(o)).eUp).Org!=a.Org){if(!s.fixUpperEdge){e.finishRegion(t,o);break}r=t.mesh.connect(a.Lprev,r.Sym),e.fixUpperEdge(t,s,r)}a.Onext!==r&&(t.mesh.splice(r.Oprev,r),t.mesh.splice(a,r)),e.finishRegion(t,o),a=s.eUp,o=s}return a},e.addRightEdges=function(t,n,i,r,s,o){var a,l,c,d,h=!0;c=i;do{Ui(Oi.vertLeq(c.Org,c.Dst)),e.addRegionBelow(t,n,c.Sym),c=c.Onext}while(c!==r);for(null===s&&(s=e.regionBelow(n).eUp.Rprev),l=n,d=s;(c=(a=e.regionBelow(l)).eUp.Sym).Org===d.Org;)c.Onext!==d&&(t.mesh.splice(c.Oprev,c),t.mesh.splice(d.Oprev,c)),a.windingNumber=l.windingNumber-c.winding,a.inside=e.isWindingInside(t,a.windingNumber),l.dirty=!0,!h&&e.checkForRightSplice(t,l)&&(e.addWinding(c,d),e.deleteRegion(t,l),t.mesh.delete(d)),h=!1,l=a,d=c;l.dirty=!0,Ui(l.windingNumber-c.winding===a.windingNumber),o&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,n,i){t.mesh.splice(n,i)},e.vertexWeights=function(t,n,i){var r=Oi.vertL1dist(n,t),s=Oi.vertL1dist(i,t),o=.5*s/(r+s),a=.5*r/(r+s);t.coords[0]+=o*n.coords[0]+a*i.coords[0],t.coords[1]+=o*n.coords[1]+a*i.coords[1],t.coords[2]+=o*n.coords[2]+a*i.coords[2]},e.getIntersectData=function(t,n,i,r,s,o){n.coords[0]=n.coords[1]=n.coords[2]=0,n.idx=-1,e.vertexWeights(n,i,r),e.vertexWeights(n,s,o)},e.checkForRightSplice=function(t,n){var i=e.regionBelow(n),r=n.eUp,s=i.eUp;if(Oi.vertLeq(r.Org,s.Org)){if(Oi.edgeSign(s.Dst,r.Org,s.Org)>0)return!1;Oi.vertEq(r.Org,s.Org)?r.Org!==s.Org&&(t.pq.delete(r.Org.pqHandle),e.spliceMergeVertices(t,s.Oprev,r)):(t.mesh.splitEdge(s.Sym),t.mesh.splice(r,s.Oprev),n.dirty=i.dirty=!0)}else{if(Oi.edgeSign(r.Dst,s.Org,r.Org)<0)return!1;e.regionAbove(n).dirty=n.dirty=!0,t.mesh.splitEdge(r.Sym),t.mesh.splice(s.Oprev,r)}return!0},e.checkForLeftSplice=function(t,n){var o,i=e.regionBelow(n),r=n.eUp,s=i.eUp;if(Ui(!Oi.vertEq(r.Dst,s.Dst)),Oi.vertLeq(r.Dst,s.Dst)){if(Oi.edgeSign(r.Dst,s.Dst,r.Org)<0)return!1;e.regionAbove(n).dirty=n.dirty=!0,o=t.mesh.splitEdge(r),t.mesh.splice(s.Sym,o),o.Lface.inside=n.inside}else{if(Oi.edgeSign(s.Dst,r.Dst,s.Org)>0)return!1;n.dirty=i.dirty=!0,o=t.mesh.splitEdge(s),t.mesh.splice(r.Lnext,s.Sym),o.Rface.inside=n.inside}return!0},e.checkForIntersect=function(t,n){var p,m,i=e.regionBelow(n),r=n.eUp,s=i.eUp,o=r.Org,a=s.Org,l=r.Dst,c=s.Dst,u=new Ib;if(Ui(!Oi.vertEq(c,l)),Ui(Oi.edgeSign(l,t.event,o)<=0),Ui(Oi.edgeSign(c,t.event,a)>=0),Ui(o!==t.event&&a!==t.event),Ui(!n.fixUpperEdge&&!i.fixUpperEdge),o===a||Math.min(o.t,l.t)>Math.max(a.t,c.t))return!1;if(Oi.vertLeq(o,a)){if(Oi.edgeSign(c,o,a)>0)return!1}else if(Oi.edgeSign(l,a,o)<0)return!1;return e.debugEvent(t),Oi.intersect(l,o,c,a,u),Ui(Math.min(o.t,l.t)<=u.t),Ui(u.t<=Math.max(a.t,c.t)),Ui(Math.min(c.s,l.s)<=u.s),Ui(u.s<=Math.max(a.s,o.s)),Oi.vertLeq(u,t.event)&&(u.s=t.event.s,u.t=t.event.t),p=Oi.vertLeq(o,a)?o:a,Oi.vertLeq(p,u)&&(u.s=p.s,u.t=p.t),Oi.vertEq(u,o)||Oi.vertEq(u,a)?(e.checkForRightSplice(t,n),!1):!Oi.vertEq(l,t.event)&&Oi.edgeSign(l,t.event,u)>=0||!Oi.vertEq(c,t.event)&&Oi.edgeSign(c,t.event,u)<=0?c===t.event?(t.mesh.splitEdge(r.Sym),t.mesh.splice(s.Sym,r),n=e.topLeftRegion(t,n),r=e.regionBelow(n).eUp,e.finishLeftRegions(t,e.regionBelow(n),i),e.addRightEdges(t,n,r.Oprev,r,r,!0),!0):l===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(r.Lnext,s.Oprev),i=n,n=e.topRightRegion(n),m=e.regionBelow(n).eUp.Rprev,i.eUp=s.Oprev,s=e.finishLeftRegions(t,i,null),e.addRightEdges(t,n,s.Onext,r.Rprev,m,!0),!0):(Oi.edgeSign(l,t.event,u)>=0&&(e.regionAbove(n).dirty=n.dirty=!0,t.mesh.splitEdge(r.Sym),r.Org.s=t.event.s,r.Org.t=t.event.t),Oi.edgeSign(c,t.event,u)<=0&&(n.dirty=i.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),!1):(t.mesh.splitEdge(r.Sym),t.mesh.splitEdge(s.Sym),t.mesh.splice(s.Oprev,r),r.Org.s=u.s,r.Org.t=u.t,r.Org.pqHandle=t.pq.insert(r.Org),e.getIntersectData(t,r.Org,o,l,a,c),e.regionAbove(n).dirty=n.dirty=i.dirty=!0,!1)},e.walkDirtyRegions=function(t,n){for(var r,s,i=e.regionBelow(n);;){for(;i.dirty;)n=i,i=e.regionBelow(i);if(!n.dirty&&(i=n,null===(n=e.regionAbove(n))||!n.dirty))return;if(n.dirty=!1,(r=n.eUp).Dst!==(s=i.eUp).Dst&&e.checkForLeftSplice(t,n)&&(i.fixUpperEdge?(e.deleteRegion(t,i),t.mesh.delete(s),s=(i=e.regionBelow(n)).eUp):n.fixUpperEdge&&(e.deleteRegion(t,n),t.mesh.delete(r),r=(n=e.regionAbove(i)).eUp)),r.Org!==s.Org)if(r.Dst===s.Dst||n.fixUpperEdge||i.fixUpperEdge||r.Dst!==t.event&&s.Dst!==t.event)e.checkForRightSplice(t,n);else if(e.checkForIntersect(t,n))return;r.Org===s.Org&&r.Dst===s.Dst&&(e.addWinding(s,r),e.deleteRegion(t,n),t.mesh.delete(r),n=e.regionAbove(i))}},e.connectRightVertex=function(t,n,i){var r,s=i.Onext,o=e.regionBelow(n),a=n.eUp,l=o.eUp,c=!1;a.Dst!==l.Dst&&e.checkForIntersect(t,n),Oi.vertEq(a.Org,t.event)&&(t.mesh.splice(s.Oprev,a),n=e.topLeftRegion(t,n),s=e.regionBelow(n).eUp,e.finishLeftRegions(t,e.regionBelow(n),o),c=!0),Oi.vertEq(l.Org,t.event)&&(t.mesh.splice(i,l.Oprev),i=e.finishLeftRegions(t,o,null),c=!0),c?e.addRightEdges(t,n,i.Onext,s,s,!0):(r=Oi.vertLeq(l.Org,a.Org)?l.Oprev:a,r=t.mesh.connect(i.Lprev,r),e.addRightEdges(t,n,r,r.Onext,r.Onext,!1),r.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,n))},e.connectLeftDegenerate=function(t,n,i){var r,s,o,a,l;return Oi.vertEq((r=n.eUp).Org,i)?(Ui(!1),void e.spliceMergeVertices(t,r,i.anEdge)):Oi.vertEq(r.Dst,i)?(Ui(!1),n=e.topRightRegion(n),s=a=(o=(l=e.regionBelow(n)).eUp.Sym).Onext,l.fixUpperEdge&&(Ui(s!==o),e.deleteRegion(t,l),t.mesh.delete(o),o=s.Oprev),t.mesh.splice(i.anEdge,o),Oi.edgeGoesLeft(s)||(s=null),void e.addRightEdges(t,n,o.Onext,a,s,!0)):(t.mesh.splitEdge(r.Sym),n.fixUpperEdge&&(t.mesh.delete(r.Onext),n.fixUpperEdge=!1),t.mesh.splice(i.anEdge,r),void e.sweepEvent(t,i))},e.connectLeftVertex=function(t,n){var i,r,s,o,a,l,c=new tB;if(c.eUp=n.anEdge.Sym,i=t.dict.search(c).key,r=e.regionBelow(i)){if(a=r.eUp,0===Oi.edgeSign((o=i.eUp).Dst,n,o.Org))return void e.connectLeftDegenerate(t,i,n);s=Oi.vertLeq(a.Dst,o.Dst)?i:r,i.inside||s.fixUpperEdge?(l=s===i?t.mesh.connect(n.anEdge.Sym,o.Lnext):t.mesh.connect(a.Dnext,n.anEdge).Sym,s.fixUpperEdge?e.fixUpperEdge(t,s,l):e.computeWinding(t,e.addRegionBelow(t,i,l)),e.sweepEvent(t,n)):e.addRightEdges(t,i,n.anEdge,n.anEdge,null,!0)}},e.sweepEvent=function(t,n){t.event=n,e.debugEvent(t);for(var i=n.anEdge;null===i.activeRegion;)if((i=i.Onext)===n.anEdge)return void e.connectLeftVertex(t,n);var r=e.topLeftRegion(t,i.activeRegion);Ui(null!==r);var s=e.regionBelow(r),o=s.eUp,a=e.finishLeftRegions(t,s,null);a.Onext===o?e.connectRightVertex(t,r,a):e.addRightEdges(t,r,a.Onext,o,o,!0)},e.addSentinel=function(t,n,i,r){var s=new tB,o=t.mesh.makeEdge();o.Org.s=i,o.Org.t=r,o.Dst.s=n,o.Dst.t=r,t.event=o.Dst,s.eUp=o,s.windingNumber=0,s.inside=!1,s.fixUpperEdge=!1,s.sentinel=!0,s.dirty=!1,s.nodeUp=t.dict.insert(s)},e.initEdgeDict=function(t){t.dict=new qje(t,e.edgeLeq);var n=t.bmax[0]-t.bmin[0],i=t.bmax[1]-t.bmin[1],r=t.bmin[0]-n,s=t.bmax[0]+n,a=t.bmax[1]+i;e.addSentinel(t,r,s,t.bmin[1]-i),e.addSentinel(t,r,s,a)},e.doneEdgeDict=function(t){for(var n,i=0;null!==(n=t.dict.min().key);)n.sentinel||(Ui(n.fixUpperEdge),Ui(1==++i)),Ui(0===n.windingNumber),e.deleteRegion(t,n)},e.removeDegenerateEdges=function(t){var n,i,r,s=t.mesh.eHead;for(n=s.next;n!==s;n=i)i=n.next,r=n.Lnext,Oi.vertEq(n.Org,n.Dst)&&n.Lnext.Lnext!==n&&(e.spliceMergeVertices(t,r,n),t.mesh.delete(n),r=(n=r).Lnext),r.Lnext===n&&(r!==n&&((r===i||r===i.Sym)&&(i=i.next),t.mesh.delete(r)),(n===i||n===i.Sym)&&(i=i.next),t.mesh.delete(n))},e.initPriorityQ=function(t){var n,i,r,s=0;for(i=(r=t.mesh.vHead).next;i!==r;i=i.next)s++;for(n=t.pq=new Wje(s+=8,Oi.vertLeq),i=(r=t.mesh.vHead).next;i!==r;i=i.next)i.pqHandle=n.insert(i);return i===r&&(n.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,n){var i,r,s;for(i=n.fHead.next;i!==n.fHead;i=r)r=i.next,Ui((s=i.anEdge).Lnext!==s),s.Lnext.Lnext===s&&(e.addWinding(s.Onext,s),t.mesh.delete(s));return!0},e.computeInterior=function(t,n){var i,r;if(void 0===n&&(n=!0),e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);null!==(i=t.pq.extractMin());){for(;null!==(r=t.pq.min())&&Oi.vertEq(r,i);)r=t.pq.extractMin(),e.spliceMergeVertices(t,i.anEdge,r.anEdge);e.sweepEvent(t,i)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),!!e.removeDegenerateFaces(t,t.mesh)&&(n&&t.mesh.check(),!0)},e}(),Yje=function(){function e(){this.mesh=new Ute,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=Bs.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]},e.prototype.normalize_=function(t){var n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!n)throw"Zero-size vector!";n=Math.sqrt(n),t[0]/=n,t[1]/=n,t[2]/=n},e.prototype.longAxis_=function(t){var n=0;return Math.abs(t[1])>Math.abs(t[0])&&(n=1),Math.abs(t[2])>Math.abs(t[n])&&(n=2),n},e.prototype.computeNormal_=function(t){var n,i,r,s,o,a,l=[0,0,0],c=[0,0,0],d=[0,0,0],h=[0,0,0],u=[0,0,0],p=[null,null,null],m=[null,null,null],v=this.mesh.vHead;n=v.next;for(var g=0;g<3;++g)c[g]=s=n.coords[g],m[g]=n,l[g]=s,p[g]=n;for(n=v.next;n!==v;n=n.next)for(var b=0;b<3;++b)(s=n.coords[b])<c[b]&&(c[b]=s,m[b]=n),s>l[b]&&(l[b]=s,p[b]=n);var x=0;if(l[1]-c[1]>l[0]-c[0]&&(x=1),l[2]-c[2]>l[x]-c[x]&&(x=2),c[x]>=l[x])return t[0]=0,t[1]=0,void(t[2]=1);for(a=0,d[0]=(i=m[x]).coords[0]-(r=p[x]).coords[0],d[1]=i.coords[1]-r.coords[1],d[2]=i.coords[2]-r.coords[2],n=v.next;n!==v;n=n.next)h[0]=n.coords[0]-r.coords[0],h[1]=n.coords[1]-r.coords[1],h[2]=n.coords[2]-r.coords[2],u[0]=d[1]*h[2]-d[2]*h[1],u[1]=d[2]*h[0]-d[0]*h[2],u[2]=d[0]*h[1]-d[1]*h[0],(o=u[0]*u[0]+u[1]*u[1]+u[2]*u[2])>a&&(a=o,t[0]=u[0],t[1]=u[1],t[2]=u[2]);a<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(d)]=1)},e.prototype.checkOrientation_=function(){for(var n,r,t=this.mesh.fHead,i=this.mesh.vHead,s=0,o=t.next;o!==t;o=o.next)if(!((r=o.anEdge).winding<=0))do{s+=(r.Org.s-r.Dst.s)*(r.Org.t+r.Dst.t),r=r.Lnext}while(r!==o.anEdge);if(s<0){for(n=i.next;n!==i;n=n.next)n.t=-n.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var i,r,t=this.mesh.vHead,n=[0,0,0],s=!1;n[0]=this.normal[0],n[1]=this.normal[1],n[2]=this.normal[2],!n[0]&&!n[1]&&!n[2]&&(this.computeNormal_(n),s=!0),i=this.sUnit,r=this.tUnit;var o=this.longAxis_(n);i[o]=0,i[(o+1)%3]=1,i[(o+2)%3]=0,r[o]=0,r[(o+1)%3]=0,r[(o+2)%3]=n[o]>0?1:-1;for(var a=t.next;a!==t;a=a.next)a.s=this.dot_(a.coords,i),a.t=this.dot_(a.coords,r);s&&this.checkOrientation_();for(var l=!0,c=t.next;c!==t;c=c.next)l?(this.bmin[0]=this.bmax[0]=c.s,this.bmin[1]=this.bmax[1]=c.t,l=!1):(c.s<this.bmin[0]&&(this.bmin[0]=c.s),c.s>this.bmax[0]&&(this.bmax[0]=c.s),c.t<this.bmin[1]&&(this.bmin[1]=c.t),c.t>this.bmax[1]&&(this.bmax[1]=c.t))},e.prototype.addWinding_=function(t,n){t.winding+=n.winding,t.Sym.winding+=n.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,n){var i,r;if((i=n.anEdge).Lnext===i||i.Lnext.Lnext===i)throw"Mono region invalid";for(;Oi.vertLeq(i.Dst,i.Org);i=i.Lprev);for(;Oi.vertLeq(i.Org,i.Dst);i=i.Lnext);for(r=i.Lprev;i.Lnext!==r;)if(Oi.vertLeq(i.Dst,r.Org)){for(;r.Lnext!==i&&(Oi.edgeGoesLeft(r.Lnext)||Oi.edgeSign(r.Org,r.Dst,r.Lnext.Dst)<=0);)r=t.connect(r.Lnext,r).Sym;r=r.Lprev}else{for(;r.Lnext!==i&&(Oi.edgeGoesRight(i.Lprev)||Oi.edgeSign(i.Dst,i.Org,i.Lprev.Org)>=0);)i=t.connect(i,i.Lprev).Sym;i=i.Lnext}if(r.Lnext===i)throw"Mono region invalid";for(;r.Lnext.Lnext!==i;)r=t.connect(r.Lnext,r).Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var n,i=t.fHead.next;i!==t.fHead;i=n)if(n=i.next,i.inside&&!this.tessellateMonoRegion_(t,i))return!1;return!0},e.prototype.discardExterior_=function(t){for(var n,i=t.fHead.next;i!==t.fHead;i=n)n=i.next,i.inside||t.zapFace(i)},e.prototype.setWindingNumber_=function(t,n,i){for(var r,s=t.eHead.next;s!==t.eHead;s=r)r=s.next,s.Rface.inside!==s.Lface.inside?s.winding=s.Lface.inside?n:-n:i?t.delete(s):s.winding=0},e.prototype.getNeighbourFace_=function(t){return t.Rface&&t.Rface.inside?t.Rface.n:-1},e.prototype.outputPolymesh_=function(t,n,i,r){var s,l,o=0,a=0;i>3&&t.mergeConvexFaces(i);for(var c=t.vHead.next;c!==t.vHead;c=c.next)c.n=-1;for(var d=t.fHead.next;d!==t.fHead;d=d.next)if(d.n=-1,d.inside){s=d.anEdge,l=0;do{-1===(c=s.Org).n&&(c.n=a,a++),l++,s=s.Lnext}while(s!==d.anEdge);if(l>i)throw"Face vertex greater that support polygon";d.n=o,++o}for(this.elementCount=o,n===Sa.CONNECTED_POLYGONS&&(o*=2),this.elements=[],this.elements.length=o*i,this.vertexCount=a,this.vertices=[],this.vertices.length=a*r,this.vertexIndices=[],this.vertexIndices.length=a,c=t.vHead.next;c!==t.vHead;c=c.next)if(-1!==c.n){var h=c.n*r;this.vertices[h+0]=c.coords[0],this.vertices[h+1]=c.coords[1],r>2&&(this.vertices[h+2]=c.coords[2]),this.vertexIndices[c.n]=c.idx}var u=0;for(d=t.fHead.next;d!==t.fHead;d=d.next)if(d.inside){s=d.anEdge,l=0;do{this.elements[u++]=(c=s.Org).n,l++,s=s.Lnext}while(s!==d.anEdge);for(var p=l;p<i;++p)this.elements[u++]=-1;if(n===Sa.CONNECTED_POLYGONS){s=d.anEdge;do{this.elements[u++]=this.getNeighbourFace_(s),s=s.Lnext}while(s!==d.anEdge);for(var m=l;m<i;++m)this.elements[u++]=-1}}},e.prototype.outputContours_=function(t,n){var i,r,s=0,o=0;this.vertexCount=0,this.elementCount=0;for(var a=t.fHead.next;a!==t.fHead;a=a.next)if(a.inside){r=i=a.anEdge;do{this.vertexCount++,i=i.Lnext}while(i!==r);this.elementCount++}this.elements=[],this.elements.length=2*this.elementCount,this.vertices=[],this.vertices.length=this.vertexCount*n,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,c=0,d=0;for(s=0,a=t.fHead.next;a!==t.fHead;a=a.next)if(a.inside){o=0,r=i=a.anEdge;do{this.vertices[l++]=i.Org.coords[0],this.vertices[l++]=i.Org.coords[1],n>2&&(this.vertices[l++]=i.Org.coords[2]),this.vertexIndices[c++]=this.vertexIdCallback?this.vertexIdCallback(i):i.Org.idx,o++,i=i.Lnext}while(i!==r);this.elements[d++]=s,this.elements[d++]=o,s+=o}},e.prototype.addContour=function(t,n){null===this.mesh&&(this.mesh=new Ute),t<2&&(t=2),t>3&&(t=3);for(var i=null,r=0;r<n.length;r+=t)null===i?(i=this.mesh.makeEdge(),this.mesh.splice(i,i.Sym)):(this.mesh.splitEdge(i),i=i.Lnext),i.Org.coords[0]=n[r+0],i.Org.coords[1]=n[r+1],i.Org.coords[2]=t>2?n[r+2]:0,i.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(i),i.winding=1,i.Sym.winding=-1},e.prototype.tesselate=function(t,n,i,r,s,o){if(void 0===t&&(t=Bs.ODD),void 0===n&&(n=Sa.POLYGONS),void 0===o&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,s&&(this.normal[0]=s[0],this.normal[1]=s[1],this.normal[2]=s[2]),this.windingRule=t,r<2&&(r=2),r>3&&(r=3),!this.mesh)return!1;this.projectPolygon_(),Xje.computeInterior(this,o);var a=this.mesh;return n===Sa.BOUNDARY_CONTOURS?this.setWindingNumber_(a,1,!0):this.tessellateInterior_(a),o&&a.check(),n===Sa.BOUNDARY_CONTOURS?this.outputContours_(a,r):this.outputPolymesh_(a,n,i,r),!0},e}();function zg(e){var t=e.windingRule,n=void 0===t?Bs.ODD:t,i=e.elementType,r=void 0===i?Sa.POLYGONS:i,s=e.polySize,o=void 0===s?3:s,a=e.vertexSize,l=void 0===a?2:a,c=e.normal,d=void 0===c?[0,0,1]:c,h=e.contours,u=void 0===h?[]:h,p=e.strict,m=void 0===p||p,v=e.debug,g=void 0!==v&&v;if(!u&&m)throw new Error("Contours can't be empty");if(u){var b=new Yje;e.edgeCreateCallback&&(b.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(b.vertexIdCallback=e.vertexIdCallback);for(var x=0;x<u.length;x++)b.addContour(l||2,u[x]);return b.tesselate(n,r,o,l,d,m),{vertices:b.vertices,vertexIndices:b.vertexIndices,vertexCount:b.vertexCount,elements:b.elements,elementCount:b.elementCount,mesh:g?b.mesh:void 0}}}var nB=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`),this.buffer=new ArrayBuffer(e*nB.eSize);let i=Float32Array.BYTES_PER_ELEMENT,r=0;this.positions=new Float32Array(this.buffer,r*i,3*e),r+=3*e,this.normals=new Float32Array(this.buffer,r*i,3*e),r+=3*e,this.uvs=new Float32Array(this.buffer,r*i,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity} \u2192 ${e}`);let i=new ArrayBuffer(e*nB.eSize),r=Float32Array.BYTES_PER_ELEMENT,s=0,o=new Float32Array(i,s*r,3*e);s+=3*e;let a=new Float32Array(i,s*r,3*e);s+=3*e;let l=new Float32Array(i,s*r,2*e);t?(o.set(this.positions.subarray(0,3*this.size)),a.set(this.normals.subarray(0,3*this.size)),l.set(this.uvs.subarray(0,2*this.size))):(o.set(this.positions),a.set(this.normals),l.set(this.uvs)),this.buffer=i,this.positions=o,this.normals=a,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let i=this.capacity;for(;t>i;)i*=2;this.realloc(i)}let n=this.size;return this.size=t,n}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} \u2192 ${this.size}`),this.realloc(this.size,!0)}},Gte=nB;Gte.eSize=8*Float32Array.BYTES_PER_ELEMENT;var $je=al(lDe()),iB={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},Wte={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},qte={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},rB=(e,t)=>([n,i])=>(i<n&&(i+=t),(e>=n?e:e+t)<=i),sB=class extends Pi{constructor(e,t,n=0,i=12,r=3,s=Bs.ODD,o=!1){super(),this.forPathBevel=o,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._curveSegments=i,this._bevelSegmentsInput=r;let h,u,p,a=this._shape.extractShapePointsToFlatArray([],i),l=this._shape.shapeHoles.map(k=>{let L=k.extractShapePointsToFlatArray([],i),Q=[];for(let le=L.length-1;le>=1;le-=2)Q.push(L[le-1],L[le-0]);return Q}),c=[],d=[];for(let k=0;k<a.length;k+=2)d.push([a[k],a[k+1]]);c.push(d);for(let k=0;k<l.length;k++){let L=l[k],Q=[];for(let le=0;le<L.length;le+=2)Q.push([L[le],L[le+1]]);c.push(Q)}h=e.isText?.1*(new dQ).setFromPoints(e.points.map(k=>k.position)).getSize(new tt).length():0===c[0].length?n:(0,$je.default)(c).distance,n<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(n,h,t/2),this._bevelSegments=Math.floor(r));try{u=zg({windingRule:s,elementType:Sa.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[a]})}catch{u=iB}try{p=zg({windingRule:Bs.ODD,elementType:Sa.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...l]})}catch{p=Wte}if(!u)throw new Error("error generating geometry");let m=u.elementCount;if(p){u.elementCount+=p.elementCount;for(let k=0;k<p.elements.length;k++)u.elements.push(p.elements[k]+(k%2==0?u.vertexCount:0));for(let k=0;k<p.vertexIndices.length;k++)u.vertexIndices.push(p.vertexIndices[k]+u.vertexCount);for(let k=0;k<p.vertices.length;k++)u.vertices.push(p.vertices[k])}let v=1/0,g=-1/0,b=1/0,x=-1/0;for(let k=0,L=u.vertexCount;k<L;k++){let Q=2*k,le=u.vertices[Q+0],ae=u.vertices[Q+1];le<v&&(v=le),le>g&&(g=le),ae<b&&(b=ae),ae>x&&(x=ae)}this._minX=v,this._minY=b,this._width=g-v,this._height=x-b,this._buffer=new Gte(this._computeBufferEstimatedSize(u));let w=[],P=[];for(let k=u.elementCount-1;k>=0;k--){let L=k>=m,Q=2*k,le=u.elements[Q+0],ae=u.elements[Q+1],he=le+ae,xe={start:le,count:ae,normals:[],continuous:[],concave:[]},_e=le,be=he-1,me=le+1,Te=this._shape.roundedCurves.length;do{let Pe=_e-le,Ze=u.vertices[2*_e+0],$e=u.vertices[2*_e+1],ft=u.vertices[2*me+0],it=u.vertices[2*me+1],Nt=Ze-u.vertices[2*be+0],nt=$e-u.vertices[2*be+1],st=Math.sqrt(Nt*Nt+nt*nt);Nt/=st,nt/=st;let Ie=Ze-ft,Yt=$e-it,wt=Math.sqrt(Ie*Ie+Yt*Yt);Ie/=wt,Yt/=wt,xe.normals[2*Pe+0]=-Yt,xe.normals[2*Pe+1]=Ie,xe.concave[Pe]=Nt*Yt-nt*Ie>0;let Xt=u.vertexIndices[_e];if(Array.isArray(Xt))xe.continuous[Pe]=!1;else{let[Ct,Wt]=this._shape.getCurveIndexFromVertexId(Xt-1,!0);if(Wt>0&&Wt<1)xe.continuous[Pe]=!0;else{let Qt=1===Wt?Ct+1:Ct-1;Qt=(Qt+Te)%Te;let Ae=1===Wt?0:1,re=this._shape.roundedCurves[Ct].getTangent(Wt),fe=this._shape.roundedCurves[Qt].getTangent(Ae);xe.continuous[Pe]=re.dot(fe)>.95}}L&&(xe.normals[2*Pe+0]*=-1,xe.normals[2*Pe+1]*=-1),[be,_e,me]=[_e,me,me+1],me>=he&&(me-=ae)}while(me!==le+1);let Le=[];Le.push({bevelI:0,angle:0,size:0,boundary:{vertices:u.vertices.slice(2*le,2*he),vertexCount:ae,vertexIndices:new Array(ae).fill(!0).map((Pe,Be)=>[Be,Be]),elements:[0,ae],elementCount:1,mesh:null},reverseMap:[],insetPoints:u.vertices.slice(2*le,2*he)});let ke=0;for(let Pe=1;Pe<=this._bevelSegments;Pe++){let Be=Pe/this._bevelSegments*Math.PI/2,Fe=(1-Math.cos(Be))*this._bevel,Ze=[],$e=[],ft=[],it=[],Nt=0;for(let st=0;st<ae;st++){let Ie=2*st,Yt=(st-1+ae)%ae*2,wt=u.vertices[2*xe.start+Ie+0],Xt=u.vertices[2*xe.start+Ie+1],Ct=-xe.normals[Yt+0]*Fe,Wt=-xe.normals[Yt+1]*Fe,Qt=-xe.normals[Ie+0]*Fe,Ae=-xe.normals[Ie+1]*Fe;if(xe.concave[st]||!xe.concave[st]&&L){let re=Math.atan2(Wt,Ct),fe=Math.atan2(Ae,Qt);fe>re&&(fe-=2*Math.PI);let He=fe-re;if(xe.continuous[st]||L){let ut=re+He/2,et=Math.cos(ut)*Fe,Lt=Math.sin(ut)*Fe;Ze[2*Nt+0]=wt+et*(L?-1:1),Ze[2*Nt+1]=Xt+Lt*(L?-1:1),it[Nt]=st,Nt++}else{let ut=Math.max(1,Math.floor(i/4*Math.abs(He)/Math.PI));for(let et=0;et<=ut;et++){let Lt=re+He*(et/ut),$t=Math.cos(Lt)*Fe,qt=Math.sin(Lt)*Fe;Ze[2*Nt+0]=wt+$t,Ze[2*Nt+1]=Xt+qt,it[Nt]=st,Nt++}}}else Ze[2*Nt+0]=wt+Ct,Ze[2*Nt+1]=Xt+Wt,it[Nt]=st,$e[st]=Nt,Nt++,Ze[2*Nt+0]=wt,Ze[2*Nt+1]=Xt,it[Nt]=st,Nt++,Ze[2*Nt+0]=wt+Qt,Ze[2*Nt+1]=Xt+Ae,it[Nt]=st,ft[st]=Nt,Nt++}let nt=zg({windingRule:Bs.POSITIVE,elementType:Sa.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[Ze],edgeCreateCallback:st=>{let Ie=st.Org.idx,Yt=it[Ie],wt=it[(Ie+1)%it.length];st.idx=[Yt,wt],st.Sym.idx=[wt,Yt]},vertexIdCallback:st=>{let Ie=st.Lprev.idx;return[Ie?Ie[1]:0,st.idx?st.idx[0]:0]}});if(!nt)throw console.log("Error"),new Error(`error generating bevel geometry for ${Pe}'th loop`);if(!nt.vertexCount){let st=(Pe-1)/this._bevelSegments*Math.PI/2;ke=(1-Math.sin(st))*this._bevel;break}for(let st=0;st<nt.vertexIndices.length;st++){let[Ie,Yt]=nt.vertexIndices[st];if(Ie===Yt)continue;let wt=Yt;Yt<Ie&&(wt+=ae);for(let Xt=Ie;Xt<wt;Xt++){let Ct=Xt%ae,Wt=(Xt+1)%ae;if(!xe.continuous[Ct]||!xe.continuous[Wt]){nt.vertexIndices[st]=[Ie,Ct],nt.vertexIndices.splice(st+1,0,[Wt,Yt]),nt.vertices.splice(2*(st+1),0,nt.vertices[2*st],nt.vertices[2*st+1]);break}}}Le.push({bevelI:Pe,angle:Be,size:Fe,boundary:nt,reverseMap:it,insetPoints:Ze})}let Re=(Pe,Be,Fe)=>{let Ze=0,$e=Pe.boundary.vertexIndices.length;for(;Ze<$e&&Fe(Pe.boundary.vertexIndices[Be]);)Be=(Be+1)%$e,Ze++;return Ze},Qe=w.length;for(let Pe=1;Pe<Le.length;Pe++){let Be=Le[Pe-1],Fe=Le[Pe],Ze=Be.boundary.vertexIndices.length,$e=Fe.boundary.vertexIndices.length;if(!Ze||!$e)break;let ft=xe.concave.length,it=0,Nt=rB(it,ae);for(;!Be.boundary.vertexIndices.filter(Nt).length||!Fe.boundary.vertexIndices.filter(Nt).length;)it++,Nt=rB(it,ae);let nt=Be.boundary.vertexIndices.findIndex(Nt),st=Fe.boundary.vertexIndices.findIndex(Nt);do{nt=(nt+1)%Ze}while(Nt(Be.boundary.vertexIndices[nt]));do{st=(st+1)%$e}while(Nt(Fe.boundary.vertexIndices[st]));it=(it+1)%ae;let Qt,Ae,Ie=it,Yt=0,Ct=this._buildBevelVert(xe,Be,(nt-1+Ze)%Ze,void 0,Yt),Wt=this._buildBevelVert(xe,Fe,(st-1+$e)%$e,void 0,Yt),re=!1;do{Yt=(it||ft)/ft,Nt=rB(it,ae);let fe=Re(Be,nt,Nt),He=Re(Fe,st,Nt),ut=re;if(re=!1,fe&&!He){for(let et=0;et<fe;et++)Qt=this._buildBevelVert(xe,Be,(nt+et)%Ze,et/(fe-1),Yt),w.push(Ct.topN,Qt.topP,Wt.topN),!1===o&&w.push(Qt.bottomP,Ct.bottomN,Wt.bottomN),Ct=Qt;re=!0}else if(!fe&&He)for(let et=0;et<He;et++)Ae=this._buildBevelVert(xe,Fe,(st+et)%$e,et/(He-1),Yt),w.push(Wt.topN,Ct.topP,Ae.topP),!1===o&&w.push(Ct.bottomP,Wt.bottomN,Ae.bottomP),Wt=Ae;else if(fe&&He)if(Qt=this._buildBevelVert(xe,Be,nt,0,Yt),Ae=this._buildBevelVert(xe,Fe,st,0,Yt),ut?(w.push(Ct.topN,Ae.topP,Wt.topN),w.push(Ct.topN,Qt.topP,Ae.topP),!1===o&&(w.push(Ae.bottomP,Ct.bottomN,Wt.bottomN),w.push(Ae.bottomP,Qt.bottomP,Ct.bottomN))):(w.push(Wt.topN,Ct.topN,Qt.topP),w.push(Wt.topN,Qt.topP,Ae.topP),!1===o&&(w.push(Qt.bottomP,Ct.bottomN,Wt.bottomN),w.push(Qt.bottomP,Wt.bottomN,Ae.bottomP))),Ct=Qt,Wt=Ae,fe===He)for(let et=1;et<fe;et++)Qt=this._buildBevelVert(xe,Be,(nt+et)%Ze,et/(fe-1),Yt),Ae=this._buildBevelVert(xe,Fe,(st+et)%$e,et/(He-1),Yt),w.push(Ct.topN,Qt.topP,Wt.topN),w.push(Wt.topN,Qt.topP,Ae.topP),!1===o&&(w.push(Qt.bottomP,Ct.bottomN,Wt.bottomN),w.push(Qt.bottomP,Wt.bottomN,Ae.bottomP)),Ct=Qt,Wt=Ae;else if(fe>He){let et=fe/He,Lt=0;for(let $t=1;$t<fe;$t++)Qt=this._buildBevelVert(xe,Be,(nt+$t)%Ze,$t/(fe-1),Yt),w.push(Ct.topN,Qt.topP,Wt.topN),!1===o&&w.push(Qt.bottomP,Ct.bottomN,Wt.bottomN),Ct=Qt,$t>(Lt+1)*et&&(Lt++,Ae=this._buildBevelVert(xe,Fe,(st+Lt)%$e,Lt/(He-1),Yt),w.push(Wt.topN,Qt.topP,Ae.topP),!1===o&&w.push(Qt.bottomP,Wt.bottomN,Ae.bottomP),Wt=Ae)}else{let et=He/fe,Lt=0;for(let $t=1;$t<He;$t++)Ae=this._buildBevelVert(xe,Fe,(st+$t)%$e,$t/(He-1),Yt),w.push(Wt.topN,Qt.topP,Ae.topP),!1===o&&w.push(Qt.bottomP,Wt.bottomN,Ae.bottomP),Wt=Ae,$t>(Lt+1)*et&&(Lt++,Qt=this._buildBevelVert(xe,Be,(nt+Lt)%Ze,Lt/(fe-1),Yt),w.push(Ct.topN,Qt.topP,Wt.topN),!1===o&&w.push(Qt.bottomP,Ct.bottomN,Wt.bottomN),Ct=Qt)}nt=(nt+fe)%Ze,st=(st+He)%$e,it=(it+1)%ft}while(it!==Ie)}if(!1===o&&this._depth>2*this._bevel&&this._buildWall(Le,xe,w),L){let Pe=[];for(let Be=w.length-1;Be>=Qe+2;Be-=3)Pe.push(w[Be-0],w[Be-1],w[Be-2]);w.splice(Qe,w.length-Qe,...Pe)}if(L){let Pe=[];for(let Be=Le[Le.length-1].boundary.vertices.length-1;Be>=1;Be-=2)Pe.push(Le[Le.length-1].boundary.vertices[Be-1],Le[Le.length-1].boundary.vertices[Be-0]);P.push(Pe)}if(!L){let Be,Pe=Le[Le.length-1];try{Be=zg({windingRule:Le.length>1?Bs.POSITIVE:Bs.ODD,elementType:Sa.POLYGONS,vertexSize:2,strict:!0,contours:[Pe.insetPoints,...P]})}catch{Be=qte}if(!Be)throw new Error("Error generating geometry for surface");0===l.length&&this._bevel<h&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let Fe=0;Fe<3*Be.elementCount;Fe+=3){let Ze=this._buildSurfaceVert(Be,Be.elements[Fe+0],ke),$e=this._buildSurfaceVert(Be,Be.elements[Fe+1],ke),ft=this._buildSurfaceVert(Be,Be.elements[Fe+2],ke);w.push(Ze.top,$e.top,ft.top),!1===o&&w.push(ft.bottom,$e.bottom,Ze.bottom)}}this.vertexCache={}}this._buffer.shrink();let A=new Bi(Uint32Array.from(w),1),D=new Bi(this._buffer.positions,3),R=new Bi(this._buffer.normals,3),N=new Bi(this._buffer.uvs,2);D.needsUpdate=!0,R.needsUpdate=!0,N.needsUpdate=!0,A.needsUpdate=!0,this.setAttribute("position",D),this.setAttribute("normal",R),this.setAttribute("uv",N),this.setIndex(A)}_computeBufferEstimatedSize(e){return 2*e.vertexCount*(2+this._bevelSegments)}_buildWall(e,t,n){let i=e[0];for(let r=0,s=i.boundary.vertexCount;r<s;r++){let o=this._buildBevelVert(t,i,r),a=this._buildBevelVert(t,i,(r+1)%s);n.push(a.topP,o.topN,o.bottomN),n.push(a.topP,o.bottomN,a.bottomP)}}_buildSurfaceVert(e,t,n){let i=t.toString();if(i in this.vertexCache)return this.vertexCache[i];let r=e.vertices[2*t+0],s=e.vertices[2*t+1],o=(r-this._minX)/this._width,a=(s-this._minY)/this._height;this.forPathBevel&&(a=1);let l=this._buffer.get(this.forPathBevel?1:2),c=3*l,d=2*l,h={top:l+0,bottom:l+1};return this._buffer.positions[c+0]=r,this._buffer.positions[c+1]=s,this._buffer.positions[c+2]=this.forPathBevel?this._bevel:this._depth-n,this._buffer.normals[c+0]=0,this._buffer.normals[c+1]=0,this._buffer.normals[c+2]=1,this._buffer.uvs[d+0]=o,this._buffer.uvs[d+1]=a,!1===this.forPathBevel&&(this._buffer.positions[c+3]=r,this._buffer.positions[c+4]=s,this._buffer.positions[c+5]=n,this._buffer.normals[c+3]=0,this._buffer.normals[c+4]=0,this._buffer.normals[c+5]=-1,this._buffer.uvs[d+2]=o,this._buffer.uvs[d+3]=a),this.vertexCache[i]=h,h}_buildBevelVert(e,t,n,i=1,r){let s=`${t.bevelI}:${n}`;if(s in this.vertexCache&&0!==r&&1!==r&&(!r||r===this.vertexCache[s].pathBevelUCoord))return this.vertexCache[s];let l,c,d,h,[o,a]=t.boundary.vertexIndices[n];o!==a?(c=o,l=a,h=!1,d=e.continuous[c]&&e.continuous[l]):(l=o,c=(l-1+e.count)%e.count,h=e.concave[l]&&t.bevelI>0,d=e.continuous[l]||h);let u=Math.cos(t.angle),p=Math.sin(t.angle),m=2*n,v=2*l,g=2*c,b=t.boundary.vertices[m+0],x=t.boundary.vertices[m+1],w=(1-p)*this._bevel,P=(b-this._minX)/this._width,A=(x-this._minY)/this._height;this.forPathBevel&&(void 0!==r&&(P=r),A=1);let D=e.normals[v+0],R=e.normals[v+1],N=e.normals[g+0],k=e.normals[g+1];if(h){D+=(N-D)*(1-i),R+=(k-R)*(1-i);let _e=Math.sqrt(D*D+R*R);D/=_e,R/=_e}let L=this._buffer.get(this.forPathBevel?d?1:2:d?2:4),Q=3*L,le=2*L,ae={i:n,fi:l,topP:L+0,topN:L+0,bottomP:L+1,bottomN:L+1,pathBevelUCoord:r};return this._buffer.positions[Q+0]=b,this._buffer.positions[Q+1]=x,this._buffer.positions[Q+2]=(this.forPathBevel?this._bevel:this._depth)-w,this._buffer.normals[Q+0]=D*u,this._buffer.normals[Q+1]=R*u,this._buffer.normals[Q+2]=p,this._buffer.uvs[le+0]=P,this._buffer.uvs[le+1]=A,!1===this.forPathBevel&&(this._buffer.positions[Q+3]=b,this._buffer.positions[Q+4]=x,this._buffer.positions[Q+5]=w,this._buffer.normals[Q+3]=D*u,this._buffer.normals[Q+4]=R*u,this._buffer.normals[Q+5]=-p,this._buffer.uvs[le+2]=A,this._buffer.uvs[le+3]=P),d||(this.forPathBevel?(L+=1,Q+=3,le+=2):(L+=2,Q+=6,le+=4),ae.topP=L+0,ae.bottomP=L+1,this._buffer.positions[Q+0]=b,this._buffer.positions[Q+1]=x,this._buffer.positions[Q+2]=(this.forPathBevel?this._bevel:this._depth)-w,this._buffer.normals[Q+0]=N*u,this._buffer.normals[Q+1]=k*u,this._buffer.normals[Q+2]=p,this._buffer.uvs[le+0]=P,this._buffer.uvs[le+1]=A,!1===this.forPathBevel&&(this._buffer.positions[Q+3]=b,this._buffer.positions[Q+4]=x,this._buffer.positions[Q+5]=w,this._buffer.normals[Q+3]=N*u,this._buffer.normals[Q+4]=k*u,this._buffer.normals[Q+5]=-p,this._buffer.uvs[le+2]=A,this._buffer.uvs[le+3]=P)),this.vertexCache[s]=ae,ae}clone(){let e=new sB(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=rA(this.userData),e}},Xte=class extends Pi{constructor(e,t=12,n={}){super(),this.type="ShapeGeometry",this.windingRule=Bs.ODD,this.elementType=Sa.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:Bs.ODD,elementType:Sa.POLYGONS,polySize:3,vertexSize:2,strict:!0},n);let s,l,c,i=this._shape.extractShapePointsToFlatArray([],this._curveSegments),r=this._shape.shapeHoles.map(u=>u.extractShapePointsToFlatArray([],this._curveSegments)),o=!0,a=!0;for(let u=0,p=i.length/2;u<p;u++){let m=2*u,v=i[m+0],g=i[m+1];if(void 0!==l&&v!==l&&(o=!1),void 0!==c&&g!==c&&(a=!1),l=v,c=g,!o&&!a)break}if(!o&&!a)try{s=zg({contours:[i,...r],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{s=iB}let d=s?.vertexCount??1,h=s?.elementCount??1;if(this._positionAttribute=new Bi(new Float32Array(3*d),3),this._normalAttribute=new Bi(new Float32Array(3*d),3),this._uvAttribute=new Bi(new Float32Array(2*d),2),this._indexAttribute=new Bi(new Uint32Array(3*h),1),s){let u=1/0,p=-1/0,m=1/0,v=-1/0;for(let x=0,w=d;x<w;x++){let P=2*x,A=s.vertices[P+0],D=s.vertices[P+1];A<u&&(u=A),A>p&&(p=A),D<m&&(m=D),D>v&&(v=D)}let g=p-u,b=v-m;for(let x=0,w=d;x<w;x++){let P=2*x,A=s.vertices[P+0],D=s.vertices[P+1],R=(A-u)/g,N=(D-m)/b;this._positionAttribute.setXYZ(x,A,D,0),this._normalAttribute.setXYZ(x,0,0,1),this._uvAttribute.setXY(x,R,N)}for(let x=0,w=h;x<w;x++){let P=3*x,D=s.elements[P+1],R=s.elements[P+2];this._indexAttribute.setX(P+0,s.elements[P+0]),this._indexAttribute.setX(P+1,D),this._indexAttribute.setX(P+2,R)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,3*(s?.elementCount??1))}clone(){let e=new Xte(this._shape,this._curveSegments);return e.userData=rA(this.userData),e}},Yte=class extends sB{constructor(e,t,n=0,i=12,r=3,s=Bs.ODD){super(e,t,n,i,r,s),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return 2*e.vertexCount*(2+this._bevelSegments)}_buildWall(e,t,n){let i=e[0];for(let r=0,s=i.boundary.vertexCount;r<s;r++){let o=this._buildBevelVert(t,i,r),a=this._buildBevelVert(t,i,(r+1)%s);n.push(a.topP,o.topN,o.bottomN),n.push(a.topP,o.bottomN,a.bottomP)}}clone(){let e=new Yte(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=rA(this.userData),e}},e1=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:Bs.ODD},e.parameters),i=Math.abs(n.width),r=Math.abs(n.height??n.width),s=Math.abs(n.depth??0),o=e.shape??t?.shape,a=o?.roundness??n.roundness;void 0!==o&&(o instanceof Uo?(o.width!==i||o.height!==r)&&o.applySize(i,r):o=new Uo(i,r).fromJSON(o),void 0!==e.parameters?.roundness&&e.parameters?.roundness>0&&o.update());let l=o??new Uo(i,r);return{parameters:Object.assign(n,{width:i,height:r,depth:s,roundness:a}),shape:l}}static build(e){let a,{depth:t,extrudeBevelSize:n,extrudeBevelSegments:i,subdivisions:r,roundness:s,windingRule:o}=e.parameters;return e.shape.roundness=s,a=t<=0?new Xte(e.shape,r,{windingRule:o}):new Yte(e.shape,t,n,r,i,o),Object.assign(a,{userData:{...e,type:"VectorGeometry"}})}},$te=2*Math.PI,oB=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return n.angle=gi.clamp(n.angle,0,360),{shape:e.shape&&e.shape instanceof Uo?e.shape:new Uo,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(e){let p,{width:t,height:n,spikes:i,angle:r,innerRadius:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=e.parameters,c=e.shape,u=function Kje(e,t,n,i,r,s){if(i>=$te)return r>30||r%4==0?(function Qje(e,t,n,i=0,r=0,s=0){let o=.5522847498,a=t*o,l=n*o;e.addPoint(JA(r-t,s,r-t,s-l,r-t,s+l)),e.addPoint(JA(r,s+n,r-a,s+n,r+a,s+n)),e.addPoint(JA(r+t,s,r+t,s+l,r+t,s-l)),e.addPoint(JA(r,s-n,r+a,s-n,r-a,s-n)),i>0&&Qte(e,t,n,i)}(e,t,n,s),Math.round(r/4)):Kte(e,i,r,t,n,s);let o={x:0,y:n},a=(i=Math.max(i,.001))+.5*Math.PI,l={x:Math.cos(a)*t,y:Math.sin(a)*n},c=function Gje({px:e,py:t,cx:n,cy:i,rx:r,ry:s,largeArcFlag:o,sweepFlag:a}){let l=[];if(0===r||0===s)return[];let c=(e-n)/2,d=(t-i)/2;if(0===c&&0===d)return[];r=Math.abs(r),s=Math.abs(s);let h=Math.pow(c,2)/Math.pow(r,2)+Math.pow(d,2)/Math.pow(s,2);h>1&&(r*=Math.sqrt(h),s*=Math.sqrt(h));let u=function Hje(e,t,n,i,r,s,o,a,l,c){let d=Math.pow(r,2),h=Math.pow(s,2),u=Math.pow(o,2),p=Math.pow(a,2),m=d*h-d*p-h*u;m<0&&(m=0),m/=d*p+h*u,m=Math.sqrt(m)*(l===c?-1:1);let v=m*r/s*a,g=m*-s/r*o,b=v+(e+n)/2,x=g+(t+i)/2,w=(o-v)/r,P=(a-g)/s,A=(-o-v)/r,D=(-a-g)/s,R=zte(1,0,w,P),N=zte(w,P,A,D);return!c&&N>0&&(N-=J5),c&&N<0&&(N+=J5),{centerx:b,centery:x,ang1:R,ang2:N}}(e,t,n,i,r,s,c,d,o,a),{ang1:p,ang2:m}=u,{centerx:v,centery:g}=u,b=Math.abs(m)/(J5/4);Math.abs(1-b)<1e-7&&(b=1);let x=Math.max(Math.ceil(b),1);m/=x;for(let w=0;w<x;w++)l.push(jje(p,m)),p+=m;return l.map(w=>{let{x:P,y:A}=eB(w[0],r,s,v,g),{x:D,y:R}=eB(w[1],r,s,v,g),{x:N,y:k}=eB(w[2],r,s,v,g);return{x1:P,y1:A,x2:D,y2:R,x:N,y:k}})}({px:o.x,py:o.y,cx:l.x,cy:l.y,rx:t,ry:n,largeArcFlag:i>Math.PI,sweepFlag:!0});return r>30||r%c.length==0?function Zje(e,t,n,i,r,s,o,a){let l=Math.round(r/i.length);e.addPoint(Rb(t,n));for(let c=0,d=i.length;c<d;c++){let h=i[c],u=e.points[c],p=Rb(h.x,h.y);u.controls[1].position.set(h.x1,h.y1),p.controls[0].position.set(h.x2,h.y2),e.addPoint(p)}return a>0?Zte(e,s,o,a):e.addPoint(Rb(0,0)),l}(e,o.x,o.y,c,r,t,n,s):Kte(e,i,r,t,n,s)}(c,.5*t,.5*n,r*Math.PI/180,i,s);return c.isClosed=!0,c.update(),0===r?(p=new Pi,p.setAttribute("position",new Qn([],3))):p=e1.create({shape:c,parameters:{subdivisions:u,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}}),Object.assign(p,{userData:{...e,type:"EllipseGeometry"}})}};function Kte(e,t,n,i,r,s){let o=-t/n;for(let a=0;a<=n;a++){let l=o*a,c=Math.sin(l)*i,d=Math.cos(l)*r;e.addPoint(Rb(c,d))}return t<$te?s>0?Zte(e,i,r,s):e.addPoint(Rb(0,0)):(e.removePoint(e.points[e.points.length-1]),s>0&&Qte(e,i,r,s)),1}function Rb(e,t){return new Tb(gi.generateUUID(),new tt(e,t))}function JA(e,t,n,i,r,s){let o=Rb(e,t);return o.controls[0].position.set(n,i),o.controls[1].position.set(r,s),o}function Zte(e,t,n,i){Jte(e,t,n,i).forEach(r=>e.addPoint(r))}function Qte(e,t,n,i){let r=Jte(e,t,n,i),s=new Uo;r.forEach(o=>s.addPoint(o)),s.isClosed=!0,e.shapeHoles.push(s)}function Jte(e,t,n,i){let r=i*t/100,s=r*(Math.abs(n)/Math.abs(t)),o=new tt(r/t,s/n),a=e.points.map(l=>{let c=l.clone();return c.uuid=gi.generateUUID(),c}).reverse();return a.forEach(l=>{l.position.multiply(o);let c=l.controls[0].position.clone().multiply(o),d=l.controls[1].position.clone().multiply(o);l.controls[0].position.copy(d),l.controls[1].position.copy(c)}),a}var aB=new D_([0,0,0],1),ene=class extends Pi{constructor(e=!0,t=1,n=1,i=1,r=1,s=1,o=1,a=1,l=1,c=1,d=1,h=1){if(super(),0===s)return;let u=e&&1===s;u&&(h=0),d>100&&(d=100),0===d&&(h=0);let x,w,P,A,D,R,N,k,p=()=>new oe,m=new oe,v=p(),g=p(),b=p(),L=p(),Q=p(),le=p(),ae=p(),he=p(),xe=p(),_e=p(),be=p(),me=n-2*a+.001,Te=me/s,Le=Math.ceil(o*s),ke=Le+1,Re=me/Le,Qe=-me/2,Pe=c+1,Be=2*Math.PI/c,Fe=Math.PI/2/h,$e=Math.min((1-d/100)*a,a-.01),ft=a-$e,it=0,nt=2*h+2,st=Pe*nt/2,Ie=st+Pe*ke,Yt=Math.max(0,Pe*(ke+nt)),[wt,Xt,Ct]=[3,3,2].map(It=>Array(Yt*It).fill(0)),Wt=[],Qt=r-a;function Ae(It,sn){let fn=Math.PI/2;R=sn*Re,k=2*Math.PI*(R%Te)/Te+fn,R+=Qe,N=Math.sin(k)*Qt,D=Math.cos(k)*Qt,e?It.set(D,N,R):It.set(D,R,N)}Ae(m,-1e-10),Ae(v,0),L.copy(m),Ae(m,1);let re=m.distanceTo(v),fe=u?0:ft+$e,He=re*Le+2*fe,ut=$e,et=He-fe;for(let It=0;It<=Le;It++){Ae(g,It),be.subVectors(g,L).normalize(),L.copy(g),xe.copy(g).setComponent(+e+1,0).normalize(),_e.crossVectors(be,xe).normalize();let sn=0===It,fn=It===Le,On=sn?3*Math.PI/2:Fe,pn=sn?ut:et,ai=sn?Pe:Ie,di=sn?0:Yt-Pe,sr=be.clone().multiplyScalar(sn?-ft:ft).add(g),Ce=be.clone().multiplyScalar(sn?-1:1).normalize();for(let pt=0;pt<Pe;pt++){let rt=pt*Be;if(Q.addVectors(m.copy(xe).multiplyScalar(a*Math.cos(rt)),v.copy(_e).multiplyScalar(a*Math.sin(rt))),le.copy(Q).normalize(),sn||fn){u||(it=di+pt,[0,1,2].forEach(vt=>{wt[3*it+vt]=sr.getComponent(vt),Xt[3*it+vt]=Ce.getComponent(vt)}),Ct[2*it]=+fn,Ct[2*it+1]=pt/c),v.copy(le).multiplyScalar($e),b.addVectors(g,v);for(let vt=0;vt<h;vt++){let an=vt*Fe+On;ae.addVectors(m.copy(be).multiplyScalar(ft*Math.sin(an)),v.copy(le).multiplyScalar(ft*Math.cos(an))),he.copy(ae).normalize(),v.addVectors(b,ae),ae.normalize(),it=ai+vt*Pe+pt,[0,1,2].forEach(hi=>{wt[3*it+hi]=v.getComponent(hi),Xt[3*it+hi]=he.getComponent(hi)});let wn=+sn+Math.sin(an);Ct[2*it]=(pn+ft*wn)/He,Ct[2*it+1]=pt/c}}v.addVectors(g,Q),it=st+It*Pe+pt,[0,1,2].forEach(vt=>{wt[3*it+vt]=v.getComponent(vt),Xt[3*it+vt]=le.getComponent(vt)}),Ct[2*it]=(fe+It*re)/He,Ct[2*it+1]=pt/c}}let Lt=ke+2*h+2,[qt,Bt]=[+u,Lt-1];for(let It=qt;It<=Bt-1;It++){let sn=u&&It===Bt-1;for(let fn=0;fn<Pe-1;fn++)x=It*Pe+fn,w=x+1,P=(sn?fn:x)+Pe,A=(sn?fn+1:w)+Pe,0===It?Wt.push(w,A,P):It===Lt-2?Wt.push(x,w,P):Wt.push(x,w,P,w,A,P)}this.setIndex(Wt),this.setAttribute("position",new Qn(wt,3)),this.setAttribute("normal",new Qn(Xt,3)),this.setAttribute("uv",new Qn(Ct,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let r,s,o,a,e=this.userData.parameters,t=Math.ceil(e.tubularSegments),n=e.radialSegments+1,i=Array.from(this.getIndex().array),l=6*(t-1)*e.radialSegments,c=t,d=c===t;for(let h=0;h<e.radialSegments;h++)r=c*n+h,s=r+1,o=(d?h:r)+n,a=(d?h+1:s)+n,i[l++]=r,i[l++]=s,i[l++]=o,i[l++]=s,i[l++]=a,i[l++]=o;return i.length=l,aB.array=i,aB.count=i.length,aB}},tne=class extends X5{constructor(e=1,t=.2,n=4){let i=(1+Math.sqrt(5))/2,o="IcosahedronGeometry";super([-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],o,e,t,n),this.type=o}static fromJSON(e){return new tne(e.radius,e.corner,e.cornerSides)}},Sp=new vn,lB=new Fs,eT=new oe,tT=class extends Sl{constructor(){super(),this.uuid=gi.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=(new ia).getNormalMatrix(e);for(let n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(e);for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(let s=0,o=r.vertexNormals.length;s<o;s++)r.vertexNormals[s].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return Sp.makeRotationX(e),this.applyMatrix4(Sp),this}rotateY(e){return Sp.makeRotationY(e),this.applyMatrix4(Sp),this}rotateZ(e){return Sp.makeRotationZ(e),this.applyMatrix4(Sp),this}translate(e,t,n){return Sp.makeTranslation(e,t,n),this.applyMatrix4(Sp),this}scale(e,t,n){return Sp.makeScale(e,t,n),this.applyMatrix4(Sp),this}lookAt(e){return lB.lookAt(e),lB.updateMatrix(),this.applyMatrix4(lB.matrix),this}fromBufferGeometry(e){let t=this,n=null!==e.index?e.index:void 0,i=e.attributes;if(void 0===i.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let r=i.position,s=i.normal,o=i.color,a=i.uv,l=i.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(let h=0;h<r.count;h++)t.vertices.push((new oe).fromBufferAttribute(r,h)),void 0!==o&&t.colors.push((new Di).fromBufferAttribute(o,h));function c(h,u,p,m){let v=void 0===o?[]:[t.colors[h].clone(),t.colors[u].clone(),t.colors[p].clone()],g=void 0===s?[]:[(new oe).fromBufferAttribute(s,h),(new oe).fromBufferAttribute(s,u),(new oe).fromBufferAttribute(s,p)],b=new cB(h,u,p,g,v,m);t.faces.push(b),void 0!==a&&t.faceVertexUvs[0].push([(new tt).fromBufferAttribute(a,h),(new tt).fromBufferAttribute(a,u),(new tt).fromBufferAttribute(a,p)]),void 0!==l&&t.faceVertexUvs[1].push([(new tt).fromBufferAttribute(l,h),(new tt).fromBufferAttribute(l,u),(new tt).fromBufferAttribute(l,p)])}let d=e.groups;if(d.length>0)for(let h=0;h<d.length;h++){let u=d[h],p=u.start;for(let v=p,g=p+u.count;v<g;v+=3)void 0!==n?c(n.getX(v),n.getX(v+1),n.getX(v+2),u.materialIndex):c(v,v+1,v+2,u.materialIndex)}else if(void 0!==n)for(let h=0;h<n.count;h+=3)c(n.getX(h),n.getX(h+1),n.getX(h+2));else for(let h=0;h<r.count;h+=3)c(h,h+1,h+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(eT).negate(),this.translate(eT.x,eT.y,eT.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new vn;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(i),this}computeFaceNormals(){let e=new oe,t=new oe;for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n],s=this.vertices[r.a],o=this.vertices[r.b];e.subVectors(this.vertices[r.c],o),t.subVectors(s,o),e.cross(t),e.normalize(),r.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let n=0,i=this.vertices.length;n<i;n++)t[n]=new oe;if(e){let n=new oe,i=new oe;for(let r=0,s=this.faces.length;r<s;r++){let o=this.faces[r],a=this.vertices[o.a],l=this.vertices[o.b];n.subVectors(this.vertices[o.c],l),i.subVectors(a,l),n.cross(i),t[o.a].add(n),t[o.b].add(n),t[o.c].add(n)}}else{this.computeFaceNormals();for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n];t[r.a].add(r.normal),t[r.b].add(r.normal),t[r.c].add(r.normal)}}for(let n=0,i=this.vertices.length;n<i;n++)t[n].normalize();for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n],s=r.vertexNormals;3===s.length?(s[0].copy(t[r.a]),s[1].copy(t[r.b]),s[2].copy(t[r.c])):(s[0]=t[r.a].clone(),s[1]=t[r.b].clone(),s[2]=t[r.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let n=this.faces[e],i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,n=this.faces.length;t<n;t++){let i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let r=0,s=i.vertexNormals.length;r<s;r++)i.__originalVertexNormals[r]?i.__originalVertexNormals[r].copy(i.vertexNormals[r]):i.__originalVertexNormals[r]=i.vertexNormals[r].clone()}let e=new tT;e.faces=this.faces;for(let t=0,n=this.morphTargets.length;t<n;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let r=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(let o=0,a=this.faces.length;o<a;o++){let l=new oe,c={a:new oe,b:new oe,c:new oe};r.push(l),s.push(c)}}let i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let r=0,s=this.faces.length;r<s;r++){let o=this.faces[r],l=i.vertexNormals[r];i.faceNormals[r].copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}}for(let t=0,n=this.faces.length;t<n;t++){let i=this.faces[t];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ra),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new $c),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,n=0){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);let i,r=this.vertices.length,s=this.vertices,o=e.vertices,a=this.faces,l=e.faces,c=this.colors,d=e.colors;void 0!==t&&(i=(new ia).getNormalMatrix(t));for(let h=0,u=o.length;h<u;h++){let p=o[h].clone();void 0!==t&&p.applyMatrix4(t),s.push(p)}for(let h=0,u=d.length;h<u;h++)c.push(d[h].clone());for(let h=0,u=l.length;h<u;h++){let m,v,p=l[h],g=p.vertexNormals,b=p.vertexColors,x=new cB(p.a+r,p.b+r,p.c+r);x.normal.copy(p.normal),void 0!==i&&x.normal.applyMatrix3(i).normalize();for(let w=0,P=g.length;w<P;w++)m=g[w].clone(),void 0!==i&&m.applyMatrix3(i).normalize(),x.vertexNormals.push(m);x.color.copy(p.color);for(let w=0,P=b.length;w<P;w++)v=b[w],x.vertexColors.push(v.clone());x.materialIndex=p.materialIndex+n,a.push(x)}for(let h=0,u=e.faceVertexUvs.length;h<u;h++){let p=e.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(let m=0,v=p.length;m<v;m++){let g=p[m],b=[];for(let x=0,w=g.length;x<w;x++)b.push(g[x].clone());this.faceVertexUvs[h].push(b)}}}mergeMesh(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)}mergeVertices(e=4){let t={},n=[],i=[],r=Math.pow(10,e);for(let a=0,l=this.vertices.length;a<l;a++){let c=this.vertices[a],d=Math.round(c.x*r)+"_"+Math.round(c.y*r)+"_"+Math.round(c.z*r);void 0===t[d]?(t[d]=a,n.push(this.vertices[a]),i[a]=n.length-1):i[a]=i[t[d]]}let s=[];for(let a=0,l=this.faces.length;a<l;a++){let c=this.faces[a];c.a=i[c.a],c.b=i[c.b],c.c=i[c.c];let d=[c.a,c.b,c.c];for(let h=0;h<3;h++)if(d[h]===d[(h+1)%3]){s.push(a);break}}for(let a=s.length-1;a>=0;a--){let l=s[a];this.faces.splice(l,1);for(let c=0,d=this.faceVertexUvs.length;c<d;c++)this.faceVertexUvs[c].splice(l,1)}let o=this.vertices.length-n.length;return this.vertices=n,o}setFromPoints(e){this.vertices=[];for(let t=0,n=e.length;t<n;t++){let i=e[t];this.vertices.push(new oe(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let a=0;a<t;a++)e[a]._id=a;e.sort(function n(a,l){return a.materialIndex-l.materialIndex});let s,o,i=this.faceVertexUvs[0],r=this.faceVertexUvs[1];i&&i.length===t&&(s=[]),r&&r.length===t&&(o=[]);for(let a=0;a<t;a++){let l=e[a]._id;s&&s.push(i[l]),o&&o.push(r[l])}s&&(this.faceVertexUvs[0]=s),o&&(this.faceVertexUvs[1]=o)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){let p=this.parameters;for(let m in p)void 0!==p[m]&&(e[m]=p[m]);return e}let t=[];for(let p=0;p<this.vertices.length;p++){let m=this.vertices[p];t.push(m.x,m.y,m.z)}let n=[],i=[],r={},s=[],o={},a=[],l={};for(let p=0;p<this.faces.length;p++){let m=this.faces[p],v=!0,g=!1,b=void 0!==this.faceVertexUvs[0][p],x=m.normal.length()>0,w=m.vertexNormals.length>0,P=1!==m.color.r||1!==m.color.g||1!==m.color.b,A=m.vertexColors.length>0,D=0;if(D=c(D,0,0),D=c(D,1,v),D=c(D,2,g),D=c(D,3,b),D=c(D,4,x),D=c(D,5,w),D=c(D,6,P),D=c(D,7,A),n.push(D),n.push(m.a,m.b,m.c),n.push(m.materialIndex),b){let R=this.faceVertexUvs[0][p];n.push(u(R[0]),u(R[1]),u(R[2]))}if(x&&n.push(d(m.normal)),w){let R=m.vertexNormals;n.push(d(R[0]),d(R[1]),d(R[2]))}if(P&&n.push(h(m.color)),A){let R=m.vertexColors;n.push(h(R[0]),h(R[1]),h(R[2]))}}function c(p,m,v){return v?p|1<<m:p&~(1<<m)}function d(p){let m=p.x.toString()+p.y.toString()+p.z.toString();return void 0!==r[m]||(r[m]=i.length/3,i.push(p.x,p.y,p.z)),r[m]}function h(p){let m=p.r.toString()+p.g.toString()+p.b.toString();return void 0!==o[m]||(o[m]=s.length,s.push(p.getHex())),o[m]}function u(p){let m=p.x.toString()+p.y.toString();return void 0!==l[m]||(l[m]=a.length/2,a.push(p.x,p.y)),l[m]}return e.data={},e.data.vertices=t,e.data.normals=i,s.length>0&&(e.data.colors=s),a.length>0&&(e.data.uvs=[a]),e.data.faces=n,e}clone(){return(new tT).copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let h=0,u=t.length;h<u;h++)this.vertices.push(t[h].clone());let n=e.colors;for(let h=0,u=n.length;h<u;h++)this.colors.push(n[h].clone());let i=e.faces;for(let h=0,u=i.length;h<u;h++)this.faces.push(i[h].clone());for(let h=0,u=e.faceVertexUvs.length;h<u;h++){let p=e.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(let m=0,v=p.length;m<v;m++){let g=p[m],b=[];for(let x=0,w=g.length;x<w;x++)b.push(g[x].clone());this.faceVertexUvs[h].push(b)}}let r=e.morphTargets;for(let h=0,u=r.length;h<u;h++){let p={};if(p.name=r[h].name,void 0!==r[h].vertices){p.vertices=[];for(let m=0,v=r[h].vertices.length;m<v;m++)p.vertices.push(r[h].vertices[m].clone())}if(void 0!==r[h].normals){p.normals=[];for(let m=0,v=r[h].normals.length;m<v;m++)p.normals.push(r[h].normals[m].clone())}this.morphTargets.push(p)}let s=e.morphNormals;for(let h=0,u=s.length;h<u;h++){let p={};if(void 0!==s[h].vertexNormals){p.vertexNormals=[];for(let m=0,v=s[h].vertexNormals.length;m<v;m++){let g=s[h].vertexNormals[m],b={};b.a=g.a.clone(),b.b=g.b.clone(),b.c=g.c.clone(),p.vertexNormals.push(b)}}if(void 0!==s[h].faceNormals){p.faceNormals=[];for(let m=0,v=s[h].faceNormals.length;m<v;m++)p.faceNormals.push(s[h].faceNormals[m].clone())}this.morphNormals.push(p)}let o=e.skinWeights;for(let h=0,u=o.length;h<u;h++)this.skinWeights.push(o[h].clone());let a=e.skinIndices;for(let h=0,u=a.length;h<u;h++)this.skinIndices.push(a[h].clone());let l=e.lineDistances;for(let h=0,u=l.length;h<u;h++)this.lineDistances.push(l[h]);let c=e.boundingBox;null!==c&&(this.boundingBox=c.clone());let d=e.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=(new nHe).fromGeometry(this),t=new Pi,n=new Float32Array(3*e.vertices.length);if(t.setAttribute("position",nT.call(new Bi(n,3),e.vertices)),e.normals.length>0){let i=new Float32Array(3*e.normals.length);t.setAttribute("normal",nT.call(new Bi(i,3),e.normals))}if(e.colors.length>0){let i=new Float32Array(3*e.colors.length);t.setAttribute("color",nne.call(new Bi(i,3),e.colors))}if(e.uvs.length>0){let i=new Float32Array(2*e.uvs.length);t.setAttribute("uv",ine.call(new Bi(i,2),e.uvs))}if(e.uvs2.length>0){let i=new Float32Array(2*e.uvs2.length);t.setAttribute("uv2",ine.call(new Bi(i,2),e.uvs2))}t.groups=e.groups;for(let i in e.morphTargets){let r=[],s=e.morphTargets[i];for(let o=0,a=s.length;o<a;o++){let l=s[o],c=new Qn(3*l.data.length,3);c.name=l.name,r.push(nT.call(c,l.data))}t.morphAttributes[i]=r}if(e.skinIndices.length>0){let i=new Qn(4*e.skinIndices.length,4);t.setAttribute("skinIndex",rne.call(i,e.skinIndices))}if(e.skinWeights.length>0){let i=new Qn(4*e.skinWeights.length,4);t.setAttribute("skinWeight",rne.call(i,e.skinWeights))}return null!==e.boundingSphere&&(t.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new Pi,n=e.geometry;if(e.isPoints||e.isLine){let i=new Qn(3*n.vertices.length,3),r=new Qn(3*n.colors.length,3);if(t.setAttribute("position",nT.call(i,n.vertices)),t.setAttribute("color",nne.call(r,n.colors)),n.lineDistances&&n.lineDistances.length===n.vertices.length){let s=new Qn(n.lineDistances.length,1);t.setAttribute("lineDistance",iHe.call(s,n.lineDistances))}null!==n.boundingSphere&&(t.boundingSphere=n.boundingSphere.clone()),null!==n.boundingBox&&(t.boundingBox=n.boundingBox.clone())}else e.isMesh&&(t=n.toBufferGeometry());return t}};tT.prototype.isGeometry=!0;var nHe=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let n,i,r,t=[],s=e.faces;for(i=0;i<s.length;i++){let o=s[i];o.materialIndex!==r&&(r=o.materialIndex,void 0!==n&&(n.count=3*i-n.start,t.push(n)),n={start:3*i,materialIndex:r})}void 0!==n&&(n.count=3*i-n.start,t.push(n)),this.groups=t}fromGeometry(e){let l,t=e.faces,n=e.vertices,i=e.faceVertexUvs,r=i[0]&&i[0].length>0,s=i[1]&&i[1].length>0,o=e.morphTargets,a=o.length;if(a>0){l=[];for(let g=0;g<a;g++)l[g]={name:o[g].name,data:[]};this.morphTargets.position=l}let h,c=e.morphNormals,d=c.length;if(d>0){h=[];for(let g=0;g<d;g++)h[g]={name:c[g].name,data:[]};this.morphTargets.normal=h}let u=e.skinIndices,p=e.skinWeights,m=u.length===n.length,v=p.length===n.length;n.length>0&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<t.length;g++){let b=t[g];this.vertices.push(n[b.a],n[b.b],n[b.c]);let x=b.vertexNormals;if(3===x.length)this.normals.push(x[0],x[1],x[2]);else{let P=b.normal;this.normals.push(P,P,P)}let w=b.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{let P=b.color;this.colors.push(P,P,P)}if(!0===r){let P=i[0][g];void 0!==P?this.uvs.push(P[0],P[1],P[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new tt,new tt,new tt))}if(!0===s){let P=i[1][g];void 0!==P?this.uvs2.push(P[0],P[1],P[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new tt,new tt,new tt))}for(let P=0;P<a;P++){let A=o[P].vertices;l[P].data.push(A[b.a],A[b.b],A[b.c])}for(let P=0;P<d;P++){let A=c[P].vertexNormals[g];h[P].data.push(A.a,A.b,A.c)}m&&this.skinIndices.push(u[b.a],u[b.b],u[b.c]),v&&this.skinWeights.push(p[b.a],p[b.b],p[b.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}},cB=class{constructor(e,t,n,i,r,s=0){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new oe,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new Di,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=s}clone(){return(new this.constructor).copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function iHe(e){return this.array.set(e),this}function nne(e){let t=this.array,n=0;for(let i=0,r=e.length;i<r;i++){let s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new Di),t[n++]=s.r,t[n++]=s.g,t[n++]=s.b}return this}function ine(e){let t=this.array,n=0;for(let i=0,r=e.length;i<r;i++){let s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new tt),t[n++]=s.x,t[n++]=s.y}return this}function nT(e){let t=this.array,n=0;for(let i=0,r=e.length;i<r;i++){let s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new oe),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z}return this}function rne(e){let t=this.array,n=0;for(let i=0,r=e.length;i<r;i++){let s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new mr),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z,t[n++]=s.w}return this}var rHe=["a","b","c"];function sHe(e,t){switch(t){case"c":return e.c;case"b":return e.b;default:return e.a}}function dB(e,t,n){let i=Math.min(e,t),r=Math.max(e,t);return n.get(i+"_"+r)}function hB(e,t,n,i,r,s){let c,o=Math.min(e,t),a=Math.max(e,t),l=o+"_"+a;i.has(l)?c=i.get(l):(c={a:n[o],b:n[a],newEdge:null,faces:[]},i.set(l,c)),c.faces.push(r),s[e].edges.push(c),s[t].edges.push(c)}function iT(e,t,n,i,r){e.push(new cB(t,n,i,void 0,void 0,r))}function kb(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function rT(e,t,n,i){e.push([t.clone(),n.clone(),i.clone()])}var $a=new oe,sne=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof Uo?e.shape:new Uo,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(e){let{width:t,height:n,spikes:i,cornerRadius:r,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}=e.parameters,l=e.shape,c=.5*t,d=.5*n,p=2*Math.PI/i;for(let v=0;v<i;v++){let g=p*v,b=0+Math.sin(g)*c,x=0+Math.cos(g)*d;l.addPoint(l.createPoint(b,x))}l.isClosed=!0;for(let v=0,g=l.points.length;v<g;v++)l.points[v].roundness=r;l.roundness=r,l.update();let m=e1.create({shape:l,parameters:{roundness:r,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}});return Object.assign(m,{userData:{...e,type:"PolygonGeometry"}})}};function bC(e,t,n){n.x=e.x*t.x,n.y=e.y,n.z=e.x*t.y}function uB(e,t,n,i,r,s){let o=t.clone().sub(e),a=n.clone().sub(e),l=o.angleTo(a);if(o.normalize(),a.normalize(),i===r){let c=o.add(a).normalize();s.copy(e).addScaledVector(c,i/Math.sin(l/2))}else{let c=o.angleTo(a);s.copy(e),s.addScaledVector(o,r/Math.sin(c)),s.addScaledVector(a,i/Math.sin(c))}}function dHe(e,t,n){let i=e.clone().sub(t),r=n.clone().sub(t);return i.projectOnVector(r),i.add(t)}var hHe=class extends Pi{constructor(e=.5,t=1,n=4,i=1,r=!1,s=0,o=4){super(),n=Math.floor(Math.max(3,n)),i=Math.floor(i),o=Math.floor(o);let Q,a=[],l=[],c=[],d=[],h=0,u=t/2,p=Math.PI/n,m=e*Math.cos(Math.PI/n),v=2*Math.PI/n,g=(n-2)*Math.PI/n,b=Math.PI-g,x=new oe(0,-u,0),w=new oe(0,u,0),P=new tt(e,-u),A=new tt(m,-u),D=new tt(0,w.y).sub(A),R=new tt(0,w.y).sub(P),N=new tt(D.y,-D.x).normalize(),k=new tt(R.y,-R.x).normalize(),L=e*Math.cos(Math.PI/n)*Math.tan((Math.PI-D.angle())/2)-1e-8;s=Math.min(s,L);{let me=new oe(N.x,N.y,0),Te=new oe(Math.cos(v)*me.x,me.y,Math.sin(v)*me.x);Q=me.angleTo(Te)}let le=s/Math.tan((Math.PI-D.angle())/2),ae=s/Math.tan((Math.PI-Q)/2),he=new oe;if(!r){l.push(x.x,x.y,x.z),c.push(0,-1,0),d.push(0,0);let me=h++,Te=[],Le=P.clone(),ke=le/Math.cos(Math.PI/n);Le.x-=ke;for(let Re=0;Re<n;Re++){let Qe=Re/n*Math.PI*2+p;bC(Le,new tt(Math.sin(Qe),Math.cos(Qe)),he),l.push(he.x,he.y,he.z),c.push(0,-1,0),d.push(0,0),Te.push(h++)}for(let Re=0;Re<Te.length;Re++)a.push(Te[Re],me,Te[(Re+1)%Te.length])}let xe=[];{let me=new oe,Te=new oe,Le=new oe,ke=new oe,Re=new oe,Qe=new oe;for(let Pe=0;Pe<n;Pe++){let Be=Pe/n*Math.PI*2+p,Fe=(Pe+.5)/n*Math.PI*2+p,Ze=(Pe+1)/n*Math.PI*2+p,$e=new tt(Math.sin(Be),Math.cos(Be)),ft=new tt(Math.sin(Fe),Math.cos(Fe)),it=new tt(Math.sin(Ze),Math.cos(Ze));bC(P,$e,Te),bC(P,it,Le),bC(N,ft,me),uB(w,Te,Le,ae,ae,ke),l.push(ke.x,ke.y,ke.z),uB(Te,w,Le,ae,le,Re),l.push(Re.x,Re.y,Re.z),uB(Le,Te,w,le,ae,Qe),l.push(Qe.x,Qe.y,Qe.z),c.push(me.x,me.y,me.z),c.push(me.x,me.y,me.z),c.push(me.x,me.y,me.z),d.push(0,0),d.push(0,0),d.push(0,0);let Nt=h++,nt=h++,st=h++;if(a.push(Nt,nt,st),s>0){{let wt=Te.clone().add(Le).multiplyScalar(.5),Xt=w.clone().sub(wt).normalize(),Ct=x.clone().sub(wt).normalize().add(Xt).normalize().multiplyScalar(-1);_e(wt,Qe.clone().sub(Re),Ct,D.angle())}let Ie,Yt;{let wt=new oe;bC(k,it,wt);let Xt=Qe.clone().add(ke).multiplyScalar(.5);Xt=dHe(Xt,Le,w);let Ct=Qe.clone().sub(ke);[Ie,Yt]=_e(Xt,Ct,wt,Q,ke.y)}{let wt=Ie,Xt=wt.clone().setY(0).normalize(),Ct=new oe(0,-1,0),Wt=Xt.clone().cross(Ct);be(wt,Xt,Ct,Wt)}xe.concat(Yt);{let wt=D.angle(),Xt=Math.PI-wt,Ct=w.clone();Ct.y-=s/Math.sin(wt-Math.PI/2);let Wt=new oe,Qt=[];for(let re=0;re<o;re++){let fe=[],He=Math.PI/2-Xt*re/o,ut=Math.cos(He),et=Math.sin(He),Lt=Fe;for(let $t=0;$t<=re;$t++){let qt=Math.cos(Lt),Bt=Math.sin(Lt);me.x=ut*Bt,me.y=et,me.z=ut*qt,Wt.copy(Ct).addScaledVector(me,s),l.push(Wt.x,Wt.y,Wt.z),c.push(me.x,me.y,me.z),d.push(0,0),fe.push(h++),Lt+=2*Math.PI/re/n}Qt.push(fe)}Yt.reverse(),Qt.push(Yt);let Ae=Qt.length-1;for(let re=0;re<Ae;re++){let fe=Qt[re],He=Qt[re+1],ut=fe.length-1;a.push(He[1],fe[0],He[0]);for(let et=1;et<=ut;et++)a.push(fe[et],fe[et-1],He[et]),a.push(He[et+1],fe[et],He[et])}}}}}function _e(me,Te,Le,ke,Re){let Qe=-ke/2,Pe=(Math.PI-ke)/2,Be=Te.clone().normalize().cross(Le);me.addScaledVector(Le,-s/Math.sin(Pe));let Fe=new oe,Ze=new oe,ft=h,it=[];for(let Nt=0;Nt<=o;Nt++){let nt=Qe+Nt/o*ke;Ze.set(0,0,0),Ze.addScaledVector(Be,Math.sin(nt)),Ze.addScaledVector(Le,Math.cos(nt));for(let st=0;st<=1;st++){let Ie=st/1-.5;if(Fe.copy(me),Fe.addScaledVector(Te,Ie),Fe.addScaledVector(Ze,s),null!=Re){let Yt=Math.max(0,Fe.y-Re);Fe.addScaledVector(Te,-Yt/Te.y)}l.push(Fe.x,Fe.y,Fe.z),c.push(Ze.x,Ze.y,Ze.z),d.push(0,0),0===st&&it.push(h),h++}}for(let Nt=0;Nt<o;Nt++)for(let nt=0;nt<1;nt++){let st=ft+nt+2*Nt,Ie=st+2,Yt=Ie+1,wt=st+1;a.push(st,Ie,wt),a.push(Ie,Yt,wt)}return[me.clone().addScaledVector(Te,.5),it]}function be(me,Te,Le,ke){let Re=Math.PI/2,Qe=R.angle()-Re,Pe=[],Be=new oe,Fe=new oe;for(let $e=0;$e<=o;$e++){let ft=[],it=$e/o;for(let Nt=0;Nt<=$e;Nt++){let nt=(($e?Nt/$e:0)-.5)*b,st=Math.cos(nt),Ie=Math.sin(nt),wt=(Re+Math.atan(Math.tan(Qe)*st))*it,Xt=Math.cos(wt),Ct=Math.sin(wt);Be.set(0,0,0),Be.addScaledVector(Te,Ct*st),Be.addScaledVector(Le,Xt),Be.addScaledVector(ke,Ct*Ie),Fe.copy(me).addScaledVector(Be,s),l.push(Fe.x,Fe.y,Fe.z),c.push(Be.x,Be.y,Be.z),d.push(0,0),ft.push(h++)}Pe.push(ft)}let Ze=Pe.length-1;for(let $e=0;$e<Ze;$e++){let ft=Pe[$e],it=Pe[$e+1],Nt=ft.length-1;a.push(ft[0],it[1],it[0]);for(let nt=1;nt<=Nt;nt++)a.push(ft[nt-1],ft[nt],it[nt]),a.push(ft[nt],it[nt+1],it[nt])}}this.setIndex(a),this.setAttribute("position",new Qn(l,3)),this.setAttribute("normal",new Qn(c,3)),this.setAttribute("uv",new Qn(d,2))}},one=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),i=Object.assign(t?.ui??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof Uo?e.shape:new Uo,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)}),ui:i}}static build(e){let t=e.shape,{width:n,height:i,cornerRadius:r,cornerType:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=e.parameters,c={x:.5*n,y:.5*i},d={x:-c.x,y:-c.y},h={x:c.x,y:c.y};function u(P,A,D){return A>n&&D>i?Math.min(P*n/A,P*i/D):A>n?P*n/A:D>i?P*i/D:P}let p=[];p[0]=0===r[0]?0:u(r[0],r[0]+r[3],r[0]+r[1]),p[1]=0===r[1]?0:u(r[1],r[1]+r[2],r[1]+r[0]),p[2]=0===r[2]?0:u(r[2],r[2]+r[1],r[2]+r[3]),p[3]=0===r[3]?0:u(r[3],r[3]+r[0],r[3]+r[2]);let m=d.x,v=h.x,g=h.y,b=d.y;t.addPoint(t.createPoint(m,g)),t.addPoint(t.createPoint(v,g)),t.addPoint(t.createPoint(v,b)),t.addPoint(t.createPoint(m,b)),t.isClosed=!0;let x=!0;for(let P=0,A=t.points.length;P<A;P++)t.points[P].roundness=p[P],P>0&&p[P]!==p[P-1]&&(x=!1);x&&(t.roundness=p[0]),t.useCubicForRoundedCorners=1!==s,t.update();let w=e1.create({shape:t,parameters:{depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(w,{userData:{...e,type:"RectangleGeometry"}})}},mHe=class extends Pi{constructor(e=1,t=1,n=1,i=90,r=10,s=24){super(),this.type="BackdropGeometry";let o=[],a=[],l=[],c=.001;0==r&&(s=1),s=Math.max(1,Math.floor(s)),r=Math.min(r,100),i=Math.min(180-c,i),i*=Math.PI/180;let d=[],h=Math.PI/2,u=(Ze=0,$e=0,ft=0)=>new oe(Ze,$e,ft),p=u(),m=u(),[v,g,b]=[t/2,e/2,n/2],x=-g,w=+g,[P,A,D]=[u(x,-v,+b),u(x,-v,-b),u(x,+v,-b)],R=(Ze,$e=!1)=>Math.sin(Ze-Math.PI/(+$e+1)),N=(Ze,$e=!1)=>Math.cos(Ze-Math.PI/(+$e+1));D.y=Math.sin(i)*t-v;let k=Math.cos(i)*t-b,L=P.z-c;i<=h?(D.z=Math.min(k,L),D.z==L&&(D.y-=(k-L)/Math.tan(h-i))):A.z=Math.min(A.z-k-b,P.z-c),p.subVectors(P,A),m.subVectors(D,A);let Q=Math.min(p.length(),m.length())*r/100,le=Q*Math.tan(i/2),ae=Q/Math.cos(i/2),he=p.clone().normalize().add(m.normalize()).setLength(ae).add(A);p.set(0,R(i,!0),N(i,!0)),d.push([D,p.clone()]);let xe=(Math.PI-i)/s;for(let Ze=0;Ze<=s;Ze++){let $e=h+i+Ze*xe;p.set(0,Math.sin($e)*le,Math.cos($e)*le),p.add(he),m.set(0,R($e),N($e)),d.push([p.clone(),m.clone()])}d.push([P,u(0,1,0)]);let _e=Math.sin(xe/2)*le*2,be=d.length-1,me=d[0][0].distanceTo(d[1][0]),Le=me+_e*s+d[be-1][0].distanceTo(d[be][0]);d[0].push(1);for(let Ze=0;Ze<=s;Ze++)d[Ze+1].push(1-(me+Ze*_e)/Le);d[be].push(0);let Pe,Be,Fe,[ke,Re,Qe]=d[0];for(let Ze=1;Ze<d.length;Ze++)[Pe,Be,Fe]=d[Ze],o.push(x,ke.y,ke.z,x,Pe.y,Pe.z,w,ke.y,ke.z,w,ke.y,ke.z,x,Pe.y,Pe.z,w,Pe.y,Pe.z),a.push(0,Re.y,Re.z,0,Be.y,Be.z,0,Re.y,Re.z,0,Re.y,Re.z,0,Be.y,Be.z,0,Be.y,Be.z),l.push(0,Qe,0,Fe,1,Qe,1,Qe,0,Fe,1,Fe),[ke,Re,Qe]=[Pe,Be,Fe];this.setAttribute("position",new Qn(o,3)),this.setAttribute("normal",new Qn(a,3)),this.setAttribute("uv",new Qn(l,2))}},ane=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Uo?e.shape:new Uo,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(e){let{width:t,height:n,innerRadiusPercent:i,spikes:r,cornerRadius:s,angle:o,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}=e.parameters,d=e.shape,h=.5*t,u=.5*n,v=o*Math.PI/360/r,g=Math.PI/2*3*-1,b=h*i/100,x=u*i/100;if(3===r&&50===i){v=2*Math.PI/r;for(let P=0;P<r;P++){let A=v*P,D=0+Math.sin(A)*h,R=0+Math.cos(A)*u;d.addPoint(d.createPoint(D,R))}}else for(let P=0;P<r;P++){let A=0+Math.cos(g)*h,D=0+Math.sin(g)*u;d.addPoint(d.createPoint(A,D)),g+=v,A=0+Math.cos(g)*b,D=0+Math.sin(g)*x,d.addPoint(d.createPoint(A,D)),g+=v}d.isClosed=!0;for(let P=0,A=d.points.length;P<A;P++)d.points[P].roundness=s;d.roundness=s,d.update();let w=e1.create({shape:d,parameters:{roundness:s,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(w,{userData:{...e,type:"StarGeometry"}})}},Zt=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+Zt.version}static addUnaryOp(e){return Zt.max_unop_len=Math.max(e.length,Zt.max_unop_len),Zt.unary_ops[e]=1,Zt}static addBinaryOp(e,t,n){return Zt.max_binop_len=Math.max(e.length,Zt.max_binop_len),Zt.binary_ops[e]=t,n?Zt.right_associative.add(e):Zt.right_associative.delete(e),Zt}static addIdentifierChar(e){return Zt.additional_identifier_chars.add(e),Zt}static addLiteral(e,t){return Zt.literals[e]=t,Zt}static removeUnaryOp(e){return delete Zt.unary_ops[e],e.length===Zt.max_unop_len&&(Zt.max_unop_len=Zt.getMaxKeyLen(Zt.unary_ops)),Zt}static removeAllUnaryOps(){return Zt.unary_ops={},Zt.max_unop_len=0,Zt}static removeIdentifierChar(e){return Zt.additional_identifier_chars.delete(e),Zt}static removeBinaryOp(e){return delete Zt.binary_ops[e],e.length===Zt.max_binop_len&&(Zt.max_binop_len=Zt.getMaxKeyLen(Zt.binary_ops)),Zt.right_associative.delete(e),Zt}static removeAllBinaryOps(){return Zt.binary_ops={},Zt.max_binop_len=0,Zt}static removeLiteral(e){return delete Zt.literals[e],Zt}static removeAllLiterals(){return Zt.literals={},Zt}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new Zt(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(t=>t.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return Zt.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!Zt.binary_ops[String.fromCharCode(e)]||Zt.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return Zt.isIdentifierStart(e)||Zt.isDecimalDigit(e)}throwError(e){let t=new Error(e+" at character "+this.index);throw t.index=this.index,t.description=e,t}runHook(e,t){if(Zt.hooks[e]){let n={context:this,node:t};return Zt.hooks.run(e,n),n.node}return t}searchHook(e){if(Zt.hooks[e]){let t={context:this};return Zt.hooks[e].find(function(n){return n.call(t.context,t),t.node}),t.node}}gobbleSpaces(){let e=this.code;for(;e===Zt.SPACE_CODE||e===Zt.TAB_CODE||e===Zt.LF_CODE||e===Zt.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let e=this.gobbleExpressions();return this.runHook("after-all",1===e.length?e[0]:{type:Zt.COMPOUND,body:e})}gobbleExpressions(e){let n,i,t=[];for(;this.index<this.expr.length;)if(n=this.code,n===Zt.SEMCOL_CODE||n===Zt.COMMA_CODE)this.index++;else if(i=this.gobbleExpression())t.push(i);else if(this.index<this.expr.length){if(n===e)break;this.throwError('Unexpected "'+this.char+'"')}return t}gobbleExpression(){let e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,Zt.max_binop_len),t=e.length;for(;t>0;){if(Zt.binary_ops.hasOwnProperty(e)&&(!Zt.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!Zt.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){let e,t,n,i,r,s,o,a,l;if(s=this.gobbleToken(),!s||(t=this.gobbleBinaryOp(),!t))return s;for(r={value:t,prec:Zt.binaryPrecedence(t),right_a:Zt.right_associative.has(t)},o=this.gobbleToken(),o||this.throwError("Expected expression after "+t),i=[s,r,o];t=this.gobbleBinaryOp();){if(n=Zt.binaryPrecedence(t),0===n){this.index-=t.length;break}r={value:t,prec:n,right_a:Zt.right_associative.has(t)},l=t;let c=d=>r.right_a&&d.right_a?n>d.prec:n<=d.prec;for(;i.length>2&&c(i[i.length-2]);)o=i.pop(),t=i.pop().value,s=i.pop(),e={type:Zt.BINARY_EXP,operator:t,left:s,right:o},i.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+l),i.push(r,e)}for(a=i.length-1,e=i[a];a>1;)e={type:Zt.BINARY_EXP,operator:i[a-1].value,left:i[a-2],right:e},a-=2;return e}gobbleToken(){let e,t,n,i;if(this.gobbleSpaces(),i=this.searchHook("gobble-token"),i)return this.runHook("after-token",i);if(e=this.code,Zt.isDecimalDigit(e)||e===Zt.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===Zt.SQUOTE_CODE||e===Zt.DQUOTE_CODE)i=this.gobbleStringLiteral();else if(e===Zt.OBRACK_CODE)i=this.gobbleArray();else{for(t=this.expr.substr(this.index,Zt.max_unop_len),n=t.length;n>0;){if(Zt.unary_ops.hasOwnProperty(t)&&(!Zt.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!Zt.isIdentifierPart(this.expr.charCodeAt(this.index+t.length)))){this.index+=n;let r=this.gobbleToken();return r||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:Zt.UNARY_EXP,operator:t,argument:r,prefix:!0})}t=t.substr(0,--n)}Zt.isIdentifierStart(e)?(i=this.gobbleIdentifier(),Zt.literals.hasOwnProperty(i.name)?i={type:Zt.LITERAL,value:Zt.literals[i.name],raw:i.name}:i.name===Zt.this_str&&(i={type:Zt.THIS_EXP})):e===Zt.OPAREN_CODE&&(i=this.gobbleGroup())}return i?(i=this.gobbleTokenProperty(i),this.runHook("after-token",i)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let t=this.code;for(;t===Zt.PERIOD_CODE||t===Zt.OBRACK_CODE||t===Zt.OPAREN_CODE||t===Zt.QUMARK_CODE;){let n;if(t===Zt.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==Zt.PERIOD_CODE)break;n=!0,this.index+=2,this.gobbleSpaces(),t=this.code}this.index++,t===Zt.OBRACK_CODE?(e={type:Zt.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},this.gobbleSpaces(),t=this.code,t!==Zt.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):t===Zt.OPAREN_CODE?e={type:Zt.CALL_EXP,arguments:this.gobbleArguments(Zt.CPAREN_CODE),callee:e}:(t===Zt.PERIOD_CODE||n)&&(n&&this.index--,this.gobbleSpaces(),e={type:Zt.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),n&&(e.optional=!0),this.gobbleSpaces(),t=this.code}return e}gobbleNumericLiteral(){let t,n,e="";for(;Zt.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(this.code===Zt.PERIOD_CODE)for(e+=this.expr.charAt(this.index++);Zt.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(t=this.char,"e"===t||"E"===t){for(e+=this.expr.charAt(this.index++),t=this.char,("+"===t||"-"===t)&&(e+=this.expr.charAt(this.index++));Zt.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);Zt.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+e+this.char+")")}return n=this.code,Zt.isIdentifierStart(n)?this.throwError("Variable names cannot start with a number ("+e+this.char+")"):(n===Zt.PERIOD_CODE||1===e.length&&e.charCodeAt(0)===Zt.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:Zt.LITERAL,value:parseFloat(e),raw:e}}gobbleStringLiteral(){let e="",t=this.index,n=this.expr.charAt(this.index++),i=!1;for(;this.index<this.expr.length;){let r=this.expr.charAt(this.index++);if(r===n){i=!0;break}if("\\"===r)switch(r=this.expr.charAt(this.index++),r){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=r}else e+=r}return i||this.throwError('Unclosed quote after "'+e+'"'),{type:Zt.LITERAL,value:e,raw:this.expr.substring(t,this.index)}}gobbleIdentifier(){let e=this.code,t=this.index;for(Zt.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,Zt.isIdentifierPart(e));)this.index++;return{type:Zt.IDENTIFIER,name:this.expr.slice(t,this.index)}}gobbleArguments(e){let t=[],n=!1,i=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let r=this.code;if(r===e){n=!0,this.index++,e===Zt.CPAREN_CODE&&i&&i>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}if(r===Zt.COMMA_CODE){if(this.index++,i++,i!==t.length)if(e===Zt.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===Zt.CBRACK_CODE)for(let s=t.length;s<i;s++)t.push(null)}else if(t.length!==i&&0!==i)this.throwError("Expected comma");else{let s=this.gobbleExpression();(!s||s.type===Zt.COMPOUND)&&this.throwError("Expected comma"),t.push(s)}}return n||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;let e=this.gobbleExpressions(Zt.CPAREN_CODE);if(this.code===Zt.CPAREN_CODE)return this.index++,1===e.length?e[0]:!!e.length&&{type:Zt.SEQUENCE_EXP,expressions:e};this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:Zt.ARRAY_EXP,elements:this.gobbleArguments(Zt.CBRACK_CODE)}}},CHe=new class{add(e,t,n){if("string"!=typeof arguments[0])for(let i in arguments[0])this.add(i,arguments[0][i],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(i){this[i]=this[i]||[],t&&this[i][n?"unshift":"push"](t)},this)}run(e,t){this[e]=this[e]||[],this[e].forEach(function(n){n.call(t&&t.context?t.context:t,t)})}};Object.assign(Zt,{hooks:CHe,plugins:new class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(t=>{if("object"!=typeof t||!t.name||!t.init)throw new Error("Invalid JSEP plugin format");this.registered[t.name]||(t.init(this.jsep),this.registered[t.name]=t)})}}(Zt),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"}),Zt.max_unop_len=Zt.getMaxKeyLen(Zt.unary_ops),Zt.max_binop_len=Zt.getMaxKeyLen(Zt.binary_ops);var Nb=e=>new Zt(e).parse();Object.getOwnPropertyNames(Zt).forEach(e=>{void 0===Nb[e]&&"prototype"!==e&&(Nb[e]=Zt[e])}),Nb.Jsep=Zt;var EHe={name:"ternary",init(e){e.hooks.add("after-expression",function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;let n=t.node,i=this.gobbleExpression();if(i||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let r=this.gobbleExpression();if(r||this.throwError("Expected expression"),t.node={type:"ConditionalExpression",test:n,consequent:i,alternate:r},n.operator&&e.binary_ops[n.operator]<=.9){let s=n;for(;s.right.operator&&e.binary_ops[s.right.operator]<=.9;)s=s.right;t.node.test=s.right,s.right=t.node,t.node=n}}else this.throwError("Expected :")}})}};Nb.plugins.register(EHe);var OHe=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],AHe=["0","1","2","3","4","5","6","7","8","9","."],THe=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function DHe(e){return"string"==typeof e&&!isNaN(e)&&!isNaN(parseFloat(e))}function lne(e,t,n="number"){let r,s,i="";for(let o=0;o<e.length;o++){let a=e[o];if("id"in a){if(o>0&&"id"in e[o-1])return void console.error("Two variables in a row",e);let c=t.getVariable(a.id),d=Yd.getDisplayedValue(c);"number"===n&&Yd.isTextValue(c)&&Array.isArray(c.textValue)&&1===c.textValue.length?d=parseFloat(d).toString():"boolean"===n&&Yd.isBoolean(c)?d=c?"true":"false":"boolean"===n&&Yd.isTextValue(c)&&!Array.isArray(c.textValue)&&(d='"'+d+'"'),i+=d}else"string"!==n?"and"!==a.name?"or"!==a.name?"True"!==a.name?"False"!==a.name?"boolean"!==n||DHe(a.name)||AHe.includes(a.name)||OHe.includes(a.name)||THe.includes(a.name.replace(/\($/g,""))?i+=a.name:i+='"'+a.name+'"':i+="false":i+="true":i+="||":i+="&&":('"'!==a.name&&"+"!==a.name&&(i+=a.name),"+"===a.name&&"\\"===i[i.length-1]&&(i=i.slice(0,-1)+a.name))}if("string"===n)return i;if(0===e.length){if("number"===n)return 0;if("boolean"===n)return!1}try{r=Nb(i)}catch(o){return void console.error(i,o)}try{s=fs(r)}catch(o){console.error(i,r,o)}return s}function fs(e){switch(e.type){case"BinaryExpression":switch(e.operator){case"==":return Number(fs(e.left)===fs(e.right));case"!=":return Number(fs(e.left)!==fs(e.right));case">":return Number(fs(e.left)>fs(e.right));case">=":return Number(fs(e.left)>=fs(e.right));case"<":return Number(fs(e.left)<fs(e.right));case"<=":return Number(fs(e.left)<=fs(e.right));case"+":return fs(e.left)+fs(e.right);case"-":return fs(e.left)-fs(e.right);case"*":return fs(e.left)*fs(e.right);case"/":return fs(e.left)/fs(e.right);case"%":return fs(e.left)%fs(e.right);case"&&":return fs(e.left)&&fs(e.right);case"||":return fs(e.left)||fs(e.right);case"^":return Math.pow(fs(e.left),fs(e.right));default:throw new Error("Unknown operator: "+e.operator)}case"UnaryExpression":switch(e.operator){case"-":return-fs(e.argument);case"!":return Number(!fs(e.argument));default:throw new Error("Unknown operator: "+e.operator)}case"Identifier":throw new Error("Unknown identifier: "+e.name);case"Literal":return e.value;case"CallExpression":if("Identifier"===e.callee.type){if("random"===e.callee.name){let t=0,n=1;if(e.arguments.length>=1)try{t=fs(e.arguments[0])}catch(i){console.warn(i)}if(e.arguments.length>=2)try{n=fs(e.arguments[1])}catch(i){console.warn(i)}return t=Math.min(n,t),n=Math.max(n,t),t+Math.random()*(n-t)}return Math[e.callee.name].apply(null,e.arguments.map(fs))}throw new Error("Unknown node");default:throw new Error("Unknown node type: "+e.type)}}Nb.addBinaryOp("^",11,!0);var IHe=new vn,RHe=new vn,LHe=class extends Pi{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&1===this.inputs.parameters.extrusion.depth}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&1===e.depth&&function xHe(e,t){let n=2*Math.PI;return(e%n+n)%n==(t%n+n)%n}(e.twist,0)&&e.startScale===e.endScale)}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:n,offset:i}=this.inputs.parameters.extrusion;n=Math.max(0,Math.min(n,1)),i=Math.max(0,Math.min(i,1));let r=this.inputs.path.isClosed?e.length:e.length-1,s=Math.floor(i*r),o=this.inputs.path.isClosed?Math.ceil((n+i)*r):Math.ceil(Math.min(1,n+i)*r),a=Math.min(Math.max(2,o-s+1),r+2),l=[],c=[];for(let be=0;be<a;be++){let me=this.inputs.path.isClosed?(be+s)%e.length:Math.min(be+s,e.length-1);l.push(e[me].clone()),c.push(t[me].clone())}let d=(be,me,Te)=>{l[be]=l[be].clone().lerp(l[me],Te),c[be]=function kHe(e,t,n){let i=[new oe,new oe,new oe],r=[new oe,new oe,new oe];return e.extractBasis(i[0],i[1],i[2]),t.extractBasis(r[0],r[1],r[2]),i.forEach((s,o)=>{let a=r[o],l=gi.lerp(s.length(),a.length(),n);s.lerp(a,n).setLength(l)}),(new vn).makeBasis(i[0],i[1],i[2])}(c[be],c[me],Te)},h=0,u=i*r%1;(!this.inputs.path.isClosed||n<=1)&&(u||0===i)&&(h=u,d(0,1,h));let p=0,m=(i+n)*r%1;if((this.inputs.path.isClosed&&n<=1||!this.inputs.path.isClosed&&i+n<1)&&m&&(p=m,d(l.length-1,l.length-2,1-p)),0===n){let be=l.length-1;l[be].copy(l[0]),c[be].copy(c[0])}this._applyPathModifiers(c,h,p);let{bevel:v,bevelSides:g}=this.inputs.parameters.extrusion,b=v>0?this.inputs.parameters.extrusion.capType:"flat",x=5;"Custom"===this.inputs.parameters.extrusion.shape.type&&(x="low"===this.inputs.parameters.extrusion.shape.shapeQuality?5:12);let R,{regions:w,infos:P,vertices:A}=this._computeShapePoints(x),D=0;"round"===b&&(R=new sB(this.inputs.shapeData,2*v,v,x,g,void 0,!0),D=R.getAttribute("position").count);let N=0,k=0;P.sort((be,me)=>be.start-me.start),P.forEach(be=>{be.verticesStart=N,be.verticesCount=be.continuous.reduce((me,Te,Le)=>me+(0!==Le&&Te?1:2),0),k+=be.verticesCount,N=k});let Q,L=k*a,le=0;if(this._isOpenEnded()&&"flat"===b){try{Q=zg({windingRule:Bs.ODD,elementType:Sa.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:w})}catch{Q=qte}le=Q.vertexCount}let ae=L+2*le+2*D,he=L+2*le,xe={positions:new Float32Array(3*ae),normals:new Float32Array(3*ae),uvs:new Float32Array(2*ae)},_e=[];if(P.forEach(be=>{this._extrudeRegion(be,A,c,l,xe,_e,this._isGeometryClosed()&&!this._isOpenEnded())}),Q&&(this._closeEnd(Q,L,_e,xe,c[0],l[0],!1),this._closeEnd(Q,L+le,_e,xe,c[c.length-1],l[l.length-1],!0)),R){xe.positions.set(R.getAttribute("position").array,3*he),xe.normals.set(R.getAttribute("normal").array,3*he),xe.uvs.set(R.getAttribute("uv").array,2*he);let be=_e.length;_e.push(...R.getIndex().array.map(Le=>Le+he)),he+=D,xe.positions.set(R.getAttribute("position").array,3*he),xe.normals.set(R.getAttribute("normal").array,3*he),xe.uvs.set(R.getAttribute("uv").array,2*he);let me=_e.length;_e.push(...R.getIndex().array.map(Le=>Le+he)),this.setAttribute("position",new Bi(xe.positions,3)),this.setAttribute("normal",new Bi(xe.normals,3)),this.setAttribute("uv",new Bi(xe.uvs,2)),this.setIndex(_e);let Te=IHe;Te.copy(c[c.length-1]).setPosition(l[l.length-1]),this.applyMatrix4OnRange(Te,he,ae),Te.copy(c[0]).setPosition(l[0]).multiply(RHe.makeScale(1,1,-1)),this.applyMatrix4OnRange(Te,he-D,he),this.reverseIndicesOnRange(be,me)}else this.setAttribute("position",new Bi(xe.positions,3)),this.setAttribute("normal",new Bi(xe.normals,3)),this.setAttribute("uv",new Bi(xe.uvs,2)),this.setIndex(_e)}_extractPathPoints(){let e=Ete(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach(n=>{t[t.length-1].distanceToSquared(n)>.001&&t.push(n)}),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(e){let t=[],n=e.length,i=this.inputs.path.isClosed,r=new oe,s=new oe,o=new oe,a=new oe,l=new oe(0,1,0);for(let m=0;m<n;m++){let g,b,v=e[m];g=0===m?i?e[e.length-2]:v.clone().multiplyScalar(2).sub(e[1]):e[m-1],b=m===n-1?i?e[1]:v.clone().multiplyScalar(2).sub(e[m-1]):e[m+1];let x=v.clone().sub(g).normalize(),w=b.clone().sub(v).normalize(),P=x.clone().add(w).normalize();o.copy(P),0===m&&(P.equals(l)||P.clone().negate().equals(l))&&l.set(0,0,1);let A=l.clone().cross(P).normalize(),D=P.clone().cross(A).normalize();l.copy(D),a.copy(A),0===m&&(r.copy(D),s.copy(P));let R=(new vn).makeBasis(A,D,P);t.push(R)}let c=i?s:o,d=i?r:new oe(0,1,0),h=c.clone().cross(a).normalize(),u=Math.acos(d.dot(h));if(isNaN(u))return t;let p=d.clone().cross(h);c.dot(p)>0&&(u*=-1);for(let m=1;m<t.length;m++){let v=(new vn).makeRotationZ(u*m/t.length);t[m].multiply(v)}return t}_applyPathModifiers(e,t,n){let i=e.length,{angle:r,twist:s,startScale:o,endScale:a}=this.inputs.parameters.extrusion,l=new vn,c=new vn;return e.forEach((d,h)=>{let u=0===h?0:h===i-1?1:(h-t)/(i-(0===n?0:1)-(t+(1-n)));l.makeRotationZ(gi.lerp(r,r+s,u)*gi.DEG2RAD);let p=gi.lerp(o,a,u);c.makeScale(p,p,p),d.multiply(l).multiply(c)}),e}_computeShapePoints(e=12,t=Bs.ODD){let s,o,n=this.inputs.shapeData,i=n.extractShapePointsToFlatArray([],e),r=n.shapeHoles.map(p=>{let m=p.extractShapePointsToFlatArray([],e),v=[];for(let g=m.length-1;g>=1;g-=2)v.push(m[g-1],m[g-0]);return v});try{s=zg({windingRule:t,elementType:Sa.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[i]})}catch{s=iB}try{o=zg({windingRule:Bs.ODD,elementType:Sa.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...r]})}catch{o=Wte}if(!s)throw new Error("error generating geometry");let a=s.elementCount;if(o){s.elementCount+=o.elementCount;for(let p=0;p<o.elements.length;p++)s.elements.push(o.elements[p]+(p%2==0?s.vertexCount:0));for(let p=0;p<o.vertexIndices.length;p++)s.vertexIndices.push(o.vertexIndices[p]+s.vertexCount);for(let p=0;p<o.vertices.length;p++)s.vertices.push(o.vertices[p])}let l=1/0,c=-1/0,d=1/0,h=-1/0;for(let p=0,m=s.vertexCount;p<m;p++){let v=2*p,g=s.vertices[v+0],b=s.vertices[v+1];g<l&&(l=g),g>c&&(c=g),b<d&&(d=b),b>h&&(h=b)}let u=[];for(let p=s.elementCount-1;p>=0;p--){let m=p>=a,v=2*p,g=s.elements[v+0],b=s.elements[v+1],x=g+b,w={start:g,count:b,normals:[],isHole:m,continuous:[],verticesStart:0,verticesCount:0};u.push(w);let P=g,A=x-1,D=g+1,R=n.roundedCurves.length;do{let N=P-g,Q=s.vertices[2*P+0],le=s.vertices[2*P+1],ae=s.vertices[2*D+0],he=s.vertices[2*D+1],xe=Q-s.vertices[2*A+0],_e=le-s.vertices[2*A+1],be=Math.sqrt(xe*xe+_e*_e);xe/=be,_e/=be;let me=Q-ae,Te=le-he,Le=Math.sqrt(me*me+Te*Te);me/=Le,Te/=Le,w.normals[2*N+0]=-Te,w.normals[2*N+1]=me;let ke=s.vertexIndices[P];if(Array.isArray(ke))w.continuous[N]=!1;else{let[Re,Qe]=n.getCurveIndexFromVertexId(ke-1,!0);if(Qe>0&&Qe<1)w.continuous[N]=!0;else{let Pe=1===Qe?Re+1:Re-1;Pe=(Pe+R)%R;let Be=1===Qe?0:1,Fe=n.roundedCurves[Re].getTangent(Qe),Ze=n.roundedCurves[Pe].getTangent(Be);w.continuous[N]=Fe.dot(Ze)>.95}}m&&(w.normals[2*N+0]*=-1,w.normals[2*N+1]*=-1),[A,P,D]=[P,D,D+1],D>=x&&(D-=b)}while(D!==g+1)}return{regions:[i,...r],infos:u,vertices:s.vertices}}_insertVertex(e,t,n,i,r){let s=2*t,o=3*t;e.positions[o+0]=n.x,e.positions[o+1]=n.y,e.positions[o+2]=n.z,e.normals[o+0]=i.x,e.normals[o+1]=i.y,e.normals[o+2]=i.z,e.uvs[s+0]=r.x,e.uvs[s+1]=r.y}_extrudeRegion(e,t,n,i,r,s,o){let a=new oe,l=new oe,c=new oe,d=new oe,h=new tt;n.forEach((p,m)=>{let v=i[m],g=e.verticesStart*n.length+e.verticesCount*m;for(let b=0;b<e.count;b++){let x=2*(e.start+b);if(a.set(t[x+0],t[x+1],0),c.copy(a).applyMatrix4(p).add(v),e.continuous[b])d.set(e.normals[2*b+0],e.normals[2*b+1],0);else{let w=0===b?2*(e.start+e.count-1):x-2;l.set(t[w+0],t[w+1],0),d.copy(a).sub(l),d.set(-d.y,d.x,0),e.isHole||d.negate()}if(d.applyMatrix4(p).normalize(),h.set(0===b?1:b/e.count,m/(n.length-1)),this._insertVertex(r,g,c,d,h),g++,!e.continuous[b]||0===b){if(0===b)d.set(e.normals[2*b+0],e.normals[2*b+1],0),h.set(0,m/(n.length-1));else{let w=b===e.count-1?2*e.start:x+2;l.set(t[w+0],t[w+1],0),d.copy(l).sub(a),d.set(-d.y,d.x,0),e.isHole||d.negate()}d.applyMatrix4(p).normalize(),this._insertVertex(r,g,c,d,h),g++}}});let u=n.length-1;for(let p=0;p<u;p++){let m=e.verticesStart*n.length+e.verticesCount*p,v=e.verticesStart*n.length+e.verticesCount*(p+1),g=0;for(let b=0;b<e.count;b++){(!e.continuous[b]||0===b)&&g++;let x=b===e.count-1?0:g+1,w=m+g,P=m+x,A=v+x,D=v+g;e.isHole?s.push(w,A,P,w,D,A):s.push(w,P,A,w,A,D),g++}}}_closeEnd(e,t,n,i,r,s,o){let a=e.vertexCount,l=new oe(0,0,o?-1:1).applyMatrix4(r),c=new oe,d=new tt;for(let u=0;u<a;u++){let p=2*u;c.set(e.vertices[p+0],e.vertices[p+1],0).applyMatrix4(r).add(s),this._insertVertex(i,t+u,c,l,d)}let h=e.elements;for(let u=0;u<e.elementCount;u++){let p=3*u;n.push(h[p+0]+t,h[p+(o?1:2)]+t,h[p+(o?2:1)]+t)}}applyMatrix4OnRange(e,t,n){let s,o,a,l,i=e.elements,r=(new ia).getNormalMatrix(e).elements,c=this.attributes.position,d=this.attributes.normal;if(!c||!d)return;let h=c.array,u=d.array,p=c.itemSize;for(let m=t*p,v=n*p;m<v;m+=p)s=h[m+0],o=h[m+1],a=h[m+2],l=1/(i[3]*s+i[7]*o+i[11]*a+i[15]),h[m+0]=(i[0]*s+i[4]*o+i[8]*a+i[12])*l,h[m+1]=(i[1]*s+i[5]*o+i[9]*a+i[13])*l,h[m+2]=(i[2]*s+i[6]*o+i[10]*a+i[14])*l,s=u[m+0],o=u[m+1],a=u[m+2],u[m+0]=r[0]*s+r[3]*o+r[6]*a,u[m+1]=r[1]*s+r[4]*o+r[7]*a,u[m+2]=r[2]*s+r[5]*o+r[8]*a;c.needsUpdate=!0,d.needsUpdate=!0}reverseIndicesOnRange(e,t){let n=this.index;if(n){for(let i=e;i<t;i+=3){let r=n.getX(i),s=n.getX(i+1),o=n.getX(i+2);n.setXYZ(i,o,s,r)}n.needsUpdate=!0}}};function cne(){let e=new Pi;return e.setAttribute("position",new Bi(new Float32Array([]),3)),e.setIndex(new Bi(new Uint16Array([]),1)),e}var hne,sT,FHe=cne().attributes,dne=class extends Pi{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,FHe),this.userData={parameters:e,type:"TextGeometry"};let n=t.getFont(e.font);n?.isLoaded?(this.font=n,this.update(e)):this.updateFont(e.font,t).then(()=>{this.update(e),t?.requestRender()})}updateFont(e,t){var n=this;return(0,xo.Z)(function*(){let i=t.getFont(e);i&&(n.font=i,yield i.loadingPromise)})()}update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!t?.isLoaded)return void console.warn("Cannot update text because its font is not loaded");let{width:n,height:i,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o,text:a,textTransform:l}=e,c=Yd.getDisplayedValue(a),h=function UHe(e,t,n){let i=[""],r="";for(let s of n)r+=s," "===s||"\n"===s?(i[i.length-1]+=r,r="","\n"===s&&i.push("")):t.getTextWidth(i[i.length-1]+r,e)>e.width&&(i[i.length-1].length&&i.push(""),t.getTextWidth(i[i.length-1]+r,e)>e.width&&(1===r.length?(i[i.length-1]+=r,r=""):(i[i.length-1]+=r.slice(0,-1),r=r[r.length-1],i.push(""))));return i[i.length-1]+=r,i}(e,t,2===l?c.toUpperCase():3===l?c.toLowerCase():c),{shapes:u,charWidths:p,charCoords:m}=t.generateShapes(h,e),v=.5*("number"==typeof n?n:1),g=.5*("number"==typeof i?i:1),b=u.map(P=>(new Uo).fromShape(P,!0));this.vectorShapes=b;let x=b.map(P=>e1.create({shape:P,parameters:{depth:r,extrudeBevelSegments:o,extrudeBevelSize:s,windingRule:r<=0?Bs.NONZERO:Bs.ODD,subdivisions:this.isLowResolution&&r>0?1:12}})),w=x.length?$v(x):cne();w.translate(-v,g,0),this.dispose(),this.wrappedText=h,this.charCoords=m,this.charWidths=p,this.deleteAttribute("extrudeNormal"),Object.entries(w.attributes).forEach(([P,A])=>{this.setAttribute(P,A)}),this.setIndex(w.index),this.computeBoundingSphere()}clone(){let e=Yf(new Pi,dne.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([t,n])=>{this.setAttribute(t,n)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}setText(e){var t=this;return(0,xo.Z)(function*(){t.font&&(yield t.font.loadingPromise),yield t.update({...t.userData.parameters,text:e})})()}get text(){return this.userData.parameters.text??""}},pB=new Promise(e=>{hne=e}),une=!1;function VHe(){if(!une)return sT||(sT=function e(){return t.apply(this,arguments)}(),sT);function t(){return(t=(0,xo.Z)(function*(){let i=_.e(526).then(_.bind(_,526)),[r,s]=yield Promise.all([i,fetch("https://unpkg.com/@splinetool/modelling-wasm@0.9.526/build/process.wasm").then(l=>l.arrayBuffer())]),o=r.default,a=yield o({wasmBinary:s});hne(a),une=!0})).apply(this,arguments)}}var jHe=["font"];function oT(e,t,n,i){let r,s,o;"PathGeometry"===e.type?(s=JSON.parse(JSON.stringify(e)),o=[[],["extrusion"]]):(s={...e},o=[[]]);for(let c of o){let d=s;for(let h of c)d=d[h];for(r in d){let h=d[r];Iee(h)&&!jHe.includes(r)&&(d[r]=t.getVariable(h,[i.uuid,"geometry",...c,r]),Iee(d[r])&&(d[r]=1))}}let l,a={parameters:s,type:s.type};if("PathGeometry"===s.type)a.path=s.path;else if("VectorGeometry"===s.type){let c=Uo.createFromState(s.shape,s.width,s.height);a.shape=c}else if("NonParametricGeometry"===s.type)s.data.groups&&s.data.groups?.forEach(c=>c.materialIndex=Math.max(c.materialIndex??0,0)),a.geometry=(new rQ).parse(s);else{if("SubdivGeometry"===s.type){let c=new Pc(s,n);return c.data=e,c}if("TextGeometry"===s.type)return new dne(s,t)}try{l=xne(a)}catch(c){console.error(c)}if(!l){let c=Uo.createFromState(AA.defaultData(),100,100);a.shape=c,l=xne(a)}return l}var HHe=new vn;function fB(e,t,n,i){let a,l,c,r=e.position.array,s=e.normal.array,o=HHe.makeScale(t,n,i).invert().elements;for(var d=0,h=r.length;d<h;d+=3)r[d]*=t,r[d+1]*=n,r[d+2]*=i,a=s[d],l=s[d+1],c=s[d+2],s[d]=o[0]*a+o[4]*l+o[8]*c,s[d+1]=o[1]*a+o[5]*l+o[9]*c,s[d+2]=o[2]*a+o[6]*l+o[10]*c;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var Ii,aT=new ra,Lb=new oe;pB.then(e=>{Ii=e});var pne=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),fne=new Uint32Array([0,1,2,3]),mne=new Uint8Array([4]),Pc=class extends Pi{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let i=Wv.div(t,this.data.scaleBaked);this.subdividedGeometry&&fB(this.subdividedGeometry.attributes,...i),this.originalGeometry&&fB(this.originalGeometry.attributes,...i),this.data=e;let r=this.userData.parameters;this.userData.parameters={width:r.width*i[0],height:r.height*i[1],depth:r.depth*i[2]},this.originalGeometry.boundingSphere.center.multiply(Lb.fromArray(i));let s=Lb.set(r.width,r.height,r.depth).length();this.originalGeometry.boundingSphere.radius=s/2}ensureSubdivPointer(){return 0===this.subdivPointer&&this.rebuild(),this.subdivPointer}rebuild(){let e,t,n;try{({originalGeometry:e,subdividedGeometry:t,subdivPointer:n}=Pc.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new hp(100,100,100),n=0}this.subdivPointer=n,this.originalGeometry=e,this.subdividedGeometry=t??void 0,Object.assign(this,this.subdividedGeometry??this.originalGeometry),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(Pc.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;null===e.boundingSphere&&(e.boundingSphere=new $c,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let n=e.boundingSphere.center;aT.setFromBufferAttribute(e.attributes.position),aT.getCenter(n),e.boundingSphere.radius=n.distanceTo(aT.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),aT.getSize(Lb);let i={width:Lb.x,height:Lb.y,depth:Lb.z};return this.userData.parameters=i,i}static build(e,t,n,i){let r,s,o,a=e?.phongAngle??35;!1===n&&(a=-1),t&&(Ii.free_bvh(t),Ii.free_subdivision_surface(t));try{r=Pc.allocate(e,i)}catch(l){console.error(l,e),r=Pc.allocate({positionWASM:pne,indexWASM:fne,verticesPerFaceWASM:mne},i)}if(Ii.set_destination_refinement_level(r,0),s=Pc.buildLevel(r,!0,a),e.subdivisions>0)try{Ii.set_destination_refinement_level(r,e.subdivisions),o=Pc.buildLevel(r,!1,a)}catch{try{Ii.set_destination_refinement_level(r,e.subdivisions-1),o=Pc.buildLevel(r,!1,a)}catch{o=null}}else o=null;return{subdivPointer:r,originalGeometry:s,subdividedGeometry:o}}static primitiveToQuads(e,t,n){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),"DodecahedronGeometry"===e.type&&(e.detail=0);let r,s,o,a,l,c,i=void 0!==e.shape||void 0!==e.path?t.geometry:oT(e,n,!1);if(r="TorusGeometry"===e.type&&e.arc===2*Math.PI?i.getClosedTorusIndicesForBooleanOrSubdiv():i.getIndex(),({positions:s,triIndices:l}=lT(i.getAttribute("position"),r)),"CylinderGeometry"===e.type&&0===e.cornerRadius&&0===e.hollow&&!1===e.openEnded){let d=e.radialSegments*e.heightSegments*3*2;c=[d,d+3*e.radialSegments]}return({indices:o,verticesPerFace:a}=vne(s,l,i,c)),{positions:s,indices:o,verticesPerFace:a}}static allocate(e,t){let n,i,r,s=[],o=[];e.positionWASM&&e.positionWASM.length>0?(n=e.positionWASM,i=e.indexWASM,r=e.verticesPerFaceWASM):(n=pne,i=fne,r=mne);let x,a=n.length,l=i.length,c=r.length,d=n.length+s.length+o.length,h=i.length+r.length,u=d*Float32Array.BYTES_PER_ELEMENT+h*Uint32Array.BYTES_PER_ELEMENT,p=d*Float32Array.BYTES_PER_ELEMENT,v=(Uint32Array,Ii._malloc(u)),g=new Float32Array(Ii.HEAPF32.buffer,v,d),b=new Uint32Array(Ii.HEAPU32.buffer,v+p,h);g.set(n,0),g.set(s,n.length),g.set(o,n.length+s.length),b.set(i,0),b.set(r,i.length),e?.scaleBaked?.some(P=>1!==P)&&(x=(new vn).makeScale(...e.scaleBaked)),t&&(x?x.premultiply(t):x=t);let w=x?Ii.alloc_subdivision_surface2(v,a,v+p,l,v+p+i.length*Uint32Array.BYTES_PER_ELEMENT,c,x.elements):Ii.alloc_subdivision_surface(v,a,v+p,l,v+p+i.length*Uint32Array.BYTES_PER_ELEMENT,c);return Ii._free(v),w}static buildLevel(e,t,n,i,r){let s=r?Ii.get_mesh_data2(e,t?Ii.Level.CONTROL:Ii.Level.REFINED,n,r.elements):Ii.get_mesh_data(e,t?Ii.Level.CONTROL:Ii.Level.REFINED,n),a=Ii.HEAPU32.subarray(s>>2,8+(s>>2)),l=a.subarray(4,8),c=0,d=Ii.HEAPU32[a[c]>>2],h=Ii.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let u=Ii.HEAPU32[a[c]>>2],p=Ii.HEAPF32.subarray(u>>2,(u>>2)+l[c]);c++;let m=Ii.HEAPU32[a[c]>>2],v=Ii.HEAPU32.subarray(m>>2,(m>>2)+l[c]);c++;let g=Ii.HEAPU32[a[c]>>2],b=Ii.HEAPU32.subarray(g>>2,(g>>2)+l[c]);if(c++,void 0===i){let x=new Pi;if(x.setIndex(new D_(b,1)),x.setAttribute("position",new Qn(h,3)),x.setAttribute("normal",new Qn(p,3)),t){x.setAttribute("faceMap",new D_(v,1));let w=new Float32Array(p.length/3*4).fill(0);x.setAttribute("color",new Bi(w,4))}return Ii.free_mesh_data(s),x.userData.type="SubdivGeometry",x}i.getAttribute("position").copyArray(h),i.getAttribute("normal").copyArray(p),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,Ii.free_mesh_data(s)}static freeSubdivPointer(e){Ii.free_bvh(e),Ii.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,n){let i=Ii.get_wireframe_data_for_base_level(e),s=Ii.HEAPU32.subarray(i>>2,4+(i>>2)),o=s.subarray(2,4),a=0,l=Ii.HEAPU32[s[a]>>2],c=Ii.HEAPF32.subarray(l>>2,(l>>2)+o[a]);a++;let d=Ii.HEAPU32[s[a]>>2],h=Ii.HEAPU32.subarray(d>>2,(d>>2)+o[a]);if(void 0===t){let u=new Pi;u.setAttribute("position",new Qn(c,3));let p=new Float32Array(c.length);for(let m=0,v=c.length;m<v;)p[m++]=n.r,p[m++]=n.g,p[m++]=n.b;return u.setAttribute("color",new Bi(p,3)),u.setIndex(new D_(h,1)),Ii.free_wireframe_data_for_base_level(i),u}t.getAttribute("position").copyArray(c),t.attributes.position.needsUpdate=!0,Ii.free_wireframe_data_for_base_level(i)}static updateCollabMesh(e,t,n){let i=0===t;i||Ii.set_destination_refinement_level(e,t);let r=n?Ii.get_topological_data2(e,i?Ii.Level.CONTROL:Ii.Level.REFINED,n.elements):Ii.get_topological_data(e,i?Ii.Level.CONTROL:Ii.Level.REFINED),o=Ii.HEAPU32.subarray(r>>2,6+(r>>2)),a=o.subarray(3,6),l=0,c=Ii.HEAPU32[o[l]>>2],d=new Float32Array(Ii.HEAPF32.subarray(c>>2,(c>>2)+a[l]));l++;let h=Ii.HEAPU32[o[l]>>2],u=new Uint32Array(Ii.HEAPU32.subarray(h>>2,(h>>2)+a[l]));l++;let p=Ii.HEAPU32[o[l]>>2],m=new Uint8Array(Ii.HEAPU32.subarray(p>>2,(p>>2)+a[l]));return Ii.free_topological_data(r),{positions:d,indices:u,verticesPerFace:m}}},gne=["getX","getY","getZ"];function lT(e,t){let n={},i=t?t.count:e.count,r=0,s=[],o=[];for(let c=0;c<i;c++){let d=t?t.getX(c):c,h="";for(let u=0;u<3;u++)h+=~~(1e4*e[gne[u]](d))+",";if(h in n)s.push(n[h]);else{for(let u=0;u<3;u++)o.push(e[gne[u]](d));n[h]=r,s.push(r),r++}}let l=[];for(let c=0;c<s.length;c+=3)s[c]===s[c+1]||s[c]===s[c+2]||s[c+1]===s[c+2]||l.push(s[c],s[c+1],s[c+2]);return{positions:o,triIndices:l}}var cT=new oe,mB=new oe,gB=new oe,vB=new oe;function vne(e,t,n,i){let r=[],s=[];if(void 0!==n.userData.shape&&0===n.userData.parameters.depth&&0===n.userData.shape.shapeHoles.length){let l=n.userData.shape.extractShapePointsToFlatArray([]),c=n.userData.parameters.spikes;if("EllipseGeometry"===n.userData.type&&c<=24&&c%4==0&&n.userData.parameters.angle>=360){let u=l.length/2/c;l=l.filter((p,m)=>Math.floor(m/2)%u==0)}let d=0;for(let u=0;u<l.length;u+=2)d+=(l[u]-l[(0===u?l.length:u)-2])*(l[u+1]+l[(0===u?l.length:u)-1]);e.length=0;let h=0;if(d<0)for(let u=0;u<l.length;u+=2)e.push(l[u],l[u+1],0),r.push(h++);else for(let u=l.length-2;u>=0;u-=2)e.push(l[u],l[u+1],0),r.push(h++);return s.push(h),{indices:r,verticesPerFace:s}}let o=new Float32Array([n.userData.parameters.depth])[0],a=0;for(;a<t.length;){if(n.useNgonForTopBottomFaceDuringBake){let l=0;if((e[3*t[a]+2]===o||0===e[3*t[a]+2])&&l++,(e[3*t[a+1]+2]===o||0===e[3*t[a+1]+2])&&l++,(e[3*t[a+2]+2]===o||0===e[3*t[a+2]+2])&&l++,3===l)break}if(t[a+1]===t[a+3]&&t[a+2]===t[a+5]||t[a+0]===t[a+3]&&t[a+2]===t[a+4]){cT.set(e[3*t[a]],e[3*t[a]+1],e[3*t[a]+2]),mB.set(e[3*t[a+1]],e[3*t[a+1]+1],e[3*t[a+1]+2]),gB.set(e[3*t[a+4]],e[3*t[a+4]+1],e[3*t[a+4]+2]),vB.set(e[3*t[a+5]],e[3*t[a+5]+1],e[3*t[a+5]+2]),mB.sub(cT).normalize(),gB.sub(cT).normalize(),vB.sub(cT).normalize();let l=mB.cross(gB).dot(vB);Math.abs(l)>.005||i&&i.some((c,d)=>d%2!=1&&a>=i[d]&&a<i[d+1])?(r.push(t[a],t[a+1],t[a+2]),s.push(3),a+=3):(r.push(t[a],t[a+1],t[a+4],t[a+5]),s.push(4),a+=6)}else r.push(t[a],t[a+1],t[a+2]),s.push(3),a+=3}if(n.useNgonForTopBottomFaceDuringBake){let l=[],c=[],d=0;for(let h=0,u=0;h<e.length;h+=3,u++)0===e[h+2]&&(l.push(u),d++),e[h+2]===o&&c.push(u);if(0===n.userData.parameters.extrudeBevelSize){let h=c[0];c[0]=c[1],c[1]=h}l.reverse(),r.push(...l,...c),s.push(d,d)}return{indices:r,verticesPerFace:s}}var Jf={};((e,t)=>{for(var n in t)YE(e,n,{get:t[n],enumerable:!0})})(Jf,{calcBoolean:()=>YHe,calcBooleanTopological:()=>XHe,freeMeshSet:()=>QHe,getMeshSet:()=>$He,hasOpenEdges:()=>KHe,transformMeshSet:()=>ZHe});var yne,dT,Nr,Fb,GHe=new Promise(e=>{yne=e});function WHe(){if(dT)return dT;function t(){return(t=(0,xo.Z)(function*(){let i=_.e(226).then(_.bind(_,6226)),[r,s]=yield Promise.all([i,fetch("https://unpkg.com/@splinetool/boolean-wasm@0.9.526/build/boolean.wasm").then(l=>l.arrayBuffer())]),o=r.default,a=yield o({wasmBinary:s});yne(a)})).apply(this,arguments)}return dT=function e(){return t.apply(this,arguments)}(),dT}function _ne(e){let t=e.length,n=t*Uint32Array.BYTES_PER_ELEMENT,i=t*Float32Array.BYTES_PER_ELEMENT,r=Number.isInteger(e[0])?n:i,s=Nr._malloc(r);return(Number.isInteger(e[0])?new Uint32Array(Nr.HEAPU32.buffer,s,t):new Float32Array(Nr.HEAPF32.buffer,s,t)).set(e,0),s}function bne(e){switch(e){case 0:return Nr.OP.UNION;case 1:return Nr.OP.INTERSECTION;case 2:return Nr.OP.A_MINUS_B;case 3:return Nr.OP.B_MINUS_A;case 4:return Nr.OP.SYMMETRIC_DIFFERENCE;case 5:return Nr.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function XHe(e,t){void 0===Fb&&(Fb=Nr.init_csg());let n=_ne(e),i=Nr.csg_calc_topological(Fb,n,e.length,bne(t));Nr._free(n);let s=Nr.HEAPU32.subarray(i>>2,6+(i>>2)),o=s.subarray(3,6),a=0,l=Nr.HEAPU32[s[a]>>2],c=new Float32Array(Nr.HEAPF32.subarray(l>>2,(l>>2)+o[a]));a++;let d=Nr.HEAPU32[s[a]>>2],h=new Uint32Array(Nr.HEAPU32.subarray(d>>2,(d>>2)+o[a]));a++;let u=Nr.HEAPU32[s[a]>>2],p=new Uint8Array(Nr.HEAPU32.subarray(u>>2,(u>>2)+o[a]));return Nr.free_mesh_data(i),{positions:c,indices:h,verticesPerFace:p}}function YHe(e,t,n,i){void 0===Fb&&(Fb=Nr.init_csg());let r=_ne(e),s=Nr.csg_calc(Fb,r,e.length,i,bne(t));Nr._free(r);let a=Nr.HEAPU32.subarray(s>>2,5+(s>>2)),l=a.subarray(2,5),c=0,d=Nr.HEAPU32[a[c]>>2],h=Nr.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let u=Nr.HEAPU32[a[c]>>2],p=Nr.HEAPF32.subarray(u>>2,(u>>2)+l[c]);c++;let m=l[c];n.setAttribute("position",new Qn(h,3)),n.setAttribute("normal",new Qn(p,3));let v=Nr.HEAPF32.subarray(5+(s>>2),5+(s>>2)+6);return null===n.boundingSphere&&(n.boundingSphere=new $c),n.boundingSphere.radius=-1,n.userData.parameters={width:2*v[3],height:2*v[4],depth:2*v[5]},Nr.free_mesh_data(s),m}function $He(e,t,n){if(void 0===Nr)return-1;let i,r,s;if(t&&void 0!==e.userData.positions){let b=e.userData;s=b.verticesPerFace.length,i=b.positions,r=Array(b.verticesPerFace.reduce((x,w)=>x+w,0)+s);for(let x=0,w=0,P=0;x<b.verticesPerFace.length;x++){r[P++]=b.verticesPerFace[x];for(let A=0;A<b.verticesPerFace[x];A++)r[P++]=b.indices[w++]}}else({positions:i,faceIndices:r,nFaces:s}=function qHe(e,t,n){let i,r;r="TorusGeometry"===e.userData.parameters.type&&e.userData.parameters.arc===2*Math.PI?e.getClosedTorusIndicesForBooleanOrSubdiv():e.getIndex();let a,{positions:s,triIndices:o}=lT(e.getAttribute("position"),r);if(t&&n){let{indices:l,verticesPerFace:c}=vne(s,o,e);a=c.length,i=[];for(let d=0,h=0;d<a;d++){i.push(c[d]);for(let u=0;u<c[d];u++)i.push(l[h++])}}else{let l=o.length;i=Array(l+l/3),a=0;for(let c=0,d=0;d<i.length;)i[d++]=3,a++,i[d++]=o[c++],i[d++]=o[c++],i[d++]=o[c++]}return{positions:s,faceIndices:i,nFaces:a}}(e,t,n));let o=i.length,a=r.length,l=i.length,c=r.length,d=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,h=l*Float32Array.BYTES_PER_ELEMENT,p=(Uint32Array,Nr._malloc(d)),m=new Float32Array(Nr.HEAPF32.buffer,p,l),v=new Uint32Array(Nr.HEAPU32.buffer,p+h,c);m.set(i,0),v.set(r,0);let g=Nr.get_csg_mesh(p,o,p+h,a,s);return Nr._free(p),g}function KHe(e){return Nr.has_open_edges(e)}function ZHe(e,t){Nr.transform_csg_mesh(e,t.elements)}function QHe(e){Nr.free_csg_mesh(e)}GHe.then(e=>Nr=e);var JHe={ConeGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return n.thetaLength=gi.clamp(n.thetaLength,0,360),{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let u,{width:t,depth:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,cornerRadiusTop:c,cornerRadiusBottom:d,cornerSegments:h}=e.parameters;return 0===l?(u=new Pi,u.setAttribute("position",new Qn([],3))):u=c>0||d>0||l<360?new Tte(0,t/2,i,r,s,o,a,l*Math.PI/180,c,d,h,0,!0):new LZ(t/2,i,r,s,o),u.scale(1,1,n/t),Object.assign(u,{userData:{...e,type:"ConeGeometry"}})}},CubeGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let c,{width:t,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o,cornerRadius:a,cornerSegments:l}=e.parameters;return c=0==a?new hp(t,n,i,r,s,o):new bje(t,n,i,r,s,o,a,l),Object.assign(c,{userData:{...e,type:"CubeGeometry"}})}},CylinderGeometry:Ote,DodecahedronGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let{width:t,height:n,depth:i,detail:r,corner:s,cornerSides:o}=e.parameters,a=0===r&&0!==s?new Dte(.5*t,s,o):new FZ(.5*t,r);return a.scale(1,n/t,i/t),Object.assign(a,{userData:{...e,type:"DodecahedronGeometry"}})}},EllipseGeometry:oB,HelixGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),i=Math.abs(n.width),r=Math.abs(n.height??i),s=Math.abs(n.depth??i),o=Math.abs(Math.min(i,s))/2;return{parameters:Object.assign(n,{width:i,height:r,depth:s,radius:o,segments:Math.round(n.segments),pathSegments:Math.round(n.pathSegments),cornerSegments:Math.round(n.cornerSegments)})}}static build(e){let{width:t,height:n,depth:i,radius:r,revolutions:s,segments:o,pathRadius:a,pathType:l,pathSegments:c,cornerRadius:d,cornerSegments:h}=e.parameters,u=new ene(!1,t,n,i,r,s,o,a,l,c,d,h);return Object.assign(u,{userData:{...e,type:"HelixGeometry"}})}},IcosahedronGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let{width:t,height:n,depth:i,detail:r,corner:s,cornerSides:o}=e.parameters,a=0===r&&0!==s?new tne(.5*t,s,o):new WZ(.5*t,r);return a.scale(1,n/t,i/t),Object.assign(a,{userData:{...e,type:"IcosahedronGeometry"}})}},LatheGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){(e.parameters?.points??[]).forEach(i=>{Array.isArray(i)&&(i.x=i[0],i.y=i[1])});let n=Object.assign({},t?.parameters??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let{points:t,segments:n,verticalSegments:i}=e.parameters,r=new DO;r.moveTo(t[0].x,t[0].y),r.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let s=new NZ(r.extractPoints(i).shape,n);return s.rotateZ(Math.PI),Object.assign(s,{userData:{...e,type:"LatheGeometry"}})}},NonParametricGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i,n=e.geometry??t?.geometry??(new Pi).copy(new hp(100,100,100));void 0===t?(n.computeBoundingBox(),n.boundingBox.getSize($a),i={width:$a.x,height:$a.y,depth:$a.z,subdivisions:0}):i=t.parameters;let r={...i,...e.parameters};return{parameters:{width:Math.abs(r.width),height:Math.abs(r.height),depth:Math.abs(r.depth),subdivisions:Math.abs(r.subdivisions)},geometry:n}}static build(e){let{width:t,height:n,depth:i,subdivisions:r}=e.parameters,s=e.geometry??(new Pi).copy(new hp(100,100,100)),o=s.userData.parameters;void 0===o?(s.computeBoundingBox(),s.boundingBox.getSize($a)):$a.set(o.width,o.height,o.depth),(t!==$a.x||n!==$a.y||i!==$a.z)&&s.scale(0===$a.x?1:t/$a.x,0===$a.y?1:n/$a.y,0===$a.z?1:i/$a.z);let a=s.originalGeometry;try{r>0?(void 0===a||o?.subdivisions!==r)&&(void 0===a&&(a=s),s=new class{constructor(e=1){this.subdivisions=e}modify(e){(e=e instanceof Pi?(new tT).fromBufferGeometry(e):e.clone()).mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let n,i,r,s,o,t=new oe,a=e.vertices,l=e.faces,c=e.faceVertexUvs[0],d=void 0!==c&&c.length>0,h=[],u=new Map;!function oHe(e,t,n,i){let r,s,o;for(r=0,s=e.length;r<s;r++)n[r]={edges:[]};for(r=0,s=t.length;r<s;r++)o=t[r],hB(o.a,o.b,e,i,o,n),hB(o.b,o.c,e,i,o,n),hB(o.c,o.a,e,i,o,n)}(a,l,h,u);let m,v,g,b,x,w,P,p=[];for(let Ze of Array.from(u.keys())){for(v=u.get(Ze),g=new oe,x=3/8,w=1/8,P=v.faces.length,2!=P&&(x=.5,w=0),g.addVectors(v.a,v.b).multiplyScalar(x),t.set(0,0,0),s=0;s<P;s++){for(b=v.faces[s],o=0;o<3&&(m=a[sHe(b,rHe[o])],m===v.a||m===v.b);o++);m&&t.add(m)}t.multiplyScalar(w),g.add(t),v.newEdge=p.length,p.push(g)}let A,D,R,N,k,L,Q,le=[];for(i=0,r=a.length;i<r;i++){for(L=a[i],k=h[i].edges,n=k.length,3==n?A=3/16:n>3&&(A=3/(8*n)),D=1-n*Number(A),R=A,n<=2&&2==n&&(D=3/4,R=1/8),Q=L.clone().multiplyScalar(D),t.set(0,0,0),s=0;s<n;s++)N=k[s],m=N.a!==L?N.a:N.b,t.add(m);t.multiplyScalar(Number(R)),Q.add(t),le.push(Q)}let xe,_e,be,Le,ke,Re,Qe,ae=le.concat(p),he=le.length,me=[],Te=[],Pe=new tt,Be=new tt,Fe=new tt;for(i=0,r=l.length;i<r;i++)b=l[i],xe=Number(dB(b.a,b.b,u).newEdge)+he,_e=Number(dB(b.b,b.c,u).newEdge)+he,be=Number(dB(b.c,b.a,u).newEdge)+he,iT(me,xe,_e,be,b.materialIndex),iT(me,b.a,xe,be,b.materialIndex),iT(me,b.b,_e,xe,b.materialIndex),iT(me,b.c,be,_e,b.materialIndex),d&&(Le=c[i],ke=Le[0],Re=Le[1],Qe=Le[2],Pe.set(kb(ke.x,Re.x),kb(ke.y,Re.y)),Be.set(kb(Re.x,Qe.x),kb(Re.y,Qe.y)),Fe.set(kb(ke.x,Qe.x),kb(ke.y,Qe.y)),rT(Te,Pe,Be,Fe),rT(Te,ke,Pe,Fe),rT(Te,Re,Be,Pe),rT(Te,Qe,Fe,Be));e.vertices=ae,e.faces=me,d&&(e.faceVertexUvs[0]=Te)}}(r).modify(a).toBufferGeometry()):(void 0!==a&&(s=a),a=void 0,void 0===s.getAttribute("normal")&&s.computeVertexNormals())}catch{void 0!==a&&(s=a),a=void 0,void 0===s.getAttribute("normal")&&s.computeVertexNormals()}return void 0!==a&&Object.assign(s,{originalGeometry:a}),delete e.geometry,Object.assign(s,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,n){new rQ(n).load(e,i=>{let r=this.normalizeInputs({geometry:i});i.boundingBox.getSize($a);let s=100/$a.x;Object.assign(r.parameters,{width:100,height:$a.y*s,depth:$a.z*s}),t(this.build(r))})}},PolygonGeometry:sne,PyramidGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let{width:t,height:n,depth:i,radialSegments:r,heightSegments:s,openEnded:o,cornerRadius:a,cornerSegments:l}=e.parameters,c=new hHe(.5*t,n,r,s,o,a,l);return c.scale(1,1,i/t),Object.assign(c,{userData:{...e,type:"PyramidGeometry"}})}},RectangleGeometry:one,SphereGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},e.parameters);return n.thetaLength=gi.clamp(n.thetaLength,0,180),{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let d,{width:t=100,height:n=t,depth:i=t,widthSegments:r=64,heightSegments:s=64,phiStart:o,phiLength:a,thetaStart:l,thetaLength:c}=e.parameters;return 0===c?(d=new Pi,d.setAttribute("position",new Qn([],3))):d=new XL(.5*t,r,s,o,a,l,c*gi.DEG2RAD),d.scale(1,n/t,i/t),Object.assign(d,{userData:{...e,type:"SphereGeometry"}})}},PlaneGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:0})}}static build(e){let{width:t=100,height:n=t,widthSegments:i=8,heightSegments:r=8}=e.parameters,s=new bO(t,n,i,r);return s.scale(1,1,1),Object.assign(s,{userData:{...e,type:"PlaneGeometry"}})}},BackdropGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let{width:t,height:n,depth:i,angle:r,cornerRadius:s,cornerSegments:o}=e.parameters,a=new mHe(t,n,i,r,s,o);return Object.assign(a,{userData:{...e,type:"BackdropGeometry"}})}},StarGeometry:ane,TextFrameGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,depth:0},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(e){let{width:t,height:n}=e.parameters,i=new bO(t,n);return Object.assign(i,{userData:{...e,type:"TextFrameGeometry"}})}},TorusGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},e.parameters),i=Math.abs(n.width),r=Math.abs(n.height??n.width),s=Math.round(Math.abs(n.depth??.25*n.width));return{parameters:Object.assign(n,{width:i,height:r,depth:s})}}static build(e){let{width:t,height:n,depth:i,radialSegments:r,tubularSegments:s,arc:o,cornerRadius:a,cornerSegments:l}=e.parameters,c=function yHe(e,t,n,i,r,s,o,a,l,c,d){[t,n]=[n,t],o=t/2;let h=gi.clamp(r/360,0,1);if(0===h){let u=new Pi;return u.setAttribute("position",new Qn([],3)),u}return 1===h&&(c=0),new ene(!0,e,t,n,i,h,s,o,a,l,c,d)}(t,n,i,.5*t,o,s,0,0,r,a,l);return c.scale(1,n/t,1),Object.assign(c,{userData:{...e,type:"TorusGeometry"}})}},TorusKnotGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width),tube:n.tube??.125*n.width})}}static build(e){let{width:t,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o}=e.parameters,a=.5*t;a!==n&&(a-=n);let l=new qZ(a,n,i,r,s,o);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},TriangleGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof Uo?e.shape:new Uo,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width*(n.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(n.depth??0)})}}static build(e){let{width:t=100,height:n,cornerRadius:i,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o,isRect:a}=e.parameters,l=e.shape,c=.5*t,d=.5*n;a?(l.addPoint(l.createPoint(-c,d)),l.addPoint(l.createPoint(c,-d)),l.addPoint(l.createPoint(-c,-d))):(l.addPoint(l.createPoint(0,d)),l.addPoint(l.createPoint(c,-d)),l.addPoint(l.createPoint(-c,-d))),l.isClosed=!0;for(let u=0,p=l.points.length;u<p;u++)l.points[u].roundness=i;l.roundness=i,l.update();let h=e1.create({shape:l,parameters:{roundness:i,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o}});return Object.assign(h,{userData:{...e,type:"TriangleGeometry"}})}},PathGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),i=Math.abs(n.width),r=Math.abs(n.height??n.width),s=Math.abs(n.depth??0),o=t?.shapeData??oB.create({parameters:Hee}).userData.shape;return{path:e.path??TA.defaultData(),parameters:Object.assign(n,{width:i,height:r,depth:s,extrusion:{...Gee,...n.extrusion}}),shapeData:o}}static build(e){if(e.path.points.length>=2){let t=new LHe(e);return Object.assign(t,{userData:{...e,type:"PathGeometry"}})}return Object.assign(new Pi,{userData:{...e,type:"PathGeometry"}})}},VectorGeometry:e1},xne=e=>JHe[e.type].create(e);function Bb(e){return null!==e&&"booleanOp"in e}var wne=class extends(W5(yc)){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new vn}updateVisible(e){super.updateVisible(e),this.visible=!Bb(this.parent)&&this.visible,Bb(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){-1!==this.booleanMeshSetAddress&&(Jf.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),Bb(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof wne&&(e.freeBooleanPointer(),Bb(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e,t){let n=super.updateTransformState(e,t);return n&&Bb(this.parent)&&this.invalidateDownstreamBooleanData(!0),n}onVariableUpdate(e=!1){super.onVariableUpdate(e),Bb(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},hT=new ra;function yB(e,t=0,n=e.count,i,r){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,d=-1/0;for(let h=t;h<n;h++){let u=e.getX(h),p=e.getY(h),m=e.getZ(h);u<s&&(s=u),p<o&&(o=p),m<a&&(a=m),u>l&&(l=u),p>c&&(c=p),m>d&&(d=m)}hT.min.set(s,o,a),hT.max.set(l,c,d),hT.getCenter(i),hT.getSize(r).multiplyScalar(.5)}var eGe=new Pi,tGe=new EM,Jc=class extends wne{constructor(e,t){super(eGe,tGe),this.super_Entity(e,t)}updateState(e,t){this.updateState_Entity(e,t)}updateEntityBoxSize(e,t){let n=this.geometry.getAttribute("position");void 0!==n?yB(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,e,t):super.updateEntityBoxSize(e,t)}},Mne=class{constructor(e){this.name=(e=e??{}).name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},Ug=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=gi.generateUUID(),this.type=e,this.name=""}analyze(e,t){t=t??{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,n){return this.analyze(e,n=n??{}),this.flow(e,t,n)}flow(e,t,n){e.addFlow((n=n??{}).slot,n.cache,n.context);let i={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),i}build(e,t,n){t=t??this.getType(e,t);let i=e.getNodeData(n??this);return e.analyzing&&this.appendDepsNode(e,i,t),-1===e.nodes.indexOf(this)&&e.nodes.push(this),void 0!==this.updateFrame&&-1===e.updaters.indexOf(this)&&e.updaters.push(this),this.generate(e,t,n)}updateFrame(e){}generateReadonly(e,t,n,i,r,s){return""}generate(e,t,n,i,r){return""}parse(e,t,n,i){}appendDepsNode(e,t,n){t.deps=(t.deps||0)+1;let i=e.getTypeLength(n);(i>(t.outputMax||0)||this.getType(e,n))&&(t.outputMax=i,t.output=n)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return"sampler2D"===t||"samplerCube"===t?t:this.type}getHash(){let t,n,e="{";for(t in this)n=this[t],n instanceof Ug&&(e+='"'+t+'":'+n.getHash()+",");if(this.hashProperties)for(let i=0;i<this.hashProperties.length;i++)t=this.hashProperties[i],n=this[t],e+='"'+t+'":"'+String(n)+'",';return e+='"id":"'+this.uuid+'"}',e}},ed=new class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,n){this.keywords[e]={callback:t,cache:n=void 0===n||n}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return void 0!==this.nodes[e]}containsKeyword(e){return void 0!==this.keywords[e]}},zs=class extends Ug{constructor(e,t){super(e),this.scope="",this.shared=void 0===(t=t??{}).shared||t.shared,this.unique=void 0!==t.unique&&t.unique}build(e,t,n,i){if(t=t??this.getType(e),this.getShared(e,t)){let r=this.getUnique(e,t);r&&void 0===this.uuid&&(this.uuid=gi.generateUUID()),n=e.getUUID(n??this.getUUID(),!r);let s=e.getNodeData(n),o=s.output||this.getType(e);if(e.analyzing)return(s.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,s,t),this.generate(e,t,n)):super.build(e,t,n);if(r)return s.name=s.name||super.build(e,t,n),s.name;if(!this.getLabel()&&(!this.getShared(e,o)||e.context.ignoreCache||1===s.deps))return super.build(e,t,n);n=this.getUUID(!1);let a=this.getTemp(e,n);if(a)return e.format(a,o,t);{a=super.generate(e,t,n,s.output,i);let l=this.generate(e,o,n);return e.addNodeCode(a+" = "+l+";"),e.format(a,o,t)}}return super.build(e,t,n)}getShared(e,t){return"sampler2D"!==t&&"samplerCube"!==t&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return"string"==typeof this.scope&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let n=e.getVars()[t];return n?n.name:void 0}generate(e,t,n,i,r){return this.getShared(e,t)||console.error("TempNode is not shared"),e.getTempVar(n=n??this.uuid,i??this.getType(e),r,this.getLabel()).name}},td=class extends zs{constructor(e,t){(t=t??{}).shared=void 0!==t.shared&&t.shared,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,n,i,r,s){n=e.getUUID(n??this.getUUID()),i=i??this.getType(e);let o=e.getNodeData(n);return this.getReadonly()&&void 0!==this.generateReadonly?this.generateReadonly(e,t,n,i,r,s):e.isShader("vertex")?(o.vertex||(o.vertex=e.createVertexUniform(i,this,r,s,this.getLabel())),e.format(o.vertex.name,i,t)):(o.fragment||(o.fragment=e.createFragmentUniform(i,this,r,s,this.getLabel())),e.format(o.fragment.name,i,t))}},El=class extends td{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof tt?e:new tt(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,n,i,r,s){return e.format("vec2("+this.value.x+", "+this.value.y+")",i,t)}},Dh=class extends td{constructor(e=0,t,n){super("v3"),this.nodeType="Vector3",this.value=e instanceof oe?e:new oe(e,t,n)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,n,i,r,s){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",i,t)}},nd=class extends Di{constructor(e,t,n,i){super(e,t,n),this.isColorA=!0,this.a=i}setRGBA(e,t,n,i){super.setRGB(e,t,n),this.a=i}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}setStyle(e,t="srgb"){let n;if("transparent"===e)return this.setRGBA(0,0,0,0),this;if(n=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let i,r=n[1],s=n[2];switch(r){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.a="rgba"===r?parseFloat(i[4]):1,super.setStyle(e,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.a="hsla"===r?parseFloat(i[4]):1,super.setStyle(e,t)}}return super.setStyle(e,t)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},em=class extends td{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof nd?e:new nd(e.r,e.g,e.b,e.a)}generateReadonly(e,t,n,i,r,s){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",i,t)}},iGe=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,Cne=/[a-z_0-9]+/gi,Bn=class extends zs{constructor(e,t,n,i,r){super(r),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=void 0===r,this.isInterface=!1,this.parse(e,t,n,i)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,n,i,r){let s,o=0,a=this.src;if(this.includes)for(let c=0;c<this.includes.length;c++)e.include(this.includes[c],this);for(let c in this.extensions)e.extensions[c]=!0;let l=[];for(;s=Cne.exec(this.src);)l.push(s);for(let c=0;c<l.length;c++){let d=l[c],h=d[0],u=!this.isMethod||!this.getInputByName(h),p=h;if(this.keywords[h]||this.useKeywords&&u&&ed.containsKeyword(h)){let m=this.keywords[h];if(!m){let v=ed.getKeywordData(h);v.cache&&(m=e.keywords[h]),m=m||ed.getKeyword(h,e),v.cache&&(e.keywords[h]=m)}p=m.build(e)}h!==p&&"."!==a[d.index+o-1]&&(a=a.substring(0,d.index+o)+p+a.substring(d.index+h.length+o),o+=p.length-h.length),void 0===this.getIncludeByName(p)&&ed.contains(p)&&e.include(ed.get(p))}return"source"===t?a:this.isMethod?(this.isInterface||e.include(this,void 0,a),this.name):e.format("( "+a+" )",this.getType(e),t)}parse(e,t,n,i){if(this.src=e||"",this.includes=t??[],this.extensions=n??{},this.keywords=i??{},this.isMethod){let r=iGe.exec(this.src);if(this.inputs=[],r&&4==r.length){this.type=r[1],this.name=r[2];let s=r[3].match(Cne);if(s){let o=0;for(;o<s.length;){let l,a=s[o++];"in"===a||"out"===a||"inout"===a?l=s[o++]:(l=a,a="");let c=s[o++];this.inputs.push({name:c,type:l,qualifier:a})}}this.isInterface=-1===this.src.indexOf("{")}else this.type="",this.name=""}}},rGe=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,Pne=class extends zs{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||Pne.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,n,i,r){this.src=e||"";let s,o,a="",l=rGe.exec(e);this.useDefine=r??"#"===this.src.charAt(0),l&&l.length>1?(o=l[1],s=l[2],a=l[3]):(s=this.src,o="f"),this.name=s,this.type=o,this.value=a}build(e,t){if("source"===t){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,n,i,r){return e.format(this.name,this.getType(e),t)}},Us=Pne;Us.PI="PI",Us.PI2="PI2",Us.RECIPROCAL_PI="RECIPROCAL_PI",Us.RECIPROCAL_PI2="RECIPROCAL_PI2",Us.LOG2="LOG2",Us.EPSILON="EPSILON";var sGe=new RegExp("^structs*([a-z_0-9]+)s*{s*((.|\n)*?)}","gim"),oGe=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),Sne=class extends zs{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,n,i,r){return"source"===t?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=sGe.exec(e);if(t){let i,n=t[2];for(;i=oGe.exec(n);)this.inputs.push({type:i[1],name:i[2]});this.name=t[1]}else this.name="";this.type=this.name}},_B=class extends zs{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,t){e.requires.uv[this.index]=!0;let n=this.index>0?this.index+1:"",i=e.isShader("vertex")?"uv"+n:"vUv"+n;return e.format(i,this.getType(e),t)}};ed.addKeyword("uv",function(){return new _B}),ed.addKeyword("uv2",function(){return new _B(1)});var zb=class extends zs{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t??zb.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case cp:return["Linear"];case fr:return["sRGB"];default:return[]}}generate(e,t){let n=this.input.build(e,"v4"),i=this.getType(e),r=zb.Nodes[this.method],s=e.include(r);if(s===zb.LINEAR_TO_LINEAR)return e.format(n,i,t);if(2===r.inputs?.length){let o=this.factor.build(e,"f");return e.format(s+"( "+n+", "+o+" )",i,t)}return e.format(s+"( "+n+" )",i,t)}fromEncoding(e){let t=zb.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=zb.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},Ep=zb;Ep.Nodes={LinearToLinear:new Bn(["vec4 LinearToLinear( in vec4 value ) {","\treturn value;","}"].join("\n")),sRGBToLinear:new Bn(["vec4 sRGBToLinear( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join("\n")),LinearTosRGB:new Bn(["vec4 LinearTosRGB( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join("\n"))},Ep.LINEAR_TO_LINEAR="LinearToLinear",Ep.SRGB_TO_LINEAR="sRGBToLinear",Ep.LINEAR_TO_SRGB="LinearTosRGB";var lo=class extends Bn{constructor(e="",t,n,i,r){super(e,r,i,n,t),this.nodeType="Expression"}},tm=class extends td{constructor(e=new Wa,t,n,i){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t??new _B,this.bias=n,this.project=void 0!==i&&i}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){if("sampler2D"===t)return this.getTexture(e,t);let s,o,n=this.getTexture(e,t),i=this.uv.build(e,this.project?"v4":"v2"),r=this.bias?this.bias.build(e,"f"):void 0;void 0===r&&e.context.bias&&(r=e.context.bias.setTexture(this).build(e,"f")),s=this.project?"texture2DProj":r?"tex2DBias":"tex2D",o=r?s+"( "+n+", "+i+", "+r+" )":s+"( "+n+", "+i+" )";let a={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(a),this.colorSpace=this.colorSpace??new Ep(new lo("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(e,l),e.removeContext(),e.format(o,l,t)}},ei=class extends td{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,t,n,i,r,s){return e.format(this.value+(this.value%1?"":".0"),i,t)}},Ene=class extends zs{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,n,i,r){i=this.getType(e);let s=this.value,o=s.build(e,t)+"( ",a=[];if(s.inputs){for(let l=0;l<s.inputs.length;l++){let c=s.inputs[l];a.push((this.inputs[l]||this.inputs[c.name]).build(e,e.getTypeByFormat(c.type)))}o+=a.join(", ")+" )"}return e.format(o,i,t)}},One=class extends zs{constructor(e,t,n=One.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=n}getType(e){let t=this.a.getType(e),n=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(n)>e.getTypeLength(t)?n:t}generate(e,t){let n=this.getType(e);this.type=n;let i=this.a.build(e,n),r=this.b.build(e,n);return e.format("( "+i+" "+this.op+" "+r+" )",n,t)}},id=One;id.ADD="+",id.SUB="-",id.MUL="*",id.DIV="/";var Vs=class extends zs{constructor(e,t=Vs.ABS,n,i){super(),this.nodeType="Math",this.a=e,"string"!=typeof t?this.b=t:i=t,"string"!=typeof n?this.c=n:i=n,this.method=i,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case Vs.MIX:case Vs.CLAMP:case Vs.REFRACT:case Vs.SMOOTHSTEP:case Vs.FACEFORWARD:return 3;case Vs.MIN:case Vs.MAX:case Vs.MOD:case Vs.STEP:case Vs.REFLECT:case Vs.DISTANCE:case Vs.DOT:case Vs.CROSS:case Vs.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),n=this.b?e.getTypeLength(this.b.getType(e)):0,i=this.c?e.getTypeLength(this.c.getType(e)):0;return t>n&&t>i?this.a.getType(e):n>i?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case Vs.LENGTH:case Vs.DISTANCE:case Vs.DOT:return"f";case Vs.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let n,i,r,s=this.a?e.getTypeLength(this.a.getType(e)):0,o=this.b?e.getTypeLength(this.b.getType(e)):0,a=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),c=this.getType(e);switch(this.type=c,this.method){case Vs.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case Vs.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case Vs.CROSS:n=this.a.build(e,"v3"),i=this.b.build(e,"v3");break;case Vs.STEP:n=this.a.build(e,1===s?"f":l),i=this.b.build(e,l);break;case Vs.MIN:case Vs.MAX:case Vs.MOD:n=this.a.build(e,l),i=this.b.build(e,1===o?"f":l);break;case Vs.REFRACT:n=this.a.build(e,l),i=this.b.build(e,l),r=this.c.build(e,"f");break;case Vs.MIX:n=this.a.build(e,l),i=this.b.build(e,l),r=this.c.build(e,1===a?"f":l);break;default:n=this.a.build(e,l),this.b&&(i=this.b.build(e,l)),this.c&&(r=this.c.build(e,l))}let d=[];d.push(n),i&&d.push(i),r&&d.push(r);let h=this.getNumInputs(e);if(d.length!==h)throw Error(`Arguments not match used in "${this.method}". Require ${h}, currently ${d.length}.`);return e.format(this.method+"( "+d.join(", ")+" )",c,t)}},dr=Vs;dr.RAD="radians",dr.DEG="degrees",dr.EXP="exp",dr.EXP2="exp2",dr.LOG="log",dr.LOG2="log2",dr.SQRT="sqrt",dr.INV_SQRT="inversesqrt",dr.FLOOR="floor",dr.CEIL="ceil",dr.NORMALIZE="normalize",dr.FRACT="fract",dr.SATURATE="saturate",dr.SIN="sin",dr.COS="cos",dr.TAN="tan",dr.ASIN="asin",dr.ACOS="acos",dr.ARCTAN="atan",dr.ABS="abs",dr.SIGN="sign",dr.LENGTH="length",dr.NEGATE="negate",dr.INVERT="invert",dr.MIN="min",dr.MAX="max",dr.MOD="mod",dr.STEP="step",dr.REFLECT="reflect",dr.DISTANCE="distance",dr.DOT="dot",dr.CROSS="cross",dr.POW="pow",dr.MIX="mix",dr.CLAMP="clamp",dr.REFRACT="refract",dr.SMOOTHSTEP="smoothstep",dr.FACEFORWARD="faceforward";var xC=class extends zs{constructor(e,t,n){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=n}bilinearCubeUV(e,t,n,i){let r=new Ene(xC.Nodes.bilinearCubeUV,[t,n,i]);this.colorSpaceTL=this.colorSpaceTL??new Ep(new lo("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(r.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new Ep(new lo("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(r.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new Ep(new lo("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(r.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new Ep(new lo("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(r.build(e)+".br");let s={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(s),this.colorSpaceTLExp=new lo(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new lo(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new lo(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new lo(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let o=new lo("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return o.keywords.cubeUV_TL=this.colorSpaceTLExp,o.keywords.cubeUV_TR=this.colorSpaceTRExp,o.keywords.cubeUV_BL=this.colorSpaceBLExp,o.keywords.cubeUV_BR=this.colorSpaceBRExp,o.keywords.cubeUV=r,o}generate(e,t){if(e.isShader("fragment")){let n=this.uv,r=new Ene(xC.Nodes.roughnessToMip,[this.bias||e.context.roughness]),s=new dr(r,xC.Nodes.m0,xC.Nodes.cubeUV_maxMipLevel,dr.CLAMP),o=new dr(s,dr.FLOOR),a=new dr(s,dr.FRACT),l=this.bilinearCubeUV(e,this.value,n,o),c=this.bilinearCubeUV(e,this.value,n,new id(o,new ei(1).setReadonly(!0),id.ADD)),d=new dr(l,c,a,dr.MIX);return e.format(d.build(e),"v4",t)}return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},bB=xC;bB.Nodes=function(){let e=new Sne("struct TextureCubeUVData {\n\t\t\tvec4 tl;\n\t\t\tvec4 tr;\n\t\t\tvec4 br;\n\t\t\tvec4 bl;\n\t\t\tvec2 f;\n\t\t}"),t=new Us("float cubeUV_maxMipLevel 8.0",!0),n=new Us("float cubeUV_minMipLevel 4.0",!0),i=new Us("float cubeUV_maxTileSize 256.0",!0),r=new Us("float cubeUV_minTileSize 16.0",!0),s=new Bn("float getFace(vec3 direction) {\n\t\t\t\tvec3 absDirection = abs(direction);\n\t\t\t\tfloat face = -1.0;\n\t\t\t\tif (absDirection.x > absDirection.z) {\n\t\t\t\t\tif (absDirection.x > absDirection.y)\n\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t} else {\n\t\t\t\t\tif (absDirection.z > absDirection.y)\n\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t}\n\t\t\t\treturn face;\n\t\t}");s.useKeywords=!1;let o=new Bn("vec2 getUV(vec3 direction, float face) {\n\t\t\t\tvec2 uv;\n\t\t\t\tif (face == 0.0) {\n\t\t\t\t\tuv = vec2(direction.z, direction.y) / abs(direction.x); // pos x\n\t\t\t\t} else if (face == 1.0) {\n\t\t\t\t\tuv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y\n\t\t\t\t} else if (face == 2.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z\n\t\t\t\t} else if (face == 3.0) {\n\t\t\t\t\tuv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x\n\t\t\t\t} else if (face == 4.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y\n\t\t\t\t} else {\n\t\t\t\t\tuv = vec2(direction.x, direction.y) / abs(direction.z); // neg z\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (uv + 1.0);\n\t\t}");o.useKeywords=!1;let a=new Bn("TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n\t\t\tfloat face = getFace(direction);\n\t\t\tfloat filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n\t\t\tmipInt = max(mipInt, cubeUV_minMipLevel);\n\t\t\tfloat faceSize = exp2(mipInt);\n\t\t\tfloat texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\t\t\tvec2 uv = getUV(direction, face) * (faceSize - 1.0);\n\t\t\tvec2 f = fract(uv);\n\t\t\tuv += 0.5 - f;\n\t\t\tif (face > 2.0) {\n\t\t\t\tuv.y += faceSize;\n\t\t\t\tface -= 3.0;\n\t\t\t}\n\t\t\tuv.x += face * faceSize;\n\t\t\tif(mipInt < cubeUV_maxMipLevel){\n\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t}\n\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\tuv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n\t\t\tuv *= texelSize;\n\t\t\tvec4 tl = texture2D(envMap, uv);\n\t\t\tuv.x += texelSize;\n\t\t\tvec4 tr = texture2D(envMap, uv);\n\t\t\tuv.y += texelSize;\n\t\t\tvec4 br = texture2D(envMap, uv);\n\t\t\tuv.x -= texelSize;\n\t\t\tvec4 bl = texture2D(envMap, uv);\n\t\t\treturn TextureCubeUVData( tl, tr, br, bl, f );\n\t\t}",[e,s,o,t,n,i,r]);a.useKeywords=!1;let l=new Us("float r0 1.0",!0),c=new Us("float v0 0.339",!0),d=new Us("float m0 -2.0",!0),h=new Us("float r1 0.8",!0),u=new Us("float v1 0.276",!0),p=new Us("float m1 -1.0",!0),m=new Us("float r4 0.4",!0),v=new Us("float v4 0.046",!0),g=new Us("float m4 2.0",!0),b=new Us("float r5 0.305",!0),x=new Us("float v5 0.016",!0),w=new Us("float m5 3.0",!0),P=new Us("float r6 0.21",!0),A=new Us("float v6 0.0038",!0),D=new Us("float m6 4.0",!0);return{bilinearCubeUV:a,roughnessToMip:new Bn("float roughnessToMip(float roughness) {\n\t\t\tfloat mip = 0.0;\n\t\t\tif (roughness >= r1) {\n\t\t\t\tmip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n\t\t\t} else if (roughness >= r4) {\n\t\t\t\tmip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n\t\t\t} else if (roughness >= r5) {\n\t\t\t\tmip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n\t\t\t} else if (roughness >= r6) {\n\t\t\t\tmip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n\t\t\t} else {\n\t\t\t\tmip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n\t\t\t}\n\t\t\treturn mip;\n\t\t}",[l,c,d,h,u,p,m,v,g,b,x,w,P,A,D]),m0:d,cubeUV_maxMipLevel:t}}();var Ub=class extends zs{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??Ub.VIEW}getShared(){return this.scope===Ub.WORLD}build(e,t,n,i){let r=e.context[this.scope+"Normal"];return r?r.build(e,t,n,i):super.build(e,t,n)}generate(e,t,n,i,r){let s;switch(this.scope){case Ub.VIEW:s=e.isShader("vertex")?"transformedNormal":"geometryNormal";break;case Ub.LOCAL:e.isShader("vertex")?s="objectNormal":(e.requires.normal=!0,s="vObjectNormal");break;case Ub.WORLD:e.isShader("vertex")?s="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,s="vWNormal")}return e.format(s,this.getType(e),t)}},rd=Ub;rd.LOCAL="local",rd.WORLD="world",rd.VIEW="view",rd.NORMAL="normal",ed.addKeyword("viewNormal",function(){return new rd(rd.VIEW)}),ed.addKeyword("localNormal",function(){return new rd(rd.NORMAL)}),ed.addKeyword("worldNormal",function(){return new rd(rd.WORLD)});var nm=class extends zs{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??nm.LOCAL}getType(){return this.scope===nm.PROJECTION?"v4":this.type}getShader(){switch(this.scope){case nm.LOCAL:case nm.WORLD:return!1}return!0}generate(e,t,n,i,r){let s;switch(this.scope){case nm.LOCAL:e.isShader("vertex")?s="transformed":(e.requires.position=!0,s="vPosition");break;case nm.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,s="vWPosition";break;case nm.VIEW:s=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case nm.PROJECTION:s=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )"}return e.format(s,this.getType(),t)}},bu=nm;bu.LOCAL="local",bu.WORLD="world",bu.VIEW="view",bu.PROJECTION="projection",ed.addKeyword("position",function(){return new bu}),ed.addKeyword("worldPosition",function(){return new bu(bu.WORLD)}),ed.addKeyword("viewPosition",function(){return new bu(bu.VIEW)});var Op=class extends zs{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??Op.CUBE}getUnique(e){return!e.context.viewNormal}getType(){return this.scope===Op.SPHERE?"v2":this.type}generate(e,t){let n=this.getUnique(e);if(e.isShader("fragment")){let i;switch(this.scope){case Op.VECTOR:{let r=new rd(rd.VIEW),s=e.context.roughness,o=r.build(e,"v3"),a=new bu(bu.VIEW).build(e,"v3"),l=s?s.build(e,"f"):void 0,c=`reflect( -normalize( ${a} ), ${o} )`;l&&(c=`normalize( mix( ${c}, ${o}, ${l} * ${l} ) )`);let d=`inverseTransformDirection( ${c}, viewMatrix )`;n?(e.addNodeCode(`vec3 reflectVec = ${d};`),i="reflectVec"):i=d;break}case Op.CUBE:{let r=new Op(Op.VECTOR).build(e,"v3"),s="vec3( -"+r+".x, "+r+".yz )";n?(e.addNodeCode(`vec3 reflectCubeVec = ${s};`),i="reflectCubeVec"):i=s;break}case Op.SPHERE:{let r="normalize( ( viewMatrix * vec4( "+new Op(Op.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";n?(e.addNodeCode(`vec2 reflectSphereVec = ${r};`),i="reflectSphereVec"):i=r;break}}return e.format(i,this.getType(),t)}return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},Vb=Op;Vb.CUBE="cube",Vb.SPHERE="sphere",Vb.VECTOR="vector";var aGe=class extends zs{constructor(e=new tm,t,n){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new bB(this.value,t??new Vb(Vb.VECTOR),n),this.irradianceNode=new bB(this.value,new rd(rd.WORLD),new ei(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),("irradiance"===e.slot?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},lGe=class extends td{constructor(e=new PL,t,n){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t??new Vb,this.bias=n}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){if("samplerCube"===t)return this.getTexture(e,t);let s,n=this.getTexture(e,t),i=this.uv?.build(e,"v3"),r=this.bias?this.bias.build(e,"f"):void 0;void 0===r&&e.context.bias&&(r=e.context.bias.setTexture(this).build(e,"f")),s=r?"texCubeBias( "+n+", "+i+", "+r+" )":"texCube( "+n+", "+i+" )";let o={include:e.isShader("vertex"),ignoreCache:!0},a=this.getType(e);return e.addContext(o),this.colorSpace=this.colorSpace??new Ep(new lo("",a)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(e,a),e.removeContext(),e.format(s,a,t)}},Ane=["x","y","z","w"],pGe=["float","vec2","vec3","vec4"],fGe={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},mGe={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},Vo=class extends td{constructor(e=0,t,n,i){super("c"),this.nodeType="Color",this.value=e instanceof nd?e:new nd(e||0,t,n,i)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,n,i,r,s){n=e.getUUID(n??this.getUUID()),i=i??this.getType(e);let o=e.getNodeData(n),a=this.getReadonly()&&void 0!==this.generateReadonly;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return a?this.generateReadonly(e,t,n,i,r,s):e.isShader("vertex")?(o.vertex||(o.vertex=e.createVertexUniform(i,this,r,s,this.getLabel())),e.format(o.vertex.name,i,t)):(o.fragment||(o.fragment=e.createFragmentUniform(i,this,r,s,this.getLabel())),e.format(o.fragment.name,i,t))}generateReadonly(e,t,n,i,r,s){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",i,t)}},Qs=class extends td{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,t,n,i,r,s){return e.format(this.value.toString(),i,t)}},Sc=class extends td{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,t,n,i){return e.format(this.value?"true":"false",i,t)}},t1=class extends td{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:"number"==typeof t?new Array(e).fill(t):new Array(e).fill(0)}},xB=class extends td{},vGe=class extends xB{constructor(e){super("v3"),this.image=e,this._value=new oe}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},wB=class extends xB{constructor(e,t){super("t"),this.image=e,this.wrap=t}get value(){return this.image.getTexture(this.wrap)}},Tne=class extends td{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new ia}generateReadonly(e,t,n,i,r,s){return e.format("mat3("+this.value.elements.join(", ")+")",i,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},Ap=class extends td{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=e??new vn}generateReadonly(e,t,n,i,r,s){return e.format("mat4("+this.value.elements.join(", ")+")",i,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function Dne(e,t,n){e.setUvTransform(n[0],n[1],t[0],t[1],0,0,0)}var yGe=class extends Tne{constructor(e,t){super(new ia),this.repeat=e,this.offset=t,Dne(this.value,e,t)}updateMatrix(){Dne(this.value,this.repeat,this.offset)}},n1=class extends td{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof mr?new Array(e).fill(t):new Array(e).fill(new mr(0))}},Ine=class extends zs{constructor(e,t,n,i){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=n,this.mode=i}generate(e,t){if(e.isShader("fragment")){let n=[];return n.push(this.a.build(e,"c")),n.push(this.b.build(e,"c")),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),e.format("spe_blend("+n.join(",")+")",this.getType(e),t)}return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Rne=class extends zs{constructor(e,t){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let n=e.include(Rne.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.color.build(e,"v3")),i.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(n+"("+i.join(",")+")",this.getType(e),t)}return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},MB=Rne;MB.Nodes={customColor:new Bn("vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {\n\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\tcalpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha;\n\n\t\t\t\treturn color;\n\t\t\t}")};var kne=class extends zs{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let n=e.include(kne.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.cnormal.build(e,"v3")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(n+"("+i.join(",")+")",this.getType(e),t)}return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Nne=kne;Nne.Nodes={customNormal:new Bn("vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {\n\t\t\t\tvec3 normal = packNormalToRGB( norm ).rgb;\n\t\t\t\tnormal *= step( vec3(0.5), cnormal );\n\n\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\n\t\t\t\treturn normal;\n\t\t\t}")};var wC=class extends zs{constructor(e,t,n,i,r,s,o,a,l,c,d,h){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=t,this.crop=n,this.projection=i,this.axis=r,this.side=s,this.size=o,this.blending=a,this.mat=l,this.isMask=h,this.alpha=c,this.mode=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let i,n=`g${this.uuid.toString().replace(/-/g,"")}`;switch(this.projection.value){case 3:i=e.include(wC.Nodes.cylindrical);break;case 2:i=e.include(wC.Nodes.spherical);break;case 1:let a=new Bn(`\n\t\tvec3 ${n}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n\t\t\t\tvec2 projected = (1. + (position.${["zy","xz","xy"][this.axis.value]})) / 2.;\n\t\t\t\tvec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n\t\t\t\tvec4 tmp = texture2D( tex, uvs );\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\t${2===this.side.value?"":`lalpha *= step(0.0, ${1===this.side.value?"-1.0 * ":""}dot(vObjectNormal, ${["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value]}));`}\n\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlalpha *= mask;\n\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}`);i=e.include(a);break;case 4:i=e.include(wC.Nodes.triplanar);break;default:i=e.include(wC.Nodes.uv)}e.addFragmentVariable(this.calpha,"float");let r=[];if(r.push("normal"),r.push(this.texture.generate(e,"t")),r.push(this.textureSize.build(e,"v2")),r.push(this.crop.build(e,"f")),r.push(this.mat.build(e,"mat3")),r.push(this.size.build(e,"v2")),r.push(this.blending.build(e,"f")),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),4===this.projection.value){let s=`${n}_writeUvs`,o=s+"0",a=s+"1",l=s+"2",c=`${n}_triplanarWeights`;e.addFragmentVariable(o,"vec2"),e.addFragmentVariable(a,"vec2"),e.addFragmentVariable(l,"vec2"),e.addFragmentVariable(c,"vec3"),r.push(o),r.push(a),r.push(l),r.push(c)}else{let s=`${n}_writeUvs`;e.addFragmentVariable(s,"vec2"),r.push(s)}return e.format(i+"("+r.join(",")+")",this.getType(e),t)}},CB=wC;CB.Nodes={cylindrical:new Bn("\nvec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n                vec3 posN = normalize(position);\n                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);\n                float scaledHeight = position.y / (size.y * 0.5);\n                float v =  (scaledHeight / 2.) + .5;\n\n                vec2 calculatedUv = vec2(u,v);\n\t\t\t\tvec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n                vec2 df = fwidth(uvs);\n               \tif(df.x > 0.5) df.x = 0.;\n\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#else\n                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlalpha *= mask;\n\t\t\t\t\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}\n"),spherical:new Bn("\nvec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n                vec3 posN = normalize(vPosition);\n                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);\n                float v = 0.5 + asin(posN.y) / 3.1415;\n\n                vec2 calculatedUv = vec2(u,v);\n\t\t\t\tvec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n                vec2 df = fwidth(uvs);\n               \tif(df.x > 0.5) df.x = 0.;\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#else\n                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlalpha *= mask;\n\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}\n"),uv:new Bn("vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n\t\t\t\tvec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n\t\t\t\tvec4 tmp = texture2D( tex, uvs );\n\n\t\t\t\tvec3 col = tmp.rgb;\n\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlalpha *= mask;\n\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}"),triplanar:new Bn("vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {\n\t\t\t\tvec3 p = position;\n\t\t\t\tvec2 uv0 = (1.0 + p.xy) / 2.0;     \n\t\t\t\tvec2 uv1 = (1.0 + p.zy) / 2.0;\t\t\n\t\t\t\tvec2 uv2 = (1.0 + p.xz) / 2.0;\t\t\n\t\n\t\t\t\tuv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;\n\t\t\t\tuv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;\n\t\t\t\tuv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;\n\n\t\t\t\t// Range from 3 to 128 seems to be good\n\t\t\t\tfloat exponent = (1.0 - blending) * 125.0 + 3.0;\n\n\t\t\t\tvec3 n = vObjectNormal;\n\t\t\t\tvec3 weights = abs(normalize(n));\n\t\t\t\tweights = pow(weights, vec3(exponent));\n\t\t\t\tweights /= dot(weights, vec3(1.0));\n\n\t\t\t\t// Write out all sets of UVs that we generated\n\t\t\t\twriteUvs0 = uv0;\n\t\t\t\twriteUvs1 = uv1;\n\t\t\t\twriteUvs2 = uv2;\n\t\t\t\twriteWeights = weights;\n\n\t\t\t\t// Derivatives for LOD\n\t\t\t\tvec2 df0 = fwidth(uv0);\n\t\t\t\tvec2 df1 = fwidth(uv1);\n\t\t\t\tvec2 df2 = fwidth(uv2);\n\t\t\t\tif (df0.x > 0.5) df0.x = 0.0;\n\t\t\t\tif (df1.x > 0.5) df1.x = 0.0;\n\t\t\t\tif (df2.x > 0.5) df2.x = 0.0;\n\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                \tvec4 tmp = \n\t\t\t\t\t\ttexture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + \n\t\t\t\t\t\ttexture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + \n\t\t\t\t\t\ttexture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;\n\t\t\t\t#else\n                \tvec4 tmp = \n\t\t\t\t\t\ttextureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + \n\t\t\t\t\t\ttextureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + \n\t\t\t\t\t\ttextureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\n\t\t\t\t// Apply cropping across all 3 planes\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t\tif ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t\tif ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlalpha *= mask;\n\t\t\t\tcalpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;//n * 0.5 + 0.5;\n\t\t\t}\t\t\t\n\t\t\t")};var MC=class extends zs{constructor(e,t,n,i,r,s,o,a,l,c,d,h){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=n,this.far=i,this.isVector=r,this.isWorldSpace=s,this.origin=o,this.direction=a,this.colors=l,this.steps=c,this.isMask=h,this.alpha=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let n=`g${this.uuid.toString().replace(/-/g,"")}`,i=new Bn(`vec3 ${n}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${n}_MAX_COLORS], float steps[${n}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {\n               vec4 color = colors[0];\n               #ifdef ${n}_IS_VECTOR\n                   #ifdef ${n}_LINEAR\n                       #ifdef ${n}_WORLDSPACE\n                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);\n                       #else\n                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);\n                       #endif\n                   #else\n                       #ifdef ${n}_WORLDSPACE\n                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);\n                       #else\n                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);\n                       #endif\n                   #endif\n               #else\n                   float dist = length(vWPosition - cameraPosition);\n\t\t\t       float depth = ( dist - near ) / ( far - near );\n               #endif\n\n\n              float p;\n              #ifdef ${n}_SMOOTH\n\t\t\t\tfor ( int i = 1; i < ${n}_MAX_COLORS; i++ ) {\n\t\t\t\t\t\tp = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t\t}\n              #else\n                for ( int i = 1; i < ${n}_MAX_COLORS; i++ ) {\n                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);\n                   color = mix(color, colors[i], p);\n                 }\n              #endif\n\n               float lalpha = alpha * color.a * mask;\n               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\t\t\t   \n               return color.rgb;\n\t\t\t}`,[MC.Nodes.vectorLinearWorldSpaceDepth,MC.Nodes.vectorLinearObjectSpaceDepth,MC.Nodes.vectorSphericalObjectSpaceDepth,MC.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${n}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${n}_SMOOTH`),this.isVector.value>.5&&e.define(`${n}_IS_VECTOR`),0===this.gradientType.value&&e.define(`${n}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${n}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let r=e.include(i),s=[];return s.push(this.near.build(e,"f")),s.push(this.far.build(e,"f")),s.push(this.origin.build(e,"v3")),s.push(this.direction.build(e,"v3")),s.push(this.colors.build(e,"v4[]")),s.push(this.steps.build(e,"f[]")),s.push(this.isMask.build(e,"b")),s.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),s.push(this.alpha.build(e,"f")),s.push(this.calpha),e.format(r+"("+s.join(",")+")",this.getType(e),t)}return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Lne=MC;Lne.Nodes={vectorLinearWorldSpaceDepth:new Bn("float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {\n               vec3 n = normalize(direction);\n               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));\n               return ( dist - near ) / ( far - near );\n            }"),vectorLinearObjectSpaceDepth:new Bn("float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {\n               vec3 n = normalize(direction);\n               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));\n               return ( dist - near ) / ( far - near );\n            }"),vectorSphericalWorldSpaceDepth:new Bn("float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {\n               float dist = length(vWPosition - origin);\n               return ( dist - near ) / ( far - near );\n            }"),vectorSphericalObjectSpaceDepth:new Bn("float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {\n               float dist = length(position - origin);\n               return ( dist - near ) / ( far - near );\n            }")};var _Ge=class extends zs{constructor(e,t,n,i,r,s,o,a){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=n,this.intensity=i,this.factor=r,this.isMask=a,this.alpha=s,this.mode=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let n=new Bn("vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {\n\t\t\t\t\tfloat fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );\n\n\t\t\t\t\tfloat lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;\n\t\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\t\treturn color;\n\t\t\t\t}"),i=e.include(n),r=[];return r.push(this.color.build(e,"c")),r.push(this.bias.build(e,"f")),r.push(this.scale.build(e,"f")),r.push(this.intensity.build(e,"f")),r.push(this.factor.build(e,"f")),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Fne=class extends zs{constructor(e,t,n,i,r,s,o,a,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=n,this.steps=i,this.offset=r,this.morph=s,this.angle=o,this.isMask=l,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let n=e.include(Fne.Nodes.gradient),i=[];return i.push(this.gradientType.build(e,"i")),i.push(this.smooth.build(e,"b")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.offset.build(e,"v2")),i.push(this.morph.build(e,"v2")),i.push(this.angle.build(e,"f")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(n+"("+i.join(",")+")",this.getType(e),t)}return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Bne=Fne;Bne.Nodes={gradient:new Bn("vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {\n\t\t\t\tvec4 color = colors[0];\n\t\t\t\tvec2 m = morph / vUv.xy;\n\t\t\t\tvec2 rot = vec2( 0.5 + m.x, m.y );\n\t\t\t\tvec2 dt = vec2(\n\t\t\t\t\tcos( angle ) * rot.x - sin( angle ) * rot.y,\n\t\t\t\t\tsin( angle ) * rot.x + cos( angle ) * rot.y\n\t\t\t\t);\n\t\t\t\tvec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;\n\t\t\t\tfloat t = dot( pt, dt ) / dot( dt, dt );\n\t\t\t\tif ( gradientType == 1 ) {\n\t\t\t\t\tt = distance (\n\t\t\t\t\t\t( vUv + morph ) * 3.0,\n\t\t\t\t\t\t( vUv + offset ) + 1.0\n\t\t\t\t\t) + angle;\n\t\t\t\t} else if ( gradientType == 2 ) {\n\t\t\t\t\tfloat polar = atan(\n\t\t\t\t\t\tvUv.x + morph.x - 0.5 + offset.x,\n\t\t\t\t\t\tvUv.y + morph.y - 0.5 + offset.y\n\t\t\t\t\t) * -1.0;\n\t\t\t\t\tt = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );\n\t\t\t\t}\n\n\t\t\t\tfloat p;\n\t\t\t\tif (smoothed) {\n\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\t\t\t\t\t\tp = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\t\t\t\t\t\tp = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], p);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfloat lalpha = alpha * color.a * mask;\n\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\t\t\t\t\n\t\t\t\treturn color.xyz;\n\t\t\t}")};var zne=class extends zs{constructor(e,t,n,i){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=i,this.alpha=t,this.mode=n,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let n=e.include(zne.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let i=[];return i.push(this.texture.generate(e,"t")),i.push("normal"),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),e.format(n+"("+i.join(",")+")",this.getType(e),t)}return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Une=zne;Une.Nodes={matcap:new Bn("vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha) {\n\t\t\t\t\tvec3 viewDir = normalize( vViewPosition );\n\t\t\t\t\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\t\t\t\t\tvec3 y = cross( viewDir, x );\n\t\t\t\t\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\t\t\t\t\tvec4 matcapColor = texture2D( matcapTex, uv );\n\n\t\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\t\t\t\t\t\n\t\t\t\t\treturn matcapColor.rgb;\n            \t}")};var PB=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e.VORONOI="voronoi",e))(PB||{}),sd=function(){let e=new Bn("vec3 random3(vec3 c) {\n\t\t\tfloat j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));\n\t\t\tvec3 r;\n\t\t\tr.z = fract(512.0*j);\n\t\t\tj *= .125;\n\t\t\tr.x = fract(512.0*j);\n\t\t\tj *= .125;\n\t\t\tr.y = fract(512.0*j);\n\t\t\treturn r-0.5;\n\t\t}"),t=new Bn("float simplex3d(vec3 p) {\n\t\t\t vec3 s = floor(p + dot(p, vec3(F3)));\n\t\t\t vec3 x = p - s + dot(s, vec3(G3));\n\t\t\t \n\t\t\t vec3 e = step(vec3(0.0), x - x.yzx);\n\t\t\t vec3 i1 = e*(1.0 - e.zxy);\n\t\t\t vec3 i2 = 1.0 - e.zxy*(1.0 - e);\n\t\t\t\t\n\t\t\t vec3 x1 = x - i1 + G3;\n\t\t\t vec3 x2 = x - i2 + 2.0*G3;\n\t\t\t vec3 x3 = x - 1.0 + 3.0*G3;\n\t\t\t \n\t\t\t vec4 w, d;\n\t\t\t \n\t\t\t w.x = dot(x, x);\n\t\t\t w.y = dot(x1, x1);\n\t\t\t w.z = dot(x2, x2);\n\t\t\t w.w = dot(x3, x3);\n\t\t\t \n\t\t\t w = max(0.6 - w, 0.0);\n\t\t\t \n\t\t\t d.x = dot(random3(s), x);\n\t\t\t d.y = dot(random3(s + i1), x1);\n\t\t\t d.z = dot(random3(s + i2), x2);\n\t\t\t d.w = dot(random3(s + 1.0), x3);\n\t\t\t \n\t\t\t w *= w;\n\t\t\t w *= w;\n\t\t\t d *= w;\n\t\t\t \n\t\t\t return dot(d, vec4(52.0));\n\t\t}",[e]);t.keywords.F3=new Us("float F3 0.3333333"),t.keywords.G3=new Us("float G3 0.1666667");let n=new Bn("float simplex3dFractal(vec3 m) {\n\t\t\tmat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);\n\t\t\tmat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);\n\t\t\tmat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);\n\t\t\treturn 0.5333333 * simplex3d(m * rot1)\n\t\t\t\t + 0.2666667 * simplex3d(2.0 * m * rot2)\n\t\t\t\t + 0.1333333 * simplex3d(4.0 * m * rot3)\n\t\t\t\t + 0.0666667 * simplex3d(8.0 * m);\n\t\t}",[t]),i=new Bn("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),r=new Bn("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),s=new Bn("float simplexAshima(vec3 v) {\n\t\t  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n\t\t  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\t\t  vec3 i  = floor(v + dot(v, C.yyy) );\n\t\t  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\t\t  vec3 g = step(x0.yzx, x0.xyz);\n\t\t  vec3 l = 1.0 - g;\n\t\t  vec3 i1 = min( g.xyz, l.zxy );\n\t\t  vec3 i2 = max( g.xyz, l.zxy );\n\t\t  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n\t\t  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n\t\t  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\t\t  i = mod(i, 289.0 ); \n\t\t  vec4 p = permute( permute( permute( \n\t\t\t\t\t i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n\t\t\t\t   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n\t\t\t\t   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\t\t  float n_ = 1.0/7.0; // N=7\n\t\t  vec3  ns = n_ * D.wyz - D.xzx;\n\t\t  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\t\t  vec4 x_ = floor(j * ns.z);\n\t\t  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\t\t  vec4 x = x_ *ns.x + ns.yyyy;\n\t\t  vec4 y = y_ *ns.x + ns.yyyy;\n\t\t  vec4 h = 1.0 - abs(x) - abs(y);\n\t\t  vec4 b0 = vec4( x.xy, y.xy );\n\t\t  vec4 b1 = vec4( x.zw, y.zw );\n\t\t  vec4 s0 = floor(b0)*2.0 + 1.0;\n\t\t  vec4 s1 = floor(b1)*2.0 + 1.0;\n\t\t  vec4 sh = -step(h, vec4(0.0));\n\t\t  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n\t\t  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\t\t  vec3 p0 = vec3(a0.xy,h.x);\n\t\t  vec3 p1 = vec3(a0.zw,h.y);\n\t\t  vec3 p2 = vec3(a1.xy,h.z);\n\t\t  vec3 p3 = vec3(a1.zw,h.w);\n\t\t  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n\t\t  p0 *= norm.x;\n\t\t  p1 *= norm.y;\n\t\t  p2 *= norm.z;\n\t\t  p3 *= norm.w;\n\t\t  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n\t\t  m = m * m;\n\t\t  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n\t\t\t\t\t\t\t\t\t\tdot(p2,x2), dot(p3,x3) ) );\n\t\t}",[i,r]),o=new Bn("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),a=new Bn("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),l=new Bn("float noise(vec3 p){\n\t\t\tvec3 a = floor(p);\n\t\t\tvec3 d = p - a;\n\t\t\td = d * d * (3.0 - 2.0 * d);\n\t\t\tvec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n\t\t\tvec4 k1 = perm(b.xyxy);\n\t\t\tvec4 k2 = perm(k1.xyxy + b.zzww);\n\t\t\tvec4 c = k2 + a.zzzz;\n\t\t\tvec4 k3 = perm(c);\n\t\t\tvec4 k4 = perm(c + 1.0);\n\t\t\tvec4 o1 = fract(k3 * (1.0 / 41.0));\n\t\t\tvec4 o2 = fract(k4 * (1.0 / 41.0));\n\t\t\tvec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n\t\t\tvec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\t\t\treturn o4.y * d.y + o4.x * (1.0 - d.y);\n\t\t}",[a]),c=new Bn("float fbm(vec3 x) {\n\t\t\tfloat v = 0.0;\n\t\t\tfloat a = 0.5;\n\t\t\tvec3 shift = vec3(100);\n\t\t\tfor (int i = 0; i < NUM_OCTAVES; ++i) {\n\t\t\t\tv += a * noise(x);\n\t\t\t\tx = x * 2.0 + shift;\n\t\t\t\ta *= 0.5;\n\t\t\t}\n\t\t\treturn v;\n\t\t}",[l]);c.keywords.NUM_OCTAVES=new Us("int NUM_OCTAVES 5");let d=new Bn("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),h=new Bn("float perlin(vec3 P){\n\t\t  vec3 Pi0 = floor(P);\n\t\t  vec3 Pi1 = Pi0 + vec3(1.0);\n\t\t  Pi0 = mod(Pi0, 289.0);\n\t\t  Pi1 = mod(Pi1, 289.0);\n\t\t  vec3 Pf0 = fract(P);\n\t\t  vec3 Pf1 = Pf0 - vec3(1.0);\n\t\t  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n\t\t  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n\t\t  vec4 iz0 = Pi0.zzzz;\n\t\t  vec4 iz1 = Pi1.zzzz;\n\t\t  vec4 ixy = permute(permute(ix) + iy);\n\t\t  vec4 ixy0 = permute(ixy + iz0);\n\t\t  vec4 ixy1 = permute(ixy + iz1);\n\t\t  vec4 gx0 = ixy0 / 7.0;\n\t\t  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n\t\t  gx0 = fract(gx0);\n\t\t  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n\t\t  vec4 sz0 = step(gz0, vec4(0.0));\n\t\t  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n\t\t  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\t\t  vec4 gx1 = ixy1 / 7.0;\n\t\t  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n\t\t  gx1 = fract(gx1);\n\t\t  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n\t\t  vec4 sz1 = step(gz1, vec4(0.0));\n\t\t  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n\t\t  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\t\t  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n\t\t  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n\t\t  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n\t\t  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n\t\t  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n\t\t  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n\t\t  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n\t\t  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\t\t  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n\t\t  g000 *= norm0.x;\n\t\t  g010 *= norm0.y;\n\t\t  g100 *= norm0.z;\n\t\t  g110 *= norm0.w;\n\t\t  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n\t\t  g001 *= norm1.x;\n\t\t  g011 *= norm1.y;\n\t\t  g101 *= norm1.z;\n\t\t  g111 *= norm1.w;\n\t\t  float n000 = dot(g000, Pf0);\n\t\t  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n\t\t  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n\t\t  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n\t\t  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n\t\t  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n\t\t  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n\t\t  float n111 = dot(g111, Pf1);\n\t\t  vec3 fade_xyz = fade(Pf0);\n\t\t  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n\t\t  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n\t\t  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n\t\t  return 2.2 * n_xyz;\n\t\t}",[i,r,d]),u=new Bn("float hashwithoutsine13(vec3 p3)\n\t\t{\n\t\t\tp3  = fract(p3 * .1031);\n\t\t\tp3 += dot(p3, p3.yzx + 33.33);\n\t\t\treturn fract((p3.x + p3.y) * p3.z);\n\t\t}"),p=new Bn("vec3 hashwithoutsine33(vec3 p3)\n\t\t{\n\t\t\tp3 = fract(p3 * vec3(.1031, .1030, .0973));\n\t\t\tp3 += dot(p3, p3.yxz+33.33);\n\t\t\treturn fract((p3.xxy + p3.yxx)*p3.zyx);\n\t\t}"),m=new Bn("float metric(in vec3 p)\n\t\t{\n\t\t\t// L2 \n\t\t\treturn length(p);\n\n\t\t\t// Chebyshev \n\t\t\t// vec3 a = abs(p);\n\t\t\t// return max(a.x, max(a.y, a.z));\n\t\t}"),v=new Bn("float smin( float a, float b, float k )\n\t\t{\n\t\t\tfloat h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);\n\t\t\tfloat correction = k * h * (1.0 - h);\n\t\t\treturn mix(b, a, h) - correction;\n\t\t}"),g=new Bn("float smax( float a, float b, float k )\n\t\t{\n\t\t\tfloat h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);\n\t\t\tfloat correction = k * h * (1.0 - h);\n\t\t\treturn mix(a, b, h) + correction;\n\t\t}"),b=new Bn("float remap(float value, float input_min, float input_max, float output_min, float output_max) {\n\t\t\t// Compute width of each interval\n\t\t\tfloat input_width = input_max - input_min;\n\t\t\tfloat output_width = output_max - output_min;\n\t\t\n\t\t\t// Convert input range into a 0-1 range \n\t\t\tfloat scaled = (value - input_min) / input_width;\n\t\t\n\t\t\t// Convert the 0-1 range into a value in output range\n\t\t\treturn output_min + (scaled * output_width);\n\t\t}");return{simplex:t,simplexFractal:n,simplexAshima:s,fbm:c,perlin:h,voronoi:new Bn('float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) \n\t\t{\n\t\t\t// Integer and fractional parts of this point\'s coordinates\n\t\t\tivec3 p = ivec3(floor(x));\n\t\t\tvec3 f = fract(x);\n\n\t\t\t// Different variables that we will use to construct noise:\n\t\t\t//\n\t\t\t// f1: distance to the closest feature point\n\t\t\t// f2: distance to the second closest feature point\n\t\t\t// e: distance to the closest edge (cell boundary)\n\t\t\t//\n\t\t\t// We also compute "smooth" versions of all of the above quantites, essentially\n\t\t\t// replacing "hard" minimums with "smooth" minimums (described by IQ)\n\t\t\tfloat f1_smooth = 8.0;\n\t\t\tfloat f1 = 8.0;\n\t\t\tfloat f2_smooth = 8.0;\n\t\t\tfloat f2 = 8.0;\n\t\t\tfloat e_smooth = 8.0;\n\t\t\tfloat e = 8.0;\n\n\t\t\t// Variables stored from closest cell\n\t\t\tivec3 mb;\n\t\t\tvec3 mr; \n\n\t\t\tint steps = quality;\n\t\t\t\n\t\t\tfor (int x = -steps; x <= steps; x++) \n\t\t\tfor (int y = -steps; y <= steps; y++)\n\t\t\tfor (int z = -steps; z <= steps; z++)\n\t\t\t{\n\t\t\t\tivec3 b = ivec3(x, y, z);\n\t\t\t\tvec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;\n\t\t\t\tfloat d = length(r);\n\t\t\t\t\n\t\t\t\tf1_smooth = smin(d, f1_smooth, smoothness);\n\n\t\t\t\t// Store un-smoothed distances too \n\t\t\t\tif (d < f1) \n\t\t\t\t{\n\t\t\t\t\tf2 = f1;\n\t\t\t\t\tf1 = d;\n\n\t\t\t\t\tmb = ivec3(x, y, z);\n\t\t\t\t\tmr = r;\n\t\t\t\t} \n\t\t\t\telse if (d < f2) \n\t\t\t\t{\n\t\t\t\t\tf2 = d;\n\t\t\t\t}\n\t\t\t}\t\n\t\t\t\n\t\t\tfloat id = hashwithoutsine13(vec3(p + mb) + seed);\n\n\t\t\t// Second pass for edge distance  \n\t\t\tfor (int x = -steps; x <= steps; x++) \n\t\t\tfor (int y = -steps; y <= steps; y++)\n\t\t\tfor (int z = -steps; z <= steps; z++)\n\t\t\t{\n\t\t\t\t// Start search at the cell that contains the closest point to "x" (found in 1st pass)\n\t\t\t\tivec3 b = mb + ivec3(x, y, z);\n\t\t\t\tvec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;\n\t\t\t\tfloat d1 = dot(0.5 * (mr + r), (r - mr)); \t\t\t\t// IQ normalizes "r - mr" but that breaks things for the smooth version?\n\t\t\t\tfloat d2 = dot(0.5 * (mr + r), normalize(r - mr));\n\n\t\t\t\te_smooth = smin(d1, e_smooth, smoothness);\n\n\t\t\t\te = min(e, d2);\n\n\t\t\t\t// Also compute a smooth version of F2 in this pass\n\t\t\t\t{\n\t\t\t\t\tivec3 b = ivec3(x, y, z);\n\t\t\t\t\tif (b != mb) \n\t\t\t\t\t{\n\t\t\t\t\t\tvec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;\n\t\t\t\t\t\tfloat d = length(r);\n\n\t\t\t\t\t\tf2_smooth = smin(d, f2_smooth, smoothness);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Different visualization modes \n\t\t\tif (style == 0) \n\t\t\t{\n\t\t\t\treturn f1_smooth;\n\t\t\t}\n\t\t\tif (style == 1) \n\t\t\t{\n\t\t\t\treturn f2_smooth;\n\t\t\t}\n\t\t\tif (style == 2) \n\t\t\t{\n\t\t\t\treturn f2_smooth - f1_smooth;\n\t\t\t\t\n\t\t\t\t// "Pebbles" also cool\n\t\t\t\t//return step(0.2, f2_smooth - f1_smooth);\n\t\t\t}\n\t\t\tif (style == 3) \n\t\t\t{\n\t\t\t\t// This one is really good for rock / stone effects\n\t\t\t\tfloat a = f1; \n\t\t\t\tfloat b = f2;\n\t\t\t\tfloat k = 3.0;\n\t\t\t\tfloat h = max(k - abs(a - b), 0.0) / k;\n\t\t\t\tfloat final = min(a, b) - h * h * k * (1.0 / 4.0);\n\t\t\t\treturn final;\n\t\t\t}\n\t\t\tif (style == 4) \n\t\t\t{\n\t\t\t\t// Some random adjustments to make this style stand out more \n\t\t\t\treturn exp(5.0 * e_smooth);\n\t\t\t}\n\t\t\tif (style == 5) \n\t\t\t{\n\t\t\t\treturn pow(f1_smooth, 3.0);\n\t\t\t}\n\t\t\tif (style == 6) \n\t\t\t{\t\t\t\t\n\t\t\t\tconst float eps = 0.0125;\n\n\t\t\t\t// Thicker lines as the user increases the smoothness slider\n\t\t\t\tfloat thickness = smoothness * 0.25 + eps;\n\n\t\t\t\t// Blurrier lines as the user increases the smoothness slider\n\t\t\t\tfloat blur = pow(smoothness, 3.0) * 0.25 + eps;\n\n\t\t\t\treturn smoothstep(\n\t\t\t\t\tthickness - thickness * blur, \n\t\t\t\t\tthickness + thickness * blur, \n\t\t\t\t\te\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (style == 7) \n\t\t\t{\n\t\t\t\treturn hashwithoutsine13(vec3(p + mb) + seed);\n\t\t\t}\n\t\t}\n\t',[u,p,m,v,g,b])}}(),Vne=class extends zs{constructor(e,t,n,i,r,s,o,a,l,c,d,h,u,p,m,v,g,b,x){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=n,this.fA=i,this.fB=r,this.distortion=s,this.colorA=o,this.colorB=a,this.colorC=l,this.colorD=c,this.noiseType=h,this.voronoiStyle=p,this.highCut=m,this.lowCut=v,this.smoothness=g,this.seed=b,this.quality=x,this.isMask=u,this.alpha=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,n,i,r){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let s=Object.values(PB)[this.noiseType.value],a=new Bn(`vec3 ${s}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) \n\t\t\t{\n                // Prevent scale of zero \n\t\t\t\tscale = max(abs(scale), 0.001);\n\n\t\t\t\tvec3 st = position / size;\n\t\t\t\tst /= scale;\n\n\t\t\t\t${"voronoi"==s?`\n\t\tfloat v = ${s}(st + move, voronoiStyle, smoothness, seed, quality);\n\n\t\t// Apply clipping to colors\n\t\tv = remap(v, lowCut, highCut, 0.0, 1.0);\n\t\tv = smax(v, 0.0, smoothness * 0.25);\n\t\tv = smin(v, 1.0, smoothness * 0.25);\n\n\t\t// Note that the voronoi mode only uses colors "A" and "C" from the UI \n\t\tvec4 color = mix(colorA, colorC, v); \n\t\t`:`\n\t\tvec3 q = vec3(${s}(st),\n\t\t\t\t\t   ${s}(st + vec3(1.0)),\n\t\t\t\t\t   ${s}(st + vec3(1.0)));\n\t\tvec3 r = vec3(${s}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),\n\t\t\t\t\t  ${s}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), \n\t\t\t\t\t  ${s}(st * q));\n\t\tfloat f = ${s}(st + r);\n\t\tvec4 color;\n\t\tcolor = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));\n\t\tcolor = mix(color, colorC, clamp(length(q), 0.0, 1.0));\n\t\tcolor = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));\n\t\t`}\n\n\t\t\t\tfloat lalpha = alpha * color.a * mask;\n\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn clamp(color, 0.0, 1.0).rgb;\n\t\t\t}`,[sd.simplex,sd.simplexFractal,sd.simplexAshima,sd.fbm,sd.perlin,sd.voronoi]),l=e.include(a),c=[];return c.push(this.scale.build(e,"f")),c.push(this.size.build(e,"v3")),c.push(this.move.build(e,"f")),c.push(this.fA.build(e,"v2")),c.push(this.fB.build(e,"v2")),c.push(this.distortion.build(e,"v2")),c.push(this.colorA.build(e,"v4")),c.push(this.colorB.build(e,"v4")),c.push(this.colorC.build(e,"v4")),c.push(this.colorD.build(e,"v4")),c.push(this.voronoiStyle.build(e,"i")),c.push(this.highCut.build(e,"f")),c.push(this.lowCut.build(e,"f")),c.push(this.smoothness.build(e,"f")),c.push(this.seed.build(e,"f")),c.push(this.quality.build(e,"i")),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(l+"("+c.join(",")+")",this.getType(e),t)}};Vne.numOctaves=5;var jne=class extends zs{constructor(e,t,n,i,r,s,o,a,l,c,d,h,u,p,m,v){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=n,this.contourWidth=i,this.contourThreshold=r,this.outlineThreshold=s,this.contourFrequency=o,this.outlineSmoothing=a,this.contourDirection=l,this.positionalLines=c,this.compensation=d,this.resolution=h,this.normalMap=u,this.depthMap=p,this.pixelRatio=m,this.alpha=v,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let n=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${n}_offset`),this.firstTime){let i=this.outlineWidth.build(e,"f"),r=this.resolution.build(e,"v2"),s=this.compensation.build(e,"b"),o=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(i,"uniform float"),e.addVertexParsVariable(r,"uniform vec2"),e.addVertexParsVariable(s,"uniform bool"),e.addVertexParsVariable(o,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`\n                vID = randomColor.r;\n                vec2 ${n}_offset = vec2(0.0);\n                if (${s}) {\n                    vec4 ${n}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));\n                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the\n                    // normals face the camera directly. So we hackily fix this by offsetting the normal\n                    // by a tiny amount.\n                    vec3 ${n}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;\n                    ${n}_offset = normalize(${n}_clipNormal.xy) / ${r} * (${i} / 2.0) * ${n}_clipPosition.w * 2.0 * ${o};\n                    ${n}_clipPosition.xy += ${n}_offset;\n                    // TODO(MAX): To handle multiple outline layers, we only want to extrude\n                    // if this offset is the biggest of all the potential offsets\n                    gl_Position = ${n}_clipPosition;\n                }\n            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(jne.Nodes.outline),r=[];return r.push(this.outlineColor.build(e,"c")),r.push(this.contourColor.build(e,"c")),r.push(this.outlineWidth.build(e,"f")),r.push(this.contourWidth.build(e,"f")),r.push(this.contourThreshold.build(e,"f")),r.push(this.outlineThreshold.build(e,"f")),r.push(this.contourFrequency.build(e,"f")),r.push(this.outlineSmoothing.build(e,"f")),r.push(this.contourDirection.build(e,"v3")),r.push(this.positionalLines.build(e,"b")),r.push(this.resolution.build(e,"v2")),r.push(this.normalMap.getTexture(e,"t")),r.push(this.depthMap.getTexture(e,"t")),r.push(this.pixelRatio.build(e,"f")),r.push(this.compensation.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),this.firstTime=!this.firstTime,e.format(i+"("+r.join(",")+")",this.getType(e),t)}return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},Hne=jne;Hne.Nodes=function(){let e=new Bn("\nfloat sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)\n{\n    vec2 halton = haltonSequence[frameIndex];\n    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n    float temporalAngle  = temporalOffset * PI2;\n\n    vec2 texelSize = (vec2(1.0) / resolution);\n    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;\n\n    vec2 uvSamples[9];\n    vec4 normalSamples[9];\n\n\tuvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);\n\tuvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);\n\tuvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);\n\tuvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);\n\tuvSamples[4] = uv;\n\tuvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);\n\tuvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);\n\tuvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);\n\tuvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);\n\n\n    normalSamples[0] = texture2D(t, uvSamples[0]);\n    normalSamples[1] = texture2D(t, uvSamples[1]);\n    normalSamples[2] = texture2D(t, uvSamples[2]);\n    normalSamples[3] = texture2D(t, uvSamples[3]);\n    normalSamples[4] = texture2D(t, uvSamples[4]);\n    normalSamples[5] = texture2D(t, uvSamples[5]);\n    normalSamples[6] = texture2D(t, uvSamples[6]);\n    normalSamples[7] = texture2D(t, uvSamples[7]);\n    normalSamples[8] = texture2D(t, uvSamples[8]);\n\n    float depthBias = 0.0001;\n    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!\n    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n\n    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);\n  \tvec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);\n\n    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));\n    return edgeNormal;\n}\n");return{outline:new Bn("vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {\n                vec3 result = outlineColor;\n                float resultAlpha = 0.0;\n\n                vec3 N = normalize(vWNormal);\n                vec2 nuv = (gl_FragCoord.xy / resolution);\n                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);\n                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);\n\n                //resultAlpha = 1.0;\n                //result = vec3(sobelSample);\n\n                float t = 1.0 - contourThreshold;\n                if(positionalLines) {\n                    vec3 NDir = position * contourDirection;\n                    float NT = NDir.x + NDir.y + NDir.z;\n                    float f  = fract(NT * contourFrequency * 0.01);\n                    float df = fwidth(NT * contourFrequency);\n\n                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);\n                    if (g < 1.0 && resultAlpha == 0.0) {\n                        result = contourColor;\n                        resultAlpha = 1.0;\n                    }\n                 }\n                 else {\n                    vec3 NDir = N * contourDirection;\n                    float NT = NDir.x + NDir.y + NDir.z;\n                    float df = fwidth(NT * contourThreshold);\n                    float f = sin(NT * 1.0 * contourFrequency);\n                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);\n\n                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {\n                        result = contourColor;\n                        resultAlpha = 1.0 - g;\n                    }\n                 }\n\n                 float lalpha = alpha * resultAlpha * mask;\n                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\t \n                 return result;\n             }",[e])}}();var im=class extends zs{constructor(e,t,n,i,r,s,o,a,l,c,d,h,u,p,m,v,g,b){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=t,this.axis=n,this.blending=i,this.offset=r,this.colorA=s,this.colorB=o,this.frequency=a,this.size=l,this.variation=c,this.smoothness=d,this.zigzag=h,this.rotation=u,this.vertical=p,this.horizontal=m,this.sides=v,this.isMask=b,this.alpha=g,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let n;switch(e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float"),this.style.value){case 0:default:n="circle";break;case 1:n="ring";break;case 2:n="polygon";break;case 3:n="xcross";break;case 4:n="diamond";break;case 5:n="checkerboard";break;case 6:n="line";break;case 7:n="wave"}let i=`g${this.uuid.toString().replace(/-/g,"")}`,r=new Bn("float hashwithoutsine12(vec2 p)\n\t\t\t\t{\n\t\t\t\t\tvec3 p3 = fract(vec3(p.xyx) * .1031);\n\t\t\t\t\tp3 += dot(p3, p3.yzx + 33.33);\n\t\t\t\t\treturn fract((p3.x + p3.y) * p3.z);\n\t\t\t\t}"),s=new Bn("vec2 rotate_uv(in vec2 uv, float a, bool repeat) \n\t\t\t\t{\n\t\t\t\t\tconst float mid = 0.5;\n\t\t\t\t\tfloat radians = a * (PI / 180.0);\n\t\t\t\t\tvec2 rotated = vec2(\n\t\t\t\t\t\tcos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,\n\t\t\t\t\t\tcos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid\n\t\t\t\t\t);\n\t\t\t\t\treturn repeat ? fract(rotated): rotated;\n\t\t\t\t}"),o="";if(4===this.projection.value)o=`\n\t\t\t\tvec3 p = position;\n\t\t\t\tfloat factor = 0.0125;\n\t\t\t\tvec2 uv0 = fract(p.xy * factor);\n\t\t\t\tvec2 uv1 = fract(p.zy * factor);\n\t\t\t\tvec2 uv2 = fract(p.xz * factor);\n\t\t\t\t\n\t\t\t\tuv0 = rotate_uv(uv0 + offset, rotation, true);\n\t\t\t\tuv1 = rotate_uv(uv1 + offset, rotation, true);\n\t\t\t\tuv2 = rotate_uv(uv2 + offset, rotation, true);\n\t\n\t\t\t\tfloat d0 = ${2===this.style.value?`${n}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${n}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`};\n\t\t\t\tfloat d1 = ${2===this.style.value?`${n}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${n}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`};\n\t\t\t\tfloat d2 = ${2===this.style.value?`${n}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${n}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`};\n\t\t\t\t\n\t\t\t\t// Range from 3 to 128 seems to be good\n\t\t\t\tfloat exponent = (1.0 - blending) * 125.0 + 3.0;\n\n\t\t\t\tvec3 n = vObjectNormal;\n\t\t\t\tvec3 weights = abs(normalize(n));\n\t\t\t\tweights = pow(weights, vec3(exponent));\n\t\t\t\tweights /= dot(weights, vec3(1.0));\n\t\t\t\td0 *= weights.z;\n\t\t\t\td1 *= weights.x;\n\t\t\t\td2 *= weights.y;\n\t\t\t\tfloat draw = d0 + d1 + d2;\n\t\n\t\t\t\tvec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;\n\t\t\t\t`;else{let d=2===this.style.value?`${n}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${n}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,h="";h=0===this.axis.value?"float radius = length(p);\n\t\t\t\t\tfloat theta = atan(p.y, p.z);\n\t\t\t\t\tfloat phi = acos(p.x / radius);":1===this.axis.value?"float radius = length(p);\n\t\t\t\t\tfloat theta = atan(p.x, p.z);\n\t\t\t\t\tfloat phi = acos(p.y / radius);":"float radius = length(p);\n\t\t\t\t\tfloat theta = atan(p.y, p.x);\n\t\t\t\t\tfloat phi = acos(p.z / radius);";let u="";switch(this.projection.value){case 0:u="custom_uv = vUv.st;";break;case 1:case 3:default:break;case 2:u=`\n\t\t\t\t\t\t\tvec3 p = position;\n\t\t\t\t\t\t\t${h}\n\t\t\t\t\t\t\tcustom_uv = vec2(theta, phi);\n\t\t\t\t\t\t\tcustom_uv /= PI;\n\t\t\t\t\t\t\t`}o=`\n\t\t\t\tvec2 custom_uv;\n\t\t\t\t${u}\n\t\n\t\t\t\tcustom_uv += offset;\n\t\t\t\tcustom_uv = fract(custom_uv);\n\t\t\t\tcustom_uv = rotate_uv(custom_uv, rotation, true);\n\t\n\t\t\t\tfloat draw = ${d};\n\t\t\t\t`}let a=new Bn(`vec3 ${i}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {\n\t\t\t\t\tconst float TWO_PI = PI * 2.0;\n\t\t\t\t\tfloat smoothness_remapped = pow(smoothness, 5.0);\t\n\n\t\t\t\t\t${o}\n\n\t\t\t\t\t// Construct final output color\n\t\t\t\t\tvec4 color = mix(colorA, colorB, draw);\n\t\t\t\t\tcolor.a = clamp(color.a, 0.0, 1.0);\n\n\t\t\t\t\t// Apply cuts\n\t\t\t\t\tcolor.a *= \n\t\t\t\t\t\tstep(vertical.x, custom_uv.y) * \n\t\t\t\t\t\tstep(custom_uv.y, vertical.y);\n\t\t\t\t\tcolor.a *= \n\t\t\t\t\t\tstep(horizontal.x, abs(custom_uv.x)) * \n\t\t\t\t\t\tstep(abs(custom_uv.x), horizontal.y);\n\n\t\t\t\t\t// Accumulate alpha \n\t\t\t\t\tfloat lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;\n\t\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\t\treturn clamp(color, 0.0, 1.0).rgb;\n\t\t\t\t}`,[s,r,im.DrawFunctions.circle,im.DrawFunctions.ring,im.DrawFunctions.polygon,im.DrawFunctions.cross,im.DrawFunctions.diamond,im.DrawFunctions.checkerboard,im.DrawFunctions.line,im.DrawFunctions.wave]),l=e.include(a),c=[];return c.push("normal"),c.push(this.blending.build(e,"f")),c.push(this.style.build(e,"i")),c.push(this.offset.build(e,"v2")),c.push(this.colorA.build(e,"v4")),c.push(this.colorB.build(e,"v4")),c.push(this.frequency.build(e,"v2")),c.push(this.size.build(e,"f")),c.push(this.variation.build(e,"f")),c.push(this.smoothness.build(e,"f")),c.push(this.zigzag.build(e,"f")),c.push(this.rotation.build(e,"f")),c.push(this.vertical.build(e,"v2")),c.push(this.horizontal.build(e,"v2")),c.push(this.sides.build(e,"i")),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(l+"("+c.join(",")+")",this.getType(e),t)}return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),t)}},Gne=im;Gne.DrawFunctions=function(){let e=new Bn("float hashwithoutsine12(vec2 p) {\n\t\t\t\tvec3 p3 = fract(vec3(p.xyx) * 0.1031);\n\t\t\t\tp3 += dot(p3, p3.yzx + 33.33);\n\t\t\t\treturn fract((p3.x + p3.y) * p3.z);\n\t\t\t}"),t=new Bn("vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {\n                // Create tiles in UV-space\n                uv *= frequency;\n\n                // Integer coords\n                vec2 i = floor(uv);\n\n                // Offset every other row based on zigzag param, then compute fractional coords\n                float row_offset = mod(i.y, 2.0);\n                uv.x += row_offset * zigzag;\n                vec2 f = fract(uv);\n\n\t\t\t\t// Rotate the tile itself:\n\t\t\t\t// const float mid = 0.5;\n\t\t\t\t// f = vec2(\n\t\t\t\t// \tcos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,\n\t\t\t\t// \tcos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid\n\t\t\t\t// );\n\t\t\t\t// f = fract(f);\n\n                f = f * 2.0 - 1.0;\n\n\t\t\t\t// Recompute integer coords after shifting - then, random value per tile \n\t\t\t\ti = floor(uv);\n\t\t\t\tfloat rand = (hashwithoutsine12(i) * 5.0 + 1.0);\n\t\t\t\tfloat jitter = mix(1.0, rand, variation);\n\t\t\t\tf *= jitter;\n\n                return f;\n            }",[e]);return{tileAndCenter:t,circle:new Bn("float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n                return smoothstep(\n                    -smoothness, \n                     smoothness, \n                     length(f) - size\n                );\n            }",[t]),ring:new Bn("float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n\n\t\t\t\tfloat d = length(f);\n                const float inner_width = 0.5;\n\n                float outer = smoothstep(-smoothness, smoothness, d - size);\n                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);\n\t\t\t\treturn outer + (1.0 - inner);   \n            }",[t]),polygon:new Bn("float sdf_ngon(in vec2 p, in float r, in int n) {\n                float an = (PI * 2.0) / float(n);\n                float he = r * tan(0.5 * an);\n                \n                // Rotate to first sector\n                p = -p.yx; \n                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);\n                vec2  cs = vec2(cos(bn), sin(bn));\n                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;\n            \n                // Side of polygon\n                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);\n            }\n            \n            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));\n            }",[t]),cross:new Bn("float sdf_cross(in vec2 p, in vec2 b, float r ) {\n                p = abs(p); \n\t\t\t\tp = (p.y > p.x) ? p.yx : p.xy;\n                vec2  q = p - b;\n                float k = max(q.y, q.x);\n                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n                return sign(k) * length(max(w, 0.0)) + r;\n            }\n            \n            // Avoid namespace conflicts \n            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));\n            }",[t]),diamond:new Bn("float ndot(vec2 a, vec2 b) { \n                return a.x*b.x - a.y*b.y; \n            }\n            \n            float sdf_diamond(in vec2 p, in vec2 b) {\n                p = abs(p);\n                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);\n                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));\n                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);\n            }\n\n            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n\t            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));\n            }",[t]),checkerboard:new Bn("float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                uv *= frequency;\n                vec2 i = floor(uv);\n\n                float offset = mod(i.y, 2.0);\n\n                uv.x += offset + zigzag * offset;\n                float x = floor(uv.x);\n                \n                return mod(x, 2.0);\n            }"),line:new Bn("float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);\n\t\t\t\t\n\t\t\t\t// Different approach for variation param here\n\t\t\t\tfloat row = floor(uv * frequency).y;\n\t\t\t\tfloat rand = hashwithoutsine12(vec2(row));\n\t\t\t\tfloat s = mix(size, size * rand, variation);\n\n\t\t\t\treturn smoothstep(\n\t\t\t\t\ts - smoothness, \n\t\t\t\t\ts + smoothness, \n\t\t\t\t\tabs(f.y)\n\t\t\t\t);\n            }",[t]),wave:new Bn("// Uses bisection \n            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {\n                // Convert all data to a primitive cosine wave\n                p = c * (p - vec2(d, a));\n                \n                const float TWO_PI = PI * 2.0;\n\n                // Reduce to principal half cycle\n                p.x = mod(p.x, TWO_PI); \n                if (p.x > PI) {\n                    p.x = TWO_PI - p.x;\n                }\n            \n                // Find zero of derivative (minimize distance)\n                float xa = 0.0;\n                float xb = TWO_PI;\n\n                // 24 bit precision\n                for (int i = 0; i < 24; i++) {\n                    float x = 0.5 * (xa + xb);\n                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));\n                    if (y < 0.0) xa = x; \n                    else xb = x;\n                }\n                float x = 0.5 * (xa + xb);\n                \n                // Compute distance    \n                vec2 q = vec2(x, b * c * cos(x));\n                return length(p - q) / c;\n            }\n\n            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                float repeat = frequency.x;\n                uv *= repeat;\n                vec2 i = floor(uv);\n                float row_offset = mod(i.y, 2.0);\n                uv.x += row_offset * zigzag;\n                vec2 f = vec2(uv.x, fract(uv.y));\n\n                // Generalized cosine: y(x) = a + b * cos(cx + d)\n                const float amplitude = 0.125;\n                float wave_frequency = frequency.y * 0.1;\n                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);\n\n\t\t\t\t// Different approach for variation param here\n\t\t\t\tfloat rand = hashwithoutsine12(vec2(i.y));\n\t\t\t\tfloat s = mix(size, size * rand, variation);\n\n                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);\n            }")}}();var Wne=class extends zs{constructor(e,t,n,i,r,s,o,a){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=n,this.noiseStrength=i,this.noiseScale=r,this.offset=s,this.isMask=a,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let n=e.include(Wne.Nodes.rainbow),i=[];return i.push(this.filmThickness.build(e,"f")),i.push(this.movement.build(e,"f")),i.push(this.wavelengths.build(e,"v3")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.offset.build(e,"v3")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(n+"("+i.join(",")+")",this.getType(e),t)}return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},qne=Wne;qne.Nodes=function(){let e=new Bn("vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {\n                 vec3 st = position / noiseScale;\n\t\t\t\t vec3 q = vec3(simplex3d(st),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(1.0)),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(1.0)));\n\n\t\t\t\t vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),\n\t\t\t\t\t\t\t  simplex3d(st * q));\n\n                 float noise = simplex3d(st + r);\n\n                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);\n             }",[sd.simplex]);return{rainbow:new Bn("vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {\n\t\t\t\tvec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);\n\n\t\t\t\tfloat rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);\n\n\t\t\t\tfloat lalpha = alpha * rainbowContribution * mask;\n\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn res;\n             }",[e])}}();var Xne=class extends zs{constructor(e,t,n,i,r,s,o,a,l,c){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=n,this.source=i,this.isWorldSpace=r,this.noiseStrength=s,this.noiseScale=o,this.shadowColor=a,this.offset=l,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let n=e.include(Xne.Nodes.toon),i=[];return i.push(this.positioning.build(e,"i")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.source.build(e,"v3")),i.push(this.isWorldSpace.build(e,"b")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.shadowColor.build(e,"v4")),i.push(this.offset.build(e,"v3")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(n+"("+i.join(",")+")",this.getType(e),t)}return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Yne=Xne;Yne.Nodes=function(){let e=new Bn("float rand(float n) {\n\t\t\t\treturn fract(sin(n) * 43758.5453123);\n\t\t\t}"),t=new Bn("float hash1(float p) { \n\t\t\t\tp = fract(p * 0.011); \n\t\t\t\tp *= p + 7.5; \n\t\t\t\tp *= p + p; \n\t\t\t\treturn fract(p); \n\t\t\t}"),n=new Bn("float valueNoise(vec3 x) {\n\t\t\t\tconst vec3 step = vec3(110, 241, 171);\n\t\t\t\n\t\t\t\tvec3 i = floor(x);\n\t\t\t\tvec3 f = fract(x);\n\t\t\t \n\t\t\t\t// For performance, compute the base input to a 1D hash from the integer part of the argument and the \n\t\t\t\t// incremental change to the 1D based on the 3D -> 1D wrapping\n\t\t\t\tfloat n = dot(i, step);\n\t\t\t\n\t\t\t\tvec3 u = f * f * (3.0 - 2.0 * f);\n\t\t\t\treturn mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),\n\t\t\t\t\t\t\t   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),\n\t\t\t\t\t\t   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),\n\t\t\t\t\t\t\t   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);\n\t\t\t}",[t]),i=new Bn("vec3 hash3(vec3 x) {\n\t\t\t\tx = vec3(dot(x,vec3(127.1, 311.7, 74.7)),\n\t\t\t\t\t\t dot(x,vec3(269.5, 183.3, 246.1)),\n\t\t\t\t\t\t dot(x,vec3(113.5, 271.9, 124.6)));\n\t\t\t\n\t\t\t\treturn fract(sin(x)*43758.5453123);\n\t\t\t}"),r=new Bn('vec3 voronoiNoise(in vec3 x)\n\t\t\t{\n\t\t\t\tvec3 p = floor(x);\n\t\t\t\tvec3 f = fract(x);\n\n\t\t\t\tfloat id = 0.0;\n\t\t\t\tvec2 res = vec2(100.0);\n\n\t\t\t\tfor(int k=-1; k<=1; k++)\n\t\t\t\tfor(int j=-1; j<=1; j++)\n\t\t\t\tfor(int i=-1; i<=1; i++)\n\t\t\t\t{\n\t\t\t\t\tvec3 b = vec3(float(i), float(j), float(k));\n\n\t\t\t\t\t// Comment out the "+ hash(p + b);" part below to get "square" cells\n\t\t\t\t\tvec3 r = vec3(b) - f + hash3(p + b);\n\t\t\t\t\tfloat d = dot(r, r);\n\n\t\t\t\t\tif (d < res.x)\n\t\t\t\t\t{\n\t\t\t\t\t\tid = dot(p + b, vec3(1.0, 57.0, 113.0));\n\t\t\t\t\t\tres = vec2(d, res.x);\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\telse if (d < res.y)\n\t\t\t\t\t{\n\t\t\t\t\t\tres.y = d;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn vec3(sqrt(res), abs(id));\n\t\t\t}\n\t\t\t',[i]);return{toon:new Bn('vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {\n\t\t\t\tfloat t = 0.0;\n\t\t\t\tfloat shadow = 1.0;\n\n\t\t\t\tif (positioning == 0) {\n\n\t\t\t\t\t// Can\'t do this mode if lighting is "none"\n\t\t\t\t\t#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))\n\n\t\t\t\t\t\t// Algorithm from Chapter 10 of Graphics Shaders\n\t\t\t\t\t\tconst vec3 weights = vec3(0.2125, 0.7154, 0.0721);\n\t\t\t\t\t\tvec3 lpos;\n\t\t\t\t\t\tvec3 l;\n\t\t\t\t\t\tfloat dproduct;\n\n\t\t\t\t\t\t#if (NUM_POINT_LIGHTS > 0)\n\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tPointLightShadow pointLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_POINT_LIGHTS; i++) {\n\t\t\t\t\t\t\t\t// Light positions are in view-space for some reason?\n\t\t\t\t\t\t\t\tlpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;\n\t\t\t\t\t\t\t\tl = normalize(lpos - worldPosition);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// TODO: we want to use "intensity" but it isn\'t available in the shader code\n\t\t\t\t\t\t\t\t//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);\n\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tpointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getPointShadow( \n\t\t\t\t\t\t\t\t\t\t\tpointShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowRadius,\n\t\t\t\t\t\t\t\t\t\t\tvPointShadowCoord[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowCameraNear, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowCameraFar);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#if NUM_DIR_LIGHTS > 0 \n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tDirectionalLightShadow directionalLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_DIR_LIGHTS; i++) {\n\t\t\t\t\t\t\t\t// Use the direction vector for directional lights instead\n\t\t\t\t\t\t\t\tl = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;\n\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tdirectionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getShadow( \n\t\t\t\t\t\t\t\t\t\tUNROLLED_LOOP_INDEX,\n\t\t\t\t\t\t\t\t\t\tdirectionalShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowRadius, \n\t\t\t\t\t\t\t\t\t\tvDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#if NUM_SPOT_LIGHTS > 0 \n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tSpotLightShadow spotLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_SPOT_LIGHTS; i++) {\n\t\t\t\t\t\t\t\tlpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;\n\t\t\t\t\t\t\t\tl = normalize(lpos - worldPosition);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tspotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getShadow(\n\t\t\t\t\t\t\t\t\t\tUNROLLED_LOOP_INDEX,\n\t\t\t\t\t\t\t\t\t\tspotShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowRadius, \n\t\t\t\t\t\t\t\t\t\tvSpotLightCoord[UNROLLED_LOOP_INDEX]);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\tt = clamp(t, 0.0, 1.0);\n\t\t\t\t\n\t\t\t\t\t#endif\n\n\t\t\t\t} else if (positioning == 1) {\n\t\t\t\t\t\n\t\t\t\t\tvec3 origin = mix(position, worldPosition, float(isWorldSpace));\n\t\t\t\t\tvec3 direction = normalize(source - origin);\n\t\t\t\t\tt = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;\t\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvec3 origin = worldPosition;\n\t\t\t\t\tvec3 source = cameraPosition - offset;\n\t\t\t\t\tvec3 direction = normalize(source - origin);\n\t\t\t\t\tt = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;\t\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\tif (noiseStrength > 0.0) {\n\t\t\t\t\t// Distort with noise\n\t\t\t\t\tvec3 st = position / noiseScale;\n\t\t\t\t\t\n\t\t\t\t\t// Voronoi "smooth" noise\n\t\t\t\t\tfloat noise = 1.0 - voronoiNoise(st).x;\n\n\t\t\t\t\t// Voronoi cellular noise\n\t\t\t\t\t//float noise = 1.0 - rand(voronoiNoise(st).z);\n\n\t\t\t\t\t// Position warp noise\n\t\t\t\t\t// vec3 offset = vec3(\n\t\t\t\t\t// \tsimplex3d(st),\n\t\t\t\t\t// \tsimplex3d(st + vec3(111.1, 143.89, 217.19)),\n\t\t\t\t\t// \tsimplex3d(st + vec3(171.1, 247.89, 117.23))\n\t\t\t\t\t// );\n\t\t\t\t\t// st += offset;\n\t\t\t\t\t// float noise = valueNoise(st);\n\n\t\t\t\t\tt += noise * noiseStrength;\n\t\t\t\t}\n\n\t\t\t\tt = clamp(t, 0.0, 1.0);\n\n\t\t\t\t// Compute ramp color\n\t\t\t\tfloat p;\n\t\t\t\tvec4 color = colors[0];\n\t\t\t\tfor (int i = 1; i < COLORS_MAX; i++) {\n\t\t\t\t\tp = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);\n\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t}\n\n\t\t\t\t// Incorporate custom shadow color\n\t\t\t\tif (positioning == 0) {\n\n\t\t\t\t\tvec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);\n\t\t\t\t\tcolor.rgb = mix(blendedShadow, color.rgb, shadow);\n\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\t// Accumulate alpha as usual\n\t\t\t\tfloat lalpha = alpha * color.a * mask;\n\t\t\t\tcalpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha;\n\n\t\t\t\treturn color.xyz;\n\n            }',[sd.simplex,e,n,r])}}();var bGe={textureBicubic:new Bn("float w0( float a ) {\n            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n        }\n    \n        float w1( float a ) {\n            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n        }\n    \n        float w2( float a ){\n            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n        }\n    \n        float w3( float a ) {\n            return ( 1.0 / 6.0 ) * ( a * a * a );\n        }\n    \n        // g0 and g1 are the two amplitude functions\n        float g0( float a ) {\n            return w0( a ) + w1( a );\n        }\n    \n        float g1( float a ) {\n            return w2( a ) + w3( a );\n        }\n    \n        // h0 and h1 are the two offset functions\n        float h0( float a ) {\n            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n        }\n    \n        float h1( float a ) {\n            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n        }\n    \n        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n            uv = uv * texelSize.zw + 0.5;\n    \n            vec2 iuv = floor( uv );\n            vec2 fuv = fract( uv );\n    \n            float g0x = g0( fuv.x );\n            float g1x = g1( fuv.x );\n            float h0x = h0( fuv.x );\n            float h1x = h1( fuv.x );\n            float h0y = h0( fuv.y );\n            float h1y = h1( fuv.y );\n    \n            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n    \n            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + \n                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n        }\n\n        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n            vec2 fLodSizeInv = 1.0 / fLodSize;\n            vec2 cLodSizeInv = 1.0 / cLodSize;\n            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n            return mix( fSample, cSample, fract( lod ) );\n        }")},$ne=class extends zs{constructor(e,t,n,i,r,s,o,a){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=n,this.transmissionSamplerSize=i,this.transmissionSamplerMap=r,this.transmissionDepthMap=s,this.aspectRatio=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,Ri.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let n=e.include($ne.Nodes.transmission),i=[];return i.push(this.thickness.build(e,"f")),i.push(this.ior.build(e,"f")),i.push(this.roughness.build(e,"f")),i.push(this.transmissionSamplerSize.build(e,"v2")),i.push(this.transmissionSamplerMap.getTexture(e,"t")),i.push(this.transmissionDepthMap.getTexture(e,"t")),i.push(this.aspectRatio.build(e,"v2")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(n+"("+i.join(",")+")",this.getType(e),t)}return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Kne=$ne;Kne.Nodes=function(){let e=new Bn("vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {\n                // Slightly modified version of this:\n                // https://www.shadertoy.com/view/ltScRG\n\n\t\t\t\t// Special case for blur == 0.0\n\t\t\t\tif (lod == 0.0) {\n\t\t\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\t\treturn texture2DLodEXT( sp, U, 0.0).rgb;\n\t\t\t\t\t#else\n\t\t\t\t\treturn textureLod( sp, U, 0.0).rgb;\n\t\t\t\t\t#endif\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvec2 texelSize = vec2(1.0) / resolution;\n                vec2 halton = haltonSequence[frameIndex];\n                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n                float temporalAngle  = temporalOffset * PI2;\n\t\t\t\tvec3 res = vec3(0.0);\n                vec2 uv = vec2(0.0);\n                vec2 offset = vec2(0.0);\n                vec2 vogelSample = vec2(0.0);\n                for (int i = 0; i < NUM_SAMPLES; i++) {\n                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;\n                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20\n                    uv = U + offset;\n                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));\n                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {\n                        uv = unrefractedU;\n                        lod = lod > 4.0 ? lod : lod / 2.0;\n                    }\n                    res += textureLod(sp, uv, lod).rgb;\n                }\n                return res / float(NUM_SAMPLES);\n            }"),t=new Bn("vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\t        // Direction of refracted light.\n\t\t        vec3 refractionVector = refract( -v,  n, 1.0 / ior );\n\t\t        \n\t\t\t\t// Compute rotation-independant scaling of the model matrix.\n\t\t        vec3 modelScale;\n\t\t        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\t        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\t        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\n\t\t        // The thickness is specified in local space\n\t\t        return normalize( refractionVector ) * thickness * modelScale;\n\t        }"),n=new Bn("float applyIorToRoughness( float roughness, float ior ) {\n\t\t\t\t// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and\n\t\t\t\t// an IOR of 1.5 results in the default amount of microfacet refraction.\n\t\t\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t\t\t}"),i=new Bn('vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {\n\t\t\t\t// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see\n\t\t\t\t// also the code in convertTransmission.ts, which runs during export\n\t\t\t\t#ifdef IS_THREEJS_EXPORT\n\t\t\t\t\tfloat lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);\n\t\t\t\t\treturn textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;\n\t\t\t\t#else\n\t\t\t\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t\t\t\tfloat lod = applyIorToRoughness(roughness, ior);\n\t\t\t\t\treturn blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);\n\t\t\t\t#endif\n\t\t\t}',[bGe.textureBicubic,n,e]),r=new Bn("vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\n\t\t\t\t// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\n\t\t\t\tvec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );\n\t\t\t\tvec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;\n\t\t\t\tunrefractedCoords += 1.0;\n\t\t\t\tunrefractedCoords /= 2.0;\n\n\t\t\t\t// Sample framebuffer to get pixel the refracted ray hits.\n\t\t\t\treturn getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );\n    \t\t}",[i,t]);return{transmission:new Bn("vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {\n                vec3 v = vec3(0.);\n                if (isOrthographic) {\n                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n                } else {\n                    v = normalize(vWPosition - cameraPosition);\n                }\n                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );\n                \n\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * alpha;\n\n\t\t\t\treturn transmission;\n            }",[r])}}();var SB=(e=>(e.NOISE="noise",e.MAP="map",e))(SB||{}),Zne=class extends zs{constructor(e,t,n,i,r,s,o,a,l,c,d){super("v3"),this.displacementTypeIndex=new Qs(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,"map"===Object.values(SB)[this.displacementTypeIndex.value]&&(this.mat=new Tne(this.movementOrTexture.value.matrix)),this.cropOrOffset=n,this.scale=c,this.noiseFunctionIndex=d,this.voronoiStyle=i,this.smoothness=r,this.seed=s,this.highCut=o,this.lowCut=a,this.quality=l}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let n,i=[];switch(i.push("displaced_position"),i.push("displaced_normal"),Object.values(SB)[this.displacementTypeIndex.value]){case"map":n=e.include(Zne.Nodes.map),i.push(this.movementOrTexture.getTexture(e,"t")),i.push("uv"),i.push(this.cropOrOffset.build(e,"f")),this.mat&&i.push(this.mat.build(e,"mat3"));break;case"noise":{let r=Object.values(PB)[this.noiseFunctionIndex.value],s=new Bn("vec3 orthogonal(vec3 v) {\n\t\t\t\t\t\t\treturn normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));\n\t\t\t\t\t\t}"),a=new Bn(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {\n\t\t\t\t\t\t\t${"voronoi"==r?`\n\t\t\t\t\tfloat v = ${r}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);\n\t\t\t\t\tv = remap(v, lowCut, highCut, 0.0, 1.0);\n\t\t\t\t\tv = smax(v, 0.0, smoothness * 0.25);\n\t\t\t\t\tv = smin(v, 1.0, smoothness * 0.25);\n\n\t\t\t\t\treturn p + n * v * intensity;\n\t\t\t\t\t`:`\n\t\t\t\t\treturn p + n * ${r}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;\n\t\t\t\t\t`}\n\t\t\t\t\t\t}`,[sd.simplex,sd.simplexFractal,sd.simplexAshima,sd.fbm,sd.perlin,sd.voronoi]),l=new Bn("vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {\n\t\t\t\t\t\t\tvec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);\n\t\t\t\t\t\t\tvec3 tangent1 = orthogonal(normal);\n\t\t\t\t\t\t\tvec3 tangent2 = normalize(cross(normal, tangent1));\n\n                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.\n                            // This caused some small oval/circular visual artifacts in the lighting.\n                            // For now, simply using neighbors further away betters the problem,\n                            // but we should figure out the underlying cause when we have some time.\n                            // Maybe its related to how we calculate the tangent and bitangent?\n\t\t\t\t\t\t\tvec3 nearby1 = position + tangent1;\n\t\t\t\t\t\t\tvec3 nearby2 = position + tangent2;\n\t\t\t\t\t\t\tvec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);\n\t\t\t\t\t\t\tvec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);\n\t\t\t\t\t\t\tdisplaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));\n\t\t\t\t\t\t\treturn displaced_position;\n\t\t\t\t\t\t}",[a,s]);n=e.include(l),i.push(this.scale.build(e,"f")),i.push(this.cropOrOffset.build(e,"v3")),i.push(this.movementOrTexture.build(e,"f")),i.push(this.voronoiStyle.build(e,"i")),i.push(this.smoothness.build(e,"f")),i.push(this.seed.build(e,"f")),i.push(this.highCut.build(e,"f")),i.push(this.lowCut.build(e,"f")),i.push(this.quality.build(e,"i"));break}}return i.push(this.intensity.build(e,"f")),i.push("displaced_normal"),e.format(n+"("+i.join(",")+")",this.getType(e),t)}return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Qne=Zne;Qne.Nodes=function(){let e=new Bn("vec3 orthogonal(vec3 v) {\n\t\t\t\treturn normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));\n\t\t\t}"),t=new Bn("float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {\n\t\t\t\tvec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;\n\t\t\t\tvec4 tmp = texture2D(tex, uvs);\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tif (crop > 0.5) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\treturn 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn col.r;\n\t\t\t}");return{map:new Bn("vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {\n\t\t\t\tvec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;\n\t\t\t\tvec3 tangent1 = normalize(orthogonal(normal));\n\t\t\t\tvec3 tangent2 = normalize(cross(normal, tangent1));\n\t\t\t\tvec3 nearby1 = position + tangent1 * 0.1;\n\t\t\t\tvec3 nearby2 = position + tangent2 * 0.1;\n\t\t\t\tvec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;\n\t\t\t\tvec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;\n\t\t\t\tdisplaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));\n\t\t\t\treturn displaced_position;\n\t\t\t}",[e,t])}}();var Ri={normalRenderTarget:new tm,normalRenderTargetDepth:new tm,transmissionRenderTarget:new tm,aspectRatio:new El,transmissionSize:new El(2048,2048),transmissionRenderTargetDepth:new tm,aoRenderTarget:new tm,aoEnabled:new Sc,pixelRatioNode:new ei(1),resolution:new El,penumbraSize:new t1(5,.5),frameIndex:new Qs(0),transmissionLod:new Qs(2)};for(let e of Object.values(Ri))e.isRenderGlobal=!0;var EB,Jne=class extends Ug{constructor(){super("basic"),this.nodeType="Basic",this.color=new Vo(Th),this.shadingAlpha=new ei(1),this.shadingBlend=new Qs(0),this.previousModelViewMatrix=new Ap,this.previouseProjectionMatrix=new Ap}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({resolution:Ri.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(N_.merge([Fn.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join("\n"));let i=["#include <beginnormal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#if defined( USE_LAYER_DISPLACE )\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif /* !USE_LAYER_DISPLACE */\n\t\t\t\t"];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","\tvNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join("\n")}else{void 0===this.color&&(this.color=new Vo(Th)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let n=this.color.flow(e,"c",{slot:"color"}),i=this.alpha?this.alpha.flow(e,"f"):void 0,r=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=void 0!==i,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join("\n"));let o=["#include <normal_fragment_begin>",n.code];i&&o.push(i.code,"#ifdef ALPHATEST"," if ( "+i.result+" <= ALPHATEST ) discard;","#endif"),s?o.push(s.code,`vec3 outgoingLight = ${n.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${s.result}, 1.0, SPE_BLENDING_NORMAL);`):o.push(`vec3 finalColor = ${n.result};`);let a="1.0";this.mask&&(this.mask.analyze(e),a=`luminance(${this.mask.flow(e,"v3").result})`),o.push(i?`gl_FragColor = vec4( finalColor, accumAlpha * ${i.result} * ${a} );`:"gl_FragColor = vec4("+n.result+", 1.0 );"),r&&o.push(`gl_FragColor.a *= ${r.result};`),o.push("#include <fog_fragment>","#include <dithering_fragment>"),t=o.join("\n")}return t}},wGe=class extends Ug{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new Vo(Th),this.emissive=new Vo(0),this.emissiveIntensity=new ei(1),this.previousModelViewMatrix=new Ap,this.previouseProjectionMatrix=new Ap,this.shadingAlpha=new ei(1),this.shadingBlend=new Qs(0),this.occlusion=new Sc(!0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({resolution:Ri.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(N_.merge([Fn.fog,Fn.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","\tvarying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let i=["#include <beginnormal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("\t#include <project_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\n\t\t\t\t\tvec3 diffuse = vec3( 1.0 );\n\t\t\t\t\tGeometricContext geometry;\n\t\t\t\t\tgeometry.position = mvPosition.xyz;\n\t\t\t\t\tgeometry.normal = normalize( transformedNormal );\n\t\t\t\t\tgeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\t\t\t\t"),i.push("\n\t\t\t\t\tGeometricContext backGeometry;\n\t\t\t\t\tbackGeometry.position = geometry.position;\n\t\t\t\t\tbackGeometry.normal = -geometry.normal;\n\t\t\t\t\tbackGeometry.viewDir = geometry.viewDir;\n\t\t\t\t\tvLightFront = vec3( 0.0 );\n\t\t\t\t\tvIndirectFront = vec3( 0.0 );\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\tvLightBack = vec3( 0.0 );\n\t\t\t\t\t\tvIndirectBack = vec3( 0.0 );\n\t\t\t\t\t#endif\n\t\t\t\t\tIncidentLight directLight;\n\t\t\t\t\tfloat dotNL;\n\t\t\t\t\tvec3 directLightColor_Diffuse;\n\t\t\t\t\tvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\tvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\t\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_POINT_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_SPOT_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_DIR_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_HEMI_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join("\n")}else{e.mergeUniform({penumbraSize:Ri.penumbraSize}),e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({aoMap:Ri.aoRenderTarget}),e.mergeUniform({aoEnabled:Ri.aoEnabled}),void 0===this.color&&(this.color=new Vo(Th)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let n=this.color.flow(e,"c",{slot:"color"}),i=this.emissive.flow(e,"c",{slot:"emissive"}),r=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),s=this.occlusion.flow(e,"b",{slot:"occlusion"}),o=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=void 0!==c,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","\tvarying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join("\n"));let h=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx, viewdy));\n\t\t\t\tbool isFrontFacing = (dot(normal, faceNormal) >= 0.0);\n\t\t\t\t","#include <clipping_planes_fragment>"];h.push(n.code,"vec3 diffuseColor = "+n.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),c&&h.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),h.push("#ifdef DOUBLE_SIDED","\treflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","\treflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","\treflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","\treflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),i&&h.push(i.code,"reflectedLight.directDiffuse += "+i.result+" * "+r.result+";"),h.push("vec3 ao = aoEnabled && "+s.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let u="1.0";this.mask&&(this.mask.analyze(e),u=`luminance(${this.mask.flow(e,"v3").result})`),h.push(`\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${u} * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${u}, ${a.result} );\n\n\t\t\t\t\toutgoingLight *= ao;\n\t\t\t\t}\n\t\t\t\t`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),h.push(c?`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`:"gl_FragColor = vec4( outgoingLight, 1.0 );"),d&&h.push(`gl_FragColor.a *= ${d.result};`),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join("\n")}return t}},jb={dHdxy:new Bn("vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {\n\n            // Gradient of UVs w.r.t. X coordinate (in screen-space)\n            vec2 dSTdx = dFdx(bumpMapUv);\n\n            // Gradient of UVs w.r.t. Y coordinate (in screen-space)\n            vec2 dSTdy = dFdy(bumpMapUv);\n            \n            // Forward differencing\n            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);\n            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;\n            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;\n            \n            return vec2( dBx, dBy );\n        }"),perturbNormalArb:new Bn("vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n            vec3 vSigmaX = dFdx( surf_pos.xyz );\n            vec3 vSigmaY = dFdy( surf_pos.xyz );\n            vec3 vN = surf_norm; // normalized\n            \n            vN = normalize(vN);\n\n            vec3 R1 = cross( vSigmaY, vN );\n            vec3 R2 = cross( vN, vSigmaX );\n\n            R1 = normalize(R1);\n            R2 = normalize(R2);\n    \n            float fDet = dot( vSigmaX, R1 ) * faceDirection;\n    \n            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n            return normalize( abs( fDet ) * vN - vGrad );\n        }")},MGe=class extends Ug{constructor(){super("phong"),this.nodeType="Phong",this.color=new Vo(Th),this.specular=new Vo(1118481),this.shininess=new ei(30),this.previousModelViewMatrix=new Ap,this.previouseProjectionMatrix=new Ap,this.shadingAlpha=new ei(1),this.shadingBlend=new Qs(0),this.occlusion=new Sc(!0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({resolution:Ri.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(N_.merge([Fn.fog,Fn.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let i=["#include <beginnormal_vertex>","\n\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t#include <skinnormal_vertex>\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = objectNormal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("\t#include <project_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join("\n")}else{e.mergeUniform({penumbraSize:Ri.penumbraSize}),e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({aoMap:Ri.aoRenderTarget}),e.mergeUniform({aoEnabled:Ri.aoEnabled}),void 0===this.color&&(this.color=new Vo(Th)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let n=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),s=this.shininess.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=void 0!==c,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join("\n"));let h=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tBlinnPhongMaterial material;"];if(this.bumpMap){e.include(jb.dHdxy),e.include(jb.perturbNormalArb);let p=this.bumpMap.texture.flow(e,"t"),m=this.bumpMap.flow(e,"v3"),v=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",g="";g=4===this.bumpMap.projection.value?`\n\t\t\t\t\tvec3 bumpNormal = vec3(0.0);\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;\n\n\t\t\t\t\t\tvec2 grad0 = dHdxy(${p.result}, uv0, ${v});\n\t\t\t\t\t\tvec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);\n\n\t\t\t\t\t\tvec2 grad1 = dHdxy(${p.result}, uv1, ${v});\n\t\t\t\t\t\tvec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);\n\n\t\t\t\t\t\tvec2 grad2 = dHdxy(${p.result}, uv2, ${v});\n\t\t\t\t\t\tvec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);\n\t\t\t\t\t\t\n\t\t\t\t\t\tbumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;\n\t\t\t\t\t\tbumpNormal = normalize(bumpNormal);\n\t\t\t\t\t}\n\n\t\t\t\t\tnormal = bumpNormal;\n\t\t\t\t\t`:`\n\t\t\t\t\tvec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;\n\t\t\t\t\tvec2 grad = dHdxy(${p.result}, bumpMapCachedUv, ${v});\n\t\t\t\t\tnormal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );\n\t\t\t\t\t`,h.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t${m.result};\n\t\t\t\t\t${g}\n\t\t\t\t\t`)}h.push(i.code,"\tvec3 diffuseColor = "+i.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","\tvec3 totalEmissiveRadiance = emissive;",r.code,"\tvec3 specular = "+r.result+";",s.code,"\tfloat shininess = max( 0.0001, "+s.result+" );","\tfloat specularStrength = 1.0;"),c&&h.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 ao = aoEnabled && "+n.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let u="1.0";this.mask&&(this.mask.analyze(e),u=`luminance(${this.mask.flow(e,"v3").result})`),h.push(`\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${u} * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${u}, ${a.result} );\n\t\t\t\t\t\n\t\t\t\t\toutgoingLight *= ao;\n\t\t\t\t}\n\t\t\t\t`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),h.push(c?`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result});`:"gl_FragColor = vec4( outgoingLight, 1.0 );"),d&&h.push(`gl_FragColor.a *= ${d.result};`),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join("\n")}return t}},CGe=class extends Ug{constructor(){super("standard"),this.nodeType="Standard",this.color=new Vo(Th),this.roughness=new ei(.3),this.metalness=new ei(0),this.reflectivity=new ei(.5),this.previousModelViewMatrix=new Ap,this.previouseProjectionMatrix=new Ap,this.shadingAlpha=new ei(1),this.shadingBlend=new Qs(0),this.occlusion=new Sc(!0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({resolution:Ri.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(N_.merge([Fn.fog,Fn.lights])),Fn.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let i=["#include <beginnormal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#if defined( USE_LAYER_DISPLACE )\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif /* !USE_LAYER_DISPLACE */\n\t\t\t\t"];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join("\n")}else{e.mergeUniform({penumbraSize:Ri.penumbraSize}),e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({aoMap:Ri.aoRenderTarget}),e.mergeUniform({aoEnabled:Ri.aoEnabled});let n={gamma:!0};void 0===this.color&&(this.color=new Vo(Th)),this.color.analyze(e,{slot:"color",context:n}),this.roughness.analyze(e),this.metalness.analyze(e);let i=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let r=this.color.flow(e,"c",{slot:"color",context:n}),s=this.roughness.flow(e,"f"),o=this.metalness.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),c=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,d=this.alpha?this.alpha.flow(e,"f"):void 0,h=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,u=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=void 0!==d,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join("\n"));let p=["#include <clipping_planes_fragment>","\t#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tPhysicalMaterial material;","\tmaterial.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(jb.dHdxy),e.include(jb.perturbNormalArb);let v=this.bumpMap.texture.flow(e,"t"),g=this.bumpMap.flow(e,"v3"),b=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",x="";x=4===this.bumpMap.projection.value?`\n\t\t\t\t\tvec3 bumpNormal = vec3(0.0);\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;\n\n\t\t\t\t\t\tvec2 grad0 = dHdxy(${v.result}, uv0, ${b});\n\t\t\t\t\t\tvec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);\n\n\t\t\t\t\t\tvec2 grad1 = dHdxy(${v.result}, uv1, ${b});\n\t\t\t\t\t\tvec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);\n\n\t\t\t\t\t\tvec2 grad2 = dHdxy(${v.result}, uv2, ${b});\n\t\t\t\t\t\tvec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);\n\t\t\t\t\t\t\n\t\t\t\t\t\tbumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;\n\t\t\t\t\t\tbumpNormal = normalize(bumpNormal);\n\t\t\t\t\t}\n\n\t\t\t\t\tnormal = bumpNormal;\n\t\t\t\t\t`:`\n\t\t\t\t\tvec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;\n\t\t\t\t\tvec2 grad = dHdxy(${v.result}, bumpMapCachedUv, ${b});\n\t\t\t\t\tnormal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );\n\t\t\t\t\t`,p.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t${g.result};\n\t\t\t\t\t${x}\n\t\t\t\t\t`)}if(p.push(r.code,"\tvec3 diffuseColor = "+r.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",o.code,"\tfloat metalnessFactor = "+o.result+";"),this.roughnessMap){let v=this.roughnessMap.texture.flow(e,"t"),g=this.roughnessMap.flow(e,"v3"),b="";b=4===this.roughnessMap.projection.value?`\n\t\t\t\t\tfloat roughnessChange = 1.0;\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;\n\n\t\t\t\t\t\tfloat r0 = luminance(texture(${v.result}, uv0).rgb) * roughnessScale;\n\t\t\t\t\t\tfloat r1 = luminance(texture(${v.result}, uv1).rgb) * roughnessScale;\n\t\t\t\t\t\tfloat r2 = luminance(texture(${v.result}, uv2).rgb) * roughnessScale;\n\n\t\t\t\t\t\troughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);\n\t\t\t\t\t}\n\t\t\t\t\tfloat roughnessFactor = roughnessChange * ${s.result};\n\t\t\t\t\t`:`\n\t\t\t\t\tvec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;\n\n\t\t\t\t\tvec4 vals = texture(${v.result},  roughnessMapCachedUv);\n\t\t\t\t\tfloat roughnessFactor = luminance(vals.rgb) * ${s.result};\n\t\t\t\t\t`,p.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t${g.result};\n\n\t\t\t\t\tconst float roughnessScale = 1.0;\n\n\t\t\t\t\t${b}\n\t\t\t\t`)}else p.push(s.code,"\tfloat roughnessFactor = "+s.result+";");d&&p.push(d.code,"#ifdef ALPHATEST","\tif ( "+d.result+" <= ALPHATEST ) discard;","#endif"),p.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),p.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),u?p.push(u.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+u.result+" ) ), diffuseColor, metalnessFactor );"):p.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),p.push("#include <lights_fragment_begin>"),p.push("#include <lights_fragment_end>"),p.push("vec3 ao = aoEnabled && "+i.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let m="1.0";this.mask&&(this.mask.analyze(e),m=`luminance(${this.mask.flow(e,"v3").result})`),p.push(`\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${m} * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${m}, ${l.result} );\n\t\t\t\t\t\n\t\t\t\t\toutgoingLight *= ao;\n\t\t\t\t}\n\t\t\t\t`),c&&p.push(c.code,`outgoingLight = spe_blend(outgoingLight, ${c.result}, 1.0, SPE_BLENDING_NORMAL);`),p.push(d?`gl_FragColor = vec4( outgoingLight, accumAlpha * ${d.result} );`:"gl_FragColor = vec4( outgoingLight, 1.0 );"),h&&p.push(`gl_FragColor.a *= ${h.result};`),p.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=p.join("\n")}return t}},PGe=class extends Ug{constructor(){super("toon"),this.nodeType="Toon",this.color=new Vo(Th),this.specular=new Vo(1118481),this.shininess=new ei(30),this.previousModelViewMatrix=new Ap,this.previouseProjectionMatrix=new Ap,this.shadingAlpha=new ei(1),this.shadingBlend=new Qs(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({resolution:Ri.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(N_.merge([Fn.fog,Fn.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let i=["#include <beginnormal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("\t#include <project_vertex>","\t#include <fog_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join("\n")}else{e.mergeUniform({penumbraSize:Ri.penumbraSize}),e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({aoMap:Ri.aoRenderTarget}),e.mergeUniform({aoEnabled:Ri.aoEnabled}),void 0===this.color&&(this.color=new Vo(Th)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let n=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),r=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),a=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=void 0!==l,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>","\n\t\t\t\t\tvarying vec3 vViewPosition;\n\t\t\t\t\tstruct ToonMaterial {\n\t\t\t\t\t\tvec3\tdiffuseColor;\n\t\t\t\t\t\tvec3\tspecularColor;\n\t\t\t\t\t\tfloat\tspecularShininess;\n\t\t\t\t\t\tfloat\tspecularStrength;\n\t\t\t\t\t};\n\t\t\t\t\tvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t\t\t\n\t\t\t\t\t\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\t\t\t\t\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n\t\t\t\t\t}\n\t\t\t\t\tvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\t\t\t\t}\n\t\t\t\t\t#define RE_Direct\t\t\t\tRE_Direct_Toon\n\t\t\t\t\t#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\t\t\t\t\t#define Material_LightProbeLOD( material )\t(0)\n\t\t\t\t\t","#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join("\n"));let d=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tToonMaterial material;"];if(this.bumpMap){e.include(jb.dHdxy),e.include(jb.perturbNormalArb);let u=this.bumpMap.texture.flow(e,"t"),p=this.bumpMap.flow(e,"v3"),m=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",v="";v=4===this.bumpMap.projection.value?`\n\t\t\t\t\tvec3 bumpNormal = vec3(0.0);\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;\n\n\t\t\t\t\t\tvec2 grad0 = dHdxy(${u.result}, uv0, ${m});\n\t\t\t\t\t\tvec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);\n\n\t\t\t\t\t\tvec2 grad1 = dHdxy(${u.result}, uv1, ${m});\n\t\t\t\t\t\tvec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);\n\n\t\t\t\t\t\tvec2 grad2 = dHdxy(${u.result}, uv2, ${m});\n\t\t\t\t\t\tvec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);\n\t\t\t\t\t\t\n\t\t\t\t\t\tbumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;\n\t\t\t\t\t\tbumpNormal = normalize(bumpNormal);\n\t\t\t\t\t}\n\n\t\t\t\t\tnormal = bumpNormal;\n\t\t\t\t\t`:`\n\t\t\t\t\tvec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;\n\t\t\t\t\tvec2 grad = dHdxy(${u.result}, bumpMapCachedUv, ${m});\n\t\t\t\t\tnormal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );\n\t\t\t\t\t`,d.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t${p.result};\n\t\t\t\t\t${v}\n\t\t\t\t\t`)}d.push(n.code,"\tvec3 diffuseColor = "+n.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"\tvec3 specular = "+i.result+";",r.code,"\tfloat shininess = max( 0.0001, "+r.result+" );","\tfloat specularStrength = 1.0;"),l&&d.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),d.push("material.diffuseColor = diffuseColor;"),d.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),d.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),d.push(`\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${h} * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${h}, ${o.result} );\n\t\t\t\t}\n\t\t\t\t`),a&&d.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),d.push(l?`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`:"gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&d.push(`gl_FragColor.a *= ${c.result};`),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=d.join("\n")}return t}},SGe=class{constructor(e=1e4){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){return this.cache.get(e)?.data}load(e){let t=Date.now(),n=this.cache.get(e);return void 0===n?(n={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,n)):(n.time=t,n.prev.next=n.next,n.next.prev=n.prev),n.prev=this.tail.prev,n.next=this.tail,this.tail.prev.next=n,this.tail.prev=n,this.scheduleCleanup(),n.data}},EGe=class extends SGe{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}},AGe=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount-=1,0===this.refCount&&(this.cache.remove(this),this.dispose())}dispose(){}},TGe=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let t=this.cache.get(e);return void 0===t&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},eie=class extends AGe{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isVideo="video"===e.type,this.updateSrc(e.data)}updateSrc(e){var t=this;return(0,xo.Z)(function*(){if(typeof document>"u")return;t.disposeTextures(),t.loaded=!1;let n=()=>{t.loaded=!0;let r=[1e3,1001,1002];for(let s of r){let o=t[s];o&&(o.image=t.img,o.needsUpdate=!0)}t.shared.requestRender()};if(t.isVideo){if(t.img=document.createElement("video"),t.img.preload="auto",t.img.playsInline=!0,t.img.currentTime=.01,"string"!=typeof e){var i=new FileReader;let r;i.readAsDataURL(new Blob([e],{type:"video/mp4"})),yield new Promise(s=>{i.onloadend=o=>{r=o.target?.result,s(null)}}),t.img.src=r}else t.img.src=e;t.img.onloadeddata=()=>{n()}}else t.img=new Image,t.img.src=function OGe(e){return"string"==typeof e?e:(EB||(EB=new EGe),EB.load(e))}(e),t.img.onload=n})()}getTexture(e){let t=this[e];if(t)return t;{let n;return n=this.isVideo?new S4e(this.img,void 0,e,e):new Wa(this.img,void 0,e,e),this.loaded&&(n.needsUpdate=!0),this[e]=n,n}}disposeTextures(){this[1e3]?.dispose(),this[1e3]=void 0,this[1001]?.dispose(),this[1001]=void 0,this[1002]?.dispose(),this[1002]=void 0}dispose(){super.dispose(),this.disposeTextures()}},i1=class extends eie{};var IGe={year:0,month:1,day:2,hour:3,minute:4,second:5},OB={};function tie(e,t,n,i,r,s,o){var a=new Date(0);return a.setUTCFullYear(e,t,n),a.setUTCHours(i,r,s,o),a}var nie=36e5,LGe=6e4,AB={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function iie(e,t,n){var i,r,s;if(!e||(i=AB.timezoneZ.exec(e)))return 0;if(i=AB.timezoneHH.exec(e))return rie(s=parseInt(i[1],10))?-s*nie:NaN;if(i=AB.timezoneHHMM.exec(e)){s=parseInt(i[1],10);var o=parseInt(i[2],10);return rie(s,o)?(r=Math.abs(s)*nie+o*LGe,s>0?-r:r):NaN}if(function zGe(e){if(sie[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),sie[e]=!0,!0}catch{return!1}}(e)){t=new Date(t||Date.now());var a=n?t:function FGe(e){return tie(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}(t),l=TB(a,e),c=n?l:function BGe(e,t,n){var r=e.getTime()-t,s=TB(new Date(r),n);if(t===s)return t;r-=s-t;var o=TB(new Date(r),n);return s===o?s:Math.max(s,o)}(t,l,e);return-c}return NaN}function TB(e,t){var n=function DGe(e,t){var n=function NGe(e){if(!OB[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z"));OB[e]="06/25/2014, 00:00:00"===t||"\u200e06\u200e/\u200e25\u200e/\u200e2014\u200e \u200e00\u200e:\u200e00\u200e:\u200e00"===t?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return OB[e]}(t);return n.formatToParts?function RGe(e,t){try{for(var n=e.formatToParts(t),i=[],r=0;r<n.length;r++){var s=IGe[n[r].type];s>=0&&(i[s]=parseInt(n[r].value,10))}return i}catch(o){if(o instanceof RangeError)return[NaN];throw o}}(n,e):function kGe(e,t){var n=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[i[3],i[1],i[2],i[4],i[5],i[6]]}(n,e)}(e,t),i=tie(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),r=e.getTime(),s=r%1e3;return i-(r-(s>=0?s:1e3+s))}function rie(e,t){return-23<=e&&e<=23&&(null==t||0<=t&&t<=59)}var sie={},UGe=al(cDe(),1),oie=al(dDe(),1),DB=36e5,aie=6e4,HGe=2,Ec={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/};function lie(e,t,n){t=t||0,n=n||0;var i=new Date(0);i.setUTCFullYear(e,0,4);var s=7*t+n+1-(i.getUTCDay()||7);return i.setUTCDate(i.getUTCDate()+s),i}var $Ge=[31,28,31,30,31,30,31,31,30,31,30,31],KGe=[31,29,31,30,31,30,31,31,30,31,30,31];function cie(e){return e%400==0||e%4==0&&e%100!=0}function die(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;var i=cie(e);if(i&&n>KGe[t]||!i&&n>$Ge[t])return!1}return!0}function hie(e,t,n){return!(t<0||t>52||null!=n&&(n<0||n>6))}function IB(e,t,n){return!(null!=e&&(e<0||e>=25)||null!=t&&(t<0||t>=60)||null!=n&&(n<0||n>=60))}function Oc(e,t){return t.color(e)}function uie(e=new Date,t){let n=t.format,i=e.getSeconds(),r=e;t&&null!==t.timeZone&&(r=function QGe(e,t,n){var i=function GGe(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var n=t||{},i=null==n.additionalDigits?HGe:(0,UGe.default)(n.additionalDigits);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var r=function WGe(e){var i,t={},n=Ec.dateTimePattern.exec(e);if(n?(t.date=n[1],i=n[3]):(n=Ec.datePattern.exec(e))?(t.date=n[1],i=n[2]):(t.date=null,i=e),i){var r=Ec.timeZone.exec(i);r?(t.time=i.replace(r[1],""),t.timeZone=r[1].trim()):t.time=i}return t}(e),s=function qGe(e,t){var r,n=Ec.YYY[t],i=Ec.YYYYY[t];if(r=Ec.YYYY.exec(e)||i.exec(e)){var s=r[1];return{year:parseInt(s,10),restDateString:e.slice(s.length)}}if(r=Ec.YY.exec(e)||n.exec(e)){var o=r[1];return{year:100*parseInt(o,10),restDateString:e.slice(o.length)}}return{year:null}}(r.date,i),l=function XGe(e,t){if(null===t)return null;var n,i,r,s;if(0===e.length)return(i=new Date(0)).setUTCFullYear(t),i;if(n=Ec.MM.exec(e))return i=new Date(0),die(t,r=parseInt(n[1],10)-1)?(i.setUTCFullYear(t,r),i):new Date(NaN);if(n=Ec.DDD.exec(e)){i=new Date(0);var o=parseInt(n[1],10);return function ZGe(e,t){if(t<1)return!1;var n=cie(e);return!(n&&t>366||!n&&t>365)}(t,o)?(i.setUTCFullYear(t,0,o),i):new Date(NaN)}if(n=Ec.MMDD.exec(e)){i=new Date(0),r=parseInt(n[1],10)-1;var a=parseInt(n[2],10);return die(t,r,a)?(i.setUTCFullYear(t,r,a),i):new Date(NaN)}if(n=Ec.Www.exec(e))return hie(0,s=parseInt(n[1],10)-1)?lie(t,s):new Date(NaN);if(n=Ec.WwwD.exec(e)){s=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return hie(0,s,l)?lie(t,s,l):new Date(NaN)}return null}(s.restDateString,s.year);if(isNaN(l))return new Date(NaN);if(l){var h,c=l.getTime(),d=0;if(r.time&&(d=function YGe(e){var t,n,i;if(t=Ec.HH.exec(e))return IB(n=parseFloat(t[1].replace(",",".")))?n%24*DB:NaN;if(t=Ec.HHMM.exec(e))return IB(n=parseInt(t[1],10),i=parseFloat(t[2].replace(",",".")))?n%24*DB+i*aie:NaN;if(t=Ec.HHMMSS.exec(e)){n=parseInt(t[1],10),i=parseInt(t[2],10);var r=parseFloat(t[3].replace(",","."));return IB(n,i,r)?n%24*DB+i*aie+1e3*r:NaN}return null}(r.time),isNaN(d)))return new Date(NaN);if(r.timeZone||n.timeZone){if(h=iie(r.timeZone||n.timeZone,new Date(c+d)),isNaN(h))return new Date(NaN)}else h=(0,oie.default)(new Date(c+d)),h=(0,oie.default)(new Date(c+d+h));return new Date(c+d+h)}return new Date(NaN)}(e,n),r=iie(t,i,!0),s=new Date(i.getTime()-r),o=new Date(0);return o.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),o.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),o}(new Date,t.timeZone));let a,s=r.getHours(),o=r.getMinutes();"12ampm"===t.format12h24h&&(a=s>=12?"PM":"AM");let c,d,l=s;switch("24"!==t.format12h24h&&(l=s%12,0===l&&(l=12)),n){case"HH:mm:ss":c=[l,o,i];break;case"HH:mm":c=[l,o];break;case"HH":c=[l],a=void 0;break;case"mm":c=[o],a=void 0;break;case"ss":c=[i],a=void 0;break;case"year":d=r.getFullYear();break;case"month":d=r.getMonth()+1;break;case"dayOfYear":d=Math.floor((r.getTime()-new Date(r.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":d=r.getDate();break;case"secondOfDay":d=60*s*60+60*o+i;break;default:console.error("Unknown time format",n),d=0}return void 0!==c?{textValue:c,suffix:a}:d}function eWe(e){return{type:e.type}}function xu(e,t){let{alpha:n,mode:i,isMask:r}=e,s="string"==typeof n?(Number(t.getVariable(n))??100)/100:n;return{...eWe(e),alpha:s,mode:i,isMask:r}}var uT=class extends nd{},pie={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},fie={depth:["colors"]};function uWe(e,t,n){if("isMask"===t)return!0;let i=pie[e.type],r=fie[e.type];if(void 0!==r){let s=e.color;if(r.includes(t)){let o=s[t]?.value?.length;if(void 0!==o&&o!==n.length)return!0}}return void 0!==i&&i.includes(t)}function mie(e,t,n){let i=n.uniforms[`f${n.id}_texture`];if(!i)return!1;let s=e;if("image"in s){let a=t.image(s.image),l=i;l.image instanceof i1||l.image.deref(),l.image=a}if("video"in s){let a=t.video(s.video),l=i;l.image instanceof i1||l.image.deref(),l.image=a}if("wrapping"in s&&(i.wrap=s.wrapping),"repeat"in s||"offset"in s){let a=n.uniforms[`f${n.id}_mat`];"repeat"in s&&(a.repeat=s.repeat),"offset"in s&&(a.offset=s.offset),a.updateMatrix()}return!1}var r1=(e,t,n)=>Math.max(0,Math.min(1,Number(t.getVariable("number"==typeof e?100*e:e,n)??100)/100))??1,s1=class{constructor(e,t,n,i,r){this.id=e,this.uuid=t,this.data=n,this.uniforms={};for(let s in i)this.uniforms[`f${this.id}_${s}`]=i[s];for(let s in n)vie(s,this,n,r)}get type(){return this.data.type}static create(e,t,n,i){if("light"===n.type)return rm.createLigherLayer(e,t,n,i);if("texture"===n.type||"video"===n.type){let r="texture"===n.type?i.image(n.texture.image):i.video(n.texture.video),s=new wB(r,n.texture.wrapping),o=new vGe(r),a=new yGe(n.texture.repeat,n.texture.offset),l=new ei(n.crop?1:0),c=new Qs(n.projection??0),d=new Qs(["x","y","z"].indexOf(n.axis)??0),h=new Qs(n.side??0),u=new El(n.size?new tt(n.size[0],n.size[1]):new tt(100,100)),p=new ei(n.blending??0),m=new ei(r1(n.alpha,i)),v=new Qs(n.mode??0),g=new Sc(n.isMask??!1),b=new CB(s,o,l,c,d,h,u,p,a,m,v,g),x=new lo(b.calpha,"f");return new jo(e,t,n,{texture:s,textureSize:o,crop:l,projection:c,axis:d,side:h,size:u,blending:p,mat:a,alpha:m,mode:v,isMask:g},b,v,x,g,i)}if("matcap"===n.type){let r=i.image(n.texture.image),s=new wB(r,n.texture.wrapping),o=new ei(r1(n.alpha,i)),a=new Qs(n.mode??0),l=new Sc(n.isMask??!1),c=new Une(s,o,a,l),d=new lo(c.calpha,"f");return new jo(e,t,n,{texture:s,alpha:o,mode:a,isMask:l},c,a,d,l,i)}if("displace"===n.type){if("noise"===n.displacementType){let r=new Dh(new oe(...n.offset)),s=new ei(n.scale??10),o=new ei(n.intensity??8),a=new ei(n.movement??1),l=new Qs(n.noiseType??0),c=new Qs(n.voronoiStyle??0),d=new ei(n.smoothness??.5),h=new ei(n.seed??0),u=new ei(n.highCut??1),p=new ei(n.lowCut??0),m=new Qs(n.quality??1),v=new Qne(o,a,r,c,d,h,u,p,m,s,l);return new gie(e,t,n,{offset:r,scale:s,intensity:o,movement:a,noiseType:l,voronoiStyle:c,smoothness:d,seed:h,highCut:u,lowCut:p,quality:m},v,i)}throw new Error}return function gWe(e,t,n,i){let r=function JGe(e,t){switch(e.type){case"fresnel":return function nWe(e,t){let{bias:n,scale:i,intensity:r,factor:s,color:o}=e;return{...xu(e,t),color:Oc(o,t),bias:n,scale:i,intensity:r,factor:s}}(e,t);case"gradient":return function iWe(e,t){let{gradientType:n,smooth:i,colors:r,steps:s,angle:o,offset:a,morph:l}=e;return{...xu(e,t),gradientType:n,smooth:i,colors:r.map(c=>new mr(c[0],c[1],c[2],c[3])),num:r.length,steps:s,offset:new tt(...a),morph:new tt(...l),angle:o}}(e,t);case"depth":return function rWe(e,t){let{gradientType:n,near:i,far:r,isVector:s,isWorldSpace:o,origin:a,direction:l,colors:c,steps:d,smooth:h}=e;return{...xu(e,t),gradientType:n,near:i,far:r,isVector:s,isWorldSpace:o,origin:new oe(...a),direction:l?new oe(...l):new oe(1,0,0),colors:c.map(u=>void 0!==u?new mr(u[0],u[1],u[2],u[3]):new mr(0,0,0,0)),steps:d.slice(0,c.length),smooth:h}}(e,t);case"normal":return function sWe(e,t){let{cnormal:n}=e;return{...xu(e,t),cnormal:new oe(n[0],n[1],n[2])}}(e,t);case"noise":return function oWe(e,t){return{...xu(e,t),scale:e.scale,move:e.move,fA:new tt(...e.fA),fB:new tt(...e.fB),size:new oe(...e.size),distortion:new tt(...e.distortion),colorA:Oc(e.colorA,t),colorB:Oc(e.colorB,t),colorC:Oc(e.colorC,t),colorD:Oc(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}(e,t);case"rainbow":return function aWe(e,t){return{...xu(e,t),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new oe(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new oe(...e.offset)}}(e,t);case"toon":return function lWe(e,t){return{...xu(e,t),positioning:e.positioning,colors:e.colors.map(n=>new mr(n[0],n[1],n[2],n[3])),num:e.colors.length,steps:e.steps,source:new oe(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:Oc(e.shadowColor,t),offset:new oe(...e.offset)}}(e,t);case"outline":return function cWe(e,t){return{...xu(e,t),outlineColor:Oc(e.outlineColor,t),contourColor:Oc(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new oe(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}(e,t);case"transmission":return function dWe(e,t){return{...xu(e,t),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}(e,t);case"color":return function tWe(e,t){return{...xu(e,t),color:Oc(e.color,t)}}(e,t);case"pattern":return function hWe(e,t){return{...xu(e,t),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new tt(...e.offset),colorA:Oc(e.colorA,t),colorB:Oc(e.colorB,t),frequency:new tt(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new tt(...e.vertical),horizontal:new tt(...e.horizontal),sides:e.sides}}(e,t)}}(n,i);return function mWe(e,t,n,i,r){switch(e.type){case"color":{let s=new Vo(i.color??Th),o=Ih(i),a=new MB(s,o.alpha),l=new lo(a.calpha,"f");return new jo(t,n,e,{color:s,...o},a,o.mode,l,o.isMask,r)}case"fresnel":{let s=new Vo(i.color??16777215),o=new ei(i.bias??.1),a=new ei(i.scale??1),l=new ei(i.intensity??2),c=new ei(i.factor??1),d=Ih(i),h=new _Ge(s,o,a,l,c,d.alpha,d.mode,d.isMask),u=new lo(h.calpha,"f");return new jo(t,n,e,{color:s,bias:o,scale:a,intensity:l,factor:c,...d},h,d.mode,u,d.isMask,r)}case"rainbow":{let s=new ei(i.filmThickness??30),o=new ei(i.movement??0),a=new Dh(i.wavelengths??new oe(0,0,0)),l=new ei(i.noiseStrength??0),c=new ei(i.noiseScale??1),d=new Dh(i.offset??new oe(0,0,0)),h=Ih(i),u=new qne(s,o,a,l,c,d,h.alpha,h.isMask),p=new lo(u.calpha,"f");return new jo(t,n,e,{filmThickness:s,movement:o,wavelengths:a,noiseStrength:l,noiseScale:c,offset:d,...h},u,h.mode,p,h.isMask,r)}case"transmission":{let s=new ei(i.thickness??10),o=new ei(i.ior??1.5),a=new ei(i.roughness??.5),l=Ri.transmissionSize,c=Ri.transmissionRenderTarget,d=Ri.transmissionRenderTargetDepth,h=window.innerWidth,u=window.innerHeight,p=h>=u?new El(u/h,1):new El(1,h/u),m=Ih(i),v=new Kne(s,o,a,l,c,d,p,m.alpha),g=new lo(v.calpha,"f");return new jo(t,n,e,{thickness:s,ior:o,roughness:a,aspectRatio:p,...m},v,m.mode,g,m.isMask,r)}case"toon":{let o,a,s=new Qs(i.positioning??0);i.colors?o=new n1(i.colors.length,i.colors):(o=new n1(10,new mr(0,0,0,1)),o.value[1]=new mr(1,1,1,1)),i.steps?a=new t1(i.steps.length,i.steps):(a=new t1(10,1),a.value[0]=0);let l=new Dh(i.source??new oe(0,0,0)),c=new Sc(i.isWorldSpace??!0),d=new ei(i.noiseStrength??0),h=new ei(i.noiseScale??1),u=new em(i.shadowColor),p=new Dh(i.offset??new oe(0,0,0)),m=Ih(i),v=new Yne(s,o,a,l,c,d,h,u,p,m.alpha),g=new lo(v.calpha,"f");return new jo(t,n,e,{positioning:s,colors:o,steps:a,source:l,isWorldSpace:c,noiseStrength:d,noiseScale:h,shadowColor:u,offset:p,...m},v,m.mode,g,m.isMask,r)}case"outline":{let s=new Vo(i.outlineColor??16777215),o=new Vo(i.contourColor??16777215),a=new ei(i.outlineWidth??.1),l=new ei(i.contourWidth??.1),c=new ei(i.outlineThreshold??.1),d=new ei(i.contourThreshold??.1),h=new ei(i.outlineSmoothing??.1),u=new ei(i.contourFrequency??.1),p=new Dh(i.contourDirection??new oe(0,1,0)),m=new Sc(i.positionalLines??!1),v=new Sc(i.compensation??!0),g=Ri.normalRenderTarget,b=Ri.normalRenderTargetDepth,x=Ri.pixelRatioNode,w=Ri.resolution,P=Ih(i),A=new Hne(s,o,a,l,c,d,h,u,p,m,v,w,g,b,x,P.alpha),D=new lo(A.calpha,"f");return new jo(t,n,e,{outlineColor:s,contourColor:o,outlineWidth:a,contourWidth:l,outlineThreshold:c,contourThreshold:d,outlineSmoothing:h,contourFrequency:u,contourDirection:p,positionalLines:m,compensation:v,...P},A,P.mode,D,P.isMask,r)}case"depth":{let p,m,s=new Qs(i.gradientType??0),o=new Sc(i.smooth??!1),a=new ei(i.near??50),l=new ei(i.far??200),c=new ei(i.isVector??1),d=new ei(i.isWorldSpace??0),h=new Dh(i.origin??new oe),u=new Dh(i.direction??new oe);i.colors?p=new n1(i.colors.length,i.colors):(p=new n1(2,new mr(0,0,0,1)),p.value[1]=new mr(1,1,1,1)),i.steps?m=new t1(i.steps.length,i.steps):(m=new t1(2,1),m.value[0]=0);let v=Ih(i),g=new Lne(s,o,a,l,c,d,h,u,p,m,v.alpha,v.isMask),b=new lo(g.calpha,"f");return new jo(t,n,e,{gradientType:s,smooth:o,near:a,far:l,isVector:c,isWorldSpace:d,origin:h,direction:u,colors:p,steps:m,...v},g,v.mode,b,v.isMask,r)}case"noise":{let s=new ei(i.scale??1),o=new Dh(i.size??new oe(100,100,100)),a=new ei(i.move??1),l=new El(i.fA??new tt(1.7,9.2)),c=new El(i.fB??new tt(8.3,2.8)),d=new El(i.distortion??new tt(1,1)),h=new em(i.colorA),u=new em(i.colorB),p=new em(i.colorC),m=new em(i.colorD),v=new Qs(i.noiseType??0),g=new Qs(i.voronoiStyle??0),b=new ei(i.highCut??1),x=new ei(i.lowCut??0),w=new ei(i.smoothness??.5),P=new ei(i.seed??.5),A=new Qs(i.quality??1),D=Ih(i),R=new Vne(s,o,a,l,c,d,h,u,p,m,D.alpha,v,D.isMask,g,b,x,w,P,A),N=new lo(R.calpha,"f");return new jo(t,n,e,{scale:s,size:o,move:a,fA:l,fB:c,distortion:d,colorA:h,colorB:u,colorC:p,colorD:m,noiseType:v,...D,voronoiStyle:g,highCut:b,lowCut:x,smoothness:w,seed:P,quality:A},R,D.mode,N,D.isMask,r)}case"normal":{let s=new Dh(i.cnormal??new oe(1,1,1)),o=Ih(i),a=new Nne(s,o.alpha),l=new lo(a.calpha,"f");return new jo(t,n,e,{cnormal:s,...o},a,o.mode,l,o.isMask,r)}case"gradient":{let a,l,s=new Qs(i.gradientType??0),o=new Sc(i.smooth??!1);i.colors?a=new n1(i.colors.length,i.colors):(a=new n1(10,new mr(0,0,0,1)),a.value[1]=new mr(1,1,1,1)),i.steps?l=new t1(i.steps.length,i.steps):(l=new t1(10,1),l.value[0]=0);let c=new El(i.offset??new tt(0,0)),d=new El(i.morph??new tt(0,0)),h=new ei(i.angle??0),u=Ih(i),p=new Bne(s,o,a,l,c,d,h,u.alpha,u.isMask),m=new lo(p.calpha,"f");return new jo(t,n,e,{gradientType:s,smooth:o,colors:a,steps:l,offset:c,morph:d,angle:h,...u},p,u.mode,m,u.isMask,r)}case"pattern":{let s=new Qs(i.style??0),o=new Qs(i.projection??0),a=new Qs(["x","y","z"].indexOf(i.axis)??0),l=new ei(i.blending??0),c=new El(i.offset??new tt(0,0)),d=new em(i.colorA),h=new em(i.colorB),u=new El(i.frequency??new tt(10,10)),p=new ei(i.size??.5),m=new ei(i.variation??0),v=new ei(i.smoothness??.5),g=new ei(i.zigzag??0),b=new ei(i.rotation??0),x=new El(i.vertical??new tt(0,1)),w=new El(i.horizontal??new tt(0,1)),P=new Qs(i.sides??6),A=Ih(i),D=new Gne(s,o,a,l,c,d,h,u,p,m,v,g,b,x,w,P,A.alpha,A.isMask),R=new lo(D.calpha,"f");return new jo(t,n,e,{style:s,projection:o,axis:a,blending:l,offset:c,colorA:d,colorB:h,frequency:u,size:p,variation:m,smoothness:v,zigzag:g,rotation:b,vertical:x,horizontal:w,sides:P,...A},D,A.mode,R,A.isMask,r)}default:{let s=new Vo(1,0,0,1),o=Ih(i),a=new MB(s,o.alpha),l=new lo(a.calpha,"f");return new jo(t,n,e,{color:s,...o},a,o.mode,l,o.isMask,r)}}}(n,e,t,r,i)}(e,t,n,i)}updateByOp(e,t,n){let i=e;if(void 0===i.path[0]){if(0===i.type)return"type"in i.props||"category"in i.props||"visible"in i.props?(n.scene.markNeedsUpdateRendererDirty(),!0):function pWe(e,t,n,i){let r=!1;for(let[s,o]of Object.entries(e)){if("bumpMap"===s||"roughnessMap"===s){r=!0;continue}if(!s||void 0===o)continue;if(vie(s,n,i,t)){"visible"===s&&"light"===n.type&&(r=!0);continue}n.visible=i.visible;let a=n.uniforms[`f${n.id}_${s}`];if(a&&!(a instanceof xB))switch(r=r||uWe(n,s,o),a.constructor){case Vo:if("string"==typeof o){let l=t.getColor(o);l&&(a.value=l);break}{let l=o;a.value instanceof uT?a.value=new nd(l.r,l.g,l.b,l.a):a.setRGBA(l);break}case em:if("string"==typeof o){let l=t.getColor(o);l&&(a.value=l);break}{let l=o;a.value instanceof uT?a.value=new nd(l.r,l.g,l.b,l.a):a.value.setRGBA(l.r,l.g,l.b,l.a);break}case El:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]);break}case Dh:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]),a.value.setZ(l[2]);break}case tm:mie(o,t,n);break;case n1:a.value=o.map(l=>new mr(...l));break;default:a.value=o}}return r}(i.props,n.shared,this,t)}else if("texture"===i.path[0])return!("texture"in t)&&!("video"in t)||mie(i.props,n.shared,this);return!1}dispose(){if(function fWe(e){let t=e instanceof s1?e.type:e;return"texture"===t||"video"===t||"displace_map"===t||"matcap"===t}(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;e.image instanceof i1||e.image.deref()}}hasValueByKey(e){return void 0!==this.uniforms[e]}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let n=`f${this.id}_${e}`;this.hasValueByKey(n)&&void 0!==t&&(this.uniforms[n].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let n=this.getName(t);n&&e.push(n)}return e}},jo=class extends s1{constructor(e,t,n,i,r,s,o,a,l){super(e,t,n,i,l),this.params=i,this.color=r,this.mode=s,this.alpha=o,this.isMask=a}},gie=class extends s1{constructor(e,t,n,i,r,s){super(e,t,n,i,s),this.position=r}},rm=class extends s1{constructor(e,t,n,i,r,s){super(e,t,n,r,s),this.node=i}static createLigherLayer(e,t,n,i){let r,c,s=new ei(r1(n.alpha,i)),o=new Qs(n.mode),a=new ei(n.bumpMapIntensity),l=new ei(r1(n.alphaOverride,i));if(n.visible)if("lambert"===n.category){r=new wGe;let d=new Vo(i.color(n.emissive)??0),h=new Sc(n.occlusion??!0);c={emissive:d,occlusion:h},r.emissive=d,r.occlusion=h}else if("toon"===n.category){r=new PGe;let d=new ei(n.shininess??30),h=new Vo(i.color(n.specular)??1118481);c={shininess:d,specular:h},r.shininess=d,r.specular=h}else if("physical"===n.category){r=new CGe;let d=new ei(n.roughness??.3),h=new ei(n.metalness??0),u=new ei(n.reflectivity??.5),p=new Sc(n.occlusion??!0);c={roughness:d,metalness:h,reflectivity:u,occlusion:p},r.roughness=d,r.metalness=h,r.reflectivity=u,r.occlusion=p}else{r=new MGe;let d=new ei(n.shininess??30),h=new Vo(void 0!==n.specular?i.color(n.specular)??1118481:1118481),u=new Sc(n.occlusion??!0);c={shininess:d,specular:h,occlusion:u},r.shininess=d,r.specular=h,r.occlusion=u}else r=new Jne,c={};return r.alpha=new ei(1),r.shadingAlpha=s,r.shadingBlend=o,r.bumpMapIntensity=a,r.alphaOverride=l,c.alpha=r.shadingAlpha,c.mode=r.shadingBlend,c.bumpMapIntensity=r.bumpMapIntensity,c.alphaOverride=r.alphaOverride,new rm(e,t,n,r,c,i)}get category(){return this.node.category}};function Ih(e){return{alpha:new ei(e.alpha??1),mode:new Qs(e.mode??0),isMask:new Sc(e.isMask??!1)}}function vie(e,t,n,i){if("displace"===n.type&&("intensity"===e||"visible"===e)){let r=t.uniforms[`f${t.id}_intensity`];return r?(r.value=n.intensity*(n.visible?1:0),r):void 0}if("displace"!==n.type&&("alpha"===e||"visible"===e)){let r=t.uniforms[`f${t.id}_alpha`];if(!r)return;if(r.value=r1(n.alpha,i)*(n.visible?1:0),"outline"===n.type&&"visible"===e){let s=t.uniforms[`f${t.id}_compensation`];s&&(s.value=n.compensation&&n.visible)}return r}}function Hb(e,t){let n=0,i=e.layers.find(r=>"light"===r.data.type);if(i){let r=i.data,s=Number(t.getVariable(r.alphaOverride));if(("string"==typeof r.alphaOverride?s/100:r.alphaOverride)<1)return!0}for(let r of e.layers){if("displace"!==r.data.type&&r.data.isMask)return!0;if("displace"!==r.data.type&&"alpha"in r.data&&"light"!==r.data.type&&"fresnel"!==r.data.type&&"texture"!==r.data.type&&"matcap"!==r.data.type&&"rainbow"!==r.data.type&&"outline"!==r.data.type&&"pattern"!==r.data.type){let s=r.data.visible?r.data.alpha:0;if("string"==typeof s&&(s=Math.max(0,Math.min(1,Number(t.getVariable(s)??100)/100))),1===s&&"depth"===r.data.type||"gradient"===r.data.type){for(let o of r.data.colors)if(o[3]<1){s=o[3];break}}else if(1===s&&"noise"===r.data.type){let o=t.color(r.data.colorA).a,a=t.color(r.data.colorB).a,l=t.color(r.data.colorC).a,c=t.color(r.data.colorD).a,d=Math.min(o,Math.min(a,Math.min(l,c)));d<1&&(s=d)}n+=(1-n)*s}}return n<1}var Vg=class extends Ks{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},vWe=class extends Vg{constructor(e,t,n,i){super(),this.flatShading=e,this.side=t,this.wireframe=n,this.root=i}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,t,n){return this.root.getFlavor(e,t,n)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,n){this.root.updateByOp(e,t,n)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},RB=class extends Vg{constructor(e,t,n=!0){super(),this.data=e,this.allowVariableSaves=n,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.reset0(e,t)}get nodeMaterial(){return this}getFlavor(e,t,n){let i=n?6:(e?3:0)+t;if(0===i)return this;void 0===this.flavors&&(this.flavors=[]),i-=1;let r=this.flavors[i];return void 0===r&&(r=new vWe(e,t,n,this),this.flavors[i]=r,r.flatShading=e,r.side=t,r.updateAfterBuild()),r}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){return this.lightLayer.getNode("occlusion")?.value??!1}reset(e,t){this.data!==e&&this.reset0(e,t)}reset0(e,t){this.data=e;let n=e.layers??Xl.defaultTwoLayerData("phong").layers;try{this.layers=n.map(i=>s1.create(this.layerIdGen++,i.id,i.data,t.shared))}catch{this.layers=[]}this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(t.shared),this.transparent=Hb(e,t.shared),this.saveVariableLocations(t)}onVariableUpdate(e,t,n){if("alphaOverride"===e[0])this.transparent=Hb(this.data,n.shared),this.lightLayer.setValue("alphaOverride",Math.max(0,Math.min(Number(t)/100,1)));else if("layer"===e[0]){let i=e[1],r=e[2];if(i&&r){let s=this.layers.find(o=>o.uuid===i);s?.hasValue(r)&&("alpha"===r?(this.transparent=Hb(this.data,n.shared),s.setValue(r,Math.max(0,Math.min(Number(t)/100,1)))):s.setValue(r,t))}}}saveVariableLocations(e){if(!this.allowVariableSaves)return;let t=this.data.layers.find(n=>"light"===n.data.type);t&&e.shared.getVariable(t.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach(n=>{"alpha"in n.data&&"string"==typeof n.data.alpha&&e.shared.getVariable(n.data.alpha,["material",this.uuid,"layer",n.id,"alpha"])})}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(e){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(t=>t instanceof rm),void 0===this.lightLayer&&(this.lightLayer=new rm(0,"",{...Qc.defaultData("light","phong"),visible:!1},new Jne,{},e)),this.dispose();for(let t of this.flavors)t&&t.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions()}applyTextureMaps(){let e=this.layers.find(r=>r instanceof rm);if(!e)return;let t=e.data,n=t.bumpMap,i=t.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let r=0;r<this.layers.length;++r){let s=this.layers[r];s instanceof jo&&s.color instanceof CB&&(s.uuid===n&&(e.node.bumpMap=s.color),s.uuid===i&&(e.node.roughnessMap=s.color))}}updateByOp(e,t,n){if(void 0!==t?this.data=t:t=this.data,this.transparent=Hb(t,n.shared),"layers"===e.path[0]){this.data=t;let i=n.shared,r=e.path[1];if(void 0===r){if(this.layers.reverse(),4===e.type){let s=s1.create(this.layerIdGen++,e.id,e.data,n.shared);this.layers.splice(e.localIndex,0,s),n.scene.markNeedsUpdateRendererDirty()}else if(5===e.type)this.layers.splice(e.localIndex,1)[0].dispose(),n.scene.markNeedsUpdateRendererDirty();else if(6===e.type){let s=this.layers.findIndex(a=>a.uuid===e.id),o=this.layers[s];this.layers.splice(s,1),this.layers.splice(e.localIndex,0,o),n.scene.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate(n.shared)}else{0===e.type&&void 0!==e.props.occlusion&&n.scene.markNeedsUpdateRendererDirty();let s=this.layers.find(o=>o.uuid===r);if(s){let a,o=t.layers.data(r);if(0===e.type&&("alpha"in e.props||"alphaOverride"in e.props)&&(a="alpha"in e.props?{...e.props,alpha:r1(e.props.alpha,i,["material",this.uuid,"layer",r,"alpha"])}:{...e.props,alphaOverride:r1(e.props.alphaOverride,i,["material",this.uuid,"alphaOverride"])}),s.updateByOp({...e,...a?{props:a}:{},path:e.path.slice(2)},o,n)){let l=s1.create(this.layerIdGen++,r,o,i);this.layers.splice(this.layers.findIndex(c=>c.uuid===r),1,l),this.onUpdate(n.shared)}}}}else this.reset(t,n)}applyMasks(){for(let e=0;e<this.layers.length;++e){let t=this.layers[e];t instanceof jo?t.color.mask=void 0:t instanceof rm&&(t.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let t=this.layers[e];if(t instanceof jo&&t.isMask.value&&t.data.visible&&e>0){let i=this.layers[e-1];i instanceof rm?i.node.mask=new id(t.color,t.alpha,id.MUL):i instanceof jo&&(i.isMask.value||(i.color.mask=new id(t.color,t.alpha,id.MUL)))}}}blendColors(){let e=this.layers.findIndex(n=>n instanceof jo),t=this.layers.findIndex(n=>n instanceof rm);if(-1!==e&&e<t){let n=this.layers[e].color;for(let i=e+1;i<t;++i){let r=this.layers[i];if(r instanceof jo){if(r.isMask.value)continue;n=new Ine(n,r.color,r.alpha,r.mode)}}this.fragment.color=n}else this.fragment.color=void 0}blendAfterColors(){let e=new lo("outgoingLight","f"),t=this.layers.findIndex(n=>n instanceof rm);if(this.layers.length>t+1){for(let n=t+1;n<this.layers.length;++n){let i=this.layers[n];if(i instanceof jo){if(i.isMask.value)continue;e=new Ine(e,i.color,i.alpha,i.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof gie);if(e.length>0){let t=e[0].position;for(let n=1;n<e.length;++n)e[n]&&(t=new id(t,e[n].position,id.ADD),t=new id(t,new ei(.5).setReadonly(!0),id.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=!0===this.extensions.derivatives,e.extensionFragDepth=!0===this.extensions.fragDepth,e.extensionDrawBuffers=!0===this.extensions.drawBuffers,e.extensionShaderTextureLOD=!0===this.extensions.shaderTextureLOD}clampUniformsForPreview(e,t){let n=(i,r,s)=>Math.min(Math.max(i,r),s);for(let i of this.layers)if("displace"===i.type){let r=n(i.uniforms[`f${i.id}_intensity`].value,e,t);i.uniforms[`f${i.id}_intensity`].value=r}}computeCacheKey(){let e="[";for(let{data:t}of this.data.layers)if("light"===t.type)e+=`"${t.visible?t.category.toUpperCase():"Basic"}"`;else{let r=[...(pie[t.type]??[]).map(a=>t[a]),...(fie[t.type]??[]).map(a=>t[a]?.length??0)],o=`"${t.type}-${t.visible}-${"isMask"in t&&t.isMask}"`;e+=r.length?`[${o}, "${r.join('","')}"],`:o}return e=e.slice(0,-1)+"]",e}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(t,n){return t.deps.length-n.deps.length}return function(t,n){let i=this.getIncludes(t,n);if(!i)return"";let r="";i=i.sort(e);for(let s=0;s<i.length;s++)i[s].src&&(r+=i[s].src+"\n");return r}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCube(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif","\n\t\t\t// NOTE: Include Spline's blending modes. This could be part of BlendNode\n\t\t\t#define SPE_BLENDING_NORMAL 0\n\t\t\t#define SPE_BLENDING_MULTIPLY 1\n\t\t\t#define SPE_BLENDING_SCREEN 2\n\t\t\t#define SPE_BLENDING_OVERLAY 3\n\n\t\t\tvec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, b, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, a * b, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );\n\t\t\t\treturn mix( a, tmp, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );\n\t\t\t\treturn clamp( mix( a, tmp, alpha ), 0.0, 1.0 );\n\t\t\t}\n\n\t\t\tvec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {\n\t\t\t\tif ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );\n\t\t\t\treturn vec3( 1.0 );\n\t\t\t}\n\t\t\t","#include <packing>","#include <common>"].join("\n"),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join("\n"),fragment:["float accumAlpha = 0.0;","void accumulateAlpha(float alpha) {\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * alpha;\n\t\t\t\t}",""].join("\n")},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.addVertexParsCode("\nuniform int frameIndex;\nuniform vec2 resolution;\nuniform mat4 previousModelViewMatrix;\nuniform mat4 previousProjectionMatrix;\n\nvarying vec4 vCurrentPosition;\nvarying vec4 vPreviousPosition;\n"),this.addFragmentParsCode("\nlayout(location = 1) out vec4 gVelocity;\n\nuniform int frameIndex;\nuniform vec2 resolution;\n\nvarying vec4 vCurrentPosition;\nvarying vec4 vPreviousPosition;\n\nconst vec2 haltonSequence[16] = vec2[16](\nvec2( 0.000000,-0.333334),\nvec2(-0.500000, 0.333334),\nvec2( 0.500000,-0.777778),\nvec2(-0.750000,-0.111112),\nvec2( 0.250000, 0.555556),\nvec2(-0.250000,-0.555556),\nvec2( 0.750000, 0.111112),\nvec2(-0.875000, 0.777778),\nvec2(0.125000, -0.925926),\nvec2(-0.375000, -0.259260),\nvec2(0.625000, 0.407408),\nvec2(-0.625000, -0.703704),\nvec2(0.375000, -0.037038),\nvec2(-0.125000, 0.629630),\nvec2(0.875000, -0.481482),\nvec2(-0.937500, 0.185186));\n\nvec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n  const float goldenAngle = 2.399963f; // radians\n  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n  float theta = float(sampleIndex) * goldenAngle + angle;\n  float sine = sin(theta);\n  float cosine = cos(theta);\n  return vec2(cosine, sine) * r;\n}\n\n// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso\nfloat getNoiseInterleavedGradient(vec2 screenPos) {\n    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);\n    return fract(magic.z * fract(dot(screenPos, magic.xy)));\n}\n\n"),this.buildShader("vertex",e),this.buildShader("fragment",t);for(let n=0;n<this.requires.uv.length;n++)if(this.requires.uv[n]){let i=n>0?n+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),n>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode("\n// TODO: This could be generated CPU side and passed to the shader every frame\nconst vec2 haltonSequence[16] = vec2[16](\nvec2( 0.000000,-0.333334),\nvec2(-0.500000, 0.333334),\nvec2( 0.500000,-0.777778),\nvec2(-0.750000,-0.111112),\nvec2( 0.250000, 0.555556),\nvec2(-0.250000,-0.555556),\nvec2( 0.750000, 0.111112),\nvec2(-0.875000, 0.777778),\nvec2(0.125000, -0.925926),\nvec2(-0.375000, -0.259260),\nvec2(0.625000, 0.407408),\nvec2(-0.625000, -0.703704),\nvec2(0.375000, -0.037038),\nvec2(-0.125000, 0.629630),\nvec2(0.875000, -0.481482),\nvec2(-0.937500, 0.185186));\n\n// TODO: Pass correct view size\nvec2 offset = haltonSequence[frameIndex];\noffset.x /= resolution.x;\noffset.y /= resolution.y;\n\nvec4 currentPosition = gl_Position;\nvec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);\n\n// We want to calculate the velocity with unjittered positions\n// so that things that are not moving get a velocity = 0\nvCurrentPosition = currentPosition;\nvPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);\n#ifdef OUTLINE_COMPENSATION\nvPreviousPosition.xy += OUTLINE_COMPENSATION;\n#endif\ngl_Position = currentPositionJittered;\n\n"),this.addFragmentFinalCode("\nvec2 oldPos = vPreviousPosition.xy;\n    oldPos /= vPreviousPosition.w;\n    oldPos.xy = (oldPos.xy+1.)/2.0;\n\nvec2 newPos = vCurrentPosition.xy;\n    newPos /= vCurrentPosition.w;\n    newPos.xy = (newPos.xy+1.)/2.0;\n\nvec2 velocity = (newPos - oldPos);\n\n// Discard fully transparent pixels \nif (gl_FragColor.a <= 0.0) discard;\n\ngVelocity = vec4(velocity, 0.0, 1.0);\n")),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,n){return this.addSlot(e).addCache(t).addContext(n)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){void 0===this.fragmentVariables[e]&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){void 0===this.fragmentParsVariables[e]&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){void 0===this.vertexParsVariables[e]&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t??this.shader]+=e+"\n"}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t??this.shader]+=e+"\n"}clearNodeCode(e){let t=this.nodeCode[e=e??this.shader];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t??this.shader]+=e+"\n"}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t??this.shader]+=e+"\n"}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return-1!==this.caches.indexOf(e)}isSlot(e){return-1!==this.slots.indexOf(e)}define(e,t){this.defines[e]=void 0===t?1:t}require(e){this.requires[e]=!0}isDefined(e){return void 0!==this.defines[e]}getVar(e,t,n,i="varying",r="V",s=""){let o=this.getVars(i),a=o[e];return a||(a={name:n||"node"+r+o.length+(s?"_"+s:""),type:t},o.push(a),o[e]=a),a}getTempVar(e,t,n,i){return this.getVar(e,t,n,this.shader,"T",i)}getAttribute(e,t){if(!this.attributes[e]){let n=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(n.name+" = "+e+";"),this.attributes[e]={varying:n,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join("\n")}getVarListCode(e,t){t=t??"";let n="";for(let i=0,r=e.length;i<r;++i){let s=e[i],a=s.name,l=s.size,c=this.getFormatByType(s.type);if(void 0===c)throw new Error("Node pars "+c+" not found.");c.includes("[]")?n+=t+" "+c.substring(0,c.length-2)+" "+a+`[${l}];\n`:n+=t+" "+c+" "+a+";\n"}return n}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let t=e instanceof Ug?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,n,i,r,s){if(t.includes("[]")){let o=this.inputs.arrayUniforms,l=new Mne({type:t,size:n.size,name:i||"nodeUA"+o.list.length+(s?"_"+s:""),node:n,needsUpdate:r});return o.list.push(l),o[e].push(l),o[e][l.name]=l,this.uniforms[l.name]=l,l}{let o=this.inputs.uniforms,l=new Mne({type:t,name:i||"nodeU"+o.list.length+(s?"_"+s:""),node:n,needsUpdate:r});return o.list.push(l),o[e].push(l),o[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,n,i,r){return this.createUniform("vertex",e,t,n,i,r)}createFragmentUniform(e,t,n,i,r){return this.createUniform("fragment",e,t,n,i,r)}include(e,t,n){let i;if(e="string"==typeof e?ed.get(e):e,!1===this.context.include)return e.name;e instanceof Bn?i=this.includes.functions:e instanceof Us?i=this.includes.consts:e instanceof Sne&&(i=this.includes.structs);let r=i[this.shader]=i[this.shader]||[];if(e){let s=r[e.name];if(s||(s=r[e.name]={node:e,deps:[]},r.push(s),s.src=e.build(this,"source")),e instanceof Bn&&t&&r[t.name]&&-1===r[t.name].deps.indexOf(e)&&(r[t.name].deps.push(e),e.includes?.length)){let o=0;do{this.include(e.includes[o++],t)}while(o<e.includes.length)}return n&&(s.src=n),e.name}throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return pGe[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return"f"===e?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return 1===e?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let n=e[t];if(n?.isNode)return n}}resolve(...e){for(let t=0;t<arguments.length;t++){let n=e[t];if(void 0!==n){if(n.isNode)return n;if(n.isTexture)switch(n.mapping){case Sv:case Ev:return new lGe(n);case _M:return new aGe(new tm(n));default:return new tm(n)}else{if(n.isVector2)return new El(n);if(n.isVector3)return new Dh(n);if(n.isVector4)return new em(n)}}}}format(e,t,n){switch(this.colorToVector(n+" <- "+t)){case"f <- v2":case"f <- v3":case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":case"i <- v3":case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return fGe[e]||e}getFormatByType(e){return mGe[e]||e}getUUID(e,t){return(t=void 0===t||t)&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return Ane[e]}getIndexByElement(e){return Ane.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=cp,t===cp&&this.context.gamma&&(t=fr),t}};e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof jo){let t=e.params.texture;if(t instanceof wB&&!t.image.loaded)return!1}return!0}getHash(){let e="{";return e+='"fragment":'+this.fragment.getHash(),e+="}",e}};Object.defineProperties(Vg.prototype,{properties:{get:function(){return this.fragment.properties}}});var kB=class extends RB{constructor(e,t,n){super(e,t,!1),this.uuid=n,this.allowVariableSaves=!0,this.saveVariableLocations(t)}},yWe=al(hDe()),yie=new Map;function _We(e){if("string"==typeof e)return e;let t=yie.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},yie.set(e,t)),t.url}var _ie,pT,CC=class{constructor({src:e,volume:t,delay:n,loop:i}){let r;this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)},r="string"==typeof e?{src:e}:{src:_We(e),format:"wav"},this.sound=new yWe.Howl(r),this.sound.on("end",this.onEnd),this.src=e,void 0!==t&&(this.volume=t),void 0!==n&&(this.delay=n),void 0!==i&&(this.loop=i)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,n){this.sound.on(e,t,n)}off(e,t,n){this.sound.off(e,t,n)}play(){"playing"===this._status||this.sound.playing()||("paused"===this._status?(0===this.sound.seek()?this.replay():this.sound.play(),this._status="playing"):"stopped"===this._status&&(this.replay(),this._status="playing"))}pause(){"playing"===this._status&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},bie=new Promise(e=>{_ie=e}),xie=!1;function xWe(){if(!xie)return pT||(pT=function e(){return t.apply(this,arguments)}(),pT);function t(){return(t=(0,xo.Z)(function*(){let n=yield _.e(990).then(_.bind(_,2990));_ie(n),xie=!0})).apply(this,arguments)}}function NB(){return NB=(0,xo.Z)(function*(e){return yield(yield fetch(e)).arrayBuffer()}),NB.apply(this,arguments)}var CWe=new class{load(e,t,n=(()=>{})){return(0,xo.Z)(function*(){let{load:i}=yield bie;i(e,(r,s)=>{r||!s?n(r??"Something went wrong"):t(s)})})()}parse(e){return(0,xo.Z)(function*(){let{parse:t,Bidi:n}=yield bie;try{let i=t(e),r=new n;return r.registerModifier("glyphIndex",null,o=>i.charToGlyphIndex(o.char)),r.applyFeatures(i,i.defaultRenderOptions.features),{font:i,bidi:r}}catch(i){console.error(i)}})()}};function wie(e){return LB.apply(this,arguments)}function LB(){return LB=(0,xo.Z)(function*(e){let t,n,i=!1;if(e.url?(t=yield function MWe(e){return NB.apply(this,arguments)}(e.url),n=e.url,i=e.url.startsWith("/")):e.data&&(t=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),t){let r=yield CWe.parse(t);if(r)return{font:r.font,url:n,intercepted:i,arr:t,bidi:r.bidi}}}),LB.apply(this,arguments)}function PWe(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var OWe=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t,n){let i=this.objects.get(e);return void 0===i?(i=this.createObject(e,t,n),this.objects.set(e,i)):i.isShared=!0,i}forceDelete(e){let t=this.objects.get(e);t&&(this.disposeObject(t),this.objects.delete(e))}mutateIfUnique(e,t){let n=this.objects.get(e);if(n&&!0!==n.isShared)return this.objects.delete(e),this.objects.set(t,n),n}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){t===this.objects.get(e)&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},Mie=class extends OWe{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t,n){let i=oT(e,t,this.flatShading,n);return i.computeBoundingSphere(),i}},AWe={markNeedsUpdateRendererDirty:()=>{}},TWe=class extends TGe{constructor(e){super(),this.shared=e}create(e){return new eie(e,this.shared)}},FB=class{constructor(e,t={}){if(this.data=e,this.geometryCache=new Mie(!0),this.geometryCache2=new Mie(!1),this.imageHolderCache=new TWe(this),this.thisContext={scene:AWe,shared:this},this.deletedMaterial=new kB(Xl.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new i1(NA.emptyImage,this),this.deletedVideo=new i1(OA.defaultVideo,this),this.materials={},this.images={},this.videos={},this.colors={},this.audios={},this.fonts={},this.variables={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[n,i]of Object.entries(t.images))this.addImage(n,i);if(t.videos)for(let[n,i]of Object.entries(t.videos))this.addVideo(n,i);if(t.audios)for(let[n,i]of Object.entries(t.audios))this.addAudio(n,i);this.reset(e)}setRequestRender(e){this._requestRender=e}setEntityOpContext(e){this.entityOpContext=e}reset(e,t=!1){this.resetLib(e.lib);for(let{id:n,data:i}of e.variables)this.addVariableHolder(n,i),t&&this.updateVariableHolder(n,i);for(let[n,i]of Object.entries(e.images))this.addImage(n,i);for(let[n,i]of Object.entries(e.videos))this.addVideo(n,i);for(let[n,i]of Object.entries(e.colors))this.addColor(n,i);for(let[n,i]of Object.entries(e.materials))this.addMaterial(n,i);for(let[n,i]of Object.entries(e.audios))this.addAudio(n,i);for(let[n,i]of Object.entries(e.fonts))this.addFont(n,i)}addMaterial(e,t){if(this.materials[e]){let n=this.materials[e];n.reset(t,this.thisContext),n.dispose()}else{let n=new kB(t,this.thisContext,e);this.materials[e]=n}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return"string"==typeof e?this.getMaterialOrDeletedPlaceholder(e):null==e?(console.error("material is undefined or null"),this.deletedMaterial):new RB(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new i1(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return"string"==typeof e?this.getImage(e):this.imageHolderCache.load(e)}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new i1(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return"string"==typeof e?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.colors[e].setRGBA(t.r,t.g,t.b,"a"in t?t.a:1),!0):(this.colors[e]=new uT(t.r,t.g,t.b,"a"in t?t.a:1),!1)}updateColor(e,t){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let n=this.colors[e];return this.colors[e].r=t.r??n.r,this.colors[e].g=t.g??n.g,this.colors[e].b=t.b??n.b,this.colors[e].a=t.a??n.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let t;if("string"!=typeof e)return new nd(e.r,e.g,e.b,"a"in e?e.a:1);{let n=this.getColor(e);n?t=n:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new nd(0,0,0,0))}return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof CC)return t;{let n=new CC({src:t.data});return this.audios[e]=n,n}}deleteAudio(e){let t=this.audios[e];t&&(t instanceof CC&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=wie(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=wie(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,n){if(!this._bidi)return[];let i=this._bidi;i.getTextGlyphs(t);let r=i.tokenizer.tokens,s=[],o=0,a=n.length===r.length;for(let l=0;l<n.length;l++){let c=n[l].index,d=String.fromCharCode(n[l].unicode),h=r[o];if(PWe(c,h)||a)s.push({char:d,index:c,replacements:[h.state.glyphIndex],replacementChars:[h.char]}),o++;else{let u=h.char,p="",m=[h.state.glyphIndex],v=[],g=!1;for(;!g;)o++,p=t.charAt(o),u+=p,m.push(e.charToGlyphIndex(p)),v=e.stringToGlyphs(u),1===v.length&&v[0].index===c&&(g=!0),o>t.length&&(g=!0);s.push({char:d,index:c,replacements:m,replacementChars:Array.from(u)}),o++}}return s}generateShapes(e,t){if(!this._isLoaded)return;let v,n=this.font,i=t.fontSize/this.unitsPerEm,r=t.fontSize*t.lineHeight,s=e.map(b=>this.getTextWidth(b,t)),o=t.width,a=this.getCharWidth("\n",t),l=1===t.horizontalAlign?a:0,c=this.computeSpaceWidthForLine(e,0,t),d=this.getLineInitialOffsetX(s[0],o,t.horizontalAlign,e[0],a),h=this.getLineInitialOffsetY(r,e.length,t.height,i,t.verticalAlign),u=[],p=e.map(b=>[]),m=e.map(b=>[]);for(let b=0;b<e.length;b++){let x=e[b],w={features:{liga:!0}},P=[];try{P=n.stringToGlyphs(x,w)}catch(D){console.warn(D)}d=this.getLineInitialOffsetX(s[b],o,t.horizontalAlign,x,a);let A=[];try{A=this.reverseLigaturesTable(n,x,P)}catch(D){console.warn(D)}c=this.computeSpaceWidthForLine(e,b,t);for(let D=0;D<P.length;D++){let R=P[D],N=0===R.index?"\n":R.unicode?String.fromCharCode(R.unicode):void 0,k=A[D],L=0,Q=0;0===D&&2===t.horizontalAlign&&void 0!==R.leftSideBearing&&(Q=-R.leftSideBearing*i),v&&(L=n.getKerningValue(R,v)*i),d+=Q+L;let le=0;if("\n"===N)le=l;else if(" "===N)le=c;else{let ae=this.createPath(R,i,d,h,t);ae&&(le=ae.offsetX-(L+Q),u.push(ae.path))}if(1===k.replacements.length)m[b].push([d,h]),p[b].push(le);else{let ae=k.replacements.map(be=>(n.glyphs.get(be).advanceWidth??0)*i),he=ae.reduce((be,me)=>be+me,0),xe=ae.map(be=>be/he),_e=d;for(let be=0;be<xe.length;be++){let me=le*xe[be];m[b].push([_e,h]),p[b].push(me),_e+=me}}d+=le,v=R}h-=r}let g=[];for(let b=0,x=u.length;b<x;b++)g.push(...u[b].toShapes());return{shapes:g,charWidths:p,lineWidths:s,charCoords:m}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){return this.font?.ascender??0}get descender(){return this.font?.descender??0}get familyName(){return this.font?.names.fontFamily??""}get subfamilyName(){return this.font?.names.fontSubfamily??""}get unitsPerEm(){return this.font?.unitsPerEm??1}getLineInitialOffsetX(e,t,n,i,r){return(3===n||2===n)&&i.indexOf("\n")>=0&&(e-=r),3===n?.5*t-.5*e:2===n?t-e:0}getLineInitialOffsetY(e,t,n,i,r){let s=t*e,o=Math.abs(this.ascender-this.descender)*i,l=-this.ascender*i-(e-o)/2;return 3===r?-(n-s-l):2===r?-(.5*n-.5*s-l):l}createPath(e,t,n,i,r){let s=e.getPath(n,-i,r.fontSize,{kerning:!1,letterSpacing:r.letterSpacing});if(!s)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");let o=new class{constructor(){this.type="ShapePath",this.color=new Di,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new TO,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath?.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath?.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,s){return this.currentPath?.bezierCurveTo(e,t,n,i,r,s),this}splineThru(e){return this.currentPath?.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},t={loc:e.ORIGIN,t:0};function n(p,m,v,g){let b=p.x,x=m.x,w=v.x,P=g.x,A=p.y,D=m.y,R=v.y,N=g.y,k=(P-w)*(A-R)-(N-R)*(b-w),Q=(N-R)*(x-b)-(P-w)*(D-A),le=k/Q,ae=((x-b)*(A-R)-(D-A)*(b-w))/Q;if(0===Q&&0!==k||le<=0||le>=1||ae<0||ae>1)return null;if(0===k&&0===Q){for(let he=0;he<2;he++){if(i(0===he?v:g,p,m),t.loc===e.ORIGIN){let xe=0===he?v:g;return{x:xe.x,y:xe.y,t:t.t}}if(t.loc===e.BETWEEN)return{x:+(b+t.t*(x-b)).toPrecision(10),y:+(A+t.t*(D-A)).toPrecision(10),t:t.t}}return null}for(let _e=0;_e<2;_e++)if(i(0===_e?v:g,p,m),t.loc===e.ORIGIN){let be=0===_e?v:g;return{x:be.x,y:be.y,t:t.t}}return{x:+(b+le*(x-b)).toPrecision(10),y:+(A+le*(D-A)).toPrecision(10),t:le}}function i(p,m,v){let A,g=v.x-m.x,b=v.y-m.y,x=p.x-m.x,w=p.y-m.y,P=g*w-x*b;return p.x===m.x&&p.y===m.y?(t.loc=e.ORIGIN,void(t.t=0)):p.x===v.x&&p.y===v.y?(t.loc=e.DESTINATION,void(t.t=1)):void(P<-Number.EPSILON?t.loc=e.LEFT:P>Number.EPSILON?t.loc=e.RIGHT:g*x<0||b*w<0?t.loc=e.BEHIND:Math.sqrt(g*g+b*b)<Math.sqrt(x*x+w*w)?t.loc=e.BEYOND:(A=0!==g?x/g:w/b,t.loc=e.BETWEEN,t.t=A))}let a=0,l=999999999,c=-999999999,d=[];this.subPaths.forEach(p=>{let m=p.getPoints(),v=-999999999,g=999999999,b=-999999999,x=999999999;for(let w=0;w<m.length;w++){let P=m[w];P.y>v&&(v=P.y),P.y<g&&(g=P.y),P.x>b&&(b=P.x),P.x<x&&(x=P.x)}c<=b&&(c=b+1),l>=x&&(l=x-1),m.length&&d.push({curves:p.curves,points:m,isCW:jZ.isClockWise(m),identifier:a++,boundingBox:new dQ(new tt(x,g),new tt(b,v))})});let h=d.map(p=>function o(p,m,v,g,b){(null==b||""===b)&&(b="nonzero");let x=new tt;p.boundingBox.getCenter(x);let P=function s(p,m,v){let g=new tt;m.getCenter(g);let b=[];return v.forEach(x=>{x.boundingBox.containsPoint(g)&&function r(p,m){let v=[],g=[];for(let b=1;b<p.length;b++){let x=p[b-1],w=p[b];for(let P=1;P<m.length;P++){let R=n(x,w,m[P-1],m[P]);null!==R&&void 0===v.find(N=>N.t<=R.t+Number.EPSILON&&N.t>=R.t-Number.EPSILON)&&(v.push(R),g.push(new tt(R.x,R.y)))}}return g}(p,x.points).forEach(w=>{b.push({identifier:x.identifier,isCW:x.isCW,point:w})})}),b.sort((x,w)=>x.point.x-w.point.x),b}([new tt(v,x.y),new tt(g,x.y)],p.boundingBox,m);P.sort((L,Q)=>L.point.x-Q.point.x);let A=[],D=[];P.forEach(L=>{L.identifier===p.identifier?A.push(L):D.push(L)});let R=A[0].point.x,N=[],k=0;for(;k<D.length&&D[k].point.x<R;)N.length>0&&N[N.length-1]===D[k].identifier?N.pop():N.push(D[k].identifier),k++;if(N.push(p.identifier),"evenodd"===b)return{identifier:p.identifier,isHole:N.length%2==0,for:N[N.length-2]};if("nonzero"===b){let L=!0,Q=null,le=null;for(let ae=0;ae<N.length;ae++){let he=N[ae];m[he]&&(L?(le=m[he].isCW,L=!1,Q=he):le!==m[he].isCW&&(le=m[he].isCW,L=!0))}return{identifier:p.identifier,isHole:L,for:Q}}console.warn('fill-rule: "'+b+'" is currently not implemented.')}(p,d,l,c,this.userData?.style.fillRule)),u=[];return d.forEach(p=>{let m=h[p.identifier];if(m&&!m.isHole){let v=new DO;v.curves=p.curves,h.filter(g=>g?.isHole&&g.for===p.identifier).forEach(g=>{if(g){let b=d[g.identifier],x=new TO;x.curves=b.curves,v.holes.push(x)}}),u.push(v)}}),u}},a=(e.advanceWidth??1)*t;if(e)for(let l of s.commands){let c=o.currentPath?.currentPoint;if(!c||"Z"===l.type||c.x!==l.x||-c.y!==l.y)switch(l.type){case"M":o.moveTo(l.x,-l.y);break;case"L":o.lineTo(l.x,-l.y);break;case"Q":o.quadraticCurveTo(l.x1,-l.y1,l.x,-l.y);break;case"C":o.bezierCurveTo(l.x1,-l.y1,l.x2,-l.y2,l.x,-l.y)}}return o.subPaths.forEach(l=>{let c=function EWe(e){if(e.length){let t=e[0];if(t instanceof fu)return t.v1;if(t instanceof pu||t instanceof bg)return t.v0}}(l.curves);void 0!==c&&l.currentPoint.distanceTo(c)>0&&l.lineTo(c.x,c.y)}),{offsetX:a+r.fontSize*r.letterSpacing,path:o}}getCharWidth(e,t){return this.font?.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing})??0}getTextWidth(e,t){return this.font?.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing})??0}computeSpaceWidthForLine(e,t,n){let i=this.getCharWidth(" ",n),r=e[t];if(r){let s=this.countSpaces(r.trimEnd());if(4===n.horizontalAlign&&t<e.length-1&&s)return(n.width-(this.getTextWidth(r,n)-s*i))/s}return i}countSpaces(e){return(e.match(/ /g)||[]).length}}(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof CC&&e.dispose()}),this.audios={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(e,t){return void 0===this.variables[e]?(this.variables[e]={value:t.value,locations:[]},"dynamicVariableType"in t&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0),!0):(this.variables[e].value=t.value,!1)}resetDynamicVariablePlayState(){for(let e in this.variables)void 0!==this.variables[e].dynamicVariablePlayState&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0)}updateVariableHolder(e,t){this.updateVariable(e,t.value)}updateVariable(e,t){if(void 0===this.variables[e])return!1;this.variables[e].value=t;let n=t;for(;"string"==typeof n;)n=this.variables[n].value;let i=this.entityOpContext.scene;for(let r=this.variables[e].locations.length-1;r>=0;r--){let s=this.variables[e].locations[r];if("material"===s[0]){let o=s[1],a=n,l={scene:i,shared:this},c=s.slice(2);i.traverseMaterial(h=>{let u=h.root??h;u.uuid===o&&u.onVariableUpdate(c,a,l)});let d=this.materials[o];d&&d.onVariableUpdate(c,a,l)}else{let o=i.find(s[0]);if(void 0===o){this.variables[e].locations.splice(r,1);continue}if("geometry"!==s[1]){for(let a=1;a<s.length-1;a++)o=o[s[a]];o[s[s.length-1]]="rotation"===s[1]?n*gi.DEG2RAD:n}if(o=i.find(s[0]),es.is(o))if("position"===s[1]||"rotation"===s[1]||"scale"===s[1])o.onVariableUpdate();else if("geometry"===s[1]){let a=o;o.component&&(a=o.component);let l=a.dataPatched;a.chooseGeoemtryCache(this).forceDelete(l.geometry),a.createGeometryDelayed(this.entityOpContext),a.onVariableUpdate(!0),a.instances.forEach(c=>{let d=c.dataPatched;c.chooseGeoemtryCache(this).forceDelete(d.geometry),c.createGeometryDelayed(this.entityOpContext),c.onVariableUpdate(!0)})}}}return!0}deleteVariable(e){this.variables[e]&&delete this.variables[e]}getVariable(e,t){if(Array.isArray(e)){if("mouse"===e[0])return this.mouseProperty?.[e[1]]??0;if("raycast"===e[0])return this.raycastProperty?.[e[1]]??0;let n=this.entityOpContext.scene.find(e[0]);if("width"===e[1]||"height"===e[1]||"depth"===e[1])return n.geometry.userData.parameters[e[1]];for(let i=1;i<e.length;i++)n=n[e[i]];return"rotation"===e[1]&&(n*=gi.RAD2DEG),n}for(let n in this.variables){if(void 0===t)break;let i=this.variables[n],r=i.locations?.findIndex(s=>xc.equal(s,t));void 0!==r&&-1!==r&&i.locations.splice(r,1)}if("string"==typeof e){let n=e,i=e;do{if(i=n,void 0===this.variables[n])break;n=this.variables[n].value}while("string"==typeof n);return t&&void 0!==this.variables[i]&&this.variables[i].locations.push(t),n}return e}getVariables(){return this.variables}getDynamicVariablePlayState(e){return this.variables[e]?.dynamicVariablePlayState}setDynamicVariablePlayState(e,t){void 0!==this.variables[e]&&(this.variables[e].dynamicVariablePlayState=t)}getDynamicVariableToggleIsForward(e){return this.variables[e]?.dynamicVariableToggleIsForward}setDynamicVariableToggleIsForward(e,t){void 0!==this.variables[e]&&(this.variables[e].dynamicVariableToggleIsForward=t)}resetLib(e){for(let[t,n]of Object.entries(e.images))this.addImage(t,n.asset);for(let[t,n]of Object.entries(e.audios))this.addAudio(t,n.asset);for(let[t,n]of Object.entries(e.colors))this.addColor(t,n.asset);for(let[t,n]of Object.entries(e.fonts))this.addFont(t,n.asset);for(let[t,n]of Object.entries(e.materials))this.addMaterial(t,n.asset);for(let[t,n]of Object.entries(e.videos))this.addVideo(t,n.asset);for(let[t,n]of Object.entries(e.variables))this.addVariableHolder(t,n.asset)}updateLibByOp(e,t){"images"===e.path[0]?1===e.path.length&&1===e.type?this.addImage(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteImage(e.id):"videos"===e.path[0]?1===e.path.length&&1===e.type?this.addVideo(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteVideo(e.id):"audios"===e.path[0]?1===e.path.length&&1===e.type?this.addAudio(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteAudio(e.id):"colors"===e.path[0]?1===e.path.length&&1===e.type?this.addColor(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteColor(e.id):"materials"===e.path[0]?1===e.path.length&&1===e.type?this.addMaterial(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteMaterial(e.id):"fonts"===e.path[0]?1===e.path.length&&1===e.type?this.addFont(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteFont(e.id):"variables"===e.path[0]?1===e.path.length&&1===e.type?this.addVariableHolder(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteVariable(e.id):"components"===e.path[0]&&t.updateByLibOp(e,this)}updateByOp(e,t,n){this.data=t,"images"===e.path[0]?2===e.path.length&&0===e.type?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):1===e.path.length&&1===e.type?this.addImage(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteImage(e.id):"videos"===e.path[0]?2===e.path.length&&0===e.type?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):1===e.path.length&&1===e.type?this.addVideo(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteVideo(e.id):"audios"===e.path[0]?2===e.path.length&&0===e.type?e.props.data&&this.addAudio(e.path[1],t.audios[e.path[1]]):1===e.path.length&&1===e.type?this.addAudio(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteAudio(e.id):"colors"===e.path[0]?2===e.path.length&&0===e.type?this.updateColor(e.path[1],e.props):1===e.path.length&&1===e.type?this.addColor(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteColor(e.id):"materials"===e.path[0]?1===e.path.length&&1===e.type?this.addMaterial(e.id,e.data):1===e.path.length&&2===e.type?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(ql.drop(e,2),t.materials[e.path[1]],{shared:this,scene:n}):"fonts"===e.path[0]?2===e.path.length&&0===e.type?this.updateFont(e.path[1],e,n):1===e.path.length&&1===e.type?this.addFont(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteFont(e.id):"variables"===e.path[0]?2===e.path.length&&0===e.type&&"value"in e.props?this.updateVariable(e.path[1],e.props.value):1===e.path.length&&4===e.type?this.addVariableHolder(e.id,e.data):1===e.path.length&&5===e.type&&this.deleteVariable(e.id):"lib"===e.path[0]&&this.updateLibByOp(ql.drop(e,1),n)}updateFont(e,t,n){if(t.props.url){let i=this.getFont(e),r={...this.data.fonts[e],url:t.props.url};i.update(r),i.loadingPromise.then(()=>this.requestRender()),n.updateFont(e,this)}}},Gb=(new FB(yu.emptyData()),class extends Jc{updateByPatchedOp(e,t,n){if(super.updateByPatchedOp(e,t,n),null!==function E9e(e,t){let n=[];if(t.length!==e.length)return null;for(var i=0;i<e.length;){if("*"===t[i])n.push(e[i]);else if(e[i]!==t[i])return null;i+=1}return n}(e.path,["materials"])&&0===e.type&&Array.isArray(this.material))for(let[i,r]of Object.entries(e.props)){let s=n.shared.material(r);this.material[Number(i)]=s}else if(Oh(e.path,["material"])&&this.material instanceof Vg)"material"in t&&"string"!=typeof t.material&&this.material.updateByOp(ql.drop(e,1),t.material,n);else if(Oh(e.path,["materials","*"])&&Array.isArray(this.material)){let i=e.path[1];if("materials"in t&&i<this.material.length){let r=t.materials[i];"string"!=typeof r&&this.material[i].updateByOp(ql.drop(e,2),r,n)}}}get needsAO(){return void 0!==this.material&&(Array.isArray(this.material)?this.material[0]:this.material).hasAO}updateState(e,t){super.updateState(e,t),void 0!==e.castShadow&&(this.castShadow=e.castShadow),void 0!==e.receiveShadow&&(this.receiveShadow=e.receiveShadow);let n=this.dataPatched;if("NonParametricGeometry"!==e.geometry?.type&&"material"in e&&void 0!==e.material&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(n.flatShading,n.side,n.wireframe),t.scene.markNeedsUpdateRendererDirty()),"NonParametricGeometry"===e.geometry?.type&&("materials"in e&&void 0!==e.materials?(this.disposeMaterial(),this.material=e.materials.map(i=>t.shared.material(i).getFlavor(n.flatShading,n.side,n.wireframe)),t.scene.markNeedsUpdateRendererDirty()):"material"in e&&void 0!==e.material&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(n.flatShading,n.side,n.wireframe)],t.scene.markNeedsUpdateRendererDirty())),void 0!==e.flatShading||void 0!==e.wireframe||void 0!==e.side)if(Array.isArray(this.material))for(let i=0;i<this.material.length;i++)this.material[i]=this.material[i].getFlavor(n.flatShading,n.side,n.wireframe);else this.material=this.material.getFlavor(n.flatShading,n.side,n.wireframe)}disposeMaterial(){this.material&&NJ(this.material).forEach(e=>{e instanceof Vg&&(e instanceof kB||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}}),Cie=new oe,Pie=new mr,Sie=new mr,DWe=new oe,Eie=new vn,Ac=class extends Gb{constructor(e,t,n){super(e,t),this.data=t,this.isSkinnedMesh=!1,this.localGeometry=void 0,t.bindMode&&t.bindMatrix&&(this.bindMode=t.bindMode,this.bindMatrix=(new vn).fromArray(t.bindMatrix),this.bindMatrixInverse=new vn)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof Pi&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(void 0!==this.localGeometry)return this.localGeometry;if(this.geometryCreateDeleyed instanceof FB){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e,this)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return DA.is2DParametricMesh(e.type)&&0===e.depth}get is2DType(){return DA.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return"NonParametricGeometry"===this.geometry.userData.type}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),Oh(e.path,["geometry"])&&this.updateByPatchedOpGeometry(ql.drop(e,1),t.geometry,n)}removeInteractionGeometry(){this.localGeometry?.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){this.invalidateDownstreamBooleanData();let n=this.data.geometry.type;if("NonParametricGeometry"===n||"SubdivGeometry"===n){let r,s,o,i=e;if(void 0===this.localGeometry){let l={...this.data.geometry,...i};this.localGeometry=oT(l,t,this.data.flatShading,this)}i.scaleBaked?[r,s,o]=i.scaleBaked:({width:r,height:s,depth:o}=i);let a=this.localGeometry.userData;void 0!==a.sxPrev&&fB(this.localGeometry.attributes,r/a.sxPrev,s/a.syPrev,o/a.szPrev),a.sxPrev=r,a.syPrev=s,a.szPrev=o}else{let i={...this.data.geometry,...e};this.localGeometry?.dispose(),this.localGeometry=oT(i,t,this.data.flatShading,this)}}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand(()=>t.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,n){let i=!1;0===e.type&&0===e.path.length&&Object.keys(e.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof Pc&&this.chooseGeoemtryCache(n.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(i=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(n),this.refreshAttachedPaths(n)),i||(n.scene?.markGeometryCacheDirty(),this.createGeometryDelayed(n)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){void 0!==e.geometry&&this.updateGeometryOnStateUpdate(e.geometry,t),super.updateState(e,t)}updateGeometryGroupsIfNeeded(){Array.isArray(this.material)&&0===this.geometry.groups.length&&this.geometry.addGroup(0,Math.max(this.geometry.getIndex()?.count??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){let n=this.geometry.userData.parameters;this.is2DType?e.set(0,0,.5*n.depth):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(n.width,n.height,n.depth??0).multiplyScalar(.5)):e.setScalar(0),t.set(n.width,n.height,n.depth??0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,t){this.skeleton=e,this.isSkinnedMesh=!0,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let t=new mr,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){t.fromBufferAttribute(n,i);let s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),n.setXYZW(i,t.x,t.y,t.z,t.w)}}boneTransform(e,t){let n=this.skeleton;if(void 0===n)return;let i=this.geometry;Pie.fromBufferAttribute(i.attributes.skinIndex,e),Sie.fromBufferAttribute(i.attributes.skinWeight,e),Cie.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){let s=Sie.getComponent(r);if(0!==s){let o=Pie.getComponent(r);Eie.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(DWe.copy(Cie).applyMatrix4(Eie),s)}}return t.applyMatrix4(this.bindMatrixInverse)}};function BB(e){if(Array.isArray(e.material)){for(let t of e.material)if(0===t.getLayersOfType("outline").length)return}else if(!(e.material instanceof Vg)||0===e.material.getLayersOfType("outline").length)return;e instanceof Ac&&e.is2DAndNoDepth?function RWe(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,n=new Float32Array(t.length),i=new oe;for(let r=0;r<t.length;r+=3)i.set(t[r],t[r+1],t[r+2]).normalize(),n[r]=i.x,n[r+1]=i.y,n[r+2]=i.z;e.geometry.setAttribute("extrudeNormal",new Qn(n,3))}(e):function IWe(e){if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let t=new Map,n=e.geometry.attributes,i=n.position.array,r=n.normal.array,s=new Float32Array(i.length);for(let o=0;o<i.length;o+=3){let a=`${i[o]}_${i[o+1]}_${i[o+2]}`,l=new oe(r[o],r[o+1],r[o+2]);t.has(a)?t.get(a)?.normals.push(l):t.set(a,{normals:[l],result:new oe})}t.forEach((o,a)=>{for(let l of o.normals)o.result.add(l);o.result.divideScalar(o.normals.length)});for(let o=0;o<i.length;o+=3){let l=t.get(`${i[o]}_${i[o+1]}_${i[o+2]}`)?.result;l&&(s[o]=l.x,s[o+1]=l.y,s[o+2]=l.z)}e.geometry.setAttribute("extrudeNormal",new Qn(s,3))}(e)}function zB(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,n=new Float32Array(t.length),i=parseInt(e.uuid.replace(/\D/g,"")),r=[gi.seededRandom(i),gi.seededRandom(i+1e4),gi.seededRandom(i+2e4)];for(let s=0;s<t.length;s++)n[s]=r[s%3];e.geometry.setAttribute("randomColor",new Bi(n,3))}pB.then(e=>{});var Tp=new ra,PC=new oe;function NWe(e){let t=!1;return e.scene.objects.traverse((n,i)=>{"Mesh"===i.type&&"SubdivGeometry"===i.geometry.type&&(t=!0)}),t}var SC=class extends Ac{constructor(e,t,n){super(e,t,n),this.data=t,this.hiddenMatrixOld=new vn,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return void 0!==this.localGeometry?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return void 0!==this.localGeometry?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,t){let n=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(n.width,n.height,n.depth??0).multiplyScalar(.5)}createGeometryByControls(e){if(!0===this.skipReactionUpdate)return;let t=this.localGeometry?.uuid,{originalGeometry:n,subdividedGeometry:i,subdivPointer:r}=Pc.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=r,void 0!==n&&(this.originalGeometry?.dispose(),this.originalGeometry=n),void 0!==i&&(this.subdividedGeometry?.dispose(),this.subdividedGeometry=i??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,BB(this),zB(this),this.calcBoundingBox(),t&&(this.localGeometry.uuid=t)}updateState(e,t){if(super.updateState(e,t),void 0!==e.flatShading){let n=this.material;this.material=n.getFlavor(!1,n.side,n.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){Pc.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&Pc.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=Pc.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=Pc.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,t){let n=this.localGeometry;this.localGeometry=this.originalGeometryNew,Jc.prototype.raycast.call(this,e,t),this.localGeometry=n}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;null===e.boundingSphere&&(e.boundingSphere=new $c,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let n=e.boundingSphere.center;Tp.setFromBufferAttribute(e.attributes.position),Tp.getCenter(n),e.boundingSphere.radius=n.distanceTo(Tp.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Tp.getSize(PC),this.hasNonUniformScale&&PC.divide(this.scale);let i={width:PC.x,height:PC.y,depth:PC.z};return this.geometry.userData.parameters=i,i}updateBoundingSphere(e){let t=this.originalGeometry;Tp.min.set(e[0],e[2],e[4]),Tp.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(Tp.min.applyMatrix4(this.shearScaleInv),Tp.max.applyMatrix4(this.shearScaleInv)),null===t.boundingSphere&&(t.boundingSphere=new $c);let n=t.boundingSphere.center;Tp.getCenter(n),t.boundingSphere.radius=n.distanceTo(Tp.max)}freeSubdivPointer(){this.subdivPointer&&(Pc.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,this.originalGeometry?.dispose(),this.subdividedGeometry?.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,n){super.updateByPatchedOpGeometry(e,t,n),this.localGeometry&&this.createGeometryByControls(t)}},FWe={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},BWe={polygon_center:0,edge:1,vertex:2},fT=(e,t)=>(n,i)=>t&&0!==n&&0!==e?e*i/100:0,gr=(e,t)=>{let n=Math.abs(t),i=-1*n;return(e- -1)*(n-i)/2+i},UWe=new oe,mT=new oe,VWe=new oe,jWe=new oe;function Wb(e,t){let n=VWe.fromArray(e),i=jWe.fromArray(t);mT.copy(i).sub(n);let r=mT.length();return mT.normalize().multiplyScalar(.5*r),UWe.copy(n).add(mT).toArray()}var Rh=new Gl,gT=new oe,vT=new oe,o1=new oe,UB=e=>.5*(1-Math.cos(e*Math.PI)),Aie=new oe,Tie=new vn,Die=new S_;function Iie(e){let t=!1;return e.scene.objects.traverse((n,i)=>{"Mesh"===i.type&&"TextGeometry"===i.geometry.type&&(t=!0)}),t}var Dp,kie,Nie,Lie,Rie=class extends Ac{constructor(e,t,n){super(e,t,n),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){let e=this.dataPatched;return this.font?.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign)??0}get fontScale(){return this.font?this.dataPatched.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){return(this.font?.ascender??1)*this.fontScale}get descender(){return(this.font?.descender??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:n}=this;if(!isNaN(e.ray.origin.x)&&0!==this.scale.x&&0!==this.scale.y&&0!==this.scale.z&&(Tie.copy(n).invert(),Die.copy(e.ray).applyMatrix4(Tie),Die.intersectBox(this.singleBBox,Aie))){let i=Aie.applyMatrix4(n),r=e.ray.origin.distanceTo(i);t.push({distance:r,point:i.clone(),object:this})}}},Tc=1e-4,Fie=new oe,Bie=new oe;pB.then(e=>{kie=[(Dp=e).get_face_center,Dp.get_edge_midpoint,Dp.get_vertex_position],Nie=[Dp.get_face_normal,Dp.get_edge_normal,Dp.get_vertex_normal],Lie=[Dp.face_count,Dp.edge_count,Dp.vertex_count]});var $We=new vn,KWe=new vn,jg=new oe,a1=new oe,EC=new oe,VB=new oe,ZWe=new oe,QWe=new oe,sm=new class{constructor(){this.perlin=new Array(4096)}noise(e,t=0,n=0){if(null==this.perlin){this.perlin=new Array(4096);for(let g=0;g<4096;g++)this.perlin[g]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),n<0&&(n=-n);let c,d,p,m,v,i=Math.floor(e),r=Math.floor(t),s=Math.floor(n),o=e-i,a=t-r,l=n-s,h=0,u=.5;for(let g=0;g<4;g++){let b=i+(r<<4)+(s<<8);c=UB(o),d=UB(a),p=this.perlin[4095&b],p+=c*(this.perlin[b+1&4095]-p),m=this.perlin[b+16&4095],m+=c*(this.perlin[b+16+1&4095]-m),p+=d*(m-p),b+=256,m=this.perlin[4095&b],m+=c*(this.perlin[b+1&4095]-m),v=this.perlin[b+16&4095],v+=c*(this.perlin[b+16+1&4095]-v),m+=d*(v-m),p+=UB(l)*(m-p),h+=p*u,u*=.5,i<<=1,o*=2,r<<=1,a*=2,s<<=1,l*=2,o>=1&&(i++,o--),a>=1&&(r++,a--),l>=1&&(s++,l--)}return h}noiseSeed(e){let t=(()=>{let n,i;return{setSeed(r){i=n=(r??4294967296*Math.random())>>>0},getSeed:()=>n,rand:()=>(i=(1664525*i+1013904223)%4294967296,i/4294967296)}})();t.setSeed(e),this.perlin=new Array(4096);for(let n=0;n<4096;n++)this.perlin[n]=t.rand()}},wu=class extends(U5(Fs)){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(null===this.parent)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof Yl&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(t=>{t instanceof Yl&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){"toObject"!==this.parameters.type&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(t=void 0!==e?e:"grid"===this.parameters.type?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,"toObject"===this.parameters.type&&!this.parameters.toObject.object&&(t=0),"toObject"===this.parameters.type&&this.objectForSample){for(let i=0,r=this.children.length;i<r;++i)this.remove(this.children[0]);let n=this.children;if(n.length===t)return;if(n.length<t)for(let i=0,r=t-n.length;i<r;++i){let s=new Yl(this.object);s.expand(),this.add(s)}else for(let i=0,r=n.length-t;i<r;++i)this.remove(n[i])}else{if(this.children.length===t)return;if(this.children.length<t)for(let n=0,i=t-this.children.length;n<i;++n){let r=new Yl(this.object);r.expand(),this.add(r)}else for(let n=0,i=this.children.length-t;n<i;++n)this.remove(this.children[0])}}_updateRadial(e){let o,t=e.radial,n=t.start*gi.DEG2RAD,r=n-t.end*gi.DEG2RAD,s=new cl(t.rotation[0],t.rotation[1],t.rotation[2]);switch(t.axis){case"z":o=new oe(0,0,1);break;case"y":o=new oe(0,1,0);break;default:o=new oe(1,0,0)}let a=e.randomnessObject??Og.defaultData([1,1,1]).randomnessObject,l="perlin"===a.noiseType;sm.noiseSeed(a.seed);let c=z5((0,pC.default)(a.seed)),d=fT(a.strength,this.parameters.randomness);for(let[h,u]of this.children.entries()){let p=h*(a.freqScale/10)+a.movement,m=l?sm.noise(p):c(p,p),v=h+1;u.scale.x=t.scale[0]+d(v,gr(m,a.scale[0]))||Tc,u.scale.y=t.scale[1]+d(v,gr(m,a.scale[1]))||Tc,u.scale.z=t.scale[2]+d(v,gr(m,a.scale[2]))||Tc,u.position.setScalar(0);let g=r/e.count*h-n;switch(t.axis){case"x":u.rotation.set(0,g,0);break;case"y":u.rotation.set(0,0,g);break;case"z":u.rotation.set(g,0,0)}u.translateOnAxis(o,t.radius),u.position.x+=t.position[0]+d(v,gr(m,a.position[0])),u.position.y+=t.position[1]+d(v,gr(m,a.position[1])),u.position.z+=t.position[2]+d(v,gr(m,a.position[2]));let b=d(v,gr(m,a.rotation[0])),x=d(v,gr(m,a.rotation[1])),w=d(v,gr(m,a.rotation[2]));!0===t.alignment?(u.rotation.x+=s.x+b,u.rotation.y+=s.y+x,u.rotation.z+=s.z+w):u.rotation.set(s.x+b,s.y+x,s.z+w)}}_updateLinear(e){if("linear"!==e.type)throw new Error;let t=e.linear,n=new cl(t.rotation[0],t.rotation[1],t.rotation[2]),i=e.randomnessObject??Og.defaultData([1,1,1]).randomnessObject,r="perlin"===i.noiseType;sm.noiseSeed(i.seed);let s=z5((0,pC.default)(i.seed)),o=fT(i.strength,this.parameters.randomness);for(let[a,l]of this.children.entries()){let c=a*(i.freqScale/10)+i.movement,d=r?sm.noise(c):s(c,c),h=a+1,u=o(h,gr(d,i.rotation[0])),p=o(h,gr(d,i.rotation[1])),m=o(h,gr(d,i.rotation[2]));l.scale.x=1+(t.scale[0]-1)*a+o(h,gr(d,i.scale[0]))||Tc,l.scale.y=1+(t.scale[1]-1)*a+o(h,gr(d,i.scale[1]))||Tc,l.scale.z=1+(t.scale[2]-1)*a+o(h,gr(d,i.scale[2]))||Tc,l.rotation.x=n.x*a+u,l.rotation.y=n.y*a+p,l.rotation.z=n.z*a+m,l.position.x=t.position[0]*a+o(h,gr(d,i.position[0])),l.position.y=t.position[1]*a+o(h,gr(d,i.position[1])),l.position.z=t.position[2]*a+o(h,gr(d,i.position[2]))}}_updateGrid(e){let t=0,n=e.grid,i=e.randomnessObject??Og.defaultData([1,1,1]).randomnessObject,r=fT(i.strength,this.parameters.randomness),s="perlin"===i.noiseType;sm.noiseSeed(i.seed);let o=function rje(e=Math.random){let t=Mte(e),n=new Float64Array(t).map(s=>B5[s%12*3]),i=new Float64Array(t).map(s=>B5[s%12*3+1]),r=new Float64Array(t).map(s=>B5[s%12*3+2]);return function(s,o,a){let l,c,d,h,R,N,k,L,Q,le,u=.3333333333333333*(s+o+a),p=mC(s+u),m=mC(o+u),v=mC(a+u),g=(p+m+v)*Pp,P=s-(p-g),A=o-(m-g),D=a-(v-g);P>=A?A>=D?(R=1,N=0,k=0,L=1,Q=1,le=0):P>=D?(R=1,N=0,k=0,L=1,Q=0,le=1):(R=0,N=0,k=1,L=1,Q=0,le=1):A<D?(R=0,N=0,k=1,L=0,Q=1,le=1):P<D?(R=0,N=1,k=0,L=0,Q=1,le=1):(R=0,N=1,k=0,L=1,Q=1,le=0);let ae=P-R+Pp,he=A-N+Pp,xe=D-k+Pp,_e=P-L+2*Pp,be=A-Q+2*Pp,me=D-le+2*Pp,Te=P-1+.5,Le=A-1+.5,ke=D-1+.5,Re=255&p,Qe=255&m,Pe=255&v,Be=.6-P*P-A*A-D*D;if(Be<0)l=0;else{let ft=Re+t[Qe+t[Pe]];Be*=Be,l=Be*Be*(n[ft]*P+i[ft]*A+r[ft]*D)}let Fe=.6-ae*ae-he*he-xe*xe;if(Fe<0)c=0;else{let ft=Re+R+t[Qe+N+t[Pe+k]];Fe*=Fe,c=Fe*Fe*(n[ft]*ae+i[ft]*he+r[ft]*xe)}let Ze=.6-_e*_e-be*be-me*me;if(Ze<0)d=0;else{let ft=Re+L+t[Qe+Q+t[Pe+le]];Ze*=Ze,d=Ze*Ze*(n[ft]*_e+i[ft]*be+r[ft]*me)}let $e=.6-Te*Te-Le*Le-ke*ke;if($e<0)h=0;else{let ft=Re+1+t[Qe+1+t[Pe+1]];$e*=$e,h=$e*$e*(n[ft]*Te+i[ft]*Le+r[ft]*ke)}return 32*(l+c+d+h)}}((0,pC.default)(i.seed));if(!0===n.useCenter){let a={x:n.count[0]%2==0?2:1,y:n.count[1]%2==0?2:1,z:n.count[2]%2==0?2:1},l=new oe(n.size[0]*(n.count[0]-a.x)*.5,n.size[1]*(n.count[1]-a.y)*.5,n.size[2]*(n.count[2]-a.z)*.5);for(let c=0;c<n.count[0];c++)for(let d=0;d<n.count[1];d++)for(let h=0;h<n.count[2];h++){let u=[(c+1)*(i.freqScale/10)+i.movement,(d+1)*(i.freqScale/10)+i.movement,(h+1)*(i.freqScale/10)+i.movement],p=s?sm.noise(...u):o(...u),m=this.children[t++];m.scale.x=1+r(t,gr(p,i.scale[0]))||Tc,m.scale.y=1+r(t,gr(p,i.scale[1]))||Tc,m.scale.z=1+r(t,gr(p,i.scale[2]))||Tc;let v=r(t,gr(p,i.rotation[0])),g=r(t,gr(p,i.rotation[1])),b=r(t,gr(p,i.rotation[2]));m.rotation.set(v,g,b),m.position.x=n.size[0]*c-l.x+r(t,gr(p,i.position[0])),m.position.y=n.size[1]*d-l.y+r(t,gr(p,i.position[1])),m.position.z=n.size[2]*h-l.z+r(t,gr(p,i.position[2]))}}else for(let a=0;a<n.count[0];a++)for(let l=0;l<n.count[1];l++)for(let c=0;c<n.count[2];c++){let d=[(a+1)*(i.freqScale/10)+i.movement,(l+1)*(i.freqScale/10)+i.movement,(c+1)*(i.freqScale/10)+i.movement],h=s?sm.noise(...d):o(...d),u=this.children[t++];u.scale.x=1+r(t,gr(h,i.scale[0]))||Tc,u.scale.y=1+r(t,gr(h,i.scale[1]))||Tc,u.scale.z=1+r(t,gr(h,i.scale[2]))||Tc;let p=r(t,gr(h,i.rotation[0])),m=r(t,gr(h,i.rotation[1])),v=r(t,gr(h,i.rotation[2]));u.rotation.set(p,m,v),u.position.x=n.size[0]*a+r(t,gr(h,i.position[0])),u.position.y=-n.size[1]*l+r(t,gr(h,i.position[1])),u.position.z=-n.size[2]*c+r(t,gr(h,i.position[2]))}}_updateToObject(e){if("toObject"!==e.type)throw new Error;let{toObject:t}=e,n=new cl(t.rotation[0],t.rotation[1],t.rotation[2]),i=e.randomnessObject??Og.defaultData([1,1,1]).randomnessObject,r="perlin"===i.noiseType;sm.noiseSeed(i.seed);let s=z5((0,pC.default)(i.seed)),o=fT(i.strength,this.parameters.randomness);if(!t.object){for(let[,v]of this.children.entries())v.position.set(0,0,0),v.scale.setScalar(1),v.rotation.set(0,0,0);return void(this.objectForSample=void 0)}if(!this.objectForSample)return;if(this.objectForSample instanceof Rie){if(!this.objectForSample.font?.isLoaded||void 0===this.objectForSample.geometry.attributes.position)return void(this._pendingMediaLoad=!0);this._pendingMediaLoad=!1}if(void 0===this.objectForSample.geometry&&this.objectForSample.isAncestorOf(this.object.uuid))return void console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);let a=this.getSubdivData(),l=[],c=v=>{let g=v.length;return[v.map(P=>P[0]).reduce((P,A)=>P+A,0)/g,v.map(P=>P[1]).reduce((P,A)=>P+A,0)/g,v.map(P=>P[2]).reduce((P,A)=>P+A,0)/g]},d=v=>Math.round(1e6*v)/1e6;a.forEach(v=>{let g=a.filter(b=>d(v.pos[0])===d(b.pos[0])&&d(v.pos[1])===d(b.pos[1])&&d(v.pos[2])===d(b.pos[2]));l.push(g.length>1?{pos:v.pos,norm:c(g.map(b=>b.norm))}:v)});let h=function zWe(e){let t=[],n={};for(var i=0,r=e.length;i<r;i++){var s=JSON.stringify(e[i].pos.map(o=>Math.round(1e4*o)/1e4));n[s]||(t.push(e[i]),n[s]=!0)}return t}(l);if(h.length>0){let v=Math.round(h.length*t.count/100);this._updateCount(v)}else{let v=this.objectForSample.geometry.getAttribute("position");if(!v||isNaN(v.count)||0===v.count)return void console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`)}this.objectForSample.updateMatrixWorld();let u=new class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||3!==t.attributes.position.itemSize)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let i=0;i<e.count;i+=3){let r=1;_u.a.fromBufferAttribute(e,i),_u.b.fromBufferAttribute(e,i+1),_u.c.fromBufferAttribute(e,i+2),r*=_u.getArea(),t[i/3]=r}this.distribution=new Float32Array(e.count/3);let n=0;for(let i=0;i<t.length;i++)n+=t[i],this.distribution[i]=n;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let n=this.distribution[this.distribution.length-1],i=this.binarySearch(this.randomFunction()*n);return this.sampleFace(i,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,n=0,i=t.length-1,r=-1;for(;n<=i;){let s=Math.ceil((n+i)/2);if(0===s||t[s-1]<=e&&t[s]>e){r=s;break}e<t[s]?i=s-1:n=s+1}return r}sampleFace(e,t,n){let i=this.randomFunction(),r=this.randomFunction();return i+r>1&&(i=1-i,r=1-r),_u.a.fromBufferAttribute(this.positionAttribute,3*e),_u.b.fromBufferAttribute(this.positionAttribute,3*e+1),_u.c.fromBufferAttribute(this.positionAttribute,3*e+2),t.set(0,0,0).addScaledVector(_u.a,i).addScaledVector(_u.b,r).addScaledVector(_u.c,1-(i+r)),_u.getNormal(n),this}}(this.objectForSample).build(),p=FWe[t.axis],m=this.children;u.setRandomGenerator((0,pC.default)(this.object.uuid+t.seed));for(let[v,g]of m.entries()){let b=v*(i.freqScale/10)+i.movement,x=r?sm.noise(b):s(b,b),w=v+1,P=o(w,gr(x,i.rotation[0])),A=o(w,gr(x,i.rotation[1])),D=o(w,gr(x,i.rotation[2]));"random"===t.spreadType?u.sample(EC,VB):(h.length&&(EC.fromArray(h[v].pos),VB.fromArray(h[v].norm)),this.objectForSample instanceof SC&&EC.applyMatrix4($We.copy(this.objectForSample.matrixWorld).invert())),EC.applyMatrix4(this.object.hiddenMatrix.clone().invert()),g.position.copy(EC),jg.fromArray(p);let R="normal"===t.align?VB:this.object.getWorldDirection(QWe),N=a1.fromArray(t.position);a1.x+=a1.x+o(w,gr(x,i.position[0])),a1.y+=a1.y+o(w,gr(x,i.position[1])),a1.z+=a1.z+o(w,gr(x,i.position[2]));let k=Math.acos(R.dot(jg)),L=ZWe.crossVectors(jg,R).normalize(),Q=KWe.makeRotationAxis(L,k),le=R.clone().cross(this.object.up).normalize(),ae=le.clone().cross(R).normalize(),he=(new vn).makeBasis(le,R,ae),xe=new oe(jg.y,jg.z,jg.x).normalize(),_e=xe.clone().cross(jg).normalize(),be=(new vn).makeBasis(xe,jg,_e).invert(),me=(new vn).multiplyMatrices(he,be);g.rotation.setFromRotationMatrix(me),N.applyMatrix4(Q),g.position.add(N),g.rotation.x=g.rotation.x+n.x+P,g.rotation.y=g.rotation.y+n.y+A,g.rotation.z=g.rotation.z+n.z+D,g.scale.setScalar(1),g.scale.x=g.scale.x+t.scale[0]+o(w,gr(x,i.scale[0]))||Tc,g.scale.y=g.scale.y+t.scale[1]+o(w,gr(x,i.scale[1]))||Tc,g.scale.z=g.scale.z+t.scale[2]+o(w,gr(x,i.scale[2]))||Tc,g.scale.multiply(this.object.scale),g.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType;if("random"===e)return[];if(this.objectForSample instanceof SC){let t=this.objectForSample,n=BWe[e],r=kie[n],s=Nie[n],o=[],a=(0,Lie[n])(t.subdivPointerNew);for(let l=0;l<=a-1;l++){let c=r(t.subdivPointerNew,l),d=s(t.subdivPointerNew,l);Fie.fromArray(c).applyMatrix4(t.matrixWorld),Bie.fromArray(d),o.push({pos:Fie.toArray(),norm:Bie.toArray()})}return o}return(this.objectForSample.geometry.index?function HWe(e){let t=[];for(let n=0;n<=e.index.count;n++)if(gT.fromArray(e.index.array,3*n),Rh.setFromAttributeAndIndices(e.attributes.position,gT.x,gT.y,gT.z),Rh.getNormal(vT),Rh.getMidpoint(o1),!(isNaN(o1.x)||isNaN(o1.y)||isNaN(o1.z))){let{a:i,b:r,c:s}=Rh,o=i.toArray(),a=r.toArray(),l=s.toArray(),c=i.distanceTo(r),d=r.distanceTo(s),h=s.distanceTo(i),u=Wb(o,a),p=Wb(a,l),m=Wb(l,o),v=[c,d,h],g=Math.max(...v),b=v.filter(P=>Math.round(P)===Math.round(g)).length>1,x=[],w=Rh.getMidpoint(o1).toArray();g===c&&!b&&(x=[p,m,m],w=u),g===d&&!b&&(x=[u,m,m],w=p),g===h&&!b&&(x=[u,p,p],w=m),b&&(x=[u,p,m]),t.push({vertices:[o,a,l],faceCenters:x,midpoint:w,norm:Rh.getNormal(vT).toArray()})}return t}(this.objectForSample.geometry):function GWe(e){let t=[],{position:n}=e.attributes;for(let i=0;i<n.count;i++){Rh.setFromAttributeAndIndices(n,3*i,3*i+1,3*i+2),Rh.getNormal(vT),Rh.getMidpoint(o1);let r=Rh.a.toArray(),s=Rh.b.toArray(),o=Rh.c.toArray();t.push({vertices:[r,s,o],faceCenters:[Wb(r,s),Wb(s,o),Wb(o,r)],midpoint:o1.toArray(),norm:vT.toArray()})}return t}(this.objectForSample.geometry)).map((t,n)=>"polygon_center"===e?{pos:t.midpoint,norm:t.norm}:"vertex"===e?[{pos:t.vertices[0],norm:t.norm},{pos:t.vertices[1],norm:t.norm},{pos:t.vertices[2],norm:t.norm}]:"edge"===e?[{pos:t.faceCenters[0],norm:t.norm},{pos:t.faceCenters[1],norm:t.norm},{pos:t.faceCenters[2],norm:t.norm}]:[]).flat()}updateState(e,t){if(this.parameters=rA(e),"toObject"!==this.parameters.type)(null===this.parent||this.parent!==this.object)&&(this.removeFromParent(),this.object.parent?.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(null===this.parent||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let n=t.find(this.parameters.toObject.object);this.objectForSample=n instanceof Jc?n:void 0,this.matrix=new vn,this.hiddenMatrix=new vn,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,n&&n.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},OC=e=>{var t;return(t=class extends e{}).geometryHelper=new hp(30,30,30),t},yT=new S_,jB=new $c,zie=new vn,AC=(e,t,n,i,r=!1)=>{let s=t,o=e.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),jB.copy(s.boundingSphere),jB.applyMatrix4(o),!1===n.ray.intersectsSphere(jB)||(zie.copy(o).invert(),yT.copy(n.ray).applyMatrix4(zie),null!==s.boundingBox&&!1===yT.intersectsBox(s.boundingBox)))return;let a,l,c,d,m,v,h=s.index,u=s.attributes.position,p=s.drawRange;if(!1===r){for(m=Math.max(0,p.start),v=Math.min(h.count,p.start+p.count);m<v;m+=3)if(l=h.getX(m),c=h.getX(m+1),d=h.getX(m+2),a=g(e,n,yT,u,l,c,d),a)return a.faceIndex=Math.floor(m/3),void i.push(a)}else{let b=s.attributes.position,x=new oe,w=new oe,P=new oe,A=new oe,D=2,R=1/((e.scale.x+e.scale.y+e.scale.z)/3),N=R*R;for(let Q=Math.max(0,p.start),le=Math.min(b.count,p.start+p.count)-1;Q<le;Q+=D){if(x.fromBufferAttribute(b,Q),w.fromBufferAttribute(b,Q+1),yT.distanceSqToSegment(x,w,A,P)>N)continue;A.applyMatrix4(e.matrixWorld);let ae=n.ray.origin.distanceTo(A);ae<n.near||ae>n.far||i.push({distance:ae,point:P.clone().applyMatrix4(e.matrixWorld),object:e})}}function g(b,x,w,P,A,D,R){let N=new oe,k=new oe,L=new oe,Q=new oe,le=new oe;if(N.fromBufferAttribute(P,A),k.fromBufferAttribute(P,D),L.fromBufferAttribute(P,R),null===w.intersectTriangle(N,k,L,!1,Q))return null;le.copy(Q),le.applyMatrix4(b.matrixWorld);let ae=x.ray.origin.distanceTo(le);return ae<x.near||ae>x.far?null:{faceIndex:1,distance:ae,point:le.clone(),object:b}}},_T=new oe,kh=new L_,JWe=class extends RM{constructor(e){let t=new Pi,n=new _g({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],s={},o=new Di(15711266),a=new Di(15711266),l=new Di(2857471);function c(h,u,p){d(h,p),d(u,p)}function d(h,u){i.push(0,0,0),r.push(u.r,u.g,u.b),void 0===s[h]&&(s[h]=[]),s[h].push(i.length/3-1)}c("n1","n2",o),c("n2","n4",o),c("n4","n3",o),c("n3","n1",o),c("f1","f2",o),c("f2","f4",o),c("f4","f3",o),c("f3","f1",o),c("n1","f1",o),c("n2","f2",o),c("n3","f3",o),c("n4","f4",o),c("p","n1",a),c("p","n2",a),c("p","n3",a),c("p","n4",a),c("u1","u2",l),c("u2","u3",l),c("u3","u1",l),t.setAttribute("position",new Qn(i,3)),t.setAttribute("color",new Qn(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let e=this.geometry,t=this.pointMap;kh.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let s=.8;Mu("n1",t,e,kh,-1,-1,s),Mu("n2",t,e,kh,1,-1,s),Mu("n3",t,e,kh,-1,1,s),Mu("n4",t,e,kh,1,1,s);let o=s;Mu("f1",t,e,kh,-1,-1,o),Mu("f2",t,e,kh,1,-1,o),Mu("f3",t,e,kh,-1,1,o),Mu("f4",t,e,kh,1,1,o),Mu("u1",t,e,kh,.35,1.1,.8),Mu("u2",t,e,kh,-.35,1.1,.8),Mu("u3",t,e,kh,0,1.55,.8),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Mu(e,t,n,i,r,s,o){_T.set(r,s,o).unproject(i);let a=t[e];if(void 0!==a){let l=n.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],_T.x,_T.y,_T.z)}}var HB,eqe=class extends(OC(JWe)){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){AC(this.object,this.geometry,e,t,!0)}};(e=>{e.is=t=>"objectHelper"in t})(HB||(HB={}));var TC=(e,t)=>class extends(W5(e)){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(n,i){this.objectHelper.raycast(n,i)}showGizmos(){for(let n in this.gizmos){let i=this.gizmos[n];i instanceof HO&&(i.visible=!0)}}updateEntityBoxSize(n,i){this.objectHelper.visible&&this.geometryHelper instanceof hp?(n.setScalar(0),i.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(n,i)}hideGizmos(){for(let n in this.gizmos){let i=this.gizmos[n];i instanceof HO&&(i.visible=!1)}}},qb=new oe,GB=new oe,WB=new Qi,qB=new oe,DC=new oe,XB=new oe,$l=class extends(TC(L_,eqe)){constructor(e="",t={...nC.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=db.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(e,t),this.previousProjectionMatrix=new vn,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let n=this.width,i=this.height;this.orthoCamera=new OL(-.5*n,.5*n,.5*i,-.5*i,-5e4,1e4),this.perspCamera=new Wl(45,n/i,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return"PerspectiveCamera"===this.cameraType}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){"PerspectiveCamera"===e?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&("PerspectiveCamera"===e?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){"PerspectiveCamera"===e?this.toPerspective():"OrthographicCamera"===e&&this.toOrthographic()}get near(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.near:this.orthoCamera.near}set near(e){"PerspectiveCamera"===this._cameraType?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&("PerspectiveCamera"===this._cameraType?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,n){"number"==typeof e&&(e=new oe(e,t,n)),super.lookAt(e),this.getWorldPosition(qb),this.targetOffset=qb.distanceTo(e)}getTarget(e=new oe){return this.getWorldDirection(GB),this.getWorldPosition(qb),GB.multiplyScalar(this.targetOffset),e.copy(qb).add(GB),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(qb),qb.distanceTo(e)}updateUp(){this.getWorldQuaternion(WB),qB.set(0,0,1).applyQuaternion(WB),DC.copy(Fs.DEFAULT_UP),this.isUpVectorFlipped&&DC.negate(),DC.applyQuaternion(WB),XB.copy(Fs.DEFAULT_UP).projectOnPlane(qB),this.angleOffsetFromUp=XB.angleTo(DC),this.angleOffsetFromUp*=XB.cross(DC).dot(qB)>=0?1:-1}updateTransformState(e,t){let n=super.updateTransformState(e,t);return void 0!==e.isUpVectorFlipped&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),n}getViewFrontToObject(e){let t=e.getWorldPosition(new oe),n=e.getWorldDirection(new oe).multiplyScalar(this.targetOffset);return{position:t.clone().add(n),target:t}}getViewToTarget(e){let t=this.getWorldDirection(new oe).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}getViewToObject(e){let t=new oe;return e.getWorldPosition(t),this.getViewToTarget(t)}setViewplaneSize(e,t,n=!1){if(this.aspect=e/t,n){let i=e>t?this.aspect:1,r=e>t?1:this.aspect;this.left=-395*i,this.right=395*i,this.top=1/r*395,this.bottom=1/r*-395}else this.left=.5*-e,this.right=.5*e,this.top=.5*t,this.bottom=.5*-t;this.updateProjectionMatrix()}copyViewPlaneSize(e){this.aspect=e.aspect,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,n,i,r,s){"PerspectiveCamera"===this._cameraType?this.perspCamera.setViewOffset(e,t,n,i,r,s):this.orthoCamera.setViewOffset(e,t,n,i,r,s)}clearViewOffset(){"PerspectiveCamera"===this._cameraType?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){"PerspectiveCamera"===this._cameraType?this.toPerspective():"OrthographicCamera"===this._cameraType&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=null===e.view?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return DF(t,e)}updateCameraSubtype(e,t){let n="perspective"===e?"PerspectiveCamera":"OrthographicCamera";void 0!==t.zoom&&this.setZoom(n,t.zoom),void 0!==t.near&&this.setNear(n,t.near),void 0!==t.fov&&"PerspectiveCamera"===n&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),void 0!==e.far&&(this.far=e.far),void 0!==e.orthographic&&this.updateCameraSubtype("orthographic",e.orthographic),void 0!==e.perspective&&this.updateCameraSubtype("perspective",e.perspective),void 0!==e.type&&(this.cameraType=e.type),void 0!==e.up&&this.up.fromArray(e.up),void 0!==e.targetOffset&&(this.targetOffset=e.targetOffset),void 0!==e.isUpVectorFlipped&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),1===e.path.length&&0===e.type&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},Xb=new vn,tqe=new vn,xT=new vn,Uie=new oe,Vie=new oe;function jie(e){let t=!1;return e.scene.objects.traverse((n,i)=>{"BooleanGeometry"===i.geometry?.type&&(t=!0)}),t}var YB,l1=class extends Gb{constructor(e,t,n){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Pi,this.onAfterRender=(i,r,s,o,a,l)=>{super.onAfterRender(i,r,s,o,a,l),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),1===e.path.length&&"geometry"===e.path[0]&&0===e.type&&void 0!==e.props.operation&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){if(-1!==this.booleanMeshSetAddress&&!e)return;for(let i=0;i<this.children.length;i++){let r=this.children[i];r instanceof l1&&!0===r.dataPatched.visible&&r.recomputeBoolean(!0===e,t)}this.meshSetAddresses=[];for(let i=0;i<this.children.length;i++){let r=this.children[i];if(r instanceof Jc&&!0===r.dataPatched.visible&&r.geometry.attributes.position?.count>0&&r.geometry.drawRange.count>0&&0!==r.booleanMeshSetAddress){Xb.multiplyMatrices(r.hiddenMatrix,r.matrix);try{if(-1===r.booleanMeshSetAddress){if((r.geometry.index??r.geometry.getAttribute("position")).count/3<15e5&&(r.booleanMeshSetAddress=Jf.getMeshSet(r.geometry,!0===e,t)),-1===r.booleanMeshSetAddress)return;Jf.transformMeshSet(r.booleanMeshSetAddress,Xb),r.booleanMatrixInvOld.copy(Xb).invert(),r.booleanWasTransformed=!1}else r instanceof l1&&!0===r.needsTransformForDownstream?(Jf.transformMeshSet(r.booleanMeshSetAddress,Xb),r.needsTransformForDownstream=!1):!0===r.booleanWasTransformed&&(Jf.transformMeshSet(r.booleanMeshSetAddress,tqe.multiplyMatrices(Xb,r.booleanMatrixInvOld)),r.booleanMatrixInvOld.copy(Xb).invert(),r.booleanWasTransformed=!1)}catch(s){console.error(s),r.booleanMeshSetAddress=0,r.geometry.userData.booleanOperationDidFail=!0;continue}!1===Jf.hasOpenEdges(r.booleanMeshSetAddress)||i===this.children.length-1&&2===this.booleanOp?(this.meshSetAddresses.push(r.booleanMeshSetAddress),r.geometry.userData.booleanOperationDidFail=!1):r.geometry.userData.booleanOperationDidFail="openEdges"}}if(0===this.meshSetAddresses.length)return this.geometry.setAttribute("position",new Qn([],0)),void this.geometry.setDrawRange(0,0);if(!0===e)return Jf.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let n=this.geometry;n.dispose(),this.geometry=new Pi,this.geometry.userData=n.userData,this.geometry.boundingSphere=n.boundingSphere;try{this.booleanMeshSetAddress=Jf.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(i){this.booleanMeshSetAddress=0,this.geometry.userData.booleanOperationDidFail=!0,console.error(i)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,BB(this),zB(this)}dispose(){super.dispose(),this.geometry.dispose()}get recursiveBBox(){let e=super.recursiveBBox;return-1===this.geometry.boundingSphere?.radius&&(e.getCenter(this.geometry.boundingSphere.center),xT.copy(this.matrixWorld).invert(),this.geometry.boundingSphere.center.applyMatrix4(xT),Uie.copy(e.max).applyMatrix4(xT),Vie.copy(e.min).applyMatrix4(xT),this.geometry.boundingSphere.radius=Uie.distanceTo(Vie)/2),e}};(e=>{e.is=function t(n){return es.is(n)&&n instanceof UM}})(YB||(YB={}));var $B=(e,t)=>class extends(TC(e,t)){updateState_Light(n,i){this.updateState_Entity(n,i),void 0!==n.color&&(this.color=i.shared.color(n.color)),void 0!==n.intensity&&(this.intensity=n.intensity),void 0!==n.depth&&(this.shadow.camera.far=n.depth,this.shadow.needsUpdate=!0),void 0!==n.shadows&&(this.castShadow=n.shadows)}},Cu=e=>e instanceof Jc,om=e=>null!==e&&e instanceof l1,nqe=e=>e instanceof $l,iqe=e=>YB.is(e),KB=e=>HB.is(e),wT=class extends(OC(RLe)){constructor(e,t=15){super(t),this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,t){AC(this.object,wT.geometryHelper,e,t)}update(){}},Yb=class extends(TC(H_,wT)){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t),"buffer"in e&&1===Object.keys(e).length&&t.scene.reloadSplats()}},IC="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",MT=class extends Ks{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new yn(null),kernel16:new yn(null),inputBuffer:new yn(null),cocBuffer:new yn(null),texelSize:new yn(new tt),scale:new yn(1)},blending:wa,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;\n#if PASS == 1\nuniform vec4 kernel64[32];\n#else\nuniform vec4 kernel16[8];\n#endif\nvarying vec2 vUv;void main(){\n#ifdef FOREGROUND\nvec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;\n#else\nfloat CoC=texture2D(cocBuffer,vUv).g*scale;\n#endif\nif(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\n#ifdef FOREGROUND\nvec2 step=texelSize*max(CoC,CoCNearFar.g*scale);\n#else\nvec2 step=texelSize*CoC;\n#endif\n#if PASS == 1\nvec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;\n#else\nvec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;\n#endif\n}}",vertexShader:IC}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let t=new Float32Array(128),n=new Float32Array(32),i=0,r=0;for(let a=0;a<80;++a){let l=2.39996323*a,c=Math.sqrt(a)/Math.sqrt(80),d=c*Math.cos(l),h=c*Math.sin(l);a%5==0?(n[r++]=d,n[r++]=h):(t[i++]=d,t[i++]=h)}let s=[],o=[];for(let a=0;a<128;)s.push(new mr(t[a++],t[a++],t[a++],t[a++]));for(let a=0;a<32;)o.push(new mr(n[a++],n[a++],n[a++],n[a++]));this.uniforms.kernel64.value=s,this.uniforms.kernel16.value=o}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function Gie(e,t,n){return e*(t-n)-t}function ZB(e,t,n){return Math.min(Math.max((e+t)/(t-n),0),1)}var oqe=class extends Ks{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new yn(null),focusDistance:new yn(0),focusRange:new yn(0),cameraNear:new yn(.3),cameraFar:new yn(1e3)},blending:wa,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}void main(){float depth=readDepth(vUv);\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}",vertexShader:IC}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Ff){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-Gie(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=ZB(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-Gie(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=ZB(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Wl?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Wie=class extends Ks{constructor(e=new tt){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new yn(null),texelSize:new yn(new tt),halfTexelSize:new yn(new tt),kernel:new yn(0),scale:new yn(1)},blending:wa,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <encodings_fragment>\n#include <dithering_fragment>\n}",vertexShader:"uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let n=this.uniforms;n.texelSize.value.set(1/e,1/t),n.halfTexelSize.value.copy(n.texelSize.value).multiplyScalar(.5)}},dqe=class extends Ks{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new yn(null),opacity:new yn(1)},blending:wa,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n}",vertexShader:IC}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},fqe=class extends Ks{constructor(e=new tt,t=2){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:v_.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new yn(null),depthBuffer:new yn(null),predicationBuffer:new yn(null),texelSize:new yn(e)},blending:wa,depthWrite:!1,depthTest:!1,fragmentShader:"varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Ff){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*e).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Pu={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},QB=class extends Ks{constructor(e,t,n,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:v_.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new yn(null),depthBuffer:new yn(null),resolution:new yn(new tt),texelSize:new yn(new tt),cameraNear:new yn(.3),cameraFar:new yn(1e3),aspect:new yn(1),time:new yn(0)},blending:wa,depthWrite:!1,depthTest:!1,dithering:r}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),n&&this.setUniforms(n),this.adoptCameraSettings(i)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Ff){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <encodings_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(Pu.FRAGMENT_HEAD,e.get(Pu.FRAGMENT_HEAD)).replace(Pu.FRAGMENT_MAIN_UV,e.get(Pu.FRAGMENT_MAIN_UV)).replace(Pu.FRAGMENT_MAIN_IMAGE,e.get(Pu.FRAGMENT_MAIN_IMAGE)),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}".replace(Pu.VERTEX_HEAD,e.get(Pu.VERTEX_HEAD)).replace(Pu.VERTEX_MAIN_SUPPORT,e.get(Pu.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Wl?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let n=this.uniforms;n.resolution.value.set(e,t),n.texelSize.value.set(1/e,1/t),n.aspect.value=e/t}static get Section(){return Pu}},yqe=class extends Ks{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:v_.replace(/\D+/g,"")},uniforms:{inputBuffer:new yn(null),threshold:new yn(0),smoothing:new yn(1),range:new yn(null)},blending:wa,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:IC}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return null!==this.luminanceRange}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},bqe=class extends Ks{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new yn(e),inputBuffer:new yn(null),strength:new yn(1)},blending:wa,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef MASK_PRECISION_HIGH\nuniform mediump sampler2D maskTexture;\n#else\nuniform lowp sampler2D maskTexture;\n#endif\n#if MASK_FUNCTION != 0\nuniform float strength;\n#endif\nvarying vec2 vUv;void main(){\n#if COLOR_CHANNEL == 0\nfloat mask=texture2D(maskTexture,vUv).r;\n#elif COLOR_CHANNEL == 1\nfloat mask=texture2D(maskTexture,vUv).g;\n#elif COLOR_CHANNEL == 2\nfloat mask=texture2D(maskTexture,vUv).b;\n#else\nfloat mask=texture2D(maskTexture,vUv).a;\n#endif\n#if MASK_FUNCTION == 0\n#ifdef INVERTED\nmask=step(mask,0.0);\n#else\nmask=1.0-step(mask,0.0);\n#endif\n#else\nmask=clamp(mask*strength,0.0,1.0);\n#ifdef INVERTED\nmask=1.0-mask;\n#endif\n#endif\n#if MASK_FUNCTION == 2\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\n#else\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\n#endif\n}",vertexShader:IC}),this.toneMapped=!1,this.setColorChannel(0),this.setMaskFunction(0)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==jl&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return void 0!==this.defines.INVERTED}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},Mqe=class extends Ks{constructor(e=new tt,t=new tt){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new yn(null),searchTexture:new yn(null),areaTexture:new yn(null),resolution:new yn(t),texelSize:new yn(e)},blending:wa,depthWrite:!1,depthTest:!1,fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",vertexShader:"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return void 0===this.defines.DISABLE_DIAG_DETECTION}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return void 0===this.defines.DISABLE_CORNER_DETECTION}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let n=this.uniforms;n.texelSize.value.set(1/e,1/t),n.resolution.value.set(e,t)}},Cqe=new L_,Hg=null,Dc=class{constructor(e="Pass",t=new vg,n=Cqe){this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();null!==t&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;null!==t?t.material=e:(t=new yc(function Pqe(){if(null===Hg){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(Hg=new Pi).setAttribute?(Hg.setAttribute("position",new Bi(e,3)),Hg.setAttribute("uv",new Bi(t,2))):(Hg.addAttribute("position",new Bi(e,3)),Hg.addAttribute("uv",new Bi(t,2)))}return Hg}(),e),t.frustumCulled=!1,null===this.scene&&(this.scene=new vg),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Ff){}render(e,t,n,i,r){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(null!==t&&"function"==typeof t.dispose){if(t instanceof vg||t===this.renderer)continue;this[e].dispose()}}}},JB=class extends Dc{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new dqe,this.needsSwap=!1,this.renderTarget=e,void 0===e&&(this.renderTarget=new Ls(1,1,{minFilter:Or,magFilter:Or,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,n,i,r){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,n){void 0!==n&&(this.renderTarget.texture.type=n,n!==jl?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===fr&&(this.renderTarget.texture.encoding=fr))}},Sqe=class extends Dc{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,n,i,r){let s=e.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},ez=new Di,tz=class extends Dc{constructor(e=!0,t=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,n){this.color=e,this.depth=t,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,n,i,r){let s=this.overrideClearColor,o=this.overrideClearAlpha,a=e.getClearAlpha(),l=null!==s,c=o>=0;l?(ez.copy(e.getClearColor(ez)),e.setClearColor(s,c?o:a)):c&&e.setClearAlpha(o),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(ez,a):c&&e.setClearAlpha(a)}},od=class extends Sl{constructor(e,t=-1,n=-1,i=1){super(),this.resizable=e,this.base=new tt(1,1),this.preferred=new tt(t,n),this.target=this.preferred,this.s=i}get width(){let i,{base:e,preferred:t,scale:n}=this;return i=-1!==t.width?t.width:-1!==t.height?Math.round(t.height*(e.width/Math.max(e.height,1))):Math.round(e.width*n),i}set width(e){this.preferredWidth=e}get height(){let i,{base:e,preferred:t,scale:n}=this;return i=-1!==t.height?t.height:-1!==t.width?Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):Math.round(e.height*n),i}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(-1),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return-1}},nz=!1,Xie=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let n;if(t.material.flatShading)switch(t.material.side){case Yc:n=this.materialsFlatShadedDoubleSide;break;case ll:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded}else switch(t.material.side){case Yc:n=this.materialsDoubleSide;break;case ll:n=this.materialsBackSide;break;default:n=this.materials}this.originalMaterials.set(t,t.material),t.material=t.isSkinnedMesh?n[2]:t.isInstancedMesh?n[1]:n[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,null!==e){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let n of t)n.uniforms=Object.assign({},e.uniforms),n.side=cu;t[2].skinning=!0,this.materialsBackSide=t.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=ll,i}),this.materialsDoubleSide=t.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=Yc,i}),this.materialsFlatShaded=t.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=t.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=ll,i}),this.materialsFlatShadedDoubleSide=t.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=Yc,i})}}render(e,t,n){let i=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,nz){let r=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n);for(let s of r)s[0].material=s[1];this.meshCount!==r.size&&r.clear()}else{let r=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=r}e.shadowMap.enabled=i}disposeMaterials(){if(null!==this.material){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return nz}static set workaroundEnabled(e){nz=e}},Eqe=class extends Dc{constructor(e,t,n=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new tz,this.overrideMaterialManager=null===n?null:new Xie(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new Xie(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,n,i,r){let s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,c=s.background,d=e.shadowMap.autoUpdate,h=this.renderToScreen?null:t;null!==a&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(h),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,s,o):e.render(s,o),o.layers.mask=l,s.background=c,e.shadowMap.autoUpdate=d}},Yie=class extends Dc{constructor(e,t,{resolutionScale:n=1,width:i=od.AUTO_SIZE,height:r=od.AUTO_SIZE,renderTarget:s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new Eqe(e,t,new xZ({depthPacking:EK}));let o=this.renderPass;o.skipShadowMapUpdate=!0,o.ignoreBackground=!0;let a=o.getClearPass();a.overrideClearColor=new Di(16777215),a.overrideClearAlpha=1,this.renderTarget=s,void 0===this.renderTarget&&(this.renderTarget=new Ls(1,1,{minFilter:eo,magFilter:eo,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new od(this,i,r,n);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,i,r){this.renderPass.render(e,this.renderToScreen?null:this.renderTarget)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}},is=(new Float32Array([255/256/256**3,255/256/65536,255/256/256,255/256]),{SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18}),qqe=new Map([[is.SKIP,null],[is.ADD,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}"],[is.ALPHA,"vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}"],[is.AVERAGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}"],[is.COLOR_BURN,"float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[is.COLOR_DODGE,"float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[is.DARKEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}"],[is.DIFFERENCE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}"],[is.EXCLUSION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}"],[is.LIGHTEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}"],[is.MULTIPLY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}"],[is.DIVIDE,"float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[is.NEGATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}"],[is.NORMAL,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}"],[is.OVERLAY,"float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[is.REFLECT,"float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[is.SCREEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}"],[is.SOFT_LIGHT,"float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[is.SUBTRACT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}"]]),Xqe=class extends Sl{constructor(e,t=1){super(),this.f=e,this.opacity=new yn(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return qqe.get(this.blendFunction)}},Ip={NONE:0,DEPTH:1,CONVOLUTION:2},Rp=class extends Sl{constructor(e,t,{attributes:n=Ip.NONE,blendFunction:i=is.SCREEN,defines:r=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=e,this.renderer=null,this.attributes=n,this.fragmentShader=t,this.vertexShader=a,this.defines=r,this.uniforms=s,this.extensions=o,this.blendMode=new Xqe(i),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=Ff){}update(e,t,n){}setSize(e,t){}initialize(e,t,n){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(null!==t&&"function"==typeof t.dispose){if(t instanceof vg||t===this.renderer)continue;this[e].dispose()}}}};function $ie(e,t,n){for(let i of t){let r="$1"+e+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(let o of n.entries())null!==o[1]&&n.set(o[0],o[1].replace(s,r))}}function Yqe(e,t,n,i,r,s,o){let a=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=void 0!==a.get("fragment")&&/mainImage/.test(a.get("fragment")),c=void 0!==a.get("fragment")&&/mainUv/.test(a.get("fragment")),d=[],h=[],u=!1,p=!1;if(void 0===a.get("fragment"))console.error("Missing fragment shader",t);else if(c&&o&Ip.CONVOLUTION)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(l||c){let m=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,v=QB.Section;if(c){let b=`\t${e}MainUv(UV);\n`;n.set(v.FRAGMENT_MAIN_UV,n.get(v.FRAGMENT_MAIN_UV)+b),u=!0}if(null!==a.get("vertex")&&/mainSupport/.test(a.get("vertex"))){let b=`\t${e}MainSupport(`;b+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(a.get("vertex"))?"vUv);\n":");\n",n.set(v.VERTEX_MAIN_SUPPORT,n.get(v.VERTEX_MAIN_SUPPORT)+b),d=d.concat([...a.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(x=>x[1])),h=h.concat(d).concat([...a.get("vertex").matchAll(m)].map(x=>x[1]))}h=h.concat([...a.get("fragment").matchAll(m)].map(b=>b[1])),h=h.concat([...t.defines.keys()].map(b=>b.replace(/\([\w\s,]*\)/g,""))),h=h.concat([...t.uniforms.keys()]),t.uniforms.forEach((b,x)=>s.set(e+x.charAt(0).toUpperCase()+x.slice(1),b)),t.defines.forEach((b,x)=>r.set(e+x.charAt(0).toUpperCase()+x.slice(1),b)),$ie(e,h,r),$ie(e,h,a);let g=t.blendMode;if(i.set(g.blendFunction,g),l){let x=`${e}MainImage(color0, UV, `;o&Ip.DEPTH&&/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/.test(a.get("fragment"))&&(x+="depth, ",p=!0),x+="color1);\n\t";let w=e+"BlendOpacity";s.set(w,g.opacity),x+=`color0 = blend${g.blendFunction}(color0, color1, ${w});\n\n\t`,n.set(v.FRAGMENT_MAIN_IMAGE,n.get(v.FRAGMENT_MAIN_IMAGE)+x),x=`uniform float ${w};\n\n`,n.set(v.FRAGMENT_HEAD,n.get(v.FRAGMENT_HEAD)+x)}n.set(v.FRAGMENT_HEAD,n.get(v.FRAGMENT_HEAD)+a.get("fragment")+"\n"),null!==a.get("vertex")&&n.set(v.VERTEX_HEAD,n.get(v.VERTEX_HEAD)+a.get("vertex")+"\n")}else console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);return{varyings:d,transformedUv:u,readDepth:p}}var PT=class extends Dc{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new QB(null,null,null,e),this.effects=t.sort((n,i)=>i.attributes-n.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=QB.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),n=new Map,i=new Map,r=new Map,s=new Set,o=0,a=0,l=0,c=!1,d=!1;for(let u of this.effects)if(u.blendMode.blendFunction===is.SKIP)l|=u.getAttributes()&Ip.DEPTH;else if(l&u.getAttributes()&Ip.CONVOLUTION)console.error("Convolution effects cannot be merged",u);else{l|=u.getAttributes();let m=Yqe("e"+o++,u,t,n,i,r,l);if(a+=m.varyings.length,c=c||m.transformedUv,d=d||m.readDepth,null!==u.extensions)for(let v of u.extensions)s.add(v)}let h=/\bblend\b/g;for(let u of n.values()){let p=u.getShaderCode().replace(h,`blend${u.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+p+"\n")}l&Ip.DEPTH?(d&&t.set(e.FRAGMENT_MAIN_IMAGE,"float depth = readDepth(UV);\n\n\t"+t.get(e.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,c?(t.set(e.FRAGMENT_MAIN_UV,"vec2 transformedUv = vUv;\n"+t.get(e.FRAGMENT_MAIN_UV)),i.set("UV","transformedUv")):i.set("UV","vUv"),t.forEach((u,p,m)=>m.set(p,u.trim().replace(/^#/,"\n#"))),this.uniformCount=r.size,this.varyingCount=a,this.skipRendering=0===o,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(s).setUniforms(r).setDefines(i)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=Ff){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let n of this.effects)n.setDepthTexture(e,t)}render(e,t,n,i,r){for(let s of this.effects)s.update(e,t,i);if(!this.skipRendering||this.renderToScreen){let s=this.fullscreenMaterial;s.inputBuffer=t.texture,s.time+=i,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let n of this.effects)n.setSize(e,t)}initialize(e,t,n){this.renderer=e;for(let i of this.effects)i.initialize(e,t,n),i.addEventListener("change",r=>this.handleEvent(r));this.updateMaterial(),this.verifyResources(),void 0!==n&&n!==jl&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){"change"===e.type&&this.recompile()}},$qe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Kie=class extends Dc{constructor({resolutionScale:e=.5,width:t=od.AUTO_SIZE,height:n=od.AUTO_SIZE,kernelSize:i=rz.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new Ls(1,1,{minFilter:Or,magFilter:Or,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let r=this.resolution=new od(this,t,n,e);r.addEventListener("change",s=>this.setSize(r.baseWidth,r.baseHeight)),this.blurMaterial=new Wie,this.ditheredBlurMaterial=new Wie,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,i,r){let u,p,s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=$qe[this.kernelSize],d=this.blurMaterial,h=t;for(this.fullscreenMaterial=d,u=0,p=c.length-1;u<p;++u){let m=1&u?l:a;d.kernel=c[u],d.inputBuffer=h.texture,e.setRenderTarget(m),e.render(s,o),h=m}this.dithering&&(d=this.ditheredBlurMaterial,this.fullscreenMaterial=d),d.kernel=c[u],d.inputBuffer=h.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(s,o)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t);let i=n.width,r=n.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(i,r),this.ditheredBlurMaterial.setSize(i,r)}initialize(e,t,n){void 0!==n&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==jl?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===fr&&(this.renderTargetA.texture.encoding=fr,this.renderTargetB.texture.encoding=fr))}static get AUTO_SIZE(){return od.AUTO_SIZE}},Kqe=class extends Dc{constructor({width:e=od.AUTO_SIZE,height:t=od.AUTO_SIZE,renderTarget:n,luminanceRange:i,colorOutput:r}={}){super("LuminancePass"),this.fullscreenMaterial=new yqe(r,i),this.needsSwap=!1,this.renderTarget=n,void 0===this.renderTarget&&(this.renderTarget=new Ls(1,1,{minFilter:Or,magFilter:Or,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let s=this.resolution=new od(this,e,t);s.addEventListener("change",o=>this.setSize(s.baseWidth,s.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,n,i,r){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}initialize(e,t,n){void 0!==n&&n!==jl&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Zqe=class extends Dc{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new tz(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,n,i,r){let s=e.getContext(),o=e.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,d=this.inverted?0:1,h=1-d;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,d,4294967295),o.stencil.setClear(h),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(e,null):(c.render(e,t),c.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(a,l)):(e.setRenderTarget(t),e.render(a,l),e.setRenderTarget(n),e.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},kp=class extends Dc{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,null!==this.fullscreenMaterial){let t=this.fullscreenMaterial.uniforms;void 0!==t&&void 0!==t[e]&&(this.inputBufferUniform=t[e])}}render(e,t,n,i,r){null!==this.inputBufferUniform&&null!==t&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}initialize(e,t,n){void 0!==n&&n!==jl&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},rz={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},tXe=class extends Rp{constructor({blendFunction:e=is.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:n=.025,resolutionScale:i=.5,intensity:r=1,width:s=od.AUTO_SIZE,height:o=od.AUTO_SIZE,kernelSize:a=rz.LARGE}={}){super("BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}",{blendFunction:e,uniforms:new Map([["map",new yn(null)],["intensity",new yn(r)]])}),this.renderTarget=new Ls(1,1,{minFilter:Or,magFilter:Or,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new Kqe({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=n,this.blurPass=new Kie({resolutionScale:i,width:s,height:o,kernelSize:a});let l=this.blurPass.getResolution();l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,n){let i=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,i),this.blurPass.render(e,i,i)):this.blurPass.render(e,t,i)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.luminancePass.resolution.copy(n)}initialize(e,t,n){this.blurPass.initialize(e,t,n),void 0!==n&&(this.renderTarget.texture.type=n,e.outputEncoding===fr&&(this.renderTarget.texture.encoding=fr))}},iXe=class extends Rp{constructor({blendFunction:e=is.NORMAL,brightness:t=0,contrast:n=0}={}){super("BrightnessContrastEffect","uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["brightness",new yn(t)],["contrast",new yn(n)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},sXe=class extends Rp{constructor(e=is.NORMAL){super("ColorAverageEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",{blendFunction:e})}},lXe=class extends Rp{constructor({blendFunction:e=is.NORMAL,offset:t=new tt(.001,5e-4)}={}){super("ChromaticAberrationEffect","varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",{vertexShader:"uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",blendFunction:e,attributes:Ip.CONVOLUTION,uniforms:new Map([["offset",new yn(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},dXe=class extends Rp{constructor(e,{blendFunction:t=is.NORMAL,worldFocusDistance:n,worldFocusRange:i,focusDistance:r=0,focalLength:s=.1,focusRange:o=s,bokehScale:a=1,width:l=od.AUTO_SIZE,height:c=od.AUTO_SIZE}={}){super("DepthOfFieldEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;\n#else\nuniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;\n#endif\nuniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}",{blendFunction:t,attributes:Ip.DEPTH,uniforms:new Map([["nearColorBuffer",new yn(null)],["farColorBuffer",new yn(null)],["nearCoCBuffer",new yn(null)],["scale",new yn(1)]])}),this.camera=e,this.renderTarget=new Ls(1,1,{minFilter:Or,magFilter:Or,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new kp(new oqe(e));let d=this.cocMaterial;d.focusDistance=r,d.focusRange=o,void 0!==n&&(d.worldFocusDistance=n),void 0!==i&&(d.worldFocusRange=i),this.blurPass=new Kie({kernelSize:rz.MEDIUM,width:l,height:c});let h=this.blurPass.getResolution();h.addEventListener("change",p=>this.setSize(h.getBaseWidth(),h.getBaseHeight())),this.maskPass=new kp(new bqe(this.renderTargetCoC.texture));let u=this.maskPass.fullscreenMaterial;u.maskFunction=1,u.colorChannel=1,this.bokehNearBasePass=new kp(new MT(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new kp(new MT(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new kp(new MT(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new kp(new MT(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=a}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let n of t)n.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera;return ZB(-t.position.distanceTo(e),t.near,t.far)}setDepthTexture(e,t=Ff){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,n){let i=this.renderTarget,r=this.renderTargetCoC,s=this.renderTargetCoCBlurred,o=this.renderTargetMasked;if(null!==this.target){let a=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=a}this.cocPass.render(e,null,r),this.blurPass.render(e,r,s),this.maskPass.render(e,t,o),this.bokehFarBasePass.render(e,o,i),this.bokehFarFillPass.render(e,i,this.renderTargetFar),this.bokehNearBasePass.render(e,t,i),this.bokehNearFillPass.render(e,i,this.renderTargetNear)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t);let i=n.width,r=n.height,s=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];s.push(this.renderTargetCoC,this.renderTargetMasked),s.forEach(o=>o.setSize(e,t)),s=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],s.forEach(o=>o.setSize(i,r)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(o=>o.fullscreenMaterial.setSize(i,r))}initialize(e,t,n){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(i=>i.initialize(e,t,n)),this.blurPass.initialize(e,t,jl),void 0!==n&&(this.renderTarget.texture.type=n,this.renderTargetNear.texture.type=n,this.renderTargetFar.texture.type=n,this.renderTargetMasked.texture.type=n,e.outputEncoding===fr&&(this.renderTarget.texture.encoding=fr,this.renderTargetNear.texture.encoding=fr,this.renderTargetFar.texture.encoding=fr,this.renderTargetMasked.texture.encoding=fr))}},uXe=(new oe,new vn,class extends Rp{constructor({blendFunction:e=is.NORMAL,hue:t=0,saturation:n=0}={}){super("HueSaturationEffect","uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["hue",new yn(new oe)],["saturation",new yn(n)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((3*e.x-1)/2)}set hue(e){let t=Math.sin(e),n=Math.cos(e);this.uniforms.get("hue").value.set((2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}}),fXe=(new Di,class extends Rp{constructor({blendFunction:e=is.SCREEN,premultiply:t=!1}={}){super("NoiseEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\n#ifdef PREMULTIPLY\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\n#else\noutputColor=vec4(noise,inputColor.a);\n#endif\n}",{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}}),gXe=class extends Rp{constructor(e=30){super("PixelationEffect","uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",{uniforms:new Map([["active",new yn(!1)],["d",new yn(new tt)]])}),this.resolution=new tt,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}},Zie=(Math,new oe,new oe,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC"),Qie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",Jie=class extends Rp{constructor({preset:e=1,edgeDetectionMode:t=2,predicationMode:n=0}={}){let i,r;super("SMAAEffect","uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",{vertexShader:"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",blendFunction:is.NORMAL,attributes:Ip.CONVOLUTION|Ip.DEPTH,uniforms:new Map([["weightMap",new yn(null)]])}),arguments.length>1&&(i=arguments[0],r=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new Ls(1,1,{minFilter:Or,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new tz(!0,!1,!1),this.clearPass.overrideClearColor=new Di(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new kp(new fqe),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=n,this.weightsPass=new kp(new Mqe);let s=new JZ;s.onLoad=()=>{let o=new Wa(i);o.name="SMAA.Search",o.magFilter=eo,o.minFilter=eo,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!0,this.weightsMaterial.searchTexture=o;let a=new Wa(r);a.name="SMAA.Area",a.magFilter=Or,a.minFilter=Or,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!1,this.weightsMaterial.areaTexture=a,this.dispatchEvent({type:"load"})},s.itemStart("search"),s.itemStart("area"),void 0!==i&&void 0!==r?(s.itemEnd("search"),s.itemEnd("area")):typeof Image<"u"&&(i=new Image,r=new Image,i.addEventListener("load",()=>s.itemEnd("search")),r.addEventListener("load",()=>s.itemEnd("area")),i.src=Zie,r.src=Qie),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,n=this.weightsMaterial;switch(e){case 0:t.edgeDetectionThreshold=.15,n.orthogonalSearchSteps=4,n.diagonalDetection=!1,n.cornerDetection=!1;break;case 1:t.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=8,n.diagonalDetection=!1,n.cornerDetection=!1;break;case 2:t.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=16,n.diagonalSearchSteps=8,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0;break;case 3:t.edgeDetectionThreshold=.05,n.orthogonalSearchSteps=32,n.diagonalSearchSteps=16,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0}}setDepthTexture(e,t=Ff){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,n){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;null!==e&&null!==t&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return Zie}static get areaImageDataURL(){return Qie}},bXe=class extends Rp{constructor({blendFunction:e=is.NORMAL,technique:t=0,eskil:n=!1,offset:i=.5,darkness:r=.5}={}){super("VignetteEffect","uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#if VIGNETTE_TECHNIQUE == 0\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#else\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new yn(i)],["darkness",new yn(r)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return 1===this.technique}set eskil(e){this.technique=e?1:0}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}};function sz(e,t,n){return e+(t-e)*n}function Kl(e,t,n,i){let r=sz(e,t,.75),s=sz(n,i,.75);return sz(r,s,.875)}new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array(2),new Float32Array(2),new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125]),new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4]),new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3]),Kl(0,0,0,0),new Float32Array([0,0,0,0]),Kl(0,0,0,1),new Float32Array([0,0,0,1]),Kl(0,0,1,0),new Float32Array([0,0,1,0]),Kl(0,0,1,1),new Float32Array([0,0,1,1]),Kl(0,1,0,0),new Float32Array([0,1,0,0]),Kl(0,1,0,1),new Float32Array([0,1,0,1]),Kl(0,1,1,0),new Float32Array([0,1,1,0]),Kl(0,1,1,1),new Float32Array([0,1,1,1]),Kl(1,0,0,0),new Float32Array([1,0,0,0]),Kl(1,0,0,1),new Float32Array([1,0,0,1]),Kl(1,0,1,0),new Float32Array([1,0,1,0]),Kl(1,0,1,1),new Float32Array([1,0,1,1]),Kl(1,1,0,0),new Float32Array([1,1,0,0]),Kl(1,1,0,1),new Float32Array([1,1,0,1]),Kl(1,1,1,0),new Float32Array([1,1,1,0]),Kl(1,1,1,1),new Float32Array([1,1,1,1]);var am=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(n){this.effect.blendMode.opacity.value=n},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(n){this.effect.blendMode.setBlendFunction(Number(n))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=is.NORMAL}},xXe=class extends am{constructor(){super(tXe),this.blendFunction=is.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},wXe=class extends am{constructor(){super(iXe)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},MXe=class extends am{constructor(){super(lXe),this.effect.offset=new tt(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[1e3*this.effect.offset.x,1e3*this.effect.offset.y]}},CXe=class extends am{constructor(){super(sXe)}},PXe=class extends am{constructor(){super(uXe),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},SXe=class extends am{constructor(){super(fXe),this.blendFunction=is.OVERLAY}},EXe=class extends am{constructor(){super(bXe)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},OXe=class extends am{constructor(e){super(dXe,e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}},AXe=class extends am{constructor(){super(gXe)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},oz=class extends Ks{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new yn(null)},blending:wa,depthWrite:!1,depthTest:!1,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}",fragmentShader:"#define GLSLIFY 1\nlayout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}"})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},kXe=class extends Dc{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new oz,this.resolutionVector=new tt,this.resolveMaterial=new Ks({name:"TAAResolveMaterial",uniforms:{inputBuffer:new yn(null),historyBuffer:new yn(null),velocityBuffer:new yn(null),depthBuffer:new yn(null),resolution:new yn(new tt)},blending:wa,depthWrite:!1,depthTest:!1,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",fragmentShader:"#define GLSLIFY 1\n#include <common>\nvarying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;\n#define USE_YCOCG\n#define USE_CATMULL_ROM\nconst float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){\n#ifdef USE_YCOCG\nvec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);\n#else\nreturn texture(tex,uv);\n#endif\n}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){\n#ifdef CHOOSE_LONGEST_MOTION_VECTOR\nfloat longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;\n#else\nfloat closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;\n#endif\n}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);\n#ifdef USE_CATMULL_ROM\nvec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);\n#else\nvec4 previousColor=sample_color(historyBuffer,previousPixelPos);\n#endif\n#ifdef USE_YCOCG\npreviousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);\n#endif\nvec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);\n#ifdef USE_YCOCG\nvec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;\n#endif\nvec4 previousColorClipped=clamp(previousColor,cmin,cmax);\n#ifdef LUMINANCE_DIFFERENCES\n#ifdef USE_YCOCG\nfloat lum0=currentColor.r;float lum1=previousColorClipped.r;\n#else\nfloat lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);\n#endif\nfloat unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));\n#else\nconst float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);\n#endif\n#ifdef USE_YCOCG\ngl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);\n#else\ngl_FragColor=result;\n#endif\n}"}),this.historyRenderTarget=new Ls(1024,1024,{minFilter:Or,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new Ls(1024,1024,{minFilter:Or,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,t){this.historyRenderTarget.setSize(e,t),this.resultRenderTarget.setSize(e,t)}render(e,t){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=t.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=t.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=t.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(t.width,t.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let n=this.renderToScreen?null:t;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(n),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},NXe=class extends Dc{constructor(e,t,n){super("TransmissionPass",void 0,t),this.MRTCompatible=!0,this.depthPass=new Yie(e,t,{renderTarget:n.transmissionDepthTarget}),this.passThroughMaterial=new oz,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new oz,this.depthPass=new Yie(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,t,n){let i=this.camera.layers.mask,r=e;r.setRenderTarget(r.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=t.texture[0],r.clear(),r.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,t,n),r.shadowMap.needsUpdate=!1,r.shadowMap.autoUpdate=!1;let s=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(s),e.render(this.splineScene,this.camera),this.camera.layers.mask=i}},ere=new vg,LXe=new Ks({transparent:!0,vertexShader:"\n        void main() {\n            gl_Position = vec4(0.0);\n        }\n    ",fragmentShader:"\n        layout(location = 1) out vec4 gVelocity;\n\n        void main() {\n            gl_FragColor = vec4(0.0);\n\t\t\tgVelocity = vec4(0.0);\n        }\n    "}),az=class extends Dc{constructor(e,t,n){super("OpaquePass",t??ere,n),this.MRTCompatible=!0,this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.originalMaterials=new Map,this.MRTCompatible=e}set splatViewer(e){this._splatViewer=e}get splatViewer(){return this._splatViewer}setCamera(e){this.camera=e}setScene(e){this.scene=e??ere}getScene(){return this.scene}render(e,t){if(this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.clear(),this.scene.traverse(i=>{i.layers.isEnabled(3)&&i instanceof Jc&&(this.originalMaterials.set(i.id,i.material),i.material=LXe)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8),e.setRenderTarget(this.renderToScreen?null:t),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),!0===this._splatViewer?.splatRenderingInitialized){let i=e.autoClear;e.autoClear=!1,e.render(this.scene,this.camera),this._splatViewer.update(),e.render(this._splatViewer.splatMesh,this.camera),e.autoClear=i}else e.render(this.scene,this.camera);this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach((i,r)=>{let s=this.scene.getObjectById(r);s&&(s.material=i)})}},BXe=new Ks({name:"CombineMaterial",uniforms:{inputBufferA:new yn(null),inputBufferB:new yn(null)},blending:wa,depthWrite:!1,depthTest:!1,vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n    gl_Position = vec4(position.xy, 1.0, 1.0);\n    vUv = position.xy * 0.5 + 0.5;\n}\n",fragmentShader:"\n    varying vec2 vUv;\n    uniform sampler2D inputBufferA;\n    uniform sampler2D inputBufferB;\n\n    // TODO: Why do we need these when postpro of framemode is enabled???\n    layout(location = 1) out vec4 gVelocity;\n\n    void main() {\n\tvec4 resA = texture2D(inputBufferA, vUv);\n\tvec4 resB = texture2D(inputBufferB, vUv);\n    float a = resA.a + resB.a * ( 1.0 - resA.a );\n\n\tvec4 res;\n\tres.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));\n\tres.a = resA.a + resB.a * (1.0 - resA.a);\n\tgl_FragColor = res;\n    gVelocity = vec4(0.0);\n    }\n"}),zXe=class extends Dc{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=BXe,this.helperPass=new az(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new az(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let t=new Jie({preset:0,edgeDetectionMode:2});this.effectPass=new PT(this.camera,t),this.rt=new Ls(10,10,{minFilter:Or,magFilter:Or,wrapS:na,wrapT:na,depthBuffer:!0})}setSize(e,t){this.rt.setSize(e,t),this.effectPass.setSize(e,t)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,t,n){super.initialize(e,t,n),this.effectPass.initialize(e,t,n)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,t,n){this.rt.depthTexture=t.depthTexture;let i=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,n),this.fullscreenMaterial.uniforms.inputBufferA.value=n.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=t.texture,e.setClearAlpha(i),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},RC=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],qXe=new Ks({vertexShader:"#define GLSLIFY 1\n#include <skinning_pars_vertex>\nout vec3 n;void main(){\n#include <beginnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <begin_vertex>\n#include <skinning_vertex>\nvec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}",fragmentShader:"#define GLSLIFY 1\nin vec3 n;void main(){gl_FragColor=vec4(n,1.0);}"}),ET=new Ks({vertexShader:"#define GLSLIFY 1\nout vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}",fragmentShader:"#define GLSLIFY 1\nin vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){\n#ifdef DEBUG\nfloat d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);\n#else\nvec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;\n#endif\n}",uniforms:{texture_ao_lrez:new yn(null),texture_depth_lrez:new yn(null),texture_depth_hrez:new yn(null),near:new yn(null),far:new yn(null)}}),XXe=class extends Dc{constructor(e,t){super("AmbientOcclusionPass",void 0,t),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let n=1024,i=1024;this.gBuffer=new Ls(n,i,{type:gc,depthTexture:new G_(n,i),minFilter:Or,magFilter:Or}),this.depthBufferHighRes=new Ls(n,i,{depthTexture:new G_(n,i)}),this.aoBuffer=new Ls(n,i,{minFilter:Or,magFilter:Or}),this.splineScene=e,this.splineCamera=t;let r=new Float32Array(2*RC.length);for(let o=0;o<RC.length;o++){let a=2*o;r[a+0]=RC[o][0],r[a+1]=RC[o][1]}this.blueNoiseInDiskTexture=new yg(r,RC.length,1,$E,gc),this.blueNoiseInDiskTexture.wrapS=Nf,this.blueNoiseInDiskTexture.wrapT=Nf,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new Ks({vertexShader:"#define GLSLIFY 1\nout vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}",fragmentShader:"#define GLSLIFY 1\nin vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}\n#define USE_GBUFFER_NORMALS\nvoid main(){vec3 view_space_p=get_view_position(v_uv);\n#ifdef USE_GBUFFER_NORMALS\nvec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;\n#else\nvec3 view_space_n=-rebuild_normal(v_uv,view_space_p);\n#endif\nfloat radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}",uniforms:{near:new yn(null),far:new yn(null),fov:new yn(null),proj_info:new yn(new mr),is_ortho:new yn(!1),resolution:new yn(new tt),radius_of_influence:new yn(8),radius_in_screen_space:new yn(1),exponent:new yn(1),ao_color:new yn(new oe),bias:new yn(.5),texture_depth:new yn(null),texture_normals:new yn(null),texture_blue_noise:new yn(null),texture_blue_noise_in_disk:new yn(this.blueNoiseInDiskTexture),frame_index:new yn(0),fog_enabled:new yn(!1),fog_near:new yn(1),fog_far:new yn(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new Ls(n,i,{minFilter:Or,magFilter:Or,wrapS:na,wrapT:na,depthBuffer:!1,type:gc});let s=new Jie({preset:3,edgeDetectionMode:2});this.effectPass=new PT(this.camera,s)}initialize(e,t,n){super.initialize(e,t,n),this.effectPass.initialize(e,t,n)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,t){this._width=e,this._height=t,this.depthBufferHighRes.setSize(e,t);let n=this._runHalfRes?.5:1,i=e*n,r=t*n;this.gBuffer.setSize(i,r),this.aoBuffer.setSize(i,r),this.hbaoMaterial.uniforms.resolution.value.set(i,r),this.aaBuffer.setSize(i,r),this.effectPass.setSize(i,r)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}render(e,t,n){this.splineScene.overrideMaterial=qXe;let i=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=i,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let r=this.splineCamera.perspCamera.projectionMatrix.elements;this.hbaoMaterial.uniforms.proj_info.value.set(2/r[0],2/r[5],-(1-r[8])/r[0],-(1+r[9])/r[5]);let c=this.splineCamera.perspCamera.fov*(Math.PI/180),d=this.hbaoMaterial.uniforms.resolution.value.y/(2*Math.tan(.5*c));this.hbaoMaterial.uniforms.radius_in_screen_space.value=.5*this.hbaoMaterial.uniforms.radius_of_influence.value*d,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let r=this.splineCamera.orthoCamera.projectionMatrix.elements,o=2/r[5];this.hbaoMaterial.uniforms.proj_info.value.set(2/r[0],o,-(1+r[12])/r[0],-(1-r[13])/r[5]),this.hbaoMaterial.uniforms.radius_in_screen_space.value=this.hbaoMaterial.uniforms.radius_of_influence.value*(this.hbaoMaterial.uniforms.resolution.value.y/o*.5),this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=ET,ET.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,ET.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,ET.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},KXe=class extends kp{constructor(){super(new Ks({vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D tInput;\nuniform sampler2D tMap;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nuniform vec2 uResolution;\nuniform vec2 uCoords;\n\n// Draws a rectangle at center <st> with size <size>\nfloat rectangle(vec2 st, vec2 size) {\n    size = vec2(0.5) - size * 0.5;\n    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));\n    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));\n\n    return uv.x * uv.y;\n}\n\nuniform vec2 uSize;\nuniform float uScale;\nuniform float uDPR;\nuniform float uCurrent;\nuniform vec3 uSceneColor;\n\nvoid main() {\n    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;\n    screenUv *= 1.0 / uDPR;\n\n    vec2 center = vec2(0.5, -0.5);\n    vec2 outsideUv = screenUv;\n    outsideUv += center;\n    outsideUv -= uCoords.xy / uResolution.xy;\n    outsideUv = (outsideUv - 0.5) + 0.5;\n    outsideUv -= center;\n    vec2 s = (uSize / uResolution) * uScale;\n    float isOutside = 1.0 - rectangle(outsideUv, s);\n    \n    vec2 mid = vec2(0.5);\n    vec2 insideUv = (screenUv - mid + s * mid) / s;\n    vec4 background = texture2D(tInput, screenUv);\n    vec4 image = texture2D(tMap, insideUv);\n    gl_FragColor = mix(image, background, isOutside);\n}\n",uniforms:{tInput:new yn(null),tMap:new yn(null),uResolution:new yn(new tt),uSize:new yn(new tt),uCoords:new yn(new tt),uScale:new yn(1),uSceneColor:new yn(new Di(16711680)),uDPR:new yn(1),uCurrent:new yn(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},JXe=[],eYe=class extends kp{constructor(){super(new Ks({vertexShader:"\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D toScene;\nuniform sampler2D fromScene;\nuniform vec2 resolution;\n\nuniform vec2 uResolution;\nuniform float uDPR;\n\nuniform float mixRatio;\nuniform sampler2D tMixTexture;\nuniform int useTexture;\nuniform float threshold;\n\nvoid main() {\n\tvec2 screenUv = gl_FragCoord.xy / uResolution.xy;\n\tscreenUv *= 1.0 / uDPR;\n\n\tvec4 texel1 = texture2D( fromScene, screenUv );\n\tvec4 texel2 = texture2D( toScene, screenUv );\n\n\tif (useTexture==1) {\n\t\t\n\t\tvec4 transitionTexel = texture2D( tMixTexture, screenUv );\n\t\tfloat r = mixRatio * (1.0 + threshold * 2.0) - threshold;\n\t\tfloat mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);\n\t\t\n\t\tgl_FragColor = mix( texel1, texel2, mixf );\n\t} else {\n\t\t\n\t\tgl_FragColor = mix( texel1, texel2, mixRatio );\n\t\t\n\t}\n}\n",uniforms:{toScene:new yn(null),fromScene:new yn(null),uResolution:new yn(new tt),uDPR:new yn(1),mixRatio:new yn(0),threshold:new yn(.1),useTexture:new yn(0),tMixTexture:{value:JXe[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}};function tre(e,t){return t&&t.enabled&&e.push(t.effect),e}var tYe=e=>Object.values(is).includes(e)?e:is.NORMAL,nYe=class extends Sl{constructor(e){super(),this.postprocessingState=IA.defaultData,this._scene=new vg,this._camera=new $l,this.effects=new Map,this.blueNoiseTexture=new yg,this._renderToScreen=!0,this.clock=new class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=sQ(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=sQ();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}},this.renderer=e,this.debug=!1,this.effects.set("bloom",new xXe),this.effects.set("chromaticAberration",new MXe),this.effects.set("vignette",new EXe),this.effects.set("noise",new SXe),this.effects.set("colorAverage",new CXe),this.effects.set("hueSaturation",new PXe),this.effects.set("brightnessContrast",new wXe),this.effects.set("depthOfField",new OXe),this.effects.set("pixelation",new AXe),this.effectComposer=new class{constructor(e,{depthBuffer:t=!0,stencilBuffer:n=!1,multisampling:i=0,frameBufferType:r=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new JB,this.depthTexture=null,this.timer=new class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return.001*this.delta}getFixedDelta(){return.001*this.fixedDelta}setFixedDelta(e){return this.fixedDelta=1e3*e,this}getElapsed(){return.001*this.elapsed}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=void 0!==e?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(t,n,r,i,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(t,n,r,i,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(t,n,r,i,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,null!==e){let t=e.getSize(new tt),n=e.getContext().getContextAttributes()?.alpha??!1,i=this.inputBuffer.texture[0].type;i===jl&&e.outputEncoding===fr&&(this.inputBuffer.texture[0].encoding=fr,this.outputBuffer.texture[0].encoding=fr,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(t.width,t.height,!1);for(let r of this.passes)r.initialize(e,n,i)}}replaceRenderer(e,t=!0){let n=this.renderer,i=n.domElement.parentNode;return this.setRenderer(e),t&&null!==i&&(i.removeChild(n.domElement),i.appendChild(e.domElement)),n}createDepthTexture(){let e=this.depthTexture=new G_(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Dv,e.type=Av):e.type=Lf,e}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,n,i,r,s){let c,o=this.renderer,a=null===o?new tt:o.getDrawingBufferSize(new tt),l={minFilter:Or,magFilter:Or,wrapS:na,wrapT:na,stencilBuffer:t,depthBuffer:e};return i>0?(c=new Ls(a.width,a.height,l),c.samples=i):(r?(c=new A3e(a.width,a.height,2,l),c.texture[1].type=Ov):c=new Ls(a.width,a.height,l),c.depthTexture=new G_(2048,2048),c.depthTexture.type=gc),n===jl&&null!==o&&o.outputEncoding===fr&&(Array.isArray(c.texture)?c.texture.forEach(d=>d.encoding=fr):c.texture.encoding=fr),Array.isArray(c.texture)?c.texture.forEach((d,h)=>{d.name=`EffectComposer.Buffer ${r} ${h}`,d.generateMipmaps=!1}):(c.texture.name=`EffectComposer.Buffer ${r}`,c.texture.generateMipmaps=!1),c.name=s,c}addPass(e,t){let o,n=this.passes,i=this.renderer,r=i.getDrawingBufferSize(new tt),s=i.getContext().getContextAttributes()?.alpha??!1;if(e.MRTCompatible&&(o=this.inputBuffer.texture[0].type),e.MRTCompatible||(o=this.inputBuffer.texture.type),e.setRenderer(i),e.setSize(r.width,r.height),e.initialize(i,s,o),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){let a=this.createDepthTexture();for(e of n)e.setDepthTexture(a)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let t=this.passes,n=t.indexOf(e);-1!==n&&t.splice(n,1).length>0&&(null!==this.depthTexture&&(t.reduce((r,s)=>r||s.needsDepthTexture,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())),this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0)))}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let l,c,d,h,t=this.renderer,n=this.copyPass,i=this.inputBuffer,r=this.outputBuffer,s=this.inputBufferSingle,o=this.outputBufferSingle,a=!1;void 0===e&&(e=this.timer.update().getDelta());for(let u of this.passes)u.enabled&&(u.MRTCompatible?u.render(t,i,r,e,a):u.render(t,s,o,e,a),u.needsSwap&&(a&&(n.renderToScreen=u.renderToScreen,l=t.getContext(),c=t.state.buffers.stencil,c.setFunc(l.NOTEQUAL,1,4294967295),n.render(t,i,r,e,a),c.setFunc(l.EQUAL,1,4294967295)),d=i,h=s,i=r,s=o,r=d,o=h),u instanceof Zqe?a=!0:u instanceof Sqe&&(a=!1))}setSize(e,t,n){let i=this.renderer;if(this._width=e,this._height=t,void 0===e||void 0===t){let s=i.getSize(new tt);e=s.width,t=s.height}i.setSize(e,t,n);let r=i.getDrawingBufferSize(new tt);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height),this.inputBufferSingle.setSize(r.width,r.height),this.outputBufferSingle.setSize(r.width,r.height);for(let s of this.passes)s.setSize(r.width,r.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),null!==this.inputBufferSingle&&this.inputBufferSingle.dispose(),null!==this.outputBufferSingle&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}}(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new az(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new NXe(this.scene,this.camera,this.renderer),this.aoPass=new XXe(this.scene,this.camera),this.taaPass=new kXe,this.taaPass.renderToScreen=!1,this.helperPass=new zXe(this.camera),this.helperPass.renderToScreen=!1,this.overlayPass=new KXe,this.overlayPass.enabled=!1,this.sceneTransitionPass=new eYe,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){void 0!==e?(this.overlayPass.texture=e,this.overlayPass.enabled=!0):this.overlayPass.enabled=!1}get overlayTexture(){return this.overlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),this.aoPass.setCamera(e),this.helperPass.setCamera(e)}updateRenderToScreen(){let e=!1;for(let t=this.effectComposer.passes.length-1;t>=0;t--){let n=this.effectComposer.passes[t];!0!==n.enabled||e||!this._renderToScreen?n.renderToScreen=!1:(n.renderToScreen=!0,e=!0)}}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new yg(e,128,128),this.blueNoiseTexture.wrapS=Nf,this.blueNoiseTexture.wrapT=Nf,this.blueNoiseTexture.minFilter=eo,this.blueNoiseTexture.magFilter=eo,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,t,n,i,r,s,o,a){this.aoPass.enabled=e,this.aoPass.radius=t,this.aoPass.bias=n,this.aoPass.aoColor=i,this.aoPass.fogEnabled=r,this.aoPass.fogNear=s,this.aoPass.fogFar=o,this.aoPass.runHalfRes!==!a&&(this.aoPass.runHalfRes=!a)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){if(this.uvEffectPass?.dispose(),this.effectPass?.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let e=[this.effects.get("pixelation")].reduce(tre,[]);e.length>0&&(this.uvEffectPass=new PT(this.camera,...e),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let t=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(tre,[]);t.length>0&&(this.effectPass=new PT(this.camera,...t),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.overlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass)}_initCopyPass(){if(this._savePass)return;let e=new tt;this.renderer.getDrawingBufferSize(e),this._rt=new Ls(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:Nf,wrapT:Nf}),this._rt.samples=0,this._savePass=new JB(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new JB(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(!0===e?t.removePass(this._savePass):t.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(null!==e?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...n}=e,i=!1;t!==this.postprocessingState.enabled&&(i=!0);for(let r of Object.entries(n)){let s=r[1],o=this.effects.get(r[0]);if(o){o.enabled!==s.enabled&&(i=!0),o.enabled=s.enabled;for(let[a,l]of Object.entries(s))"blendFunction"===a?o.blendFunction=tYe(l):o[a]=l}}this.postprocessingState=e,i&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,n,i){e instanceof mr?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,n,i),this.effectComposer.outputBuffer.scissor.set(e,t,n,i));let r=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(r),this.effectComposer.outputBuffer.scissor.multiplyScalar(r),this.renderer.setScissor(e,t,n,i)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,n,i){e instanceof mr?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,n,i),this.effectComposer.outputBuffer.viewport.set(e,t,n,i))}resize(e,t,n){if(this.effectComposer.setSize(e,t,n),this._rt){let i=this.renderer.getPixelRatio();this._rt.setSize(e*i,t*i)}}dispose(){this.uvEffectPass?.dispose(),this.effectPass?.dispose(),this.effectComposer.dispose()}},rYe=yr.lights_fragment_begin,sYe=yr.shadowmask_pars_fragment,nre=null,lz=new Ks({vertexShader:"\nattribute vec3 randomColor;\nvarying vec3 vNormal;\nflat out vec3 vColor;\n\nvoid main()\n{\nvNormal = normal;\nvColor = randomColor;\ngl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));\n}\n",fragmentShader:"\nuniform float depthContrast;\nvarying vec3 vNormal;\nflat in vec3 vColor;\nvoid main()\n{\nvec3 normal = (normalize(vNormal)).rgb;\n\nfloat contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;\n\nvec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);\ngl_FragColor = vec4(resultColor, vColor.r);\n}\n",uniforms:{depthContrast:{value:1}}}),ire=new Wa,dYe=class extends wZ{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new tt,this.pipeline=new nYe(this),this.dummyCamera=new $l,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(r=!0,s=!0,o=!0)=>{let a=this.getContext(),l=0;r&&(l|=a.COLOR_BUFFER_BIT),s&&(l|=a.DEPTH_BUFFER_BIT),o&&(l|=a.STENCIL_BUFFER_BIT),a.clear(l),a.clearBufferfv(a.COLOR,1,[0,0,0,1])},this.autoClear=!1;let t=this.setPixelRatio.bind(this),n=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=U4,this.dummyCamera.matrixAutoUpdate=!1;let i=this.getContext();if(i&&"drawingBufferColorSpace"in i)try{i.drawingBufferColorSpace="display-p3"}catch(r){console.warn(r)}this.setPixelRatio=r=>{this._pixelRatio!==r&&(this._pixelRatio=r,t(r))},this.setSize=(r,s,o=!0)=>{(this.viewportWidth!==r||this.viewportHeight!==s)&&(this.viewportWidth=r,this.viewportHeight=s,n(r,s,o),this.normalRenderTarget?.setSize(r*this._pixelRatio,s*this._pixelRatio),this._resizeTransmission(r,s),this.transmissionDepthTarget?.setSize(r*this._pixelRatio/2,s*this._pixelRatio/2),this.pipeline.resize(r,s,o))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){void 0===this.aoRenderTarget&&(this.aoRenderTarget=new Ls(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Or,magFilter:Or,wrapS:na,wrapT:na,depthBuffer:!1}))}_resizeTransmission(e,t){this.transmissionRenderTarget?.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),t*this._pixelRatio/(this.hdTransmission?1:2)),this.aoRenderTarget?.setSize(e*this._pixelRatio/1,t*this._pixelRatio/1)}get hdTransmission(){return 1===Ri.transmissionLod.value}set hdTransmission(e){Ri.transmissionLod.value=!0===e?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){void 0===this.transmissionRenderTarget&&(this.transmissionRenderTarget=new Ls(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:__,magFilter:Or,wrapS:na,wrapT:na,depthBuffer:!1}),this.transmissionDepthTarget=new Ls(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:eo,magFilter:eo,depthBuffer:!1}))}createNormalRenderTarget(){void 0===this.normalRenderTarget&&(this.normalRenderTarget=new Ls(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:eo,magFilter:eo,type:gc,depthTexture:new G_(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t,n){this.normalRenderTarget&&(this.setClearColor(0),n.layers.enable(8),n.layers.disable(0),n.layers.disable(3),t.traverseEntity(i=>{i.layers.isEnabled(8)&&(i.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),lz.uniforms.depthContrast.value=n instanceof $l?(n.far-n.near)/1e4:1,t.overrideMaterial=lz,this.render(t,n),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=e.wireframeState?bz:null,n.layers.enable(0),n.layers.enable(3),t.traverseEntity(i=>{i.layers.isEnabled(8)&&(i.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,t,n=1){this.dummyCamera.updateCameraState(t.dataPatched),this.dummyCamera.matrix.copy(t.matrixWorld);let i=t.height,r=t.width,s=this.viewportWidth/this.viewportHeight;r<i?r=i*s:i=r/s,this.dummyCamera.setViewplaneSize(r,i);for(let o=0;o<n;o++)this.renderSplineScene(e,this.dummyCamera)}renderSplineScene(e,t,{sceneHelpers:n,sceneHelpersOnTop:i,overrideTransmission:r,overrideNormal:s}={}){let o=e instanceof xz?e.activePage:e,a=o.visible;o.visible=!0;let l=o.scene;this.xr.enabled&&(!1===this.isXRCopyPassSet&&null!==this.getRenderTarget()&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(t)),this.setClearColor(o.bgColor,o.bgColor.a),o.penumbraSizeArray.forEach((u,p)=>{Ri.penumbraSize.value[p]=u}),Ri.pixelRatioNode.value=this.getPixelRatio(),0!==this.resolution.x&&0!==this.resolution.y?Ri.resolution.value.set(this.resolution.x,this.resolution.y):Ri.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),void 0!==s?(Ri.normalRenderTarget.value=s,Ri.normalRenderTargetDepth.value=ire):l.needsNormal()&&(this.createNormalRenderTarget(),Ri.normalRenderTarget.value=this.normalRenderTarget.texture,Ri.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(l,o,t));let c=o.data.ao,d=c.occlusion;d&&(this.createAORenderTarget(),Ri.aoRenderTarget.value=this.aoRenderTarget.texture),Ri.aoEnabled.value=d,this.pipeline.setAmbientOcclusionParams(c.occlusion,c.radius,c.bias,o.aoColor,null!==o.fog,o.backupFog.near,o.backupFog.far,c.aoFullRes),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture);let h=!1;if(void 0!==r)Ri.transmissionRenderTarget.value=r,Ri.transmissionRenderTargetDepth.value=ire,this.pipeline.setTransmissionPassEnabled(!1);else{let u=l.needsTransmission();u&&(void 0===this.transmissionRenderTarget&&(h=!0),this.createTransmissionRenderTarget(),Ri.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,Ri.aspectRatio.value=function xGe(e,t){return e>=t?new tt(t/e,1):new tt(1,e/t)}(this.viewportWidth,this.viewportHeight),Ri.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(u)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=n,this.pipeline.sceneHelpersOnTop=i,this.pipeline.scene=o,this.pipeline.camera=t,h&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==o.postprocessing&&(this.pipeline.updatePostprocessing(o.postprocessing),!n&&!i&&this.pipeline.disableHelpers()),void 0!==this.clearAlphaOverride&&this.setClearAlpha(this.clearAlphaOverride),o.overrideMaterial=l.wireframeState?bz:null,this.pipeline.render(),Ri.frameIndex.value=(Ri.frameIndex.value+1)%16,t instanceof $l&&t.copyHistory(),o.visible=a}renderFromSceneForSceneTransitionPass(e,t,n){this.pipeline.renderToScreen=!1,this.renderSplineScene(e,t),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=n,this.sceneTransitionTimeRemaining=n,this.pipeline.renderToScreen=!0;let i=this.pipeline.sceneTransitionPass.uniforms;i.uDPR.value=window.devicePixelRatio,i.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){this._superDispose(),this.pipeline.dispose(),this.aoRenderTarget?.dispose(),this.transmissionRenderTarget?.dispose(),this.transmissionDepthTarget?.dispose(),this.normalRenderTarget?.dispose(),this.normalRenderTarget?.depthTexture?.dispose()}},rre=class extends(OC(ILe)){constructor(e,t=15,n=10066329){super(e,t,n),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){AC(this.object,rre.geometryHelper,e,t)}},sre=class extends(OC(DLe)){constructor(e,t=15,n=6710886){super(e,t,n),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){AC(this.object,sre.geometryHelper,e,t)}},cz=class extends(OC(TLe)){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){AC(this.object,cz.geometryHelper,e,t)}update(){if(void 0!==this.object){let e=cz._vector,t=this.object.distance?this.object.distance:1e3,n=t*Math.tan(this.object.angle);this.cone.scale.set(n,n,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let i=void 0!==this.color?this.color:this.light.color;if(this.cone.material instanceof Array)for(let r=0,s=this.cone.material.length;r<s;r++)this.cone.material[r].color.set(i);else this.cone.material.color.set(i)}}},ore=cz;ore._vector=new oe;var are=class extends($B(mLe,rre)){constructor(e,t,n){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.top=1250,i.bottom=-1250,i.right=1250,i.left=-1250,i.near=-1e4,i.far=2500;let r=new jO(this.shadow.camera);r.visible=!1,this.gizmos.shadowmap=r}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof jO&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let n=void 0!==e.depth&&e.depth!==this.shadow.camera.far||void 0!==e.size&&e.size/2!==this.shadow.camera.right;void 0!==e.size&&function hYe(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}(this,e.size),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),void 0!==e.penumbraSize&&t.scene.markPenumbraSizeDirty(),n&&this.update()}},lre=new oe,cre=new oe,dre=new Qi,hre=class extends($B(hLe,ore)){constructor(e,t,n){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=2*gi.RAD2DEG*this.angle,i.aspect=1,i.near=100,i.far=2500;let r=new jO(this.shadow.camera);r.visible=!1,this.gizmos.shadowmap=r,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof jO&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),cre.setFromMatrixPosition(this.matrixWorld),dre.setFromRotationMatrix(this.matrixWorld),lre.copy(this.up).applyQuaternion(dre).negate().multiplyScalar(this.distance),this.target.position.copy(cre).add(lre),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.decay&&(this.decay=e.decay),void 0!==e.angle&&(this.angle=e.angle),void 0!==e.penumbra&&(this.penumbra=e.penumbra),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.penumbraSize&&t.scene.markPenumbraSizeDirty(),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},Wg=class extends(W5(vg)){constructor(e,t){super(),this.data=t,this.bgColor=new nd(1,1,1,1),this.fog=null,this.backupFog=new MZ(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new Di,this.penumbraSizeArrayCache=null,this.super_Entity(e,t),this.personalCamera=new $l(ab,{...nC.defaultData,...t.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new cLe(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}updateVisible(){}setBackgroundColor(e){this.bgColor=e,!0===this.fogUseBGColor&&(this.backupFog.color=e)}updateAmbientLight(e,t){void 0!==e.color&&(this.ambientLight.color=Oc(e.color,t)),void 0!==e.intensity&&(this.ambientLight.intensity=e.intensity),void 0!==e.enabled&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.traverseEntity(t=>{t instanceof l1&&t.recomputeBoolean()}),this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(e=>{if(e instanceof Gb)if(Array.isArray(e.material))for(let t of e.material)t.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()})}updateShadow(e){void 0!==e.softShadowQuality&&this.isActive&&((e="medium")=>{if(nre===e)return!1;nre=e;let t=(e=>{switch(e){case"low":return 8;case"medium":default:return 16;case"high":return 32}})(e);yr.shadowmap_pars_fragment=(e=>`\n\n// PCSS implementation based on:\n// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/\n// NOTE: This number affects how big the shadow blur can\n// possibly get. Bigger number == bigger blur, but less precise results\n\nconst float  gPenumbraFilterSize = 80.0;\nconst int   gPenumbraSamples = ${e};\nconst int gShadowSamples = ${e};\nconst float gShadowSamplesRpc = 1.0f / float(gShadowSamples);\n\n#ifdef USE_SHADOWMAP\n    #if NUM_DIR_LIGHT_SHADOWS > 0\n\n        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n        struct DirectionalLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n        };\n\n        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n    #endif\n\n    #if NUM_SPOT_LIGHT_SHADOWS > 0\n\n        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n        struct SpotLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n        };\n\n        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n    #endif\n\n    #if NUM_POINT_LIGHT_SHADOWS > 0\n\n        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n        struct PointLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n            float shadowCameraNear;\n            float shadowCameraFar;\n        };\n\n        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n    #endif\n\n    /*\n    #if NUM_RECT_AREA_LIGHTS > 0\n\n        // TODO (abelnation): create uniforms for area light shadows\n\n    #endif\n    */\n\nfloat computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)\n{\n    float penumbra = 1.0;\n    float blockerDepthAvg = 0.0;\n    float blockerCount = 0.0;\n\n    #pragma unroll_loop_start\n    for(int i = 0; i < gPenumbraSamples; i ++)\n    {\n        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;\n        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );\n\n        if(depth < compare + 0.0001)\n        {\n            blockerDepthAvg += depth;\n            blockerCount++;\n        }\n    }\n    #pragma unroll_loop_end\n\n    if (blockerCount > 0.0)\n    {\n        blockerDepthAvg /= blockerCount;\n\n        // Compute penumbra\n        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);\n        penumbra *= penumbra;\n        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows\n\n        return clamp(penumbra, 0.00, 1.0);\n    }\n    return 0.0;\n}\n\nfloat vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)\n{\n    float shadow         = 0.0f;\n\n    // NOTE: When using TAA, we should use screen space interleaved gradient noise\n    vec2 halton = haltonSequence[frameIndex];\n    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n    float temporalAngle  = temporalOffset * PI2;\n\n    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);\n    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);\n    if (penumbra == -1.0) {\n        return 1.0;\n    }\n\n    #pragma unroll_loop_start\n    for (int i = 0; i < gShadowSamples; i++)\n    {\n        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n        // Overall blurring offset\n        vec2 offset = vogelSample * (shadowRadius * 2.);\n\n        // Penumbra offset\n        offset += vogelSample * (penumbra * texelScalar);\n\n        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n    }\n    #pragma unroll_loop_end\n\n    return shadow * gShadowSamplesRpc;\n}\n\n\n    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n    }\n\n    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n        return unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n    }\n\n    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n        float occlusion = 1.0;\n\n        vec2 distribution = texture2DDistribution( shadow, uv );\n\n        float hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n        if (hard_shadow != 1.0 ) {\n\n            float distance = compare - distribution.x ;\n            float variance = max( 0.00000, distribution.y * distribution.y );\n            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n        }\n        return occlusion;\n\n    }\n\n    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n        float shadow = 1.0;\n\n        shadowCoord.xyz /= shadowCoord.w;\n        shadowCoord.z += shadowBias;\n\n        // if ( something && something ) breaks ATI OpenGL shader compiler\n        // if ( all( something, something ) ) using this instead\n\n        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n        bool inFrustum = all( inFrustumVec );\n\n        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n        bool frustumTest = all( frustumTestVec );\n\n        if ( frustumTest ) {\n\n        #if defined( SHADOWMAP_TYPE_PCF )\n\n            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );\n\n        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n            float dx = texelSize.x;\n            float dy = texelSize.y;\n\n            vec2 uv = shadowCoord.xy;\n            vec2 f = fract( uv * shadowMapSize + 0.5 );\n            uv -= f * texelSize;\n\n            shadow = (\n                texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n                     f.x ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n                     f.x ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n                     f.y ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n                     f.y ) +\n                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n                          f.x ),\n                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n                          f.x ),\n                     f.y )\n            ) * ( 1.0 / 9.0 );\n\n        #elif defined( SHADOWMAP_TYPE_VSM )\n\n            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n        #else // no percentage-closer filtering:\n\n            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n        #endif\n\n        }\n\n        return shadow;\n\n    }\n\n    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n    // vector suitable for 2D texture mapping. This code uses the following layout for the\n    // 2D texture:\n    //\n    // xzXZ\n    //  y Y\n    //\n    // Y - Positive y direction\n    // y - Negative y direction\n    // X - Positive x direction\n    // x - Negative x direction\n    // Z - Positive z direction\n    // z - Negative z direction\n    //\n    // Source and test bed:\n    // https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n    vec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n        // Number of texels to avoid at the edge of each square\n\n        vec3 absV = abs( v );\n\n        // Intersect unit cube\n\n        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n        absV *= scaleToCube;\n\n        // Apply scale to avoid seams\n\n        // two texels less per square (one texel will do for NEAREST)\n        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n        // Unwrap\n\n        // space: -1 ... 1 range for each square\n        //\n        // #X##         dim    := ( 4 , 2 )\n        //  # #         center := ( 1 , 1 )\n\n        vec2 planar = v.xy;\n\n        float almostATexel = 1.5 * texelSizeY;\n        float almostOne = 1.0 - almostATexel;\n\n        if ( absV.z >= almostOne ) {\n\n            if ( v.z > 0.0 )\n                planar.x = 4.0 - v.x;\n\n        } else if ( absV.x >= almostOne ) {\n\n            float signX = sign( v.x );\n            planar.x = v.z * signX + 2.0 * signX;\n\n        } else if ( absV.y >= almostOne ) {\n\n            float signY = sign( v.y );\n            planar.x = v.x + 2.0 * signY + 2.0;\n            planar.y = v.z * signY - 2.0;\n\n        }\n\n        // Transform to UV space\n\n        // scale := 0.5 / dim\n        // translate := ( center + 0.5 ) / dim\n        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n    }\n\n    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n        float shadow = 1.0;\n        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n        // for point lights, the uniform @vShadowCoord is re-purposed to hold\n        // the vector from the light to the world-space position of the fragment.\n        vec3 lightToPosition = shadowCoord.xyz;\n\n        // dp = normalized distance from light to fragment position\n        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n        compare += shadowBias;\n\n        // bd3D = base direction 3D\n        vec3 bd3D = normalize( lightToPosition );\n\n        vec2 halton = haltonSequence[frameIndex];\n        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n        float temporalAngle  = temporalOffset * PI2;\n\n        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )\n            for (int i = 0; i < gShadowSamples; i++) {\n                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n\n                // Overall blurring offset\n                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);\n\n                // NOTE: Removed for now\n                // Penumbra offset\n                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);\n\n                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );\n\n            }\n            return shadow * gShadowSamplesRpc;\n\n        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n            for (int i = 0; i < 16; i++) {\n                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n\n                // Overall blurring offset\n                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);\n\n                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );\n\n            }\n            return shadow * (1.0 / 16.0);\n        #else // no percentage-closer filtering\n\n            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );\n\n        #endif\n\n    }\n\n#endif\n`)(t);let n=rYe.slice();n=n.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),n=n.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),yr.lights_fragment_begin=n;let i=sYe.slice();return i=i.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),yr.shadowmask_pars_fragment=i,!0})(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,t){this.fog=e.enabled?this.backupFog:null,this.isActive&&(this.scene.fog=this.fog),this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=Oc(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,t){void 0!==e.aoColor&&(this.aoColor=Oc(e.aoColor,t))}updateByOp(e,t,n,i){super.updateByOp(e,t,n,i);let r=t;Oh(e.path,["fog"])?this.updateFog(r.fog,n.shared):Oh(e.path,["ao"])?this.updateAo(r.ao,n.shared):Oh(e.path,["ambient"])?this.updateAmbientLight(r.ambient,n.shared):Oh(e.path,["shadow"])&&this.updateShadow(r.shadow)}updateState(e,t){this.updateState_Entity(e,t),void 0!==e.backgroundColor&&this.setBackgroundColor(Oc(e.backgroundColor,t.shared)),void 0!==e.fog&&this.updateFog(e.fog,t.shared),void 0!==e.ambient&&this.updateAmbientLight(e.ambient,t.shared),void 0!==e.ao&&this.updateAo(e.ao,t.shared),void 0!==e.shadow&&this.updateShadow(e.shadow)}raycast(e,t){super.raycast(e,t)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){return this.scene?.find(this.data.publish.playCamera)??this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return null===this.penumbraSizeArrayCache&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,t=0;this.traverseEntity(n=>{if(!n.visible)return!0;n instanceof are&&n.visible&&e<3&&(this.penumbraSizeArrayCache[e]=n.data.penumbraSize,e+=1),n instanceof hre&&n.visible&&e<2&&(this.penumbraSizeArrayCache[3+t]=n.data.penumbraSize,t+=1)})}raycastWithClones(e){let t=[],n=i=>{for(let r of i.children){let s=r.cloner;es.is(r)&&(r.visible||s?.object.data.visible)&&((Cu(r)||KB(r)&&this.scene.enableHelpers&&r.objectHelper.visible)&&(e.intersectObject(r,!1,t),pz(r,e,t,!0)),n(r))}};return n(this),t}},uYe=class extends($B(pLe,sre)){constructor(e,t,n){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=90,i.aspect=1,i.near=100,i.far=2500;let r=new oe(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),s=new oe(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z),o=new ra(r,s),a=new HO(o,new Di(16755200));a.visible=!1,this.gizmos.shadowmap=a,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof HO){let n=this.shadow.camera,i=new oe(-n.far+this.position.x,-n.far+this.position.y,-n.far+this.position.z),r=new oe(n.far+this.position.x,n.far+this.position.y,n.far+this.position.z);t.box.set(i,r),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.decay&&(this.decay=e.decay),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},pYe=class extends Ac{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let n=this.geometry.getAttribute("position");void 0!==n?yB(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,e,t):super.updateEntityBoxSize(e,t)}},dz=class extends Ac{constructor(e,t,n){super(e,t,n),this._shapeId=null,this._context=n}updateState(e,t){super.updateState(e,t),this.updateShape()}updateShape(){let t,e={...this.data.geometry.extrusion.shape};for(let i in e)"string"==typeof e[i]&&(e[i]=this._context.shared.getVariable(e[i],[this.uuid,"geometry","extrusion","shape",i]));if("Custom"===e.type){let i=e.shapeId;if(i!==this._shapeId&&this.detachShape(),i){this._shapeId=i;let r=this._context.scene.find(i);r?.data&&(r.attachedPaths.add(this),t=r.geometry.userData?.shape),t||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let i;switch(e.type){case"Rectangle":i=one;break;case"Ellipse":i=oB;break;case"Polygon":i=sne;break;case"Star":i=ane;break;default:throw new Error(`Unknown shape type: ${e.type}`)}t=i.create({parameters:e}).userData.shape}let n=this.geometry;t&&n.inputs&&(n.inputs.shapeData=t,n.build(),this.attachedSurfaceCloners.forEach(i=>i.update()))}detachShape(){null!==this._shapeId&&this._context.scene.find(this._shapeId)?.attachedPaths.delete(this)}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e,t){return super.updateTransformState(e,t)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let n=this.geometry.getAttribute("position");void 0!==n?yB(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,e,t):super.updateEntityBoxSize(e,t)}},$b=class extends(TC(H_,wT)){constructor(e,t,n){super(),"Instance"===t.type&&"string"==typeof e&&(t=this.transformAssignData(t,n)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return"Component"===this.data.type&&"string"==typeof this.identity}get isInstanceRoot(){return"Instance"===this.data.type&&"string"==typeof this.identity}transformAssignData(e,t){let n=BA.getComponentData({scene:t.scene.data,shared:t.shared.data},e.component);if(n){let i,r;for(let s of Ag.rootOverrideProps)void 0===e[s]?(void 0===i&&(i={...e}),i[s]=n.data[s]):(void 0===r&&(r={}),r[s]=e[s],void 0===i&&(i={...e}),i[s]=Cg.apply(n.data[s],e[s]));return this.overrideData=r,i}return{...Cc.defaultData,...e,...Xf(Cc.defaultData,Ag.rootOverrideProps)}}updateByOp(e,t,n,i){let r;if(this.isInstanceRoot&&!i)if(t=this.transformAssignData(t,n),0===e.type&&0===e.path.length&&this.component)for(let s of Ag.rootOverrideProps)s in e.props&&void 0===e.props[s]&&(void 0===r&&(r={...e,props:{...e.props}}),r.props[s]=this.component.data[s]);else if(0===e.type&&e.path.length>0&&Ag.rootOverrideProps.includes(e.path[0])){let s=e.path[0];void 0===r&&(r={...e,path:[],props:{[s]:t[s]}})}super.updateByOp(r??e,t,n,i)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(void 0===this.component){let n=e.scene.find(t.component)??null,i=!1;if(n!==this.oldComponent){if(this.oldComponent){let r=0;for(let s of this.children){if(!es.is(s))break;e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(s),hz(s),r+=1}this.children.splice(0,r)}i=!0}if(n){let r={};pre(e,[this.uuid],t.overrides,this,n,n,0,i,r);for(let s of this.children)if(es.is(s)){let o=s.data;"Empty"===o.type&&o.animations&&s.traverseEntity(a=>{if(a instanceof Ac&&a.isSkinnedMesh){let l=a.dataPatched;if(l.bones&&l.boneInverses){let c=l.bones.map(u=>e.scene.find(r[u])),d=l.boneInverses.map(u=>(new vn).fromArray(u)),h=new LL(c,d);a.bind(h,a.bindMatrix)}}else a.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function hz(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let n of e.children)es.is(n)&&hz(n)}}function ure(e,t,n,i){return e.component===t&&IJ(e.identity,i)?e.overrideData===n?2:1:0}function pre(e,t,n,i,r,s,o,a,l){if(o>50)return!1;if(i.component!==r){if(i.component){let d=i.component.instances.indexOf(i);d>=0&&i.component.instances.splice(d,1)}r.instances.push(i),i.component=r}r instanceof $b&&r.isInstanceRoot&&r.expandInstanceChildren(e);let c=0;for(let d of r.children)if(es.is(d)){let h=[...t,..."string"==typeof d.identity?[d.identity]:d.identity],u=RA.resolve(n,h,1);null!=u&&!(u instanceof Ya)&&(Object.setPrototypeOf(u,Ya.prototype),console.error("wrong prototype"));let m,p=null;if(!a){let v=i.children[c];if(p=es.is(v)?v:null,null!==p){let g=ure(p,d,u,h);m=g>=1?p.stateSelection:void 0,2!==g&&(p=null)}if(null===p&&(p=e.scene.findInstance(h)??null,null!==p)){let g=ure(p,d,u,h);if(m=g>=1?p.stateSelection:void 0,2!==g)p=null;else{let b=p.parent.children.indexOf(p);p.parent.children.splice(b,1),i.children.splice(c,0,p),p.parent===i?b<=c&&console.error("not possible"):(p.parent=i,p.matrixWorldNeedsUpdate=!0,p.resetBBoxNeedsUpdate(),p.updateVisible(),e.pendingDeletes.delete(p))}}}if(null===p){let v=u?Cg.apply(d.data,u):d.data;qv.is(v.type)&&(v={...v,type:"Empty"}),p=Fg.createEntity(h,v,e),p.overrideData=u,i.add(p),i.children.splice(i.children.length-1,1),i.children.splice(c,0,p),p.updateState(p.data,e),m&&p.changeSelectedState(m,e),e.scene.registerInstanceAndSetUuid(p)}p.isBone&&(l[p.identity[p.identity.length-1]]=p.uuid),c+=1,pre(e,t,n,p,d,s,o+1,a,l)}if(!a){let d=c;for(;;){let h=i.children[c];if(!es.is(h))break;e.pendingDeletes.add(h),c+=1}i.children.splice(d,c-d)}return!0}var fYe=class extends(TC(CZ,wT)){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,t){this.updateState_Entity(e,t)}};function uz(e,t,n){return"Mesh"===t.type?function mYe(e,t,n){let i;return"TextGeometry"===t.geometry.type?new Rie(e,t,n):(i="SubdivGeometry"===t.geometry.type?new SC(e,t,n):"PathGeometry"===t.geometry.type?new dz(e,t,n):"VectorGeometry"===t.geometry.type?new pYe(e,t,n):"BooleanGeometry"===t.geometry.type?new l1(e,t,n):new Ac(e,t,n),i)}(e,t,n):"Empty"===t.type||"Splat"===t.type?new Yb(e,t):"Bone"===t.type?new fYe(e,t):"Page"===t.type?new Wg(e,t):"PointLight"===t.type?new uYe(e,t,n):"SpotLight"===t.type?new hre(e,t,n):"DirectionalLight"===t.type?new are(e,t,n):"Component"===t.type||"Instance"===t.type?new $b(e,t,n):qv.is(t.type)?new $l(e,t):(console.error(t),new Yb(e,t))}function fre(e,t){let n=!1,i=t.getLayersOfType("transmission"),r=t.getLayersOfType("outline");return r.length>0&&(e.layers.set(8),i.length>0&&e.layers.enable(3),n=!0,zB(e),BB(e)),0===i.length&&0===r.length&&e.layers.set(0),e instanceof Gb&&e.needsAO&&e.layers.enable(5),n}function mre(e,t){if(!t.layers)return!1;let n=!1,i=t.getLayersOfType("transmission").filter(s=>s.data.visible),r=t.getLayersOfType("outline").filter(s=>s.data.visible);return i.length>0&&(e.layers.set(3),r.length>0&&e.layers.enable(8),n=!0),0===i.length&&0===r.length&&e.layers.set(0),e.needsAO&&e.layers.enable(5),n}Fg.createEntity=uz,Fg.changeEntityProptotype=function gYe(e,t,n){let i=uz(e.identity,t,n),r=e.children,s=e.attachedPaths,o=e.parent,a=e.component,l=e.instances,c=e.overrideData,d=e.uuid,h=e.stateSelection;e.dispose();for(let u of Object.keys(e))delete e[u];Object.setPrototypeOf(e,Object.getPrototypeOf(i));for(let u of Object.keys(i))e[u]=i[u];e.children=[...e.children,...r],e.attachedPaths=s,e.parent=o,e.component=a,e.instances=l,e.uuid=d,e.overrideData=c,e.updateState(e.data,n),h&&e.changeSelectedState(h,n),e.resetBBoxNeedsUpdate()},Fg.Cloner=wu;var bYe=new oQ,xYe=new vn,wYe=new S_;function pz(e,t,n,i=!1){let r=e.cloner;if(r)for(let s of r.children){let o=xYe.copy(s.matrixWorld).invert(),a=wYe.copy(t.ray).applyMatrix4(o);a.applyMatrix4(e.matrixWorld);let c=bYe;c.set(a.origin,a.direction),c.near=t.near,c.far=t.far;let d=c.intersectObject(e,!1);d.length>0&&n.push({...d[0],object:i?s:e})}}var Np=al(gM()),lm=al(vM()),aa=al(gM()),Tr=al(vM()),OT=class{constructor(e,t,n){this._dataNormalized=e,this._minD=t,this._maxD=n}static createFromUnnormalized(e){let t=Tr.sup(e),n=Tr.inf(e),i=(0,aa.default)(new Float32Array(e.size),e.shape),r=t-n;return r<1e-4?Tr.assigns(i,0):(Tr.subs(i,e,n),Tr.divs(i,i,r)),new OT(i,n,t)}get data(){return this._dataNormalized}get minD(){return this._minD}get maxD(){return this._maxD}denormalize(){let e=(0,aa.default)(new Float32Array(this._dataNormalized.size),this._dataNormalized.shape);return Tr.muls(e,this._dataNormalized,this._maxD-this._minD),Tr.adds(e,e,this._minD),e}},Do=class{constructor(e,t){this._quantized=e,this._method=t}get quantized(){return this._quantized}static maxIntBits(e){return 2**e-1}static fromNormalized(e,t){let i,n=e.data;if("norm8x"===t){let r=Do.maxIntBits(8),s=(0,aa.default)(new Float32Array(n.size),n.shape);Tr.muls(s,n,r),Tr.roundeq(s),i=(0,aa.default)(new Uint8Array(s.data),n.shape)}else if("norm565"===t){let r=(0,aa.default)(new Float32Array(n.size),n.shape);Tr.assign(r,n),Tr.mulseq(r.pick(null,0),Do.maxIntBits(5)),Tr.mulseq(r.pick(null,1),Do.maxIntBits(6)),Tr.mulseq(r.pick(null,2),Do.maxIntBits(5)),Tr.roundeq(r);let s=(0,aa.default)(new Uint16Array(r.data),n.shape),o=(0,aa.default)(new Uint16Array(n.shape[0]),[n.shape[0]]),a=(0,aa.default)(new Uint16Array(n.shape[0]),[n.shape[0]]);Tr.lshifts(o,s.pick(null,0),11),Tr.lshifts(a,s.pick(null,1),5),Tr.boreq(o,a),Tr.boreq(o,s.pick(null,2)),i=o}else{let r=(0,aa.default)(new Float32Array(n.size),n.shape);Tr.assign(r,n),Tr.mulseq(r.pick(null,0),Do.maxIntBits(11)),Tr.mulseq(r.pick(null,1),Do.maxIntBits(10)),Tr.mulseq(r.pick(null,2),Do.maxIntBits(11)),Tr.roundeq(r);let s=(0,aa.default)(new Uint32Array(r.data),n.shape),o=(0,aa.default)(new Uint32Array(n.shape[0]),[n.shape[0]]),a=(0,aa.default)(new Uint32Array(n.shape[0]),[n.shape[0]]);Tr.lshifts(o,s.pick(null,0),21),Tr.lshifts(a,s.pick(null,1),11),Tr.boreq(o,a),Tr.boreq(o,s.pick(null,2)),i=o}return new Do(i,t)}dequantize(e,t){let i,n=this._method,r=this._quantized;if("norm8x"===n){let s=Do.maxIntBits(8);i=(0,aa.default)(new Float32Array(r.size),r.shape),Tr.muls(i,r,1/s)}else if("norm565"===n){let s=(0,aa.default)(new Uint8Array(r.shape[0]),[r.shape[0]]),o=(0,aa.default)(new Uint8Array(r.shape[0]),[r.shape[0]]),a=(0,aa.default)(new Uint8Array(r.shape[0]),[r.shape[0]]);Tr.rrshifts(s,r,11),Tr.rrshifts(o,r,5),Tr.bandseq(o,Do.maxIntBits(6)),Tr.bands(a,r,Do.maxIntBits(5)),i=(0,aa.default)(new Float32Array(3*r.shape[0]),[r.shape[0],3]),Tr.muls(i.pick(null,0),s,1/Do.maxIntBits(5)),Tr.muls(i.pick(null,1),o,1/Do.maxIntBits(6)),Tr.muls(i.pick(null,2),a,1/Do.maxIntBits(5))}else{let s=(0,aa.default)(new Uint16Array(r.shape[0]),[r.shape[0]]),o=(0,aa.default)(new Uint16Array(r.shape[0]),[r.shape[0]]),a=(0,aa.default)(new Uint16Array(r.shape[0]),[r.shape[0]]);Tr.rrshifts(s,r,21),Tr.rrshifts(o,r,11),Tr.bandseq(o,Do.maxIntBits(10)),Tr.bands(a,r,Do.maxIntBits(11)),i=(0,aa.default)(new Float32Array(3*r.shape[0]),[r.shape[0],3]),Tr.muls(i.pick(null,0),s,1/Do.maxIntBits(11)),Tr.muls(i.pick(null,1),o,1/Do.maxIntBits(10)),Tr.muls(i.pick(null,2),a,1/Do.maxIntBits(11))}return new OT(i,e,t)}},Ho=class{constructor(e,t,n,i,r,s=!1){this._quantized=e,this._minMaxMatrix=t,this._chunkSize=n,this._quantizationMethod=i,this._variableChunkSize=r,this._isDynamicChunks=s}get length(){return this._quantized.shape[0]}get nchunks(){return this._minMaxMatrix.shape[0]}get quantized(){return this._quantized}get method(){return this._quantizationMethod}get minmaxMatrix(){return this._minMaxMatrix}_createPrunedMinMax(e){let n=this.minmaxMatrix.shape[0]-e.length,i=(0,Np.default)(new Float32Array(2*n),[n,2]),r=0,s=n,o=0,a=this.minmaxMatrix.shape[0];for(let l=0;l<e.length;l++)a=e[l],s=a-o+r,s>r&&lm.assign(i.hi(s,2).lo(r,0),this.minmaxMatrix.hi(a,2).lo(o,0)),r=s,o=a+1;return r<n&&lm.assign(i.lo(r,0),this.minmaxMatrix.lo(o,0)),i}_createPrunedQuantized(e){let r,s,n=this.quantized.shape[0]-e.length,i=this._quantizationMethod;"norm8x"===i?(s=this._quantized.shape[1],r=(0,Np.default)(new Uint8Array(s?n*s:n),s?[n,s]:[n,1])):r=(0,Np.default)("norm565"===i?new Uint16Array(n):new Uint32Array(n),[n]);let o=0,a=n,l=0,c=r.shape[0];for(let d=0;d<e.length;d++)c=e[d],a=c-l+o,a>o&&(s?lm.assign(r.hi(a,s).lo(o,0),this._quantized.hi(c,s).lo(l,0)):lm.assign(r.hi(a).lo(o),this._quantized.hi(c).lo(l))),o=a,l=c+1;return o<n&&(s?lm.assign(r.lo(o,0),this._quantized.lo(l,0)):lm.assign(r.lo(o),this._quantized.lo(l))),r}pruneFeature(e,t,n){let i=this._createPrunedQuantized(e),r=this._createPrunedMinMax(t);return new Ho(i,r,this._chunkSize,this._quantizationMethod,n,!0)}static getRequiredNChunks(e,t){return Math.floor(e/t)}static fromArray(e,t,n){let o,i=e.shape[0],r=Math.floor(i/n),s=(0,Np.default)(new Float32Array(2*r),[r,2],[2,1]);o="norm8x"===t?(0,Np.default)(new Uint8Array(e.size),e.shape):(0,Np.default)("norm565"===t?new Uint16Array(e.shape[0]):new Uint32Array(e.shape[0]),[e.shape[0]]);for(let a=0;a<r;a++){let d,l=a*n,c=a+1<r?(a+1)*n:i;d=OT.createFromUnnormalized(e.shape.length>1?e.hi(c,e.shape[1]).lo(l,0):e.hi(c).lo(l)),s.set(a,0,d.minD),s.set(a,1,d.maxD),lm.assign(o.shape.length>1?o.hi(c,o.shape[1]).lo(l,0):o.hi(c).lo(l),Do.fromNormalized(d,t).quantized)}return new Ho(o,s,n,t)}denormDequant(){let s,o,e=this._minMaxMatrix.shape[0],t=this._quantized,n=t.shape[0],i=this._quantizationMethod,r=this._chunkSize;if(this._isDynamicChunks){if(!this._variableChunkSize)throw new Error("variable chunk must exists if chunkSize isDynamic");s=this._variableChunkSize}o="norm8x"===i?(0,Np.default)(new Float32Array(t.size),t.shape):(0,Np.default)(new Float32Array(3*n),[n,3]);let a=0,l=r;for(let c=0;c<e;c++){let[d,h]=[this._minMaxMatrix.get(c,0),this._minMaxMatrix.get(c,1)];this._isDynamicChunks&&(l=s[c]);let p,u=c+1<e?a+l:n;p=new Do(t.shape.length>1?t.hi(u,t.shape[1]).lo(a,0):t.hi(u).lo(a),i),lm.assign(o.hi(u,o.shape[1]).lo(a,0),p.dequantize(d,h).denormalize()),a=u}return o}static fetchArrayBuffer(e){return(0,xo.Z)(function*(){return yield(yield fetch(e,{mode:"cors"})).arrayBuffer()})()}},qg=al(gM()),rs=al(vM()),Kb=al(gM()),Ea=al(vM()),gre=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function vre(e){return e<1e5?e<100?e<10?0:1:e<1e4?e<1e3?2:3:4:e<1e7?e<1e6?5:6:e<1e9?e<1e8?7:8:9}function yre(e,t){if(e===t)return 0;if(~~e===e&&~~t===t){if(0===e||0===t)return e<t?-1:1;if(e<0||t<0){if(t>=0)return-1;if(e>=0)return 1;e=-e,t=-t}let r=vre(e),s=vre(t),o=0;return r<s?(e*=gre[s-r-1],t/=10,o=-1):r>s&&(t*=gre[r-s-1],e/=10,o=1),e===t?o:e<t?-1:1}let n=String(e),i=String(t);return n===i?0:n<i?-1:1}function _re(e,t,n,i){let r=t+1;if(r===n)return 1;if(i(e[r++],e[t])<0){for(;r<n&&i(e[r],e[r-1])<0;)r++;!function SYe(e,t,n){for(n--;t<n;){let i=e[t];e[t++]=e[n],e[n--]=i}}(e,t,r)}else for(;r<n&&i(e[r],e[r-1])>=0;)r++;return r-t}function bre(e,t,n,i,r){for(i===t&&i++;i<n;i++){let s=e[i],o=t,a=i;for(;o<a;){let c=o+a>>>1;r(s,e[c])<0?a=c:o=c+1}let l=i-o;switch(l){case 3:e[o+3]=e[o+2];case 2:e[o+2]=e[o+1];case 1:e[o+1]=e[o];break;default:for(;l>0;)e[o+l]=e[o+l-1],l--}e[o]=s}}function fz(e,t,n,i,r,s){let o=0,a=0,l=1;if(s(e,t[n+r])>0){for(a=i-r;l<a&&s(e,t[n+r+l])>0;)o=l,l=1+(l<<1),l<=0&&(l=a);l>a&&(l=a),o+=r,l+=r}else{for(a=r+1;l<a&&s(e,t[n+r-l])<=0;)o=l,l=1+(l<<1),l<=0&&(l=a);l>a&&(l=a);let c=o;o=r-l,l=r-c}for(o++;o<l;){let c=o+(l-o>>>1);s(e,t[n+c])>0?o=c+1:l=c}return l}function mz(e,t,n,i,r,s){let o=0,a=0,l=1;if(s(e,t[n+r])<0){for(a=r+1;l<a&&s(e,t[n+r-l])<0;)o=l,l=1+(l<<1),l<=0&&(l=a);l>a&&(l=a);let c=o;o=r-l,l=r-c}else{for(a=i-r;l<a&&s(e,t[n+r+l])>=0;)o=l,l=1+(l<<1),l<=0&&(l=a);l>a&&(l=a),o+=r,l+=r}for(o++;o<l;){let c=o+(l-o>>>1);s(e,t[n+c])<0?l=c:o=c+1}return l}var EYe=class{constructor(e,t){mc(this,"array",null),mc(this,"compare",null),mc(this,"minGallop",7),mc(this,"length",0),mc(this,"tmpStorageLength",256),mc(this,"stackLength",0),mc(this,"runStart",null),mc(this,"runLength",null),mc(this,"stackSize",0),this.array=e,this.compare=t,this.length=e.length,this.length<512&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}pushRun(e,t){this.runStart[this.stackSize]=e,this.runLength[this.stackSize]=t,this.stackSize+=1}mergeRuns(){for(;this.stackSize>1;){let e=this.stackSize-2;if(e>=1&&this.runLength[e-1]<=this.runLength[e]+this.runLength[e+1]||e>=2&&this.runLength[e-2]<=this.runLength[e]+this.runLength[e-1])this.runLength[e-1]<this.runLength[e+1]&&e--;else if(this.runLength[e]>this.runLength[e+1])break;this.mergeAt(e)}}forceMergeRuns(){for(;this.stackSize>1;){let e=this.stackSize-2;e>0&&this.runLength[e-1]<this.runLength[e+1]&&e--,this.mergeAt(e)}}mergeAt(e){let t=this.compare,n=this.array,i=this.runStart[e],r=this.runLength[e],s=this.runStart[e+1],o=this.runLength[e+1];this.runLength[e]=r+o,e===this.stackSize-3&&(this.runStart[e+1]=this.runStart[e+2],this.runLength[e+1]=this.runLength[e+2]),this.stackSize--;let a=mz(n[s],n,i,r,0,t);i+=a,r-=a,0!==r&&(o=fz(n[i+r-1],n,s,o,o-1,t),0!==o&&(r<=o?this.mergeLow(i,r,s,o):this.mergeHigh(i,r,s,o)))}mergeLow(e,t,n,i){let r=this.compare,s=this.array,o=this.tmp,a=0;for(a=0;a<t;a++)o[a]=s[e+a];let l=0,c=n,d=e;if(s[d++]=s[c++],0==--i){for(a=0;a<t;a++)s[d+a]=o[l+a];return}if(1===t){for(a=0;a<i;a++)s[d+a]=s[c+a];return void(s[d+i]=o[l])}let h=this.minGallop;for(;;){let u=0,p=0,m=!1;do{if(r(s[c],o[l])<0){if(s[d++]=s[c++],p++,u=0,0==--i){m=!0;break}}else if(s[d++]=o[l++],u++,p=0,1==--t){m=!0;break}}while((u|p)<h);if(m)break;do{if(u=mz(s[c],o,l,t,0,r),0!==u){for(a=0;a<u;a++)s[d+a]=o[l+a];if(d+=u,l+=u,(t-=u)<=1){m=!0;break}}if(s[d++]=s[c++],0==--i){m=!0;break}if(p=fz(o[l],s,c,i,0,r),0!==p){for(a=0;a<p;a++)s[d+a]=s[c+a];if(d+=p,c+=p,0==(i-=p)){m=!0;break}}if(s[d++]=o[l++],1==--t){m=!0;break}h--}while(u>=7||p>=7);if(m)break;h<0&&(h=0),h+=2}if(this.minGallop=h,h<1&&(this.minGallop=1),1===t){for(a=0;a<i;a++)s[d+a]=s[c+a];s[d+i]=o[l]}else{if(0===t)throw new Error("mergeLow preconditions were not respected");for(a=0;a<t;a++)s[d+a]=o[l+a]}}mergeHigh(e,t,n,i){let r=this.compare,s=this.array,o=this.tmp,a=0;for(a=0;a<i;a++)o[a]=s[n+a];let l=e+t-1,c=i-1,d=n+i-1,h=0,u=0;if(s[d--]=s[l--],0==--t){for(h=d-(i-1),a=0;a<i;a++)s[h+a]=o[a];return}if(1===i){for(d-=t,l-=t,u=d+1,h=l+1,a=t-1;a>=0;a--)s[u+a]=s[h+a];return void(s[d]=o[c])}let p=this.minGallop;for(;;){let m=0,v=0,g=!1;do{if(r(o[c],s[l])<0){if(s[d--]=s[l--],m++,v=0,0==--t){g=!0;break}}else if(s[d--]=o[c--],v++,m=0,1==--i){g=!0;break}}while((m|v)<p);if(g)break;do{if(m=t-mz(o[c],s,e,t,t-1,r),0!==m){for(d-=m,l-=m,t-=m,u=d+1,h=l+1,a=m-1;a>=0;a--)s[u+a]=s[h+a];if(0===t){g=!0;break}}if(s[d--]=o[c--],1==--i){g=!0;break}if(v=i-fz(s[l],o,0,i,i-1,r),0!==v){for(d-=v,c-=v,i-=v,u=d+1,h=c+1,a=0;a<v;a++)s[u+a]=o[h+a];if(i<=1){g=!0;break}}if(s[d--]=s[l--],0==--t){g=!0;break}p--}while(m>=7||v>=7);if(g)break;p<0&&(p=0),p+=2}if(this.minGallop=p,p<1&&(this.minGallop=1),1===i){for(d-=t,l-=t,u=d+1,h=l+1,a=t-1;a>=0;a--)s[u+a]=s[h+a];s[d]=o[c]}else{if(0===i)throw new Error("mergeHigh preconditions were not respected");for(h=d-(i-1),a=0;a<i;a++)s[h+a]=o[a]}}};function gz(e){let t=(0,Kb.default)(new Int32Array(e.shape[0]),[e.shape[0]]),n=(0,Kb.default)(new Int32Array(e.shape[0]),[e.shape[0]]);return Ea.bands(t,e,1023),Ea.lshifts(n,t,16),Ea.bxoreq(t,n),Ea.bandseq(t,4278190335),Ea.lshifts(n,t,8),Ea.bxoreq(t,n),Ea.bandseq(t,50393103),Ea.lshifts(n,t,4),Ea.bxoreq(t,n),Ea.bandseq(t,51130563),Ea.lshifts(n,t,2),Ea.bxoreq(t,n),Ea.bandseq(t,153391689),t}function Zb(e,t){if(e.shape[0]!==t.shape[0])throw new Error("wrong length");let n=(0,Kb.default)(new Float32Array(e.size),e.shape,e.stride,e.offset);for(let i=0;i<t.shape[0];i++){let r=t.get(i);if(e.shape.length>1)for(let s=0;s<e.shape[1];s++)n.set(i,s,e.get(r,s));else n.set(i,e.get(r))}return n}var d1=class{constructor(e,t,n,i,r,s,o,a,l,c){this.propertyDescs=e,this.format=t,this.nsplats=n,this.xyz=i,this.colors=r,this.harmonics=s,this.opacity=o,this.scaling=a,this.rotation=l,this.maxSHDegree=c}getPlyBinary(){let e=d1._generateHeaderString(this.propertyDescs,this.format,this.nsplats),t=(new TextEncoder).encode(e),n=Object.keys(this.propertyDescs).length,i=(0,qg.default)(new Float32Array(this.nsplats*n),[this.nsplats,n]);if(rs.assign(i.pick(null,this.propertyDescs.x.index),this.xyz.pick(null,0)),rs.assign(i.pick(null,this.propertyDescs.y.index),this.xyz.pick(null,1)),rs.assign(i.pick(null,this.propertyDescs.z.index),this.xyz.pick(null,2)),rs.assign(i.pick(null,this.propertyDescs.f_dc_0.index),this.colors.pick(null,0)),rs.assign(i.pick(null,this.propertyDescs.f_dc_1.index),this.colors.pick(null,1)),rs.assign(i.pick(null,this.propertyDescs.f_dc_2.index),this.colors.pick(null,2)),rs.assign(i.pick(null,this.propertyDescs.opacity.index),this.opacity.pick(null,0)),rs.assign(i.pick(null,this.propertyDescs.scale_0.index),this.scaling.pick(null,0)),rs.assign(i.pick(null,this.propertyDescs.scale_1.index),this.scaling.pick(null,1)),rs.assign(i.pick(null,this.propertyDescs.scale_2.index),this.scaling.pick(null,2)),rs.assign(i.pick(null,this.propertyDescs.rot_0.index),this.rotation.pick(null,0)),rs.assign(i.pick(null,this.propertyDescs.rot_1.index),this.rotation.pick(null,1)),rs.assign(i.pick(null,this.propertyDescs.rot_2.index),this.rotation.pick(null,2)),rs.assign(i.pick(null,this.propertyDescs.rot_3.index),this.rotation.pick(null,3)),this.harmonics&&this.harmonics.length>0)for(let o=0;o<this.harmonics.length;o++){let a=3*o;rs.assign(i.pick(null,this.propertyDescs[`f_rest_${a}`].index),this.harmonics[o].pick(null,0)),rs.assign(i.pick(null,this.propertyDescs[`f_rest_${a+1}`].index),this.harmonics[o].pick(null,1)),rs.assign(i.pick(null,this.propertyDescs[`f_rest_${a+2}`].index),this.harmonics[o].pick(null,2))}let r=new Uint8Array(i.data.buffer),s=new Uint8Array(r.length+t.length);return s.set(t),s.set(r,t.length),s.buffer}save(e,t){let n=this.getPlyBinary(),i=new Blob([n],{type:"application/octet-stream"}),r=new File([i],e),s=new FormData;s.append("file",r),s.append("filename",e),s.append("basedir",t),fetch("http://127.0.0.1:8000/push_file",{method:"POST",body:s})}static loadFile(e){return(0,xo.Z)(function*(){return yield(yield fetch(e)).arrayBuffer()})()}mortonPositionSplatsSort(){let e=function TYe(e){let t=Ea.sup(e),n=Ea.inf(e),i=1e3/Math.min(1e3,t-n),r=(0,Kb.default)(new Float32Array(e.data),e.shape);Ea.mulseq(r,i);let o=function AYe(e){let t=gz(e.pick(null,0)),n=gz(e.pick(null,1));Ea.lshiftseq(n,1);let i=gz(e.pick(null,2));return Ea.lshiftseq(i,2),Ea.boreq(t,n),Ea.boreq(t,i),t}((0,Kb.default)(new Int32Array(r.data),e.shape)),a=Array.from(o.data).map((c,d)=>[c,d]);!function OYe(e,t,n,i){if(!Array.isArray(e))throw new TypeError("Can only sort arrays");t?"function"!=typeof t&&(i=n,n=t,t=yre):t=yre,n||(n=0),i||(i=e.length);let r=i-n;if(r<2)return;let s=0;if(r<32)return s=_re(e,n,i,t),void bre(e,n,i,n+s,t);let o=new EYe(e,t),a=function PYe(e){let t=0;for(;e>=32;)t|=1&e,e>>=1;return e+t}(r);do{if(s=_re(e,n,i,t),s<a){let l=r;l>a&&(l=a),bre(e,n,n+l,n+s,t),s=l}o.pushRun(n,s),o.mergeRuns(),r-=s,n+=s}while(0!==r);o.forceMergeRuns()}(a,(c,d)=>c[0]-d[0]);let l=a.map(([c,d])=>d);return(0,Kb.default)(Uint32Array.from(l))}(this.xyz),t=Zb(this.xyz,e),n=Zb(this.colors,e),i=Zb(this.opacity,e),r=Zb(this.scaling,e),s=Zb(this.rotation,e),o=[];for(let a=0;a<this.harmonics.length;a++)o.push(Zb(this.harmonics[a],e));return new d1(this.propertyDescs,this.format,this.nsplats,t,n,o,i,r,s,this.maxSHDegree)}static _generateHeaderString(e,t,n){let i=`ply\nformat ${t.format} ${t.version}\nelement vertex ${n}`,r=Object.keys(e).length,s=Array(r);for(let o in e){let a=e[o];s[a.index]={name:o,dtype:a.dtype}}for(let o=0;o<s.length;o++)i=`${i}\nproperty ${s[o].dtype} ${s[o].name}`;return`${i}\nend_header\n`}static fromArrayBuffer(e,t=3){let{splatCount:n,vertexData:i,propertiesDesc:r,format:s}=d1.decodeHeader(e),o=i.buffer.slice(i.byteOffset),a=Object.keys(r).length,l=(0,qg.default)(new Float32Array(o),[n,a]),c=0,d={},h={double:8,int:4,uint:4,float:4,short:2,ushort:2,uchar:1};for(let w in r)if(r.hasOwnProperty(w)){let P=r[w].dtype;d[w]=c,c+=h[P]}let u=(0,qg.default)(new Float32Array(3*n),[n,3]);rs.assign(u.pick(null,0),l.pick(null,d.x/4)),rs.assign(u.pick(null,1),l.pick(null,d.y/4)),rs.assign(u.pick(null,2),l.pick(null,d.z/4));let p=(0,qg.default)(new Float32Array(3*n),[n,3]);rs.assign(p.pick(null,0),l.pick(null,d.scale_0/4)),rs.assign(p.pick(null,1),l.pick(null,d.scale_1/4)),rs.assign(p.pick(null,2),l.pick(null,d.scale_2/4));let m=(0,qg.default)(new Float32Array(3*n),[n,3]);rs.assign(m.pick(null,0),l.pick(null,d.f_dc_0/4)),rs.assign(m.pick(null,1),l.pick(null,d.f_dc_1/4)),rs.assign(m.pick(null,2),l.pick(null,d.f_dc_2/4));let v=(0,qg.default)(new Float32Array(4*n),[n,4]);rs.assign(v.pick(null,0),l.pick(null,d.rot_1/4)),rs.assign(v.pick(null,1),l.pick(null,d.rot_2/4)),rs.assign(v.pick(null,2),l.pick(null,d.rot_3/4)),rs.assign(v.pick(null,3),l.pick(null,d.rot_0/4));for(let w=0;w<n;w++){let P=v.pick(w,null),A=Math.sqrt(P.get(0)**2+P.get(1)**2+P.get(2)**2+P.get(3)**2);rs.divseq(P,A)}let g=(0,qg.default)(new Float32Array(1*n),[n,1]);rs.assign(g.pick(null,0),l.pick(null,d.opacity/4));let b=(Math.min(Math.max(t,0),3)+1)**2-1,x=[];for(let w=0;w<b;w++){let P=(0,qg.default)(new Float32Array(3*n),[n,3]),A=3*w;rs.assign(P.pick(null,0),l.pick(null,d[`f_rest_${A}`]/4)),rs.assign(P.pick(null,1),l.pick(null,d[`f_rest_${A+1}`]/4)),rs.assign(P.pick(null,2),l.pick(null,d[`f_rest_${A+2}`]/4)),x.push(P)}return new d1(r,s,n,u,m,x,g,p,v,t)}static fromPLYFile(e,t=3){return(0,xo.Z)(function*(){let n=yield d1.loadFile(e);return d1.fromArrayBuffer(n,t)})()}static decodeHeader(e){let t=new TextDecoder,n=0,i="",r=100;for(;;){if(n+r>=e.byteLength)throw new Error("End of file reached while searching for end of header");let p=new Uint8Array(e,n,r);i+=t.decode(p),n+=r;let m=n-200,v=new Uint8Array(e,Math.max(0,m),m>0?200:r);if(t.decode(v).includes("end_header"))break}let d,s=i.split("\n"),o=0,a={},l={},c=0;for(let p=0;p<s.length;p++){let m=s[p].trim();if(m.startsWith("element vertex")){let v=m.match(/\d+/);v&&(o=parseInt(v[0]))}else if(m.startsWith("property")){let v=m.match(/(\w+)\s+(\w+)\s+(\w+)/);if(v){let g=v[2],b=v[3];a[b]=c,l[b]={dtype:g,index:c},c++}}else if(m.startsWith("format")){let v=m.match(/(\w+)\s+(\w+)\s+(\d+\.?\d*)/);v&&(d={format:v[2],version:v[3]})}else if("end_header"===m)break}let h=i.indexOf("end_header")+10+1;return{splatCount:o,vertexData:new DataView(e,h),headerOffset:n,propertiesDesc:l,format:d}}},vz=class{constructor(e,t,n,i,r,s,o,a){this.config=e,this.xyz=t,this.scaling=n,this.color=i,this.opacity=r,this.harmonics=o,this.quaternion=s,this.variableChunkSize=a}get isDynamicChunks(){return this.variableChunkSize&&this.variableChunkSize.length>0}get nchunks(){return this.xyz.nchunks}get nsplats(){return this.xyz.length}get chunkSize(){return this.config.chunkSize}static compressFromGaussianData(e,t){let n=Ho.fromArray(e.xyz,t.xyz,t.chunkSize),i=Ho.fromArray(e.scaling,t.scaling,t.chunkSize),r=Ho.fromArray(e.colors,t.color,t.chunkSize),s=Ho.fromArray(e.opacity,t.opacity,t.chunkSize),o=Ho.fromArray(e.rotation,t.quaternion,t.chunkSize),a=e.harmonics,l=[];if(t.harmonics)for(let c=0;c<a.length;c++){let d=Ho.fromArray(a[c],t.harmonics,t.chunkSize);l.push(d)}return new vz(t,n,i,r,s,o,l)}_countIndexesInChunks(e){let t=[],n=this.nchunks,i=this.chunkSize;if(n===Ho.getRequiredNChunks(this.nsplats,i))for(let o=0;o<e.length;o++){let a=e[o],l=Math.floor(a/this.chunkSize);l in t?t[l].push(a):t[l]=[a]}else{let o=this.variableChunkSize,a={},l=0;for(let c=0;c<n;c++)a[c]=l,l+=o[c];for(let c=0;c<e.length;c++){let d=e[c],h=Math.min(Math.floor(d/i),n-1);for(;d>=a[h]+o[h];)h++;h in t?t[h].push(d):t[h]=[d]}}return t}pruneSplats(e){let n,t=this._countIndexesInChunks(e),i=[];return t.length>0&&(n=this.variableChunkSize?[...this.variableChunkSize]:Array(this.nchunks).fill(this.chunkSize),t.forEach((r,s)=>{n[s]-=r.length,n[s]<=0&&i.push(s)}),n=n.filter(r=>r>0)),new vz(this.config,this.xyz.pruneFeature(e,i,n),this.scaling.pruneFeature(e,i,n),this.color.pruneFeature(e,i,n),this.opacity.pruneFeature(e,i,n),this.quaternion.pruneFeature(e,i,n),this.harmonics?this.harmonics.map(r=>r.pruneFeature(e,i,this.variableChunkSize)):void 0,n)}static loadConfig(e){return(0,xo.Z)(function*(){return yield(yield fetch(e,{method:"GET",mode:"cors",headers:{Accept:"application/json"}})).json()})()}toGaussians(){let t={},n=0;if(t.x={dtype:"float",index:n},n++,t.y={dtype:"float",index:n},n++,t.z={dtype:"float",index:n},n++,t.f_dc_0={dtype:"float",index:n},n++,t.f_dc_1={dtype:"float",index:n},n++,t.f_dc_2={dtype:"float",index:n},n++,this.harmonics&&this.harmonics.length>0)for(let r=0;r<this.harmonics.length;r++)t[`f_rest_${r}`]={dtype:"float",index:n},n++,t[`f_rest_${r+1}`]={dtype:"float",index:n},n++,t[`f_rest_${r+2}`]={dtype:"float",index:n},n++;t.opacity={dtype:"float",index:n},n++,t.scale_0={dtype:"float",index:n},n++,t.scale_1={dtype:"float",index:n},n++,t.scale_2={dtype:"float",index:n},n++,t.rot_0={dtype:"float",index:n},n++,t.rot_1={dtype:"float",index:n},n++,t.rot_2={dtype:"float",index:n},n++,t.rot_3={dtype:"float",index:n},n++;let i=this.harmonics?.map(r=>r.denormDequant());return new d1(t,{format:"binary_little_endian",version:"1.0"},this.xyz.length,this.xyz.denormDequant(),this.color.denormDequant(),i||[],this.opacity.denormDequant(),this.scaling.denormDequant(),this.quaternion.denormDequant(),3)}},Qb=al(gM()),Nh=al(vM()),xre={xyz:3,color:3,opacity:1,scaling:3,quaternion:4,harmonics:3},yz=class{constructor(e){this._buffer=e}get buffer(){return this._buffer}get decoded(){return this._decoded||(this._decoded=this.decodeBuffer()),this._decoded}get colorsA(){let t=this.decoded.color.denormDequant(),n=this.decoded.opacity.denormDequant(),i=(0,Qb.default)(new Float32Array(4*t.shape[0]),[t.shape[0],4]);return Nh.mulseq(t,.28209479177387814),Nh.addseq(t,.5),Nh.mulseq(t,255),Nh.maxseq(t,0),Nh.minseq(t,255),Nh.negeq(n),Nh.expeq(n),Nh.addseq(n,1),Nh.recipeq(n),Nh.mulseq(n,255),Nh.assign(i.hi(t.shape[0],3).lo(0,0),t),Nh.assign(i.hi(t.shape[0],4).lo(0,3),n),(0,Qb.default)(new Uint8Array(i.data),[t.shape[0],4]).data}get nsplats(){return this.decoded.nsplats}getSplatCount(){return this.decoded.nsplats}get precomputedCovarianceBufferData(){return this._precomputedCovarianceBufferData}decodeBuffer(){let{splatCount:e,chunkCount:t,chunkSize:n,typeChunks:i,vertexData:r,propertiesDesc:s}=this.decodeHeader(),o={xyz:s.xyz.compressionMethod,color:s.color.compressionMethod,opacity:s.opacity.compressionMethod,scaling:s.scaling.compressionMethod,quaternion:s.quaternion.compressionMethod,chunkSize:n};s.harmonics_0&&(o.harmonics=s.harmonics_0.compressionMethod);let a=r.byteOffset,l=Array(Object.keys(s).length);for(let g in s)l[s[g].index]={name:g,method:s[g].compressionMethod};let u,c=2*t*4,d=a,h="dynamic"===i?2*t:0,p=!1;if(h>0){let g=new Uint16Array(r.buffer.slice(d,d+h));d+=h,u=Array.from(g),p=!0}let m={};for(let g of l){let w,b=0,x=!0;if("norm8x"===g.method)b=1*e*xre[g.name];else if("norm11"===g.method)b=4*e;else{if("norm565"!==g.method)throw x=!1,new Error(`Not Implemented format: ${g.method}`);b=2*e}if(!x)throw new Error("loading chunk byt hasnot minmax!");{let D=r.buffer.slice(d,d+c);w=(0,Qb.default)(new Float32Array(D),[t,2]),d+=c}let A,P=r.buffer.slice(d,d+b);if(d+=b,"norm8x"===g.method)A=(0,Qb.default)(new Uint8Array(P),[e,xre[g.name]]);else if("norm11"===g.method)A=(0,Qb.default)(new Uint32Array(P));else{if("norm565"!==g.method)throw new Error(`Not Implemented format: ${g.method}`);A=(0,Qb.default)(new Uint16Array(P))}m[g.name]=new Ho(A,w,n,g.method,u,p)}let v=[];for(let g=0;g<15;g++){let b=m[`harmonics_${g}`];b&&(v.push(b),delete m[`harmonics_${g}`])}return v.length>0&&(m.harmonics=v),new vz(o,m.xyz,m.scaling,m.color,m.opacity,m.quaternion,m.harmonics,u)}buildPreComputedBuffers(){let e=this.decoded,t=e.nsplats,n=new ArrayBuffer(24*t),i=new Float32Array(n),r=e.scaling.denormDequant(),s=e.quaternion.denormDequant(),o=new Qi,a=new ia,l=new ia,c=new ia,d=new vn;for(let h=0;h<t;h++){d.makeScale(Math.exp(r.get(h,0)),Math.exp(r.get(h,1)),Math.exp(r.get(h,2))),l.setFromMatrix4(d),o.set(s.get(h,0),s.get(h,1),s.get(h,2),s.get(h,3)),d.makeRotationFromQuaternion(o),a.setFromMatrix4(d),c.copy(a).multiply(l);let u=c.elements;i[6*h]=u[0]*u[0]+u[3]*u[3]+u[6]*u[6],i[6*h+1]=u[0]*u[1]+u[3]*u[4]+u[6]*u[7],i[6*h+2]=u[0]*u[2]+u[3]*u[5]+u[6]*u[8],i[6*h+3]=u[1]*u[1]+u[4]*u[4]+u[7]*u[7],i[6*h+4]=u[1]*u[2]+u[4]*u[5]+u[7]*u[8],i[6*h+5]=u[2]*u[2]+u[5]*u[5]+u[8]*u[8]}this._precomputedCovarianceBufferData=n}decodeHeader(){let e=this._buffer,t=new TextDecoder,n=0,i="",r=100;for(;;){if(n+r>=e.byteLength)throw new Error("End of file reached while searching for end of header");let m=new Uint8Array(e,n,r);i+=t.decode(m),n+=r;let v=n-200,g=new Uint8Array(e,Math.max(0,v),v>=0?200:r);if(t.decode(g).includes("end_header"))break}let s=i.split("\n"),o=0,a=0,l=0,c=0,d="",h={};for(let m=0;m<s.length;m++){let v=s[m].trim();if(v.startsWith("element vertex")){let g=v.match(/\d+/);g&&(o=parseInt(g[0]))}else if(v.startsWith("property")){let g=v.match(/(\w+)\s+(\w+)\s+(\w+)/);g&&(h[g[2]]={compressionMethod:g[3],index:c},c++)}else if(v.startsWith("element chunks")){let g=v.match(/\d+/);g&&(a=parseInt(g[0]))}else if(v.startsWith("element chunkSize")){let g=v.match(/\d+/);g&&(l=parseInt(g[0]))}else if(v.startsWith("element typeChunks")){let g=v.match(/(\w+)\s+(\w+)\s+(\w+)/);g&&(d=g[3])}else if("end_header"===v)break}let u=i.indexOf("end_header")+10+1;return{splatCount:o,chunkCount:a,chunkSize:l,typeChunks:d,vertexData:new DataView(e,u),propertiesDesc:h}}pruneSplats(e){let t=this.decodeBuffer().pruneSplats(e);return yz.fromCompressedGaussianSplats(t)}static fromCompressedGaussianSplats(e){let n=e.xyz.nchunks,i=`gspline\nelement vertex ${e.xyz.length}\nelement chunks ${n}\nelement chunkSize ${e.chunkSize}\nelement typeChunks ${e.isDynamicChunks?"dynamic":"static"}\nproperty xyz ${e.xyz.method}\nproperty color ${e.color.method}\nproperty opacity ${e.opacity.method}\nproperty scaling ${e.scaling.method}\nproperty quaternion ${e.quaternion.method}`;if(e.harmonics&&e.harmonics.length>0)for(let R=0;R<e.harmonics.length;R++)i=`${i}\nproperty harmonics_${R} ${e.harmonics[R].method}`;i=`${i}\nend_header\n`;let r=(new TextEncoder).encode(i),s=2*n*4,o=e.xyz.quantized.data.buffer.byteLength,a=e.xyz instanceof Ho?s:0,l=e.color.quantized.data.buffer.byteLength,c=e.color instanceof Ho?s:0,d=e.opacity.quantized.data.buffer.byteLength,h=e.opacity instanceof Ho?s:0,u=e.scaling.quantized.data.buffer.byteLength,p=e.scaling instanceof Ho?s:0,m=e.quaternion.quantized.data.buffer.byteLength,v=e.quaternion instanceof Ho?s:0,g=e.variableChunkSize?Uint16Array.from(e.variableChunkSize):void 0,b=g?g.byteLength:0,x=r.byteLength+b+o+a+l+c+d+h+u+p+m+v,w=0,P=0;if(e.harmonics&&e.harmonics.length>0)for(let R=0;R<e.harmonics.length;R++)w+=e.harmonics[R].quantized.data.buffer.byteLength,P+=e.harmonics[R]instanceof Ho?s:0;w=0,P=0,x+=w+P;let A=new Uint8Array(x),D=0;if(A.set(r,D),D+=r.byteLength,b>0&&(A.set(new Uint8Array(g.buffer),D),D+=b),e.xyz instanceof Ho&&(A.set(new Uint8Array(e.xyz.minmaxMatrix.data.buffer),D),D+=s),A.set(new Uint8Array(e.xyz.quantized.data.buffer),D),D+=o,e.color instanceof Ho&&(A.set(new Uint8Array(e.color.minmaxMatrix.data.buffer),D),D+=s),A.set(new Uint8Array(e.color.quantized.data.buffer),D),D+=l,e.opacity instanceof Ho&&(A.set(new Uint8Array(e.opacity.minmaxMatrix.data.buffer),D),D+=s),A.set(new Uint8Array(e.opacity.quantized.data.buffer),D),D+=d,e.scaling instanceof Ho&&(A.set(new Uint8Array(e.scaling.minmaxMatrix.data.buffer),D),D+=s),A.set(new Uint8Array(e.scaling.quantized.data.buffer),D),D+=u,e.quaternion instanceof Ho&&(A.set(new Uint8Array(e.quaternion.minmaxMatrix.data.buffer),D),D+=s),A.set(new Uint8Array(e.quaternion.quantized.data.buffer),D),D+=m,w>0&&e.harmonics&&e.harmonics.length>0)for(let R=0;R<e.harmonics.length;R++){let N=e.harmonics[R];N instanceof Ho&&(A.set(new Uint8Array(N.minmaxMatrix.data.buffer),D),D+=s),A.set(new Uint8Array(N.quantized.data.buffer),D),D+=N.quantized.data.byteLength}return new yz(A.buffer)}},Xg=class{};function IYe(e){let t,n,i,r,s,o,a,l,c,d,h,u,p,m,v,g;function x(Q,le,ae){let he=new Float32Array(d,s,3*n);i=0;let xe=new Uint32Array(d,r,n);for(let _e=0;_e<ae.length-1;_e++){let be=le[_e],me=Q[_e].elements,Te=be.filter(ke=>ke.enabled&&"Include"===ke.mode).map(ke=>"Box"===ke.type?D(ke):k(ke)),Le=be.filter(ke=>ke.enabled&&"Exclude"===ke.mode).map(ke=>"Box"===ke.type?D(ke):k(ke));for(let ke=ae[_e];ke<ae[_e+1];ke++){let Re=p[3*ke],Qe=p[3*ke+1],Pe=p[3*ke+2];if((0===Te.length||P(Re,Qe,Pe,Te))&&(0===Le.length||!P(Re,Qe,Pe,Le))){let Be=1/(me[3]*Re+me[7]*Qe+me[11]*Pe+me[15]);he[3*i]=(me[0]*Re+me[4]*Qe+me[8]*Pe+me[12])*Be,he[3*i+1]=(me[1]*Re+me[5]*Qe+me[9]*Pe+me[13])*Be,he[3*i+2]=(me[2]*Re+me[6]*Qe+me[10]*Pe+me[14])*Be,xe[i]=ke,i++}}}}function P(Q,le,ae,he,xe){return he["Intersect"===xe?"every":"some"](_e=>{let be=function A(Q,le,ae,he,xe){let _e=Q-xe[0],be=le-xe[1],me=ae-xe[2],Te=1/(he[3]*_e+he[7]*be+he[11]*me+he[15]);return{x:(he[0]*_e+he[4]*be+he[8]*me+he[12])*Te+xe[0],y:(he[1]*_e+he[5]*be+he[9]*me+he[13])*Te+xe[1],z:(he[2]*_e+he[6]*be+he[10]*me+he[14])*Te+xe[2]}}(Q,le,ae,_e.invRotationMatrix,_e.cropCenter);return Array.isArray(_e)?function N(Q,le,ae,he){return Q>=he[0]&&Q<=he[3]&&le>=he[1]&&le<=he[4]&&ae>=he[2]&&ae<=he[5]}(be.x,be.y,be.z,_e):function L(Q,le,ae,he){let xe=(Q-he.cropCenter[0])*he.invRadiusX,_e=(le-he.cropCenter[1])*he.invRadiusY,be=(ae-he.cropCenter[2])*he.invRadiusZ;return xe*xe+_e*_e+be*be<=1}(be.x,be.y,be.z,_e)})}function D(Q){let le=Q.cropSize[0]/2,ae=Q.cropSize[1]/2,he=Q.cropSize[2]/2,xe=[Q.cropCenter[0]-le,Q.cropCenter[1]-ae,Q.cropCenter[2]-he,Q.cropCenter[0]+le,Q.cropCenter[1]+ae,Q.cropCenter[2]+he],_e=R(Q.cropRotation);return Object.assign(xe,{invRotationMatrix:_e,cropCenter:Q.cropCenter})}function R(Q){let le=[],ae=Q[0]*Math.PI/180,he=Q[1]*Math.PI/180,xe=Q[2]*Math.PI/180,_e=Math.cos(ae),be=Math.sin(ae),me=Math.cos(he),Te=Math.sin(he),Le=Math.cos(xe),ke=Math.sin(xe),Re=_e*Le,Qe=_e*ke,Pe=be*Le,Be=be*ke;return le[0]=me*Le,le[1]=-me*ke,le[2]=Te,le[4]=Qe+Pe*Te,le[5]=Re-Be*Te,le[6]=-be*me,le[8]=Be-Re*Te,le[9]=Pe+Qe*Te,le[10]=_e*me,le[12]=0,le[13]=0,le[14]=0,le[3]=0,le[7]=0,le[11]=0,le[15]=1,le}function k(Q){let le=2/Q.cropSize[0],ae=2/Q.cropSize[1],he=2/Q.cropSize[2],xe=R(Q.cropRotation);return{invRadiusX:le,invRadiusY:ae,invRadiusZ:he,cropCenter:Q.cropCenter,invRotationMatrix:xe}}e.onmessage=Q=>{if(Q.data.getCroppedIndexes){let le=new Uint32Array(function w(Q,le){let ae=[],he=le.filter(be=>be.enabled&&"Include"===be.mode).map(be=>"Box"===be.type?D(be):k(be)),xe=le.filter(be=>be.enabled&&"Exclude"===be.mode).map(be=>"Box"===be.type?D(be):k(be)),_e=Q.length;for(let be=0;be<_e;be+=3){let me=Q[be],Te=Q[be+1],Le=Q[be+2];(0===he.length||P(me,Te,Le,he))&&(0===xe.length||!P(me,Te,Le,xe))||ae.push(be/3)}return console.log(ae),ae}(new Float32Array(Q.data.positions),Q.data.crops)).buffer;e.postMessage({outOfBoundsIndexes:le},[le])}else if(Q.data.positions)h=Q.data.positions,p=new Float32Array(h),v=Q.data.meshMatrixWorlds,g=Q.data.cropsArray,m=Q.data.meshIndexIntervals,x(v,g,m),e.postMessage({sortSetupComplete:!0});else if(Q.data.sort||Q.data.newMatrixWorlds||Q.data.newCropsArray)(Q.data.newMatrixWorlds||Q.data.newCropsArray)&&(g=Q.data.newCropsArray||g,v=Q.data.newMatrixWorlds||v,x(v,g,m)),function b(Q){let ae,le=new Float64Array(d,o,16);for(let he=0;he<16;he++)le[he]=Q[he];if(i>1){t.exports.sortIndexes(r,s,c,o,a,l,u.DepthMapRange,i);let he=new Uint32Array(i);ae=he.buffer,he.set(new Uint32Array(d,l,i))}else if(1===i){let he=new Uint32Array(i);he[0]=new Uint32Array(d,r,n)[0],ae=he.buffer}else ae=new ArrayBuffer(0);e.postMessage({sortDone:!0,indexesBuffer:ae},[ae])}(Q.data.sort.view);else if(Q.data.init){u=Q.data.init.Constants,n=Q.data.init.splatCount;let le=u.BytesPerInt,ae=3*u.BytesPerFloat,he=new Uint8Array(Q.data.init.sorterWasmBytes),Le=Math.floor((n*(le+ae)+(n*u.BytesPerInt*2+u.DepthMapRange*u.BytesPerInt*2)+32*u.MemoryPageSize)/u.MemoryPageSize)+1,ke={module:{},env:{memory:new WebAssembly.Memory({initial:2*Le,maximum:3*Le,shared:!0})}};WebAssembly.compile(he).then(Re=>WebAssembly.instantiate(Re,ke)).then(Re=>{t=Re,r=0,s=n*le,o=s+n*ae,c=o+16*u.BytesPerFloat*2,a=c+n*u.BytesPerInt,l=a+u.DepthMapRange*u.BytesPerInt,d=ke.env.memory.buffer,e.postMessage({sortSetupPhase1Complete:!0})})}}}mc(Xg,"DepthMapRange",65536),mc(Xg,"MemoryPageSize",65536),mc(Xg,"BytesPerFloat",4),mc(Xg,"BytesPerInt",4);var _z=function(){let e=new Float32Array(1),t=new Int32Array(e.buffer);return function(n){return e[0]=n,t[0]}}(),kYe=function(e,t,n,i){return e+(t<<8)+(n<<16)+(i<<24)},AT=new tt,TT=class extends yc{constructor(e,t,n,i,r=!1,s=1,o,a){super(n,i),this.splatCount=t,this.meshIndexIntervals=o,this.meshMatrixWorlds=a,this.splatBuffers=e,this.geometry=n,this.material=i,this.splatDataTextures=null,this.halfPrecisionCovariancesOnGPU=r,this.devicePixelRatio=s,this.resetLocalSplatDataAndTexturesFromSplatBuffer()}static buildMesh(e,t,n=!1,i=1,r,s){let o=TT.buildGeomtery(t),a=TT.buildMaterial(r);return new TT(e,t,o,a,n,i,r,s)}static buildMaterial(e){let i={covariancesTexture:{type:"t",value:null},centersColorsTexture:{type:"t",value:null},meshIndexIntervals:{value:e},meshMatrixWorldsTexture:{type:"t",value:null},focal:{type:"v2",value:new tt},viewport:{type:"v2",value:new tt},basisViewport:{type:"v2",value:new tt},debugColor:{type:"v3",value:new Di},covariancesTextureSize:{type:"v2",value:new tt(1024,1024)},centersColorsTextureSize:{type:"v2",value:new tt(1024,1024)},orthoZoom:{type:"f",value:-1}};return new Ks({uniforms:i,vertexShader:"\n            precision highp float;\n            #include <common>\n\n            attribute uint splatIndex;\n\n            uniform highp sampler2D covariancesTexture;\n            uniform highp usampler2D centersColorsTexture;\n            uniform vec2 focal;\n            uniform vec2 viewport;\n            uniform vec2 basisViewport;\n            uniform vec2 covariancesTextureSize;\n            uniform vec2 centersColorsTextureSize;\n\t\t\t\t\t\tuniform highp sampler2D meshMatrixWorldsTexture;\n\t\t\t\t\t\tuniform uint meshIndexIntervals[257];\n\t\t\t\t\t\tuniform float orthoZoom;\n\n            varying vec4 vColor;\n            varying vec2 vUv;\n\n            varying vec2 vPosition;\n\n            const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);\n            const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));\n            const uvec4 shift4 = uvec4(0, 8, 16, 24);\n            vec4 uintToRGBAVec (uint u) {\n               uvec4 urgba = mask4 & u;\n               urgba = urgba >> shift4;\n               vec4 rgba = vec4(urgba) * encodeNorm4;\n               return rgba;\n            }\n\n            vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {\n                vec2 samplerUV = vec2(0.0, 0.0);\n                float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;\n                samplerUV.y = float(floor(d)) / dimensions.y;\n                samplerUV.x = fract(d);\n                return samplerUV;\n            }\n\n            void main () {\n                uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));\n                vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));\n                vColor = uintToRGBAVec(sampledCenterColor.r);\n\n                vPosition = position.xy * 2.0;\n\n\t\t\t\t\t\t\t\tuint meshIndex;\n\t\t\t\t\t\t\t\tfor (int i = 1; i < 257; i++) {\n\t\t\t\t\t\t\t\t\tif (splatIndex < meshIndexIntervals[i]) {\n\t\t\t\t\t\t\t\t\t\tmeshIndex = uint(i - 1);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tfloat strideMulmeshIndex = float(4u*meshIndex);\n\t\t\t\t\t\t\t\tfloat meshMatrixWorldsTextureLength = float(256*4);\n\n\t\t\t\t\t\t\t\tmat4 modelMat = mat4(\n\t\t\t\t\t\t\t\t\ttexture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+0.0)/meshMatrixWorldsTextureLength, 0)),\n\t\t\t\t\t\t\t\t\ttexture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+1.0)/meshMatrixWorldsTextureLength, 0)),\n\t\t\t\t\t\t\t\t\ttexture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+2.0)/meshMatrixWorldsTextureLength, 0)),\n\t\t\t\t\t\t\t\t\ttexture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+3.0)/meshMatrixWorldsTextureLength, 0))\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tmat4 modelViewMat = viewMatrix * modelMat;\n\t\t\t\t\t\t\t\tvec4 viewCenter = modelViewMat * vec4(splatCenter, 1.0); \n                vec4 clipCenter = projectionMatrix * viewCenter;\n\n                vec2 sampledCovarianceA = texture(covariancesTexture, getDataUV(3, 0, covariancesTextureSize)).rg;\n                vec2 sampledCovarianceB = texture(covariancesTexture, getDataUV(3, 1, covariancesTextureSize)).rg;\n                vec2 sampledCovarianceC = texture(covariancesTexture, getDataUV(3, 2, covariancesTextureSize)).rg;\n\n                vec3 cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rg, sampledCovarianceB.r);\n                vec3 cov3D_M22_M23_M33 = vec3(sampledCovarianceB.g, sampledCovarianceC.rg);\n\n                // Compute the 2D covariance matrix from the upper-right portion of the 3D covariance matrix\n                mat3 Vrk = mat3(\n                    cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,\n                    cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,\n                    cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z\n                );\n                float s = 1.0 / (viewCenter.z * viewCenter.z);\n\n                mat3 W = transpose(mat3(modelViewMat));\n                mat3 T = orthoZoom > 0.0 ? W : W * mat3(\n\t\t\t\t\t\t\t\t\tfocal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,\n\t\t\t\t\t\t\t\t\t0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,\n\t\t\t\t\t\t\t\t\t0., 0., 0.\n\t\t\t\t\t\t\t\t);\n                mat3 cov2Dm = transpose(T) * Vrk * T;\n                cov2Dm[0][0] += 0.3;\n                cov2Dm[1][1] += 0.3;\n\n                // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because\n                // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],\n                // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't\n                // need cov2Dm[1][0] because it is a symetric matrix.\n                vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);\n\n                vec3 ndcCenter = clipCenter.xyz / clipCenter.w;\n\n                // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix\n                // so that we can determine the 2D basis for the splat. This is done using the method described\n                // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html\n                //\n                // This is a different approach than in the original work at INRIA. In that work they compute the\n                // max extents of the 2D covariance matrix in screen space to form an axis aligned bounding rectangle\n                // which forms the geometry that is actually rasterized. They then use the inverse 2D covariance\n                // matrix (called 'conic') to determine fragment opacity.\n                float a = cov2Dv.x;\n                float d = cov2Dv.z;\n                float b = cov2Dv.y;\n                float D = a * d - b * b;\n                float trace = a + d;\n                float traceOver2 = 0.5 * trace;\n                float term2 = sqrt(trace * trace / 4.0 - D);\n                float eigenValue1 = traceOver2 + term2;\n\t\t\t\t\t\t\t\tfloat eigenValue2 = max(traceOver2 - term2, 0.00); // prevent negative eigen value\n\n                const float maxSplatSize = 1024.0;\n                vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));\n                // since the eigen vectors are orthogonal, we derive the second one from the first\n                vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);\n                vec2 basisVector1 = eigenVector1 * min(sqrt(2.0 * eigenValue1), maxSplatSize);\n                vec2 basisVector2 = eigenVector2 * min(sqrt(2.0 * eigenValue2), maxSplatSize);\n\n                vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) * basisViewport;\n\n\t\t\t\t\t\t\t\tif (orthoZoom > 0.0) {\n\t\t\t\t\t\t\t\t\tndcOffset *= orthoZoom;\n\t\t\t\t\t\t\t\t}\n\n                gl_Position = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);\n            }",fragmentShader:"\n            precision highp float;\n            #include <common>\n\n            uniform vec3 debugColor;\n\n            varying vec4 vColor;\n            varying vec2 vUv;\n\n            varying vec2 vPosition;\n\t\t\t\t\t\tlayout(location = 1) out vec4 gVelocity; \n\n            void main () {\n                // compute the negative squared distance from the center of the splat to the\n                // current fragment in the splat's local space.\n                float A = -dot(vPosition, vPosition);\n                if (A < -4.0) discard;\n                vec3 color = vColor.rgb;\n                A = exp(A) * vColor.a;\n                gl_FragColor = vec4(color.rgb, A);\n\t\t\t\t\t\t\t\tgVelocity = vec4(0.0); // so it is ignored by TAA\n            }",transparent:!0,alphaTest:1,blending:Pv,depthTest:!0,depthWrite:!1,side:Yc})}static buildGeomtery(e){let t=new Pi;t.setIndex([0,1,2,0,2,3]);let n=new Float32Array(12),i=new Bi(n,3);t.setAttribute("position",i),i.setXYZ(0,-1,-1,0),i.setXYZ(1,-1,1,0),i.setXYZ(2,1,1,0),i.setXYZ(3,1,-1,0),i.needsUpdate=!0;let r=(new iQ).copy(t),s=new Uint32Array(e),o=new SZ(s,1,!1);return o.setUsage(35048),r.setAttribute("splatIndex",o),r.instanceCount=e,r}resetLocalSplatDataAndTexturesFromSplatBuffer(){this.updateLocalSplatDataFromSplatBuffer(),this.allocateAndStoreLocalSplatDataInTextures()}updateLocalSplatDataFromSplatBuffer(){this.splatBuffers.forEach(i=>i.buildPreComputedBuffers()),this.covariances=new Float32Array(6*this.splatCount),this.colors=new Uint8Array(4*this.splatCount),this.centers=new Float32Array(3*this.splatCount);let e=0,t=0,n=0;for(let i of this.splatBuffers){let r=i.nsplats;this.colors.subarray(e,e+4*r).set(i.colorsA),e+=4*r,this.centers.subarray(t,t+3*r).set(i.decoded.xyz.denormDequant().data),t+=3*r,this.covariances.subarray(n,n+6*r).set(new Float32Array(i.precomputedCovarianceBufferData)),n+=6*r}}allocateAndStoreLocalSplatDataInTextures(){let e=this.splatCount,t=new tt(4096,1024);for(;t.x*t.y*2<6*e;)t.y*=2;let i,r,n=new tt(4096,1024);for(;n.x*n.y*4<4*e;)n.y*=2;if(this.halfPrecisionCovariancesOnGPU){r=new Uint16Array(t.x*t.y*2);for(let d=0;d<this.covariances.length;d++)r[d]=FLe.toHalfFloat(this.covariances[d]);i=new yg(r,t.x,t.y,$E,Ov)}else r=new Float32Array(t.x*t.y*2),r.set(this.covariances),i=new yg(r,t.x,t.y,$E,gc);i.needsUpdate=!0,this.material.uniforms.covariancesTexture.value=i,this.material.uniforms.covariancesTextureSize.value.copy(t);let s=new Uint32Array(n.x*n.y*4);for(let d=0;d<e;d++){let h=4*d,u=3*d,p=4*d;s[p]=kYe(this.colors[h],this.colors[h+1],this.colors[h+2],this.colors[h+3]),s[p+1]=_z(this.centers[u]),s[p+2]=_z(this.centers[u+1]),s[p+3]=_z(this.centers[u+2])}let o=new yg(s,n.x,n.y,tK,Lf);o.internalFormat="RGBA32UI",o.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=o,this.material.uniforms.centersColorsTextureSize.value.copy(n);let l=new Float32Array(4096);for(let d=0;d<this.meshMatrixWorlds.length;d++)l.set(this.meshMatrixWorlds[d].elements,16*d);let c=new yg(l,1024,1,Vd,gc);c.needsUpdate=!0,this.material.uniforms.meshMatrixWorldsTexture.value=c,this.material.uniformsNeedUpdate=!0,this.splatDataTextures={covariances:{data:r,texture:i,size:t},centerColors:{data:s,texture:o,size:n},meshMatrixWorlds:{data:l,texture:c}}}updateIndexes(e){let t=this.geometry;t.attributes.splatIndex.set(e),t.attributes.splatIndex.needsUpdate=!0,t.instanceCount=e.length}updateUniforms(e,t,n,i){this.splatCount>0&&(AT.set(e.x*this.devicePixelRatio,e.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(AT),this.material.uniforms.basisViewport.value.set(2/AT.x,2/AT.y),this.material.uniforms.focal.value.set(t,n),this.material.uniforms.orthoZoom.value=i,this.material.uniformsNeedUpdate=!0)}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(){return this.splatCount}getCenters(){return this.centers}getColors(){return this.colors}getCovariances(){return this.covariances}dispose(){this.geometry.dispose(),this.material.dispose(),this.splatDataTextures&&(this.splatDataTextures.covariances.texture.dispose(),this.splatDataTextures.centerColors.texture.dispose(),this.splatDataTextures.meshMatrixWorlds.texture.dispose())}},bz=new EM;bz.wireframe=!0;var wre=new oe,xz=class extends vg{constructor(e,t){super(),this.data=e,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.splatViewer=null,this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new class{constructor(){this._constraints=new Map}setConstraint(e,t){null===t?this._constraints.delete(e):this._constraints.set(e,t)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let t=new Set;this._constraints.forEach((n,i)=>{let r=[i,n],s=n;for(;this._constraints.has(s);)s=this._constraints.get(s),t.has(s)||r.push(s);for(let o=r.length-2;o>=0;o--)if(!t.has(r[o])){let a=e.find(r[o]);a?a.applyPathSnapping(e):console.warn(`missing entity ${r[o]}`),t.add(r[o])}})}findDependency(e,t){let n=e;for(;this._constraints.has(n);)if(n=this._constraints.get(n),n===t)return!0;return!1}},this.errorPage=new Wg("fdasfa",{...gb.defaultData,name:""}),this.invisibleObjects=new Yb("jflkdsafjasdifjaslk",{...M5.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,t),this.matrixAutoUpdate=!1}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=function _Ye(e){let t=!1;return e.traverseEntity(n=>{if(n instanceof Gb)if(Array.isArray(n.material))for(let i=0;i<n.material.length;i++)mre(n,n.material[i])&&(t=!0);else mre(n,n.material)&&(t=!0)}),t}(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=function yYe(e){let t=!1;return e.traverseEntity(n=>{if(n instanceof Gb)if(Array.isArray(n.material))for(let i=0;i<n.material.length;i++)fre(n,n.material[i])&&(t=!0);else fre(n,n.material)&&(t=!0)}),t}(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),n=this.entityIdentityToEntity[t];n&&(e.uuid=n.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof Wg&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let t=this.find(e);if(void 0===t)return;let n=[],i=t;for(;i!==this;){let r=i;i=i.parent;let s=i.children.indexOf(r);n.splice(0,0,s)}return{entity:t,sortKey:n}}getAllSorted(e){let t=[];for(let n of e){let i=this.getWithSortKey(n.id);void 0!==i&&t.push(i)}return t.sort((n,i)=>function l9e(e,t){let n=0;for(;n<e.length&&n<t.length;){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1;n+=1}return n!==t.length?-1:n!==e.length?1:0}(n.sortKey,i.sortKey)),t.map(n=>n.entity)}nonExistOrDescendantOf(e,t){let n=this.find(e);if(void 0===n)return!0;for(;n;){if(n.uuid===t)return!0;n=n.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if("f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera"===e)return this.activePage.personalCamera;if(e===ab)return this.activePage.personalCamera}if(""===e||void 0===e)return;let t=this.entityByUuid[e];return void 0===t?this.getObjectByProperty("uuid",e):t}debugEnsureEntity(e){let t=this.find(e);t?Array.isArray(t.identity)&&void 0===this.findInstance(t.identity)&&console.error("not found instance"):console.error("not found")}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(t=>{this.toExpandCloner.add(t)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{e.cloner?.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,t){1===e.path.length&&"components"===e.path[0]&&1===e.type&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,t)}updateTreeByOp(e,t){if(0===e.path.length&&7===e.type){let n=null===e.parent?this:this.find(e.parent);if(void 0===n)throw new Error("unexpected");let i=this.createObject(e.id,e.data,e.children,n,e.localIndex,t);i.updateVisible(),i.resetBBoxNeedsUpdate(),Cu(i)&&om(i.parent)&&(i.invalidateUpstreamBooleanData(),i.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(i),this.markToExpandCloner(i),this.markPenumbraSizeDirty(),i.updatePathSnapping()}else if(0===e.path.length&&8===e.type){let n=this.find(e.id);if(void 0===n)throw new Error("unexpected");this.markToExpandCloner(n),n.resetBBoxNeedsUpdate(),this.unregisterObject(n);let i=n.parent;this.markNeedsRecomputeInstancesForAncessors(i),this.markNeedsRecomputeInstancesForChildren(n),this.markPenumbraSizeDirty(),n.parent.remove(n),om(n.parent)&&(n.parent.invalidateUpstreamBooleanData(),n.parent.invalidateDownstreamBooleanData().recomputeBoolean()),Cu(n)&&(n.freeBooleanPointer(),i instanceof l1&&i.invalidateDownstreamBooleanData().recomputeBoolean()),n instanceof dz&&n.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n),this.pathConstraints.removeDependencies(n.uuid),n.updatePathSnapping()}else if(0===e.path.length&&9===e.type){let n=this.find(e.id);if(void 0===n)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(n);let i=n.parent;this.markNeedsRecomputeInstancesForAncessors(i),n.cloner?.resetOnMove(),this.markToExpandCloner(n);let r=null===e.parent?this:this.find(e.parent);if(void 0===r)throw new Error("unexpected");r.add(n),this.markNeedsRecomputeInstancesForAncessors(r),this.markToExpandCloner(n),n.invalidateClonerTransform(n),n.updateVisible(),n.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty(),r.children.splice(e.localIndex,0,r.children.pop()),Cu(n)&&(n.invalidateUpstreamBooleanData(),om(n.parent)?n.parent.invalidateDownstreamBooleanData().recomputeBoolean():i instanceof l1&&i.invalidateDownstreamBooleanData().recomputeBoolean()),n.updatePathSnapping()}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){return this.find(this.data.publish.playPage)??this.errorPage}updatePage(e){this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let t of this.children)t instanceof Wg&&(t.visible=t.uuid===e,t.visible&&(this.activePage=t,this.activePage.onActive(this)));this.activePage!==this.splatViewer?.activePage&&this.reloadSplats()}updateEntityByOp(e,t,n,i){if(0===t.type){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),"visible"in t.props&&this.markPenumbraSizeDirty(),t.path.includes("overrides")&&"states"in t.props){let{rest:s}=t.props;t={...t,props:s},this.markNeedsRecomputeInstances()}"pathSnapping"===t.path[0]&&void 0!==t.props.pathId&&this.pathConstraints.setConstraint(e,t.props.pathId)}let r=this.find(e);if(r)try{(function vYe(e,t,n,i){e.updateByOp(t,n,i,!1)})(r,t,n,{scene:this,shared:i}),r instanceof Ac&&r.updateGeometryGroupsIfNeeded()}catch(s){console.error(s)}}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,t){let n=Object.entries(t.data.lib.components).map((i,r)=>({data:i[1].asset.data,children:i[1].asset.children,id:i[0],fi:r}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:t}),this.add(this.invisibleObjects),this.createChildrenObjects(n,this.invisibleObjects,t),this.createChildrenObjects(e.objects,this,t),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(t,!0),this.traverseEntity(i=>{i instanceof $l&&i.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(t=>{("Component"===t.data.type||"Instance"===t.data.type)&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){es.is(e)&&("Component"===e.data.type&&this.markNeedsRecomputeInstances(),e.traverseAncestors(t=>{es.is(t)&&"Component"===t.data.type&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,n,i,r,s,o){if(e){let a=i.find(e);a&&a!==i&&r.forInstancesRec(l=>{l.data=JM(l.data,c=>{let d=c.events.data(o.id),h=l.goUp(s);if(h){let u=[...NJ(h.identity),e].join("-"),p=this.entityIdentityToEntity[u];if(p){let m=p.uuid;xc.zoom(d,t)[n]=m}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,t,n,i,r,s){e.forEach(o=>{("Transition"===o.data.type||"Animation"===o.data.type)&&this.relativeizeInner(o.data.object,[...t,o.id],"object",n,i,r,s)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof $b&&"string"==typeof e.identity&&"Component"===e.data.type)return e.traverseEntity((t,n)=>{t.data.events.forEach(i=>{if("GameControl"===i.data.type){let r=!1;if(t.forInstancesRec(s=>{s.data=JM(s.data,o=>{s.isInstanceRoot||(o.events.delete(i.id),r=!0)}).data}),!1===r)for(let s of LA.list)this.rewriteActions(i.data.gameActions[s],["gameActions",s],e,t,n,i)}else"Conditional"===i.data.type?("Distance"===i.data.condition.type?(this.relativeizeInner(i.data.condition.fromObject,["condition"],"fromObject",e,t,n,i),this.relativeizeInner(i.data.condition.toObject,["condition"],"toObject",e,t,n,i)):"State"===i.data.condition.type?this.relativeizeInner(i.data.condition.object,["condition"],"object",e,t,n,i):"Comparison"===i.data.condition.type&&("Property"===i.data.condition.lOperand.type&&this.relativeizeInner(i.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,n,i),"Property"===i.data.condition.rOperand.type&&this.relativeizeInner(i.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,n,i)),this.rewriteActions(i.data.inActions,["inActions"],e,t,n,i),this.rewriteActions(i.data.outActions,["outActions"],e,t,n,i)):"actions"in i.data&&this.rewriteActions(i.data.actions,["actions"],e,t,n,i)})}),!0})}expandInstances(e,t,n){let i=new Set;this.traverseEntity(r=>{if(r instanceof $b&&r.isInstanceRoot)return r.expandInstanceChildren({scene:this,shared:e,pendingDeletes:i}),t||r.resetBBoxNeedsUpdate(),n&&r.traverseEntity(s=>{n.addClip(s)}),!0});for(let r of i)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r),hz(r)}recomputeInstances(e,t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(n=>{n instanceof $b&&n.isInstanceRoot&&(n.component=void 0)}),this.expandInstances(e,!1,t))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(t=>{let n="string"==typeof t.identity?t.identity:t.identity.join("-");this.entityIdentityToEntity[n]===t&&(delete this.entityByUuid[t.uuid],delete this.entityIdentityToEntity[n]),t.dispose()})}clearScene(){for(let e of this.children)es.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}raycast(e){return this.raycast1(e,!1)}raycast1(e,t){let n=[],i=r=>{for(let s of r.children){let o=s.cloner;if(es.is(s)&&!s.raycastLock&&(s.visible||o?.object.data.visible))if(!0===t&&s.isInstanceRoot){let a=[];if(e.intersectObject(s,!0,a),a.length){let l=a[0];l.object=s,l.point.applyMatrix4(l.object.matrixWorld);let c=s.matrixWorld.clone().invert();l.point.applyMatrix4(c),n.push(l)}}else(Cu(s)||KB(s)&&this.enableHelpers&&s.objectHelper.visible)&&(e.intersectObject(s,!1,n),pz(s,e,n)),i(s)}};return i(this),n}raycastWithClones(e){let t=[],n=i=>{for(let r of i.children){let s=r.cloner;es.is(r)&&(r.visible||s?.object.data.visible)&&((Cu(r)||KB(r)&&this.enableHelpers&&r.objectHelper.visible)&&(e.intersectObject(r,!1,t),pz(r,e,t,!0)),n(r))}};return n(this),t}forEachEntity(e){for(let t of this.children)es.is(t)&&e(t)}traverseConcreteEntity(e){for(let t of this.children)es.is(t)&&t.isConcreteEntity&&t.traverseEntity(e)}traverseEntity(e){for(let t of this.children)es.is(t)&&t.traverseEntity(e)}updateFont(e,t){this.traverseEntity(n=>{if(n instanceof Ac&&"Mesh"===n.data.type&&"TextGeometry"===n.data.geometry.type&&n.data.geometry.font===e){let i=n.geometry,r=n.data.geometry;i.updateFont(e,t).then(()=>{i.update(r);let s=n.invalidateDownstreamBooleanData();om(s)&&s.recomputeBoolean()})}})}traverseObject(e){for(let t of this.children)gC.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)es.is(t)&&t.visible&&t.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,t,n){let i=0;for(let r of e)this.createObject(r.id,r.data,r.children,t,i,n),i+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,n,i,r,s){let o={scene:this,shared:s},a=uz(e,t,o);return a&&(this.entityByUuid[e]=a,i.add(a),i.children.splice(r,0,i.children.pop()),n.length>0&&(a.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(n,a,s)),a.updateState(t,o),a instanceof Ac&&a.updateGeometryGroupsIfNeeded(),a.updateVisible(),a.cloner&&this.toExpandCloner.add(a),t.pathSnapping?.pathId&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),"Empty"===t.type&&t.animations&&a.traverseEntity(l=>{let c=l.dataPatched;if(l instanceof Ac&&c.bones&&c.boneInverses){let d=c.bones.map(p=>this.find(p)),h=c.boneInverses.map(p=>(new vn).fromArray(p)),u=new LL(d,h);l.bind(u,l.bindMatrix)}else l.matrixAutoUpdate=!0}),a}getCenter(e){let t=[];for(let i=0,r=e.length;i<r;++i){let{id:s,recursive:o}=e[i],a=this.find(s);t.push(...(o?a.recursiveBBox:a.singleBBox).vertices)}let n=new ra;return n.setFromPoints(t),n.getCenter(wre),wre}copyMatrixWorld(e,t){if(null===e)return void t.identity();let n=this.find(e);n?t.copy(n.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){if(null===e)return void t.identity();let n=this.find(e)?.parent;n?t.copy(n.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof Jc)if(Array.isArray(t.material))for(let n=0;n<t.material.length;n++)t.material[n]instanceof Vg&&e(t.material[n]);else t.material instanceof Vg&&e(t.material)})}updateViewPlaneSize(e,t,n=!1){this.traverseConcreteEntity(i=>{i instanceof $l&&i.setViewplaneSize(e,t,n)})}initializeSplatViewer(e){this.splatViewer=new class{constructor(e={}){mc(this,"updateSplatMeshUniforms",function(){let t=new tt;return function(){null!==this.splatMesh&&this.splatMesh.getSplatCount()>0&&(this.renderer.getSize(t),this.cameraFocalLengthX=this.camera.projectionMatrix.elements[0]*this.devicePixelRatio*t.x*.45,this.cameraFocalLengthY=this.camera.projectionMatrix.elements[5]*this.devicePixelRatio*t.y*.45,this.splatMesh.updateUniforms(t,this.cameraFocalLengthX,this.cameraFocalLengthY,this.camera.isPerspectiveCamera?-1:this.camera.zoom*this.devicePixelRatio))}}()),mc(this,"updateView",function(){let t=new vn,n=[],i=new oe(0,0,-1),r=new oe(0,0,-1),s=new oe,o=new oe;return function(a=!1){let l=this.updateMatrixWorldsInWorkerIfNeeded(),c=this.cropsChanged();if(!a){r.set(0,0,-1).applyQuaternion(this.camera.quaternion);let h=!1,u=!1;if(r.dot(i)<=.95&&(h=!0),o.copy(this.camera.position).sub(s).length()>=1&&(u=!0),!(h||u||l||c))return}s.copy(this.camera.position),i.copy(r),t.copy(this.camera.matrixWorld).invert(),t.premultiply(this.camera.perspCamera.projectionMatrix),n[0]=this.camera.position.x,n[1]=this.camera.position.y,n[2]=this.camera.position.z;let d={sort:{view:t.elements,cameraPosition:n,splatRenderCount:this.splatRenderCount,splatSortCount:this.splatRenderCount},...l?{newMatrixWorlds:this.meshMatrixWorlds}:{},...c?{newCropsArray:this.cropsArray}:{}};this.sortRunning?this.queuedMessage=d:(this.queuedMessage=null,this.sortRunning=!0,this.sortWorker.postMessage(d))}}()),this.scene=e.scene,this.currentPage=null,this.renderer=e.renderer,this.devicePixelRatio=window.devicePixelRatio,this.sortWorker=null,this.splatRenderCount=0,this.splatSortCount=0,this.splatMesh=null,this.sortRunning=!1,this.splatRenderingInitialized=!1,this.meshMatrixWorlds=null,this.meshMatrixWorldsOld=null,this.cropsArray=null,this.splatEntries=null,this.queuedMessage=null}get camera(){return this.scene.activeCamera}reloadSplats(){this.splatRenderingInitialized=!1;let e=this.loadSplat();this.renderer.pipeline.opaquePass.splatViewer=e?this:null}loadSplat(e={}){this.activePage=this.scene.activePage,e.position&&(e.position=(new oe).fromArray(e.position)),e.orientation&&(e.orientation=(new Qi).fromArray(e.orientation)),e.halfPrecisionCovariances=!!e.halfPrecisionCovariances;let t=[];if(this.splatEntries=t,this.activePage.traverseEntity(s=>{if("Splat"===s.data.type){let o=s.visible;s.traverseAncestors(a=>{o&&(o=a.visible)}),o&&t.push(s)}}),this.splatMesh&&this.splatMesh.dispose(),0===t.length)return this.splatMesh=null,!1;this.meshMatrixWorlds=t.map(s=>s.matrixWorld),this.meshMatrixWorldsOld=t.map(s=>s.matrixWorld.clone()),this.cropsArray=t.map(s=>s.data.crops.map(o=>o.data));let n=t.map(s=>new yz(new Uint8Array(s.data.buffer).buffer)),i=0,r=[0];for(let s of n)i+=s.getSplatCount(),r.push(i);return this.setupSplatMesh(n,i,e.position,e.orientation,e.halfPrecisionCovariances,this.devicePixelRatio,r,this.meshMatrixWorlds),this.setupSortWorker(i),!0}updateMatrixWorldsInWorkerIfNeeded(){let e=this.splatDataTextures.meshMatrixWorlds.data;for(let t=0;t<this.meshMatrixWorlds.length;t++)e.set(this.meshMatrixWorlds[t].elements,16*t);return this.splatDataTextures.meshMatrixWorlds.texture.needsUpdate=!0,!this.meshMatrixWorlds.every((t,n)=>t.equals(this.meshMatrixWorldsOld[n]))&&(this.meshMatrixWorldsOld=this.meshMatrixWorlds.map(t=>t.clone()),!0)}cropsChanged(){let e=!1;return this.splatEntries.forEach((t,n)=>{t.data.crops.forEach((i,r)=>{void 0===this.cropsArray[n][r]?(e=!0,this.cropsArray[n][r]=i.data):Object.entries(i.data).forEach(([s,o])=>{(Array.isArray(o)&&o.some((a,l)=>a!==this.cropsArray[n][r][s][l])||o!==this.cropsArray[n][r]?.[s])&&(e=!0,this.cropsArray[n][r][s]=o)})}),t.data.crops.length!==this.cropsArray[n]?.length&&(this.cropsArray[n].length=t.data.crops.length,e=!0)}),e}setupSplatMesh(e,t,n=new oe,i=new Qi,r=!1,s=1,o,a){this.splatMesh=TT.buildMesh(e,t,r,s,o,a),this.splatMesh.position.copy(n),this.splatMesh.quaternion.copy(i),this.splatMesh.frustumCulled=!1,this.splatMesh.renderOrder=10,this.updateSplatMeshUniforms(),this.splatRenderCount=t}setupSortWorker(e){this.sortWorker=function RYe(e){let t=new Worker(URL.createObjectURL(new Blob(["(",IYe.toString(),")(self)"],{type:"application/javascript"}))),n=atob("AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAETA2AAAGAIf39/f39/f38AYAABfwISAQNlbnYGbWVtb3J5AgMAgIAEAwQDAAECBzkDEV9fd2FzbV9jYWxsX2N0b3JzAAALc29ydEluZGV4ZXMAARNlbXNjcmlwdGVuX3Rsc19pbml0AAIK3gMDAwABC9IDAwF/BnwBfgJAIAdFDQAgAysDUCEMIAMrAzAhDSADKwMQIQ5BACEDRP///////+9/IQtEAAAAAAAAEAAhCgNAIAIgA0ECdGoCfyAOIAEgA0EMbGoiCCoCALuiIA0gCCoCBLuioCAMIAgqAgi7oqBEAAAAAAAAsECiIgmZRAAAAAAAAOBBYwRAIAmqDAELQYCAgIB4CzYCACAJIAsgCSALYxshCyAJIAogCSAKZBshCiADQQFqIgMgB0cNAAsgB0UNACAGuCAKIAuhoyEJQQAhAwNAAn8gCSACIANBAnRqIgEoAgC3IAuhoiIKmUQAAAAAAADgQWMEQCAKqgwBC0GAgICAeAshCCABIAg2AgAgBCAIQQJ0aiIBIAEoAgBBAWo2AgAgA0EBaiIDIAdHDQALCyAGQQJPBEAgBCgCACEIQQEhAwNAIAQgA0ECdGoiASABKAIAIAhqIgg2AgAgA0EBaiIDIAZHDQALCyAHQQFrIgGtIQ8DQCAEIAIgD6dBAnQiA2ooAgBBAnRqIgcgBygCAEEBayIHNgIAIAUgASAHa0ECdGogACADaigCADYCACAPUCEDIA9CAX0hDyADRQ0ACyAGBEAgBEEAIAZBAnT8CwALCwQAQQAL"),i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return t.postMessage({init:{sorterWasmBytes:i.buffer,splatCount:e,Constants:{BytesPerFloat:Xg.BytesPerFloat,BytesPerInt:Xg.BytesPerInt,DepthMapRange:Xg.DepthMapRange,MemoryPageSize:Xg.MemoryPageSize}}}),t}(e),this.sortWorker.onmessage=t=>{t.data.sortDone?(this.sortRunning=!1,this.splatMesh?.updateIndexes(new Uint32Array(t.data.indexesBuffer)),this.lastSortTime=t.data.sortTime,this.queuedMessage&&(this.sortWorker.postMessage(this.queuedMessage),this.queuedMessage=null)):t.data.sortCanceled?this.sortRunning=!1:t.data.sortSetupPhase1Complete?this.sortWorker.postMessage({positions:this.splatMesh.getCenters().buffer,meshMatrixWorlds:this.splatMesh.meshMatrixWorlds,meshIndexIntervals:this.splatMesh.meshIndexIntervals,cropsArray:this.cropsArray}):t.data.sortSetupComplete&&(this.splatDataTextures=this.splatMesh.getSplatDataTextures(),this.updateView(!0,!0),this.splatRenderingInitialized=!0)}}update(){!1!==this.splatRenderingInitialized&&(this.updateSplatMeshUniforms(),this.updateView())}getSplatMesh(){return this.splatMesh}}({scene:this,renderer:e}),this.reloadSplats()}reloadSplats(){this.splatViewer?.reloadSplats()}},DT=(e,t)=>{let n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)},wz=e=>e*(Math.PI/180),Mz=new Map,Mre=e=>{Mz.has(e)&&clearTimeout(Mz.get(e)),Mz.set(e,setTimeout(e,100))},IT=(e,t,n)=>{let r,i=t.split(/[ ,]+/g);for(let s=0;s<i.length;s+=1)r=i[s],e.addEventListener?e.addEventListener(r,n,!1):e.attachEvent&&e.attachEvent(r,n)},Cre=(e,t,n)=>{let r,i=t.split(/[ ,]+/g);for(let s=0;s<i.length;s+=1)r=i[s],e.removeEventListener?e.removeEventListener(r,n):e.detachEvent&&e.detachEvent(r,n)},Pre=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),Sre=()=>{if(!(typeof window>"u"))return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},Cz=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},Pz=(e,t,n)=>{let i=Ere(e);for(let r in i)if(i.hasOwnProperty(r))if("string"==typeof t)i[r]=t+" "+n;else{let s="";for(let o=0,a=t.length;o<a;o+=1)s+=t[o]+" "+n+", ";i[r]=s.slice(0,-2)}return i},Ere=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(n){t[n+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},Sz=(e,t)=>{for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},Ez=(e,t)=>{if(e.length)for(let n=0,i=e.length;n<i;n+=1)t(e[n]);else t(e)};typeof window<"u"&&(Ore="ontouchstart"in window,Are=!!window.PointerEvent,Tre=!!window.MSPointerEvent);var Ore,Are,Tre,Jb,kC_mouse={start:"mousedown",move:"mousemove",end:"mouseup"},NC={};function h1(){}Are?Jb={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:Tre?Jb={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:Ore?(Jb={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},NC=kC_mouse):Jb=kC_mouse,h1.prototype.on=function(e,t){var r,n=this,i=e.split(/[ ,]+/g);n._handlers_=n._handlers_||{};for(var s=0;s<i.length;s+=1)n._handlers_[r=i[s]]=n._handlers_[r]||[],n._handlers_[r].push(t);return n},h1.prototype.off=function(e,t){var n=this;return n._handlers_=n._handlers_||{},void 0===e?n._handlers_={}:void 0===t?n._handlers_[e]=null:n._handlers_[e]&&n._handlers_[e].indexOf(t)>=0&&n._handlers_[e].splice(n._handlers_[e].indexOf(t),1),n},h1.prototype.trigger=function(e,t){var r,n=this,i=e.split(/[ ,]+/g);n._handlers_=n._handlers_||{};for(var s=0;s<i.length;s+=1)n._handlers_[r=i[s]]&&n._handlers_[r].length&&n._handlers_[r].forEach(function(o){o.call(n,{type:r,target:n},t)})},h1.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=((e,t)=>{let n={};for(let i in e)e.hasOwnProperty(i)&&t.hasOwnProperty(i)?n[i]=t[i]:e.hasOwnProperty(i)&&(n[i]=e[i]);return n})(t.options,e))},h1.prototype.bindEvt=function(e,t){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[t]=function(){"function"==typeof n["on"+t]?n["on"+t].apply(n,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},IT(e,Jb[t],n._domHandlers_[t]),NC[t]&&IT(e,NC[t],n._domHandlers_[t]),n},h1.prototype.unbindEvt=function(e,t){var n=this;return n._domHandlers_=n._domHandlers_||{},Cre(e,Jb[t],n._domHandlers_[t]),NC[t]&&Cre(e,NC[t],n._domHandlers_[t]),delete n._domHandlers_[t],this};var Oz=h1;function Ka(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=Ka.id,Ka.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Ka.prototype=new Oz,Ka.constructor=Ka,Ka.id=0,Ka.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},Ka.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=((e,t)=>{let n=Ere("borderRadius");for(let i in n)n.hasOwnProperty(i)&&(n[i]="50%");return n})(),n=Pz("transition","opacity",e),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},Sz(i.el,n),"circle"===this.options.shape&&Sz(i.back,t),Sz(i.front,t),this.applyStyles(i),this},Ka.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var n in e[t])this.ui[t].style[n]=e[t][n];return this},Ka.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},Ka.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},Ka.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},Ka.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),"function"==typeof e&&e.call(this)},t.options.fadeTime)),t},Ka.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){t.ui.el.style.display="dynamic"===t.options.mode?"none":"block","function"==typeof e&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let n=t.options.restJoystick,i={};i.x=!0===n||!1!==n.x?0:t.instance.frontPosition.x,i.y=!0===n||!1!==n.y?0:t.instance.frontPosition.y,t.setPosition(e,i)}return t},Ka.prototype.setPosition=function(e,t){var n=this;n.frontPosition={x:t.x,y:t.y};var r={};r.front=Pz("transition",["top","left"],n.options.fadeTime+"ms");var s={front:{}};s.front={left:n.frontPosition.x+"px",top:n.frontPosition.y+"px"},n.applyStyles(r),n.applyStyles(s),n.restTimeout=setTimeout(function(){"function"==typeof e&&e.call(n),n.restCallback()},n.options.fadeTime)},Ka.prototype.restCallback=function(){var e=this,t={};t.front=Pz("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)},Ka.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},Ka.prototype.computeDirection=function(e){var r,s,o,t=e.angle.radian,n=Math.PI/4,i=Math.PI/2;if(t>n&&t<3*n&&!e.lockX?r="up":t>-n&&t<=n&&!e.lockY?r="left":t>3*-n&&t<=-n&&!e.lockX?r="down":e.lockY||(r="right"),e.lockY||(s=t>-i&&t<i?"left":"right"),e.lockX||(o=t>0?"up":"down"),e.force>this.options.threshold){var l,a={};for(l in this.direction)this.direction.hasOwnProperty(l)&&(a[l]=this.direction[l]);var c={};for(l in this.direction={x:s,y:o,angle:r},e.direction=this.direction,a)a[l]===this.direction[l]&&(c[l]=!0);if(c.x&&c.y&&c.angle)return e;(!c.x||!c.y)&&this.trigger("plain",e),c.x||this.trigger("plain:"+s,e),c.y||this.trigger("plain:"+o,e),c.angle||this.trigger("dir dir:"+r,e)}else this.resetDirection();return e};var HYe=Ka;function la(e,t){var n=this;n.nipples=[],n.idles=[],n.actives=[],n.ids=[],n.pressureIntervals={},n.manager=e,n.id=la.id,la.id+=1,n.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},n.config(t),("static"===n.options.mode||"semi"===n.options.mode)&&(n.options.multitouch=!1),n.options.multitouch||(n.options.maxNumberOfNipples=1);let i=getComputedStyle(n.options.zone.parentElement);return i&&"flex"===i.display&&(n.parentIsFlex=!0),n.updateBox(),n.prepareNipples(),n.bindings(),n.begin(),n.nipples}la.prototype=new Oz,la.constructor=la,la.id=0,la.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(n){if(void 0===n)return t[0];for(var i=0,r=t.length;i<r;i+=1)if(t[i].identifier===n)return t[i];return!1}},la.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"},la.prototype.begin=function(){var e=this,t=e.options;if("static"===t.mode){var n=e.createNipple(t.position,e.manager.getIdentifier());n.add(),e.idles.push(n)}},la.prototype.createNipple=function(e,t){var n=this,i=n.manager.scroll,r={},s=n.options;if(e.x&&e.y)r={x:e.x-(n.parentIsFlex?i.x:i.x+n.box.left),y:e.y-(n.parentIsFlex?i.y:i.y+n.box.top)};else if(e.top||e.right||e.bottom||e.left){var a=document.createElement("DIV");a.style.display="hidden",a.style.top=e.top,a.style.right=e.right,a.style.bottom=e.bottom,a.style.left=e.left,a.style.position="absolute",s.zone.appendChild(a);var l=a.getBoundingClientRect();s.zone.removeChild(a),r=e,e={x:l.left+i.x,y:l.top+i.y}}var c=new HYe(n,{color:s.color,size:s.size,threshold:s.threshold,fadeTime:s.fadeTime,dataOnly:s.dataOnly,restJoystick:s.restJoystick,restOpacity:s.restOpacity,mode:s.mode,identifier:t,position:e,zone:s.zone,frontPosition:{x:0,y:0},shape:s.shape});return s.dataOnly||(Cz(c.ui.el,r),Cz(c.ui.front,c.frontPosition)),n.nipples.push(c),n.trigger("added "+c.identifier+":added",c),n.manager.trigger("added "+c.identifier+":added",c),n.bindNipple(c),c},la.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},la.prototype.bindNipple=function(e){var t=this,i=function(r,s){t.trigger(r.type+" "+s.id+":"+r.type,s)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)},la.prototype.pressureFn=function(e,t,n){var i=this,r=0;clearInterval(i.pressureIntervals[n]),i.pressureIntervals[n]=setInterval(function(){var s=e.force||e.pressure||e.webkitForce||0;s!==r&&(t.trigger("pressure",s),i.trigger("pressure "+t.identifier+":pressure",s),r=s)}.bind(i),100)},la.prototype.onstart=function(e){var t=this,n=t.options,i=e;return e=Pre(e),t.updateBox(),Ez(e,function(s){t.actives.length<n.maxNumberOfNipples?t.processOnStart(s):i.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(o){if(Object.values(i.touches).findIndex(function(l){return l.identifier===o})<0){var a=[e[0]];a.identifier=o,t.processOnEnd(a)}}),t.actives.length<n.maxNumberOfNipples&&t.processOnStart(s))}),t.manager.bindDocument(),!1},la.prototype.processOnStart=function(e){var i,t=this,n=t.options,r=t.manager.getIdentifier(e),s=e.force||e.pressure||e.webkitForce||0,o={x:e.pageX,y:e.pageY},a=t.getOrCreate(r,o);a.identifier!==r&&t.manager.removeIdentifier(a.identifier),a.identifier=r;var l=function(d){d.trigger("start",d),t.trigger("start "+d.id+":start",d),d.show(),s>0&&t.pressureFn(e,d,d.identifier),t.processOnMove(e)};if((i=t.idles.indexOf(a))>=0&&t.idles.splice(i,1),t.actives.push(a),t.ids.push(a.identifier),"semi"!==n.mode)l(a);else{if(!(DT(o,a.position)<=n.catchDistance))return a.destroy(),void t.processOnStart(e);l(a)}return a},la.prototype.getOrCreate=function(e,t){var r,n=this,i=n.options;return/(semi|static)/.test(i.mode)?(r=n.idles[0])?(n.idles.splice(0,1),r):"semi"===i.mode?n.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1):r=n.createNipple(t,e)},la.prototype.processOnMove=function(e){var t=this,n=t.options,i=t.manager.getIdentifier(e),r=t.nipples.get(i),s=t.manager.scroll;if((e=>isNaN(e.buttons)?0!==e.pressure:0!==e.buttons)(e)){if(!r)return console.error("Found zombie joystick with ID "+i),void t.manager.removeIdentifier(i);if(n.dynamicPage){var o=r.el.getBoundingClientRect();r.position={x:s.x+o.left,y:s.y+o.top}}r.identifier=i;var a=r.options.size/2,l={x:e.pageX,y:e.pageY};n.lockX&&(l.y=r.position.y),n.lockY&&(l.x=r.position.x);var m,v,c=DT(l,r.position),d=((e,t)=>(e=>e*(180/Math.PI))(Math.atan2(t.y-e.y,t.x-e.x)))(l,r.position),h=wz(d),u=c/a,p={distance:c,position:l};if("circle"===r.options.shape?(m=Math.min(c,a),v=((e,t,n)=>{let i={x:0,y:0};return n=wz(n),i.x=e.x-t*Math.cos(n),i.y=e.y-t*Math.sin(n),i})(r.position,m,d)):(v=((e,t,n)=>({x:Math.min(Math.max(e.x,t.x-n),t.x+n),y:Math.min(Math.max(e.y,t.y-n),t.y+n)}))(l,r.position,a),m=DT(v,r.position)),n.follow){if(c>a){let P=l.y-v.y;r.position.x+=l.x-v.x,r.position.y+=P,r.el.style.top=r.position.y-(t.box.top+s.y)+"px",r.el.style.left=r.position.x-(t.box.left+s.x)+"px",c=DT(l,r.position)}}else l=v,c=m;var g=l.x-r.position.x,b=l.y-r.position.y;r.frontPosition={x:g,y:b},n.dataOnly||Cz(r.ui.front,r.frontPosition);var x={identifier:r.identifier,position:l,force:u,pressure:e.force||e.pressure||e.webkitForce||0,distance:c,angle:{radian:h,degree:d},vector:{x:g/a,y:-b/a},raw:p,instance:r,lockX:n.lockX,lockY:n.lockY};(x=r.computeDirection(x)).angle={radian:wz(180-d),degree:180-d},r.trigger("move",x),t.trigger("move "+r.id+":move",x)}else this.processOnEnd(e)},la.prototype.processOnEnd=function(e){var t=this,n=t.options,i=t.manager.getIdentifier(e),r=t.nipples.get(i),s=t.manager.removeIdentifier(r.identifier);!r||(n.dataOnly||r.hide(function(){"dynamic"===n.mode&&(r.trigger("removed",r),t.trigger("removed "+r.id+":removed",r),t.manager.trigger("removed "+r.id+":removed",r),r.destroy())}),clearInterval(t.pressureIntervals[r.identifier]),r.resetDirection(),r.trigger("end",r),t.trigger("end "+r.id+":end",r),t.ids.indexOf(r.identifier)>=0&&t.ids.splice(t.ids.indexOf(r.identifier),1),t.actives.indexOf(r)>=0&&t.actives.splice(t.actives.indexOf(r),1),/(semi|static)/.test(n.mode)?t.idles.push(r):t.nipples.indexOf(r)>=0&&t.nipples.splice(t.nipples.indexOf(r),1),t.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(t.manager.ids[s.id]=s.identifier))},la.prototype.onDestroyed=function(e,t){var n=this;n.nipples.indexOf(t)>=0&&n.nipples.splice(n.nipples.indexOf(t),1),n.actives.indexOf(t)>=0&&n.actives.splice(n.actives.indexOf(t),1),n.idles.indexOf(t)>=0&&n.idles.splice(n.idles.indexOf(t),1),n.ids.indexOf(t.identifier)>=0&&n.ids.splice(n.ids.indexOf(t.identifier),1),n.manager.removeIdentifier(t.identifier),n.manager.unbindDocument()},la.prototype.destroy=function(){var e=this;for(var t in e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(n){n.destroy()}),e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var GYe=la;function ul(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=Sre(),t.config(e),t.prepareCollections();var n=function(){var r;t.collections.forEach(function(s){s.forEach(function(o){r=o.el.getBoundingClientRect(),o.position={x:t.scroll.x+r.left,y:t.scroll.y+r.top}})})};if(typeof window>"u")return t.collections;IT(window,"resize",function(){Mre(n)});var i=function(){t.scroll=Sre()};return IT(window,"scroll",function(){Mre(i)}),t.collections}ul.prototype=new Oz,ul.constructor=ul,ul.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var n;return e.collections.every(function(i){return!(n=i.get(t))}),n}},ul.prototype.create=function(e){return this.createCollection(e)},ul.prototype.createCollection=function(e){var t=this,n=new GYe(t,e);return t.bindCollection(n),t.collections.push(n),n},ul.prototype.bindCollection=function(e){var t=this,i=function(r,s){t.trigger(r.type+" "+s.id+":"+r.type,s)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)},ul.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)},ul.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||!0===e)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)},ul.prototype.getIdentifier=function(e){var t;return e?void 0===(t=void 0===e.identifier?e.pointerId:e.identifier)&&(t=this.latest||0):t=this.index,void 0===this.ids[t]&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]},ul.prototype.removeIdentifier=function(e){var t={};for(var n in this.ids)if(this.ids[n]===e){t.id=n,t.identifier=this.ids[n],delete this.ids[n];break}return t},ul.prototype.onmove=function(e){return this.onAny("move",e),!1},ul.prototype.onend=function(e){return this.onAny("end",e),!1},ul.prototype.oncancel=function(e){return this.onAny("end",e),!1},ul.prototype.onAny=function(e,t){var i,n=this,r="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=Pre(t);var s=function(a,l,c){c.ids.indexOf(l)>=0&&(c[r](a),a._found_=!0)};return Ez(t,function(a){i=n.getIdentifier(a),Ez(n.collections,s.bind(null,a,i)),a._found_||n.removeIdentifier(i)}),!1},ul.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()},ul.prototype.onDestroyed=function(e,t){var n=this;if(n.collections.indexOf(t)<0)return!1;n.collections.splice(n.collections.indexOf(t),1)};var Dre=new ul,Ire=new Map,LC=new Map,u1=class{constructor(e,t,n,i){this.data=t;let{audio:r,volume:s,delay:o,loop:a}=t;if(!r)throw new Error("Missing property");let l="string"==typeof r?i.getAudio(r).src:r.data;this.audioPlayer=new CC({src:l,volume:s,delay:o,loop:a}),LC.has(n.uuid)?LC.get(n.uuid).push(this):LC.set(n.uuid,[this]),Ire.set(e,this)}playByToggle(){"stop"===this.data.toggle?"playing"===this.audioPlayer.status?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):"pause"===this.data.toggle?"playing"===this.audioPlayer.status?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},Az=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=Ire.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=LC.get(e);!t?.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(n=>n.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(n=>n.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...LC.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(n=>{n.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(n=>{n.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},Rre=class{constructor(e,t,n,i,r){if(this.data=t,this.shared=i,this.condition=r,"play"===t.interaction)this.interaction=new u1(e,t,n,i);else{if("pause"!==t.interaction&&"stop"!==t.interaction)throw new Error("Missing property");this.interaction=new Az(t)}}dispatchBasic(){if(!1===Oa(this.shared,this.condition))return!1;this.interaction instanceof u1?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(!1===Oa(this.shared,this.condition))return!1;this.interaction instanceof u1?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){if(!1===Oa(this.shared,this.condition))return!1;this.interaction instanceof u1&&("start"===e?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},kre=(e,t)=>t.some(n=>n instanceof RegExp?n.test(e):n===e),ZYe=class{constructor({url:e,context:t},n,i,r){if(this.controlsManager=n,this.shared=i,this.condition=r,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:function KYe(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return((e,{stripHash:t})=>{let n=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!n)throw new Error(`Invalid URL: ${e}`);let{type:i,data:r,hash:s}=n.groups,o=i.split(";");s=t?"":s;let a=!1;"base64"===o[o.length-1]&&(o.pop(),a=!0);let l=(o.shift()||"").toLowerCase(),c=[...o.map(d=>{let[h,u=""]=d.split("=").map(p=>p.trim());return"charset"===h&&(u=u.toLowerCase(),"us-ascii"===u)?"":`${h}${u?`=${u}`:""}`}).filter(Boolean)];return a&&c.push("base64"),(c.length>0||l&&"text/plain"!==l)&&c.unshift(l),`data:${c.join(";")},${a?r.trim():r}${s?`#${s}`:""}`})(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let n=e.startsWith("//");!n&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let i=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===i.protocol&&(i.protocol="http:"),t.forceHttps&&"http:"===i.protocol&&(i.protocol="https:"),t.stripAuthentication&&(i.username="",i.password=""),t.stripHash?i.hash="":t.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let s=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,o=0,a="";for(;;){let c=s.exec(i.pathname);if(!c)break;let d=c[0],h=c.index;a+=i.pathname.slice(o,h).replace(/\/{2,}/g,"/"),a+=d,o=h+d.length}a+=i.pathname.slice(o,i.pathname.length).replace(/\/{2,}/g,"/"),i.pathname=a}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let s=i.pathname.split("/");kre(s[s.length-1],t.removeDirectoryIndex)&&(s=s.slice(0,-1),i.pathname=s.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let s of[...i.searchParams.keys()])kre(s,t.removeQueryParameters)&&i.searchParams.delete(s);if(!0===t.removeQueryParameters&&(i.search=""),t.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}t.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let r=e;return e=i.toString(),!t.removeSingleSlash&&"/"===i.pathname&&!r.endsWith("/")&&""===i.hash&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===i.pathname)&&""===i.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),n&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}(e,{removeTrailingSlash:!1,removeSingleSlash:!1}),this.context=t??"tab"}dispatch(){if(!1===Oa(this.shared,this.condition))return!1;IF?window.location.assign(this.url):("tab"===this.context?window.open(this.url,"_blank"):"window"===this.context?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),this.controlsManager.orbitControls?.onPointerUp(zi[0]),function c9e(){zi.splice(0,zi.length)}())}},Nre=class{constructor(e,t,n,i,r){this.data=e,this.page=t,this.controlsManager=n,this.shared=i,this.condition=r,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=s=>{this.timeoutIdQueue.shift();let o=this.page.scene.find(s);if(void 0===o)return;let a=this.controlsManager.sharedGameControlGlobals.rapierWorld,l=!a||o.dataPatched.physics?.fusedBody;if(o.cloner){for(let c of o.cloner.children)l?(c.playModeVisible=!1,c.rigidBody&&"positioned"===o.dataPatched.physics?.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(c.rigidBody.collider(0).handle),a.removeRigidBody(c.rigidBody),c.rigidBody=void 0),c.bvhGeometry&&(c.bvhGeometry=void 0)):void 0===this.clone||this.clone===c?(c.playModeVisible=!1,c.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(c.rigidBody.collider(0).handle),a.removeRigidBody(c.rigidBody),c.rigidBody=void 0)):void 0===c.playModeVisible&&(c.playModeVisible=!0);(l||void 0===this.clone||!1===this.clone)&&(o.visible=!1,o.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(o.rigidBody.collider(0).handle),a.removeRigidBody(o.rigidBody),o.rigidBody=void 0),o.bvhGeometry&&(o.bvhGeometry=void 0))}else o.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(o.rigidBody.collider(0).handle),a.removeRigidBody(o.rigidBody),o.rigidBody=void 0),o.bvhGeometry&&(o.bvhGeometry=void 0),o.visible=!1;this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(void 0===a?c=>void 0!==c.bvhGeometry:c=>void 0!==c.rigidBody),o.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...e.objects]}dispatch(e){if(!1===Oa(this.shared,this.condition))return!1;this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay)):this.dispatchInner()}dispatchFromStart(){if(!1===Oa(this.shared,this.condition))return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},Lre=class{constructor(e,t,n,i,r){this.data=e,this.page=t,this.shared=n,this.eventManager=i,this.condition=r,this.shared=n}dispatch(){if(!1===Oa(this.shared,this.condition))return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{this.shared.reset(this.shared.data,!0),Hz(this.page,this.shared,!0),this.eventManager.reset(),this.eventManager.controlsManager.gameControl?.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},1e3*(this.data.delay??0))}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},Fre={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},Tz={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},QYe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],RT={CSS:{},springs:{}};function Su(e,t,n){return Math.min(Math.max(e,t),n)}function FC(e,t){return e.indexOf(t)>-1}function Dz(e,t){return e.apply(null,t)}var Vi={arr:function(e){return Array.isArray(e)},obj:function(e){return FC(Object.prototype.toString.call(e),"Object")},pth:function(e){return Vi.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||Vi.svg(e))},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return Vi.hex(e)||Vi.rgb(e)||Vi.hsl(e)},key:function(e){return!Fre.hasOwnProperty(e)&&!Tz.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function Bre(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(n){return parseFloat(n)}):[]}function zre(e,t){var n=Bre(e),i=Su(Vi.und(n[0])?1:n[0],.1,100),r=Su(Vi.und(n[1])?100:n[1],.1,100),s=Su(Vi.und(n[2])?10:n[2],.1,100),o=Su(Vi.und(n[3])?0:n[3],.1,100),a=Math.sqrt(r/i),l=s/(2*Math.sqrt(r*i)),c=l<1?a*Math.sqrt(1-l*l):0,d=1,h=l<1?(l*a-o)/c:-o+a;function u(m){var v=t?t*m/1e3:m;return v=l<1?Math.exp(-v*l*a)*(d*Math.cos(c*v)+h*Math.sin(c*v)):(d+h*v)*Math.exp(-v*a),0===m||1===m?m:1-v}return t?u:function p(){var m=RT.springs[e];if(m)return m;for(var v=1/6,g=0,b=0;;)if(1===u(g+=v)){if(++b>=16)break}else b=0;var x=g*v*1e3;return RT.springs[e]=x,x}}function JYe(e){return void 0===e&&(e=10),function(t){return Math.ceil(Su(t,1e-6,1)*e)*(1/e)}}var e$e=function(){var e=11,t=1/(e-1);function n(d,h){return 1-3*h+3*d}function i(d,h){return 3*h-6*d}function r(d){return 3*d}function s(d,h,u){return((n(h,u)*d+i(h,u))*d+r(h))*d}function o(d,h,u){return 3*n(h,u)*d*d+2*i(h,u)*d+r(h)}return function c(d,h,u,p){if(0<=d&&d<=1&&0<=u&&u<=1){var m=new Float32Array(e);if(d!==h||u!==p)for(var v=0;v<e;++v)m[v]=s(v*t,d,u);return function(b){return d===h&&u===p||0===b||1===b?b:s(function g(b){for(var x=0,w=1,P=e-1;w!==P&&m[w]<=b;++w)x+=t;--w;var D=x+(b-m[w])/(m[w+1]-m[w])*t,R=o(D,d,u);return R>=.001?function l(d,h,u,p){for(var m=0;m<4;++m){var v=o(h,u,p);if(0===v)return h;h-=(s(h,u,p)-d)/v}return h}(b,D,d,u):0===R?D:function a(d,h,u,p,m){var v,g,b=0;do{(v=s(g=h+(u-h)/2,p,m)-d)>0?u=g:h=g}while(Math.abs(v)>1e-7&&++b<10);return g}(b,x,x+t,d,u)}(b),h,p)}}}}(),Ure=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var r,s=4;i<((r=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((3*r-2)/22-i,2)}},Elastic:function(i,r){void 0===i&&(i=1),void 0===r&&(r=.5);var s=Su(i,1,10),o=Su(r,.1,2);return function(a){return 0===a||1===a?a:-s*Math.pow(2,10*(a-1))*Math.sin((a-1-o/(2*Math.PI)*Math.asin(1/s))*(2*Math.PI)/o)}}};return["Quad","Cubic","Quart","Quint","Expo"].forEach(function(i,r){t[i]=function(){return function(s){return Math.pow(s,r+2)}}}),Object.keys(t).forEach(function(i){var r=t[i];e["easeIn"+i]=r,e["easeOut"+i]=function(s,o){return function(a){return 1-r(s,o)(1-a)}},e["easeInOut"+i]=function(s,o){return function(a){return a<.5?r(s,o)(2*a)/2:1-r(s,o)(-2*a+2)/2}}}),e}();function Iz(e,t){if(Vi.fnc(e))return e;var n=e.split("(")[0],i=Ure[n],r=Bre(e);switch(n){case"spring":return zre(e,t);case"cubicBezier":return Dz(e$e,r);case"steps":return Dz(JYe,r);default:return Dz(i,r)}}function Vre(e){try{return document.querySelectorAll(e)}catch{return}}function kT(e,t){for(var n=e.length,i=arguments.length>=2?arguments[1]:void 0,r=[],s=0;s<n;s++)if(s in e){var o=e[s];t.call(i,o,s,e)&&r.push(o)}return r}function NT(e){return e.reduce(function(t,n){return t.concat(Vi.arr(n)?NT(n):n)},[])}function jre(e){return Vi.arr(e)?e:(Vi.str(e)&&(e=Vre(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function Rz(e,t){return e.some(function(n){return n===t})}function kz(e){var t={};for(var n in e)t[n]=e[n];return t}function Nz(e,t){var n=kz(e);for(var i in e)n[i]=t.hasOwnProperty(i)?t[i]:e[i];return n}function LT(e,t){var n=kz(e);for(var i in t)n[i]=Vi.und(e[i])?t[i]:e[i];return n}function cm(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function Lz(e,t){return Vi.fnc(e)?e(t.target,t.id,t.total):e}function Lp(e,t){return e.getAttribute(t)}function Fz(e,t,n){if(Rz([n,"deg","rad","turn"],cm(t)))return t;var r=RT.CSS[t+n];if(!Vi.und(r))return r;var o=document.createElement(e.tagName),a=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=100+n;var l=100/o.offsetWidth;a.removeChild(o);var c=l*parseFloat(t);return RT.CSS[t+n]=c,c}function Hre(e,t,n){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return n?Fz(e,r,n):r}}function Bz(e,t){return Vi.dom(e)&&!Vi.inp(e)&&(Lp(e,t)||Vi.svg(e)&&e[t])?"attribute":Vi.dom(e)&&Rz(QYe,t)?"transform":Vi.dom(e)&&"transform"!==t&&Hre(e,t)?"css":null!=e[t]?"object":void 0}function Gre(e){if(Vi.dom(e)){for(var r,t=e.style.transform||"",n=/(\w+)\(([^)]*)\)/g,i=new Map;r=n.exec(t);)i.set(r[1],r[2]);return i}}function zz(e,t,n,i){switch(Bz(e,t)){case"transform":return function o$e(e,t,n,i){var r=FC(t,"scale")?1:0+function s$e(e){return FC(e,"translate")||"perspective"===e?"px":FC(e,"rotate")||FC(e,"skew")?"deg":void 0}(t),s=Gre(e).get(t)||r;return n&&(n.transforms.list.set(t,s),n.transforms.last=t),i?Fz(e,s,i):s}(e,t,i,n);case"css":return Hre(e,t,n);case"attribute":return Lp(e,t);default:return e[t]||0}}function Uz(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var i=cm(e)||0,r=parseFloat(t),s=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return r+s+i;case"-":return r-s+i;case"*":return r*s+i}}function Wre(e,t){if(Vi.col(e))return function r$e(e){return Vi.rgb(e)?function t$e(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}(e):Vi.hex(e)?function n$e(e){var n=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,l,c,d){return l+l+c+c+d+d}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return"rgba("+parseInt(i[1],16)+","+parseInt(i[2],16)+","+parseInt(i[3],16)+",1)"}(e):Vi.hsl(e)?function i$e(e){var a,l,c,t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),n=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100,s=t[4]||1;function o(u,p,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?u+6*(p-u)*m:m<.5?p:m<2/3?u+(p-u)*(2/3-m)*6:u}if(0==i)a=l=c=r;else{var d=r<.5?r*(1+i):r+i-r*i,h=2*r-d;a=o(h,d,n+1/3),l=o(h,d,n),c=o(h,d,n-1/3)}return"rgba("+255*a+","+255*l+","+255*c+","+s+")"}(e):void 0}(e);if(/\s/g.test(e))return e;var n=cm(e),i=n?e.substr(0,e.length-n.length):e;return t?i+t:i}function Vz(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function qre(e){for(var i,t=e.points,n=0,r=0;r<t.numberOfItems;r++){var s=t.getItem(r);r>0&&(n+=Vz(i,s)),i=s}return n}function Xre(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function a$e(e){return 2*Math.PI*Lp(e,"r")}(e);case"rect":return function l$e(e){return 2*Lp(e,"width")+2*Lp(e,"height")}(e);case"line":return function c$e(e){return Vz({x:Lp(e,"x1"),y:Lp(e,"y1")},{x:Lp(e,"x2"),y:Lp(e,"y2")})}(e);case"polyline":return qre(e);case"polygon":return function d$e(e){var t=e.points;return qre(e)+Vz(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function Yre(e,t){var n=t||{},i=n.el||function u$e(e){for(var t=e.parentNode;Vi.svg(t)&&Vi.svg(t.parentNode);)t=t.parentNode;return t}(e),r=i.getBoundingClientRect(),s=Lp(i,"viewBox"),o=r.width,a=r.height,l=n.viewBox||(s?s.split(" "):[0,0,o,a]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o/l[2],h:a/l[3]}}function f$e(e,t){function n(a){return void 0===a&&(a=0),e.el.getPointAtLength(t+a>=1?t+a:0)}var i=Yre(e.el,e.svg),r=n(),s=n(-1),o=n(1);switch(e.property){case"x":return(r.x-i.x)*i.w;case"y":return(r.y-i.y)*i.h;case"angle":return 180*Math.atan2(o.y-s.y,o.x-s.x)/Math.PI}}function $re(e,t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=Wre(Vi.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(n)?i.match(n).map(Number):[0],strings:Vi.str(e)||t?i.split(n):[]}}function Kre(e){return kT(e?NT(Vi.arr(e)?e.map(jre):jre(e)):[],function(n,i,r){return r.indexOf(n)===i})}function Zre(e){var t=Kre(e);return t.map(function(n,i){return{target:n,id:i,total:t.length,transforms:{list:Gre(n)}}})}function m$e(e,t){var n=kz(t);if(/^spring/.test(n.easing)&&(n.duration=zre(n.easing)),Vi.arr(e)){var i=e.length;2!==i||Vi.obj(e[0])?Vi.fnc(t.duration)||(n.duration=t.duration/i):e={value:e}}var s=Vi.arr(e)?e:[e];return s.map(function(o,a){var l=Vi.obj(o)&&!Vi.pth(o)?o:{value:o};return Vi.und(l.delay)&&(l.delay=a?0:t.delay),Vi.und(l.endDelay)&&(l.endDelay=a===s.length-1?t.endDelay:0),l}).map(function(o){return LT(o,n)})}var Qre={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,i,r){if(i.list.set(t,n),t===i.last||r){var s="";i.list.forEach(function(o,a){s+=a+"("+o+") "}),e.style.transform=s}}};function Jre(e,t){Zre(e).forEach(function(i){for(var r in t){var s=Lz(t[r],i),o=i.target,a=cm(s),l=zz(o,r,a,i),d=Uz(Wre(s,a||cm(l)),l),h=Bz(o,r);Qre[h](o,r,d,i.transforms,!0)}})}function x$e(e,t){return kT(NT(e.map(function(n){return t.map(function(i){return function b$e(e,t){var n=Bz(e.target,t.name);if(n){var i=function _$e(e,t){var n;return e.tweens.map(function(i){var r=function y$e(e,t){var n={};for(var i in e){var r=Lz(e[i],t);Vi.arr(r)&&1===(r=r.map(function(s){return Lz(s,t)})).length&&(r=r[0]),n[i]=r}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(i,t),s=r.value,o=Vi.arr(s)?s[1]:s,a=cm(o),l=zz(t.target,e.name,a,t),c=n?n.to.original:l,d=Vi.arr(s)?s[0]:c,h=cm(d)||cm(l),u=a||h;return Vi.und(o)&&(o=c),r.from=$re(d,u),r.to=$re(Uz(o,d),u),r.start=n?n.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=Iz(r.easing,r.duration),r.isPath=Vi.pth(s),r.isColor=Vi.col(r.from.original),r.isColor&&(r.round=1),n=r,r})}(t,e),r=i[i.length-1];return{type:n,property:t.name,animatable:e,tweens:i,duration:r.end,delay:i[0].delay,endDelay:r.endDelay}}}(n,i)})})),function(n){return!Vi.und(n)})}function ese(e,t){var n=e.length,i=function(s){return s.timelineOffset?s.timelineOffset:0},r={};return r.duration=n?Math.max.apply(Math,e.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0,l=s.pingPongEndDelayCorrection??0;return i(s)+o+a+l+s.duration*(s.loop??1)})):t.duration,r.delay=n?Math.min.apply(Math,e.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0;return i(s)+o+a+s.delay})):t.delay,r.endDelay=n?r.duration-Math.max.apply(Math,e.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0,l=s.pingPongEndDelayCorrection??0;return i(s)+o+a+s.duration*(s.loop??1)-s.endDelay-l})):t.endDelay,r}var FT,tse=0,Lh=[],nse=[],M$e=function(){function e(){FT=requestAnimationFrame(t)}function t(n){var i=Lh.length;if(i){for(var r=0;r<i;){var s=Lh[r];s.paused?(Lh.splice(r,1),i-=1):(s.tick(n),r++)}e()}else FT=cancelAnimationFrame(FT)}return e}();function ca(e){void 0===e&&(e={});var r,s,t=0,n=0,i=0,o=0,a=null;function l(R){var N=window.Promise&&new Promise(function(k){return a=k});return R.finished=N,N}var c=function w$e(e){var t=Nz(Fre,e),n=Nz(Tz,e),i=function v$e(e,t){var n=[],i=t.keyframes;for(var r in i&&(t=LT(function g$e(e){for(var t=kT(NT(e.map(function(s){return Object.keys(s)})),function(s){return Vi.key(s)}).reduce(function(s,o){return s.indexOf(o)<0&&s.push(o),s},[]),n={},i=function(s){var o=t[s];n[o]=e.map(function(a){var l={};for(var c in a)Vi.key(c)?c==o&&(l.value=a[c]):l[c]=a[c];return l})},r=0;r<t.length;r++)i(r);return n}(i),t)),t)Vi.key(r)&&n.push({name:r,tweens:m$e(t[r],e)});return n}(n,e),r=Zre(e.targets),s=x$e(r,i),o=ese(s,n),a=tse;return tse++,LT(t,{id:a,children:[],animatables:r,animations:s,duration:o.duration,delay:o.delay,endDelay:o.endDelay,startOnceDelay:n.startOnceDelay,pingPongDelayCorrection:n.pingPongDelayCorrection,pingPongEndDelayCorrection:n.pingPongEndDelayCorrection})}(e);function h(){var R=c.direction;"alternate"!==R&&(c.direction="normal"!==R?"normal":"reverse"),c.reversed=!c.reversed,s.forEach(function(N){(1===N.loop||N.loop%2==0)&&(N.reversed=c.reversed)})}function p(R){return c.reversed?c.duration-R:R}function v(R,N,k=!1){N&&N.seek(c.reversed?N.duration*N.loop-(R-N.timelineOffset-N.pingPongDelayCorrection):R-N.timelineOffset-N.startOnceDelay-N.pingPongDelayCorrection,k)}function b(R){var N=0,k=c.animations,L=k.length;for("alternate"!==c.direction&&"alternate"===c.parent?.direction?!1===c.parent?.rewind&&!0===c.reversePlayback&&!1===c.rewind&&(R=c.parent?.reversed&&"alternate"===c.direction?c.duration-c.delay+c.endDelay-R:c.duration+c.delay-c.endDelay-R):A(!1,c.parent?.rewind,c.rewind,c.parent?.reversePlayback,c.reversePlayback)&&(R=c.parent?.reversed&&"alternate"===c.direction?c.duration-c.delay+c.endDelay-R:c.duration+c.delay-c.endDelay-R);N<L;){var Q=k[N],le=Q.animatable,ae=Q.tweens,he=ae.length-1,xe=ae[he];let ft;he&&(xe=kT(ae,function(it){return R<it.end})[0]||xe),ft=c.parent?.reversed&&"alternate"===c.direction?Su(R-xe.start-xe.endDelay,0,xe.duration)/xe.duration:Su(R-xe.start-xe.delay,0,xe.duration)/xe.duration;for(var _e=isNaN(ft)?1:xe.easing(ft),be=xe.to.strings,me=xe.round,Te=[],Le=xe.to.numbers.length,ke=void 0,Re=0;Re<Le;Re++){var Qe=void 0;let it,Nt;"alternate"!==c.direction?!1===c.parent?.rewind&&!0===c.reversePlayback&&!1===c.rewind?(it=xe.to.numbers[Re],Nt=xe.from.numbers[Re]||0):(Nt=xe.to.numbers[Re],it=xe.from.numbers[Re]||0):A(!0,c.parent?.rewind,c.rewind,c.parent?.reversePlayback,c.reversePlayback)?(it=xe.to.numbers[Re],Nt=xe.from.numbers[Re]||0):(Nt=xe.to.numbers[Re],it=xe.from.numbers[Re]||0),Qe=xe.isPath?f$e(xe.value,_e*Nt):it+_e*(Nt-it),me&&(xe.isColor&&Re>2||(Qe=Math.round(Qe*me)/me)),Te.push(Qe)}var Pe=be.length;if(Pe){ke=be[0];for(var Be=0;Be<Pe;Be++){var Ze=be[Be+1],$e=Te[Be];isNaN($e)||(ke+=Ze?$e+Ze:$e+" ")}}else ke=Te[0];Qre[Q.type](le.target,Q.property,ke,le.transforms),Q.currentValue=ke,N++}}function x(R){c[R]&&!c.passThrough&&c[R](c)}l(c);let P={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function A(R,N,k,L,Q){return P[R<<4|N<<3|k<<2|L<<1|Q]}function D(R,N=!1){var k=c.duration;let L=c.delay,Q=k-c.endDelay;c.parent?.reversed&&"alternate"===c.direction&&(L=c.endDelay,Q=k-c.delay);var le=p(R);if(c.progress=Su(le/k*100,0,100),N||(c.reversePlayback=le<c.currentTime),o&&function g(R,N=!1){if(c.reversed)for(var k=o;k--;)v(R,s[k],N);else for(var L=0;L<o;L++)v(R,s[L],N)}(le,N),!c.began&&c.currentTime>=0&&(c.began=!0,x("begin")),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,x("loopBegin")),(c.reversed||le>=0)&&le<=L&&0!==c.currentTime&&(b(0),x("change")),(le>=Q&&c.currentTime!==k+c.pingPongDelayCorrection||!k)&&(b(k),x("change")),le>L&&le<Q?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,x("changeBegin")),b(le),x("change")):c.changeBegan?(c.changeCompleted=!0,c.changeBegan=!1,x("change"),o&&x("timelineChangeComplete")):c.began&&le>Q&&x("changeComplete"),c.currentTime=Su(le,0,k+c.pingPongDelayCorrection),c.began&&x("update"),R>=k)if(function w(){c.remaining&&!0!==c.remaining&&c.remaining--}(),c.remaining){t+=o?c.duration/ca.speed:c.duration;for(let ae of s)ae.setStartTime(0),ae.remaining=ae.loop;x("loopComplete"),c.loopBegan=!1,"alternate"===c.direction?h():o&&function u(){c.direction="normal",c.reversed=!1,s.forEach(function(R){return R.reversed=!1})}()}else c.paused=!0,c.completed||(c.completed=!0,x("loopComplete"),x("complete"),!c.passThrough&&"Promise"in window&&(a(),l(c)))}return c.reset=function(){var R=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed="reverse"===R,c.remaining=c.loop;for(var N=o=(s=c.children).length;N--;)c.children[N].reset();b(c.reversed?c.duration:0)},c.setStartTime=function(R){t=R},c.set=function(R,N){return Jre(R,N),c},c.tick=function(R){i=R,t||(t=i),D((i+(n-t))*ca.speed)},c.seek=function(R,N=!1){D(R-t,N)},c.pause=function(R){c.paused=!0,o&&(r=R??performance.now())},c.play=function(R){!c.paused||(c.completed&&c.reset(),c.paused=!1,Lh.push(c),o&&void 0!==r&&(t+=(R??performance.now())-r),FT||M$e())},c.reverse=function(){h(),c.completed=!c.reversed,function m(){t=0,n=p(c.currentTime)*(1/ca.speed)}()},c.restart=function(){c.reset(),c.play()},c.reset(),c.autoplay&&c.play(),c}function ise(e,t){for(var n=t.length;n--;)Rz(e,t[n].animatable.target)&&t.splice(n,1)}typeof document<"u"&&document.addEventListener("visibilitychange",function C$e(e){document.hidden?(Lh.forEach(function(t){return t.pause(e.timeStamp)}),nse=Lh.slice(0),ca.running=Lh=[]):nse.forEach(function(t){return t.play(e.timeStamp)})}),ca.version="3.2.0",ca.speed=1,ca.running=Lh,ca.remove=function P$e(e){for(var t=Kre(e),n=Lh.length;n--;){var i=Lh[n],r=i.animations,s=i.children;ise(t,r);for(var o=s.length;o--;){var a=s[o],l=a.animations;ise(t,l),!l.length&&!a.children.length&&s.splice(o,1)}!r.length&&!s.length&&i.pause()}},ca.get=zz,ca.set=Jre,ca.convertPx=Fz,ca.path=function p$e(e,t){var n=Vi.str(e)?Vre(e)[0]:e,i=t||100;return function(r){return{property:r,el:n,svg:Yre(n),totalLength:Xre(n)*(i/100)}}},ca.setDashoffset=function h$e(e){var t=Xre(e);return e.setAttribute("stroke-dasharray",t),t},ca.stagger=function S$e(e,t){void 0===t&&(t={});var n=t.direction||"normal",i=t.easing?Iz(t.easing):null,r=t.grid,s=t.axis,o=t.from||0,a="first"===o,l="center"===o,c="last"===o,d=Vi.arr(e),h=parseFloat(d?e[0]:e),u=d?parseFloat(e[1]):0,p=cm(d?e[1]:e)||0,m=t.start||0+(d?h:0),v=[],g=0;return function(b,x,w){if(a&&(o=0),l&&(o=(w-1)/2),c&&(o=w-1),!v.length){for(var P=0;P<w;P++){if(r){var A=l?(r[0]-1)/2:o%r[0],D=l?(r[1]-1)/2:Math.floor(o/r[0]),k=A-P%r[0],L=D-Math.floor(P/r[0]),Q=Math.sqrt(k*k+L*L);"x"===s&&(Q=-k),"y"===s&&(Q=-L),v.push(Q)}else v.push(Math.abs(o-P));g=Math.max.apply(Math,v)}i&&(v=v.map(function(ae){return i(ae/g)*g})),"reverse"===n&&(v=v.map(function(ae){return s?ae<0?-1*ae:-ae:Math.abs(g-ae)}))}return m+(d?(u-h)/g:h)*(Math.round(100*v[x])/100)+p}},ca.timeline=function E$e(e){void 0===e&&(e={});var t=ca(e);return t.duration=0,t.add=function(n,i){var r=Lh.indexOf(t),s=t.children;function o(u){u.passThrough=!0}r>-1&&Lh.splice(r,1);for(var a=0;a<s.length;a++)o(s[a]);var l=LT(n,Nz(Tz,e));l.targets=l.targets||e.targets;var c=t.duration;l.autoplay=!1,l.timelineOffset=Vi.und(i)?c:Uz(i,c),o(t);var d=ca(l);o(d),s.push(d),d.parent=t;var h=ese(s,e);return t.delay=h.delay,t.endDelay=h.endDelay,t.duration=h.duration,!0===d.loop&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},ca.easing=Iz,ca.penner=Ure,ca.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var rse=ca,sse=new oe,ose=new oe,ase=new Qi;function p1(e,t,n,i,r,s){let o=n[e]?n[e]:void 0,a=i[e];if(null==a)return;let l=null!=o?"string"==typeof o?Number(r.getVariable(o)??0):o:t[e],c="string"==typeof a?Number(r.getVariable(a)??0):a;return l!==c?{update:d=>{let h=gi.lerp(l,c,d);t[e]=s?Math.trunc(h):h},start:()=>{t[e]=l},end:()=>{t[e]=c}}:void 0}function lse(e,t,n,i,r,s){let a=i[e];if(!a)return;let c=[...(n[e]?n[e]:void 0)??t[e]].map(h=>"string"==typeof h?Number(r.getVariable(h)??0):h),d=[...a].map(h=>"string"==typeof h?Number(r.getVariable(h)??0):h);return c.length!==d.length||IJ(c,d)?void 0:{update:h=>{c.forEach((u,p)=>{let m=gi.lerp(u,d[p],h);t[e][p]=s?Math.trunc(m):m})},start:()=>{Object.assign(t[e],c)},end:()=>{Object.assign(t[e],d)}}}function BT(e,t,n){return t.forEach((i,r)=>{e.setComponent(r,"string"==typeof i?Number(n.getVariable(i)??0):i)}),e}function cse(e,t,n,i,r){let s=n[e]?n[e]:void 0,o=i[e];if(!o)return;let a=t[e],l=s?BT(new oe,s,r):a.clone(),c=BT(new oe,o,r);return l.equals(c)?void 0:{update:d=>{a.lerpVectors(l,c,d)},start:()=>{a.copy(l)},end:()=>{a.copy(c)}}}function Yg(e,t,n,i,r){return"number"==typeof t[e]?p1(e,t,n??{},i,r):Array.isArray(t[e])?lse(e,t,n??{},i,r):void 0}function dse(e,t,n,i){let r=[],s=Hb(n,i)||!!t.layers&&Hb(t,i);r.push(function W$e(e,t){return{update:()=>{e.transparent=t}}}(e,s));for(let o of e.layers){let a=t.layers?.data(o.uuid),l=n.layers.data(o.uuid);if(!l||"light"!==o.type&&(!(o.visible??1)||!(l.visible??1)))continue;let c=o.getNames().filter(d=>!jee.some(h=>d.includes(h)));for(let d of c)try{let u,h=o.getValue(d);if("colors"===d)u=H$e(o,a,l,d);else if(Array.isArray(h))"steps"===d&&(u=j$e(o,a,l,d));else if("number"==typeof h)u=F$e(o,a,l,d,i);else{if("boolean"==typeof h)continue;h instanceof tt?u=B$e(o,a,l,d):h instanceof oe?u=z$e(o,a,l,d,i):h instanceof nd?u=V$e(o,a,l,d,i):h instanceof Di?u=U$e(o,a,l,d,i):"isTexture"in h&&(u=G$e(o,a,l,d))}u&&(Array.isArray(u)?r.push(...u):r.push(u))}catch(h){console.error(`lerpMaterial: unexpected material layer for ${d}`,h)}}return r}function F$e(e,t,n,i,r){if(!e.hasValue(i)||!(i in n))return;let s=t?t[i]:e.getValue(i),o=n[i],a="string"==typeof s?Number(r.getVariable(s)??0):s,l="string"==typeof o?Number(r.getVariable(o)??0):o;return a!==l?{update:c=>{e.setValue(i,gi.lerp(a,l,c))},start:()=>{e.setValue(i,a)},end:()=>{e.setValue(i,l)}}:void 0}function B$e(e,t,n,i){if(!e.hasValue(i)||!(i in n))return;let r=e.getValue(i),s=t?(new tt).fromArray(t[i]):r.clone(),o=(new tt).fromArray(n[i]);return s.equals(o)?void 0:{update:a=>{r.lerpVectors(s,o,a)},start:()=>{r.copy(s)},end:()=>{r.copy(o)}}}function z$e(e,t,n,i,r){if(!e.hasValue(i)||!(i in n))return;let s=e.getValue(i),o=t?t[i]:void 0,a=n[i],l=o?BT(new oe,o,r):s.clone(),c=BT(new oe,a,r);return l.equals(c)?void 0:{update:d=>{s.lerpVectors(l,c,d)},start:()=>{s.copy(l)},end:()=>{s.copy(c)}}}function U$e(e,t,n,i,r){if(!e.hasValue(i)||!(i in n))return;let s=t?t[i]:void 0,o=n[i],a=e.getValue(i),l=s?"string"==typeof s?r.getColor(s).clone():(new Di).setRGB(s.r,s.g,s.b):a.clone(),c="string"==typeof o?r.getColor(o).clone():(new Di).setRGB(o.r,o.g,o.b);if(l.equals(c))return;let d=a.clone();return{update:h=>{e.getValue(i)!==d&&e.setValue(i,d),d.lerpColors(l,c,h)},start:()=>{d.copy(l)},end:()=>{d.copy(c)}}}function V$e(e,t,n,i,r){if(!e.hasValue(i)||!(i in n))return;let s=t?t[i]:void 0,o=n[i],a=e.getValue(i),l=s?"string"==typeof s?r.getColor(s).clone():(new Di).setRGB(s.r,s.g,s.b):a.clone(),c="string"==typeof o?r.getColor(o).clone():new nd(o.r,o.g,o.b,o.a);if(l.equals(c))return;let d=a.clone();return{update:h=>{e.getValue(i)!==d&&e.setValue(i,d),d.lerpColors(l,c,h)},start:()=>{d.copy(l)},end:()=>{d.copy(c)}}}function j$e(e,t,n,i="steps"){if(!e.hasValue(i)||!(i in n))return;let r=[],s=e.getValue(i),o=t?t[i]:s,a=n[i];for(let l=0;l<s.length;++l){let c=o[l],d=a[l];c!==d&&r.push({update:h=>{s[l]=gi.lerp(c,d,h)},start:()=>{s[l]=c},end:()=>{s[l]=d}})}return r.length?r:void 0}function H$e(e,t,n,i="colors"){if(!e.hasValue(i)||!(i in n))return;let r=[],s=e.getValue(i),o=t?t[i]:s.map(l=>l.toArray()),a=n[i];for(let l=0;l<s.length;++l){let c=[...o[l]],d=[...a[l]];EA.isEqual(c,d)||r.push({update:h=>{s[l].fromArray(EA.lerp(c,d,h))},start:()=>{s[l].fromArray(c)},end:()=>{s[l].fromArray(d)}})}return r.length?r:void 0}function G$e(e,t,n,i="texture"){if(!e.hasValue(i)||!(i in n))return;let r=e.getNode("mat");if(!r)return;let s=t?t[i]:r,o=n[i],a=[...s.repeat],l=[...s.offset],c=[...o.repeat],d=[...o.offset];return lb.isEqual(a,c)&&lb.isEqual(l,d)?void 0:{update:h=>{r.repeat=lb.lerp(a,c,h),r.offset=lb.lerp(l,d,h),r.updateMatrix()},start:()=>{r.repeat=[...a],r.offset=[...l],r.updateMatrix()},end:()=>{r.repeat=[...c],r.offset=[...d],r.updateMatrix()}}}var jz=new oe,hse=new cl;function use(e,t,n,i,r){let s=[];return e.data.visible&&s.push(...function q$e(e,t,n,i,r){let o,a,l,c,d,h,s=[],u={slide:t.pathSnapping?.slide??e.updatedPathSnapping?.slide??e.dataPatched.pathSnapping?.slide??0,offset:t.pathSnapping?.offset??e.updatedPathSnapping?.offset??e.dataPatched.pathSnapping?.offset??0};if(d=p1("slide",u,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,n.pathSnapping??e.dataPatched.pathSnapping,r),d&&s.push(d),h=p1("offset",u,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,n.pathSnapping??e.dataPatched.pathSnapping,r),h&&s.push(h),!d&&!h&&(o=cse("position",e,t,n,r),o&&s.push(o),a=cse("scale",e,t,n,r),a&&s.push(a),l=function X$e(e,t,n,i,r){let s=t?.rotation?t.rotation.map(d=>("string"==typeof d?Number(r.getVariable(d)??0):d)*gi.DEG2RAD):void 0,o=n.rotation?.map(d=>("string"==typeof d?Number(r.getVariable(d)??0):d)*gi.DEG2RAD);if(!o)return;let a=s?(new oe).fromArray(s):(new oe).setFromEuler(e.rotation),l=(new oe).fromArray(o);if(a.equals(l))return;let c=jz.subVectors(l,a);if(i&&c.toArray().every(d=>Math.abs(d)<2*Math.PI)){let d=(new Qi).setFromEuler(hse.setFromVector3(a)),h=(new Qi).setFromEuler(hse.setFromVector3(l));return{update:u=>{!function O$e(e,t,n,i){if(0===i)return n.copy(e);if(1===i)return n.copy(t);let r=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(r>=1)return n.copy(e);let s=1-r*r;if(s<=Number.EPSILON){let d=1-i;return n.w=d*e.w+i*t.w,n.x=d*e.x+i*t.x,n.y=d*e.y+i*t.y,n.z=d*e.z+i*t.z,n.normalize(),n}let o=Math.sqrt(s),a=Math.atan2(o,r),l=Math.sin((1-i)*a)/o,c=Math.sin(i*a)/o;n.w=e.w*l+t.w*c,n.x=e.x*l+t.x*c,n.y=e.y*l+t.y*c,n.z=e.z*l+t.z*c}(d,h,e.quaternion,u)},start:()=>{e.rotation.setFromVector3(a)},end:()=>{e.rotation.setFromVector3(l)}}}return{update:d=>{jz.lerpVectors(a,l,d),e.rotation.setFromVector3(jz)},start:()=>{e.rotation.setFromVector3(a)},end:()=>{e.rotation.setFromVector3(l)}}}(e,t,n,i,r),l&&s.push(l),c=function A$e(e,t,n,i){let r=n[e]?n[e]:void 0,s=i[e];if(!s)return;let o=t[e],a=r?(new vn).fromArray(r):o.clone(),l=new oe,c=new Qi,d=new oe;a.decompose(l,c,d);let h=(new vn).fromArray(s),u=new oe,p=new Qi,m=new oe;return h.decompose(u,p,m),a.equals(h)?void 0:{update:v=>{ase.slerpQuaternions(c,p,v),sse.lerpVectors(l,u,v),ose.lerpVectors(d,m,v),o.compose(sse,ase,ose)},start:()=>{o.compose(l,c,d)},end:()=>{o.compose(u,p,m)}}}("hiddenMatrix",e,t,n),c&&s.push(c)),o||a||l||c||d||h){let p=()=>{e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),e.parent?.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),Cu(e)&&om(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,u))};s.push({update:p,start:p,end:p})}return s}(e,t,n,r,i)),e.data.visible&&s.push(...function Y$e(e,t,n,i){let r=[];if(!("cloner"in n)||!e.cloner)return r;let s=e.cloner,o="cloner"in t?t.cloner:{},a=n.cloner;Ree.forEach(p=>{let m;m="count"===p?p1("count",s.parameters,o,a,i,!0):Yg(p,s.parameters,o??{},a,i),m&&r.push(m)});let l=function $$e(e,t,n,i){if("radial"!==e.parameters.type)return;let r=t.radial,s=n.radial;if(!s)return;let o=e.parameters.radial,a=[];return kee.forEach(l=>{let c=Yg(l,o,r??{},s,i);c&&a.push(c)}),a}(s,o,a,i);l?.length&&r.push(...l);let c=function K$e(e,t,n,i){if("linear"!==e.parameters.type)return;let r=t.linear,s=n.linear;if(!s)return;let o=[],a=e.parameters.linear;return Nee.forEach(l=>{let c=Yg(l,a,r??{},s,i);c&&o.push(c)}),o}(s,o,a,i);c?.length&&r.push(...c);let d=function Z$e(e,t,n,i){if("grid"!==e.parameters.type)return;let r=t.grid,s=n.grid;if(!s)return;let o=[],a=e.parameters.grid;return Lee.forEach(l=>{let c;c="count"===l?lse(l,a,r??{},s,i,!0):Yg(l,a,r??{},s,i),c&&o.push(c)}),o}(s,o,a,i);d?.length&&r.push(...d);let h=function Q$e(e,t,n,i){if("toObject"!==e.parameters.type)return;let r=t.toObject,s=n.toObject;if(!s)return;let o=[],a=e.parameters.toObject;return Fee.forEach(l=>{let c;c="count"===l?p1(l,a,r??{},s,i,!0):Yg(l,a,r??{},s,i),c&&o.push(c)}),o}(s,o,a,i);h?.length&&r.push(...h);let u=function J$e(e,t,n,i){if(!e.parameters.randomness)return;let r=t.randomnessObject,s=n.randomnessObject;if(!s)return;let o=[],a=e.parameters.randomnessObject;return Bee.forEach(l=>{let c=Yg(l,a,r??{},s,i);c&&o.push(c)}),o}(s,o,a,i);return u?.length&&r.push(...u),r.length&&r.push({update:()=>{s.update()}}),r}(e,t,n,i)),Cu(e)?(e instanceof Ac&&e.data.visible&&s.push(...function k$e(e,t,n,i){let r=[];if(!("geometry"in n))return r;let s=e.geometry.userData.parameters,o="geometry"in t?t.geometry:{},a=n.geometry;if(e instanceof SC){let l=function I$e(e,t,n,i){if(void 0===n.scaleBaked)return;let r=(t.scaleBaked??e.data.geometry.scaleBaked).map(a=>"string"==typeof a?Number(i.getVariable(a)??0):a),s=n.scaleBaked.map(a=>"string"==typeof a?Number(i.getVariable(a)??0):a);if(Wv.isEqual(r,s))return;let o=[];return o.push({update:a=>{e.updateGeometryInteractions({scaleBaked:[gi.lerp(r[0],s[0],a),gi.lerp(r[1],s[1],a),gi.lerp(r[2],s[2],a)]},i),e.invalidateDownstreamBooleanData()},start:()=>{e.updateGeometryInteractions({scaleBaked:r},i),e.invalidateDownstreamBooleanData()},end:()=>{e.updateGeometryInteractions({scaleBaked:s},i),e.invalidateDownstreamBooleanData()}}),o}(e,o,a,i);l&&r.push(...l)}else{let l={};if(Object.assign(l,Xf(s,qee)),qee.forEach(c=>{let d=Yg(c,l,o,a,i);d&&r.push(d)}),e instanceof dz){Object.assign(l,{extrusion:{...s.extrusion}});let c=function R$e(e,t,n,i){if(!n.extrusion)return;let r=e.extrusion,s=t.extrusion??{},o=n.extrusion,a=[];return Wee.forEach(l=>{let c=Yg(l,r,s,o,i);c&&a.push(c)}),a}(l,o,a,i);c&&r.push(...c)}r.length&&r.push({update:c=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded()},start:c=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded()},end:c=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded()}})}return r}(e,t,n,i)),e.data.visible&&s.push(...function L$e(e,t,n,i){let r=[];if(Array.isArray(e.material)){if(!("materials"in n)||!n.materials)return r;let s="materials"in t&&t.materials?t.materials:[],o=n.materials;e.material.forEach((a,l)=>{if(!o[l])return;let c=s[l]??{},d=o[l];"string"==typeof c||"string"==typeof d||r.push(...dse(a,c,d,i))})}else{if(!("material"in n)||!n.material)return r;let s="material"in t&&t.material?t.material:{},o=n.material;if("string"==typeof s||"string"==typeof o)return r;r.push(...dse(e.material,s,o,i))}return r}(e,t,n,i))):iqe(e)?e.data.visible&&s.push(...function N$e(e,t,n,i){let r=[];if(void 0!==n.intensity){let s=p1("intensity",e,t,n,i);s&&r.push(s)}if(void 0!==n.color){let s=function T$e(e,t,n,i,r){let s=n[e]?n[e]:void 0,o=i[e];if(!o)return;let a=t[e],l=s?"string"==typeof s?r.getColor(s).clone():(new Di).setRGB(s.r,s.g,s.b):a.clone(),c="string"==typeof o?r.getColor(o).clone():(new Di).setRGB(o.r,o.g,o.b);if(l.equals(c))return;let d=a.clone();return t[e]=d,{update:h=>{d.lerpColors(l,c,h)},start:()=>{d.copy(l)},end:()=>{d.copy(c)}}}("color",e,t,n,i);s&&r.push(s)}return r}(e,t,n,i)):nqe(e)&&s.push(...function D$e(e,t,n,i){let r=[],o="OrthographicCamera"===e.cameraType?n.orthographic?.zoom:n.perspective?.zoom;if(void 0!==o){let a=("OrthographicCamera"===e.cameraType?t.orthographic?.zoom:t.perspective?.zoom)??e.zoom,l=o;a!==l&&r.push({update:c=>{e.zoom=gi.lerp(a,l,c),e.updateProjectionMatrix()},start:()=>{e.zoom=a,e.updateProjectionMatrix()},end:()=>{e.zoom=l,e.updateProjectionMatrix()}})}if(void 0!==n.targetOffset){let a=p1("targetOffset",e,t,n,i);a&&r.push(a)}return r}(e,t,n,i)),s.length?{update:o=>{s.forEach(a=>a.update(o))},start:o=>{s.forEach(a=>a.start?.(o))},end:o=>{s.forEach(a=>a.end?.(o))}}:void 0}var pse=new oe;function Hz(e,t,n=!1){let i=[];e.traverseChildren(r=>{if(n&&(r.rigidBody?.setTranslation(r.position0,!0),r.rigidBody?.setRotation(r.rotation0,!0),r.rigidBody?.setLinvel(pse,!0),r.rigidBody?.setAngvel(pse,!0)),!es.is(r))return;let s=r.uuid,o=r.data;if(delete r.states,r.uuid===ab)return;let a=!1;i.some(l=>e.scene.find(s)?.isDescendantOf(l))?a=!0:!0===o.physics?.fusedBody&&"dynamic"===o.physics.rigidBody&&i.push(s),r.data=o,r.currentState=null,r.reversibleToState=null,r.currentTransitionEvent=null;for(let l of o.states){let c={...l.data};!0===e.data.globalPhysics.usePhysics&&o.physics&&("dynamic"===o.physics.rigidBody||a)&&(void 0!==l.data.position&&delete c.position,void 0!==l.data.rotation&&delete c.rotation,void 0!==l.data.hiddenMatrix&&delete c.hiddenMatrix),r.states||(r.states={}),r.states[l.id]=Xv.patch(o,c)}(function tKe(e,t,n,i,r=!1){if(t instanceof Ac&&t.removeInteractionGeometry(),t.changeSelectedState(n,{scene:e,shared:i},r),t instanceof Ac&&t.updateGeometryGroupsIfNeeded(),t instanceof $l&&t.updateCameraState(t.dataPatched,{scene:e,shared:i}),t.cloner)for(let s of t.cloner.children)s.playModeVisible=void 0;t.updateVisible()})(e.scene,r,null,t,void 0!==o.events.find(l=>"Follow"===l.data.type||"LookAt"===l.data.type)),function eKe(e){e.traverseEntity(t=>{for(let n of t.data.events){let i=[];switch(n.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":i.push(...n.data.actions);break;case"GameControl":for(let r of Object.values(n.data.gameActions))i.push(...r);break;case"DragDrop":i.push(...n.data.dragDropActions.drag,...n.data.dragDropActions.drop);break;case"Conditional":i.push(...n.data.inActions,...n.data.outActions)}for(let r of i)if("Create"===r.data.type&&"Yes"===r.data.hideBase){let s=e.scene.find(r.data.object);s&&(s.visible=!1)}}})}(e)})}function fse(e){let t;if(5===e.easing){let{control1:n,control2:i}=e;t=`cubicBezier(\n\t\t\t${n[0]}, ${n[1]}, ${i[0]}, ${i[1]}\n\t\t)`}else if(6===e.easing){let{mass:n,stiffness:i,damping:r,velocity:s}=e;t=`spring( ${n}, ${i}, ${r}, ${s} )`}else{let n;switch(e.easing){case 0:default:n=Eg.linear;break;case 1:n=Eg.ease;break;case 2:n=Eg.easeIn;break;case 3:n=Eg.easeOut;break;case 4:n=Eg.easeInOut}let[i,r,s,o]=n;t=`cubicBezier( ${i}, ${r}, ${s}, ${o} )`}return{duration:e.duration,easing:t}}function Gz(e){let t={delay:0,loop:-1===e.repeat||e.repeat+1};if(0===e.repeat)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay}return"alternate"===t.direction&&(t.delay/=2,t.endDelay/=2,"start"===e.delayDirection?(t.pingPongDelayCorrection=t.delay,"number"==typeof t.loop&&t.loop%2==0&&(t.pingPongEndDelayCorrection=t.delay)):"end"===e.delayDirection?"number"==typeof t.loop&&t.loop%2!=0&&(t.pingPongEndDelayCorrection=t.endDelay):"start-end"===e.delayDirection&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var nKe={type:"beginState"},iKe={type:"completeState",isfromEntity:!1},mse=class{constructor(e,t,n,i,r,s){if(this.object=e,this.data=i,this.sharedAssets=r,this.allowSlerp=s,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.dispatchEvent({type:"requestRender"})),0===this.targets.t||1===this.targets.t?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let o=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"beginState",state:o}),this.object.traverseEntity(a=>{a!==this.object&&a instanceof $l&&a.dispatchEvent(nKe)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let o=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"completeState",state:o}),this.object.traverseEntity(a=>{a!==this.object&&a instanceof $l&&a.dispatchEvent(iKe)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=use(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},void 0===t){let o=zT(this.object,this.object.currentState===n?this.object.prevState:this.object.currentState);if(!o)throw new Error("Missing property");this.from=o}else{let o=zT(this.object,t);if(!o)throw new Error("Missing property");this.from=o}if(void 0===n)throw new Error("Missing property");{let o=zT(this.object,n);if(!o)throw new Error("Missing property");this.to=o}this.useCurrentState=void 0===t||void 0===n,this.params={targets:this.targets,t:1,autoplay:!1,...Gz(i),...fse(i),change:this.onChange},this.callback=use(this.object,void 0===t?{}:this.from.data,void 0===n?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},gse=class extends Sl{constructor(e,t,n,i){if(super(),this.data=e,this.page=t,this.shared=n,this.condition=i,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.useToggle=!1,this.onTimelineChangeComplete=()=>{"normal"!==this.data.tweens[0].data.direction&&(this.toggleIsForward=!this.toggleIsForward),!1!==this.timelineNeedsRebuild&&(this.timeline?.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!1,isRebuild:!0}),this.timeline.play())},!e.object)throw new Error("Missing property");let r=this.page.scene.find(e.object);if(!r)throw new Error("Missing property");if(!r.states)throw new Error("Missing property");if(this.object=r,e.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay="start-once"===e.tweens[0].data.delayDirection?e.tweens[0].data.delay:0,this.init()}get playing(){return this.timeline&&!1===this.timeline.paused}init(){this.initialCurrentState=zT(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.useToggle?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,needsRebuild:t=!1,isRebuild:n=!1}={}){try{let i=Gz(this.data.tweens[0].data);n&&"number"==typeof i.loop&&i.loop--,this.timeline?.pause(),this.timeline=rse.timeline({autoplay:!1,...i,...!0===i.loop||i.loop>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let r=this.tweens.findIndex(s=>s?.changeBegan);if(!0===t&&(this.timelineNeedsRebuild=!0),e){let s=-1===r?0:r;for(let o=s;o<this.data.tweens.length-1;o++){let c,a=this.data.tweens[o],l=this.data.tweens[o+1];o!==s||!0!==this.object.wasMovedByUser&&!0!==this.object.previousAction?.playing?c=void 0===a.data.state?this.currentState:a.data.state:(c=void 0,this.object instanceof $l&&(this.object.wasMovedByUser=!1));let d=new mse(this.object,c,void 0===l.data.state?this.currentState:l.data.state,l.data,this.shared,this.data.allowSlerp??!1);-1!==r&&o===s&&Object.assign(d.params,{startOnceDelay:0}),this.tweens[o]=d,this.timeline.add(d.params,this.timeline.duration+(o===s?i.delay:0))}this.timeline.duration+=i.endDelay}else{let s=-1===r?this.data.tweens.length-1:r+1;for(let o=s;o>0;o--){let c,a=this.data.tweens[o],l=this.data.tweens[o-1];o!==s||!0!==this.object.wasMovedByUser&&!0!==this.object.previousAction?.playing?c=void 0===a.data.state?this.currentState:a.data.state:(c=void 0,this.object instanceof $l&&(this.object.wasMovedByUser=!1));let d=new mse(this.object,c,void 0===l.data.state?this.currentState:l.data.state,a.data,this.shared,this.data.allowSlerp??!1);-1!==r&&o===s&&Object.assign(d.params,{startOnceDelay:0}),this.tweens[o-1]=d,this.timeline.add(d.params,this.timeline.duration+(o===s?i.endDelay:0))}this.timeline.duration+=i.delay}}catch(i){i instanceof Error&&console.error(i.message)}!0===this.object.previousAction?.playing&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(!1===Oa(this.shared,this.condition)||this.playing)return!1;clearTimeout(this.timeoutId);let e=Gz(this.data.tweens[0].data).pingPongDelayCorrection;this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(t){t instanceof Error&&console.error(t.message)}},this.startOnceDelay+e)}pause(){this.timeline?.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=void 0===this.data.tweens[0].data.state?this.initialCurrentState:this.data.tweens[0].data.state;this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.shared}),this.object.currentState=e}seek(e){void 0===this.timeline&&this.buildTimeline(),this.timeline?.seek(e*this.timeline.duration,!0)}toggle(e){if(!1===Oa(this.shared,this.condition))return!1;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?(this.timeline?.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!0}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{this.timeline?.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function zT(e,t){let n,i;if("string"==typeof t?(n=t,i=e.states?.[n]):null===t&&(n=null,i=e.data),void 0!==n&&void 0!==i)return{id:n,data:i}}var rKe={type:"beginState"},vse={type:"completeState",isfromEntity:!1},yse={type:"requestRender"},_se=class extends Sl{constructor(e,t,n,i){super(),this.data=e,this.page=t,this.shared=n,this.condition=i,this.toggleIsForward=!1,this.useToggle=!1,this.posStart=new oe,this.posEnd=new oe,this.qStart=new Qi,this.qEnd=new Qi,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let t=this.page.scene.find(this.data.targetCamera);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");let n={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=rse({targets:n,t:1,...fse(this.data),update:()=>{0===n.t&&(this.useToggle&&!this.toggleIsForward?(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)):(this.posEnd.copy(t.position),this.qEnd.copy(t.quaternion),this.zoomEnd=t.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(t.uuid)),this.page.activeCamera.dispatchEvent(rKe));let i=this.page.activeCamera;i.position.lerpVectors(this.posStart,this.posEnd,n.t),i.quaternion.slerpQuaternions(this.qStart,this.qEnd,n.t),i.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*n.t,i.wasMovedBySwitchCameraAction=!0,i.updateMatrix(),i.updateMatrixWorld(),i.updateProjectionMatrix(),i.dispatchEvent(yse),1===n.t&&i.dispatchEvent(vse)}})}switchCamera(e){let t=this.page.scene.find(e);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(t),this.page.activeCamera.dispatchEvent({type:"cameraChange",camera:t})}play(){if(!1===Oa(this.shared,this.condition))return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{delete this.timeoutId,this.data.animate?(this.buildAnimation(),this.animation?.play()):this.switchCamera(this.data.targetCamera)},1e3*this.data.delay)}catch{}}pause(){this.animation?.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){if(!1===Oa(this.shared,this.condition))return!1;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward;try{this.playing?(this.animation?.pause(),this.buildAnimation(!0),this.animation?.play()):this.timeoutId=window.setTimeout(()=>{delete this.timeoutId,this.data.animate?(this.animation?.pause(),this.buildAnimation(),this.animation?.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(vse),this.page.activeCamera.dispatchEvent(yse))},1e3*this.data.delay)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}},bse=class extends Sl{constructor(e,t,n,i,r){super(),this.page=t,this.animationControls=n,this.shared=i,this.condition=r,this.startOnceDelay=0,this.toggleIsForward=!1;let s=e.object,o=t.scene.find(e.object);o&&Array.isArray(o.identity)&&(s=o.identity[0]),this.data={...e,object:s};let a=this.animationControls.clipIdToAction[e.clipId+"/"+s];this.duration=a?.getClip()?.duration??1;let l=a?.getClip()?.tracks[0]?.times.length??1/0;this.leftFrameTime=this.data.crop[0]/l*this.duration,this.rightFrameTime=this.data.crop[1]/l*this.duration,this.startOnceDelay=e.delay}get playing(){return this.threeAnimAction?.isRunning()??!1}play(e=!1){if(!1===Oa(this.shared,this.condition))return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let t=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([n,i])=>{let r=n.split("/")[1];this.threeAnimAction!==i&&r===t&&i.isRunning()&&(e?i.fadeOut(.2):i.stop())}),e&&this.threeAnimAction?.fadeIn(.2)},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){this.threeAnimAction?.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=gi.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,t=!1){if(!1===Oa(this.shared,this.condition))return!1;this.toggleIsForward=e??!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let n=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([i,r])=>{let s=i.split("/")[1];this.threeAnimAction!==r&&s===n&&r.isRunning()&&(t?r.fadeOut(.2):r.stop())}),t&&this.threeAnimAction?.fadeIn(.2)}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){let e=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object]?.getClip();e&&(e.duration=this.duration),this.pause()}},xse=class{constructor(e,t,n,i,r){this.data=e,this.page=t,this.eventManager=n,this.shared=i,this.condition=r,this.timeOutId=-1,this.scene=t.scene}dispatch(){if(!1===Oa(this.shared,this.condition))return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},1e3*this.data.delay))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(t=>t.uuid!==this.data.target))return;"fade"===this.data.transition&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,1e3*this.data.duration),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),Hz(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},wse=class{constructor(e,t,n,i){this.data=e,this.page=t,this.shared=n,this.condition=i,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=Oa(this.shared,this.condition)}dispatch(){if(!1===this.evaluatedCondition)return!1;let e=this.shared.getVariable(this.data.variableId),t=lne(this.data.expression,this.shared,Yd.typeOfVariable(e));void 0!==t&&this.shared.updateVariable(this.data.variableId,"string"==typeof t?{textValue:t}:t)}dispose(){}},Mse=class{constructor(e,t,n,i){this.data=e,this.page=t,this.shared=n,this.condition=i,this.timeoutId=null}dispatchInner(){if(!1===Oa(this.shared,this.condition))return!1;let e=this.shared.getDynamicVariablePlayState(this.data.variableId);if("PlayPause"===this.data.mode)void 0===this.shared.getDynamicVariableToggleIsForward(this.data.variableId)&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"===e?"Paused":"Playing");else if("Play"===this.data.mode&&"Playing"!==e)void 0===this.shared.getDynamicVariableToggleIsForward(this.data.variableId)&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing");else if("Stop"===this.data.mode&&"Stopped"!==e)this.shared.setDynamicVariablePlayState(this.data.variableId,"Stopped");else if("Pause"===this.data.mode&&"Paused"!==e)this.shared.setDynamicVariablePlayState(this.data.variableId,"Paused");else if("Restart"===this.data.mode)this.shared.setDynamicVariablePlayState(this.data.variableId,"Restarted");else if("Toggle"===this.data.mode){let t=this.shared.getDynamicVariableToggleIsForward(this.data.variableId);"Playing"===e?this.shared.setDynamicVariableToggleIsForward(this.data.variableId,void 0!==t&&!t):(this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!t),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"))}}dispatch(){let e=this.data.delay,t=this.shared.getDynamicVariablePlayState(this.data.variableId);"PlayPause"===this.data.mode&&"Playing"===t&&(e=this.data.pauseDelay),0!==e?(this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.timeoutId=null,this.dispatchInner()},e)):this.dispatchInner()}dispose(){this.timeoutId&&window.clearTimeout(this.timeoutId)}};function Oa(e,t){if(void 0===t)return!0;if(0===t.expression.length)return!1;let n=lne(t.expression,e,"boolean");return t.negate?!n:!!n}function Ic(e,t,n,i,r,s){let o={Audio:[],Video:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[],DynamicVariablePlay:[]},a=l=>({id:c,data:d})=>{try{"Audio"===d.type?Xd[e.type].includes("Audio")&&o.Audio.push(new Rre(c,d,s,i,l)):"Video"===d.type?Xd[e.type].includes("Video")&&o.Video.push(new Pse(c,d,s,i,l)):"Link"===d.type?Xd[e.type].includes("Link")&&o.Link.push(new ZYe(d,r.controlsManager,i,l)):"Create"===d.type?Xd[e.type].includes("Create")&&o.Create.push(new Ase(d,n,r.controlsManager,i,l)):"Destroy"===d.type?Xd[e.type].includes("Destroy")&&o.Destroy.push(new Nre(d,n,r.controlsManager,i,l)):"Reset"===d.type?Xd[e.type].includes("Reset")&&o.Reset.push(new Lre(d,n,i,r,l)):"Transition"===d.type?Xd[e.type].includes("Transition")&&o.Transition.push(new gse(d,n,i,l)):"SwitchCamera"===d.type?Xd[e.type].includes("SwitchCamera")&&o.SwitchCamera.push(new _se(d,n,i,l)):"SceneTransition"===d.type?Xd[e.type].includes("SceneTransition")&&o.SceneTransition.push(new xse(d,n,r,i,l)):"Animation"===d.type?Xd[e.type].includes("Animation")&&o.Animation.push(new bse(d,n,r.animationControls,i,l)):"SetVariable"===d.type?Xd[e.type].includes("SetVariable")&&o.SetVariable.push(new wse(d,n,i,l)):"DynamicVariablePlay"===d.type?Xd[e.type].includes("DynamicVariablePlay")&&o.DynamicVariablePlay.push(new Mse(d,n,i,l)):"Conditional"===d.type&&Xd[e.type].includes("Conditional")&&(d.ifActions.forEach(a({expression:d.condition,negate:!1})),d.elseActions.forEach(a({expression:d.condition,negate:!0})))}catch{}};return t.forEach(a()),o}function pl(e){Object.values(e).forEach(t=>{t.forEach(n=>{(n instanceof Rre||n instanceof Pse||n instanceof bse||n instanceof gse||n instanceof Ase||n instanceof Nre||n instanceof _se||n instanceof xse||n instanceof Lre||n instanceof wse||n instanceof Mse)&&n.dispose()})})}var Cse=new Map,BC=new Map,ex=class{constructor(e,t,n){this.data=t,this.delay=0,this.status="stopped";let{layerId:i,loop:r,volume:s,delay:o}=t;if(this.object=n,void 0===i)throw new Error("Missing property");let a=function sKe(e,t){let n;if("material"in e&&(n=Array.isArray(e.material)?e.material[0].layers.find(r=>r.uuid===t):e.material.layers.find(r=>r.uuid===t)),n)return n.color.texture.image.img instanceof HTMLVideoElement?n.color.texture.image.img:void 0}(n,i);a&&(this.videoElement=a,this.videoElement.loop=r===1/0,IF&&(this.videoElement.autoplay=!0),void 0!==s&&(this.videoElement.volume=s)),void 0!==o&&(this.delay=o),BC.has(n.uuid)?BC.get(n.uuid).push(this):BC.set(n.uuid,[this]),Cse.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let n=this.videoElement.play();void 0!==n&&n.then(i=>{}).catch(i=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){"stop"===this.data.toggle?"playing"===this.status?this.stop():(this.stop(),this.play()):"pause"===this.data.toggle?"playing"===this.status?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},Wz=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=Cse.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=BC.get(e);!t?.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(n=>n[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(n=>n[this.data.interaction]()))}pauseAllVideos(){let e=[...BC.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(n=>{n[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(n=>{n[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},Pse=class{constructor(e,t,n,i,r){if(this.data=t,this.shared=i,this.condition=r,"play"===t.interaction)this.interaction=new ex(e,t,n);else{if("pause"!==t.interaction&&"stop"!==t.interaction)throw new Error("Missing property");this.interaction=new Wz(t)}}dispatchBasic(){if(!1===Oa(this.shared,this.condition))return!1;this.interaction instanceof ex?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(!1===Oa(this.shared,this.condition))return!1;this.interaction instanceof ex?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},Sse=(()=>{let e,t,n,i;function r(a){!e&&!Ese()&&t?.sharedGameControlGlobals.createdObjects.length>0&&(e=requestAnimationFrame(s)),a&&(t=a,i=a.requestRender)}function s(a){let l=n?a-n:0,c=t.sharedGameControlGlobals.createdObjects,d=t.sharedGameControlGlobals.nCreatedPerAction,h=c.length,u=0;for(;u<h;){let p=c[u];void 0===p.userData.createdTime&&(p.userData.createdTime=a),void 0===p.userData.lifetime&&void 0===p.userData.quantity||p.userData.lifetime&&a-p.userData.createdTime<p.userData.lifetime||p.userData.quantity&&d[p.userData.actionId]<=p.userData.quantity?(p.userData.velocity&&(p.position.addScaledVector(p.userData.velocity,l/1e3),p.updateMatrix(),i()),u++):(d[p.userData.actionId]>p.userData.quantity&&d[p.userData.actionId]--,c.splice(u,1),p.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&p.rigidBody?(t.sharedGameControlGlobals.colliderToEntity.delete(p.rigidBody.collider(0).handle),t.sharedGameControlGlobals.rapierWorld.removeRigidBody(p.rigidBody)):(p.bvhGeometry=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter(m=>void 0!==m.bvhGeometry)),h--,i())}e=u>0?requestAnimationFrame(s):void 0,n=u>0?a:void 0}return typeof document<"u"&&document.addEventListener("visibilitychange",function o(){Ese()?e&&(cancelAnimationFrame(e),e=void 0,n=void 0):r()}),r})();function Ese(){return!!document&&document.hidden}var Ose=new Qi,oKe=new oe,aKe=new oe,Ase=class{constructor(e,t,n,i,r){this.data=e,this.page=t,this.controlsManager=n,this.shared=i,this.condition=r,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=gi.generateUUID(),this.dispatch=()=>{if(!1===Oa(this.shared,this.condition))return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay)):this.dispatchInner()},this.dispatchFromStart=()=>{if(!1===Oa(this.shared,this.condition))return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay))},this.dispatchThrottled=function $Ve(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return gu(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),TF(e,t,{leading:i,maxWait:t,trailing:r})}(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{null===this.intervalId&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{null!==this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let o=new Yl(this.object);if(o.playModeVisible=!0,o.expand(),"world"!==this.data.coordinateSystem){let c=this.page.scene.find(this.data.coordinateSystem);c&&(c.updateMatrixWorldSVD(),o.hiddenMatrix.copy(c.matrixWorldRigid))}o.position.fromArray(this.data.position),o.rotation.fromArray(this.data.rotation),o.updateMatrix(),this.page.add(o);let a=this.controlsManager.sharedGameControlGlobals;a.createdObjects.push(o),void 0===a.nCreatedPerAction[this.uniqueId]?a.nCreatedPerAction[this.uniqueId]=1:a.nCreatedPerAction[this.uniqueId]++,o.updateWorldMatrix(!0,!0),o.traverseObject(this.traverseObjectCB),Sse(),this.controlsManager.requestRender()},this.traverseObjectCB=o=>{let a;if(o.hasNonUniformScale&&o.updateMatrixWorldSVD(),this.controlsManager.sharedGameControlGlobals.rapierWorld){if(o instanceof wu){if(!o.objectForSample)return!0===o.object.dataPatched.physics.fusedBody&&"dynamic"===o.object.dataPatched.physics.rigidBody||void 0;if(o.objectForSample.dataPatched.physics.fusedBody)return;a=o.object}else if(o instanceof Yl)a=o.object;else if(a=o,a.dataPatched.cloner?.hideBase)return!0}else{if(o instanceof wu)return;a=o instanceof Yl?o.object:o}"Time"===this.data.destroy?o.userData.lifetime=1e3*this.data.lifetime:"Quantity"===this.data.destroy&&(o.userData.quantity=this.data.destroyAfterQuantity,o.userData.actionId=this.uniqueId);let l=(new oe).fromArray(this.data.velocity),c=a.dataPatched;if(!("visibility"===c.physics.enabled?!c.visible:!c.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(o,a,{fromCreate:!0,dynamic:this.data.dynamic}),"Collision"===this.data.destroy&&(o.rigidBody?.collider(0).setActiveEvents(1),o.userData.hasCollisionDestroy=!0),o.matrixWorld.decompose(oKe,Ose,aKe),l.applyQuaternion(Ose),this.data.velocity.some(d=>0!==d)&&this.data.dynamic&&o.rigidBody?.setLinvel(l.divideScalar(this.controlsManager.pixelsPerMeter),!0)):("geometry"in o.object&&this.controlsManager.addBoundsTree(o),this.data.velocity.some(d=>0!==d)&&this.data.dynamic&&(o.userData.velocity=l)),!0===a.dataPatched.physics?.fusedBody))return!0};let s=this.page.scene.find(this.data.object);if(!s)throw new Error("Missing Property");if(this.object=s,"world"!==this.data.coordinateSystem&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");Sse(n)}dispose(){null!==this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},Dse=(new oe,new oe),Ise=new oe,cKe=new oe,Rc=new oe,ad=new oe,$g=new oe,Yz=new vn,Rse=new vn,dKe=new vn,Eu=(new vn,new Qi),dm=new Qi,Fp=new cl(0,0,0,"YXZ"),hKe=new oe(1,0,0),Ou=new oe(0,1,0),uKe=new oe(0,0,1),kse=new oe(1,1,1),fl=(new $c,new Ph),Fh=new ra,vKe={type:"requestRender"},yKe={type:"updateMatrix"},Lse=Math.PI/6,$z=class extends Sl{constructor(e,t,n,i,r,s,o,a,l){super(),this.object=e,this.domElement=t,this.data=n,this.gloabalPhysics=i,this.controlsManager=r,this.cameraFollow=s,this.camera=o,this.page=a,this.sharedAssets=l,this.enableDamping=!0,this.hiddenMatrix0=new vn,this.target0=new oe,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=200,this.euler0=new cl(0,0,0,"YXZ"),this.position0Cam=new oe,this.quat0Cam=new Qi,this.scale0Cam=new oe,this.hiddenMatrix0Cam=new vn,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new Ph(new oe(0,-40,0),new oe(0,40,0)),matrix:new vn,position:new oe,rotation:new Qi},this.euler=new cl(0,0,0,"YXZ"),this.eulerDelta=new oe,this.lastPosition=new oe,this.lastCameraQuaternion=new Qi,this.lastCameraPosition=new oe,this.PI_2=Math.PI/2,this.prevMouse=new tt,this.velocityTarget=new oe,this.velocity=new oe,this.directionXZ=new oe,this.rotVelocityStick=new oe,this.rotVelocityTarget=new oe,this.rotVelocity=new oe,this.rotDirection=new oe,this.nonColliderRotOffset=new vn,this.nonColliderPosOffset=new vn,this.firstPointerId=-1,this.rot=new oe,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new vn,this.objectToTarget=new oe,this.objectToTarget0=new oe,this.objectToCamXZ=new oe,this.objectToCamXZ0=new oe,this.targetToCamera=new oe,this.targetToCamera0=new oe,this.cameraPolarAxis0=new oe,this.targetPos=new oe,this.targetQuat=new Qi,this.lerpFactorPos=(new oe).setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new Qi,this.objXZQuatInv=new Qi,this.objXZRotMat=new vn,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new oe,this.pushedVelocity=new oe,this.groundYRotation=0,this.objectRealQuat=new Qi,this.colliderWorldQuat=new Qi,this.groundNormal=new oe,this.groundTilt=new Qi,this.groundTiltInv=new Qi,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new oe,this.quaternion=new Qi,this.scale=new oe,this.initialAction=!0,this.onPointerDown=m=>{m.target!==this.domElement||-1!==this.firstPointerId||(this.firstPointerId=m.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),"keys"!==this.rotBy&&!Wd&&(!RJ||kJ>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(m.clientX,m.clientY))},this.onPointerUp=m=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),"mouse"===m.pointerType&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=m=>{if(m.pointerId!==this.firstPointerId)return;let v=m.clientX-this.prevMouse.x,g=m.clientY-this.prevMouse.y;this.prevMouse.set(m.clientX,m.clientY),"mouse"===m.pointerType&&"keys"!==this.rotBy&&(RJ&&kJ<15.5&&!Wd?(this.eulerDelta.y=-v*this.mouseOrbitSensitivity,this.eulerDelta.x=-g*this.mouseOrbitSensitivity):(this.eulerDelta.y=-m.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-m.movementY*this.mouseOrbitSensitivity)),"mouse"!==m.pointerType&&"drag"===this.rotByTouch&&(this.eulerDelta.y=-v*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-g*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=m=>{$z.isLocked=this.domElement.ownerDocument.pointerLockElement===this.domElement},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document?.hidden)for(let m in this.movementState)this.movementState[m]=0},this.onKeyDown=m=>{!(m.target instanceof HTMLInputElement)&&("ArrowLeft"===m.code||"ArrowUp"===m.code||"ArrowRight"===m.code||"ArrowDown"===m.code||"Space"===m.code)&&m.preventDefault();for(let v of this.keyAssignments)if(m.key.toUpperCase()===v[1]||m.key===v[1]){this.movementState[v[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=m=>{for(let v of this.keyAssignments)if(m.key.toUpperCase()===v[1]||m.key===v[1]||m.code.slice(3,m.code.length).toUpperCase()===v[1]){this.movementState[v[0]]=0;break}},this.copyVRGamePadValues=(m,v)=>{for(let g=2;g<4;g++){let b=m.axes[g];0===v?2===g?this.movementState.movePosX=b:this.movementState.movePosZ=b:(this.movementState.jump=m.buttons[3].pressed?1:0,2===g?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(b)>=.3&&(this.vrEulerYOffset+=b<0?1:-1),this.movementState.rotPosY=b):"fly"===this.moveMode&&(this.movementState.moveNegY=b))}},this.sharedGameControlGlobals=r.sharedGameControlGlobals,e===o&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let c=this.euler0.clone(),d=c.y;if(this.objectRealQuat.copy(this.quaternion),c.y=0,this.quaternion.setFromEuler(c),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),c.set(0,d,0),this.quaternion.setFromEuler(c),this.rot.setFromEuler(c),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||!0===this.cameraFollow)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),!0===this.cameraFollow){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy(this.camera?.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let g,b,m=new oe(0,0,-1).applyQuaternion(this.camera.quaternion),v=(new oe).subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(v),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ),Math.abs(m.y)<1e-6?(v.y=0,m.y=0,b=v.projectOnVector(m)):b=m.multiplyScalar(v.y/m.y>0?v.y/m.y:v.length()),this.targetToCamera0.copy(b).negate(),g=this.camera.position.clone().add(b),this.objectToTarget0.subVectors(g,this.position);let x=(new cl).setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-x.x,x.x=0,x.z=0,x.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(x)}if(this.object instanceof $l&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=n.rotByTouch??"joystick",this.rotBy=n.rotBy??"keys",this.rotationMode=n.rotationMode??"normal",this.moveMode=n.moveMode??"walk",this.collisionEnabled=n.collisionEnabled,this.speedTranslate=1*(n.speedTranslate??250),this.speedOrbit=.025*(n.speedRotate??100),this.mouseOrbitSensitivity=16e-6*(n.speedRotate??100),this.keyAssignments=n.keyAssignments.map(m=>{let v=[m[0],m[1]];return"\u25b2"===v[1]?v[1]="ArrowUp":"\u25c0"===v[1]?v[1]="ArrowLeft":"\u25bc"===v[1]?v[1]="ArrowDown":"\u25b6"===v[1]?v[1]="ArrowRight":"\u21e7"===v[1]?v[1]="Shift":"\u21b5"===v[1]?v[1]="Enter":"Space"===v[1]?v[1]=" ":"\u2318"===v[1]?v[1]="Meta":"Ctrl"===v[1]?v[1]="Control":"Esc"===v[1]&&(v[1]="Escape"),v}),"mouse"===n.rotBy){let m;m=this.keyAssignments.findIndex(v=>"rotNegX"===v[0]),-1!==m&&(this.keyAssignments[m][1]=""),m=this.keyAssignments.findIndex(v=>"rotPosX"===v[0]),-1!==m&&(this.keyAssignments[m][1]=""),m=this.keyAssignments.findIndex(v=>"rotPosY"===v[0]),-1!==m&&(this.keyAssignments[m][1]=""),m=this.keyAssignments.findIndex(v=>"rotNegY"===v[0]),-1!==m&&(this.keyAssignments[m][1]="")}this.lerpFactorPosStart=1-.02**(1/(60*(n.delayPos[0]??.3))),this.lerpFactorPosEnd=1-.02**(1/(60*(n.delayPos[1]??.3))),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/(60*(n.delayRot[0]??.3))),this.lerpFactorRotEnd=1-.02**(1/(60*(n.delayRot[1]??.3))),this.lerpFactorPosCamera=1-.02**(1/(60*(n.delayPosCamera??.3))),this.lerpFactorRotCamera=1-.02**(1/(60*(n.delayRotCamera??.3))),this.gravity=12*(this.gloabalPhysics.gravity??pb.defaultData.gravity),this.usePhysics=this.gloabalPhysics.usePhysics??pb.defaultData.usePhysics,this.jumpPower=20*n.jumpPower,this.resetYPosition=this.position.y+Math.abs(n.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=n.alignToGround??!1,this.orientMode=n.autoOrientMove?n.orientMode:"none",this.orientWith=n.orientWith??FA.defaultDataThirdPerson.orientWith,this.slopeThresh=65*Math.PI/180,"capsule"===n.collider.type?(this.collider.radius=n.collider.radius,this.collider.segment.start.y=n.collider.height/2-n.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=.02*n.collider.height/this.pixelsPerMeter,this.stepThresh=.3*n.collider.height/this.pixelsPerMeter,this.colliderHeight=n.collider.height):"sphere"===n.collider.type?(this.collider.radius=n.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*n.collider.radius*.02/this.pixelsPerMeter,this.stepThresh=2*n.collider.radius*.3/this.pixelsPerMeter,this.colliderHeight=2*n.collider.radius):(this.offset=.02*n.collider.height/this.pixelsPerMeter,this.stepThresh=.3*n.collider.height/this.pixelsPerMeter,this.colliderHeight=n.collider.height),this.collider.type=n.collider.type;let h=(new oe).fromArray(n.collider.position),u=(new Qi).setFromEuler((new cl).fromArray([...n.collider.rotation,"XYZ"]));this.collider.position.copy(h).multiply(this.scale),this.collider.rotation.copy(u),this.collider.matrix.compose(h,u,kse),void 0!==n.cameraXAxis&&(this.cameraXAxis=n.cameraXAxis,this.cameraYAxis=n.cameraYAxis,this.minPolarAngle=n.cameraRotXLimits[0],this.maxPolarAngle=n.cameraRotXLimits[1],this.minAzimuthAngleRel=n.cameraRotYLimits[0],this.maxAzimuthAngleRel=n.cameraRotYLimits[1]),this.forwardDir=n.forwardDirection??"-z",this.runMultiplier=n.runMultiplier??2;let p=2*n.navmesh.destinationHelperRadius;if(p>0){let m=new Fi;m.push({fi:0,data:{...Qc.defaultData("light","phong"),alpha:0},id:"layer1"}),m.push({fi:0,data:{...Qc.defaultData("color"),color:n.navmesh.destinationHelperColor,alpha:n.navmesh.destinationHelperColor.a},id:"layer2"});let v=new RB({layers:m},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new yc(Ote.create({parameters:{width:p,height:p/10,hollow:.7}}),v),this.navMeshPathDest.material.userData.opacity0=n.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let t=(new cl).setFromQuaternion(this.quaternion,"YXZ"),n=t.y;this.objectRealQuat.copy(this.quaternion),t.y=0,this.quaternion.setFromEuler(t),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),t.set(0,n,0),this.quaternion.setFromEuler(t),this.rot.setFromEuler(t),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof $l?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();!0===this.cameraFollow&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){this.deactivate(),this.navMeshPathDest?.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,t=this.sharedAssets;void 0!==e.gameActions&&(this.actions={},LA.list.forEach(n=>{this.actions[n]=Ic({...e,disabled:!1,type:"GameControl"},e.gameActions[n],this.page,t,this.controlsManager.eventManager,this.object)})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),pl(this.actions.idle),pl(this.actions.move),pl(this.actions.run),pl(this.actions.jump)}dispatchStartEvent(e){void 0!==this.actions[e]&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].Transition.forEach(t=>{t.play()}),this.actions[e].Animation.forEach(t=>{t.play(!1===this.initialAction)}),this.actions[e].Create.forEach(t=>{t.dispatchStart()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("start")})))}dispatchStopEvent(e){void 0!==this.actions[e]&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].Transition.forEach(t=>{t.stop(),null!==t.object.currentState&&t.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})}),this.actions[e].Create.forEach(t=>{t.dispatchStop()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("stop")})))}get colliderWorldPosition(){return Rc.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,t,n){if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let i=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let r=60*i,s=!1;if(this.usePhysics&&this.collisionEnabled){let a=ad.set(0,(0===this.velocity.y?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/120,1)*(this.gravity>0?1:-1):this.velocity.y)*i,0).divideScalar(this.pixelsPerMeter),l=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,a,this.object.rigidBody?.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(l){this.onObject=!0,this.groundNormal.set(l.normal2.x,l.normal2.y,l.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(s=!0),0===l.collider.parent()?.bodyType()&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let c=l.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let d of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(d.rigidBody===c&&d.userData.isFollowingObj!==this.object.uuid){(d.hasNonUniformScale?d.matrixWorldRigid:d.matrixWorld).decompose(Rc,dm,ad),this.groundVelocity.subVectors(Rc,d.prevT),this.object.getWorldPosition(ad).add(this.collider.position).sub(Rc),this.groundYRotation=Fp.setFromQuaternion(dm).y-d.prevR.y,$g.copy(ad).applyAxisAngle(Ou,this.groundYRotation),this.groundVelocity.add($g.sub(ad)).divideScalar(i);break}}else this.onObject=!1}if("walk"===this.moveMode&&this.collisionEnabled&&(1===this.movementState.jump&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*r),"fly"===this.moveMode&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,"+z"===this.forwardDir&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let a=this.navMeshPathDest.material;if("walk"===this.moveMode&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let l=Rc.subVectors(this.path[1],this.position),c=ad.subVectors(this.path[1],this.path[0]);l.dot(c)<0?this.path.shift():(this.directionXZ.x=c.x,this.directionXZ.z=c.z),a.opacity=a.userData.opacity0}else a.opacity-=.05*a.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.moveForce=this.movementState.run?this.runMultiplier:1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,("walk"===this.moveMode?this.velocityTarget.x+this.velocityTarget.z===0:0===this.velocityTarget.manhattanLength())?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),"walk"===this.moveMode&&(this.lerpFactorPos.y=1),!1===this.didHit&&0===this.pushedVelocity.manhattanLength()||!1===this.usePhysics?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**r),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**r),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**r)):this.velocity.copy(this.velocityTarget),("walk"===this.moveMode?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let o=cKe.copy(this.velocity);if("none"!==this.orientMode&&!1===this.isFirstPerson){let a=ad.copy(o);a.y=0,o.set(0,o.y,a.length()*("+z"===this.forwardDir?1:-1))}if(this.directionXZ.manhattanLength()>0&&"none"!==this.orientMode)if("camera"===this.orientWith&&this.path.length<=1){let a=Rc;this.camera.getWorldDirection(a);let l=$g.copy(Ou).multiplyScalar(a.dot(Ou));a.sub(l);let c=ad.copy(this.directionXZ);c.x*=-1,this.rot.y=a.angleTo(c)*(a.cross(c).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*("+z"===this.forwardDir?1:-1);if(Fp.setFromVector3(this.rot),"walk"===this.moveMode&&(Fp.x=0),o.applyEuler(Fp),s&&(dm.setFromUnitVectors(Ou,this.groundNormal),o.applyQuaternion(dm)),n){let a=Fp.set(0,this.vrEulerYOffset*Lse,0);n.applyEuler(a),o.x+=n.x,o.z+=n.z,this.nonColliderPosOffset.elements[13]+=n.y*i}if(!0===this.usePhysics){let a=ad;this.pushedVelocity.set(0,0,0);for(let l of this.sharedGameControlGlobals.entitiesWithTransformAnim){let c=$g.setFromMatrixPosition(l.matrixWorld).sub(l.prevT).divideScalar(i).divideScalar(this.pixelsPerMeter),d=l.rigidBody.collider(0).castCollider(c,this.object.rigidBody.collider(0),Rc.copy(o).divideScalar(this.pixelsPerMeter),i,!1);c.multiplyScalar(this.pixelsPerMeter);let h=es.is(l)?l:l.object;if(null!==d&&this.lastHitObj!==h){let u;l instanceof Yl&&(u=l);let p=this.sharedGameControlGlobals.entityToCollisionEvents[h.uuid];if(p)for(let m of p)"character"===m.data.target&&(m.dispatch(u),h.dispatchEvent(dU));this.lastHitObj=h}if(null!==d){this.pushedVelocity.copy(c),a.copy(d.normal1).applyQuaternion(l.quaternion);break}}if(0!==this.pushedVelocity.manhattanLength()){let l=a.dot(o);l<0&&o.addScaledVector(a,-l),o.add(this.pushedVelocity)}else o.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotVelocityStick.x="normal"===this.rotationMode&&(this.movementState.rotPosX||this.movementState.rotNegX)||"steer"===this.rotationMode&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||"walk"===this.moveMode)?-this.rotDirection.x*this.speedOrbit*this.rotForce:0,this.rotVelocityStick.y="normal"===this.rotationMode&&(this.movementState.rotPosY||this.movementState.rotNegY)||"steer"===this.rotationMode&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?-this.rotDirection.y*this.speedOrbit*this.rotForce:0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(i),this.rotVelocityStick),0===this.rotVelocityTarget.manhattanLength()?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**r):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**r),this.euler.x+=this.rotVelocity.x*i,this.euler.y+=this.rotVelocity.y*i+this.groundYRotation,0===this.rotVelocityTarget.y&&0===this.directionXZ.manhattanLength()?this.rotationAccumWhenOrientWithCamera=0:(!1===this.cameraFollow||"Locked"===this.cameraYAxis)&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*i),!1===this.isFirstPerson&&"none"!==this.orientMode&&this.directionXZ.manhattanLength()>0){if("radial"===this.orientMode){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(Ou,this.euler.y-this.euler0.y);let a=ad.copy(this.objectToCamXZ).normalize(),l=$g.copy(o).multiplyScalar(i);l.y=0;let c=l.sub(Rc.copy(a).multiplyScalar(l.dot(a))).cross(a).y;this.euler.y-=Math.atan2(c,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*i+this.groundYRotation,0!==this.rotVelocityTarget.y&&(!1===this.cameraFollow||"Locked"===this.cameraYAxis)&&(this.euler.y=this.rot.y);if(!0===this.cameraFollow&&("walk"===this.moveMode?this.euler.x="Limit"===this.cameraXAxis?gi.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):gi.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):"Limit"===this.cameraXAxis&&(this.euler.x=gi.clamp(this.euler.x,-this.PI_2,this.PI_2))),"fly"===this.moveMode?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(Fp.copy(t),Fp.y=0):(Fp.copy(this.euler),Fp.y=0),this.nonColliderRotOffset.makeRotationFromEuler(Fp)),t&&("walk"===this.moveMode?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*Lse),Eu.setFromAxisAngle(hKe,this.rot.x),dm.setFromAxisAngle(Ou,this.rot.y),dm.multiply(Eu),Eu.setFromAxisAngle(uKe,this.rot.z),dm.multiply(Eu),this.quaternion.copy(dm),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let a=ad.copy(o).multiplyScalar(i/this.pixelsPerMeter),l=null;this.didHit=!1;let c=new oe;for(let d=0;d<5;d++){let h=a.length(),u=$g.copy(a).normalize();if(l=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(c),this.colliderWorldQuat,u,this.object.rigidBody?.collider(0).shape,h,!1,24,void 0,void 0,this.object.rigidBody),null===l){0===d&&0!==this.directionXZ.manhattanLength()&&(this.lastHitObj=null),c.add(a);break}{this.didHit=!0;let p=this.sharedGameControlGlobals.colliderToEntity.get(l.collider.handle);if(p!==this.lastHitObj&&0===d){this.lastHitObj=p;let b=this.sharedGameControlGlobals.entityToCollisionEvents[p?.uuid];if(b)for(let x of b)if("character"===x.data.target){let P,w=this.sharedGameControlGlobals.rapierWorld?.getCollider(l.collider.handle)._parent;if(p.cloner)for(let A of p.cloner.children)if(A.rigidBody===w){P=A;break}x.dispatch(P),p.dispatchEvent(dU)}}let m=Dse.set(l.normal2.x,l.normal2.y,l.normal2.z).applyQuaternion(this.colliderWorldQuat),v=Ise.copy(u).multiplyScalar(l.toi).dot(m),g=l.toi;if(0===g&&(this.position.y+=this.offset*this.pixelsPerMeter),v>this.offset&&(g=l.toi*(v-this.offset)/v,c.addScaledVector(u,g)),a.copy(u).multiplyScalar(h-g),Math.acos(-m.y)>this.slopeThresh){let b=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(c),x=$g.copy(l.witness2).applyQuaternion(this.colliderWorldQuat);x.y=0;let w=b.add(x);w.y+=this.stepThresh;let P=this.sharedGameControlGlobals.rapierWorld.castShape(w,this.colliderWorldQuat,a,this.object.rigidBody?.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);null!==P&&0===P.toi&&(m.y=0,m.normalize())}a.addScaledVector(m,-a.dot(m))}}this.position.addScaledVector(c,this.pixelsPerMeter),this.object.rigidBody?.setTranslation(Rc.copy(this.position).divideScalar(this.pixelsPerMeter),!0),this.object.rigidBody?.setRotation(Eu.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let a=this.onObject?1:5,l=o.multiplyScalar(i/a);for(let c=0;c<a;c++)this.position.add(l),this.collisionAdjustment(i/a)}else this.position.addScaledVector(o,i);if("walk"===this.moveMode&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),!0===this.cameraFollow){this.updateFollowArms();let a=this.objectToTarget.add(this.position),l=this.targetToCamera.add(a);Yz.lookAt(l,a,Ou).setPosition(l),Yz.decompose(this.targetPos,this.targetQuat,Rc),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**r),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**r),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),"Limit"===this.cameraYAxis&&"cartesian"===this.orientMode&&(this.euler.y=gi.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=gi.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(yKe),!(this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(void 0===this.camera||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&("fly"===this.moveMode||!0===this.onObject||!1===this.collisionEnabled)&&(null===this.navMeshPathDest||this.navMeshPathDest.material.opacity<-.04*this.navMeshPathDest?.material?.userData.opacity0)||(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(vKe),0))}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let t,e=Eu.setFromAxisAngle(Ou,"Limit"===this.cameraYAxis&&"radial"!==this.orientMode?gi.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);("Locked"!==this.cameraYAxis||"radial"===this.orientMode)&&this.objectToTarget.applyQuaternion(e),t="Limit"===this.cameraXAxis?gi.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):gi.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let n=Rc.copy(this.cameraPolarAxis0);("Locked"!==this.cameraYAxis||"radial"===this.orientMode)&&n.applyQuaternion(e);let i=dm.setFromAxisAngle(n,t);"Locked"!==this.cameraYAxis&&this.targetToCamera.applyQuaternion(e),"Locked"!==this.cameraXAxis&&this.targetToCamera.applyQuaternion(i)}groundTiltAdjustment(e){180*Ou.angleTo(e)/Math.PI<15||180*Ou.angleTo(e)/Math.PI>85?Eu.identity():Eu.setFromUnitVectors(Ou,e),this.groundTilt.slerp(Eu,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){let t=Ise.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let n=Yz.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Rc,Eu,ad).compose(Rc,Eu,kse);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(r=>{if(r===this.object||r.isDescendantOf(this.object))return;Fh.makeEmpty(),r.updateMatrixWorldSVD();let s=r.matrixWorldRigid,o=Rse.copy(s).invert(),a=dKe.copy(Rse).multiply(n);fl.copy(this.collider.segment),fl.start.applyMatrix4(a),fl.end.applyMatrix4(a);let l=Dse.copy(this.position).applyMatrix4(o);Fh.expandByPoint(fl.start),Fh.expandByPoint(fl.end),Fh.min.addScalar(-this.collider.radius),Fh.max.addScalar(this.collider.radius),r.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder:c=>c.distanceToPoint(fl.end),intersectsBounds:c=>c.intersectsBox(Fh),intersectsTriangle:c=>{let d=Rc,h=ad,u=c.closestPointToSegment(fl,d,h);if(u<this.collider.radius){let p=this.collider.radius-u,m=h.sub(d).normalize(),v=$g.copy(l);v.addScaledVector(m,p);let g=v.applyMatrix4(s).sub(this.position);t.add(g),fl.start.addScaledVector(m,p),fl.end.addScaledVector(m,p)}}})}),Fh.makeEmpty(),fl.copy(this.collider.segment),fl.start.applyMatrix4(n),fl.end.applyMatrix4(n),Fh.expandByPoint(fl.start),Fh.expandByPoint(fl.end),Fh.min.addScalar(-this.collider.radius),Fh.max.addScalar(this.collider.radius),this.sharedGameControlGlobals.staticMeshBVH?.shapecast({traverseBoundsOrder:r=>r.distanceToPoint(fl.end),intersectsBounds:r=>r.intersectsBox(Fh),intersectsTriangle:r=>{let s=Rc,o=ad,a=r.closestPointToSegment(fl,s,o);if(a<this.collider.radius){let l=this.collider.radius-a,c=o.sub(s).normalize();this.alignToGround&&this.groundTiltAdjustment(c),t.addScaledVector(c,l),fl.start.addScaledVector(c,l),fl.end.addScaledVector(c,l)}}}),this.onObject=Math.abs(t.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let i=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(i),this.position.add(t)}},Fse=$z;Fse.isLocked=!1;var _Ke=al(j$());function hm(e,t){let n=new Pi;if(!e.getAttribute("position"))return n.setAttribute("position",new Qn([],3)),n.setIndex([]),n;let{positions:i,triIndices:r}=lT(e.getAttribute("position"),e.getIndex());return n.setAttribute("position",new Qn(i,3)),n.setIndex(r),t&&n.applyMatrix4(t),n}var bKe=new vn,xKe=new vn,Bp=[[0,0,0],[0,0,0],[0,0,0]];function Bse(e){let t=e.elements;Bp[0][0]=t[0],Bp[0][1]=t[4],Bp[0][2]=t[8],Bp[1][0]=t[1],Bp[1][1]=t[5],Bp[1][2]=t[9],Bp[2][0]=t[2],Bp[2][1]=t[6],Bp[2][2]=t[10];let{u:n,v:i}=(0,_Ke.SVD)(Bp),r=bKe.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),s=xKe.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1);return r.multiply(s.transpose())}var wKe=class extends oQ{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,n=[]){return e.forEach(i=>{i.visible&&this.intersectObject(i,t,n)}),n}createRaycastLineHelper(){let e=new _g({color:65280,linewidth:10}),t=new oe(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),n=new oe(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),i=this.camera.far-this.camera.near,r=(new oe).addVectors(t,n.multiplyScalar(i)),s=new Pi;return s.setFromPoints([t,r]),new SO(s,e)}},zse=e=>e instanceof Yb||e instanceof $b;function MKe(e,t){return e.distance-t.distance}function Use(e,t,n){if(Qf(t)&&t.visible){Cu(t)&&t.raycast(e,n);for(let i of t.children)Use(e,i,n)}}function UT(e,t,n,i=!1){if(!i&&!n.some(s=>void 0!==VT(e,s)))return[];let r=[];return t.children.forEach(s=>Use(e,s,r)),r.sort(MKe),r}function Kz(e){let t=[];if(e.length){let n=e[0].object;Qf(n)&&t.push(n);let i=n.parent;for(;i;)zse(i)&&t.push(i),i=i.parent}return t}function VT(e,t){if(Cu(t)){if(t.visible){let n=[];return t.raycast(e,n),n.length?n[0]:void 0}}else if(zse(t))return Vse(e,t)}function Vse(e,t){if(Qf(t)&&t.visible){if(Cu(t)){let n=[];if(t.raycast(e,n),n.length)return n[0]}for(let n of t.children){let i=Vse(e,n);if(i)return i}}}var Au=class{constructor(e){this.eventContext=e,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},Zz=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],jse=e=>Zz.find(([t,n])=>n===e)?.[0],zC=e=>Zz.find(([t])=>t===e)?.[1],SKe=(e,t)=>{let n=jse(e);if(n){let i=new CustomEvent(n,{bubbles:!0});return Object.defineProperty(i,"target",{writable:!1,value:t}),i}},EKe=class extends Au{constructor(e){super(e),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=n=>{if(!n.eventName||!n.target||"Scroll"===n.eventName)return;let i=this.splineEvents[jse(n.eventName)]?.[n.target.uuid];if(!i)return;"Scroll"===n.eventName&&void 0!==n.deltaY&&Object.assign(i,{deltaY:n.deltaY});let{domElement:r}=this.eventContext;r.dispatchEvent(i)};let{page:t}=this.eventContext;t.traverseEntity(n=>{if(n.data?.events.length)for(let[i,r]of Zz)if(n.data.events.some(s=>s.data.type===r&&!s.data.disabled)){this.objectsPerEvents.has(i)?this.objectsPerEvents.get(i)?.push(n):this.objectsPerEvents.set(i,[n]);let o=SKe(r,{id:n.uuid,name:n.name}),a=this.splineEvents[i];a?a[n.uuid]=o:this.splineEvents[i]={[n.uuid]:o}}})}connect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.removeEventListener("beginEvent",this.onBeginEvent)})})}},OKe=class{constructor(e,t,n,i,r,s){if(this.id=e,this.data=t,this.object=n,this.entered=!1,this.alreadyPlayedNonTogglingActions=new Set,this.useToggle="Toggle"===t.runMode,("KeyDown"===t.type||"KeyUp"===t.type||"KeyPress"===t.type)&&!t.key)throw new Error("Missing property");this.actions=Ic(t,t.actions,i,r,s,n)}disconnect(){pl(this.actions)}dispatchHeld(e){this.actions.Create.forEach(t=>{e&&t.dispatchThrottled.cancel(),t.dispatchThrottled()})}dispatch(e=!1){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this?(t.object.currentTransitionEvent=this,t.init()):"Once"===this.data.runMode&&this.alreadyPlayedNonTogglingActions.add(t)}),this.useToggle?(this.actions.Transition.forEach(t=>{t.toggle()}),this.actions.Animation.forEach(t=>{t.toggle()}),this.actions.SwitchCamera.forEach(t=>{t.toggle()})):"MousePress"===this.data.type||"KeyPress"===this.data.type?this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatchStart())):(this.actions.Transition.some(t=>t.playing)||this.actions.Transition.forEach(t=>{!1===this.alreadyPlayedNonTogglingActions.has(t)&&t.play()}),this.actions.SwitchCamera.some(t=>t.playing)||this.actions.SwitchCamera.forEach(t=>{t.play()}),this.actions.Animation.forEach(t=>{t.play()})),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),!1===e&&this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch())}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch())}},AKe=class extends Au{constructor(e,t,n){super(e),this.useForRaycastProperty=n,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=s=>{if(!0===this.useForRaycastProperty&&null===this.sceneInterects){this.eventContext.updateRaycaster(s);let{raycaster:o,page:a}=this.eventContext,l=UT(o,a,[],!0);this.sceneInterects=l,l.length&&(this.eventContext.sharedAssets.raycastProperty={x:l[0].point.x,y:l[0].point.y,z:l[0].point.z,objX:l[0].object.matrixWorld.elements[12],objY:l[0].object.matrixWorld.elements[13],objZ:l[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=s=>{(s.target===this.eventContext.domElement||"SPLINE-VIEWER"===s.target.tagName)&&this.canvasMouseEvents.forEach(o=>{("MouseDown"===o.data.type||"MousePress"===o.data.type)&&(this.onCanvasRaycast(s),o.dispatch())})},this.onCanvasMouseUp=s=>{(s.target===this.eventContext.domElement||"SPLINE-VIEWER"===s.target.tagName)&&this.canvasMouseEvents.forEach(o=>{"MouseUp"===o.data.type?(this.onCanvasRaycast(s),o.dispatch()):"MousePress"===o.data.type&&o.dispatchRelease()})},this.onMouseDown=s=>{zi.length>1||(this.eventContext.updateRaycaster(s),this.handleMouseEvent("MouseDown"))},this.onMouseUp=s=>{zi.length>1||(this.eventContext.updateRaycaster(s),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=s=>{zi.length>1||(this.eventContext.updateRaycaster(s),this.handleMousePressEvent())},this.onMousePressRelease=s=>{zi.length>1||(this.eventContext.updateRaycaster(s),this.handleMousePressEvent(!0))},this.onKeyDown=s=>{this.heldKeys[s.key]||(this.handleKeyEvent(s,"KeyDown"),this.handleKeyEventHeld(s,"KeyDown",!0)),this.heldKeys[s.key]=!0},this.onKeyUp=s=>{this.handleKeyEvent(s,"KeyUp"),this.handleKeyEventHeld(s,"KeyUp",!0)},this.onKeyPressDown=s=>{this.heldKeysPress[s.key]?this.handleKeyEventHeld(s,"KeyPress"):(this.handleKeyEvent(s,"KeyPress"),this.handleKeyEventHeld(s,"KeyPress",!0)),this.heldKeysPress[s.key]=!0},this.onKeyPressUp=s=>{this.handleKeyEvent(s,"KeyPress",!0)},this.releaseHeldKey=s=>{delete this.heldKeys[s.key]},this.releaseHeldKeyPress=s=>{delete this.heldKeysPress[s.key]},this._onUserEvent=({eventName:s,target:o,reverse:a})=>{if(!s||!o)return;let l=zC(s);l&&("MouseDown"===l||"MouseUp"===l||"MousePress"===l?(o.dispatchEvent({type:"beginEvent",eventName:l}),this.eventsPerObjects[l]?.[o.uuid]?.forEach(c=>{c.dispatchUserEvent(a)})):("KeyDown"===l||"KeyUp"===l||"KeyPress"===l)&&(o.dispatchEvent({type:"beginEvent",eventName:l}),this.eventsPerObjects[l]?.[o.uuid]?.forEach(c=>{c.dispatchUserEvent()})))};let{page:i,sharedAssets:r}=this.eventContext;i.traverseEntity(s=>{if(!s.data?.events.length)return;let o=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let a of o){let l=this.eventsPerObjects[a];s.data.events.filter(({data:c})=>c.type===a&&!0!==c.disabled).forEach(({id:c,data:d})=>{try{let h=new OKe(c,d,s,i,r,t);h.actions.Video.length&&(this.hasVideoAction=!0),"MouseDown"!==d.type&&"MouseUp"!==d.type&&"MousePress"!==d.type||"Canvas"!==d.mode&&"Window"!==d.mode?l[s.uuid]?l[s.uuid].push(h):l[s.uuid]=[h]:this.canvasMouseEvents.push(h)}catch{}}),l[s.uuid]?.length&&this.objectsPerTypes[a].push(s)}})}connect(){let{domElement:e}=this.eventContext;this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),e.addEventListener("pointerdown",this.onCanvasMouseDown),e.addEventListener("pointerup",this.onCanvasMouseUp),(this.objectsPerTypes.MouseDown?.length||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown)),this.objectsPerTypes.MouseUp?.length&&(this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),this.objectsPerTypes.MousePress?.length&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMousePressRelease)),this.objectsPerTypes.KeyDown?.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),this.objectsPerTypes.KeyUp?.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),this.objectsPerTypes.KeyPress?.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([t,n])=>{n.forEach(i=>{i.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onCanvasMouseDown),e.removeEventListener("pointerup",this.onCanvasMouseUp),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(t=>{Object.values(t).forEach(n=>{n.forEach(i=>{i.disconnect()})})}),this.canvasMouseEvents.forEach(t=>{t.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([t,n])=>{n.forEach(i=>{i.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){let{stopRaycast:t,raycaster:n,page:i}=this.eventContext,r=this.objectsPerTypes[e];if(r.length||this.useForRaycastProperty){if(t||this.useForRaycastProperty){let s;null===this.sceneInterects?s=UT(n,i,r,this.useForRaycastProperty):(s=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&s.length&&(this.eventContext.sharedAssets.raycastProperty={x:s[0].point.x,y:s[0].point.y,z:s[0].point.z,objX:s[0].object.matrixWorld.elements[12],objY:s[0].object.matrixWorld.elements[13],objZ:s[0].object.matrixWorld.elements[14]}),t&&Kz(s).forEach(o=>{this.eventsPerObjects[e][o.uuid]&&this.handleObjectMouseEventDispatch(o,e)})}t||r.forEach(s=>{VT(n,s)&&this.handleObjectMouseEventDispatch(s,e)})}}handleMousePressEvent(e=!1){let t="MousePress",n=this.objectsPerTypes[t],i=[];if(n.length){if(!e){let{stopRaycast:r,raycaster:s,page:o}=this.eventContext;if(r){let a=UT(s,o,n);i=Kz(a)}else n.forEach(a=>{VT(s,a)&&i.push(a)})}this._prevObjects.length&&this._prevObjects.forEach(r=>{i.includes(r)||this.handleObjectMouseEventDispatchRelease(r,t)}),i.length&&i.forEach(r=>{this.handleObjectMouseEventDispatch(r,t)}),this._prevObjects=i}}handleObjectMouseEventDispatch(e,t){e.dispatchEvent({type:"beginEvent",eventName:t}),this.eventsPerObjects[t]?.[e.uuid]?.forEach(n=>{n.dispatch()})}handleObjectMouseEventDispatchRelease(e,t){e.dispatchEvent({type:"beginEvent",eventName:t}),this.eventsPerObjects[t]?.[e.uuid]?.forEach(n=>{n.dispatchRelease()})}handleKeyEvent(e,t,n=!1){this.objectsPerTypes[t].forEach(i=>{let r=this.eventsPerObjects[t][i.uuid];r.some(({data:s})=>"key"in s&&s.key===e.key)&&i.dispatchEvent({type:"beginEvent",eventName:t}),r.forEach(s=>{"key"in s.data&&s.data.key===e.key&&(n?s.dispatchRelease():s.dispatch(!0))})})}handleKeyEventHeld(e,t,n=!1){this.objectsPerTypes[t].forEach(i=>{this.eventsPerObjects[t][i.uuid].forEach(r=>{"key"in r.data&&r.data.key===e.key&&r.dispatchHeld(n)})})}},TKe=new oe,DKe=new oe,Hse=class{constructor(e,t,n,i,r){this.actionsIn=Ic(e,e.inActions,n,i,r,t),this.actionsOut=Ic(e,e.outActions,n,i,r,t)}disconnect(){pl(this.actionsIn),pl(this.actionsOut)}},IKe=class extends Hse{constructor(e,t,n,i,r,s){super(t,n,i,r,s),this.id=e,this.data=t,this.object=n,this.stage="out",this.objects=[],this.onUpdateMatrixWorld=()=>{for(let u of this.objects)if(!u.visible)return;let c=TKe.setFromMatrixPosition(this.objects[0].matrixWorld),d=DKe.setFromMatrixPosition(this.objects[1].matrixWorld),h=c.distanceTo(d)<=this.distance?"in":"out";if(this.stage!==h){this.stage=h;let u="in"===h?this.actionsIn:this.actionsOut;u.Audio.forEach(p=>p.dispatchConditional()),u.Video.forEach(p=>p.dispatchConditional()),u.Link.forEach(p=>p.dispatch()),u.Create.forEach(p=>p.dispatch()),u.Destroy.forEach(p=>p.dispatch()),u.Reset.forEach(p=>p.dispatch()),u.Transition.forEach(p=>{p.object.currentTransitionEvent!==this&&(p.object.currentTransitionEvent=this),p.init()}),u.Transition.forEach(p=>p.play()),u.Animation.forEach(p=>p.play()),u.SwitchCamera.forEach(p=>p.play()),u.SceneTransition.forEach(p=>p.dispatch()),u.SetVariable.forEach(p=>p.checkConditions()),u.SetVariable.forEach(p=>p.dispatch()),u.DynamicVariablePlay.forEach(p=>p.dispatch())}};let{distance:o,fromObject:a,toObject:l}=t.condition;this.distance=o;for(let c of[a,l]){if(!c)throw new Error("Missing property");let d=i.find(c);if(!d)throw new Error("Missing property");this.objects.push(d)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)}),this.onUpdateMatrixWorld()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)})}},RKe=class extends Hse{constructor(e,t,n,i,r,s){super(t,n,i,r,s),this.id=e,this.data=t,this.object=n,this.onBegin=({state:c})=>{this.toState!==c&&(this.actionsOut.Audio.forEach(d=>d.dispatchConditional()),this.actionsOut.Video.forEach(d=>d.dispatchConditional()),this.actionsOut.Link.forEach(d=>d.dispatch()),this.actionsOut.Create.forEach(d=>d.dispatch()),this.actionsOut.Destroy.forEach(d=>d.dispatch()),this.actionsOut.Reset.forEach(d=>d.dispatch()),this.actionsIn.Transition.forEach(d=>d.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(d=>d.play()),this.actionsOut.Animation.forEach(d=>d.play()),this.actionsIn.SwitchCamera.forEach(d=>d.pause()),this.actionsOut.SwitchCamera.forEach(d=>d.play()),this.actionsOut.SceneTransition.forEach(d=>d.dispatch()),this.actionsOut.SetVariable.forEach(d=>d.checkConditions()),this.actionsOut.SetVariable.forEach(d=>d.dispatch()),this.actionsOut.DynamicVariablePlay.forEach(d=>d.dispatch()))},this.onComplete=({state:c})=>{this.toState===c&&(this.actionsIn.Audio.forEach(d=>d.dispatchConditional()),this.actionsIn.Video.forEach(d=>d.dispatchConditional()),this.actionsIn.Link.forEach(d=>d.dispatch()),this.actionsIn.Create.forEach(d=>d.dispatch()),this.actionsIn.Destroy.forEach(d=>d.dispatch()),this.actionsIn.Reset.forEach(d=>d.dispatch()),this.actionsOut.Transition.forEach(d=>d.pause()),this.actionsOut.Transition.forEach(d=>d.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(d=>d.play()),this.actionsIn.Animation.forEach(d=>d.play()),this.actionsOut.SwitchCamera.forEach(d=>d.pause()),this.actionsIn.SwitchCamera.forEach(d=>d.play()),this.actionsIn.SceneTransition.forEach(d=>d.dispatch()),this.actionsIn.SetVariable.forEach(d=>d.checkConditions()),this.actionsIn.SetVariable.forEach(d=>d.dispatch()),this.actionsIn.DynamicVariablePlay.forEach(d=>d.dispatch()))};let{condition:o}=t;if(!o.object)throw new Error("Missing property");let a=i.find(o.object);if(!a)throw new Error("Missing property");if(this.toObject=a,o.state&&!this.toObject.states?.[o.state])throw new Error("Missing property");this.toState=o.state}connect(){jv(this.actionsOut).forEach(e=>{this.actionsOut[e]?.length&&this.toObject.addEventListener("beginState",this.onBegin)}),jv(this.actionsIn).forEach(e=>{this.actionsIn[e]?.length&&this.toObject.addEventListener("completeState",this.onComplete)})}disconnect(){super.disconnect(),jv(this.actionsOut).forEach(e=>{this.actionsIn[e]?.length&&this.toObject.removeEventListener("beginState",this.onBegin)}),jv(this.actionsIn).forEach(e=>{this.actionsIn[e]?.length&&this.toObject.removeEventListener("completeState",this.onComplete)})}},kKe=class extends Au{constructor(e,t){super(e),this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1;let{page:n,sharedAssets:i}=this.eventContext;n.traverseEntity(r=>{if(r.data?.events.length)for(let{id:s,data:o}of r.data.events)if(!o.disabled&&"Conditional"===o.type)try{let a;"Comparison"===o.condition.type||("Distance"===o.condition.type?a=new IKe(s,o,r,n,i,t):"State"===o.condition.type&&(a=new RKe(s,o,r,n,i,t))),a&&(this.eventsPerConditions[o.condition.type].push(a),(a.actionsIn.Video.length||a.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}})}connect(){super.connect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.disconnect()))}},UC=new oe,Kg=new oe,f1=new oe,Gse=new Gd,Es=new oe,Za=new oe,Wse=new oe,m1=new Qi,Qz=new cl,LKe=new vn,Jz=new ia,tx=new oe,zp=new oe;function eU(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}var FKe=function(){let e=new vn;return(t,n,i)=>{let r=t.obj;e.copy(r.hiddenMatrix),null!==r.parent&&e.premultiply(r.parent.matrixWorld),e.invert(),r.position.copy(n),"global"===t.reference&&eU(r.position,t.limits),r.position.applyMatrix4(e),"parent"===t.reference?eU(r.position,t.limits):"local"===t.reference&&(m1.copy(t.quat0).invert(),r.position.sub(t.position0),r.position.applyQuaternion(m1),eU(r.position,t.limits),m1.invert(),r.position.applyQuaternion(m1),r.position.add(t.position0)),e.multiply(i??r.matrixWorld).decompose(Es,r.quaternion,Za),r.updateMatrix(),r.hasNonUniformScale&&(r.updateMatrixWorld(),r.updateMatrixWorldSVD()),r instanceof Jc&&om(r.parent)&&r.invalidateDownstreamBooleanData(!0)}}(),zKe=class extends Au{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=i=>{if(zi.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:r,page:s}=this.eventContext,o=s.raycastWithClones(r);if(this.lastDropDestination=null,0!==o.length){for(let a of this.events){let l=0;for(let{obj:c,pointEnd:d,pointStart:h}of a.dragItems){if(c===o[0].object||c===o[0].object.object||es.is(c)&&c.isAncestorOf(o[0].object.uuid)){if(a.activeIdx=l,a.activeDragItem.reset=!1,a.activeDragItem.currentDampingFactor=a.data.dampingFactor,a.activeDragItem.snapped=!1,"hand"===a.data.cursor&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){a.activeDragItem.obj.rigidBody&&a.activeDragItem.obj.rigidBody.setBodyType(2,!0);let u=a.activeDragItem.obj;c.hasNonUniformScale&&c.updateMatrixWorldSVD(),(u.hasNonUniformScale?u.matrixWorldRigid:u.matrixWorld).decompose(Es,m1,Za),Qz.setFromQuaternion(m1),void 0===u.prevR?(u.prevR=Qz.clone(),u.prevT=Es.clone()):(u.prevR.copy(Qz),u.prevT.copy(Es)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(a.activeDragItem.obj)}return this.calcPlaneIntersectPos(c,h,a.data.plane,a.data.referenceFrame),d.copy(h),(this.eventManager.controlsManager.usePhysics&&"dynamic"===c.data.physics?.rigidBody||!1===a.data.drop||!1===a.data.resetOnSnapFail)&&a.activeDragItem.fromPosition.setFromMatrixPosition(a.activeDragItem.obj.matrixWorld),this.activeEvent=a,void(this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1))}l++}}this.activeEvent=null}else this.activeEvent=null},this.onPointerMove=i=>{if(zi.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:r,page:s}=this.eventContext,o=s.raycastWithClones(r);if(0!==zi.length){if(this.activeEvent&&this.activeEvent.activeDragItem){let l,a=this.activeEvent.activeDragItem;if(a.snapped=!1,this.activeEvent.data.drop&&(l=o.filter(c=>a.obj!==c.object&&!a.obj.isAncestorOf(c.object.uuid)&&!(c.object instanceof Yb)&&("all"===this.activeEvent.data.dropOn||this.activeEvent.dropDestIds.some(d=>d===c.object.uuid||s.scene.find(d).isAncestorOf(c.object.uuid))))[0]),l){let c=Wse.copy(l.face.normal).applyMatrix3(Jz.getNormalMatrix(l.object.matrixWorld));if("center"===this.activeEvent.data.snapTo)a.fromPosition.setFromMatrixPosition(l.object.matrixWorld);else if("surface"===this.activeEvent.data.snapTo){if(a.fromPosition.copy(l.point),"bbox"===this.activeEvent.data.snapSurfaceMode){Es.copy(c).applyMatrix3(Jz.setFromMatrix4(a.obj.matrixWorld).transpose());let d=a.obj;Es.x>.2?Za.x=-d.recursiveBBox.min.x:Es.x<-.2&&(Za.x=-d.recursiveBBox.max.x),Es.y>.2?Za.y=-d.recursiveBBox.min.y:Es.y<-.2&&(Za.y=-d.recursiveBBox.max.y),Es.z>.2?Za.z=-d.recursiveBBox.min.z:Es.z<-.2&&(Za.z=-d.recursiveBBox.max.z),Za.applyMatrix3(Jz.invert())}else Za.copy(c).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);a.fromPosition.add(Za)}this.activeEvent.data.autoOrient&&(Es.set(0,1,0).cross(c),Es.length()<1e-4&&Es.set(-1,0,0).cross(c),Za.crossVectors(Wse,Es),a.orientationMatrix.makeBasis(Es,Za,c)),a.pointStart.copy(a.fromPosition),a.pointEnd.copy(a.pointStart),a.currentDampingFactor=this.activeEvent.snapDampingFactor,a.snapped=!0,this.lastDropDestination!==l.object&&(this.lastDropDestination=l.object,this.activeEvent.actionsDrop.Transition.forEach(d=>{d.play()}),this.activeEvent.actionsDrop.Animation.forEach(d=>{d.play()}),this.activeEvent.actionsDrop.Audio.forEach(d=>{d.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(d=>{d.dispatchThrottled()}))}else a.orientationMatrix.makeRotationFromQuaternion(a.quat0),this.lastDropDestination=null,a.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(a.obj,a.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(c=>{c.stop(),null!==c.object.currentState&&c.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(c=>{c.stop()}),this.activeEvent.actionsDrop.Audio.forEach(c=>{c.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(c=>{c.dispatchThrottled()}),this.activeEvent.actionsDrag.SetVariable.forEach(c=>c.checkConditions()),this.activeEvent.actionsDrag.SetVariable.forEach(c=>c.dispatch()),this.activeEvent.actionsDrag.DynamicVariablePlay.forEach(c=>c.dispatch()),!1===this.activeEvent.wasDragEventTriggered&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(c=>{c.play()}),this.activeEvent.actionsDrag.Animation.forEach(c=>{c.play()}),this.activeEvent.actionsDrag.Audio.forEach(c=>{c.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(c=>{c.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(c=>{c.stop(),null!==c.object.currentState&&c.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(c=>{c.stop()}))},500),this.updateDragItem(a),a.obj.dispatchEvent({type:"requestRender"})}}else{let a=!1;for(let l of this.events){for(let{obj:c}of l.dragItems)if(c===o[0]?.object||c===o[0]?.object?.object||es.is(c)&&c.isAncestorOf(o[0]?.object.uuid)){switch(a=!0,l.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move")}break}if(a)break}a||this.setCursor("default")}},this.onPointerUp=i=>{if(this.activeEvent&&this.activeEvent.activeDragItem){"hand"===this.activeEvent.data.cursor&&this.setCursor("grab");let r="dynamic"===this.activeEvent.activeDragItem.obj.data.physics?.rigidBody;!1===this.activeEvent.activeDragItem.snapped&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(!1===this.eventManager.controlsManager.usePhysics||!r)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&r&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),!0===this.activeEvent.wasDragEventTriggered&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(s=>{s.stop(),null!==s.object.currentState&&s.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(s=>{s.stop()}),this.activeEvent.actionsDrag.Audio.forEach(s=>{s.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.SetVariable.forEach(s=>s.checkConditions()),this.activeEvent.actionsDrop.SetVariable.forEach(s=>s.dispatch()),this.activeEvent.actionsDrop.DynamicVariablePlay.forEach(s=>s.dispatch())),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}};let n={};e.page.traverseEntity(i=>{i.component&&(n[i.component.uuid]?n[i.component.uuid].push(i.uuid):n[i.component.uuid]=[i.uuid])}),e.page.traverseEntity(i=>{i.data?.events.filter(r=>"DragDrop"===r.data.type&&!r.data.disabled).forEach(r=>{this.events.push(new class{constructor(e,t,n,i,r,s){this.object=e,this.data=t,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=0===this.data.resetSpeed?1:8/this.data.resetSpeed+1,this.snapDampingFactor=0===this.data.snapSpeed?1:8/this.data.snapSpeed+1,this.actionsDrag=Ic(t,t.dragDropActions.drag,n,i,r,this.object),this.actionsDrop=Ic(t,t.dragDropActions.drop,n,i,r,this.object);let o=[];this.data.objects.forEach(a=>{let l=n.find(a);!l||!1!==l.data.visible&&(o.push(l),s[l.uuid]&&s[l.uuid].forEach(c=>{let d=n.find(c);!d||!1!==d.data.visible&&o.push(d)}))}),this.data.dropDestinations.forEach(a=>{let l=n.find(a);!l||!1!==l.data.visible&&(this.dropDestIds.push(l.uuid),s[l.uuid]&&s[l.uuid].forEach(c=>{let d=n.find(c);!d||!1!==d.data.visible&&this.dropDestIds.push(d.uuid)}))}),this.dragItems=o.map(a=>("locked"===this.data.planeMode&&(a.userData.lockedPlane=!0),a.userData.worldPosition0=(new oe).setFromMatrixPosition(a.matrixWorld),{obj:a,fromPosition:(new oe).setFromMatrixPosition(a.matrixWorld),pointStart:new oe,pointEnd:new oe,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:(new oe).copy(a.position),quat0:(new Qi).copy(a.quaternion),snapped:!1,orientationMatrix:new vn,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return null!==this.activeIdx?this.dragItems[this.activeIdx]:null}dispose(){pl(this.actionsDrag),pl(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}}(i,r.data,e.page,e.sharedAssets,t,n))})})}connect(){if(!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let e=this.eventContext.domElement;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointermove",this.onPointerMove),e.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(t=>t.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let t of e.dragItems)t.paused||this.updateDragItem(t,!0)}calcPlaneIntersectPos(e,t,n,i){let{getCamera:r,raycaster:s}=this.eventContext;r().getWorldDirection(Kg),Kg.negate();let o=m1.identity();switch("parent"===i?LKe.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(Es,o,Za):"local"===i&&e.matrixWorld.decompose(Es,o,Za),n){case"x":Es.set(1,0,0).applyQuaternion(o),tx.copy(Kg).cross(Es),zp.copy(Es).cross(tx);break;case"y":Es.set(0,1,0).applyQuaternion(o),tx.copy(Kg).cross(Es),zp.copy(Es).cross(tx);break;case"z":Es.set(0,0,1).applyQuaternion(o),tx.copy(Kg).cross(Es),zp.copy(Es).cross(tx);break;case"xy":zp.set(0,0,1).applyQuaternion(o);break;case"yz":zp.set(1,0,0).applyQuaternion(o);break;case"xz":zp.set(0,1,0).applyQuaternion(o);break;case"adaptive":Kg.angleTo(Za.set(0,1,0))>Math.PI/6?(Es.crossVectors(Za.set(0,1,0),Kg),zp.crossVectors(Es,Za)):zp.set(0,1,0);break;default:zp.copy(Kg)}f1.setFromMatrixPosition(e.matrixWorld);let a=e.userData.lockedPlane?e.userData.worldPosition0:f1;if(Gse.setFromNormalAndCoplanarPoint(zp,a),s.ray.intersectPlane(Gse,t)&&("x"===n||"y"===n||"z"===n)){let l=Za.subVectors(t,a).dot(Es);t.copy(a).addScaledVector(Es,l)}}updateDragItem(e,t=!1){f1.setFromMatrixPosition(e.obj.matrixWorld),"current"===e.reset?UC.subVectors(e.fromPosition,f1).divideScalar(e.currentDampingFactor):"original"===e.reset?(UC.subVectors(e.obj.userData.worldPosition0,f1).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):UC.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(f1).divideScalar(e.currentDampingFactor),e.paused=!(e.currentDampingFactor>1)||UC.length()<.01,(this.activeEvent&&1===this.activeEvent.data.dampingFactor||t)&&FKe(e,UC.add(f1),this.activeEvent?.data.drop&&this.activeEvent?.data.autoOrient?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},ix=new oe,tU=new oe,um=new oe,pm=new oe,qse=new Gd,VKe={type:"requestRender"},jKe=function(){let e=new oe,t=new oe;return(n,i,r)=>r>0?(e.subVectors(n,i),e.length()<=r?n:t.copy(i).add(e.normalize().multiplyScalar(r))):i}(),Xse=function(){let e=new vn;return(t,n)=>{t.position.copy(n),null!==t.parent&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof Jc&&om(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),GKe=class extends Au{constructor(e,t){super(e),this.events=[],this.pairOfEventListeners=[],this.onMouseMove=i=>{if(!(zi.length>1)){this.eventContext.updateRaycaster(i);for(let r of this.events)void 0===r.target&&this.updateSingleEvent(r)}},this.onMouseEnter=i=>{for(let r of this.events)void 0===r.target&&(r.isReset=!1,r.currentDampingFactor=r.data.dampingFactor)},this.onMouseLeave=i=>{for(let r of this.events)void 0===r.target&&(r.data.resetOnPointerLeave&&(r.isReset=!0,r.currentDampingFactor=r.resetDampingFactor),this.updateSingleEvent(r))},this.onTargetChange=i=>()=>{this.updateSingleEvent(i)};let{page:n}=this.eventContext;n.traverseEntity(i=>{let r=i.data?.events.find(s=>"Follow"===s.data.type&&!s.data.disabled);r&&(!n.data.globalPhysics.usePhysics||"dynamic"!==i.dataPatched.physics?.rigidBody)&&this.events.push(new class{constructor(e,t,n,i,r){this.data=e,this.object=t,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new oe,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...r5.defaultData,...e,...void 0===e.resetOnPointerLeave&&{resetOnPointerLeave:!1}},void 0===e.target||"cursor"===e.target||(this.target=n.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=Ic(e,e.actions,n,i,r,t)}}(r.data,i,n,e.sharedAssets,t))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Wd&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let n of this.events)if(void 0!==n.target){let i=n.target,r=this.onTargetChange(n);this.pairOfEventListeners.push([i,r]),i.addEventListener("requestRender",r)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Wd&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[n,i]of this.pairOfEventListeners)n.removeEventListener("requestRender",i);for(let n of this.events)n.paused=!0,n.isReset=!1,pl(n.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,t=!1){this.events.forEach(o=>{o.actions.Create.forEach(a=>{a.dispatchThrottled()})});let{plane:n,limitDistance:i,limitDistanceEnabled:r}=e.data;if(e.object.getWorldPosition(um),e.isReset)pm.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(pm);else{let{getCamera:o,raycaster:a}=this.eventContext;if("custom"===n?(o().getWorldDirection(tU),tU.negate(),ix.copy(tU)):"xy"===n?ix.set(0,0,1):"xz"===n?ix.set(0,1,0):"yz"===n&&ix.set(1,0,0),qse.setFromNormalAndCoplanarPoint(ix,um),!a.ray.intersectPlane(qse,pm))return}if(!e.isReset)if(pm.distanceTo(e.worldPosition0)>i&&r&&e.target){if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&null!==e.timeoutId&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,!e.data.resetAfterDistanceLimit)return;pm.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor}else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},1e3*e.data.snapDelay)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),!1===e.delayFinished)return;!1===e.data.enabledTranslation[0]&&(pm.x=um.x),!1===e.data.enabledTranslation[1]&&(pm.y=um.y),!1===e.data.enabledTranslation[2]&&(pm.z=um.z);let s=jKe(um,pm,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let o=ix.subVectors(s,um).divideScalar(e.currentDampingFactor);um.add(o),t&&Xse(e.object,um),e.paused=o.length()<.01}else Xse(e.object,s),e.paused=!0;e.object?.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(VKe)}},VC=new oe,jT=new oe,jC=new vn,rx=new Qi,Zg=new Qi,HC=new oe,GC=new oe,g1=new oe,fm=new oe,nU=new Gd,qKe={type:"requestRender"},XKe={type:"changeRotation"},Yse=function(){let e=new vn;return function(t,n){null!==t.parent?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),n.premultiply(Bse(e).invert()),t.rotation.setFromRotationMatrix(n),t.updateMatrix(),t instanceof Jc&&om(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),$Ke=class extends Au{constructor(e){super(e),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=n=>{if(!(zi.length>1)){this._lastMouseEvent=n,this.eventContext.updateRaycaster(n);for(let i of this.events)void 0===i.target&&this.updateSingleEvent(i)}},this.onMouseEnter=n=>{for(let i of this.events)void 0===i.target&&(i.isReset=!1,i.currentDampingFactor=i.data.dampingFactor)},this.onMouseLeave=n=>{for(let i of this.events)void 0===i.target&&(i.data.resetOnPointerLeave&&(i.isReset=!0,i.currentDampingFactor=i.resetDampingFactor),this.updateSingleEvent(i))},this.onScroll=n=>{if(this._lastMouseEvent){let i=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(i)}},this.onTargetChange=n=>()=>{this.updateSingleEvent(n)},this.createUserEventListener=n=>({eventName:i,target:r})=>{if(!i||!r)return;let s=zC(i);s&&"LookAt"===s&&this.updateSingleEvent(n)};let{page:t}=this.eventContext;t.traverseEntity(n=>{let i=n.data?.events.find(r=>"LookAt"===r.data.type&&!r.data.disabled);i&&(!t.data.globalPhysics.usePhysics||"dynamic"!==n.dataPatched.physics?.rigidBody)&&this.events.push(new class{constructor(e,t,n){this.object=t,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new Qi,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...s5.defaultData,...e,...void 0===e.resetOnPointerLeave&&{resetOnPointerLeave:!1}},void 0===e.target||"cursor"===e.target||(this.target=n.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}}(i.data,n,t))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Wd&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?t.addEventListener("scroll",this.onScroll):(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let n of this.events){if(void 0!==n.target){let s=this.onTargetChange(n),o=n.target;this.pairOfEventListeners.push([o,s]),o.addEventListener("requestRender",s)}let i=this.createUserEventListener(n),r=n.object;this.pairOfUserEventListeners.push([r,i]),r.addEventListener("userEvent",i)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Wd&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),t.removeEventListener("scroll",this.onScroll);for(let[n,i]of this.pairOfEventListeners)n.removeEventListener("requestRender",i);for(let[n,i]of this.pairOfUserEventListeners)n.removeEventListener("userEvent",i);for(let n of this.events)n.paused=!0,n.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){let{tilt:t,axis:n,distance:i,plane:r,limitDistance:s,enabledRotation:o,limitDistanceEnabled:a}=e.data,{getCamera:l,raycaster:c}=this.eventContext,{object:d,target:h}=e;if(d.getWorldPosition(HC),!e.isReset)if(e.target)e.target.getWorldPosition(GC);else{if("custom"===r?(l().getWorldDirection(jT),jT.negate(),nU.setFromNormalAndCoplanarPoint(jT,HC)):("xy"===r?VC.set(0,0,1):"xz"===r?VC.set(0,1,0):"yz"===r&&VC.set(1,0,0),nU.setFromNormalAndCoplanarPoint(VC,HC)),!c.ray.intersectPlane(nU,GC))return;i>0&&("custom"===r||void 0===r)&&GC.addScaledVector(jT,i)}if(e.isReset||(h?"target"===t?g1.copy(h.up).applyMatrix4(jC.extractRotation(h.matrixWorld)).normalize():o.some(u=>!1===u)?("x"===n?(fm.set(0,0,1),!1===o[2]&&fm.set(0,1,0)):"y"===n?(fm.set(1,0,0),!1===o[0]&&fm.set(0,0,1)):(fm.set(0,1,0),!1===o[1]&&fm.set(1,0,0)),g1.copy(fm).applyQuaternion(e.worldQuaternion0).normalize()):g1.set(0,1,0):"custom"===r?g1.set(0,1,0):g1.copy(VC)),e.isReset)Zg.copy(e.worldQuaternion0);else if(HC.distanceTo(GC)>s&&a&&h){if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&null!==e.timeoutId&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,!e.data.resetAfterDistanceLimit)return;Zg.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor}else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},1e3*e.data.snapDelay)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),!1===e.delayFinished)return;(function KKe(e,t,n,i,r,s){let o=e.elements;da.subVectors(t,n),0===da.lengthSq()&&(da.z=1),da.normalize(),Qa.crossVectors(i,da),0===Qa.lengthSq()&&(1===Math.abs(i.z)?da.x+=1e-4:da.z+=1e-4,da.normalize(),Qa.crossVectors(i,da)),Qa.normalize(),Bh.crossVectors(da,Qa),"x"===r?1===s.z?[Qa,Bh,da]=[da,Qa,Bh]:(Qa.negate(),[Qa,da]=[da,Qa]):"y"===r?1===s.x?[Qa,Bh,da]=[Bh,da,Qa]:(Qa.negate(),[Bh,da]=[da,Bh]):1===s.x&&(Qa.negate(),[Qa,Bh]=[Bh,Qa]),o[0]=Qa.x,o[4]=Bh.x,o[8]=da.x,o[1]=Qa.y,o[5]=Bh.y,o[9]=da.y,o[2]=Qa.z,o[6]=Bh.z,o[10]=da.z})(jC,GC,HC,g1,n,fm),Zg.setFromRotationMatrix(jC),rx.setFromUnitVectors(fm.applyQuaternion(Zg),g1),o.some(u=>!1===u)&&"target"!==t&&Zg.premultiply(rx).normalize()}e.currentDampingFactor>1?(d.updateWorldMatrix(!0,!1),rx.setFromRotationMatrix(Bse(d.matrixWorld)),rx.slerp(Zg,1/e.currentDampingFactor),Yse(d,jC.makeRotationFromQuaternion(rx)),e.paused=8*(1-rx.dot(Zg))<1e-6):(Yse(d,jC.makeRotationFromQuaternion(Zg)),e.paused=!0),e.object?.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),d.dispatchEvent(qKe),d.dispatchEvent(XKe)}},Bh=new oe,Qa=new oe,da=new oe,ZKe=class{constructor(e,t,n,i,r,s){this.id=e,this.data=t,this.object=n,this.entered=!1,this.actions=Ic(t,t.actions,i,r,s,n)}disconnect(){pl(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch())}},QKe=class extends Au{constructor(e,t){super(e),this.eventsPerObjects={},this.objects=[],this._prevObjects=[],this.onMouseDown=r=>{zi.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseHoverEvent())},this.onMouseUp=r=>{zi.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=r=>{zi.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:r,target:s,reverse:o})=>{if(!r||!s)return;let a=zC(r);a&&"MouseHover"===a&&(s.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),this.eventsPerObjects[s.uuid]?.forEach(l=>l.dispatchUserEvent(o)))};let{page:n,sharedAssets:i}=this.eventContext;n.traverseEntity(r=>{if(r.visible&&r.data?.events.length){for(let{id:s,data:o}of r.data.events)if(!o.disabled&&"MouseHover"===o.type)try{let a=new ZKe(s,o,r,n,i,t);this.eventsPerObjects[r.uuid]?this.eventsPerObjects[r.uuid].push(a):this.eventsPerObjects[r.uuid]=[a]}catch{}this.eventsPerObjects[r.uuid]?.length&&this.objects.push(r)}})}connect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Wd&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(t=>{t.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Wd&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(t=>{t.forEach(n=>{n.disconnect()})}),this.objects.forEach(t=>{t.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:n,raycaster:i,page:r}=this.eventContext;if(n){let s=UT(i,r,this.objects);t=Kz(s)}else this.objects.forEach(s=>{VT(i,s)&&t.push(s)})}this._prevObjects.length&&this._prevObjects.forEach(n=>{t.includes(n)||(n.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),this.eventsPerObjects[n.uuid]?.forEach(i=>i.dispatchLeave()))}),t.length&&t.forEach(n=>{n.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),this.eventsPerObjects[n.uuid]?.forEach(i=>i.dispatchEnter())}),this._prevObjects=t}},JKe=class{constructor(e,t,n,i,r,s){this.id=e,this.data=t,this.object=n,this.scrollCounter=0,this.actions=Ic(t,t.actions,i,r,s,n)}connect(){this.scrollCounter=0}disconnect(){pl(this.actions)}dispatch(e){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())});let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let n=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(i=>i.seek(n)),this.actions.Animation.forEach(i=>i.seek(t)),this.actions.Create.forEach(i=>i.dispatchThrottled()),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch())}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch())}},eZe=class{constructor(e,t,n,i,r,s,o){this.id=e,this.data=t,this.object=n,this.domElement=s,this.eventManager=o,this.scrollStart=0,this.scrollEnd=0,this.actions=Ic(t,t.actions,i,r,o,n)}computeScrollBounds(){let e=this.domElement.getBoundingClientRect(),t=document.body,n=document.documentElement,i=window.pageYOffset||n.scrollTop||t.scrollTop,s=Math.round(e.top+i-(n.clientTop||t.clientTop||0));if("enter"===this.data.startFrom){let o=window.innerHeight,a=e.height,l=this.data.enterAnchor;this.scrollStart=s-("top"===l?o:"bottom"===l?o-a:o-.5*a)}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.box=e,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){pl(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return void 0===this.box||0===this.box.width&&0===this.box.height&&0===this.box.top&&0===this.box.bottom}computeScroll({y:t}){this.actions.Transition.forEach(r=>{r.object.currentTransitionEvent!==this&&(r.object.currentTransitionEvent=this,r.init())});let i=Math.min(1,Math.max(0,(t-this.scrollStart)/(this.scrollEnd-this.scrollStart)));this.actions.Transition.forEach(r=>r.seek(i)),this.actions.Animation.forEach(r=>r.seek(i)),this.actions.Create.forEach(r=>r.dispatchThrottled()),this.actions.SetVariable.forEach(r=>r.checkConditions()),this.actions.SetVariable.forEach(r=>r.dispatch()),this.actions.DynamicVariablePlay.forEach(r=>r.dispatch())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch())}},tZe=class extends Au{constructor(e,t){super(e),this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([o,a])=>{a.forEach(l=>l.handleResize())})},this.onScroll=o=>{if(!this.isInview)return;let a={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([l,c])=>{l.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:a}),c.forEach(d=>d.dispatch(a))})},this.onWheel=o=>{!this.isInview||o.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([a,l])=>{a.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:o.deltaY}),l.forEach(c=>c.dispatch(o.deltaY))})},this.onUserEvent=({eventName:o,target:a,reverse:l})=>{if(!o||!a)return;let c=zC(o);c&&"Scroll"===c&&(a.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),this.wheelEventsPerObject.get(a)?.forEach(d=>{d.dispatchUserEvent(l)}))};let{page:n,sharedAssets:i,domElement:r,isExport:s}=this.eventContext;n.traverseEntity(o=>{if(o.data?.events.length)for(let{id:a,data:l}of o.data.events)if(!l.disabled&&"Scroll"===l.type)if("load"!==l.trigger&&s){let c=new eZe(a,l,o,n,i,r,t);this.scrollEventsPerObject.has(o)?this.scrollEventsPerObject.get(o)?.push(c):this.scrollEventsPerObject.set(o,[c])}else{let c=new JKe(a,l,o,n,i,t);this.wheelEventsPerObject.has(o)?this.wheelEventsPerObject.get(o)?.push(c):this.wheelEventsPerObject.set(o,[c])}}),this.intersectionObserver=new IntersectionObserver(o=>{let a=o[0];a&&(this.isInview=a.isIntersecting)},{root:null})}connect(){this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(n=>n.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(n=>n.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(n=>n.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(n=>n.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},nZe=class{constructor(e,t,n,i,r,s){this.id=e,this.data=t,this.object=n,this.actions=Ic(t,t.actions,i,r,s,n)}disconnect(){pl(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(t=>{(t.interaction.data.triggerAfter??"any")===e&&(t.interaction instanceof u1?t.interaction.audioPlayer.play():t.interaction instanceof Az&&t.interaction.dispatch())}),this.actions.Video.forEach(t=>{let n=t.interaction.data.triggerAfter??"autoplay";n===e&&(t.interaction instanceof ex?t.interaction.play("autoplay"===n):t.interaction instanceof Wz&&t.interaction.dispatch())})}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.Reset.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.interaction instanceof u1?t.interaction.audioPlayer.play():t.interaction instanceof Az&&t.interaction.dispatch()}),this.actions.Video.forEach(t=>{t.interaction instanceof ex?t.interaction.play():t.interaction instanceof Wz&&t.interaction.dispatch()})}},iZe=class extends Au{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([n,i])=>{n.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(r=>{r.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([n,i])=>{n.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(r=>{r.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:n,isExport:i}=this.eventContext;(i?document:n).removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([r,s])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(o=>{o.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([n,i])=>{n.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(r=>{r.actions.Audio.forEach(s=>{s.interaction instanceof u1&&s.interaction.audioPlayer.play()}),r.actions.Video.forEach(s=>{s.interaction instanceof ex&&s.interaction.play("autoplay"===(s.interaction.data.triggerAfter??"autoplay"))})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([n,i])=>{n.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(r=>{r.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:n,target:i,reverse:r})=>{if(!n||!i)return;let s=zC(n);s&&"Start"===s&&(i.dispatchEvent({type:"beginEvent",eventName:"Start"}),this.eventsPerObject.get(i)?.forEach(o=>{o.dispatchUserEvent(r)}),this.eventsAfterPerObject.get(i)?.forEach(o=>{o.dispatchUserEvent(r)}))}}connect(){let{sharedAssets:e,page:t}=this.eventContext;if(t.traverseEntity(n=>{if(n.data?.events.length)for(let{id:i,data:r}of n.data.events){if(r.disabled||"Start"!==r.type)continue;let s=new nZe(i,r,n,t,e,this.eventManager);(s.actions.Transition.length||s.actions.Animation.length||s.actions.SwitchCamera.length||s.actions.Create.length||s.actions.Destroy.length||s.actions.SceneTransition.length||s.actions.Reset.length||s.actions.SetVariable.length||s.actions.DynamicVariablePlay.length)&&(this.eventsPerObject.has(n)?this.eventsPerObject.get(n)?.push(s):this.eventsPerObject.set(n,[s])),s.actions.Audio.length&&(this.eventsAfterPerObject.has(n)?this.eventsAfterPerObject.get(n)?.push(s):this.eventsAfterPerObject.set(n,[s])),s.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(n)?this.eventsAfterPerObject.get(n)?.push(s):this.eventsAfterPerObject.set(n,[s]))}}),[...this.eventsAfterPerObject.values()].some(n=>n.length)){if(0===this.eventManager.activateCount){let{domElement:n,isExport:i}=this.eventContext,r=i?document:n;r.addEventListener("pointerdown",this.onMouseDown,{once:!0}),r.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),r.addEventListener("pointerdown",this.onAny),r.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([s,o])=>{s.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([n,i])=>{n.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(r=>r.dispatch()),n.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:t}=this.eventContext,n=t?document:e;n.removeEventListener("pointerdown",this.onMouseDown),n.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),n.removeEventListener("pointerdown",this.onAny),n.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.removeEventListener("userEvent",this.onUserEvent),r.forEach(s=>s.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,t])=>{e.removeEventListener("userEvent",this.onUserEvent),t.forEach(n=>n.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},rZe=class{constructor(e,t,n,i,r,s){this.id=e,this.data=t,this.object=n,this.disabled=!1,this.alreadyPlayedNonTogglingActions=new Set,this.actions=Ic(t,t.actions,i,r,s,n),this.target=t.target,this.useToggle="Toggle"===t.runMode}disconnect(){pl(this.actions)}dispatch(e){this.disabled||(this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this?(t.object.currentTransitionEvent=this,t.init()):"Once"===this.data.runMode&&this.alreadyPlayedNonTogglingActions.add(t)}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.useToggle?(this.actions.Transition.forEach(t=>{t.toggle()}),this.actions.Animation.forEach(t=>{t.toggle()})):(this.actions.Transition.forEach(t=>{!1===this.alreadyPlayedNonTogglingActions.has(t)&&t.play()}),this.actions.Animation.forEach(t=>{t.play()})),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch(e??!1)}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}))}},sZe=class extends Au{constructor(e,t,n,i,r){super(e),this.sharedVariables=t,this.eventManager=n,this.needsMouse=i,this.needsRaycast=r,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.events=[],this.onFrame=s=>{this.rafId=window.requestAnimationFrame(this.onFrame);let o=new Date,a=[],l=[];for(let h=0;h<this.propertiesToWatch.length;h++){let{objectId:u,property:p,prevValue:m}=this.propertiesToWatch[h],v=this.eventContext.scene.find(u),g=a5.propertyPaths[p];if("width"===g[0]||"height"===g[0]||"depth"===g[0])v=v.geometry.userData.parameters[g[0]];else for(let b=0;b<g.length;b++)v=v[g[b]];null===m?this.propertiesToWatch[h].prevValue=v instanceof oe?v.clone():v:(v instanceof oe?!v.equals(m):m!==v)&&(l.push({objId:u,property:p}),v instanceof oe?this.propertiesToWatch[h].prevValue.copy(v):this.propertiesToWatch[h].prevValue=v)}for(let h=0;h<this.variablesToWatch.length;h++){let{id:u,prevValue:p}=this.variablesToWatch[h],m=this.shared.getVariable(u);m!==p&&(a.push(u),this.variablesToWatch[h].prevValue=m)}for(let h=0;h<this.dynamicVars.length;h++){let{id:u,expectedTime:p,last:m,data:v,timerSeconds:g,startValue:b}=this.dynamicVars[h],x=1e3;if("timer"!==v.dynamicVariableType&&"stopwatch"!==v.dynamicVariableType||"number3decimal"!==v.format?"counter"===v.dynamicVariableType?x=v.updateInterval:"random"===v.dynamicVariableType&&(x=v.isStatic?1/0:v.updateInterval):x=1,-1!==p){if("Stopped"!==this.shared.getDynamicVariablePlayState(u)&&"Restarted"!==this.shared.getDynamicVariablePlayState(u)||(this.dynamicVars[h].last=s,this.dynamicVars[h].expectedTime=s+x,"counter"===v.dynamicVariableType&&this.shared.getVariable(u)!==b&&(this.shared.updateVariable(u,b),this.eventManager.requestRender()),("timer"===v.dynamicVariableType||"stopwatch"===v.dynamicVariableType)&&this.dynamicVars[h].timerSeconds!==b&&(this.dynamicVars[h].timerSeconds=b,this.shared.updateVariable(u,yu.getFormattedTimerTime(b,v)),this.eventManager.requestRender()),"Restarted"===this.shared.getDynamicVariablePlayState(u)&&this.shared.setDynamicVariablePlayState(u,"Playing"),"Stopped"!==this.shared.getDynamicVariablePlayState(u))){if("Paused"===this.shared.getDynamicVariablePlayState(u)){void 0===this.dynamicVars[h].deltaToExpectedTime&&(this.dynamicVars[h].deltaToExpectedTime=Math.max(this.dynamicVars[h].expectedTime-s,0)),this.dynamicVars[h].last=s-(x-this.dynamicVars[h].deltaToExpectedTime),this.dynamicVars[h].expectedTime=s+this.dynamicVars[h].deltaToExpectedTime;continue}if(this.dynamicVars[h].deltaToExpectedTime=void 0,s>=p)if(this.dynamicVars[h].last=s,this.dynamicVars[h].expectedTime+=x,"random"===v.dynamicVariableType){let w=v.min+Math.random()*(v.max-v.min),P=v.decimals;w=Math.round(w*Math.pow(10,P))/Math.pow(10,P),this.shared.updateVariable(u,w),a.push(u),this.eventManager.requestRender()}else if("counter"===v.dynamicVariableType){if(0===v.increment)continue;let w=this.shared.getVariable(u),P=this.shared.getDynamicVariableToggleIsForward(u)??!0,A=this.shared.getVariable(u)+v.increment*(P?1:-1);v.hasEnd&&(A=v.increment>0?gi.clamp(A,b,v.endValue):gi.clamp(A,v.endValue,b),A===b&&this.shared.setDynamicVariableToggleIsForward(u,void 0),v.repeat?A===v.endValue&&(A=b):(A===b||A===v.endValue)&&this.shared.setDynamicVariablePlayState(u,"Paused")),A!==w&&(a.push(u),this.shared.updateVariable(u,A),this.eventManager.requestRender())}else if("time"===v.dynamicVariableType)this.shared.updateVariable(u,uie(o,v)),a.push(u),this.eventManager.requestRender();else{let w=Yd.isTextValue(v.endValue)?$se(v.endValue.textValue):v.endValue,P=this.shared.getDynamicVariableToggleIsForward(u)??!0,A=g+(s-m)/1e3*("timer"===v.dynamicVariableType?-1:1)*(P?1:-1);A=Math.max(A,0),v.hasEnd&&(A="stopwatch"===v.dynamicVariableType?gi.clamp(A,b,w):gi.clamp(A,w,b),A===b&&this.shared.setDynamicVariableToggleIsForward(u,void 0),v.repeat?Math.abs(A-w)<("number3decimal"===v.format?1e-4:.1)&&(A=b):(Math.abs(A-b)<("number3decimal"===v.format?1e-4:.1)||Math.abs(A-w)<("number3decimal"===v.format?1e-4:.1))&&this.shared.setDynamicVariablePlayState(u,"Paused")),A!==g&&(a.push(u),this.dynamicVars[h].timerSeconds=A,this.shared.updateVariable(u,yu.getFormattedTimerTime(A,v)),this.eventManager.requestRender())}}}else this.dynamicVars[h].last=s,this.dynamicVars[h].expectedTime=s+x}this.needsMouse&&this.shared.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=this.shared.mouseProperty,this.events.forEach(h=>{"mouseProperty"===h.data.variableId&&(h.dispatch(),this.eventManager.requestRender())}));let c=!1;this.shared.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=this.shared.mouseProperty,c=!0);let d=!1;this.shared.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=this.shared.raycastProperty,d=!0),this.events.forEach(h=>{(a.includes(h.data.variableId)||l.find(u=>u.objId===h.data.objectId&&u.property===h.data.property)||"mouseProperty"===h.data.variableId&&c||"raycastProperty"===h.data.variableId&&d)&&(h.dispatch(),this.eventManager.requestRender())})},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()},e.page.traverseEntity(s=>{s.data?.events.filter(o=>"VariableChange"===o.data.type&&!o.data.disabled).forEach(o=>{this.events.push(new oZe(s.uuid,o.data,s,e.page,e.sharedAssets,n))})}),this.propertiesToWatch=this.events.filter(s=>"objectProperty"===s.data.variableId&&null!==s.data.objectId).map(s=>({objectId:s.data.objectId,property:s.data.property,prevValue:null})),this.shared=e.sharedAssets,this.sharedVariables.forEach(({id:s,data:o})=>{if(!("dynamicVariableType"in o))return void(this.events.find(l=>l.data.variableId===s)&&this.variablesToWatch.push({id:s,prevValue:this.shared.getVariable(s)}));let a;if("timer"===o.dynamicVariableType||"stopwatch"===o.dynamicVariableType){let l;if(Yd.isTextValue(o.value)&&Array.isArray(o.value.textValue)){let c=o.value.textValue;l=3===c.length?c[2]+60*c[1]+3600*c[0]:c[1]+60*c[0]}else l=o.value;a=l,this.dynamicVars.push({id:s,last:-1,expectedTime:-1,data:o,timerSeconds:l,startValue:a})}else"time"===o.dynamicVariableType&&this.shared.updateVariable(s,uie(new Date,o)),"counter"===o.dynamicVariableType&&(a=Yd.isTextValue(o.value)?$se(o.value.textValue):o.value),this.dynamicVars.push({id:s,last:-1,expectedTime:-1,data:o,startValue:a})})}pause(){this.pauseTime=Date.now()}resume(){let e=Date.now()-this.pauseTime;for(let t=0;t<this.dynamicVars.length;t++)this.dynamicVars[t].last+=e,this.dynamicVars[t].expectedTime+=e}connect(){this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach(e=>e.dispose())}},oZe=class{constructor(e,t,n,i,r,s){this.id=e,this.data=t,this.object=n,this.actions=Ic(t,t.actions,i,r,s,n)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch())}dispose(){pl(this.actions)}};function $se(e){return 3===e.length?e[2]+60*e[1]+3600*e[0]:e[1]+60*e[0]}var Zse,Gr,Ol,uZe={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1};u9e.then(e=>{Zse=e,Gr=new e.Vec3,Ol=new e.Vec3});var pZe=new oe;function gZe(e){let t=!1;return e.scene.objects.forEach(n=>{"Page"===n.data.type&&!t&&n.data.publish.gameControlObject&&iC.traverseModuleInstances(e,n.id,(i,r,s)=>{for(let o of s)"GameControl"===o.data.type&&o.data.navmesh.enabled&&(t=!0)})}),t}var vZe={type:"change"},Qse={type:"changeZoom"},yZe={type:"changePan"},sx={type:"start"},ox={type:"end",changed:!0},_Ze={type:"end",changed:!1},iU=new Qi,Jse=new tt,bZe=2*Math.PI,rU=new oe,HT=new tt,sU=new oe,GT=new Qi,eoe=new vn,MZe={type:"requestRender"},toe=class extends Sl{constructor(e,t,n={isPlayMode:!1,isExport:!1}){super(),this.object=e,this.domElement=t,this.options=n,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,3,1],this.offset=new oe,this.eye=new oe,this.lastPosition=new oe,this.lastQuaternion=new Qi,this.current=new tt,this.overShoot=new tt,this.overRatio=new tt,this.spherical=new lQ,this.sphericalDelta=new lQ,this.panOffset=new oe,this.panLeftV=new oe,this.panUpV=new oe,this.panV=new oe,this.rotateStart=new tt,this.rotateEnd=new tt,this.rotateDelta=new tt,this.panStart=new tt,this.panEnd=new tt,this.panDelta=new tt,this.dollyStart=new tt,this.dollyEnd=new tt,this.dollyDelta=new tt,this.rotationRangeFactor=new tt,this.panRangeFactor=new tt,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.hoverRotateDamping=this.dampingFactor,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=i=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=i.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(sU,GT,rU),this.offset.copy(sU).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&-1===this.state&&this.rotateLeft((!0===this.autoRotateClockwise?1:-1)*this.getAutoRotationAngle()),0!==this.rotationLimitsMode&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),2!==this.rotationLimitsMode&&(this.spherical.phi+=this.sphericalDelta.phi),(1!==this.rotationLimitsMode||!0===this.autoRotate)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),0!==this.panLimitsMode&&(this.target.applyQuaternion(iU.copy(GT).invert()),this.panOffset.applyQuaternion(iU),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(GT),this.panOffset.applyQuaternion(GT)),2===this.panLimitsMode&&(this.panOffset.y=0),1===this.panLimitsMode&&(this.panOffset.x=0),-1!==this.state||this.gesture?(this.target.add(this.panOffset),this.panOffset.set(0,0,0)):(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)),this.offset.setFromSpherical(this.spherical),sU.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(eoe.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(eoe));let i=this.spherical.phi%bZe;if(this.eye.copy(this.offset).normalize(),this.object.up.copy(Fs.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),i>0&&i>Math.PI||i<0&&i>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),-1===this.state||!0===this.enableDamping){let r=1===this.hoverRotatePanMode?this.hoverRotateDamping:this.dampingFactor;this.sphericalDelta.theta*=1-r,this.sphericalDelta.phi*=1-r}else this.sphericalDelta.set(0,0,0);return this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>.01||8*(1-this.lastQuaternion.dot(this.object.quaternion))>1e-8?(this.dispatchEvent(vZe),this.object.dispatchEvent(MZe),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=i=>{!1!==this.enabled&&("touch"===i.pointerType||"pen"===i.pointerType&&Wd?this.onPointerDownTouch(i):this.onPointerDownMouse(i),-1!==this.state&&(this.isPointerDown=!0,this.dispatchEvent(sx),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),i.stopPropagation(),"touch"===i.pointerType||"pen"===i.pointerType&&Wd||this.domElement.setPointerCapture(i.pointerId)))},this.onPointerLeave=i=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(1===this.hoverRotatePanMode?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,rU.subVectors(this.position0,this.target0),this.spherical.setFromVector3(rU),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):2===this.hoverRotatePanMode&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=i},this.onPointerEnter=i=>{this.resetHoverEffectOnPointerLeave||void 0===this.pointerLeaveEvent?HT.set(i.clientX-this.domElement.clientWidth/2,i.clientY-this.domElement.clientHeight/2):HT.set(i.clientX-this.pointerLeaveEvent.clientX,i.clientY-this.pointerLeaveEvent.clientY),1===this.hoverRotatePanMode?(this.rotateDelta.copy(HT).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(Jse,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(i.clientX,i.clientY)):2===this.hoverRotatePanMode&&(this.panDelta.copy(HT).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(i.clientX,i.clientY)),this.update()},this.onPointerMove=i=>{!1!==this.enabled&&(this.checkRaycastLock()||("touch"===i.pointerType||"pen"===i.pointerType&&Wd?this.onPointerMoveTouch(i):this.onPointerMoveMouse(i),i.stopPropagation()))},this.onPointerUp=i=>{this.isPointerDown=!1,0===zi.length&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),zi.length>1&&i.preventDefault(),this.dispatchEvent(this.hasChange?ox:_Ze),this.state=-1,i&&(i.stopPropagation(),"touch"===i.pointerType||"pen"===i.pointerType&&Wd||this.domElement.releasePointerCapture(i.pointerId))},this.onPointerDownMouse=i=>{let r;switch(r=this.useKeyEvents?this.mouseButtons[i.button]:this.mouseButtonsPlay[i.button],r){case 0:if(!0!==i.altKey||i.shiftKey||lA(i)){if(" "===this.key){if(!1===this.enablePan)return;this.handleMouseDownPan(i),this.state=2}}else{if(!1===this.enableRotate)return;this.handleMouseDownRotate(i),this.state=0}break;case 4:if(!1===this.enablePan)return;this.handleMouseDownPan(i),this.state=2;break;case 3:if(lA(i)||i.shiftKey){if(!1===this.enablePan)return;this.handleMouseDownPan(i),this.state=2}else{if(!1===this.enableRotate)return;this.handleMouseDownRotate(i),this.state=0}break;case 5:if(lA(i)||i.shiftKey){if(!1===this.enableRotate)return;this.handleMouseDownRotate(i),this.state=0}else{if(!1===this.enablePan)return;this.handleMouseDownPan(i),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=i=>{switch(this.state){case 0:if(!1===this.enableRotate)return;this.handleMouseMoveRotate(i);break;case 1:if(!1===this.enableZoom)return;this.handleMouseMoveDolly(i);break;case 2:if(!1===this.enablePan)return;this.handleMouseMovePan(i)}this.object.wasMovedByUser=!0},this.onPointerDownTouch=i=>{switch(zi.length>1&&i.preventDefault(),this.touches[zi.length-1]){case 0:if(!1===this.enableRotate)return void(this.state=-1);this.handleTouchStartRotate(),this.state=3;break;case 1:if(!1===this.enablePan)return void(this.state=-1);this.handleTouchStartPan(),this.state=4;break;case 2:if(!1===this.enableZoom&&!1===this.enablePan)return;this.handleTouchStartDollyPan(),this.state=5;break;case 3:if(!1===this.enableZoom&&!1===this.enableRotate)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=i=>{switch(zi.length>1&&i.preventDefault(),this.state){case 3:if(!1===this.enableRotate)return;this.handleTouchMoveRotate(i),this.update();break;case 4:if(!1===this.enablePan)return;this.handleTouchMovePan(i),this.update();break;case 5:if(!1===this.enableZoom&&!1===this.enablePan)return;this.handleTouchMoveDollyPan(i),this.update();break;case 6:if(!1===this.enableZoom&&!1===this.enableRotate)return;this.handleTouchMoveDollyRotate(i),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=TF(()=>this.dispatchEvent(ox),33),this.onMouseWheel=i=>{!1===this.enabled||!1===this.enableZoom&&!1===this.enablePan||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&i.preventDefault(),this.dispatchEvent(sx),this.handleMouseWheel(i),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=i=>{if(i.preventDefault(),!1!==this.enabled&&!this.checkRaycastLock()&&!IF)if("gesturechange"===i.type){if(!1===this.enableZoom||!1===this.isTouchZoom)return;this.dispatchEvent(sx),i.scale>this.prevScale?this.dollyIn(this.getZoomScale()):i.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=i.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(ox)},this.onContextMenu=i=>{i.preventDefault()},this.onTouchEnd=i=>{i.preventDefault()},this.onKeyDown=i=>{!1!==this.enabled&&(this.key=i.key," "===i.key&&this.dispatchEvent(sx))},this.onKeyUp=i=>{!1!==this.enabled&&(this.key=void 0,-1!==this.state&&"Alt"===i.key&&this.onPointerUp(zi[0])," "===i.key&&this.dispatchEvent(ox))},this.onPointerHover=i=>{"mouse"!==i.pointerType||!1===this.enabled||-1!==this.state||2===this.hoverRotatePanMode&&this.isPanOverShoot||1===this.hoverRotatePanMode&&this.isRotateOverShoot||(this.isPointerDown=!0,2===this.hoverRotatePanMode?this.handleMouseMovePan(i,this.hoverRotatePanStrength):1===this.hoverRotatePanMode&&this.handleMouseMoveRotate(i,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=i=>{i.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.addEventListenersToCamera()}dispatchEvent(e){this.hasChange="start"!==e.type,super.dispatchEvent(e)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(e){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=e,0!==this.hoverRotatePanMode&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),0!==this.hoverRotatePanMode&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(e,t){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.thetaIsFree=e.rotationHorizontalOffset.min===e.rotationHorizontalOffset.max&&e.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=e.rotationVerticalOffset.min===e.rotationVerticalOffset.max&&e.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.hoverRotateDamping=e.hoverRotateDamping??this.dampingFactor,this.useWindowEvents="window"===t,0!==this.hoverRotatePanMode&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.hoverRotatePanStrength=(e.hoverRotatePanStrength/100)**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let i=this.object.getTarget().applyQuaternion(iU.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+i.y,this.maxV=e.panVerticalOffset.max+i.y,this.minH=-e.panHorizontalOffset.min+i.x,this.maxH=e.panHorizontalOffset.max+i.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=Up(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=Up(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=Up(Up(this.spherical.theta)-e.rotationHorizontalOffset.min),this.maxTheta=Up(Up(this.spherical.theta)+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,1===e.orbitTouches&&(this.touches[0]=0),1===e.panTouches&&(this.touches[0]=1),2===e.orbitTouches&&(this.touches[1]=3),2===e.panTouches&&(this.touches[1]=2),3===e.orbitTouches&&(this.touches[2]=0),3===e.panTouches&&(this.touches[2]=1),this.isTouchZoom=e.isTouchZoom,this.resetHoverEffectOnPointerLeave=e.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),0!==this.hoverRotatePanMode&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,n,i,r,s,o,a){let l,c,d;this.overShoot.set(0,0),e instanceof oe?(l=e.x,c=e.y,this.current.set(this.target.x,this.target.y),d=!0):(l=e.theta,c=e.phi,this.current.set(Up(this.spherical.theta),Up(this.spherical.phi)),d=!1),0===n&&(this.current.x+=l,this.current.y+=c),(3===t||2===t)&&(!d&&this.isThetaFlipped?this.current.x>i&&this.current.x<0?this.overShoot.x=i-this.current.x:this.current.x<r&&this.current.x>0&&(this.overShoot.x=r-this.current.x):this.current.x>i?this.overShoot.x=i-this.current.x:this.current.x<r&&(this.overShoot.x=r-this.current.x)),(3===t||1===t)&&(this.current.y>s?this.overShoot.y=s-this.current.y:this.current.y<o&&(this.overShoot.y=o-this.current.y)),d||(this.overShoot.x=Up(this.overShoot.x),this.overShoot.y=Up(this.overShoot.y)),0!==n?(this.overRatio.copy(this.overShoot).divide(a),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),1===n&&(this.overRatio.x=noe(Math.abs(this.overRatio.x)),this.overRatio.y=noe(Math.abs(this.overRatio.y))),this.isPointerDown||1===n?2===n&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),c*this.overShoot.y<0&&!this.phiIsFree&&(c*=1-this.overRatio.y)):2===n&&(!d&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||d&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=.05*this.overShoot.x),this.phiIsFree||(c=.05*this.overShoot.y),d?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):d?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,c+=this.overShoot.y),e instanceof oe?(e.x=l,e.y=c):(this.thetaIsFree||(e.theta=l),this.phiIsFree||(e.phi=c))}setEnableDampingSpeed(e){this.enableDamping=e,this.rotateSpeed=!0===e?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let n=this.domElement;if(n&&this.object.isPerspectiveCamera){this.panV.copy(this.object.position).sub(this.target);let r=this.panV.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*r/n.clientHeight,this.object.matrixWorld),this.panUp(2*t*r/n.clientHeight,this.object.matrixWorld)}else n&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrixWorld),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrixWorld));this.dispatchEvent(yZe)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(Qse)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(Qse)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(sx),this.dollyOut(e),this.dispatchEvent(ox)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(sx),this.dollyIn(e),this.dispatchEvent(ox)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){void 0!==e.movementX?this.rotateDelta.set(e.movementX,e.movementY):(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*t).rotateAround(Jse,-this.object.angleOffsetFromUp);let i=this.useWindowEvents?window.innerHeight:this.domElement.clientHeight,r=2*Math.PI*this.rotateDelta.x/i,s=2*Math.PI*this.rotateDelta.y/i;this.rotateLeft(r),this.rotateUp(s),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){void 0!==e.movementX?this.panDelta.set(e.movementX,e.movementY):(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(!1===a9e&&!1===lA(e)&&!0===function CZe(e){return 0===e.wheelDeltaY||0===e.deltaY?!(aA&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120)&&(e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX||e.wheelDeltaX===-3*window.devicePixelRatio*e.deltaX:0===e.deltaMode):e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||e.wheelDeltaY===-3*window.devicePixelRatio*e.deltaY:0===e.deltaMode}(e)){if(!1===this.enablePan)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):this.pan(this.panDelta.x,e.shiftKey?0:this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(!1===this.enableZoom)return;0===e.deltaY?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){2===zi.length?this.rotateStart.set(.5*(zi[0].pageX+zi[1].pageX),.5*(zi[0].pageY+zi[1].pageY)):this.rotateStart.set(zi[0].pageX,zi[0].pageY)}handleTouchStartPan(){2===zi.length?this.panStart.set(.5*(zi[0].pageX+zi[1].pageX),.5*(zi[0].pageY+zi[1].pageY)):this.panStart.set(zi[0].pageX,zi[0].pageY)}handleTouchStartDolly(){let e=zi[0].pageX-zi[1].pageX,t=zi[0].pageY-zi[1].pageY,n=Math.sqrt(e*e+t*t);this.dollyStart.set(0,n)}handleTouchStartDollyPan(){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(2===zi.length){let n=RF(e);this.rotateEnd.set(.5*(e.pageX+n.x),.5*(e.pageY+n.y))}else{if(e.pointerId!==zi[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(2===zi.length){let t=RF(e);this.panEnd.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}else{if(e.pointerId!==zi[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=RF(e),n=e.pageX-t.x,i=e.pageY-t.y,r=Math.sqrt(n*n+i*i);this.dollyEnd.set(0,r),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}checkRaycastLock(){if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let e=this.options?.showCameraLock;return e&&e(),!0}}return!1}};function Up(e){let t=2*Math.PI;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function noe(e){return 1-Math.pow(1-e,4)}var ss,ioe=class{constructor(e,t,n,i,r,s){this.id=e,this.data=t,this.object=n,this.page=i,this.currentIntersectedObjects=[],this.disabled=!1,this.alreadyPlayedNonTogglingActions=new Set,this.actions=Ic(t,t.actions,i,r,s,n),this.target=t.target,this.useToggle="Toggle"===t.runMode,this.triggeringObjects=t.triggeringObjects.map(o=>i.scene.find(o))}isValidTriggeringObject(e){return"all"===this.target||this.triggeringObjects.some(t=>t===e||t.isAncestorOf(e.uuid)||e.isAncestorOf(t.uuid))}disconnect(){pl(this.actions)}dispatch(){this.disabled||this.object.destroyedInAction||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this?(e.object.currentTransitionEvent=this,e.init()):"Once"===this.data.runMode&&this.alreadyPlayedNonTogglingActions.add(e)}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.useToggle?(this.actions.Transition.forEach(e=>{e.toggle()}),this.actions.SwitchCamera.forEach(e=>{e.toggle()})):(this.actions.Transition.forEach(e=>{!1===this.alreadyPlayedNonTogglingActions.has(e)&&e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()})),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()))}};f9e.then(e=>ss=e);var Aa=new oe,Tu=new Qi,Qg=new oe,oU=new cl(0,0,0,"YXZ"),roe=new cl(0,0,0,"XYZ"),Du=new oe,aU=new oe,lU=new oe(1,1,1),ax=new Qi,WT=new vn,soe=new vn,PZe={type:"updateMatrix"},ooe=new Qi,cU=new $c,dU={type:"beginEvent",eventName:"Collision"},SZe={type:"beginEvent",eventName:"Trigger"},qT=e=>e.states.some(t=>void 0!==t.data.position||void 0!==t.data.rotation||void 0!==t.data.hiddenMatrix||void 0!==t.data.cloner||void 0!==t.data.pathSnapping);function AZe(e){let t=this._clip.duration,n=this._clip.start??0,i=this.loop,r=this.time+e,s=this._loopCount,o=i===Z4;if(0===e)return-1===s?r:o&&1==(1&s)?t-(r-n):r;if(i===PK){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<n){let a=Math.floor((r-n)/(t-n));r-=(t-n)*a,s+=Math.abs(a);let l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o||(r=e>0?t:n,1===this.repetitions&&(r=t)),this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===l){let c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&s))return t-(r-n)}return r}var Jg,aoe=!1,hU=new WeakMap,DZe=class extends $L{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){let r=new KL(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,s=>{this.decodeDracoFile(s,t).catch(i)},n,i)}decodeDracoFile(e,t,n,i){return this.decodeGeometry(e,{attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n}).then(t)}decodeGeometry(e,t){let n=JSON.stringify(t);if(hU.has(e)){let a=hU.get(e);if(a.key===n)return a.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i,r=this.workerNextTaskID++,o=this._getWorker(r,e.byteLength).then(a=>(i=a,new Promise((l,c)=>{i._callbacks[r]={resolve:l,reject:c},i.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(a=>this._createGeometry(a.geometry));return o.catch(()=>!0).then(()=>{i&&r&&this._releaseTask(i,r)}),hU.set(e,{key:n,promise:o}),o}_createGeometry(e){let t=new Pi;e.index&&t.setIndex(new Bi(e.index.array,1));for(let n=0;n<e.attributes.length;n++){let i=e.attributes[n];t.setAttribute(i.name,new Bi(i.array,i.itemSize))}return t}_loadLibrary(e,t){let n=new KL(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((i,r)=>{n.load(e,i,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{let i=n[0];e||(this.decoderConfig.wasmBinary=n[1]);let r=IZe.toString(),s=["/* draco decoder */",i,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(r){let s=r.data;switch(s.type){case"decode":i._callbacks[s.id].resolve(s);break;case"error":i._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,r){return i._taskLoad>r._taskLoad?-1:1});let n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}};function IZe(){let e,t;function r(o,a,l,c,d,h){let u=h.num_components(),p=l.num_points()*u,m=p*d.BYTES_PER_ELEMENT,v=function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}(o,d),g=o._malloc(m);a.GetAttributeDataArrayForAllPoints(l,h,v,m,g);let b=new d(o.HEAPF32.buffer,g,p).slice();return o._free(g),{name:c,array:b,itemSize:u}}onmessage=function(o){let a=o.data;switch(a.type){case"init":e=a.decoderConfig,t=new Promise(function(d){e.onModuleLoaded=function(h){d({draco:h})},DracoDecoderModule(e)});break;case"decode":let l=a.buffer,c=a.taskConfig;t.then(d=>{let h=d.draco,u=new h.Decoder,p=new h.DecoderBuffer;p.Init(new Int8Array(l),l.byteLength);try{let m=function n(o,a,l,c){let u,p,d=c.attributeIDs,h=c.attributeTypes,m=a.GetEncodedGeometryType(l);if(m===o.TRIANGULAR_MESH)u=new o.Mesh,p=a.DecodeBufferToMesh(l,u);else{if(m!==o.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");u=new o.PointCloud,p=a.DecodeBufferToPointCloud(l,u)}if(!p.ok()||0===u.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());let v={index:null,attributes:[]};for(let g in d){let x,w,b=self[h[g]];if(c.useUniqueIDs)w=d[g],x=a.GetAttributeByUniqueId(u,w);else{if(w=a.GetAttributeId(u,o[d[g]]),-1===w)continue;x=a.GetAttribute(u,w)}v.attributes.push(r(o,a,u,g,b,x))}return m===o.TRIANGULAR_MESH&&(v.index=function i(o,a,l){let c=3*l.num_faces(),d=4*c,h=o._malloc(d);a.GetTrianglesUInt32Array(l,d,h);let u=new Uint32Array(o.HEAPF32.buffer,h,c).slice();return o._free(h),{array:u,itemSize:1}}(o,a,u)),o.destroy(u),v}(h,u,p,c),v=m.attributes.map(g=>g.array.buffer);m.index&&v.push(m.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:m},v)}catch(m){console.error(m),self.postMessage({type:"error",id:a.id,error:m.message})}finally{h.destroy(p),h.destroy(u)}})}}}function kZe(e){return uU.apply(this,arguments)}function uU(){return uU=(0,xo.Z)(function*(e){if(Jg){let n,t={attributeIDs:Jg.defaultAttributeIDs,attributeTypes:Jg.defaultAttributeTypes,useUniqueIDs:!1};try{n=yield Jg.decodeGeometry(new Int8Array(e).buffer,t)}catch(i){console.error(i)}if(n)return{index:n.index?{array:n.index.array}:void 0,attributes:Object.entries(n.attributes).map(([i,r])=>({name:i,itemSize:r.itemSize,array:r.array}))}}return null}),uU.apply(this,arguments)}function pU(){return pU=(0,xo.Z)(function*(e,t){let[n,i]=YJ(n5.deserialize(new Uint8Array(e)));dte(n);let r=[];n.scene.objects.traverse((s,o)=>{"Mesh"===o.type&&"NonParametricGeometry"===o.geometry.type&&void 0!==o.geometry.data.draco&&r.push(o)}),r.length&&(yield function RZe(){return Jg||(Jg=new DZe).setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload(),Jg.decoderPending}());for(let s of r){let o=yield kZe(Pa(s.geometry.data.draco));if(o){o.index&&(s.geometry.data.index={array:o.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let a={};o.attributes.forEach(({name:l,array:c,itemSize:d})=>{a[l]={array:c,itemSize:d,type:"Float32Array",normalized:!1}}),s.geometry.data.attributes=a,s.geometry.data.draco=void 0}}return t&&t(n),i.result().data}),pU.apply(this,arguments)}var LZe=class{constructor(e,t,n,i,r,s,o){this.id=e,this.data=t,this.dataEvent=n,this.object=i,this.stage=!1,this.actions=Ic(n,t.actions,r,s,o,i)}disconnect(){pl(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},FZe=class extends Au{constructor(e,t){super(e),this.eventManager=t,this.breakpoints=[],this.resize=(n,i)=>{this.breakpoints.forEach(r=>{let a,s=o5.deviceToSize(r.data.size),o="horizontal"===r.dataEvent.orientation?n:i;switch(r.data.operator){case"<":a=o<s[0];break;case">":a=o>s[0];break;case"<>":a=o>s[0]&&o<s[1]}r.stage!==a&&(r.stage=a,r.stage?r.dispatchIn():r.dispatchOut())})},this.onResizeObserver=new ResizeObserver(n=>{for(let i of n){let{width:r,height:s}=i.contentRect;this.resize(r,s)}})}connect(){let{page:e,sharedAssets:t,domElement:n}=this.eventContext;this.onResizeObserver.observe(n),e.traverseEntity(i=>{if(i.visible&&i.data?.events.length)for(let{data:r}of i.data.events)r.disabled||"Resize"===r.type&&r.breakpoints.forEach(({data:s,id:o})=>{try{let a=new LZe(o,s,r,i,e,t,this.eventManager);this.breakpoints.push(a)}catch{}})})}disconnect(){this.onResizeObserver.disconnect(),this.breakpoints.forEach(e=>{e.disconnect()}),this.breakpoints=[]}};function HZe(e){let t;if(e.index)for(let n=0;n<e.index.array.length;n+=3)t=e.index.array[n],e.index.array[n]=e.index.array[n+2],e.index.array[n+2]=t}function WC(e){return e instanceof SC?"SubdivObject":"NonParametricGeometry"===e.geometry.type?"NonParametric":"Mesh"}var XZe=al(yDe(),1),YZe=new tt;let v1=(()=>{const t=class{constructor(){}initialize(i,r){this.scene=new EY,this.camera=new Pl(75,i.clientWidth/i.clientHeight,.1,1e3),this.camera.position.z=5,this.renderer=new sAe({antialias:!0}),this.renderer.setSize(i.clientWidth,i.clientHeight),i.appendChild(this.renderer.domElement),this.splineApp=new class{constructor(e,{renderOnDemand:t,renderMode:n="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._variablesCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=i=>{this.time=i,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,this._perfs?.start(),!this._renderer||!this._isPaused&&("manual"===this.renderMode&&!this._renderRequested||"auto"===this.renderMode&&this._skipRender)||(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&(this._eventManager.handlers?.Start.hasVideoAction||this._eventManager.handlers?.Basic.hasVideoAction||this._eventManager.handlers?.Conditional.hasVideoAction)&&(this._skipRender=!1),this._animationControls?.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),this._eventManager?.isEnabled&&(this._eventManager.handlers?.Follow.onAnimationFrameDamping(),this._eventManager.handlers?.LookAt.onAnimationFrameDamping(),this._eventManager.handlers?.DragDrop.onAnimationFrameDamping()),this._scene&&this._camera&&(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0?(this._renderer.sceneTransitionTimeRemaining-=this.dt,this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration,this._skipRender=!1):this._renderer.pipeline.sceneTransitionFromTexture=null,this._renderer.renderSplineScene(this._scene,this._camera)),this.canvas.dispatchEvent(this._renderedEvent)),this._perfs?.end()},this._resize=()=>{if(this._renderer){if(1===this._viewportMode&&this._frameView&&(this._frameView.frameSize=YZe.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._camera=this._scene?.activeCamera,this._scene?.updateViewPlaneSize(this._frameView?.frameSize?.x??this._viewportWidth,this._frameView?.frameSize?.y??this._viewportHeight,this._frameView?.enableResponsive??!1),this._camera){let i=Object.values(this._data?.frames??{})[0].preset??"fullscreen";this._frameView?.setCamera(this._camera),this._frameView?.updateCamera("fullscreen"!==i),"PerspectiveCamera"===this._camera.cameraType&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect()),this._requestRenderAutoMode()}},this._debouncedResize=TF(this._resize,10),this.canvas=e,this.renderMode=t?"auto":n,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new class{constructor({x:e=10,y:t=10}){this._startTime=0;let n=document.getElementById("spe-perfs");n?this.element=n:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){this.element.parentElement?.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}}({x:10,y:10})),function d9e(e){e.addEventListener("pointerdown",LJ,!0),e.addEventListener("pointerdown",hA,!0),e.addEventListener("pointermove",hA,!0),e.addEventListener("pointerup",nb,!0),e.addEventListener("pointercancel",nb,!0),e.addEventListener("pointerleave",nb,!0),window.addEventListener("keydown",FJ,!0),window.addEventListener("keyup",BJ,!0)}(e)}load(e,t,n){var i=this;return(0,xo.Z)(function*(){(function $Ze(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)})(e),i.disposed=!1;let r=yield(yield fetch(e,n)).arrayBuffer();yield i.start(r,{variables:t})})()}start(e,{interactive:t=!0,variables:n}={}){var i=this;return(0,xo.Z)(function*(){if(i.disposed)return;let r=yield function NZe(e,t){return pU.apply(this,arguments)}(e);i._data=r,r.version&&(0,XZe.default)(r.version,"0.9.526")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),yield Promise.all([jie(r)&&WHe(),NWe(r)&&VHe(),iC.physicsEnabled(r.scene.objects)&&m9e(),Iie(r)&&xWe(),gZe(r)&&p9e()].filter(Boolean)),i._eventManager?.deactivate(),i._controls?.deactivate(),i._scene?.dispose();let s=new class{get sharedAssets(){return this.shared}constructor(e,t={}){this.shared=new FB(e.shared,t),this.scene=new xz(e.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof Wg&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof Ac&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}}(r);if(s.resetPersonalCameraFromDocumentData(),i._scene=s.scene,i._sharedAssetsManager=s.sharedAssets,i._camera=i._scene.activeCamera,window.location.search.includes("merge-geometries")){let l=performance.now();!function qZe(e,t){let n=function GZe(e,t){let n={};return e.traverseEntity(i=>{if(!i.visible||!(i instanceof Jc)||"Mesh"!==i.type||Array.isArray(i.material)||i.states&&Object.keys(i.states).length)return;let r=i.parent;for(;r;){if(r instanceof Jc&&i.states&&Object.keys(i.states).length)return;r=r.parent}let s=i.material.uuid,o=t.shared.materials[s];if(o){if(!Xl.isMergable(o))return}else{let l=t.scene.objects.get(i.uuid)?.data;if(l&&"material"in l&&"string"!=typeof l.material){if(!Xl.isMergable(l.material))return;s=Xl.getHash(l.material)}}n[s]||(n[s]={});let a=n[s][WC(i)];if(a){if(a.push(i),i.cloner)for(let l of i.cloner.children)a.push(l)}else if(n[s][WC(i)]=[i],i.cloner)for(let l of i.cloner.children)n[s][WC(i)].push(l)}),n}(t,e),i=function WZe(e){let t=0;return Object.values(e).forEach(n=>{Object.values(n).forEach(i=>{let r=i.length;r>t&&(t=r)})}),t}(n),r=new Array(i),s=0,o=new Array(i),a=0,l=new Array(i),c=0,d=new Array(i),h=0;for(let[u,p]of Object.entries(n))for(let m of Object.values(p)){if(a=0,c=0,m.forEach(g=>{g instanceof Jc&&(o[a++]=g.geometry.clone(),l[c++]=g)}),c<2)continue;for(let g=0;g<c;g++)l[g].updateWorldMatrix(!0,!1),o[g].applyMatrix4(l[g].matrixWorld),l[g].matrixWorld.determinant()<0&&HZe(o[g]);let v=$v(o.slice(0,a),!1);if(v){let g;"SubdivObject"===u?(console.warn("Turning subdiv object into mesh"),g=new yc(v,l[0].material)):g=new yc(v,l[0].material),g.castShadow=l[0].castShadow,g.receiveShadow=l[0].receiveShadow,t.add(g);let b=x=>{h=0;for(let w of x)w.children&&b(w.children),w instanceof Jc&&(Array.isArray(w.material)||n[w.material.uuid]&&n[w.material.uuid][WC(w)]&&n[w.material.uuid][WC(w)].length>1||(d[h++]=w));for(let w=0;w<h;w++)t.attach(d[w])};for(let x=0;x<c;x++){let w=l[x];b(w.children),r[s++]=w}}}for(let u=0;u<s;u++)r[u].removeFromParent()}(r,s.scene);let c=performance.now();console.log("Merged geometries in ",c-l," ms")}jie(r)&&i._scene.traverse(l=>{om(l)&&l.recomputeBoolean()}),i._sharedAssetsManager.setRequestRender(()=>{i._requestRenderAutoMode(),i._scene?.traverse(l=>{l instanceof wu&&l.pendingMediaLoad&&l.update()})});let o=Object.keys(r.shared.fonts).map(l=>i._sharedAssetsManager.getFont(l).loadingPromise);Promise.all(o).then(()=>{s.scene.markNeedsUpdateRendererDirty(),i._requestRenderAutoMode()}),Iie(r)&&function EZe(e){if(iC.physicsEnabled(e.scene.objects))return!0;let t=!1;return e.scene.objects.traverse((n,i)=>{if(i.events)if(Array.isArray(i.events)){for(let r of i.events)if(!0!==r.data.disabled&&"GameControl"===r.data.type&&r.data.collisionEnabled){t=!0;break}}else for(let r of Object.values(i.events))if(!0!==r.disabled&&"GameControl"===r.type&&r.collisionEnabled){t=!0;break}}),t}(r)&&(yield Promise.all(o)),i._scene.rewriteEventsBeforeGoToPlayMode(),Hz(i._scene.activePage,i._sharedAssetsManager),i._renderer||(i._renderer=new dYe({canvas:i.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),i._renderer.hdTransmission=!0===r.scene.publish.hdTransmission,i._renderer.setPixelRatio(window.devicePixelRatio),i._renderer.pipeline.addEventListener("smaaloaded",i._requestRenderAutoMode)),i._scene.initializeSplatViewer(i._renderer),void 0!==r.scene.blueNoiseTextureData&&i._renderer.pipeline.updateBlueNoiseTexture(r.scene.blueNoiseTextureData);let a=Object.values(r.frames)[0];if(i._frameView?i._frameView.setCamera(i._camera):("fullscreen"===a.preset?(i._viewportMode=1,i.canvas.style.display="block",i.canvas.parentElement&&(i._viewportWidth=i.canvas.parentElement.clientWidth||300,i.canvas.style.width="100%"),i.canvas.parentElement&&(i._viewportHeight=i.canvas.parentElement.clientHeight||150,i.canvas.style.height="100%")):(i._viewportMode=2,i._viewportWidth=a.size[0],i._viewportHeight=a.size[1],i.canvas.style.width=`${i._viewportWidth}px`,i.canvas.style.height=`${i._viewportHeight}px`),i._renderer.setSize(i._viewportWidth,i._viewportHeight,!1),i._frameView=new class{constructor(e,t,n,i,r){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=t,this._frameSize=(new tt).copy(n),this._editorSize=(new tt).copy(i),this._aspect=t.aspect,this._fov=r??t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||"PerspectiveCamera"!==this._camera.cameraType)return;let e=this._frameSize.x,t=this._frameSize.y,n=this._editorSize.y;this._aspect=e/t,t<=n&&(this._camera.zoom*=n/t),this._renderer.setViewport(0,0,e,t)}updateCamera(e=!0){if(this._camera)if("PerspectiveCamera"===this._camera.cameraType){let t=this._frameSize.y,n=this._editorSize.y,i=this._fov;if(e&&t>n){let r=function UZe(e,t,n,i,r){return(e-t)/(n-t)*(r-i)+i}(t,1080,2160,1,15)/100;i*=t/n,i*=1-r}this._camera.aspect=this._aspect,this._camera.fov=i,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t,this.enableResponsive),this._camera.updateProjectionMatrix())}}(i._renderer,i._camera,new tt(i._viewportWidth,i._viewportHeight),new tt(window.innerWidth,window.innerHeight)),i._frameView.enableResponsive=(a.allowResponsive??!1)&&"fullscreen"===a.preset),t){let l=new class{constructor(e,t,n,i,r,s,o,a){this.renderer=e,this.publish=t,this.scene=n,this.getCamera=i,this.sharedAssets=r,this.requestRender=s,this.isExport=o,this.frame=a,this.raycaster=new wKe,this._useWindowEvents=!1,this._useWindowEvents="window"===t.mouseEventTarget,this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement,this._domRect=this.domElement.getBoundingClientRect()}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}set domRect(e){this._domRect=e}updateRaycaster(e){let{pageX:t,pageY:n}=e.touches?.length>0?e.touches[0]:e;this.raycaster.setFromCamera(function CKe(e,t,n){return{x:(e-(n.left+window.scrollX))/n.width*2-1,y:-(t-(n.top+window.scrollY))/n.height*2+1}}(t,n,this._domRect),this.getCamera())}}(i._renderer,i.data.scene.publish,i._scene,()=>i._scene.activeCamera,i._sharedAssetsManager,i._requestRenderAutoMode,!0,a);i._scene.updateMatrixWorld(!0),i._controls=new class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=t=>{if(t.bodyType()!==ss.RigidBodyType.Dynamic)return;t.isSleeping()||this.nActiveRigidBodies++;let[n,i,r]=this.rigidBodyToMesh.get(t.handle);if(Aa.copy(t.translation()).multiplyScalar(this.pixelsPerMeter),Tu.copy(t.rotation()),n.matrixWorld.compose(Aa,Tu,i),n.hasNonUniformScale&&n.matrixWorld.multiply(n.shearScale),n.dispatchEvent(PZe),r){let s=n.cloner;if(s&&void 0===s.objectForSample){s.matrixWorld.copy(n.matrixWorld);for(let o of s.children)o.updateMatrixWorld(!0)}for(let o of n.children)o.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(t,n,i)=>{if(!1===i)return;let r,s;if(this.sensorToTriggerEvent[t]?(r=this.sensorToTriggerEvent[t],s=this.sharedGameControlGlobals.colliderToEntity.get(n)):this.sensorToTriggerEvent[n]&&(r=this.sensorToTriggerEvent[n],s=this.sharedGameControlGlobals.colliderToEntity.get(t)),r&&s&&r.isValidTriggeringObject(s))r.dispatch();else{for(let o=this.sharedGameControlGlobals.createdObjects.length-1;o>=0;o--){let a=this.sharedGameControlGlobals.createdObjects[o];if(a.userData.hasCollisionDestroy&&(a.rigidBody?.collider(0).handle===t||a.rigidBody?.collider(0).handle===n)){this.sharedGameControlGlobals.createdObjects.splice(o,1),a.removeFromParent(),requestAnimationFrame(()=>this.sharedGameControlGlobals.rapierWorld?.removeRigidBody(a.rigidBody));break}}if(this.gameControl?.object===this.sharedGameControlGlobals.colliderToEntity.get(t)){let o=this.sharedGameControlGlobals.colliderToEntity.get(n),a=this.sharedGameControlGlobals.entityToCollisionEvents[o.uuid];if(void 0===a)return;for(let l of a)"character"===l.data.target&&this.dispatchCollisionEvent(l,o,n)}else if(this.gameControl?.object===this.sharedGameControlGlobals.colliderToEntity.get(n)){let o=this.sharedGameControlGlobals.colliderToEntity.get(t),a=this.sharedGameControlGlobals.entityToCollisionEvents[o.uuid];if(void 0===a)return;for(let l of a)"character"===l.data.target&&this.dispatchCollisionEvent(l,o,t)}else{let o=this.sharedGameControlGlobals.colliderToEntity.get(t),a=this.sharedGameControlGlobals.entityToCollisionEvents[o.uuid];if(void 0!==a)for(let d of a)"scene"===d.data.target&&this.dispatchCollisionEvent(d,o,t);let l=this.sharedGameControlGlobals.colliderToEntity.get(n),c=this.sharedGameControlGlobals.entityToCollisionEvents[l?.uuid];if(void 0!==c)for(let d of c)"scene"===d.data.target&&this.dispatchCollisionEvent(d,l,n)}}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=200,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(t=>{t.addEventListener("connected",n=>{"gamepad"in n.data&&"axes"in n.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(n.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let n of t.events){if(!0===n.data.disabled)continue;let i=n.data.actions?.find(r=>"Destroy"===r.data.type)?.data;if(i)for(let r of i.objects){let s=this.page.scene.find(r);s&&(s.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let n of t.events)if(!0!==n.data.disabled&&"DragDrop"===n.data.type)for(let i of n.data.objects){let r=this.page.scene.find(i);r&&(r.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(t=>{let n;if(t instanceof wu)return;n=t instanceof Yl?t.object:t;let i=n.dataPatched;if("visibility"===i.physics?.enabled?!i.visible:!i.physics?.enabled)return!0;let r=t.geometry,s=!0===n.userData.hasDestroy,o=!0===n.userData.hasDrag;if(qT(i)||s||o||n.dataPatched.events.some(a=>!0!==a.data.disabled&&"GameControl"===a.data.type))return t.updateMatrixWorldSVD(),this.addBoundsTree(t),!0;r&&e.push(hm(r,t.matrixWorld))}),e.length>0){let t=$v(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new uC(t)}}addRigidBody(e,t,n){let i=[],r="geometry"in e?e.geometry:void 0,s=t.dataPatched;if(void 0!==r?.getAttribute("position")&&i.push(hm(r,e.shearScale)),s.physics.fusedBody){let o=this.gatherChildrenGeom(e,i);e.traverseObject(o),e.children.forEach(l=>l.updateMatrixWorld(!0));let a=e.cloner;a&&void 0===a.objectForSample&&"dynamic"===s.physics.rigidBody&&(a.traverseObject(o),a.children.forEach(l=>l.updateMatrixWorld(!0)))}if(i.length>0){let o,a=!n.fromCreate&&"dynamic"===s.physics.rigidBody||n.fromCreate&&n.dynamic;a?(o=ss.RigidBodyDesc.dynamic(),o.setLinearDamping(s.physics.damping).setAngularDamping(s.physics.damping).setAdditionalMass(1e-9).setGravityScale(s.physics.gravityScale).enabledRotations(...s.physics.enabledRotation).enabledTranslations(...s.physics.enabledTranslation)):(n.hasTransformAnim||n.hasFollow||n.hasDrag)&&!n.fromCreate?(o=ss.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):o=ss.RigidBodyDesc.fixed();let l=$v(i);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(Aa,Tu,Qg),e.position0=Aa.clone().divideScalar(this.pixelsPerMeter),e.rotation0=Tu.clone(),Aa.divideScalar(this.pixelsPerMeter),o.setTranslation(Aa.x,Aa.y,Aa.z).setRotation(Tu),r?l?.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):l?.scale(Qg.x/this.pixelsPerMeter,Qg.y/this.pixelsPerMeter,Qg.z/this.pixelsPerMeter);let c=this.sharedGameControlGlobals.rapierWorld.createRigidBody(o);a&&this.rigidBodyToMesh.set(c.handle,[e,Qg.clone(),s.physics.fusedBody]);let d=!(void 0===s.geometry||"SubdivGeometry"===s.geometry.type||"NonParametricGeometry"===s.geometry.type||"BooleanGeometry"===s.geometry.type||"VectorGeometry"===s.geometry.type||"StarGeometry"===s.geometry.type||"RectangleGeometry"===s.geometry.type||"EllipseGeometry"===s.geometry.type||"TriangleGeometry"===s.geometry.type||"TorusGeometry"===s.geometry.type||"HelixGeometry"===s.geometry.type);try{this.addCollider(c,s.physics,l,t,d)}catch{try{this.addCollider(c,s.physics,l,t,!1)}catch(h){console.error(h)}}e.rigidBody=c}}addBoundsTree(e){let t=[];if(void 0!==e.geometry?.getAttribute("position")&&e.geometry?.getAttribute("position").count>0&&t.push(hm(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,t)),e.children.forEach(n=>n.updateMatrixWorld(!0)),t.length>0){let n=$v(t,!1);e.bvhGeometry=n,e.bvhGeometry.boundsTree=new uC(n),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)}}addCollider(e,t,n,i,r=!0){if(0===n?.getAttribute("position").count||0===n?.getIndex()?.count)return;let s;n&&(s="trimesh"===t.colliderType?ss.ColliderDesc.trimesh(n.getAttribute("position").array,n.getIndex().array):ss.ColliderDesc.convexMesh(n.getAttribute("position").array,r?n.getIndex().array:void 0)),s.setFrictionCombineRule(ss.CoefficientCombineRule.Average).setRestitutionCombineRule(ss.CoefficientCombineRule.Average).setDensity(t.density).setFriction(t.friction).setRestitution(t.restitution);let o=this.sharedGameControlGlobals.rapierWorld.createCollider(s,e);this.sharedGameControlGlobals.colliderToEntity.set(o.handle,i),this.sharedGameControlGlobals.entityToCollisionEvents[i.uuid]?.some(a=>"scene"===a.target)&&o.setActiveEvents(ss.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,t){return(n,i)=>{if(0===i)return;let r;if(n instanceof wu){if(!n.objectForSample)return!0===n.object.dataPatched.physics.fusedBody&&"dynamic"===n.object.dataPatched.physics.rigidBody||void 0;if(n.objectForSample.dataPatched.physics.fusedBody)return;r=n.object}else if(n instanceof Yl)r=n.object;else if(r=n,r.dataPatched.cloner?.hideBase)return!0;let s=r.dataPatched;if("visibility"===s.physics.enabled?!s.visible:!s.physics.enabled)return!0;1===i?e.hasNonUniformScale?n.matrixWorld.multiplyMatrices(e.shearScale,n.hiddenMatrix):n.matrixWorld.copy(n.hiddenMatrix):n.matrixWorld.multiplyMatrices(n.parent.matrixWorld,n.hiddenMatrix),n.matrixWorld.multiply(n.matrix);let o=n.geometry;void 0!==o?.getAttribute("position")&&t.push(hm(o,n.matrixWorld))}}activate(e){if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let t=this.page.playCamera,n=!1,i=5,r=8,s=9,o="drag",a=this.page.data.publish.gameControlObject,l=null!==a?this.page.find(a):null,c=null;if(l)for(let u of l.data.events){if(u.data.disabled||"GameControl"!==u.data.type)break;let p=l;for(;this.usePhysics&&null!==(p=p.parent)?.parent&&!p.data.physics?.fusedBody;);u.data.collisionEnabled&&(this.needsCollisionDetection=!0),null===c&&(c=u.data)}if(this.page.traverseEntity(u=>{for(let p of u.dataPatched.events)if(!1===p.data.disabled&&"Trigger"===p.data.type)return this.needsCollisionDetection=!0,!0}),l&&c){n=n||c.camera===t.uuid||l.uuid===t.uuid;let u=new Fse(l,this.renderer.domElement,c,this.eventContext.page.data.globalPhysics,this,l.uuid!==t.uuid&&c.camera===t.uuid,t,this.page,this.sharedAssets);this.gameControl=u,i=c.joystickPosLoc,r=c.joystickRotLoc,s=c.jumpTouchButtonLoc,o=c.rotByTouch,Wd&&c.touchControl&&(this.joystickToGameControls[i]="pos","walk"===c.moveMode&&(this.joystickToGameControls[s]="jmp"),"joystick"===o&&(this.joystickToGameControls[r]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let u=this.gameControl.data;if(!this.navigationMeshWrapper){let p;this.navigationMeshWrapper=new class{constructor(e=!1,t=!1){this.usePhysics=e,this.isExport=t,this.onPointerDown=n=>{if(1!==zi.length)return;let{raycaster:i,page:r}=this.eventContext;this.eventContext.updateRaycaster(n);let s=r.raycastWithClones(i);if(0!==s.length){if(this.gameControl){let o=pZe.copy(this.gameControl.colliderWorldPosition);o.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(o,s[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(n,i)=>r=>{let s;if(r instanceof wu){if(!r.objectForSample)return!0===r.object.dataPatched.physics.fusedBody&&"dynamic"===r.object.dataPatched.physics.rigidBody||void 0;if(r.objectForSample.dataPatched.physics.fusedBody)return;s=r.object}else if(r instanceof Yl)s=r.object;else if(s=r,!1===s.dataPatched.cloner?.disabled&&s.dataPatched.cloner?.hideBase&&!0!==s.dataPatched.physics?.fusedBody)return!0;if(i&&!s.userData.navmesh)return;let o=s.dataPatched;if(!o.visible&&!0!==o.physics?.enabled)return!0;r.updateMatrixWorldSVD();let a=qT(o),l=s.userData.hasDestroy,c=s.userData.hasDrag,d=!1,h=!1;for(let u of o.events)!0!==u.data.disabled&&("GameControl"===u.data.type?d=!0:"Follow"===u.data.type&&(h=!0));if(d||a||h||l||c)return!0;if(this.usePhysics&&"dynamic"===o.physics?.rigidBody){if(this.usePhysics&&o.physics?.fusedBody)return!0}else if("geometry"in r&&r.geometry&&n.push(hm(r.geometry,r.matrixWorld)),this.usePhysics&&o.physics?.fusedBody)return r.traverseObject((u,p)=>{if(0===p)return;let m;if(u instanceof wu){if(!u.objectForSample)return!0===u.object.dataPatched.physics.fusedBody&&"dynamic"===u.object.dataPatched.physics.rigidBody||void 0;if(u.objectForSample.dataPatched.physics.fusedBody)return;m=u.object}else if(u instanceof Yl)m=u.object;else if(m=u,u.dataPatched.cloner?.hideBase)return!0;let v=m.dataPatched;if(!v.visible&&!0!==v.physics?.enabled)return!0;"geometry"in u&&u.geometry&&n.push(hm(u.geometry,u.matrixWorld))}),!0},this.traverseNoPhysics=(n,i)=>r=>{let s;if(r instanceof wu)return;s=r instanceof Yl?r.object:r;let o=s.dataPatched;if("visibility"===o.physics.enabled?!o.visible:!o.physics.enabled)return!0;if(i&&!s.userData.navmesh)return;let a=r.geometry,l=!0===s.userData.hasDestroy,c=!0===s.userData.hasDrag;if(qT(o)||l||c||s.dataPatched.events.some(d=>!0!==d.data.disabled&&"GameControl"===d.data.type))return!0;a&&n.push(hm(a,r.matrixWorld))},this.navmeshWasm=Zse,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(t?"\n(async function() {\n\tconst [wasmImport, wasmBinary] = await Promise.all([\n\t\timport('https://unpkg.com/@splinetool/runtime@0.9.526/build/' + 'navmesh.js'),\n\t\tfetch('https://unpkg.com/@splinetool/navmesh-wasm@0.9.526/build/' + 'navmesh.wasm').then((res) => res.arrayBuffer()),\n\t]);\n\tconst wasmModule = wasmImport.default;\n\tself.module = await wasmModule({ wasmBinary });\n\tpostMessage('ready');\n})();\n":"\n(async function() {\n\tconst [wasmImport, wasmBinary] = await Promise.all([\n\t\timport(self.location.origin + '/_libraries/navmesh.js'),\n\t\tfetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),\n\t]);\n\tconst wasmModule = wasmImport.default;\n\tself.module = await wasmModule({ wasmBinary });\n\tpostMessage('ready');\n})();\n")+"\n\nonmessage = function(messageEvent) {\n\tconst meshData = messageEvent.data;\n\tconst positions = meshData[0];\n\tconst offset = meshData[1];\n\tconst indices = meshData[2];\n\tconst indicesLength = meshData[3];\n\tconst parameters = meshData[4];\n\n\tconst module = self.module;\n\tconst rc = new module.rcConfig();\n\trc.cs = parameters.cs;\n\trc.ch = parameters.ch;\n\trc.borderSize = parameters.borderSize ? parameters.borderSize : 0;\n\trc.tileSize = parameters.tileSize ? parameters.tileSize : 0;\n\trc.walkableSlopeAngle = parameters.walkableSlopeAngle;\n\trc.walkableHeight = parameters.walkableHeight;\n\trc.walkableClimb = parameters.walkableClimb;\n\trc.walkableRadius = parameters.walkableRadius;\n\trc.maxEdgeLen = parameters.maxEdgeLen;\n\trc.maxSimplificationError = parameters.maxSimplificationError;\n\trc.minRegionArea = parameters.minRegionArea;\n\trc.mergeRegionArea = parameters.mergeRegionArea;\n\trc.maxVertsPerPoly = parameters.maxVertsPerPoly;\n\trc.detailSampleDist = parameters.detailSampleDist;\n\trc.detailSampleMaxError = parameters.detailSampleMaxError;\n\n\tif (!self.navMesh) {\n\t\tself.navMesh = new module.NavMesh();\n\t}\n\tself.navMesh.build(positions, offset, indices, indicesLength, rc);\n\n\tconst navmeshData = navMesh.getNavmeshData();\n\tconst arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);\n\tconst ret = new Uint8Array(navmeshData.size);\n\tret.set(arrView);\n\tnavMesh.freeNavmeshData(navmeshData);\n\n\tpostMessage(ret);\n}\n"])),this._worker=new Worker(this._workerURL)}init(e,t,n){this.gameControl=t,this.eventContext=n,this.resolution=e.ch,this.setDefaultQueryExtent((new oe).setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(n.page,e,i=>{this.buildFromNavmeshData(i.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,t,n){t.objects.forEach(l=>{let c=e.scene.find(l);c.traverseEntity(d=>{d.userData.navmesh=!0}),c.cloner?.traverseObject(d=>{d.userData.navmesh=!0})});let i=[],r=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(i,"custom"===t.zones);if(e.traverseChildren(r),t.objects.forEach(l=>{let c=e.scene.find(l);c.traverseEntity(d=>{d.userData.navmesh=void 0}),c.cloner?.traverseObject(d=>{d.userData.navmesh=void 0})}),0===i.length)return!1;let s=$v(i),{positions:o,triIndices:a}=lT(s.getAttribute("position"),s.getIndex());return this._worker.postMessage([o,o.length/3,a,a.length,{...uZe,...t}]),this._worker.onmessage=n,!0}createDebugNavGeometry(){let e,t,n=this.navMesh.getDebugNavMesh(),i=n.getTriangleCount(),r=new Uint32Array(3*i),s=new Float32Array(3*i*3);for(e=0;e<3*i;e++)r[e]=e;for(e=0;e<i;e++)for(t=0;t<3;t++){let a=n.getTriangle(e).getPoint(t);s[9*e+3*t+0]=a.x,s[9*e+3*t+1]=a.y,s[9*e+3*t+2]=a.z}let o=new Pi;return o.setIndex(new Bi(r,1)),o.setAttribute("position",new Bi(s,3)),o}getClosestPoint(e){return Gr.x=e.x,Gr.y=e.y,Gr.z=e.z,this.navMesh.getClosestPoint(Gr)}getClosestPointToRef(e,t){Gr.x=e.x,Gr.y=e.y,Gr.z=e.z;let n=this.navMesh.getClosestPoint(Gr);t.set(n.x,n.y,n.z)}getRandomPointAround(e,t){return Gr.x=e.x,Gr.y=e.y,Gr.z=e.z,this.navMesh.getRandomPointAround(Gr,t)}getRandomPointAroundToRef(e,t,n){Gr.x=e.x,Gr.y=e.y,Gr.z=e.z;let i=this.navMesh.getRandomPointAround(Gr,t);n.set(i.x,i.y,i.z)}moveAlong(e,t){return Gr.x=e.x,Gr.y=e.y,Gr.z=e.z,Ol.x=t.x,Ol.y=t.y,Ol.z=t.z,this.navMesh.moveAlong(Gr,Ol)}moveAlongToRef(e,t,n){return Gr.x=e.x,Gr.y=e.y,Gr.z=e.z,Ol.x=t.x,Ol.y=t.y,Ol.z=t.z,this.navMesh.moveAlong(Gr,Ol)}computePath(e,t){let n=this.getClosestPoint(t);Ol.x=n.x,Ol.y=n.y,Ol.z=n.z,this.getClosestPoint(e);let i=this.navMesh.computePath(Gr,Ol),r=i.getPointCount(),s=[];for(let o=0;o<r;o++){let a=i.getPoint(o);s.push(new oe(a.x,a.y,a.z))}return s}createCrowd(e,t){return new class{constructor(e,t,n){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(t,n,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,t){}addAgent(e,t,n){let i=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;i.radius=t.radius,i.height=t.height,i.maxAcceleration=t.maxAcceleration,i.maxSpeed=t.maxSpeed,i.collisionQueryRange=t.collisionQueryRange,i.pathOptimizationRange=t.pathOptimizationRange,i.separationWeight=t.separationWeight,i.updateFlags=7,i.obstacleAvoidanceType=0,i.queryFilterType=0,i.userData=0;let r=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),i);return this.transforms.push(n),this.agents.push(r),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new oe(0,0,0)),r}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,t){let n=this.crowd.getAgentPosition(e);t.set(n.x,n.y,n.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,t){let n=this.crowd.getAgentVelocity(e);t.set(n.x,n.y,n.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,t){let n=this.crowd.getAgentNextTargetPath(e);t.set(n.x,n.y,n.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,t){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z));let n=this.agents.indexOf(e);n>-1&&(this._agentDestinationArmed[n]=!0,this._agentDestination[n].set(t.x,t.y,t.z))}agentTeleport(e,t){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){let n=this.crowd.getAgentParameters(e);void 0!==t.radius&&(n.radius=t.radius),void 0!==t.height&&(n.height=t.height),void 0!==t.maxAcceleration&&(n.maxAcceleration=t.maxAcceleration),void 0!==t.maxSpeed&&(n.maxSpeed=t.maxSpeed),void 0!==t.collisionQueryRange&&(n.collisionQueryRange=t.collisionQueryRange),void 0!==t.pathOptimizationRange&&(n.pathOptimizationRange=t.pathOptimizationRange),void 0!==t.separationWeight&&(n.separationWeight=t.separationWeight),this.crowd.setAgentParameters(e,n)}removeAgent(e){this.crowd.removeAgent(e);let t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),!(e<=.001)){{let i=Math.floor(e/.016666666666666666);i>10&&(i=10),i<1&&(i=1);let r=e/i;for(let s=0;s<i;s++)this.crowd.update(r)}for(let i=0;i<this.agents.length;i++){let r=this.agents[i],s=this.getAgentPosition(r);if(this.transforms[i].copy(s),this._agentDestinationArmed[i]){let o=s.x-this._agentDestination[i].x,a=s.z-this._agentDestination[i].z,l=this.reachRadii[i];s.y>this._agentDestination[i].y-this.reachRadii[i]&&s.y<this._agentDestination[i].y+this.reachRadii[i]&&o*o+a*a<l*l&&(this.onReachTarget(r,this._agentDestination[i]),this._agentDestinationArmed[i]=!1)}}}}setDefaultQueryExtent(e){let t=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let t=this.crowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t,n=this.crowd.getCorners(e),i=n.getPointCount(),r=[];for(t=0;t<i;t++){let s=n.getPoint(t);r.push(new oe(s.x,s.y,s.z))}return r}dispose(){this.crowd.destroy()}}(this,e,t)}setDefaultQueryExtent(e){Gr.x=e.x,Gr.y=e.y,Gr.z=e.z,this.navMesh.setDefaultQueryExtent(Gr)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let t=e.length*e.BYTES_PER_ELEMENT,n=this.navmeshWasm._malloc(t),i=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,n,t);i.set(e);let r=new this.navmeshWasm.NavmeshData;r.dataPointer=i.byteOffset,r.size=e.length,this.navMesh.buildFromNavmeshData(r),this.navmeshWasm._free(i.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),n=new Uint8Array(e.size);return n.set(t),this.navMesh.freeNavmeshData(e),n}getDefaultQueryExtentToRef(e){let t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}dispose(){this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),this.eventContext?.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,t,n){return Gr.x=e.x,Gr.y=e.y,Gr.z=e.z,this.navMesh.addCylinderObstacle(Gr,t,n)}addBoxObstacle(e,t,n){return Gr.x=e.x,Gr.y=e.y,Gr.z=e.z,Ol.x=t.x,Ol.y=t.y,Ol.z=t.z,this.navMesh.addBoxObstacle(Gr,Ol,n)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return void 0!==this.navmeshWasm}}(this.usePhysics,this.isExport),p="sphere"===u.collider.type?2*u.collider.radius:u.collider.height,p=Math.floor(p/u.navmesh.ch-1),this.navigationMeshWrapper.init({...u.navmesh,walkableHeight:p},this.gameControl,this.eventContext)}}if(!1===n){let{enableRotate:u,enablePan:p,enableZoom:m,autoRotate:v,hoverRotatePanMode:g}=this.eventManager.publish.orbitControls;(u||p||m||v||0!==g)&&(this.orbitControls=new toe(t,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let d=this.renderer.domElement.width/this.renderer.getPixelRatio(),h=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((u,p)=>{let m=document.body.appendChild(document.createElement("div")),[v,g,b]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[p],x=(d-5*v)/4+v,w={},P="jmp"===u,A=P?0:v;p<10?(p<5?w.top=A/2:w.bottom=A/2,w.left=A/2+p%5*x):10===p?(w.left=A/2,w.top=h/2):(w.right=A/2,w.top=h/2),w.top?w.top-=g[1]:w.bottom+=g[1],w.left?w.left+=g[0]:w.right-=g[0];for(let N in w)w[N]+="px";if(P){let N=m.appendChild(document.createElement("div"));return Object.assign(N.style,w,{position:"absolute",width:v+"px",height:v+"px",backgroundColor:`rgba(255,255,255,${"show"===b?.4:0})`,zIndex:"9999",borderRadius:v+"px",border:"show"===b?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"}),"show"===b&&(N.innerHTML=`\n\t\t\t\t\t\t<svg width="${v/16*16*.4}" height="${.4*v}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t`),N.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),N.addEventListener("touchend",L=>L.preventDefault()),void(this.joysticks[p]=[void 0,m])}let D={zone:m,mode:"static",position:w,size:v};"hide"===b&&(D.restOpacity=0);let R=function(e){return Dre.create(e)}(D);R.on("move",(N,k)=>{let L=this.gameControl;"pos"===u?k.force<.2?L.moveForce=0:(L.movementState.movePosZ=Math.sin(-k.angle.radian),L.movementState.movePosX=Math.cos(-k.angle.radian),L.movementState.run=k.force>1.2?1:0,L.moveForce=k.force<.3?(k.force-.2)/.1:1):"rot"===u&&(k.force<.2?L.rotForce=0:(L.movementState.rotPosX=k.vector.y,L.movementState.rotPosY=-k.vector.x,L.rotForce=k.force<.3?(k.force-.2)/.1:1)),this.requestRender()}),R.on("end",(N,k)=>{let L=this.gameControl;"pos"===u?(L.movementState.movePosZ=0,L.movementState.movePosX=0,L.moveForce=1):"rot"===u&&(L.movementState.rotPosX=0,L.movementState.rotPosY=0,L.rotForce=1)}),this.joysticks[p]=[R,m]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(u=>u.disabled=!1)},80)}initPhysics(){this.sharedGameControlGlobals.rapierWorld?.free(),this.sharedGameControlGlobals.rapierWorld=new ss.World(new ss.Vector3(0,this.gravity,0)),this.events=new ss.EventQueue(!0);let e=[],t=[];if(this.page.traverseChildren(o=>{let a;if(o instanceof wu){if(!o.objectForSample)return!0===o.object.dataPatched.physics.fusedBody&&"dynamic"===o.object.dataPatched.physics.rigidBody||void 0;if(o.objectForSample.dataPatched.physics.fusedBody)return;a=o.object}else if(o instanceof Yl)a=o.object;else if(a=o,!1===a.dataPatched.cloner?.disabled&&a.dataPatched.cloner?.hideBase&&!0!==a.dataPatched.physics?.fusedBody)return!0;let c,l=a.dataPatched;for(let g of l.events)!0!==g.data.disabled&&"GameControl"===g.data.type&&(c=g.data);if(!l.physics||("visibility"===l.physics.enabled?!l.visible:!l.physics.enabled))return!0;o.updateMatrixWorldSVD();let d=qT(l),h=!1,u=a.userData.hasDestroy,p=a.userData.hasDrag,m=!1;for(let g of l.events)if(!0!==g.data.disabled)if("Collision"===g.data.type){h=!0;let b=new rZe(g.id,g.data,a,this.page,this.sharedAssets,this.eventManager);b.disabled=!0,this.collisionEvents.push(b),this.sharedGameControlGlobals.entityToCollisionEvents[a.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[a.uuid].every(x=>x.id!==g.id)?this.sharedGameControlGlobals.entityToCollisionEvents[a.uuid].push(b):this.sharedGameControlGlobals.entityToCollisionEvents[a.uuid]=[b]}else if("Follow"===g.data.type){m=!0;let b=g.data.target;o.traverseVisible(x=>{x.userData.isFollowingObj=b})}"dynamic"===l.physics.rigidBody&&!1===l.physics.fusedBody&&(o.matrixWorldFusedFalse=o.matrixWorld.clone());let v=o.geometry;if(void 0!==c){let g=ss.RigidBodyDesc.kinematicPositionBased();(o.hasNonUniformScale?o.matrixWorldRigid:o.matrixWorld).decompose(Aa,Tu,Qg),o.position0=Aa.clone().divideScalar(this.pixelsPerMeter),o.rotation0=Tu.clone(),Aa.divideScalar(this.pixelsPerMeter),g.setTranslation(Aa.x,Aa.y,Aa.z).setRotation(Tu);let x,b=this.sharedGameControlGlobals.rapierWorld.createRigidBody(g);o.rigidBody=b,x="sphere"===c.collider.type?ss.ColliderDesc.ball(c.collider.radius/this.pixelsPerMeter):"capsule"===c.collider.type?ss.ColliderDesc.capsule((c.collider.height/2-c.collider.radius)/this.pixelsPerMeter,c.collider.radius/this.pixelsPerMeter):ss.ColliderDesc.cuboid(c.collider.width/this.pixelsPerMeter/2,c.collider.height/this.pixelsPerMeter/2,c.collider.depth/this.pixelsPerMeter/2),x.setFrictionCombineRule(ss.CoefficientCombineRule.Average).setRestitutionCombineRule(ss.CoefficientCombineRule.Average).setDensity(l.physics.density).setFriction(l.physics.friction).setRestitution(l.physics.restitution);let w=this.sharedGameControlGlobals.rapierWorld.createCollider(x,b);this.sharedGameControlGlobals.colliderToEntity.set(w.handle,a),Aa.fromArray(c.collider.position).multiply(Qg.setFromMatrixScale(a.matrixWorld)).divideScalar(this.pixelsPerMeter),w.setTranslationWrtParent(Aa);let P=(new Qi).setFromEuler((new cl).setFromVector3((new oe).fromArray(c.collider.rotation)));w.setRotationWrtParent(P),w.setActiveEvents(ss.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(a,!0)}else"dynamic"===l.physics.rigidBody||d||m||u||p||h?(this.addRigidBody(o,a,{hasFollow:m,hasTransformAnim:d,hasDrag:p}),this.generateSensorColliderDescs(a,l.physics.fusedBody)):(v&&e.push(hm(v,o.matrixWorld)),l.physics.fusedBody&&o.traverseObject((g,b)=>{if(0===b)return;let x;if(g instanceof wu){if(!g.objectForSample)return!0===g.object.dataPatched.physics.fusedBody&&"dynamic"===g.object.dataPatched.physics.rigidBody||void 0;if(g.objectForSample.dataPatched.physics.fusedBody)return;x=g.object}else if(g instanceof Yl)x=g.object;else if(x=g,x.dataPatched.cloner?.hideBase)return!0;let w=x.dataPatched;if("visibility"===w.physics.enabled?!w.visible:!w.physics.enabled)return!0;let P=g.geometry;void 0!==P?.getAttribute("position")&&e.push(hm(P,g.matrixWorld))}),this.generateSensorColliderDescs(a,l.physics.fusedBody,t));return!(!0!==l.physics?.fusedBody&&!c)||void 0}),0===e.length)return;let n=$v(e);n.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let i=ss.RigidBodyDesc.fixed(),r=this.sharedGameControlGlobals.rapierWorld.createRigidBody(i),s=ss.ColliderDesc.trimesh(n.getAttribute("position").array,n.getIndex().array).setFrictionCombineRule(ss.CoefficientCombineRule.Multiply).setRestitutionCombineRule(ss.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(s,r);for(let[o,a]of t){let l=this.sharedGameControlGlobals.rapierWorld.createCollider(o,r);this.sensorToTriggerEvent[l.handle]=a}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity(e=>{for(let t of e.dataPatched.events)if("Trigger"===t.data.type&&!0!==t.data.disabled){let n=new ioe(t.id,t.data,e,this.page,this.sharedAssets,this.eventManager),i=(new vn).compose(Du.fromArray(t.data.position),ax.setFromEuler(roe.fromArray(t.data.rotation)),lU);if("box"===t.data.triggerZone){let r=new ra;r.min.fromArray(t.data.size).multiplyScalar(-.5),r.max.fromArray(t.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([r,i,e,n])}else this.sharedGameControlGlobals.triggers.push([t.data.radius,i,e,n])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){if(this.isEnabled){this.isEnabled=!1,this.page.traverse(e=>{let t=e;t.matrixWorldFusedFalse&&(t.matrixWorldFusedFalse=void 0),t.rigidBody&&(t.rigidBody=void 0),t.position0&&(t.position0=void 0),t.rotation0&&(t.rotation0=void 0)}),this.sharedGameControlGlobals.rapierWorld?.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),this.gameControl?.reset(),this.gameControl?.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([e,t])=>{e?.destroy(),t.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),this.navigationMeshWrapper?.dispose(),this.navigationMeshWrapper=void 0;for(let e of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))e.forEach(t=>t.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,t,n){if(!this.isEnabled)return!0;let i=!0;if(void 0!==this.orbitControls&&this.orbitControls.needsUpdate&&(i=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,i=!1):2===this.initializationCounter&&this.gameControl&&(i=!this.gameControl.update(e,t,n)&&i),!1===this.usePhysics&&this.checkTrigger(),this.usePhysics){let r=.016666666666666666;if(0===e)i=this.stepPhysics()&&i;else{let s=e/1e3;s<r&&s>.55*r&&(s=r),this.accumulator+=s;let o=performance.now(),a=0,l=6;for(;this.accumulator>=r&&a<l&&(i=this.stepPhysics()&&i,this.accumulator-=r,a++,!(performance.now()-o>1e3*r)););this.accumulator=this.accumulator%r}}return i}stepPhysics(){for(let e of this.sharedGameControlGlobals.entitiesWithTransformAnim){(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(Aa,Tu,Qg),oU.setFromQuaternion(Tu);let t=e;void 0===t.prevR?(t.prevR=oU.clone(),t.prevT=Aa.clone()):(t.prevR.copy(oU),t.prevT.copy(Aa)),e.rigidBody&&(e.rigidBody.setNextKinematicTranslation(Aa.divideScalar(this.pixelsPerMeter)),e.rigidBody.setNextKinematicRotation(Tu))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),this.events?.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,t,n){let r,i=this.sharedGameControlGlobals.rapierWorld?.getCollider(n)._parent;if(t.cloner)for(let s of t.cloner.children)if(s.rigidBody===i){r=s;break}e.dispatch(r),t.dispatchEvent(dU)}updateUseWindowEvents(e){this.orbitControls?.updateUseWindowEvents(e)}generateSensorColliderDescs(e,t,n){let i=soe.copy(e.matrixWorld).invert();e.traverseEntity((r,s)=>{if(!1===t&&1===s)return!0;for(let o of r.dataPatched.events)if("Trigger"===o.data.type&&!0!==o.data.disabled){let l,a=new ioe(o.id,o.data,r,this.page,this.sharedAssets,this.eventManager);if(l="box"===o.data.triggerZone?ss.ColliderDesc.cuboid(...o.data.size.map(c=>c/(2*this.pixelsPerMeter))):ss.ColliderDesc.ball(o.data.radius/this.pixelsPerMeter),l.setDensity(0).setSensor(!0).setActiveEvents(ss.ActiveEvents.COLLISION_EVENTS),Du.fromArray(o.data.position),ax.setFromEuler(roe.fromArray(o.data.rotation)),WT.compose(Du,ax,lU).premultiply(r.matrixWorld),n?(WT.decompose(Du,ax,aU),l.setActiveCollisionTypes(ss.ActiveCollisionTypes.KINEMATIC_FIXED|ss.ActiveCollisionTypes.DYNAMIC_FIXED)):(WT.premultiply(i).decompose(Du,ax,aU),e.rigidBody.bodyType()===ss.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===ss.RigidBodyType.Fixed?l.setActiveCollisionTypes(ss.ActiveCollisionTypes.KINEMATIC_FIXED|ss.ActiveCollisionTypes.DYNAMIC_FIXED):l.setActiveCollisionTypes(ss.ActiveCollisionTypes.KINEMATIC_KINEMATIC|ss.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),Du.divideScalar(this.pixelsPerMeter),l.setTranslation(Du.x,Du.y,Du.z),l.setRotation(ax),n)n.push([l,a]);else{let c=this.sharedGameControlGlobals.rapierWorld.createCollider(l,e.rigidBody);this.sensorToTriggerEvent[c.handle]=a}}})}checkTrigger(){let e;for(let t=0;t<this.sharedGameControlGlobals.triggers.length;t++){let[n,i,r,s]=this.sharedGameControlGlobals.triggers[t];for(let o=0;o<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;o++){let a=this.sharedGameControlGlobals.entitiesWithTransformAnim[o];if(r===a||!1===s.isValidTriggeringObject(es.is(a)?a:a.object))continue;let l=soe.copy(r.matrixWorld).decompose(Du,ooe,aU).compose(Du,ooe,lU).multiply(i),c=WT.copy(a.matrixWorld).invert().multiply(l);n instanceof ra?e=a.bvhGeometry.boundsTree.intersectsBox(n,c):(cU.radius=n,cU.center.setFromMatrixPosition(c),e=a.bvhGeometry.boundsTree.intersectsSphere(cU)),e?-1===s.currentIntersectedObjects.indexOf(a)&&(s.currentIntersectedObjects.push(a),s.dispatch(),r.dispatchEvent(SZe)):s.currentIntersectedObjects=s.currentIntersectedObjects.filter(d=>d!==a)}}}}(l),i._animationControls=new class{constructor(e,t,n,i){this.scene=e,this.requestRender=t,this.updateDisplayProgress=n,this.animationInspectorState=i,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=r=>{"Empty"===r.data.type&&r.data.animations&&r.data.animations.forEach((s,o)=>{let a=s[0]+"/";if(Array.isArray(r.identity)?a+=r.identity[0]:a+=r.uuid,this.clipIdToAction[a])return;let l=YL.parse(JSON.parse(s[2]));r.animations[o]=l;let c=this.mixer.clipAction(l,r);!1===aoe&&(Object.getPrototypeOf(c)._updateTime=AZe,aoe=!0),c.clampWhenFinished=!0,this.clipIdToAction[a]=c})},this.mixer=new ALe(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,t){let n=this.scene.find(t);if(!n)return;let i=n.animations.find(s=>s.uuid===e);if(!i)return;let r=this.clipIdToAction[e];!r||(r.stop(),this.mixer.uncacheClip(i),delete this.clipIdToAction[e],n.animations=n.animations.filter(s=>s.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let t=this.clipIdToAction[e];!t||(t.play(),this.activeClip=t.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=2201}),this.mixer.stopAllAction(),this.requestRender()}play(e){let n=this.clipIdToAction[e.clipId+"/"+e.object];if(n)return e&&(e.repeat>=0&&(n.repetitions=e.repeat+1),"pingpong"===e.direction&&0!==e.repeat&&(n.loop=Z4)),n.play(),n.paused=!1,this.requestRender(),n}resumeFromInspector(e){let t=this.clipIdToAction[e];!t||(t.play(),t.paused=!1,this.requestRender())}pauseFromInspector(e){let t=this.clipIdToAction[e];!t||(t.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){if(this.needsUpdate)this.needsUpdate=!1;else if(!1===this.isPlaying||this.animationInspectorState?.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*this.maxFrames%this.maxFrames)),this.requestRender()}get maxFrames(){return this.activeClip?.tracks[0]?.times.length??0}setProgressFromInspector(e,t){if(!this.clipIdToAction[t])return;this.activeClip!==this.clipIdToAction[t].getClip()&&this.playFromInspector(t);let n=this.clipIdToAction[t].paused;this.clipIdToAction[t].paused=!1,this.mixer.setTime(Math.min(this.maxFrames?e/this.maxFrames:0,.9999)*this.activeClip.duration),this.requestRender(),n&&(this.clipIdToAction[t].paused=!0)}}(i._scene,i._requestRenderAutoMode),i._eventManager=new class{constructor(e,t,n,i,r){this.publish=e,this.controlsManager=t,this.animationControls=n,this.eventContext=i,this.sharedVariables=r,this.isEnabled=!1,this.activateCount=0,this.needsMouse=!1,this.needsRaycast=!1,this.onTouchMovePreventScroll=s=>{(s.touches.length>1||this.preventTouchScroll)&&s.preventDefault()},this.onMouseWheelPreventScroll=s=>{this.preventScroll&&s.preventDefault()},this.onMouseMove=s=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(s),pressed:s.buttons>0}},this.onMouseDown=s=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(s),pressed:!0}},this.onMouseUp=s=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(s),pressed:!1}},this.getMousePosition=s=>{let{domRect:o}=this.eventContext,{pageX:a,pageY:l}=s.touches?.length>0?s.touches[0]:s;return{x:a-(o.left+window.scrollX),y:l-(o.top+window.scrollY)}},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=i.requestRender}activate(){if(this.isEnabled)return;this.isEnabled=!0,this.initializeActionsDependentStates(),this.needsMouse&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new EKe(this.eventContext),DynamicVariable:new sZe(this.eventContext,this.sharedVariables,this,this.needsMouse,this.needsRaycast),Conditional:new kKe(this.eventContext,this),Start:new iZe(this.eventContext,this),Basic:new AKe(this.eventContext,this,this.needsRaycast),MouseHover:new QKe(this.eventContext,this),Scroll:new tZe(this.eventContext,this),Follow:new GKe(this.eventContext,this),DragDrop:new zKe(this.eventContext,this),LookAt:new $Ke(this.eventContext),Resize:new FZe(this.eventContext,this)};let{page:e,domElement:t}=this.eventContext;this.hideCursor&&(t.style.cursor="none"),e.traverseEntity(i=>{i.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(i=>i.connect()),t.addEventListener("wheel",this.onMouseWheelPreventScroll),t.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++}deactivate(){if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:e,domElement:t}=this.eventContext;t.style.cursor="",Object.values(this.handlers).forEach(n=>n.disconnect()),this.controlsManager.gameControl?.disposeActions(),this.controlsManager.disconnectEvents(),e.traverseEntity(n=>{n.removeEventListener("requestRender",this.requestRender),n.destroyedInAction=!1}),t.removeEventListener("touchmove",this.onTouchMovePreventScroll),t.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode()}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(),this.activate(),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let t=this.isEnabled;t&&this.deactivate(),this.eventContext.useWindowEvents=e,t&&this.activate()}initializeActionsDependentStates(){let e=this.eventContext.sharedAssets;e.resetDynamicVariablePlayState();let t=n=>{if("Conditional"===n.data.type&&(n.data.ifActions.forEach(t),n.data.elseActions.forEach(t)),"Conditional"===n.data.type||"SetVariable"===n.data.type)for(let i of"Conditional"===n.data.type?n.data.condition:n.data.expression)"id"in i&&Array.isArray(i.id)&&("mouse"===i.id[0]&&(this.needsMouse=!0),"raycast"===i.id[0]&&(this.needsRaycast=!0));"DynamicVariablePlay"===n.data.type&&""!==n.data.variableId&&("Play"===n.data.mode||"PlayPause"===n.data.mode||"Toggle"===n.data.mode)&&e.setDynamicVariablePlayState(n.data.variableId,"Stopped")};this.eventContext.page.traverseEntity(n=>{if(n.data?.events.length)for(let i of n.data.events)if(!i.data.disabled)if("VariableChange"===i.data.type&&("mouseProperty"===i.data.variableId&&(this.needsMouse=!0),"raycastProperty"===i.data.variableId&&(this.needsRaycast=!0)),"Conditional"===i.data.type)for(let r of["inActions","outActions"])i.data[r].forEach(t);else if("DragDrop"===i.data.type)for(let r of["drag","drop"])i.data.dragDropActions[r].forEach(t);else if("GameControl"===i.data.type)for(let r of["idle","move","jump","run"])i.data.gameActions[r].forEach(t);else if("Resize"===i.data.type)for(let r of i.data.breakpoints)r.data.actions.forEach(t);else"LookAt"===i.data.type||i.data.actions.forEach(t)})}}(r.scene.publish,i._controls,i._animationControls,l,r.shared.variables),i._eventManager.activate(),i._controls.activate(i._eventManager)}i._resize(),void 0!==n&&i.setVariables(n),0===i.dt&&(i.render(performance.now()),setTimeout(()=>{i._renderer?.setAnimationLoop(i.render)},0)),i._resizeObserverTimeout=setTimeout(()=>{!i._resizeObserver&&i.canvas.parentElement&&(i._resizeObserver=new ResizeObserver(()=>{i._viewportWidth=i.canvas.clientWidth,i._viewportHeight=i.canvas.clientHeight,i._debouncedResize()}),i._resizeObserver.observe(i.canvas.parentElement))},300)})()}setVariables(e){if(void 0!==this._data){let t=Object.entries(e);for(let[n,i]of t)this.setVariable(n,i)}}setVariable(e,t){let n=this._getVariableByName(e);if(n&&!("dynamicVariableType"in n.data)){let i=t;"number"==typeof n.data.value?i="number"==typeof t?t:"boolean"==typeof t?!0===t?1:0:parseFloat(t):"boolean"==typeof n.data.value?i="number"==typeof t?!!t:"boolean"==typeof t?t:"false"!==t.toLocaleLowerCase()&&!!t:"string"!=typeof n.data.value&&void 0!==n.data.value.textValue&&(i=t.toString()),this._sharedAssetsManager?.updateVariable(n.id,"string"==typeof i?{textValue:i}:i),this.requestRender(),this._requestRenderAutoMode()}else void 0===n?console.warn(`No variable named ${e} was found in your Spline file. Make sure to create it from Spline editor.`):"dynamicVariableType"in n.data&&console.warn(`Dynamic variables like ${e} cannot be updated from code.`)}getVariables(){let e={};return this._data&&this._data.shared.variables.forEach(t=>{void 0===e[t.data.name]&&(e[t.data.name]=this._getVariableValue(this._sharedAssetsManager.getVariable(t.id)))}),e}getVariable(e){let t=this._getVariableByName(e);if(t){let n=this._sharedAssetsManager.getVariable(t.id);return this._getVariableValue(n)}}_getVariableValue(e){return"string"!=typeof e&&Yd.isTextValue(e)?Yd.getDisplayedValue(e):e}_getVariableByName(e){if(this._data){if(this._variablesCache.has(e))return this._variablesCache.get(e);let t=this._data.shared.variables.find(n=>n.data.name===e);return t&&this._variablesCache.set(e,t),t}}findObjectById(e){let t=this._scene?.getObjectByProperty("uuid",e);return this._createProxyObject(t)}findObjectByName(e){let t=this._scene?.getObjectByName(e);return this._createProxyObject(t)}getAllObjects(){let e=[];return this._scene?.traverseEntity(t=>{if(!(t.uuid===ab||this._scene.isInvisibleObjects(t)||t instanceof Wg)){let n=this._createProxyObject(t);n&&e.push(n)}}),e}getSplineEvents(){return this._eventManager?.handlers?.Spline.splineEvents}emitEvent(e,t){(this.findObjectById(t)||this.findObjectByName(t))?.emitEvent(e)}emitEventReverse(e,t){(this.findObjectById(t)||this.findObjectByName(t))?.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){this._controls?.orbitControls instanceof toe&&this._controls?.orbitControls.zoomOut(e)}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}setBackgroundColor(e){let{r:t,g:n,b:i,a:r}={r:0,g:0,b:0,a:1},s=new nd(t,n,i,r);try{s.setStyle(e)}catch{console.error("This is not a valid css color",e)}this._scene?.activePage.setBackgroundColor(s),this._requestRenderAutoMode()}dispose(){this.disposed=!0,this._eventManager?.deactivate(),this._scene?.dispose(),this._sharedAssetsManager?.dispose(),this._proxyObjectCache.forEach(e=>{SQ.unsubscribe(e)}),this._variablesCache.clear(),this._renderer?.setAnimationLoop(null),this._renderer?.dispose(),this._renderer=void 0,this._sharedAssetsManager?.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),void 0!==this._resizeObserverTimeout&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),this._controls?.deactivate(),function h9e(e){e.removeEventListener("pointerdown",LJ,!0),e.removeEventListener("pointerdown",hA,!0),e.removeEventListener("pointermove",hA,!0),e.removeEventListener("pointerup",nb,!0),e.removeEventListener("pointercancel",nb,!0),e.removeEventListener("pointerleave",nb,!0),window.removeEventListener("keydown",FJ,!0),window.removeEventListener("keyup",BJ,!0)}(this.canvas)}get isStopped(){return this._isPaused}stop(){this._isPaused||(this._renderer?.setAnimationLoop(null),this._isPaused=!0,this._eventManager?.pause(),this._controls?.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){!this._isPaused||(this._isPaused=!1,this._eventManager?.resume(),this._controls?.orbitControls&&(this._controls.orbitControls.enabled=!0),this._renderer?.setAnimationLoop(this.render))}setGlobalEvents(e){this._eventManager?.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){if(null==e)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t;e.traverseAncestors(r=>{r instanceof Wg&&(t=r.name)});let i=SQ({name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:t,parentUuid:e.parent instanceof Wg||e instanceof xz?void 0:e.parent?.uuid,emitEvent(r){e.dispatchEvent({type:"userEvent",eventName:r})},emitEventReverse(r){e.dispatchEvent({type:"userEvent",eventName:r,reverse:!0})}},(r,s)=>{"object"!=typeof e[r]&&Object.getOwnPropertyDescriptor(e,r)?.writable&&(e[r]=s),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,i),i}}(this.renderer.domElement),this.splineApp.load(r).then(()=>{console.log("Spline scene loaded")})}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),y1=(()=>{const t=class{constructor(i){this.http=i,this.getAllProjects=r=>this.http.post(en_backendUrl+"/api/project/listprojects",r).pipe((0,us.K)(o=>(0,bs._)(o)))}sendContactForm(i){return this.http.post(`${en_backendUrl}/api/project/referralmail`,i)}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Jt(ac))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),lx=(()=>{const t=class{constructor(){this.isWhiteText=!0,this.bannerClass="bannerdrk",this.textWhite="text-white",this.h1text="",this.brdtp=""}ngOnInit(){}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=qi({type:t,selectors:[["app-faq-component"]],inputs:{isWhiteText:"isWhiteText",bannerClass:"bannerClass",textWhite:"textWhite",h1text:"h1text",brdtp:"brdtp"},decls:69,vars:2,consts:[[1,"section","faqsection",3,"ngClass"],[1,"container"],[1,"row"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-md-10","col-sm-11","col-11","m-auto"],[1,"col-lg-4","col-md-6","col-sm-6"],[1,"creative"],[1,"",3,"ngClass"],[1,"col-lg-7","offset-lg-1","col-md-6","col-sm-6"],[1,"d-block"],[1,"custom-collapse","footer-collapse"],["id","accordionExample1",1,"accordion"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","false","aria-controls","collapseOne",1,"accordion-button","collapsed","brdtp"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],["id","headingTwo",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed"],["id","collapseTwo","aria-labelledby","headingTwo","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingThree",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseThree","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseThree","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingFour",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFour","aria-expanded","false","aria-controls","collapseFour",1,"accordion-button","collapsed"],["id","collapseFour","aria-labelledby","headingFour","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingFive",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFive","aria-expanded","false","aria-controls","collapseFive",1,"accordion-button","collapsed"],["id","collapseFive","aria-labelledby","headingFive","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingSix",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSix","aria-expanded","false","aria-controls","collapseSix",1,"accordion-button","collapsed"],["id","collapseSix","aria-labelledby","headingSix","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingSeven",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSeven","aria-expanded","false","aria-controls","collapseSeven",1,"accordion-button","collapsed","brdbtm"],["id","collapseSeven","aria-labelledby","headingSeven","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"div",5)(7,"h1",6),I(8," What "),ue(9,"br"),I(10," makes Pixtar "),ue(11,"br"),I(12," Special? "),ue(13,"br"),C(14,"span"),I(15," And other FAQs\u2026 "),E()()()(),C(16,"div",7)(17,"div",8)(18,"div",9)(19,"div",10)(20,"div",11)(21,"h2",12)(22,"button",13),I(23," Alright, no secrets \u2013 what makes Pixtar stand out? "),E()(),C(24,"div",14)(25,"div",15),I(26," Pixtar stands out for our unique blend of creativity, strategy, and a deep commitment to client satisfaction. We don\u2019t just design; we craft memorable, user-friendly experiences that make brands shine. "),E()()(),C(27,"div",11)(28,"h2",16)(29,"button",17),I(30," Where are you based? "),E()(),C(31,"div",18)(32,"div",15),I(33," Virtually, next door! We\u2019re proudly based in Dubai, UAE, but our team collaborates with clients worldwide, making distance no barrier to outstanding design! Our business hours are 9 am\u20136 pm GST / 1 am\u201310 am EST / 10 pm\u20137 am PST. But with our early-rising CEO and night-owl CTO, we\u2019re always able to sync up with clients from LA all the way to Australia\u2014and all the lovely places in between. "),E()()(),C(34,"div",11)(35,"h2",19)(36,"button",20),I(37," How are you different from a freelance designer? "),E()(),C(38,"div",21)(39,"div",15),I(40," At Pixtar, you get the expertise of an entire team, not just one individual. We bring together specialized skills in design, strategy, and development, providing a more comprehensive approach and smoother project delivery. "),E()()(),C(41,"div",11)(42,"h2",22)(43,"button",23),I(44," What other design magic do you offer? "),E()(),C(45,"div",24)(46,"div",15),I(47," Besides website design, we specialize in branding, UI/UX design, graphic design, and digital marketing assets. Whatever your design needs, Pixtar has the creative solution. "),E()()(),C(48,"div",11)(49,"h2",25)(50,"button",26),I(51," Who do you usually work with? "),E()(),C(52,"div",27)(53,"div",15),I(54," We collaborate with businesses of all sizes\u2014from startups to established brands\u2014across a range of industries, including Lifestyle, healthcare, technology, real estate, and more. "),E()()(),C(55,"div",11)(56,"h2",28)(57,"button",29),I(58," Which platforms do you use for building websites? "),E()(),C(59,"div",30)(60,"div",15),I(61," We work with popular platforms like Angular, Node.js, React, Shopify, Magento, and Webflow, ensuring you get a website that\u2019s not only beautiful but also easy to manage and scalable. "),E()()(),C(62,"div",11)(63,"h2",31)(64,"button",32),I(65," I\u2019m in! When can we get started? "),E()(),C(66,"div",33)(67,"div",15),I(68," We\u2019re thrilled to have you onboard! Just reach out through our contact page, and we\u2019ll set up a kickoff meeting to dive into your project. "),E()()()()()()()()()()()()),2&r&&(ot("ngClass",s.bannerClass),ce(7),ot("ngClass",s.h1text))},dependencies:[qx],styles:[".footer-collapse[_ngcontent-%COMP%]{padding:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:30px 20px}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none;border-bottom:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;color:#fff!important;border-radius:0;font-size:20px;font-weight:500;display:flex;align-items:center}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:focus{outline:none;color:#6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:hover{color:#fff!important;outline:none}@media (max-width: 1366px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.brdtp[_ngcontent-%COMP%]{border-top:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{background-image:url(plus.2523ff04f32f499f.svg);margin-top:5px;margin-bottom:5px;color:#dadade}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:400}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.bannerdrk[_ngcontent-%COMP%]{background-color:#000}.fade-in-image[_ngcontent-%COMP%]{animation:fadeIn 5s}.collapsing[_ngcontent-%COMP%]{transition:height .8s ease-in-out!important}"]}),e})();const XT=function(e){return{"text-white":e}};function ZZe(e,t){if(1&e){const n=Xr();C(0,"div",8)(1,"div",2)(2,"div",9)(3,"div",10),ue(4,"img",11),E()(),C(5,"div",12)(6,"div",13)(7,"h6",14),I(8),E(),C(9,"h4",15),I(10),E(),C(11,"div",16)(12,"p",17),I(13),C3(14,"slice"),E()(),C(15,"span",18),zt("click",function(){Zn(n);const r=_t().$implicit;return ti(_t().toggleText(r))}),I(16),E()()(),C(17,"div",19)(18,"div",13)(19,"div",16)(20,"p",20),I(21),E()(),C(22,"span",21),zt("click",function(){Zn(n);const r=_t().$implicit;return ti(_t().toggleText(r))}),I(23),E()()()()()}if(2&e){const n=_t().$implicit,i=_t();ce(4),Uc("src","",i.imagepath,"/",n.image,"",De),ce(3),ot("ngClass",nl(20,XT,i.isWhiteText)),ce(1),hs(" ",n.name," "),ce(1),ot("ngClass",nl(22,XT,i.isWhiteText)),ce(1),hs(" ",n.title," "),ce(1),mo("expanded",n.isExpanded),ce(1),ot("ngClass",nl(24,XT,i.isWhiteText)),ce(1),hs(" ",n.isExpanded?n.text:function d9(e,t,n,i,r){const s=e+Ps,o=ln(),a=Ss(o,s);return zx(o,s)?o9(o,Ws(),t,a.transform,n,i,r,a):a.transform(n,i,r)}(14,16,n.text,0,240)+"..."," "),ce(3),hs(" ",n.isExpanded?"Read Less":"Read More"," "),ce(3),mo("expanded",n.isExpanded),ce(1),ot("ngClass",nl(26,XT,i.isWhiteText)),ce(1),hs(" ",n.text," "),ce(2),hs(" ",n.isExpanded?"Show Less":"Show More"," ")}}function QZe(e,t){if(1&e&&($o(0),mt(1,ZZe,24,28,"ng-template",7),Ko()),2&e){const n=_t();ce(1),ot("id",n.baseUrl)}}let _1=(()=>{const t=class{constructor(i){this.testimonialService=i,this.testimonials=[],this.isWhiteText=!0,this.bannerClass="bannerdrk",this.desktopslider={loop:!1,rewind:!0,autoplay:!0,autoplayTimeout:1e4,center:!0,dots:!0,autoHeight:!0,autoWidth:!0,smartSpeed:1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.isExpanded=!1,this.imagepath=en_backendUrl+"/public/"}ngOnInit(){this.getTestimonial()}getTestimonial(){this.testimonialService.getTestimonialData({}).subscribe(r=>{this.testimonials=200===r.code&&r.testimonialData?.length>0?r.testimonialData:[]},r=>{console.error("Failed to fetch testimonial data",r),this.testimonials=[]})}toggleText(i){i.isExpanded=!i.isExpanded}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(Pk))},t.\u0275cmp=qi({type:t,selectors:[["app-testimonial"]],inputs:{isWhiteText:"isWhiteText",bannerClass:"bannerClass"},decls:7,vars:3,consts:[[1,"success-story",3,"ngClass"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-11","col-sm-11","col-11","mx-auto"],[1,"content","mbrem8"],[3,"options"],[4,"ngFor","ngForOf"],["carouselSlide","",3,"id"],[1,"col-md-9","col-sm-11","col-11","mx-auto"],[1,"col-lg-3","col-md-5","col-sm-5"],[1,"imgblk"],["alt","",1,"",3,"src"],[1,"col-lg-8","col-md-7","offset-lg-1","col-sm-7","mt-sm-0","mt-3"],[1,"slidecontent"],[1,"fontsize12","semibold","textcolor1",3,"ngClass"],[1,"size32","textcolor1","weight500",3,"ngClass"],[1,"text-container"],[1,"size18","textcolor3","d-md-block","d-sm-none","d-none",3,"ngClass"],[1,"show-more-btn","d-md-block","d-sm-none","d-none","hover-underline-animation","lufgaregular","size18",3,"click"],[1,"col-md-12","d-md-none","d-sm-block","d-block","mt-sm-4","mt-3"],[1,"size18","textcolor3",3,"ngClass"],[1,"show-more-btn","d-md-none","d-sm-block","d-block","hover-underline-animation","lufgaregular","size18",3,"click"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),ue(4,"div",4),C(5,"owl-carousel-o",5),mt(6,QZe,2,1,"ng-container",6),E()()()()()),2&r&&(ot("ngClass",s.bannerClass),ce(5),ot("options",s.desktopslider),ce(1),ot("ngForOf",s.testimonials))},dependencies:[qx,Ba,W0,uf,B7],styles:['.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width: 575px){.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;margin:0 auto}}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:15px 0;line-height:52px;text-transform:uppercase}@media (max-width: 1366px){.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{line-height:40px}}@media (max-width: 991px){.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{line-height:28px}}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:29px}@media (max-width: 1366px){.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:normal}}  .owl-theme .owl-nav.disabled+.owl-dots{margin-top:50px}  .owl-theme .owl-dots .owl-dot span{background:#fff}  .owl-theme .owl-dots .owl-dot.active span{background-color:#de9b7a}.text-container[_ngcontent-%COMP%]{max-height:8.5em;overflow:hidden;transition:max-height .3s ease}.text-container.expanded[_ngcontent-%COMP%]{max-height:100%}.show-more-btn[_ngcontent-%COMP%]{color:#de9b7a;cursor:pointer;margin-top:5px;display:inline-block}.hover-underline-animation[_ngcontent-%COMP%]{display:inline-block;position:relative;color:#fff;width:98px;margin-top:15px}@media (max-width: 1024px){.hover-underline-animation[_ngcontent-%COMP%]{width:76px}}.hover-underline-animation[_ngcontent-%COMP%]:hover{color:#de9b7a}.hover-underline-animation[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;transform:scaleX(0);height:2px;bottom:0;left:0;background-color:#de9b7a;transform-origin:bottom right;transition:transform .25s ease-out;background-image:none!important}.hover-underline-animation[_ngcontent-%COMP%]:hover:after{transform:scaleX(1);transform-origin:bottom left}']}),e})();const JZe=["myVideo"],eQe=["canvas"];function tQe(e,t){if(1&e&&(C(0,"div",123)(1,"a",124),ue(2,"img",125),E()()),2&e){const n=t.$implicit;ce(2),bd("src",n.img,De)}}const nQe=function(e){return{width:e}};let fU=(()=>{const t=class{onScroll(i){const r=window.scrollY||document.documentElement.scrollTop;this.sectionWidth=Math.min(100,50+r/10),this.spline&&this.spline.setZoom(1,1)}constructor(i,r,s,o,a,l,c,d,h,u,p,m){this.renderer=i,this._platformId=r,this.testimonialService=s,this.pageservice=o,this.metaTagService=a,this.titleService=l,this.splineThreeService=c,this.formBuilder=d,this.http=h,this.projectservice=u,this.modalService=p,this.activeModal=m,this.limit=10,this.slides=[],this.recentslider=[],this.customOptions={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],margin:14,responsive:{0:{items:3},400:{items:4},740:{items:8},940:{items:10}},nav:!1},this.recentoptions={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],margin:14,responsive:{0:{items:2},480:{items:2},740:{items:3},940:{items:4}},nav:!1},this.desktopslider={loop:!1,rewind:!0,autoplay:!0,autoplayTimeout:15e3,center:!0,dots:!0,autoHeight:!0,autoWidth:!0,smartSpeed:1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.page=4,this.page1=5,this.invalidNumber=!1,this.emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$",this.submitted=!1,this.imageData=[{albumId:1,id:1,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:"https://via.placeholder.com/600/92c952"},{albumId:1,id:2,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:"https://via.placeholder.com/600/771796"}],this.currentPage=1,this.allprojects=[],this.currentLimit=4,this.reviews=[],this.reviewSlider={items:3,loop:!0,margin:20,autoplay:!0,slideTransition:"linear",autoplaySpeed:3e3,autoplayHoverPause:!0,responsive:{0:{items:1},480:{items:1},740:{items:2},991:{items:3}},dots:!1,nav:!1},this.starRating=4,this.instaLimit=9,this.instagramPost=[],this.searchText="",this.closeResult="",this.modalReference=null,this.customMediaSlider={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!0,navSpeed:700,navText:['<i class="fas fa-arrow-left achprevious"></i>','<i class="fas fa-arrow-right achnext active"></i>'],margin:14,responsive:{0:{items:1},400:{items:1},740:{items:1},940:{items:1}},nav:!1},this.popupslider={loop:!0,autoplay:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:['<i class="fas fa-arrow-left achprevious"></i>','<i class="fas fa-arrow-right achnext active"></i>'],margin:14,responsive:{0:{items:1},400:{items:1},740:{items:1},940:{items:1}},nav:!0},this.isPlaying=!0,this.sectionWidth=10,this.isChangingRandom=!1,this.clientImgarray=[],this.filteredClients=[],this.callback=(v,g)=>{g===google.maps.places.PlacesServiceStatus.OK&&(this.reviews=v.reviews.slice())},this.imagepath=en_backendUrl+"/public/",this.baseUrl=en_baseUrl+"/assets",this.get_PageMeta(),this.get_AllProjects(),this.getInstagramPosts(),this.slides.push({id:1,img:this.baseUrl+"/img/home/veritcal-images/1.jpg"},{id:2,img:this.baseUrl+"/img/home/veritcal-images/2.jpg"},{id:3,img:this.baseUrl+"/img/home/veritcal-images/3.jpg"},{id:4,img:this.baseUrl+"/img/home/veritcal-images/4.jpg"},{id:5,img:this.baseUrl+"/img/home/veritcal-images/5.jpg"},{id:6,img:this.baseUrl+"/img/home/veritcal-images/6.jpg"},{id:7,img:this.baseUrl+"/img/home/veritcal-images/7.jpg"},{id:8,img:this.baseUrl+"/img/home/veritcal-images/8.jpg"},{id:9,img:this.baseUrl+"/img/home/veritcal-images/9.jpg"},{id:10,img:this.baseUrl+"/img/home/veritcal-images/10.jpg"}),this.recentslider.push({id:1,img:this.baseUrl+"/img/home/beyou.webp",brandname:"BeYou",brandtag:"Branding.UI/UX.Technology"},{id:2,img:this.baseUrl+"/img/home/cups.webp",brandname:"BeYou",brandtag:"Branding.UI/UX.Technology"},{id:3,img:this.baseUrl+"/img/home/bcard22.webp",brandname:"BeYou",brandtag:"Branding.UI/UX.Technology"},{id:4,img:this.baseUrl+"/img/home/vendetta2.webp",brandname:"BeYou",brandtag:"Branding.UI/UX.Technology"}),this.clientImgarray.push({id:1,img:this.baseUrl+"/img/home/logos/dnour.svg",class:""},{id:2,img:this.baseUrl+"/img/home/logos/crystal.svg",class:""},{id:3,img:this.baseUrl+"/img/home/logos/miniaar.svg",class:""},{id:4,img:this.baseUrl+"/img/home/logos/bni.svg",class:""},{id:5,img:this.baseUrl+"/img/home/logos/angle.svg"},{id:6,img:this.baseUrl+"/img/home/logos/pakhis.svg",class:""},{id:7,img:this.baseUrl+"/img/home/logos/drminnie.svg",class:""},{id:8,img:this.baseUrl+"/img/home/logos/veddentta.svg",class:""},{id:9,img:this.baseUrl+"/img/home/logos/autokoorosh.svg",class:""},{id:10,img:this.baseUrl+"/img/home/logos/fractal.svg",class:""},{id:11,img:this.baseUrl+"/img/home/logos/corporate.svg",class:""},{id:12,img:this.baseUrl+"/img/home/logos/aetrio.svg",class:""},{id:13,img:this.baseUrl+"/img/home/logos/wrae.svg",class:""},{id:14,img:this.baseUrl+"/img/home/logos/beyou.svg",class:""},{id:15,img:this.baseUrl+"/img/home/logos/alchemative.svg",class:""},{id:16,img:this.baseUrl+"/img/home/logos/Asset 13.svg",class:""},{id:17,img:this.baseUrl+"/img/home/logos/caratcraft.svg",class:""},{id:18,img:this.baseUrl+"/img/home/logos/ep.svg",class:""},{id:19,img:this.baseUrl+"/img/home/logos/holidaymate.svg",class:""},{id:20,img:this.baseUrl+"/img/home/logos/j.avenue.svg",class:""},{id:22,img:this.baseUrl+"/img/home/logos/maney-angel.svg",class:""},{id:23,img:this.baseUrl+"/img/home/logos/santosh-kotli.svg",class:""},{id:24,img:this.baseUrl+"/img/home/logos/solitaire-events.svg",class:""},{id:25,img:this.baseUrl+"/img/home/logos/spacex.svg",class:""},{id:26,img:this.baseUrl+"/img/home/logos/urban-excellence.svg",class:""},{id:27,img:this.baseUrl+"/img/home/logos/virtual-key.svg",class:""},{id:28,img:this.baseUrl+"/img/home/logos/zlk.svg",class:""}),this.filteredClients=this.clientImgarray.slice(0,15)}onHover(){this.isChangingRandom||(this.isChangingRandom=!0,this.intervalId=setInterval(()=>{this.filterClients()},2e3))}filterClients(){this.filteredClients.forEach(c=>{c.class=""});let i=this.clientImgarray,r=[];for(var s=0;s<2;s++){var o=Math.floor(Math.random()*i.length);0==r.filter(d=>d.id==o).length&&r.push(i[o])}for(var a=0;a<r.length;a++)if(0==this.filteredClients.filter(d=>d.id==r[a].id).length){var l=Math.floor(Math.random()*this.filteredClients.length);this.filteredClients[l]=r[a],this.filteredClients[l].class="blur"}}isWeekend(i){const r=new Date(i.year,i.month-1,i.day);return 0===r.getDay()||6===r.getDay()}isDisabled(i,r){return i.month!==r.month}ngOnInit(){this.fetch(),document.getElementsByClassName("form-control");let r=document.getElementsByClassName("input-group");for(let o=0;o<r.length;o++)r[o].children[0].addEventListener("focus",function(){r[o].classList.add("input-group-focus")}),r[o].children[0].addEventListener("blur",function(){r[o].classList.remove("input-group-focus")});$("li").removeClass("main-menu__item--active"),$("#home").addClass("main-menu__item--active"),window.scroll({top:0,left:0,behavior:"smooth"}),this.service=new google.maps.places.PlacesService(document.getElementById("googleReviews")),this.service.getDetails({placeId:"ChIJV7cSUslDXz4R9uz8yYTtshE",fields:["reviews"]},this.callback),this.onHover(),this.containerRef.nativeElement&&this.splineThreeService.initialize(this.containerRef.nativeElement,"https://prod.spline.design/lOwCHnDGwjVf9GgA/scene.splinecode")}get_PageMeta(){this.pageservice.getpageWithName({pageName:"home"}).subscribe(r=>{200==r.code&&(this.titleService.setTitle(r?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:r?.body.result.meta_description},{name:"keywords",content:r?.body.result.meta_keywords}]))})}fetch(){this.http.get(`https://jsonplaceholder.typicode.com/albums/1/photos?_start=0&_limit=${this.limit}`).subscribe(s=>this.apiData=s,s=>(0,bs._)(s))}get_AllProjects(){this.projectservice.getAllProjects({limit:this.currentLimit,page:this.currentPage}).subscribe(r=>{200==r.code&&r.result&&r.result.length>0&&r.result.forEach(s=>{s.status&&this.allprojects.push(s)})})}loadMore(){this.currentLimit=this.currentLimit+4,this.get_AllProjects()}createRange(i){const r=[];for(let s=1;s<=i;s++)r.push(s);return r}getInstagramPosts(){this.pageservice.getInstagramPosts({limit:this.instaLimit}).subscribe(r=>{200==r.code&&(this.instagramPost=r.result,this.instagramProfile=r.profile)})}loadmorePost(){this.instaLimit=this.instaLimit+9,this.getInstagramPosts()}openCarasoulpopup(i,r){this.selectedMedia=r,"CAROUSEL_ALBUM"==r.media_type&&(this.modalReference=this.modalService.open(i,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass",size:"lg",backdrop:"static"}).result.then(s=>{this.closeResult=`Closed with: ${s}`},s=>{this.closeResult=`Dismissed ${this.getDismissReason(s)}`}))}openPopup(i){this.modalReference=this.modalService.open(i,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass-video",size:"lg",backdrop:"static"}).result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}openMediaPopup(i,r){this.selectedMedia=r,this.modalReference=this.modalService.open(i,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass",size:"lg",backdrop:"static"}).result.then(s=>{this.closeResult=`Closed with: ${s}`},s=>{this.closeResult=`Dismissed ${this.getDismissReason(s)}`})}getDismissReason(i){return i===cc.ESC?"by pressing ESC":i===cc.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${i}`}closeModal(){this.activeModal.close()}makeLinksClickable(i){if(i){let r=i.split("\n");return r=r.map(s=>(s.includes("#")&&(s=s.split(" ").map(a=>`<a href="https://instagram.com/explore/tags/${a.split("#")[1]}" target="_blank">${a}</a>`).join("")),s)),r.map(s=>`${s}</br>`).join("")}}stopSlider(){this.sliderInterval&&clearInterval(this.sliderInterval)}onMouseLeave(){this.sliderInterval&&(clearInterval(this.sliderInterval),console.log("Slider stopped"))}onMouseEnter(i){let s=this.allprojects[i].project_images,o=this.imagepath,a=document.getElementsByClassName("galleryimg"+i);this.sliderInterval=setInterval(()=>{$(a).each(function(l){let c=s[(l+Math.floor(Math.random()*s.length))%s.length];$(a).attr("src",o+c)})},900)}ngAfterViewInit(){const i=this.videoElement.nativeElement;i.muted=!0,i.loop=!0,i.play().catch(r=>{console.log("Autoplay failed, user interaction may be required:",r)})}playInFullscreenWithAudio(){const i=this.videoElement.nativeElement;i.muted=!1,i.loop=!0,i.removeAttribute("controls"),i.play().then(()=>{i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen&&i.mozRequestFullScreen()}).catch(r=>{console.log("Error entering fullscreen with audio: ",r)})}onFullscreenChange(){const i=this.videoElement.nativeElement;document.fullscreenElement===i||document.webkitFullscreenElement===i||document.msFullscreenElement===i||document.mozFullScreenElement===i?i.play().catch(r=>{console.log("Could not play in fullscreen mode:",r)}):(i.setAttribute("controls",""),i.muted=!0)}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(ga),Ne(uh),Ne(Pk),Ne(tu),Ne(wd),Ne(Md),Ne(v1),Ne(V0),Ne(ac),Ne(y1),Ne(J0),Ne(mf))},t.\u0275cmp=qi({type:t,selectors:[["app-home"]],viewQuery:function(r,s){if(1&r&&(bl(JZe,5),bl(eQe,7)),2&r){let o;Yr(o=$r())&&(s.videoElement=o.first),Yr(o=$r())&&(s.containerRef=o.first)}},hostBindings:function(r,s){1&r&&zt("scroll",function(a){return s.onScroll(a)},0,Sm)("fullscreenchange",function(a){return s.onFullscreenChange(a)},!1,M0)},decls:269,vars:16,consts:[[1,"cbanner","bannerbgcolor"],[1,"container"],[1,"row"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["alt","",1,"img-globe","floatimg",3,"src"],[1,"banner","vh-100"],[1,"d-flex","flex-column","justify-content-center","h-100","align-items-start"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"contentbl"],[1,"h1","size90"],[1,"barcely"],[1,"position-absolute","banner-left-content","content-left"],[1,"d-flex","flex-column","justify-contente-arround","p-0","float-start",2,"height","130px","list-style","none","justify-content","space-between"],["href","https://www.instagram.com/pixtar.ae/","target","_blank",1,""],["alt","","width","15",3,"src"],["href","https://www.facebook.com/pixtar.ae/","target","_blank",1,""],["alt","","width","10",3,"src"],["href","https://www.linkedin.com/company/pixtar-ae/","target","_blank",1,""],["href","https://wa.me/+971527930781","target","_blank",1,"whatsapp-icon2","slideUpReturn","tabmob"],["alt","whatsapp","width","18",3,"src"],[1,"d-flex","flex-column","justify-contente-center","left-content2"],[1,"position-absolute","start-50","translate-middle","down-arrow"],["href","projects",1,"cstbtn"],[1,"text"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"bannerbgcolor","cstheight"],[1,"cstvideo",3,"scroll"],[1,"container-fluid"],[1,"col-md-12","col-sm-11","col-11","mx-auto",3,"ngStyle"],[1,"video-frame"],["width","100%","muted","","autoplay","",2,"cursor","pointer",3,"click"],["myVideo",""],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],["id","strategy",1,"toppadding"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100","data-aos-once","true",1,"col-lg-7","col-md-6"],[1,"content","d-flex","flex-column","justify-content-center","h-100"],[1,"fontsize12","semibold","mb-4"],[1,"heighlight"],[1,"position-relative","actn"],[1,"position-absolute","start-50"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100","data-aos-once","true",1,"col-lg-5","col-md-6"],[1,"custom-collapse"],["id","accordionExample",1,"accordion"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","false","aria-controls","collapseOne",1,"accordion-button","collapsed"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[1,"accordion-body"],[1,"position-relative","actn","wwo1"],[1,"position-absolute","start-50","wwo2"],["href","/branding",1,"cstbtn"],["id","headingSix",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFive","aria-expanded","false","aria-controls","collapseFive",1,"accordion-button","collapsed"],["id","collapseFive","aria-labelledby","headingThree","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[1,"position-absolute","start-50","wwo2-graph"],["href","/graphics",1,"cstbtn"],[1,"text","graph"],["id","headingThree",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseThree","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseThree","aria-labelledby","headingThree","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[1,"position-absolute","start-50","wwo2-website"],["href","/website",1,"cstbtn"],[1,"text","wow1-website","website"],["id","headingFour",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFour","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseFour","aria-labelledby","headingThree","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[1,"position-absolute","start-50","wwo2-ecommerce"],["href","/ecommerce",1,"cstbtn"],[1,"text","ecommerce"],[1,"featuredvideo","m80"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],[1,"blocklist","section1"],[1,"col-md-12"],["class","col custom-col mb-lg-5 mb-md-4 mb-4",4,"ngFor","ngForOf"],[1,"philosophy","position-relative"],[1,"content"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"fontsize12","semibold","linenormal"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"size90","mb-md-3","mb-sm-3","mb-2"],[1,"textcolor1"],[1,"custom-block"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-7","col-xl-7","col-lg-8","col-md-8","mbrem8"],[1,"size24","textcolor1"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-11","offset-lg-1","me-lg-0","col-md-11","col-sm-12","col-12","mx-md-auto"],[1,"imagecent","text-end"],["alt","",3,"src"],[1,"card","cardright"],["routerLink","/project-details/dnour",1,""],[1,"p1"],[1,"lufgalight"],[1,"cstcardright"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-11","ms-lg-0","col-md-11","col-sm-12","col-12","mx-md-auto"],[1,"imagecent"],[1,"card","cardleft"],["routerLink","/project-details/beyou",1,""],[1,"cstcardleft"],["routerLink","/project-details/spacex",1,""],["routerLink","/project-details/pakhis",1,""],[1,"mbrem5"],[1,"position-absolute","start-50","translate-middle","mbrem8"],["routerLink","/services",1,"cstbtn","cstbtn128"],[1,"text","text128"],[1,"success-story"],[1,"mask"],[1,"fontsize12","semibold"],[1,"size90"],[1,"d-block","textcolor1"],[1,"bannerdrk","creativity"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-10","m-auto"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-md-6","col-sm-6"],[1,"creative"],[1,"fontsize12","semibold","text-white"],[1,"d-md-block","d-lg-block","d-xl-block","d-xxl-block","size90"],[1,"textcolor6"],[1,"textcolor7"],[1,"barcy"],[1,"d-block","size90"],[1,"d-flex","justify-content-center","align-items-center","h-100"],[1,"mb-0"],["id","googleReviews",2,"display","none"],["id","reviews",2,"display","none"],["id","title"],["id","reviews"],[1,"col","custom-col","mb-lg-5","mb-md-4","mb-4"],["href","javascript:void(0)"],["alt","","data-aos","zoom-in","data-aos-duration","1500","data-aos-delay","50",1,"img-fluid",3,"src"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),ue(4,"img",4),C(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8),I(9,"Pixtar is a Branding"),E(),C(10,"h1",8),I(11,"And Web Development"),E(),C(12,"h1",8),I(13,"Studio in "),C(14,"span",9),I(15,"Dubai"),E()()()()(),C(16,"div",10)(17,"ul",11)(18,"li")(19,"a",12),ue(20,"img",13),E()(),C(21,"li")(22,"a",14),ue(23,"img",15),E()(),C(24,"li")(25,"a",16),ue(26,"img",13),E()(),C(27,"li")(28,"a",17),ue(29,"img",18),E()()(),C(30,"div",19)(31,"p"),I(32,"Building your business through "),E(),C(33,"p"),I(34,"creativity, is our business!"),E()()()()(),C(35,"div",20)(36,"p")(37,"a",21)(38,"span",22),I(39," See Our Work"),E(),C(40,"span",23),ue(41,"i",24),E()()()()()(),ue(42,"div",25),C(43,"section",26),zt("scroll",function(a){return s.onScroll(a)},0,Sm),C(44,"div",27)(45,"div",2)(46,"div",28)(47,"div",29)(48,"video",30,31),zt("click",function(){return s.playInFullscreenWithAudio()}),ue(50,"source",32)(51,"source",33),I(52," Your browser does not support the video tag. "),E()()()()()(),C(53,"section",34)(54,"div",1)(55,"div",2)(56,"div",3)(57,"div",2)(58,"div",35)(59,"div",36)(60,"h6",37),I(61,"What we offer"),E(),C(62,"p",38),I(63,"We don\u2019t just design\u2014we create harmony. With the precision of the golden ratio and the creativity of custom solutions, everything we craft is a one-of-a-kind masterpiece. "),E(),C(64,"div",39)(65,"div",40)(66,"p")(67,"a",21)(68,"span",22),I(69,"Explore Our Services"),E(),C(70,"span",23),ue(71,"i",24),E()()()()()()(),C(72,"div",41)(73,"div",42)(74,"div",43)(75,"div",44)(76,"h2",45)(77,"button",46),I(78," Branding/Re-branding "),E()(),C(79,"div",47)(80,"div",48),I(81," Shape how the world sees you. We help you define your story and express it through iconic branding. "),C(82,"div",49)(83,"div",50)(84,"p")(85,"a",51)(86,"span",22),I(87," Explore branding services "),E(),C(88,"span",23),ue(89,"i",24),E()()()()()()()(),C(90,"div",44)(91,"h2",52)(92,"button",53),I(93," Graphic Design "),E()(),C(94,"div",54)(95,"div",48),I(96," Designs on demand, tailored to your needs, with a plan that grows with you. "),C(97,"div",49)(98,"div",55)(99,"p")(100,"a",56)(101,"span",57),I(102," Explore plans "),E(),C(103,"span",23),ue(104,"i",24),E()()()()()()()(),C(105,"div",44)(106,"h2",58)(107,"button",59),I(108," Custom Website "),E()(),C(109,"div",60)(110,"div",48),I(111," Pixel-perfect, fast, and beautiful websites designed to perform on every screen. "),C(112,"div",49)(113,"div",61)(114,"p")(115,"a",62)(116,"span",63),I(117," Explore website service "),E(),C(118,"span",23),ue(119,"i",24),E()()()()()()()(),C(120,"div",44)(121,"h2",64)(122,"button",65),I(123," eCommerce Solutions "),E()(),C(124,"div",66)(125,"div",48),I(126," Launch a custom-built online store that engages, converts, and grows. "),C(127,"div",49)(128,"div",67)(129,"p")(130,"a",68)(131,"span",69),I(132," Explore Packages "),E(),C(133,"span",23),ue(134,"i",24),E()()()()()()()()()()()()()()()(),C(135,"section",70)(136,"div",1)(137,"div",71)(138,"div",72)(139,"h6",37),I(140,"Our clients include..."),E(),C(141,"div",2),$o(142),C(143,"div",73)(144,"div",2),mt(145,tQe,3,1,"div",74),E()(),Ko(),E()()()()(),C(146,"section",75)(147,"div",1)(148,"div",2)(149,"div",3)(150,"div",76)(151,"h6",77),I(152," Our Philosophy"),E(),C(153,"h1",78)(154,"span",79),I(155,"Beauty, Balance, "),E(),C(156,"span",9),I(157,"And "),E(),C(158,"span",80),I(159," Custom Craftsmanship "),E()(),C(160,"div",2)(161,"div",81)(162,"p",82),I(163,"At Pixtar, we believe that design isn\u2019t just about aesthetics\u2014it\u2019s about creating balance, impact, and authenticity. Every project we deliver is built from the ground up with no templates\u2014because your business deserves nothing less than original."),E()(),C(164,"div",83)(165,"div",84),ue(166,"img",85),C(167,"div",86)(168,"a",87)(169,"div",22)(170,"p",88),I(171,"D\u2019NOUR Dubai"),E(),C(172,"p",89),I(173,"Branding & eCommerce Website"),E()(),C(174,"div",90)(175,"span",23),ue(176,"i",24),E()()()()()(),C(177,"div",91)(178,"div",92),ue(179,"img",85),C(180,"div",93)(181,"a",94)(182,"div",22)(183,"p",88),I(184,"BEYOU"),E(),C(185,"p",89),I(186,"Branding & e-Commerce Website"),E()(),C(187,"div",95)(188,"span",23),ue(189,"i",24),E()()()()()(),C(190,"div",83)(191,"div",84),ue(192,"img",85),C(193,"div",86)(194,"a",96)(195,"div",22)(196,"p",88),I(197,"Space X Fitness"),E(),C(198,"p",89),I(199,"Branding And Website"),E()(),C(200,"div",90)(201,"span",23),ue(202,"i",24),E()()()()()(),C(203,"div",91)(204,"div",92),ue(205,"img",85),C(206,"div",93)(207,"a",97)(208,"div",22)(209,"p",88),I(210,"Pakhi\u2019s Handhwash"),E(),C(211,"p",89),I(212,"Branding & Packaging"),E()(),C(213,"div",95)(214,"span",23),ue(215,"i",24),E()()()()()()()()()(),C(216,"div",98)(217,"div",99)(218,"p")(219,"a",100)(220,"span",101),I(221," Explore All Work"),E(),C(222,"span",23),ue(223,"i",24),E()()()()()()(),C(224,"section",102)(225,"div",103),ue(226,"img",85),E(),C(227,"div",1)(228,"div",2)(229,"div",71)(230,"div",76)(231,"h6",104),I(232,"Client Success Stories"),E(),C(233,"h1",105),I(234,"And our "),C(235,"span",9),I(236,"Creativity "),E(),C(237,"span",106),I(238," Inspired by your story "),E()()()()()()(),ue(239,"app-testimonial"),C(240,"section",107)(241,"div",1)(242,"div",2)(243,"div",108)(244,"div",2)(245,"div",109)(246,"div",110)(247,"h6",111),I(248,"Our promise"),E(),C(249,"h1",112)(250,"span",113),I(251," We "),E(),C(252,"span",114),I(253," Go "),E(),C(254,"span",115),I(255,"Beyond "),E()(),C(256,"h1",116),I(257,"The Limits"),ue(258,"br"),I(259,"For You "),E()()(),C(260,"div",109)(261,"div",117)(262,"p",118),I(263,"Design is only part of what we do. We partner with you to solve problems, meet challenges, and grow together\u2014always with 100% transparency and trust."),E()()()()()()()(),ue(264,"app-faq-component")(265,"div",119),C(266,"section",120),ue(267,"div",121)(268,"div",122),E()),2&r&&(ce(4),Ue("src","",s.baseUrl,"/img/three-d-objects/home.png",De),ce(16),Ue("src","",s.baseUrl,"/img/home/social-media/instagram.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/social-media/facebook.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/social-media/linkedin.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/whatsapp.svg",De),ce(17),ot("ngStyle",nl(14,nQe,s.sectionWidth+"%")),ce(4),Ue("src","",s.baseUrl,"/videos/home-page-video.mp4",De),ce(1),Ue("src","",s.baseUrl,"/videos/home-page-video.mp4",De),ce(94),ot("ngForOf",s.filteredClients),ce(21),Ue("src","",s.baseUrl,"/img/home/services/dnour-service.jpg",De),ce(13),Ue("src","",s.baseUrl,"/img/home/services/bu.jpg",De),ce(13),Ue("src","",s.baseUrl,"/img/home/services/spacex-service.jpg",De),ce(13),Ue("src","",s.baseUrl,"/img/home/services/pakhis-service.jpg",De),ce(21),Ue("src","",s.baseUrl,"/img/home/pixtar-mask.svg",De))},dependencies:[Ba,I0,xy,lx,_1],styles:['.barcy[_ngcontent-%COMP%]{font-family:barcelony,sans-serif}.text-color[_ngcontent-%COMP%]{color:#da9777}body[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif}.h1[_ngcontent-%COMP%]{color:#101010;font-family:Montserrat,sans-serif;margin-top:0}.h1[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{font-weight:100;color:#da9777}.cbanner[_ngcontent-%COMP%]{min-height:100vh;height:100%;padding:0!important}.cbanner[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{color:#de9b7a}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]{background-size:60%}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]{background-size:50%;background-position:100% 103%}}.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{position:absolute;right:2%;top:26%;width:550px;margin-right:10rem}@media (max-width: 1920px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{margin-right:0;width:450px;top:26%}}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{width:300px;margin-right:2rem;top:28%}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:0}}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:0;width:230px;top:30%}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{display:none;width:100%;top:95px;opacity:.5;object-fit:cover;left:0;right:0}}@keyframes _ngcontent-%COMP%_float{0%{transform:translatey(0)}50%{transform:translatey(-20px)}to{transform:translatey(0)}}.cbanner[_ngcontent-%COMP%]   .floatimg[_ngcontent-%COMP%]{transform:translatey(0);animation:_ngcontent-%COMP%_float 6s ease-in-out infinite}.logotext[_ngcontent-%COMP%]{position:relative;top:5px;left:-24px;font-weight:700;color:#000}.banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:32px;font-weight:400;color:#101010}@media (max-width: 1440px){.banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1366px){.banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 1024px){.banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 480px){.banner[_ngcontent-%COMP%]{height:80vh!important}}@media (max-width: 1788px){.banner[_ngcontent-%COMP%]{width:1165px}}@media (max-width: 1680px){.banner[_ngcontent-%COMP%]{width:100%}}.banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:1053px}@media (max-width: 1440px){.banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:880px}}@media (max-width: 1366px){.banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:770px}}@media (max-width: 1024px){.banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:auto}}@media (max-width: 480px){.banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:370px;padding:0 10px}}@media (max-width: 380px){.banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:315px}}.banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{position:relative}@media (max-width: 575px){.banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{left:3px}}@font-face{font-family:barcelony;src:local("barcelony"),url(barcelony.68e366dc7c859cc4.ttf) format("truetype")}.barcely[_ngcontent-%COMP%]{font-family:barcelony}.banner-left-content[_ngcontent-%COMP%]{display:flex;width:393px;justify-content:start;align-items:center;left:auto!important;bottom:3%!important;margin-left:-7rem}@media (max-width: 1440px){.banner-left-content[_ngcontent-%COMP%]{margin-left:-3rem}}@media (max-width: 991px){.banner-left-content[_ngcontent-%COMP%]{margin-left:-2rem}}@media (max-width: 480px){.banner-left-content[_ngcontent-%COMP%]{margin-left:0rem}.banner-left-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px;height:12px}}.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:18px;line-height:32px;font-weight:400}@media (max-width: 1199px){.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:normal}}@media (max-width: 991px){.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 767px){.banner-left-content[_ngcontent-%COMP%]{position:relative!important;left:0%!important;bottom:7rem!important}}@media (max-width: 480px){.banner-left-content[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 380px){.banner-left-content[_ngcontent-%COMP%]{width:315px;bottom:3rem!important}}@media (max-width: 345px){.banner-left-content[_ngcontent-%COMP%]{width:auto;padding:0}}.banner-left-content[_ngcontent-%COMP%]   p.text-color[_ngcontent-%COMP%]{font-weight:600}.banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:6rem}@media (max-width: 1440px){.banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:2rem}}@media (max-width: 991px){.banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:1rem}}.down-arrow[_ngcontent-%COMP%]{bottom:9%}@media (max-width: 1366px){.down-arrow[_ngcontent-%COMP%]{bottom:13%}}@media (max-width: 767px){.down-arrow[_ngcontent-%COMP%]{bottom:auto;margin-top:-50px}}@media (max-width: 480px){.down-arrow[_ngcontent-%COMP%]{margin-top:-30px}}@media (max-width: 480px){.down-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}}.custom-collapse[_ngcontent-%COMP%]{padding:20px;overflow:hidden;border-radius:30px}@media (max-width: 1199px){.custom-collapse[_ngcontent-%COMP%]{padding:10px}}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:20px}@media (max-width: 1199px){.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#1d1d1f}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]:hover{color:#de9b7a}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;border-bottom:1px solid #dadade;border-radius:0;font-size:28px;color:#de9b7a;font-weight:500;display:flex;align-items:center}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:focus{outline:none;color:#de9b7a}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:active{color:#de9b7a;outline:none}@media (max-width: 1440px){.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1366px){.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{margin-top:10px;color:#dadade}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{color:#1d1d1f;font-size:16px;font-weight:400}@media (max-width: 1199px){.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.custom-collapse[_ngcontent-%COMP%]   .hover-underline-animation[_ngcontent-%COMP%]{display:inline-block;position:relative;color:#0087ca}.custom-collapse[_ngcontent-%COMP%]   .hover-underline-animation[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;transform:scaleX(0);height:2px;bottom:0;left:0;background-color:#101010;transform-origin:bottom right;transition:transform .25s ease-out;background-image:none!important}.custom-collapse[_ngcontent-%COMP%]   .hover-underline-animation[_ngcontent-%COMP%]:hover:after{transform:scaleX(1);transform-origin:bottom left}.toppadding[_ngcontent-%COMP%]{padding-top:80px}@media (max-width: 991px){.toppadding[_ngcontent-%COMP%]{padding-top:30px}}.imgblock[_ngcontent-%COMP%]{padding:10px 30px}@media (max-width: 1024px){.imgblock[_ngcontent-%COMP%]{padding:10px 0}}.imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;transition:transform .9s ease}.imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.imgblock[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#e5e5e3;font-size:26px}@media (max-width: 1366px){.imgblock[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}.imgblock[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#878787;font-weight:400}.hard-work[_ngcontent-%COMP%]{margin:0;padding:50px 0 30px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]{padding:20px 0}}.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:32px;margin-top:15px;color:#878787;font-weight:600}@media (max-width: 1366px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:18px}}.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{color:#fff;font-size:30px;font-weight:600}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{font-size:28px}}.hard-work[_ngcontent-%COMP%]   .rlimg[_ngcontent-%COMP%]{width:30px}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]{padding:30px 10px 30px 0}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{height:24px;width:4px;top:6px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{margin-left:30px;width:4px;left:-5px;top:4px}}.hard-work[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.creativity[_ngcontent-%COMP%]{padding:80px 0}.creativity[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:65px;margin-top:0;line-height:1.2}.creativity[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#de9b7a;font-weight:300;line-height:1.8}@media (max-width: 1366px){.creativity[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:55px}}@media (max-width: 1024px){.creativity[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:50px}}@media (max-width: 991px){.creativity[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:38px}}@media (max-width: 575px){.creativity[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px}}.creativity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:52px;margin-top:70px;color:#fff;font-size:24px}@media (max-width: 1366px){.creativity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 1199px){.creativity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:42px}}@media (max-width: 991px){.creativity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;line-height:34px}}@media (max-width: 767px){.creativity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:30px}}@media (max-width: 575px){.creativity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:28px}}@media (max-width: 1366px){.creativity[_ngcontent-%COMP%]{padding:200px 0}}@media (max-width: 767px){.creativity[_ngcontent-%COMP%]{padding:150px 0}}@media (max-width: 575px){.creativity[_ngcontent-%COMP%]{padding:50px 20px}}.story[_ngcontent-%COMP%]   .customslider[_ngcontent-%COMP%]     .owl-carousel.owl-drag .owl-item:nth-child(odd){margin-top:0!important}.story[_ngcontent-%COMP%]   .customslider[_ngcontent-%COMP%]     .owl-carousel.owl-drag .owl-item.active:nth-child(3n+4){margin-top:60px!important}.story[_ngcontent-%COMP%]   .customslider[_ngcontent-%COMP%]     .owl-carousel.owl-drag .owl-item:nth-child(even){margin-top:20px!important}.story[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0}.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]{padding:300px 0}@media (max-width: 1366px){.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]{padding:200px 0}}@media (max-width: 767px){.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]{padding:150px 10px}}@media (max-width: 575px){.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]{padding:80px 10px}}.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:90px;font-weight:600;color:#000}.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:barcelony,sans-serif;font-weight:100;color:#da9777}@media (max-width: 1366px){.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:70px}}@media (max-width: 1024px){.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px}}@media (max-width: 991px){.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px}}@media (max-width: 575px){.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:38px}}@media (max-width: 480px){.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px}}  .story .owl-carousel .owl-item:nth-child(2) img{margin-top:30px}#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p.heighlight[_ngcontent-%COMP%]{font-size:24px;font-weight:400;color:#101010;line-height:2;padding-right:15px}@media (max-width: 1366px){#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p.heighlight[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p.heighlight[_ngcontent-%COMP%]{line-height:1.5;padding-right:0}}#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actn[_ngcontent-%COMP%]{margin:15px 0}#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actn[_ngcontent-%COMP%]   .bthw[_ngcontent-%COMP%]{text-decoration:none;color:#000;border:2px solid #000;text-align:center;padding:3px 40px;margin-top:20px;border-radius:30px;font-weight:700;font-size:20px}#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actn[_ngcontent-%COMP%]   .bthw[_ngcontent-%COMP%]:hover{background:#000;color:#de9b7a;border-color:#000}#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actn[_ngcontent-%COMP%]   .bthw[_ngcontent-%COMP%]:focus{border-color:#000;background:#000;color:#de9b7a}@media (max-width: 1366px){#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actn[_ngcontent-%COMP%]   .bthw[_ngcontent-%COMP%]{font-size:20px;padding:3px 40px}}@media (max-width: 1024px){#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actn[_ngcontent-%COMP%]   .bthw[_ngcontent-%COMP%]{font-size:18px;padding:3px 30px}}@media (max-width: 991px){#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actn[_ngcontent-%COMP%]   .bthw[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 767px){#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actn[_ngcontent-%COMP%]{margin:15px 0 30px;text-align:center}}@media (max-width: 767px){#strategy[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}}#strategy[_ngcontent-%COMP%]   a.more[_ngcontent-%COMP%]{margin-top:15px;background:-webkit-linear-gradient(#101010,rgba(0,0,0,.6705882353));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none;font-weight:700;cursor:pointer;width:55px;font-size:20px}#strategy[_ngcontent-%COMP%]   a.more[_ngcontent-%COMP%]:hover, #strategy[_ngcontent-%COMP%]   a.more[_ngcontent-%COMP%]:focus, #strategy[_ngcontent-%COMP%]   a.more[_ngcontent-%COMP%]:active{background:-webkit-linear-gradient(#d16a4c,#e8a18d);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.talk[_ngcontent-%COMP%]{padding-bottom:0}.talk[_ngcontent-%COMP%]   a.more[_ngcontent-%COMP%]{border:2px solid #e1a181;display:flex;width:100px;height:100px;text-align:center;justify-content:center;margin:0 auto;border-radius:50px;color:#fff;text-decoration:none;font-size:28px;font-weight:700;align-items:center;cursor:pointer}.talk[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:32px}.talk[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#fff;border-bottom:1px solid}.talk[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#de9b7a;border-bottom:1px solid}@media (max-width: 991px){.talk[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%}}@media (orientation: landscape) and (max-width: 991px){.h1[_ngcontent-%COMP%]{font-size:38px}}.p32[_ngcontent-%COMP%]{font-size:32px}@media (max-width: 600px){.p32[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 480px){.p32[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]{font-weight:700;color:#101010;padding:80px 0}@media (max-width: 1199px){.head[_ngcontent-%COMP%]{font-size:28px;padding:50px 0}}@media (max-width: 991px){.head[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 575px){.head[_ngcontent-%COMP%]{padding:30px 0}}.head[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px;display:inline-block;top:6px}@media (max-width: 1199px){.head[_ngcontent-%COMP%]:before{left:-8px}}@media (max-width: 991px){.head[_ngcontent-%COMP%]:before{height:24px;width:4px;top:3px}}@media (max-width: 767px){.head[_ngcontent-%COMP%]:before{left:-5px}}.tutorial_link[_ngcontent-%COMP%]{display:none!important}.review-section[_ngcontent-%COMP%]{background-color:#000}.review-section[_ngcontent-%COMP%]   .tutorial_link[_ngcontent-%COMP%]{display:none!important}.review-section[_ngcontent-%COMP%]     .sk_branding a{display:none!important}.sk-ww-google-reviews[_ngcontent-%COMP%]{background-color:#000!important}.sk_branding[_ngcontent-%COMP%]{display:none!important}  .sk-instagram-feed .sk-ig-load-more-posts{border:2px solid #e1a181!important;display:flex!important;width:102px!important;height:100px!important;text-align:center!important;justify-content:center;margin:30px auto 0!important;border-radius:50px!important;color:#fff;text-decoration:none!important;font-size:28px;font-weight:900;align-items:center;cursor:pointer;padding:30px 8px!important}.insta-section[_ngcontent-%COMP%]     .sk-instagram-feed .sk-ig-load-more-posts{height:102px!important;background:transparent!important;border-radius:70px!important}.insta-section[_ngcontent-%COMP%]     .sk-instagram-feed .sk-ig-load-more-posts:hover{padding:30px 8px!important;background:#e1a181!important;color:#fff!important}.insta-section[_ngcontent-%COMP%]     .sk-ig-all-posts{width:73%;margin:0 auto;border-top:1px solid rgb(219,219,219)!important;padding:20px 0 0!important}@media (max-width: 1399px){.insta-section[_ngcontent-%COMP%]     .sk-ig-all-posts{width:77%}}@media (max-width: 1199px){.insta-section[_ngcontent-%COMP%]     .sk-ig-all-posts{width:90%}}@media (max-width: 991px){.insta-section[_ngcontent-%COMP%]     .sk-ig-all-posts{width:100%}}@media (max-width: 767px){.insta-section[_ngcontent-%COMP%]     .sk-ig-all-posts{width:101%}}.review-head[_ngcontent-%COMP%]{font-weight:700;color:#fff;padding:80px 0}@media (max-width: 1199px){.review-head[_ngcontent-%COMP%]{font-size:28px;padding:50px 0}}@media (max-width: 991px){.review-head[_ngcontent-%COMP%]{font-size:24px;padding:30px 0}}@media (max-width: 767px){.review-head[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}.review-head[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px;display:inline-block;top:6px}@media (max-width: 1199px){.review-head[_ngcontent-%COMP%]:before{left:0}}@media (max-width: 991px){.review-head[_ngcontent-%COMP%]:before{height:24px;width:4px;top:3px}}@media (max-width: 767px){.insta-section[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}}.insta-section[_ngcontent-%COMP%]     .sk_branding a{display:none!important}.review-section[_ngcontent-%COMP%]   .review-shortdecs[_ngcontent-%COMP%]{overflow:hidden}.review-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px}.review-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important}.review-section[_ngcontent-%COMP%]     .owl-item{background-color:#1c1c27;padding:30px}.review-section[_ngcontent-%COMP%]   .coloractive[_ngcontent-%COMP%]{color:#de9b7a;font-size:24px}.review-section[_ngcontent-%COMP%]   .noborder[_ngcontent-%COMP%]{display:flex;border:none!important;background-color:transparent!important;color:#ac9375}.review-section[_ngcontent-%COMP%]   .noborder[_ngcontent-%COMP%]:hover{color:#fff}.review-section[_ngcontent-%COMP%]   .noborder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:5px}.review-section[_ngcontent-%COMP%]   .cstheight[_ngcontent-%COMP%]{height:378px;display:flex;flex-direction:column;justify-content:center}.review-section[_ngcontent-%COMP%]   .box-name[_ngcontent-%COMP%]{height:250px;overflow:hidden;overflow-y:scroll}.review-section[_ngcontent-%COMP%]   .fa-star[_ngcontent-%COMP%]{color:#de9b7a}.review-section[_ngcontent-%COMP%]   .nameheight[_ngcontent-%COMP%]{height:68px}  .sk-ig-profile-counts{display:flex;justify-content:space-between;width:80%;margin:15px 0}@media (max-width: 1199px){  .sk-ig-profile-counts{width:80%}}@media (max-width: 991px){  .sk-ig-profile-counts{width:100%}}  .sk-ig-profile-bio-container b{display:none}  .sk-ig-profile-bio-container .sk-ig-profile-bio.linked{display:block}  .sk-instagram-profile-pic{width:150px!important;height:150px!important;background-size:150px 150px!important;margin:0 100px 0 0!important}@media (max-width: 1024px){  .sk-instagram-profile-pic{margin:0 80px 0 0!important}}@media (max-width: 991px){  .sk-instagram-profile-pic{width:120px!important;height:120px!important;background-size:120px 120px!important;margin:0 50px 0 0!important}}  .sk-ig-profile-info{width:50%!important}@media (max-width: 1199px){  .sk-ig-profile-info{width:60%!important}}@media (max-width: 991px){  .sk-ig-profile-info{width:100%!important}}  .white-popup{height:96vh!important}  .white-popup>div{height:100%!important}  .ig_media{height:95vh!important}  .instagram-user-root-container{display:flex;justify-content:center;align-items:center;padding-bottom:80px!important;margin-bottom:30px!important}@media (max-width: 991px){  .instagram-user-root-container{padding-bottom:50px!important}}@media (max-width: 767px){  .instagram-user-root-container{padding-left:0!important;padding-right:0!important}}@media (max-width: 480px){  .instagram-user-root-container{display:block}}  button.instagram-user-container{background-color:#efefef!important;border-color:#efefef!important}  button.instagram-user-container:hover{background-color:#dbdbdb!important;border-color:#dbdbdb!important}.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]{padding-right:56px}@media (max-width: 991px){.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]{padding-right:30px}}@media (max-width: 767px){.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]{padding-right:0}}@media (max-width: 575px){.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]{text-align:center}}.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;color:#444!important}.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{color:#333;background-color:#efefef!important;border-color:#efefef!important;font-weight:400}.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#dbdbdb!important;border-color:#dbdbdb!important}.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   .csmargin[_ngcontent-%COMP%]{margin:15px 0}@media (max-width: 575px){.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   .csmargin[_ngcontent-%COMP%]{justify-content:center}}.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   .csdflx[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#444!important;text-decoration:none!important}.instagram-profile[_ngcontent-%COMP%]   .profileblock[_ngcontent-%COMP%]{padding-bottom:80px;margin-bottom:30px}@media (max-width: 991px){.instagram-profile[_ngcontent-%COMP%]   .profileblock[_ngcontent-%COMP%]{padding-bottom:50px}}.instagram-profile[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{object-fit:cover;width:-webkit-fill-available;border-radius:8px}.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .col-md-41[_ngcontent-%COMP%]{flex-grow:1;width:32%;height:255px}@media (max-width: 767px){.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .col-md-41[_ngcontent-%COMP%]{width:40%;height:auto}}@media (max-width: 380px){.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .col-md-41[_ngcontent-%COMP%]{width:100%;height:255px}}.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .col-md-41[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{cursor:pointer;background-color:#00000080;margin:0;padding:0;display:inline-block;position:absolute;top:5px;right:5px;border-radius:50%;width:30px;height:30px;text-align:center}.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .col-md-41[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .col-md-41[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   span.fa-play-circle[_ngcontent-%COMP%]{font-size:30px;color:#fff}@media (max-width: 480px){.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .col-md-41[_ngcontent-%COMP%]   img.post-image[_ngcontent-%COMP%]{height:165px}}@media (max-width: 380px){.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .col-md-41[_ngcontent-%COMP%]   img.post-image[_ngcontent-%COMP%]{height:100%}}.instagram-profile[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{width:83%;background-color:#dbdbdb;height:1px;margin:0 auto}@media (max-width: 991px){.instagram-profile[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{width:90%}}@media (max-width: 767px){.instagram-profile[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{width:100%}}  .myCustomModalClass-video .modal-dialog.modal-lg{position:relative;display:flex;justify-content:center;align-items:center;margin:0 auto;padding-top:0;height:100%}  .myCustomModalClass-video .modal-dialog.modal-lg .modal-content{background:#000}@media (max-width: 1920px){  .myCustomModalClass-video .modal-dialog.modal-lg{--bs-modal-width: 90% !important;margin:0 auto}}@media (min-width: 992px){  .myCustomModalClass-video .modal-dialog.modal-lg{--bs-modal-width: 100%;margin:0 auto}}@media (max-width: 1280px){  .myCustomModalClass-video .modal-dialog.modal-lg{max-width:100%}}  .myCustomModalClass-video .modal-dialog.modal-lg .modal-body .position-relative{min-height:100%;height:100%;display:block}  .myCustomModalClass-video .modal-dialog.modal-lg .modal-body .position-relative figure{margin-bottom:0}  .myCustomModalClass-video .btn{background-color:transparent!important;border:none!important;color:#444!important;font-size:20px;position:fixed;top:1%;right:1%;z-index:2;padding:5px}  .myCustomModalClass-video .btn:hover{color:#ffffff80!important}@media (max-width: 991px){  .myCustomModalClass-video .btn{top:0}}@media (max-width: 480px){  .myCustomModalClass-video .btn{top:-6px;right:6px}}  .myCustomModalClass{background-color:#0b0b0bb8}  .myCustomModalClass .modal-dialog.modal-lg{position:relative;display:flex;justify-content:center;align-items:center;margin:0 auto;padding-top:0;height:100%}@media (min-width: 992px){  .myCustomModalClass .modal-dialog.modal-lg{--bs-modal-width: 1055px}}@media (max-width: 1280px){  .myCustomModalClass .modal-dialog.modal-lg{max-width:90%}}@media (max-width: 991px){  .myCustomModalClass .modal-dialog.modal-lg{height:auto;padding:30px 0}}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative{min-height:100%;height:100%;display:block}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative figure{margin-bottom:0}  .myCustomModalClass .btn{background-color:transparent!important;border:none!important;color:#444!important;font-size:20px;position:fixed;top:1%;right:1%;z-index:2;padding:5px}  .myCustomModalClass .btn:hover{color:#ffffff80!important}@media (max-width: 991px){  .myCustomModalClass .btn{top:0}}@media (max-width: 480px){  .myCustomModalClass .btn{top:-6px;right:6px}}  .myCustomModalClass .custommodalanchor{border-bottom:1px solid #dfdfdf;padding-bottom:10px;margin-bottom:10px}  .myCustomModalClass .follow p{font-size:16px;margin-bottom:0;margin-left:5px}  .myCustomModalClass .owl-carousel .owl-item img{object-fit:cover}  .myCustomModalClass .link{margin-top:30px}  .myCustomModalClass .hashtaglinks a{display:inline-block;margin:0 2px}  .myCustomModalClass .rightblock{height:750px;overflow:hidden;overflow-y:scroll;padding:10px 0 10px 20px}@media (max-width: 1366px){  .myCustomModalClass .rightblock{height:600px}}@media (max-width: 991px){  .myCustomModalClass .rightblock{height:auto;margin-top:0}}  .myCustomModalClass .rightblock a{color:#0280fe!important}  .myCustomModalClass .leftblock{padding:0}@media (max-width: 991px){  .myCustomModalClass .leftblock{margin-top:0}}  video{position:relative;min-height:100%;width:90%}@media (max-width: 480px){  video{width:90%}}  .modal-body{padding:10px}.cstheight[_ngcontent-%COMP%]{min-height:300px;position:relative;display:block}@media (max-width: 480px){.cstheight[_ngcontent-%COMP%]{min-height:200px}}.cstvideo[_ngcontent-%COMP%]{position:relative;z-index:1;margin-top:-15rem}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]{margin-top:-11rem}}@media (max-width: 480px){.cstvideo[_ngcontent-%COMP%]{margin-top:-5rem}}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]   #aboutvideo[_ngcontent-%COMP%]{height:100%}}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]{position:relative;text-align:center}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{box-shadow:0 23px 26px #0000004a}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;width:100%;top:0}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]{transition:.3s ease-in-out;display:flex;opacity:0;position:absolute;bottom:0;left:0;right:0;width:100%;padding:20px;height:100%;background-color:#00000080;margin:0 auto;flex-direction:column;justify-content:center;align-items:center}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:54px;height:54px;object-fit:contain}@media (max-width: 768px){.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:44px}}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]:hover   .text-block[_ngcontent-%COMP%]{display:flex;cursor:pointer;justify-content:center;align-items:center;opacity:1}.custom-col[_ngcontent-%COMP%]{flex:0 0 20%;max-width:20%;text-align:center}.custom-col[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;display:block;padding:15px;transition:all .5s;cursor:default!important}.custom-col[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{border-color:gray}.custom-col[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:57px;cursor:default!important}@media (max-width: 1199px){.custom-col[_ngcontent-%COMP%]{flex:0 0 30%;max-width:30%}}@media (max-width: 768px){.custom-col[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}}@media (max-width: 576px){.custom-col[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}}.philosophy[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{line-height:106px}@media (max-width: 1650px){.philosophy[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{line-height:90px}}@media (max-width: 1366px){.philosophy[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{line-height:70px}}@media (max-width: 1024px){.philosophy[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{line-height:1.2}}.philosophy[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:52px}@media (max-width: 1366px){.philosophy[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:42px}}@media (max-width: 1280px){.philosophy[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:32px}}.philosophy[_ngcontent-%COMP%]   .imagecent[_ngcontent-%COMP%]{position:relative;margin-bottom:8rem;z-index:1}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .imagecent[_ngcontent-%COMP%]{margin-bottom:5rem}}@media (max-width: 1199px){.philosophy[_ngcontent-%COMP%]   .imagecent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:87%}}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .imagecent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:left;padding:35px 124px 35px 40px;width:390px;border-radius:80px;position:absolute;bottom:8%;right:6%;box-shadow:-7px 6px 20px #00000029;cursor:pointer;transition:all .4s ease-in}@media (max-width: 1440px){.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]{right:0}}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]{right:0;left:0;margin:0 auto;bottom:-10%;width:280px;height:85px;padding:13px 80px 13px 20px}}@media (max-width: 480px){.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]{width:90%}}@media (max-width: 380px){.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]{width:100%}}.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]:hover{background-color:#000;box-shadow:none}.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{color:#fff}.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1d1d1f;text-decoration:none}.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{height:50px;width:50px}.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:normal}.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .p1[_ngcontent-%COMP%]{font-weight:600;font-family:Montserrat,sans-serif!important}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:left;padding:35px 124px 35px 40px;width:390px;border-radius:80px;position:absolute;bottom:8%;left:21%;box-shadow:-7px 6px 20px #00000029;cursor:pointer;transition:all .4s ease-in}@media (max-width: 1440px){.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]{left:0}}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]{left:0;right:0;bottom:-10%;margin:0 auto;width:280px;height:85px;padding:13px 80px 13px 20px}}@media (max-width: 480px){.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]{width:90%}}@media (max-width: 380px){.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]{width:100%}}.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]:hover{background-color:#000;box-shadow:none}.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{color:#fff}.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1d1d1f;text-decoration:none}.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{height:50px;width:50px}.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:normal}.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .p1[_ngcontent-%COMP%]{font-weight:600;font-family:Montserrat,sans-serif!important}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}.philosophy[_ngcontent-%COMP%]   .cstcardright[_ngcontent-%COMP%]{text-align:left;display:flex;flex-direction:row;align-items:center;justify-content:center;border-radius:50px;position:absolute;right:14%;top:50%}.philosophy[_ngcontent-%COMP%]   .cstcardright[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{border:1px dashed #6e6e73;height:65px;width:65px;display:flex;justify-content:center;align-items:center;position:absolute;border-radius:50px;transition:.2s all ease-in-out}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .cstcardright[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:50px;height:50px}}.philosophy[_ngcontent-%COMP%]   .cstcardright[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background:-webkit-linear-gradient(#e5a381,#a9644b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:8px}.philosophy[_ngcontent-%COMP%]   .cstcardleft[_ngcontent-%COMP%]{text-align:left;display:flex;flex-direction:row;align-items:center;justify-content:center;border-radius:50px;position:absolute;right:14%;top:50%}.philosophy[_ngcontent-%COMP%]   .cstcardleft[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{border:1px dashed #6e6e73;height:65px;width:65px;display:flex;justify-content:center;align-items:center;position:absolute;border-radius:50px;transition:.2s all ease-in-out}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .cstcardleft[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:50px;height:50px}}.philosophy[_ngcontent-%COMP%]   .cstcardleft[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background:-webkit-linear-gradient(#e5a381,#a9644b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:8px}.philosophy[_ngcontent-%COMP%]   .text128[_ngcontent-%COMP%]{width:128px;transition:.5s all ease-in-out}.philosophy[_ngcontent-%COMP%]   .cstbtn128[_ngcontent-%COMP%]:hover   .text128[_ngcontent-%COMP%]{width:140px;letter-spacing:1px}.philosophy[_ngcontent-%COMP%]   .custom-block[_ngcontent-%COMP%]{display:block}@media (max-width: 480px){.philosophy[_ngcontent-%COMP%]   .custom-block[_ngcontent-%COMP%]{display:inline}}.philosophy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:relative;z-index:1}.philosophy[_ngcontent-%COMP%]   .position-absolute.start-50.translate-middle.mbrem8[_ngcontent-%COMP%]{z-index:1}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .mbrem5[_ngcontent-%COMP%]{margin-top:4rem}}.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width: 575px){.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;margin:0 auto}}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.barcely[_ngcontent-%COMP%]{font-weight:100;color:#da9777}.mask[_ngcontent-%COMP%]{position:relative;width:100%;display:block}.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;right:0;width:35%;bottom:-14rem}@media (max-width: 991px){.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:-12rem}}@media (max-width: 767px){.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:-10rem;width:60%}}@media (max-width: 600px){.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:-8.5rem;width:75%}}@media (max-width: 480px){.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:0;width:100%}}.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]{margin:3rem auto 4rem 7rem!important}.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .wwo2[_ngcontent-%COMP%]{left:30%!important}@media (max-width: 991px){.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .wwo2[_ngcontent-%COMP%]{left:48%!important}}@media (max-width: 767px){.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .wwo2[_ngcontent-%COMP%]{left:60%!important}}@media (max-width: 600px){.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .wwo2[_ngcontent-%COMP%]{left:20%!important}}@media (max-width: 480px){.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .wwo2[_ngcontent-%COMP%]{left:10%!important}}.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:196px}@media (max-width: 991px){.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:190px}}@media (max-width: 767px){.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:190px}}@media (max-width: 600px){.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:190px}}@media (max-width: 480px){.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:190px}}.graph[_ngcontent-%COMP%]{width:110px!important}.website[_ngcontent-%COMP%]{width:180px!important}.ecommerce[_ngcontent-%COMP%]{width:136px!important}.wwo2-graph[_ngcontent-%COMP%]{left:0%!important}.wwo2-website[_ngcontent-%COMP%]{left:24%!important}.wwo2-ecommerce[_ngcontent-%COMP%]{left:10%!important}.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]{padding:0}.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:30px 20px}@media (max-width: 1199px){.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none;border-bottom:1px dashed #6e6e73}.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#6e6e73!important}.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]:hover{outline:none;color:#fff!important}.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;border-radius:0;font-size:20px;font-weight:500;display:flex;align-items:center;color:#fff!important}.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:focus{outline:none;color:#fff!important}.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:active{color:#fff!important;outline:none}@media (max-width: 1366px){.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 1199px){.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.brdtp[_ngcontent-%COMP%]{border-top:1px dashed #6e6e73}.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{background-image:url(plus.2523ff04f32f499f.svg);margin-top:5px;margin-bottom:5px;color:#dadade}.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:400}@media (max-width: 1199px){.accordion-body[_ngcontent-%COMP%]   .wwo1[_ngcontent-%COMP%]   .footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.bannerdrk[_ngcontent-%COMP%]{background-color:#000}.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:52px}@media (max-width: 1399px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:42px}}@media (max-width: 1199px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px}}@media (max-width: 1024px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}}.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:32px}@media (max-width: 1399px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1199px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.start-50[_ngcontent-%COMP%]{left:55%!important}}@media (max-width: 480px){.start-50[_ngcontent-%COMP%]{left:60%!important}}.position-relative.actn[_ngcontent-%COMP%]{margin:5rem auto 0 10rem!important}@media (max-width: 991px){.position-relative.actn[_ngcontent-%COMP%]{margin:3rem auto 0 10rem!important}}@media (max-width: 767px){.position-relative.actn[_ngcontent-%COMP%]{margin:4rem auto 4rem 10rem!important}}.position-relative.actn[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:155px}.blur[_ngcontent-%COMP%]{filter:blur(5px);-webkit-filter:blur(5px);-moz-filter:blur(5px);-o-filter:blur(5px);-ms-filter:blur(5px)}.collapsing[_ngcontent-%COMP%]{transition:height .5s ease-in-out}']}),e})(),iQe=(()=>{const t=class{constructor(i,r,s){this.pageservice=i,this.metaTagService=r,this.titleService=s,this.get_PageMeta(),this.baseUrl=en_baseUrl+"/assets"}ngOnInit(){setTimeout(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},500)}get_PageMeta(){this.pageservice.getpageWithName({pageName:"process"}).subscribe(r=>{200==r.body.code&&r.body.result&&(this.titleService.setTitle(r?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:r?.body.result.meta_description},{name:"keywords",content:r?.body.result.meta_keywords}]))})}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(tu),Ne(wd),Ne(Md))},t.\u0275cmp=qi({type:t,selectors:[["app-process"]],decls:90,vars:6,consts:[[1,"container","container"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],[1,"banner","vh-100"],[1,"d-flex","flex-column","justify-content-center","align-items-start","h-100"],[1,"mblwd"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block","h1","size90"],["data-aos","fade-up","data-aos-duration","1500","data-aos-delay","200",1,"d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block","h1","size90"],[1,"barcelony","text-color"],[1,"text-color"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","300",1,"d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block","h1","size90"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none","h1","size90"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","200",1,"d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none","h1","size90"],["data-aos","fade-up","data-aos-duration","1500","data-aos-delay","300",1,"d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none","h1","size90"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","400",1,"d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none","h1","size90"],["data-aos","fade-up","data-aos-duration","2500","data-aos-delay","500",1,"d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none","h1","size90"],[1,"position-absolute","banner-left-content"],[1,"pb-0"],[1,"container-md","container-fluid-sm"],[1,"col-lg-10","offset-lg-1"],[1,"img-block","d-flex","justify-content-center"],["alt","",3,"src"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"content","d-flex","flex-column","position-absolute","startl-31"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"content","d-flex","flex-column","position-absolute","startr-31"],[1,"img-block","d-flex","flex-row","justify-content-center"],[1,"help-block"],["alt","","height","70",3,"src"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"d-flex","flex-column","justify-content-center","align-items-center","cstpadding"],[1,"mb-0","p40"],[1,"mt-0","p90"],[1,"line"]],template:function(r,s){1&r&&(C(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h1",5),I(7," Creativity.Identity."),E(),C(8,"h1",6),I(9," Visual."),C(10,"span",7),I(11,"Soul"),E(),C(12,"span",8),I(13,"."),E(),I(14,"Brand."),E(),C(15,"h1",9),I(16," Customer "),E(),C(17,"h1",10),I(18," Creativity."),E(),C(19,"h1",11),I(20," Identity."),E(),C(21,"h1",12),I(22," Visual."),C(23,"span",7),I(24,"Soul"),E(),C(25,"span",8),I(26,"."),E()(),C(27,"h1",13),I(28,"Brand."),E(),C(29,"h1",14),I(30," Customer "),E()()()(),C(31,"div",15)(32,"p"),I(33,"Whether it's a birth or an evolution of a brand, "),E(),C(34,"p"),I(35,"nothing stands out unless it has a soul."),E()()()()(),C(36,"section",16)(37,"div",17)(38,"div",18)(39,"div",19),ue(40,"img",20),C(41,"div",21)(42,"h1"),I(43,"Research"),E(),C(44,"p"),I(45,"We start every project by reviewing and analyzing industry Competitor, relevant projects and sustainable references. Feedback to the client for continual input for both parties."),E()()(),C(46,"div",19)(47,"div",22)(48,"h1"),I(49,"Strategy"),E(),C(50,"p"),I(51,"Each project starts with a thorough investigation of the client's business, analysis of it's key features & definition of the optimal strategy for developing it."),E()(),ue(52,"img",20),E(),C(53,"div",19),ue(54,"img",20),C(55,"div",21)(56,"h1"),I(57,"Design"),E(),C(58,"p"),I(59,"Impeccable design can make or break a brand: we create detailed mood boards, wireframes and define user flows & then we experiment with the visuals using a style guide as the basis until we reach a fully responsive, flawless output."),E()()(),C(60,"div",19)(61,"div",22)(62,"h1"),I(63,"Development"),E(),C(64,"p"),I(65,"Once the decision is made in which direction to develop, a more refined concept will be presented to the client. We will also discuss in more detail print materials, online functions & features and applying a thorough 2-step QA process to our consistent coding process."),E()(),ue(66,"img",20),E(),C(67,"div",23),ue(68,"img",20),C(69,"div",21)(70,"h1"),I(71,"Delivery"),E(),C(72,"p"),I(73,"The final solution will be delivered, hitting the deadline. we like to develop a relationship with our clients and provide them an ongoing design service for this current project and more."),E()()()(),C(74,"div",24),ue(75,"img",25),C(76,"div",26)(77,"p",27),I(78,"Support"),E(),C(79,"h1",28),I(80,"We "),C(81,"span",7),I(82,"keep helping"),E(),I(83," you"),E(),C(84,"h1",28),I(85,"As long as "),C(86,"span",7),I(87,"you"),E(),I(88," need us"),E()()()()(),ue(89,"div",29)),2&r&&(ce(40),Ue("src","",s.baseUrl,"/img/about-us/pixtar-diagram-1-wiggle.gif",De),ce(12),Ue("src","",s.baseUrl,"/img/about-us/pixtar-diagram-2.gif",De),ce(2),Ue("src","",s.baseUrl,"/img/about-us/pixtar-diagram-3.gif",De),ce(12),Ue("src","",s.baseUrl,"/img/about-us/pixtar-diagram-4.gif",De),ce(2),Ue("src","",s.baseUrl,"/img/about-us/pixtar-diagram-5.gif",De),ce(7),Ue("src","",s.baseUrl,"/img/about-us/white-down-arrow.svg",De))},styles:['section[_ngcontent-%COMP%]{min-height:100vh;height:100%;background-color:#000}@media (max-width: 768px){section[_ngcontent-%COMP%]{background-size:100rem}}@media (max-width: 575px){section[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}}@media (max-width: 480px){section[_ngcontent-%COMP%]{min-height:auto;padding-bottom:0}}section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto}section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0;font-size:106px;color:#fff}@media (max-width: 1366px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:90px}}@media (max-width: 1024px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:80px}}@media (max-width: 991px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:70px}}@media (max-width: 991px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px}}@media (max-width: 480px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px}}@media (max-width: 380px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:32px;color:#fff;line-height:normal;margin-bottom:0}@media (max-width: 1366px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1024px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 600px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px}}@media (max-width: 480px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{height:86vh!important}}section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .barcelony[_ngcontent-%COMP%]{position:relative;top:-2px}section[_ngcontent-%COMP%]:before{content:"";width:4px;height:4px;background:#000;position:fixed;background:radial-gradient(ellipse at center,rgba(155,155,155,.2392156863) 0%,rgba(171,171,171,.231372549) 11%,transparent 9%,transparent 100%) 0px center repeat;width:100%;height:100%;background-size:10px 10px;outline:0;margin:0;box-sizing:border-box;z-index:0;mix-blend-mode:lighten;left:0;right:0}.barcelony[_ngcontent-%COMP%]{font-family:barcelony}.p40[_ngcontent-%COMP%]{font-weight:600;font-size:40px;color:#fff}@media (max-width: 1366px){.p40[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 991px){.p40[_ngcontent-%COMP%]{font-size:32px}}@media (max-width: 767px){.p40[_ngcontent-%COMP%]{font-size:30px}}@media (max-width: 575px){.p40[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 480px){.p40[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 385px){.p40[_ngcontent-%COMP%]{font-size:16px}}.p90[_ngcontent-%COMP%]{font-size:90px;font-weight:700;color:#fff}@media (max-width: 1366px){.p90[_ngcontent-%COMP%]{font-size:70px}}@media (max-width: 991px){.p90[_ngcontent-%COMP%]{font-size:50px}}@media (max-width: 767px){.p90[_ngcontent-%COMP%]{font-size:40px}}@media (max-width: 575px){.p90[_ngcontent-%COMP%]{font-size:34px}}@media (max-width: 480px){.p90[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 385px){.p90[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 385px){.p90[_ngcontent-%COMP%]{font-size:20px}}section[_ngcontent-%COMP%]   .startl-31[_ngcontent-%COMP%]{left:35%}@media (max-width: 1440px){section[_ngcontent-%COMP%]   .startl-31[_ngcontent-%COMP%]{left:24%}}@media (max-width: 1366px){section[_ngcontent-%COMP%]   .startl-31[_ngcontent-%COMP%]{left:28%}}@media (max-width: 1024px){section[_ngcontent-%COMP%]   .startl-31[_ngcontent-%COMP%]{left:24%}}@media (max-width: 800px){section[_ngcontent-%COMP%]   .startl-31[_ngcontent-%COMP%]{left:18%}}@media (max-width: 600px){section[_ngcontent-%COMP%]   .startl-31[_ngcontent-%COMP%]{left:16%}}@media (max-width: 575px){section[_ngcontent-%COMP%]   .startl-31[_ngcontent-%COMP%]{left:20%}}section[_ngcontent-%COMP%]   .startr-31[_ngcontent-%COMP%]{right:35%;text-align:right}@media (max-width: 1440px){section[_ngcontent-%COMP%]   .startr-31[_ngcontent-%COMP%]{right:24%}}@media (max-width: 1366px){section[_ngcontent-%COMP%]   .startr-31[_ngcontent-%COMP%]{right:28%}}@media (max-width: 1024px){section[_ngcontent-%COMP%]   .startr-31[_ngcontent-%COMP%]{right:24%}}@media (max-width: 800px){section[_ngcontent-%COMP%]   .startr-31[_ngcontent-%COMP%]{right:18%}}@media (max-width: 600px){section[_ngcontent-%COMP%]   .startr-31[_ngcontent-%COMP%]{right:16%}}@media (max-width: 575px){section[_ngcontent-%COMP%]   .startr-31[_ngcontent-%COMP%]{right:20%}}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:35%}@media (max-width: 1440px){section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:50%}}@media (max-width: 1024px){section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:50%}}@media (max-width: 800px){section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:60%}}@media (max-width: 600px){section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:78%}}@media (max-width: 575px){section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:73%}}section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;mix-blend-mode:lighten}.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:42px;font-weight:700;margin-bottom:20px}@media (max-width: 1366px){.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 1024px){.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;margin-top:0;margin-bottom:10px}}@media (max-width: 800px){.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 767px){.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin-bottom:10px}}@media (max-width: 600px){.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 480px){.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px;margin-top:-10px;margin-bottom:0}}@media (max-width: 380px){.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:16px;margin-top:-28px}}.img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px}@media (max-width: 1366px){.img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 1024px){.img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 800px){.img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 767px){.img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 600px){.img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){.img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 480px){.img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px}}.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.help-block[_ngcontent-%COMP%]{position:relative;display:block;margin-top:30px;text-align:center}.help-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px}@media (max-width: 1199px){.help-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px}}@media (max-width: 1024px){.help-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px}}@media (max-width: 600px){.help-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}}@media (max-width: 480px){.help-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}}@media (max-width: 380px){.help-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px}}.cstmenu[_ngcontent-%COMP%]{color:#fff}.cstpadding[_ngcontent-%COMP%]{padding:50px 0}@media (max-width: 767px){.cstpadding[_ngcontent-%COMP%]{padding:30px 0}}@media (max-width: 600px){.cstpadding[_ngcontent-%COMP%]{padding:10px 0 20px}}.banner-left-content[_ngcontent-%COMP%]{bottom:3%;left:auto}@media (max-width: 767px){.banner-left-content[_ngcontent-%COMP%]{bottom:100px;left:auto;position:relative!important}}@media (max-width: 330px){.banner-left-content[_ngcontent-%COMP%]{bottom:60px}}.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;color:#fff;margin-bottom:0;line-height:normal}@media (max-width: 1199px){.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}.banner-left-content[_ngcontent-%COMP%]   .text-color[_ngcontent-%COMP%]{color:#da9777;font-weight:600}.text-color[_ngcontent-%COMP%]{color:#da9777}.line[_ngcontent-%COMP%]{height:1px;background:#707070;width:65%;margin:0 auto;position:absolute;left:0;right:0;z-index:1}@media (max-width: 767px){.line[_ngcontent-%COMP%]{width:80%}}']}),e})();function rQe(e,t){if(1&e){const n=Xr();C(0,"li",11)(1,"a",12),zt("click",function(){const s=Zn(n).$implicit;return ti(_t().getFilterProjects1("All"===s?"all":s))}),I(2),E()()}if(2&e){const n=t.$implicit,i=_t();ce(1),mo("active",i.selectedCategory===("All"===n?"all":n)),ce(1),hs(" ",n," ")}}function sQe(e,t){if(1&e){const n=Xr();C(0,"div",13)(1,"div",14)(2,"a",15)(3,"img",16),zt("mouseenter",function(){const s=Zn(n).index;return ti(_t().onMouseEnter(s))})("mouseleave",function(){return Zn(n),ti(_t().onMouseLeave())}),E()()()()}if(2&e){const n=t.$implicit,i=t.index,r=_t();ce(2),ot("href",n.link,De),ce(1),Zu("galleryimg",i,""),ot("src",r.backendUrl+n.image,De)}}function oQe(e,t){if(1&e){const n=Xr();C(0,"p")(1,"a",20),zt("click",function(){return Zn(n),ti(_t(2).showMoreProjects())}),C(2,"span",21),I(3," Load More"),E(),C(4,"span",22),ue(5,"i",23),E()()()}}function aQe(e,t){if(1&e&&(C(0,"div",17)(1,"div",13)(2,"div",18),mt(3,oQe,6,0,"p",19),E()()()),2&e){const n=_t();ce(3),ot("ngIf",n.isactive)}}const lQe=function(){return["All","Branding","UX/UI","eCommerce","SEO"]};let cQe=(()=>{const t=class{constructor(i){this.projectservice=i,this.allprojects1=[],this.filteredProjects=[],this.displayedProjects=[],this.selectedCategory="all",this.currentPage=1,this.currentLimit=6,this.totalProjects=0,this.backendUrl=en_backendUrl+"/public/",this.isMorePrasent=!0,this.isactive=!0}ngOnInit(){this.get_AllProjects1(),setTimeout(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},500)}get_AllProjects1(){this.projectservice.getAllProjects({limit:this.currentLimit,page:this.currentPage}).subscribe(r=>{if(200===r.code&&r.result){const s=r.result.filter(o=>o.status&&!this.allprojects1.some(a=>a._id===o._id));this.allprojects1=[...this.allprojects1,...s],this.totalProjects=r.count,this.totalProjects=r.count,this.totalProjects<this.currentLimit&&(this.isMorePrasent=!1),this.applyFilter()}},r=>{console.error("Failed to fetch projects:",r)})}applyFilter(){this.filteredProjects="all"===this.selectedCategory?[...this.allprojects1]:this.allprojects1.filter(r=>r.category.some(s=>s.name===this.selectedCategory));const i=this.filteredProjects.slice(0,this.currentPage*this.currentLimit);this.displayedProjects=i,console.log("Filtered Projects:",this.filteredProjects),console.log("Displayed Projects:",this.displayedProjects)}showMoreProjects(){console.log("Show More button clicked"),this.applyFilter(),this.currentLimit=this.currentLimit+3,this.get_AllProjects1()}get showMoreButtonVisible(){const i=this.displayedProjects.length<this.filteredProjects.length;return console.log("Checking Show More visibility:",{totalProjects:this.filteredProjects.length,displayedProjects:this.displayedProjects.length,hasMore:i}),i}getFilterProjects1(i){"all"==i?(this.isactive=!0,this.selectedCategory=i,this.currentPage=1,this.applyFilter()):(this.isactive=!1,this.selectedCategory=i,this.currentPage=1,this.applyFilter())}onMouseEnter(i){const s=this.displayedProjects[i].project_images,o=document.querySelector(`.galleryimg${i}`);if(s&&s.length>0){let a=0;this.sliderInterval=setInterval(()=>{o&&(o.src=this.backendUrl+s[a%s.length],a++)},900)}}onMouseLeave(){clearInterval(this.sliderInterval)}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(y1))},t.\u0275cmp=qi({type:t,selectors:[["app-projects"]],decls:11,vars:4,consts:[[1,"cst-tabs","p-0"],[1,"col-md-12"],[1,"col-xl-8","offset-xl-2","col-lg-10","offset-lg-1","col-md-10","offset-md-1"],["role","tablist",1,"nav","nav-pills"],["class","nav-item",4,"ngFor","ngForOf"],[1,"tab-content"],["id","all",1,"tab-pane","active"],[1,"container"],[1,"row","mb-4"],["class","col-md-4",4,"ngFor","ngForOf"],["class","row mb-4 mt-3",4,"ngIf"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"col-md-4"],[1,"imgblock","project-block"],["target","_blank",3,"href"],["alt","",3,"src","mouseenter","mouseleave"],[1,"row","mb-4","mt-3"],[1,"position-absolute","start-50","translate-middle"],[4,"ngIf"],[1,"cstbtn","cstbtn128","ftr1",3,"click"],[1,"text","text128"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"ul",3),mt(4,rQe,3,3,"li",4),E()(),C(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),mt(9,sQe,4,5,"div",9),E(),mt(10,aQe,4,1,"div",10),E()()()()()),2&r&&(ce(4),ot("ngForOf",function n9(e,t,n){const i=Ws()+e,r=ln();return r[i]===vr?Yu(r,i,n?t.call(n):t()):Tx(r,i)}(3,lQe)),ce(5),ot("ngForOf",s.displayedProjects),ce(1),ot("ngIf",s.isMorePrasent))},dependencies:[Ba,il],styles:["section.cst-tabs[_ngcontent-%COMP%]{margin-top:15rem}@media (max-width: 480px){section.cst-tabs[_ngcontent-%COMP%]{margin-top:10rem}}section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;justify-content:start}@media (max-width: 991px){section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]{justify-content:center}}section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:none;color:#000;font-weight:400;font-size:32px;cursor:pointer}section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{font-weight:600}@media (max-width: 1366px){section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1199px){section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 767px){section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:20px;padding:0 10px}}@media (max-width: 575px){section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 380px){section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:16px;padding:0 5px}}section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:transparent;font-weight:600}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .project-block[_ngcontent-%COMP%]{margin:15px 0}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .project-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;transition:transform .9s ease}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .project-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .project-right-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   a.more[_ngcontent-%COMP%]{cursor:pointer;border:2px solid #e1a181;display:flex;width:100px;height:100px;text-align:center;justify-content:center;margin:30px auto 0;border-radius:50px;color:#1d1d1f;text-decoration:none;font-size:28px;font-weight:700;align-items:center}@media (max-width: 1024px){section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   a.more[_ngcontent-%COMP%]{width:80px;height:80px;font-size:20px}}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .project-block[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:20px 20px 50px}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]{justify-content:center;align-items:center;position:relative;top:-7px}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:60px;height:60px}@media (max-width: 480px){section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:40px;height:40px}}@media (max-width: 380px){section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:28px;height:28px}}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{width:50px;height:50px}@media (max-width: 480px){section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{width:40px;height:40px}}@media (max-width: 380px){section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{width:28px;height:28px}}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .mb-4[_ngcontent-%COMP%]{margin-bottom:3rem!important}.cstbtn[_ngcontent-%COMP%]{cursor:pointer}.cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:85px}@media (max-width: 480px){.cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;width:140px}}.p32[_ngcontent-%COMP%]{font-size:32px;color:#e5e5e3;font-weight:700;margin-bottom:0}@media (max-width: 1366px){.p32[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1199px){.p32[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.p32[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 767px){.p32[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 575px){.p32[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 380px){.p32[_ngcontent-%COMP%]{font-size:16px}}.p26[_ngcontent-%COMP%]{font-size:26px;color:#878787;font-weight:100}@media (max-width: 1366px){.p26[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 1199px){.p26[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.p26[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 575px){.p26[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 380px){.p26[_ngcontent-%COMP%]{font-size:14px}}.project-right-block[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:20px 20px 50px}.linkblock[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;text-align:center}.linkblock[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#fff;border-bottom:1px solid}.linkblock[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#de9b7a;border-bottom:1px solid}.line[_ngcontent-%COMP%]{height:1px;background:#707070;width:65%;margin:0 auto;position:absolute;left:0;right:0;z-index:1}@media (max-width: 767px){.line[_ngcontent-%COMP%]{width:80%}}"]}),e})(),dQe=(()=>{const t=class{constructor(){this.imageData=[{albumId:1,id:1,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot1.png"},{albumId:1,id:2,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot2.png"},{albumId:1,id:3,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot3.png"},{albumId:1,id:4,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot4.png"},{albumId:1,id:5,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot5.png"},{albumId:1,id:6,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot6.png"},{albumId:1,id:7,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot7.png"},{albumId:1,id:8,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot8.png"},{albumId:1,id:9,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/dnour/shot9.png"}],this.desktopslider={autoplayTimeout:2e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider1={autoplayTimeout:2500,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider2={autoplayTimeout:3e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.baseUrl=en_baseUrl+"/assets",this.Url=en_baseUrl}ngOnInit(){setTimeout(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},500)}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=qi({type:t,selectors:[["app-pakhis"]],decls:166,vars:17,consts:[["id","project1","data-scroll-nav","0",1,"projects"],[1,"container-fluid"],[1,"row"],[1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-7","col-md-7","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","h-100","service-content"],[1,"heading"],[1,"points"],["href","https://www.pakhis.ae/","target","_blank",1,"text-decoration-underline"],[1,"col-xl-5","col-md-5","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","align-items-sm-end"],[1,"list-block"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"mt-0","mb-2"],[3,"href"],["data-aos","fade-up","data-aos-duration","1500","data-aos-delay","150",1,"mt-0","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","200",1,"mt-0","mb-2"],["data-scroll-nav","1",1,"pb-0"],[1,"container-fluid","p-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-12","p-0"],["alt","pages","width","","height","",3,"src"],["data-scroll-nav","2",1,"section","bg-pakhis","pb-5"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],[1,"content"],[1,"mb-5"],[1,"semibold","subheading","mb-1"],[1,"mb-0"],[1,"row","mt-5"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-10","col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"heading","mb-2"],["id","branding","data-scroll-nav","3",1,"bg-pakhis","branding"],[1,"imglist","mb-3"],["alt","project1","width","","height","",3,"src"],[1,"col-xxl-10","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","mx-lg-auto","ps-md-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","ps-md-0"],[1,"list"],["alt","packaging","width","","height","",3,"src"],["alt","envelop","width","","height","",3,"src"],["data-scroll-nav","5",1,"bg-pakhis","typography"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"typography"],["alt","typography","width","","height","",3,"src"],["data-aos","fade-up","data-aos-duration","2500","data-aos-delay","100"],[1,"semibold","subheading"],["id","productdesign","data-scroll-nav","6",1,"bg-pakhis","package"],[1,"row","mb-4"],[1,"col-md-12","mb-5"],["alt","packaing2","width","","height","","data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"img1",3,"src"],[1,"col-md-12"],["alt","box","width","","height","","data-aos","fade-up","data-aos-duration","2500","data-aos-delay","150",1,"img2",3,"src"],["id","ui-ux","data-scroll-nav","8",1,"section","ui-ux"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-5","col-xl-6","col-lg-8","col-md-10","col-sm-10"],[1,""],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-9","mx-lg-auto"],["id","myVideo3","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto","desktopimg"],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],["id","myVideo3","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto"],[1,"mb-md-4","mb-sm-3","mb-2"],["id","technical","data-scroll-nav","8",1,"technical"],[1,"semibold","subheading","mb-3"],[1,"mb-md-4","-sm-3","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"next","bg-black","pb-0"],[1,"container"],[1,"next-block"],[1,"in-line"],[1,"text-white","font-bold",3,"href"],["alt","","width","280","height","280",3,"src"],[1,"heading","text-white"],[1,"line"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"div",5)(7,"div")(8,"h1",6),I(9,"Pakhi's"),E(),C(10,"div",7)(11,"p"),I(12,"Pakhi\u2019s is a testament to the enchanting blend of heritage & modernity that the Middle East represents."),E(),C(13,"p")(14,"a",8),I(15,"Pakhis.ae"),E()()()()()(),C(16,"div",9)(17,"div",10)(18,"div",11)(19,"h3",12)(20,"a",13),I(21,"Branding"),E()(),C(22,"h3",14)(23,"a",13),I(24,"Product Design"),E()(),C(25,"h3",15)(26,"a",13),I(27,"UI/UX Design"),E()()()()()()()()()(),C(28,"section",16)(29,"div",17)(30,"div",2)(31,"div",18),ue(32,"img",19),E()()()(),C(33,"section",20)(34,"div",1)(35,"div",2)(36,"div",21)(37,"div",22)(38,"p",23),I(39,'"Pakhi\'s" presents a luxurious and sustainable handwash collection inspired by the enchanting charm of the Middle East. Our handcrafted formulations are meticulously designed to unveil the secrets of nourished and rejuvenated skin. Each product embodies a unique blend of tradition, innovation, and care, providing an unparalleled sense of luxury to your everyday self-care routine. '),E(),C(40,"h3",24),I(41,"Project Objectives:"),E(),C(42,"p",25),I(43,"Creating an online platform for Pakhi's premium hand wash collection, emphasizing UAE's cultural and sensory aspects."),E(),C(44,"p",25),I(45," We aim to develop a user-friendly, mobile-responsive website for an enhanced online shopping experience."),E(),C(46,"p",25),I(47,"Furthermore, the platform will convey the brand's commitment to high quality, sustainability, and affordability."),E()(),C(48,"div",26)(49,"div",27)(50,"div",22)(51,"h1",28),I(52,"Branding"),E(),C(53,"p"),I(54,"In shaping the branding strategy for \"Pakhis,\" our approach involved a thorough exploration of the agency's identity. Through in-depth consultations and market analysis, we crafted a distinctive brand narrative and visual identity aligned with Pakhis' core values. The result is a sophisticated and resonant brand image, strategically positioned to leave a lasting impression on its audience. Our commitment to precision, creativity, and strategic thinking underscores the success of this collaborative endeavor, contributing to Pakhis' emergence as a distinguished entity within its industry"),E()()()()()()()(),C(55,"section",29)(56,"div",1)(57,"div",2)(58,"div",18)(59,"div",30),ue(60,"img",31),E()(),C(61,"div",32)(62,"div",2)(63,"div",33),ue(64,"img",31),E(),C(65,"div",34)(66,"div",35),ue(67,"img",36)(68,"img",37),E()()()()()()(),C(69,"section",38)(70,"div",1)(71,"div",2)(72,"div",3)(73,"div",39),ue(74,"img",40),C(75,"p",41),I(76,"The visual design of the website embodies the essence of luxury and the mystique of the Middle East."),E(),C(77,"h3",42),I(78,"Color Schemes:"),E(),C(79,"p"),I(80,"Rich and opulent color palettes reflective of the cultural richness of the Middle East."),E(),C(81,"h3",42),I(82,"Typography:"),E(),C(83,"p"),I(84,"Elegant and legible fonts to enhance readability and convey a sense of sophistication."),E(),C(85,"h3",42),I(86,"Imagery:"),E(),C(87,"p"),I(88,"High-quality, curated visuals showcasing the hand wash collection and the cultural inspiration behind each variant."),E()()()()()(),C(89,"section",43)(90,"div",1)(91,"div",2)(92,"div",3)(93,"div",44)(94,"div",27)(95,"div",22)(96,"h1",28),I(97,"Product Design"),E(),C(98,"p"),I(99,"In crafting the product design for \"Pakhis,\" we seamlessly blended creativity and functionality. Our approach, rooted in the agency's vision, resulted in a distinct hand wash collection that embodies the premium quality and cultural essence of the UAE. Through thoughtful ideation and design iterations, each product within Pakhis' collection speaks to the brand's commitment to excellence, reflecting qualities of quality, sustainability, and affordability. This collaborative effort establishes Pakhis as a standout brand, resonating with the discerning tastes of its audience."),E()()()(),C(100,"div",2)(101,"div",45),ue(102,"img",46),E(),C(103,"div",47),ue(104,"img",48),E()()()()()(),C(105,"section",49)(106,"div",1)(107,"div",2)(108,"div",3)(109,"div",44)(110,"div",50)(111,"div",22)(112,"h1",28),I(113,"UI/UX Design"),E(),C(114,"p",51),I(115,"Branding is a strategic dance of logos, colors, and more, shaping a unique identity and perception in consumers' minds. It sets a brand apart, evoking emotions and building trust."),E()()()(),C(116,"div",2)(117,"div",52)(118,"video",53),ue(119,"source",54)(120,"source",55),I(121," Your browser does not support HTML5 video. "),E(),C(122,"video",56),ue(123,"source",54)(124,"source",55),I(125," Your browser does not support HTML5 video. "),E(),C(126,"p",57),I(127,"The design and development process focused on seamlessly integrating tradition, innovation, and user-friendly functionality."),E(),C(128,"p",57),I(129,"Conducted market research to understand user preferences for luxury self-care products."),E(),C(130,"p",57),I(131,"Collaborated with stakeholders to define the brand identity and values."),E(),C(132,"p",57),I(133,"Utilized HTML 5 and Bootstrap for a responsive and visually appealing website."),E(),C(134,"p",57),I(135,"Emphasized user experience and easy navigation to facilitate a smooth browsing and shopping journey."),E()()()()()()(),C(136,"section",58)(137,"div",1)(138,"div",2)(139,"div",3)(140,"div",44)(141,"div",27)(142,"div",22)(143,"h1",28),I(144,"Technical Stack"),E(),C(145,"h3",59),I(146," The technological stack of Pakhi's website included:"),E(),C(147,"p",57),I(148,"HTML 5: Ensuring a robust and structurally sound foundation."),E(),C(149,"p",57),I(150,"Bootstrap: Facilitating a responsive and mobile-friendly design."),E(),C(151,"p",60),I(152,"Fully Mobile Responsive: Adapting seamlessly to various devices for an optimal user experience."),E(),C(153,"p"),I(154,"User-Friendly: Implementing intuitive navigation and user interfaces."),E()()()()()()()(),C(155,"section",61)(156,"div",62)(157,"div",2)(158,"div",47)(159,"div",63)(160,"div",64)(161,"a",65),ue(162,"img",66),C(163,"h1",67),I(164,"NEXT PROJECT"),E()()()()()(),ue(165,"div",68),E()()),2&r&&(ce(20),Ue("href","",s.Url,"/project-details/pakhis#branding",De),ce(3),Ue("href","",s.Url,"/project-details/pakhis#productdesign",De),ce(3),Ue("href","",s.Url,"/project-details/pakhis#ui-ux",De),ce(6),Ue("src","",s.baseUrl,"/images/projects/pakhis/banner-min.jpg",De),ce(28),Ue("src","",s.baseUrl,"/images/projects/pakhis/pakhis-detail.jpg",De),ce(4),Ue("src","",s.baseUrl,"/images/projects/pakhis/stationery-Mockup-min.jpg",De),ce(3),Ue("src","",s.baseUrl,"/images/projects/pakhis/broken-plank.jpg",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/pakhis/duct-tape-mockup-min.jpg",De),ce(6),Ue("src","",s.baseUrl,"/images/projects/pakhis/typography.png",De),ce(28),Ue("src","",s.baseUrl,"/images/projects/pakhis/all-three-podium-sand.jpg",De),ce(2),Ue("src","",s.baseUrl,"/images/projects/pakhis/threebottles-min.png",De),ce(15),Ue("src","",s.baseUrl,"/images/projects/pakhis/pakhis-imac-scroll.mp4",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/pakhis/pakhis-imac-scroll.ogg",De),ce(3),Ue("src","",s.baseUrl,"/images/projects/pakhis/pakhis-laptop-scroll.mp4",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/pakhis/pakhis-laptop-scroll.ogg",De),ce(37),Ue("href","",s.Url,"/project-details/beyou",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/dnour/pixtar-case-study-web-design.png",De))},styles:["section[_ngcontent-%COMP%]{overflow:hidden}section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#101010}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#101010;font-size:18px}@media (max-width: 767px){section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-weight:500}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}section[_ngcontent-%COMP%]   .barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:24px}@media (max-width: 767px){.section[_ngcontent-%COMP%]{padding:50px 0}}.projects[_ngcontent-%COMP%]{margin-top:200px}@media (max-width: 991px){.projects[_ngcontent-%COMP%]{margin-top:150px}}@media (max-width: 768px){.projects[_ngcontent-%COMP%]{margin-top:120px}}.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:15px 0;color:#101010;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#878787}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}@media (max-width: 575px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]{margin-top:20px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#878787;font-weight:500;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.branding[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0 30px}.branding[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:15px}img[_ngcontent-%COMP%]{max-width:100%;width:100%}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{display:flex;justify-content:start;height:350px;align-items:center;width:100%}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{height:250px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;width:280px;display:inline;opacity:0;transition:.3s;border-radius:5px}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;width:160px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:90px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover{width:100%}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:40px;opacity:1;transition:width .8s ease;margin-left:150px;transition:.3s padding ease-out,.3s margin ease-out,.15s border ease-out}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:15px;margin-left:90px}}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-left:25px;margin-right:10px}}.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:80px}@media (max-width: 767px){.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:50px}}.line[_ngcontent-%COMP%]{width:100%;position:relative;display:block;height:1px;background-color:#f0ebe6}"]}),e})();function hQe(e,t){1&e&&ue(0,"img",72),2&e&&ot("src",_t(2).$implicit.url,De)}function uQe(e,t){1&e&&mt(0,hQe,1,1,"ng-template",71),2&e&&ot("id",_t().$implicit.id)}function pQe(e,t){if(1&e&&($o(0),mt(1,uQe,1,1,null,70),Ko()),2&e){const n=t.$implicit;ce(1),ot("ngIf",n.id<=3)}}function fQe(e,t){1&e&&ue(0,"img",72),2&e&&ot("src",_t(2).$implicit.url,De)}function mQe(e,t){1&e&&mt(0,fQe,1,1,"ng-template",71),2&e&&ot("id",_t().$implicit.id)}function gQe(e,t){if(1&e&&($o(0),mt(1,mQe,1,1,null,70),Ko()),2&e){const n=t.$implicit;ce(1),ot("ngIf",n.id>=4&&n.id<=6)}}function vQe(e,t){1&e&&ue(0,"img",72),2&e&&ot("src",_t(2).$implicit.url,De)}function yQe(e,t){1&e&&mt(0,vQe,1,1,"ng-template",71),2&e&&ot("id",_t().$implicit.id)}function _Qe(e,t){if(1&e&&($o(0),mt(1,yQe,1,1,null,70),Ko()),2&e){const n=t.$implicit;ce(1),ot("ngIf",n.id>=7&&n.id<=9)}}let bQe=(()=>{const t=class{constructor(){this.imageData=[{albumId:1,id:1,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot1.png"},{albumId:1,id:2,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot2.png"},{albumId:1,id:3,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot3.png"},{albumId:1,id:4,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot4.png"},{albumId:1,id:5,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot5.png"},{albumId:1,id:6,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot6.png"},{albumId:1,id:7,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot7.png"},{albumId:1,id:8,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot8.png"},{albumId:1,id:9,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot9.png"}],this.desktopslider={autoplayTimeout:2e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider1={autoplayTimeout:2500,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider2={autoplayTimeout:3e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.baseUrl=en_baseUrl+"/assets",this.Url=en_baseUrl}ngOnInit(){setTimeout(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},500)}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=qi({type:t,selectors:[["app-beyou"]],decls:132,vars:22,consts:[["id","project1","data-scroll-nav","0",1,"projects"],[1,"container-fluid"],[1,"row"],[1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-7","col-md-7","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","h-100","service-content"],[1,"heading"],[1,"points"],["href","https://storebeyou.com/","target","_blank",1,"text-decoration-underline"],[1,"col-xl-5","col-md-5","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","align-items-sm-end"],[1,"list-block"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"mt-0","mb-2"],[3,"href"],["data-aos","fade-up","data-aos-duration","1500","data-aos-delay","150",1,"mt-0","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","200",1,"mt-0","mb-2"],["data-scroll-nav","1",1,"pb-0"],[1,"container-fluid","p-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-12","p-0"],["alt","pages","width","","height","",3,"src"],["data-scroll-nav","2",1,"section","bg-beyou"],[1,"container"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],[1,"content"],[1,"mb-0"],["id","branding","data-scroll-nav","3",1,"bg-beyou","branding","pb-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-6","col-xl-6","col-lg-6","col-md-6","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],[1,"heading","mb-0"],["id","branding1",1,"bg-beyou","branding"],[1,"imglist","mb-3"],["alt","project1","width","","height","",3,"src"],[1,"col-xxl-10","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","mx-lg-auto","ps-md-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","ps-md-0"],[1,"list"],["alt","packaging","width","","height","",3,"src"],["alt","envelop","width","","height","",3,"src"],["data-scroll-nav","5",1,"bg-beyou","typography"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"typography"],["alt","typography","width","","height","",3,"src"],["id","ui-ux","data-scroll-nav","8",1,"section","ui-ux"],[1,"row","mb-4"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-5","col-xl-6","col-lg-8","col-md-10","col-sm-10"],[1,"heading","mb-2"],[1,""],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-9","mx-lg-auto"],["id","myVideo3","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto","desktopimg"],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],["id","myVideo3","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto"],["id","ecommerce","data-scroll-nav","6",1,"package"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-12","p-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"owlcarousel1"],[3,"options"],[4,"ngFor","ngForOf"],["data-aos","fade-up","data-aos-duration","2500","data-aos-delay","150",1,"owlcarousel2"],[1,"owlcarousel3"],["data-aos","fade-up","data-aos-duration","3000","data-aos-delay","200",3,"options"],["id","technical","data-scroll-nav","8",1,"technical"],[1,"col-xxl-10","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-10","col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"mb-md-4","-sm-3","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"next","bg-black","pb-0"],[1,"col-md-12"],[1,"next-block"],[1,"in-line"],[1,"text-white","font-bold",3,"href"],["alt","","width","280","height","280",3,"src"],[1,"heading","text-white"],[1,"line"],[4,"ngIf"],["class","slide","carouselSlide","",3,"id"],[3,"src","alt","title"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"div",5)(7,"div")(8,"h1",6),I(9,"BEYOU"),E(),C(10,"div",7)(11,"p"),I(12,"Storebeyou redefines beauty empowerment in the e-commerce realm, curating a platform where women's unique beauty takes center stage."),E(),C(13,"p")(14,"a",8),I(15,"storebeyou.com"),E()()()()()(),C(16,"div",9)(17,"div",10)(18,"div",11)(19,"h3",12)(20,"a",13),I(21,"Branding"),E()(),C(22,"h3",14)(23,"a",13),I(24,"UI/UX Design"),E()(),C(25,"h3",15)(26,"a",13),I(27,"Ecommerce"),E()()()()()()()()()(),C(28,"section",16)(29,"div",17)(30,"div",2)(31,"div",18),ue(32,"img",19),E()()()(),C(33,"section",20)(34,"div",21)(35,"div",2)(36,"div",22)(37,"div",23)(38,"p",24),I(39,"\"Storebeyou faced the challenge of establishing a unique online presence in the highly competitive e- commerce landscape for women's beauty products. Pixtar took on the task of creating a visually appealing and secure platform that resonated with the target audience."),E()()()()()(),C(40,"section",25)(41,"div",21)(42,"div",2)(43,"div",26)(44,"div",23)(45,"h1",27),I(46,"Branding"),E(),C(47,"p"),I(48,"Pixtar designed a distinctive logo for Storebeyou, capturing the essence of women's beauty and elegance. The logo became a visual cornerstone for the brand's identity, radiating sophistication and allure."),E()()()()()(),C(49,"section",28)(50,"div",1)(51,"div",2)(52,"div",18)(53,"div",29),ue(54,"img",30),E()(),C(55,"div",31)(56,"div",2)(57,"div",32),ue(58,"img",30),E(),C(59,"div",33)(60,"div",34),ue(61,"img",35)(62,"img",36),E()()()()()()(),C(63,"section",37)(64,"div",1)(65,"div",2)(66,"div",3)(67,"div",38),ue(68,"img",39),E()()()()(),C(69,"section",40)(70,"div",1)(71,"div",2)(72,"div",3)(73,"div",41)(74,"div",42)(75,"div",23)(76,"h1",43),I(77,"UI/UX Design"),E(),C(78,"p",44),I(79,"Crafted an intuitive and aesthetically pleasing interface for the Storebeyou website, ensuring a seamless and engaging user experience. The design prioritized showcasing the beauty products while facilitating easy navigation for online shoppers."),E()()()(),C(80,"div",2)(81,"div",45)(82,"video",46),ue(83,"source",47)(84,"source",48),I(85," Your browser does not support HTML5 video. "),E(),C(86,"video",49),ue(87,"source",47)(88,"source",48),I(89," Your browser does not support HTML5 video. "),E()()()()()()(),C(90,"section",50)(91,"div",1)(92,"div",2)(93,"div",3)(94,"div",41)(95,"div",42)(96,"div",23)(97,"h1",43),I(98,"Ecommerce"),E(),C(99,"p",44),I(100,"Developed the e-commerce platform using Magento, incorporating advanced features to enhance the online shopping experience. Stringent security measures were implemented to safeguard customer data and transactions, fostering trust and reliability."),E()()()()()()(),C(101,"div",51),ue(102,"img",30),C(103,"div",52)(104,"owl-carousel-o",53),mt(105,pQe,2,1,"ng-container",54),E()(),C(106,"div",55)(107,"owl-carousel-o",53),mt(108,gQe,2,1,"ng-container",54),E()(),C(109,"div",56)(110,"owl-carousel-o",57),mt(111,_Qe,2,1,"ng-container",54),E()()()(),C(112,"section",58)(113,"div",21)(114,"div",2)(115,"div",59)(116,"div",41)(117,"div",60)(118,"div",23)(119,"p",61),I(120,"Storebeyou emerged as a haven for women seeking high-quality beauty products tailored to their unique needs. The platform aimed to empower women through curated selections that celebrated beauty in diversity."),E()()()()()()()(),C(121,"section",62)(122,"div",21)(123,"div",2)(124,"div",63)(125,"div",64)(126,"div",65)(127,"a",66),ue(128,"img",67),C(129,"h1",68),I(130,"NEXT PROJECT"),E()()()()()(),ue(131,"div",69),E()()),2&r&&(ce(20),Ue("href","",s.Url,"/project-details/beyou#branding",De),ce(3),Ue("href","",s.Url,"/project-details/beyou#ui-ux",De),ce(3),Ue("href","",s.Url,"/project-details/beyou#ecommerce",De),ce(6),Ue("src","",s.baseUrl,"/images/projects/beyou/beyou-banner-min.png",De),ce(22),Ue("src","",s.baseUrl,"/images/projects/beyou/beyou-branding.png",De),ce(4),Ue("src","",s.baseUrl,"/images/projects/beyou/beyou-model-new.jpg",De),ce(3),Ue("src","",s.baseUrl,"/images/projects/beyou/beyou-bcard.jpg",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/beyou/pack.jpg",De),ce(6),Ue("src","",s.baseUrl,"/images/projects/beyou/typography.png",De),ce(15),Ue("src","",s.baseUrl,"/images/projects/beyou/storebeyou-imac-scroll.mp4",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/beyou/storebeyou-imac-scroll.ogg",De),ce(3),Ue("src","",s.baseUrl,"/images/projects/beyou/storebeyou-laptop.mp4",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/beyou/storebeyou-laptop.ogg",De),ce(14),Ue("src","",s.baseUrl,"/images/projects/beyou/beyou-homescreen.png",De),ce(2),ot("options",s.desktopslider),ce(1),ot("ngForOf",s.imageData),ce(2),ot("options",s.desktopslider1),ce(1),ot("ngForOf",s.imageData),ce(2),ot("options",s.desktopslider2),ce(1),ot("ngForOf",s.imageData),ce(16),Ue("href","",s.Url,"/project-details/autokoorosh",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/autokoorosh/autokoorosh-banner.png",De))},dependencies:[Ba,il,W0,uf],styles:[".bg-beyou[_ngcontent-%COMP%]{background:#E89F8C}section[_ngcontent-%COMP%]{overflow:hidden}section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#101010}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#101010;font-size:18px}@media (max-width: 767px){section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-weight:500}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}section[_ngcontent-%COMP%]   .barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:24px}@media (max-width: 767px){.section[_ngcontent-%COMP%]{padding:50px 0}}.projects[_ngcontent-%COMP%]{margin-top:200px}@media (max-width: 991px){.projects[_ngcontent-%COMP%]{margin-top:150px}}@media (max-width: 768px){.projects[_ngcontent-%COMP%]{margin-top:120px}}.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:15px 0;color:#101010;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#878787}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}@media (max-width: 575px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]{margin-top:20px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#878787;font-weight:500;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.branding[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0 30px}.branding[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:15px}img[_ngcontent-%COMP%]{max-width:100%;width:100%}.owlcarousel1[_ngcontent-%COMP%]{margin:50px 0}.owlcarousel2[_ngcontent-%COMP%]{margin:0 0 50px}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{display:flex;justify-content:start;height:350px;align-items:center;width:100%}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{height:250px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;width:280px;display:inline;opacity:0;transition:.3s;border-radius:5px}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;width:160px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:90px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover{width:100%}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:40px;opacity:1;transition:width .8s ease;margin-left:150px;transition:.3s padding ease-out,.3s margin ease-out,.15s border ease-out}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:15px;margin-left:90px}}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-left:25px;margin-right:10px}}.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:80px}@media (max-width: 767px){.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:50px}}.line[_ngcontent-%COMP%]{width:100%;position:relative;display:block;height:1px;background-color:#f0ebe6}"]}),e})(),xQe=(()=>{const t=class{constructor(){this.imageData=[{albumId:1,id:1,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot1.png"},{albumId:1,id:2,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot2.png"},{albumId:1,id:3,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot3.png"},{albumId:1,id:4,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot4.png"},{albumId:1,id:5,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot5.png"},{albumId:1,id:6,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot6.png"},{albumId:1,id:7,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot7.png"},{albumId:1,id:8,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot8.png"},{albumId:1,id:9,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot9.png"}],this.desktopslider={autoplayTimeout:2e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider1={autoplayTimeout:2500,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider2={autoplayTimeout:3e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.baseUrl=en_baseUrl+"/assets",this.Url=en_baseUrl}ngOnInit(){setTimeout(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},500)}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=qi({type:t,selectors:[["app-autokoorosh"]],decls:111,vars:13,consts:[["id","project1","data-scroll-nav","0",1,"projects"],[1,"container-fluid"],[1,"row"],[1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-7","col-md-7","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","h-100","service-content"],[1,"heading"],[1,"points"],["href","https://autokoorosh.ae/","target","_blank",1,"text-decoration-underline"],[1,"col-xl-5","col-md-5","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","align-items-sm-end"],[1,"list-block"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"mt-0","mb-2"],[3,"href"],["data-aos","fade-up","data-aos-duration","1500","data-aos-delay","150",1,"mt-0","mb-2"],["data-scroll-nav","1",1,"pb-0"],[1,"container-fluid","p-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-12","p-0"],["alt","pages","width","","height","",3,"src"],["data-scroll-nav","2",1,"section","bg-autokoorosh","about"],[1,"container"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],[1,"content"],[1,"mb-0"],["id","branding","data-scroll-nav","3",1,"bg-autokoorosh","branding","pb-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-6","col-xl-6","col-lg-6","col-md-6","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],[1,"heading","mb-0"],["id","branding1",1,"bg-autokoorosh","branding"],[1,"imglist","mb-3"],["alt","project1","width","","height","",3,"src"],[1,"col-xxl-10","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","mx-lg-auto","ps-md-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","ps-md-0"],[1,"list"],["alt","packaging","width","","height","",3,"src"],["data-scroll-nav","5",1,"bg-autokoorosh","typography"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"typography"],["alt","typography","width","","height","",3,"src"],["data-aos","fade-up","data-aos-duration","2500","data-aos-delay","100"],["id","ui-ux","data-scroll-nav","8",1,"section","ui-ux"],[1,"row","mb-4"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-5","col-xl-6","col-lg-8","col-md-10","col-sm-10"],[1,"heading","mb-2"],[1,""],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-9","mx-lg-auto"],["id","myVideo3","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto","desktopimg"],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],["id","myVideo3","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto"],["id","technical","data-scroll-nav","8",1,"technical"],[1,"col-xxl-10","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-10","col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"mb-md-4","-sm-3","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"next","bg-black","pb-0"],[1,"col-md-12"],[1,"next-block"],[1,"in-line"],[1,"text-white","font-bold",3,"href"],["alt","","width","280","height","280",3,"src"],[1,"heading","text-white"],[1,"line"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"div",5)(7,"div")(8,"h1",6),I(9,"AUTOKOOROSH"),E(),C(10,"div",7)(11,"p"),I(12,"One of the leading auto repair shops serving customers in dubai. All mechanic services are performed by highly qualified mechanics."),E(),C(13,"p")(14,"a",8),I(15,"autokoorosh.ae"),E()()()()()(),C(16,"div",9)(17,"div",10)(18,"div",11)(19,"h3",12)(20,"a",13),I(21,"Branding"),E()(),C(22,"h3",14)(23,"a",13),I(24,"UI/UX Design"),E()()()()()()()()()(),C(25,"section",15)(26,"div",16)(27,"div",2)(28,"div",17),ue(29,"img",18),E()()()(),C(30,"section",19)(31,"div",20)(32,"div",2)(33,"div",21)(34,"div",22)(35,"p",23),I(36,"Autokoorosh, an established auto service provider, embarked on a digital journey with Pixtar, a renowned web development agency. With a track record of 15 years of delivering quality car repair and detailing services, Autokoorosh has earned maximum customer satisfaction. "),ue(37,"br")(38,"br"),I(39," Despite their longstanding success in the auto service industry, Autokoorosh recognized the need to enhance their online presence to better serve their customers and expand their reach. Pixtar was tasked with developing a website that not only reflected Autokoorosh's commitment to quality services but also showcased their work and diversified offerings."),E()()()()()(),C(40,"section",24)(41,"div",20)(42,"div",2)(43,"div",25)(44,"div",22)(45,"h1",26),I(46,"Branding"),E(),C(47,"p"),I(48,"Through cohesive branding efforts, Pixtar helped Autokoorosh strengthen its brand presence, establish credibility in the market, and attract new customers. The synergy between web development and branding ensured a holistic approach to enhancing Autokoorosh's overall marketing strategy and driving business growth."),E()()()()()(),C(49,"section",27)(50,"div",1)(51,"div",2)(52,"div",17)(53,"div",28),ue(54,"img",29),E()(),C(55,"div",30)(56,"div",2)(57,"div",31),ue(58,"img",29),E(),C(59,"div",32)(60,"div",33),ue(61,"img",34),E()()()()()()(),C(62,"section",35)(63,"div",1)(64,"div",2)(65,"div",3)(66,"div",36),ue(67,"img",37),C(68,"p",38),I(69,"Through cohesive branding efforts, Pixtar helped Autokoorosh strengthen its brand presence, establish credibility in the market, and attract new customers. The synergy between web development and branding ensured a holistic approach to enhancing Autokoorosh's overall marketing strategy and driving business growth."),E()()()()()(),C(70,"section",39)(71,"div",1)(72,"div",2)(73,"div",3)(74,"div",40)(75,"div",41)(76,"div",22)(77,"h1",42),I(78,"UI/UX Design"),E(),C(79,"p",43),I(80,"Pixtar crafted a dynamic and user-friendly website for Autokoorosh, highlighting their core services of car repairing and detailing. The website was designed to provide visitors with easy access to information about Autokoorosh's services, locations, and contact details. Integration of interactive features facilitated seamless communication between Autokoorosh and its customers"),E()()()(),C(81,"div",2)(82,"div",44)(83,"video",45),ue(84,"source",46)(85,"source",47),I(86," Your browser does not support HTML5 video. "),E(),C(87,"video",48),ue(88,"source",46)(89,"source",47),I(90," Your browser does not support HTML5 video. "),E()()()()()()(),C(91,"section",49)(92,"div",20)(93,"div",2)(94,"div",50)(95,"div",40)(96,"div",51)(97,"div",22)(98,"p",52),I(99,"Pixtar's collaboration with Autokoorosh resulted in a successful digital transformation, positioning them as a leader in the auto service industry. The new website not only improved customer engagement but also strengthened Autokoorosh's brand identity and facilitated business growth. Through strategic web development, Pixtar helped Autokoorosh drive excellence in auto services and expand its reach in the competitive Dubai market."),E()()()()()()()(),C(100,"section",53)(101,"div",20)(102,"div",2)(103,"div",54)(104,"div",55)(105,"div",56)(106,"a",57),ue(107,"img",58),C(108,"h1",59),I(109,"NEXT PROJECT"),E()()()()()(),ue(110,"div",60),E()()),2&r&&(ce(20),Ue("href","",s.Url,"/project-details/autokoorosh#branding",De),ce(3),Ue("href","",s.Url,"/project-details/autokoorosh#ui-ux",De),ce(6),Ue("src","",s.baseUrl,"/images/projects/autokoorosh/autokoorosh-banner-min.png",De),ce(25),Ue("src","",s.baseUrl,"/images/projects/autokoorosh/autokoorosh-branding.png",De),ce(4),Ue("src","",s.baseUrl,"/images/projects/autokoorosh/autokoorosh-left.png",De),ce(3),Ue("src","",s.baseUrl,"/images/projects/autokoorosh/autokoorosh-right.png",De),ce(6),Ue("src","",s.baseUrl,"/images/projects/autokoorosh/typography.png",De),ce(17),Ue("src","",s.baseUrl,"/images/projects/autokoorosh/autokoorosh-desktop.mp4",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/autokoorosh/autokoorosh-desktop.ogg",De),ce(3),Ue("src","",s.baseUrl,"/images/projects/autokoorosh/autokoorosh_laptop.mp4",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/autokoorosh/autokoorosh_laptop.ogg",De),ce(17),Ue("href","",s.Url,"/project-details/vendetta",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/vendetta/vendetta-banner-min.png",De))},styles:[".bg-autokoorosh[_ngcontent-%COMP%]{background:#101621}section[_ngcontent-%COMP%]{overflow:hidden}section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#101010}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#101010;font-size:18px}@media (max-width: 767px){section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-weight:500}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}section[_ngcontent-%COMP%]   .barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:24px}@media (max-width: 767px){.section[_ngcontent-%COMP%]{padding:50px 0}}.projects[_ngcontent-%COMP%]{margin-top:200px}@media (max-width: 991px){.projects[_ngcontent-%COMP%]{margin-top:150px}}@media (max-width: 768px){.projects[_ngcontent-%COMP%]{margin-top:120px}}.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:15px 0;color:#101010;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#878787}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}@media (max-width: 575px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]{margin-top:20px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#878787;font-weight:500;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.branding[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0 30px;color:#fff}.branding[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:15px}.branding[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff}img[_ngcontent-%COMP%]{max-width:100%;width:100%}.owlcarousel1[_ngcontent-%COMP%]{margin:50px 0}.owlcarousel2[_ngcontent-%COMP%]{margin:0 0 50px}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{display:flex;justify-content:start;height:350px;align-items:center;width:100%}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{height:250px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;width:280px;display:inline;opacity:0;transition:.3s;border-radius:5px}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;width:160px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:90px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover{width:100%}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:40px;opacity:1;transition:width .8s ease;margin-left:150px;transition:.3s padding ease-out,.3s margin ease-out,.15s border ease-out}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:15px;margin-left:90px}}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-left:25px;margin-right:10px}}.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:80px}@media (max-width: 767px){.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:50px}}.line[_ngcontent-%COMP%]{width:100%;position:relative;display:block;height:1px;background-color:#f0ebe6}.about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}"]}),e})(),wQe=(()=>{const t=class{constructor(){this.imageData=[{albumId:1,id:1,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot1.png"},{albumId:1,id:2,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot2.png"},{albumId:1,id:3,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot3.png"},{albumId:1,id:4,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot4.png"},{albumId:1,id:5,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot5.png"},{albumId:1,id:6,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot6.png"},{albumId:1,id:7,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot7.png"},{albumId:1,id:8,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot8.png"},{albumId:1,id:9,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot9.png"}],this.desktopslider={autoplayTimeout:2e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider1={autoplayTimeout:2500,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider2={autoplayTimeout:3e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.baseUrl=en_baseUrl+"/assets",this.Url=en_baseUrl}ngOnInit(){}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=qi({type:t,selectors:[["app-vendetta"]],decls:96,vars:9,consts:[["id","project1","data-scroll-nav","0",1,"projects"],[1,"container-fluid"],[1,"row"],[1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-7","col-md-7","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","h-100","service-content"],[1,"heading"],[1,"points"],["href","https://vendettagarages.com/","target","_blank",1,"text-decoration-underline"],[1,"col-xl-5","col-md-5","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","align-items-sm-end"],[1,"list-block"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"mt-0","mb-2"],[3,"href"],["data-aos","fade-up","data-aos-duration","1500","data-aos-delay","150",1,"mt-0","mb-2"],["data-scroll-nav","1",1,"pb-0"],[1,"container-fluid","p-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-12","p-0"],["alt","pages","width","","height","",3,"src"],["data-scroll-nav","2",1,"section","bg-beyou","about"],[1,"container"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],[1,"content"],[1,"mb-0"],["id","branding","data-scroll-nav","3",1,"bg-beyou","branding","pb-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-6","col-xl-6","col-lg-6","col-md-6","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],[1,"heading","mb-0"],["id","branding1",1,"bg-beyou","branding"],[1,"imglist","mb-3"],["alt","project1","width","","height","",3,"src"],[1,"col-xxl-10","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","mx-lg-auto","ps-md-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","ps-md-0"],[1,"list"],["alt","packaging","width","","height","",3,"src"],["data-scroll-nav","5",1,"bg-beyou","typography"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"typography"],["alt","typography","width","","height","",3,"src"],["id","ui-ux","data-scroll-nav","8",1,"section","ui-ux"],[1,"row","mb-4"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-5","col-xl-6","col-lg-8","col-md-10","col-sm-10"],[1,"heading","mb-2"],[1,""],["id","technical","data-scroll-nav","8",1,"technical"],[1,"col-xxl-10","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-10","col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"mb-md-4","-sm-3","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"next","bg-black","pb-0"],[1,"col-md-12"],[1,"next-block"],[1,"in-line"],[1,"text-white","font-bold",3,"href"],["alt","","width","280","height","280",3,"src"],[1,"heading","text-white"],[1,"line"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"div",5)(7,"div")(8,"h1",6),I(9,"VENDETTA"),E(),C(10,"div",7)(11,"p"),I(12,"Vendetta Auto Garage Company exemplifies the seamless integration of tradition and innovation in the automotive industry."),E(),C(13,"p")(14,"a",8),I(15,"vendettagarages.com"),E()()()()()(),C(16,"div",9)(17,"div",10)(18,"div",11)(19,"h3",12)(20,"a",13),I(21,"Branding"),E()(),C(22,"h3",14)(23,"a",13),I(24,"UI/UX Design"),E()()()()()()()()()(),C(25,"section",15)(26,"div",16)(27,"div",2)(28,"div",17),ue(29,"img",18),E()()()(),C(30,"section",19)(31,"div",20)(32,"div",2)(33,"div",21)(34,"div",22)(35,"p",23),I(36,"Pixtar was entrusted with translating our passion for precision car painting into a captivating digital platform. We relied on Pixtar to not only capture the essence of our expertise but also to craft a seamless and engaging website that reflects our commitment to automotive excellence."),E()()()()()(),C(37,"section",24)(38,"div",20)(39,"div",2)(40,"div",25)(41,"div",22)(42,"h1",26),I(43,"Branding"),E(),C(44,"p"),I(45,"Pixtar undertook comprehensive branding work for Vendetta, starting with the creation of a distinctive logo that encapsulated the company's identity. Additionally, Pixtar designed eye-catching flyers, standees, and business cards that effectively conveyed Vendetta's professionalism and expertise in car painting services."),E()()()()()(),C(46,"section",27)(47,"div",1)(48,"div",2)(49,"div",17)(50,"div",28),ue(51,"img",29),E()(),C(52,"div",30)(53,"div",2)(54,"div",31),ue(55,"img",29),E(),C(56,"div",32)(57,"div",33),ue(58,"img",34),E()()()()()()(),C(59,"section",35)(60,"div",1)(61,"div",2)(62,"div",3)(63,"div",36),ue(64,"img",37),E()()()()(),C(65,"section",38)(66,"div",1)(67,"div",2)(68,"div",3)(69,"div",39)(70,"div",40)(71,"div",22)(72,"h1",41),I(73,"UI/UX Design"),E(),C(74,"p",42),I(75,"Pixtar developed a dynamic and user-friendly website for Vendetta Auto Garage Company. The website showcased Vendetta's services, including interior and exterior painting for all types of cars, with detailed descriptions and high-quality images. Integration of interactive features allowed customers to easily request quotes and schedule appointments."),E()()()()()()()(),C(76,"section",43)(77,"div",20)(78,"div",2)(79,"div",44)(80,"div",39)(81,"div",45)(82,"div",22)(83,"p",46),I(84,"Pixtar's collaboration with Vendetta Auto Garage Company resulted in a successful digital transformation. The website and branding materials not only enhanced Vendetta's online presence but also positioned them as a leader in car painting services. Through strategic web development and branding, Pixtar helped Vendetta attract new customers and drive business growth in the competitive automotive market."),E()()()()()()()(),C(85,"section",47)(86,"div",20)(87,"div",2)(88,"div",48)(89,"div",49)(90,"div",50)(91,"a",51),ue(92,"img",52),C(93,"h1",53),I(94,"NEXT PROJECT"),E()()()()()(),ue(95,"div",54),E()()),2&r&&(ce(20),Ue("href","",s.Url,"/project-details/vendetta#branding",De),ce(3),Ue("href","",s.Url,"/project-details/vendetta#ui-ux",De),ce(6),Ue("src","",s.baseUrl,"/images/projects/vendetta/vendetta-banner-min.png",De),ce(22),Ue("src","",s.baseUrl,"/images/projects/vendetta/vendetta-branding-min.png",De),ce(4),Ue("src","",s.baseUrl,"/images/projects/vendetta/vendetta-left-min.png",De),ce(3),Ue("src","",s.baseUrl,"/images/projects/vendetta/vendetta-right-min.png",De),ce(6),Ue("src","",s.baseUrl,"/images/projects/vendetta/typography.png",De),ce(27),Ue("href","",s.Url,"/project-details/spacex",De),ce(1),Ue("src","",s.baseUrl,"/images/projects/spacex/spacex-left.png",De))},styles:[".bg-beyou[_ngcontent-%COMP%]{background:#444444}section[_ngcontent-%COMP%]{overflow:hidden}section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#101010}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#101010;font-size:18px}@media (max-width: 767px){section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-weight:500}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}section[_ngcontent-%COMP%]   .barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:24px}@media (max-width: 767px){.section[_ngcontent-%COMP%]{padding:50px 0}}.projects[_ngcontent-%COMP%]{margin-top:200px}@media (max-width: 991px){.projects[_ngcontent-%COMP%]{margin-top:150px}}@media (max-width: 768px){.projects[_ngcontent-%COMP%]{margin-top:120px}}.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:15px 0;color:#101010;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#878787}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}@media (max-width: 575px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]{margin-top:20px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#878787;font-weight:500;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.branding[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0 30px;color:#fff}.branding[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:15px}.branding[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff}img[_ngcontent-%COMP%]{max-width:100%;width:100%}.owlcarousel1[_ngcontent-%COMP%]{margin:50px 0}.owlcarousel2[_ngcontent-%COMP%]{margin:0 0 50px}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{display:flex;justify-content:start;height:350px;align-items:center;width:100%}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{height:250px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;width:280px;display:inline;opacity:0;transition:.3s;border-radius:5px}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;width:160px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:90px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover{width:100%}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:40px;opacity:1;transition:width .8s ease;margin-left:150px;transition:.3s padding ease-out,.3s margin ease-out,.15s border ease-out}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:15px;margin-left:90px}}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-left:25px;margin-right:10px}}.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:80px}@media (max-width: 767px){.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:50px}}.line[_ngcontent-%COMP%]{width:100%;position:relative;display:block;height:1px;background-color:#f0ebe6}.about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}"]}),e})(),MQe=(()=>{const t=class{constructor(){this.imageData=[{albumId:1,id:1,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot1.png"},{albumId:1,id:2,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot2.png"},{albumId:1,id:3,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot3.png"},{albumId:1,id:4,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot4.png"},{albumId:1,id:5,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot5.png"},{albumId:1,id:6,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot6.png"},{albumId:1,id:7,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot7.png"},{albumId:1,id:8,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot8.png"},{albumId:1,id:9,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:en_baseUrl+"/assets/images/projects/beyou/shot9.png"}],this.desktopslider={autoplayTimeout:2e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider1={autoplayTimeout:2500,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider2={autoplayTimeout:3e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.baseUrl=en_baseUrl+"/assets",this.Url=en_baseUrl}ngOnInit(){setTimeout(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},500)}};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=qi({type:t,selectors:[["app-spacex"]],decls:97,vars:7,consts:[["id","project1","data-scroll-nav","0",1,"projects"],[1,"container-fluid"],[1,"row"],[1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-7","col-md-7","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","h-100","service-content"],[1,"heading"],[1,"points"],["href","https://spacexfitness.in","target","_blank",1,"text-decoration-underline"],[1,"col-xl-5","col-md-5","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","align-items-sm-end"],[1,"list-block"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"mt-0","mb-2"],[3,"href"],["data-aos","fade-up","data-aos-duration","1500","data-aos-delay","150",1,"mt-0","mb-2"],["data-scroll-nav","1",1,"pb-0"],[1,"container-fluid","p-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-12","p-0"],["alt","pages","width","","height","",3,"src"],["data-scroll-nav","2",1,"section","bg-autokoorosh","about"],[1,"container"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],[1,"content"],[1,"mb-0"],["id","branding","data-scroll-nav","3",1,"bg-autokoorosh","branding","pb-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-6","col-xl-6","col-lg-6","col-md-6","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],[1,"heading","mb-0"],["id","branding1",1,"bg-autokoorosh","branding"],[1,"imglist","mb-3"],["alt","project1","width","","height","",3,"src"],[1,"col-xxl-10","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","mx-lg-auto","ps-md-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","ps-md-0"],[1,"list"],["alt","packaging","width","","height","",3,"src"],["data-scroll-nav","5",1,"bg-autokoorosh","typography"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"typography"],["alt","typography","width","","height","",3,"src"],["id","ui-ux","data-scroll-nav","8",1,"section","ui-ux"],[1,"row","mb-4"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-5","col-xl-6","col-lg-8","col-md-10","col-sm-10"],[1,"heading","mb-2"],[1,""],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-9","mx-lg-auto"],["id","technical","data-scroll-nav","8",1,"technical"],[1,"col-xxl-10","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-10","col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"mb-md-4","-sm-3","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"next","bg-black","pb-0"],[1,"col-md-12"],[1,"next-block"],[1,"in-line"],["href","#",1,"text-white","font-bold"],[1,"heading","text-white"],[1,"line"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"div",5)(7,"div")(8,"h1",6),I(9,"SPACEXFITNESS"),E(),C(10,"div",7)(11,"p"),I(12,"SpaceX Fitness embodies a fusion of cutting-edge fitness technology and expert coaching, propelling individuals to new heights of strength and vitality."),E(),C(13,"p")(14,"a",8),I(15,"spacexfitness.in"),E()()()()()(),C(16,"div",9)(17,"div",10)(18,"div",11)(19,"h3",12)(20,"a",13),I(21,"Branding"),E()(),C(22,"h3",14)(23,"a",13),I(24,"UI/UX Design"),E()()()()()()()()()(),C(25,"section",15)(26,"div",16)(27,"div",2)(28,"div",17),ue(29,"img",18),E()()()(),C(30,"section",19)(31,"div",20)(32,"div",2)(33,"div",21)(34,"div",22)(35,"p",23),I(36,"Pixtar was tasked with encapsulating the essence of our innovative approach to fitness into a digital platform. We entrusted Pixtar not only with capturing our brand's dynamic spirit but also with creating a seamless and engaging website that reflects our commitment to excellence in health and wellness."),E()()()()()(),C(37,"section",24)(38,"div",20)(39,"div",2)(40,"div",25)(41,"div",22)(42,"h1",26),I(43,"Branding"),E(),C(44,"p"),I(45,"In addition to website development, Pixtar undertook comprehensive branding work for SpaceX. This included creating a cohesive visual identity that aligned with their values and industry positioning. From logo design to color schemes and typography, every element was carefully crafted to reflect the brand's professionalism and expertise."),E()()()()()(),C(46,"section",27)(47,"div",1)(48,"div",2)(49,"div",17)(50,"div",28),ue(51,"img",29),E()(),C(52,"div",30)(53,"div",2)(54,"div",31),ue(55,"img",29),E(),C(56,"div",32)(57,"div",33),ue(58,"img",34),E()()()()()()(),C(59,"section",35)(60,"div",1)(61,"div",2)(62,"div",3)(63,"div",36),ue(64,"img",37),E()()()()(),C(65,"section",38)(66,"div",1)(67,"div",2)(68,"div",3)(69,"div",39)(70,"div",40)(71,"div",22)(72,"h1",41),I(73,"UI/UX Design"),E(),C(74,"p",42),I(75,"The design prioritized delivering an immersive browsing experience, seamlessly navigating users through the gym's facilities,and membership options. Every element was carefully curated to showcase the dynamic energy and innovative approach of SpaceX Fitness, ensuring visitors feel motivated and empowered to embark on their fitness journey."),E()()()(),C(76,"div",2),ue(77,"div",43),E()()()()(),C(78,"section",44)(79,"div",20)(80,"div",2)(81,"div",45)(82,"div",39)(83,"div",46)(84,"div",22)(85,"p",47),I(86,"Pixtar's partnership with SpaceX Fitness has yielded a digital platform that seamlessly merges technology with fitness expertise. This case study highlights Pixtar's adeptness in harmonizing design, development, and functionality, delivering a compelling digital experience for SpaceX Fitness' audience."),E()()()()()()()(),C(87,"section",48)(88,"div",20)(89,"div",2)(90,"div",49)(91,"div",50)(92,"div",51)(93,"a",52)(94,"h1",53),I(95,"NEXT PROJECT"),E()()()()()(),ue(96,"div",54),E()()),2&r&&(ce(20),Ue("href","",s.Url,"/project-details/spacex#branding",De),ce(3),Ue("href","",s.Url,"/project-details/spacex#ui-ux",De),ce(6),Ue("src","",s.baseUrl,"/images/projects/spacex/spacex-banner-min.png",De),ce(22),Ue("src","",s.baseUrl,"/images/projects/spacex/spacex-branding.png",De),ce(4),Ue("src","",s.baseUrl,"/images/projects/spacex/glove.png",De),ce(3),Ue("src","",s.baseUrl,"/images/projects/spacex/kattlebell.png",De),ce(6),Ue("src","",s.baseUrl,"/images/projects/spacex/typography.png",De))},styles:[".bg-autokoorosh[_ngcontent-%COMP%]{background:#f3f1ee}section[_ngcontent-%COMP%]{overflow:hidden}section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#101010}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#101010;font-size:18px}@media (max-width: 767px){section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-weight:500}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}section[_ngcontent-%COMP%]   .barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:24px}@media (max-width: 767px){.section[_ngcontent-%COMP%]{padding:50px 0}}.projects[_ngcontent-%COMP%]{margin-top:200px}@media (max-width: 991px){.projects[_ngcontent-%COMP%]{margin-top:150px}}@media (max-width: 768px){.projects[_ngcontent-%COMP%]{margin-top:120px}}.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:15px 0;color:#101010;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#878787}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}@media (max-width: 575px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]{margin-top:20px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#878787;font-weight:500;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.branding[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0 30px;color:#000}.branding[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:15px}.branding[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#000}img[_ngcontent-%COMP%]{max-width:100%;width:100%}.owlcarousel1[_ngcontent-%COMP%]{margin:50px 0}.owlcarousel2[_ngcontent-%COMP%]{margin:0 0 50px}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{display:flex;justify-content:start;height:350px;align-items:center;width:100%}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{height:250px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;width:280px;display:inline;opacity:0;transition:.3s;border-radius:5px}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;width:160px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:90px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover{width:100%}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:40px;opacity:1;transition:width .8s ease;margin-left:150px;transition:.3s padding ease-out,.3s margin ease-out,.15s border ease-out}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:15px;margin-left:90px}}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-left:25px;margin-right:10px}}.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:80px}@media (max-width: 767px){.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:50px}}.line[_ngcontent-%COMP%]{width:100%;position:relative;display:block;height:1px;background-color:#f0ebe6}.about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}"]}),e})();const CQe=["canvas"];function PQe(e,t){if(1&e&&(C(0,"div",67)(1,"a",68),ue(2,"img",69),E()()),2&e){const n=t.$implicit;ce(2),bd("src",n.img,De)}}let SQe=(()=>{const t=class{constructor(i,r,s,o,a){this.router=i,this.pageservice=r,this.metaTagService=s,this.titleService=o,this.splineThreeService=a,this.desktopslider={loop:!1,rewind:!0,autoplay:!0,autoplayTimeout:1500,center:!0,dots:!0,autoHeight:!0,autoWidth:!0,smartSpeed:1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.isPlaying=!0,this.clientImgarray=[],this.filteredClients=[],this.isChangingRandom=!1,this.get_PageMeta(),this.baseUrl=en_baseUrl+"/assets"}ngOnInit(){var r={container:document.getElementById("lottie"),renderer:"svg",loop:!0,autoplay:!0,animationData:{v:"5.9.6",fr:30,ip:0,op:96,w:122,h:119,nm:"hand",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:3,nm:"Null 1",sr:1,ks:{o:{a:0,k:0,ix:11},r:{a:0,k:-34.9,ix:10},p:{a:0,k:[67.1,111.5,0],ix:2,l:2},a:{a:0,k:[0,0,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Layer 3 Outlines",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:9.546,s:[8]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:20.363,s:[-8]},{i:{x:[.65],y:[1.156]},o:{x:[.333],y:[0]},t:30.546,s:[8]},{i:{x:[.667],y:[1]},o:{x:[.167],y:[0]},t:42,s:[-1.8]},{i:{x:[.833],y:[1]},o:{x:[.333],y:[0]},t:51,s:[0]},{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:60,s:[-.4]},{t:69,s:[0]}],ix:10},p:{a:0,k:[-2.981,.359,0],ix:2,l:2},a:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[15.024,91.188,0],to:[0,0,0],ti:[0,0,0]},{t:44,s:[15.024,91.188,0]}],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[3.903,-5.533],[3.056,-2.353],[6.543,2.313],[4.228,4.252],[.327,6.566],[-.109,2.842],[-.281,9.016],[.083,2.706],[-1.043,.386],[-.666,-2.038],[-.181,-1.13],[.156,-4.374],[-1.579,-.706],[-1.31,1],[-.442,.663],[-6.815,9.598],[-.455,.427],[-1.272,-1.478],[1.046,-1.327],[4.713,-6.619],[.196,-.327],[-1.1,-.992],[-1.181,.832],[-.345,.518],[-6.936,9.765],[-.29,.345],[-1.763,-.582],[-.03,-1.826],[.764,-.91],[6.934,-9.766],[.241,-.499],[-1.104,-.867],[-1.126,.839],[-.321,.495],[-5.124,7.179],[-.342,.391],[-1.712,-.819],[1.17,-2.201],[.133,-.179],[5.282,-7.492],[-1.55,-1.123],[-1.373,1.933],[-2.975,4.189],[-.217,.273],[-1.064,-.33],[-.164,-.992],[.618,-.721],[4.295,-6.063]],o:[[0,0],[-3.925,5.53],[-2.207,3.163],[-5.419,4.144],[-5.658,-1.985],[-4.757,-4.537],[-.132,-2.83],[.352,-9.013],[.084,-2.7],[-.047,-1.53],[2.052,-.622],[.282,1.109],[.785,4.306],[-.141,1.724],[1.431,.818],[.627,-.491],[6.837,-9.584],[.339,-.524],[1.477,-1.272],[1.103,1.28],[-4.699,6.627],[-.221,.311],[-.761,1.271],[1.062,.978],[.484,-.392],[6.95,-9.758],[.262,-.368],[1.202,-1.415],[1.726,.596],[-.023,1.188],[-6.946,9.76],[-.333,.444],[-.56,1.287],[1.107,.863],[.438,-.395],[5.133,-7.171],[.3,-.423],[1.273,-1.408],[2.2,1.171],[-.105,.197],[-5.348,7.451],[-1.34,1.9],[1.55,1.123],[2.98,-4.187],[.2,-.283],[.669,-.891],[.979,.23],[.17,.934],[-4.32,6.046],[0,0]],v:[[23.152,14.265],[23.152,14.265],[11.387,30.834],[3.446,39.158],[-14.469,42.324],[-29.49,32.847],[-37.41,15.555],[-37.109,7.033],[-36.085,-20.008],[-36.314,-28.124],[-34.842,-30.943],[-29.951,-28.395],[-29.245,-25.033],[-28.298,-11.975],[-25.898,-7.919],[-21.376,-8.219],[-19.764,-9.962],[.715,-38.734],[1.91,-40.165],[6.888,-39.794],[6.986,-35.305],[-7.133,-15.436],[-7.783,-14.492],[-7.199,-10.598],[-3.355,-10.348],[-2.105,-11.721],[18.725,-41.005],[19.531,-42.094],[24.437,-43.471],[27.362,-39.438],[26.146,-36.195],[5.327,-6.906],[4.464,-5.488],[5.387,-1.83],[9.168,-1.788],[10.311,-3.128],[25.697,-24.654],[26.645,-25.895],[31.676,-26.887],[33.542,-20.783],[33.185,-20.219],[17.314,2.245],[17.658,7.111],[22.458,5.811],[31.391,-6.755],[32.008,-7.593],[34.898,-8.527],[36.785,-6.509],[36.077,-3.893],[23.154,14.271]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[-2.092,-1],[-5.851,1.244],[-2.89,2.122],[-2.836,4.038],[-8.223,11.534],[1.8,3.179],[2.203,.713],[-.482,.692],[3.481,3.721],[1.699,.527],[.484,.17],[1.139,3.155],[2.122,1.241],[3.015,-1.109],[1.758,-2.785],[.644,.543],[3.548,-4.034],[.13,-.169],[1.792,-2.514],[4.079,-5.747],[0,0],[.082,.492],[.844,3.567],[3.743,.857],[2.2,-2.689],[-.104,-2.042],[.639,-12.849],[-1.281,-4.26],[-5.078,-4.319],[-.195,-.238],[0,0]],o:[[2.036,1.113],[5.3,2.515],[3.508,-.744],[3.984,-2.911],[8.184,-11.562],[2.279,-2.855],[-1.124,-2.024],[.544,-.765],[3.017,-4.106],[-1.184,-1.328],[-.386,-.124],[1.837,-2.807],[-.767,-2.335],[-2.755,-1.652],[-3.194,1.082],[-.671,-.678],[-4.034,-3.548],[-.141,.16],[-1.912,2.423],[-4.089,5.741],[0,0],[-.08,-.81],[-.575,-3.63],[-.905,-3.835],[-3.335,-.972],[-1.354,1.532],[.755,12.89],[-.219,4.4],[1.914,6.386],[.221,.214],[0,0],[0,0]],v:[[-26.227,43.472],[-20.111,46.795],[-3.436,49.195],[6.271,44.847],[16.572,34.353],[41.182,-.292],[41.975,-10.279],[36.799,-14.538],[38.319,-16.68],[37.519,-30.18],[33.112,-33.014],[31.862,-33.451],[32.969,-42.919],[28.486,-48.471],[19.361,-49.329],[12.486,-42.977],[10.62,-44.85],[-3.107,-43.971],[-3.514,-43.477],[-8.939,-35.964],[-21.189,-18.731],[-22.033,-17.546],[-22.214,-19.346],[-24.014,-30.219],[-31.486,-37.094],[-40.613,-34.262],[-42.563,-28.686],[-43.555,9.895],[-42.488,22.887],[-31.775,39.287],[-31.152,39.965],[-26.227,43.465]],c:!1},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[44.024,50.688],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0},{ddd:0,ind:3,ty:4,nm:"Layer 4 Outlines",parent:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:3.182,s:[4]},{t:17,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.591],y:[1.232]},o:{x:[.333],y:[0]},t:3.182,s:[64.512]},{t:17,s:[78.762]}],ix:3},y:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:3.182,s:[-46.004]},{t:17,s:[-45.754]}],ix:4}},a:{a:0,k:[3.602,10.311,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.001,.462],[-.098,.14],[.05,.08],[-.397,.235],[-.245,-.372],[-.243,-2.031],[2.88,-3.875],[.273,0]],o:[[-.461,0],[0,-.17],[6.552,-9.387],[-.235,-.397],[.383,-.227],[1.001,1.784],[.576,4.793],[-.156,.224],[0,0]],v:[[-2.516,10.057],[-3.351,9.221],[-3.201,8.745],[-1.542,-8.689],[-1.249,-9.834],[-.128,-9.576],[1.757,-3.797],[-1.831,9.704],[-2.516,10.061]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[3.601,10.311],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0},{ddd:0,ind:4,ty:4,nm:"Layer 5 Outlines",parent:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:15,s:[100]}],ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:15,s:[0]}],ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.524],y:[1.943]},o:{x:[.333],y:[0]},t:0,s:[63.218]},{t:15,s:[81.718]}],ix:3},y:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[-46.437]},{t:15,s:[-45.687]}],ix:4}},a:{a:0,k:[3.592,13.05,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.001,.462],[-.098,.14],[.719,5.523],[1.159,2.111],[-.394,.238],[-.245,-.379],[-.31,-2.601],[4.815,-6.892],[.273,0]],o:[[-.461,0],[0,-.17],[3.6,-5.154],[-.281,-2.392],[-.238,-.395],[.387,-.233],[1.281,2.285],[.55,4.109],[-.156,.224],[0,0]],v:[[-2.507,12.799],[-3.341,11.964],[-3.191,11.486],[1.147,-4.604],[-1.033,-11.421],[-.75,-12.566],[.383,-12.305],[2.792,-4.905],[-1.823,12.439],[-2.508,12.797]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[3.592,13.05],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0},{ddd:0,ind:5,ty:4,nm:"Layer 6 Outlines",parent:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:15.909,s:[3]},{t:28,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.706],y:[1.553]},o:{x:[.333],y:[0]},t:15.909,s:[30.436]},{t:28,s:[24.186]}],ix:3},y:{a:1,k:[{i:{x:[.652],y:[1.489]},o:{x:[.333],y:[0]},t:15.909,s:[-81.209]},{t:28,s:[-93.959]}],ix:4}},a:{a:0,k:[9.646,4.948,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.001,.461],[-.075,.128],[-1.692,1.15],[-4.764,-.772],[.06,-.457],[.457,.06],[3.634,-2.451],[1.022,-1.522],[.295,0]],o:[[-.461,-.001],[0,-.148],[1.123,-1.71],[3.99,-2.716],[.457,.06],[-.06,.457],[-4.324,-.717],[-1.519,1.027],[-.151,.253],[0,0]],v:[[-8.561,4.693],[-9.395,3.855],[-9.279,3.435],[-5.016,-.898],[8.617,-3.926],[9.335,-2.989],[8.398,-2.27],[-3.995,.431],[-7.842,4.29],[-8.561,4.698]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[9.645,4.948],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0},{ddd:0,ind:6,ty:4,nm:"Layer 7 Outlines",parent:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:13.363,s:[0]},{t:26,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.624],y:[2.994]},o:{x:[.333],y:[0]},t:13.363,s:[30.021]},{t:26,s:[22.771]}],ix:3},y:{a:1,k:[{i:{x:[.624],y:[1.964]},o:{x:[.333],y:[0]},t:13.363,s:[-82.012]},{t:26,s:[-97.012]}],ix:4}},a:{a:0,k:[12.19,6.146,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.295,0],[0,.461],[-.076,.128],[-2.168,1.472],[-8.332,-1.099],[.06,-.457],[.457,.06],[4.573,-3.179],[1.34,-2]],o:[[-.461,-.001],[.001,-.149],[1.439,-2.19],[3.394,-2.379],[.457,.06],[-.06,.457],[-6.231,-.82],[-1.994,1.35],[-.151,.254]],v:[[-11.106,5.895],[-11.94,5.059],[-11.824,4.637],[-6.361,-.91],[11.161,-4.796],[11.88,-3.859],[10.943,-3.14],[-5.339,.413],[-10.387,5.486]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[12.19,6.146],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0}],markers:[]}};UW().loadAnimation(r),this.router.parseUrl(this.router.url).fragment||setTimeout(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},500),this.clientImgarray.push({id:1,img:this.baseUrl+"/img/home/logos/dnour.svg",class:""},{id:2,img:this.baseUrl+"/img/home/logos/crystal.svg",class:""},{id:3,img:this.baseUrl+"/img/home/logos/miniaar.svg",class:""},{id:4,img:this.baseUrl+"/img/home/logos/bni.svg",class:""},{id:5,img:this.baseUrl+"/img/home/logos/angle.svg"},{id:6,img:this.baseUrl+"/img/home/logos/pakhis.svg",class:""},{id:7,img:this.baseUrl+"/img/home/logos/drminnie.svg",class:""},{id:8,img:this.baseUrl+"/img/home/logos/veddentta.svg",class:""},{id:9,img:this.baseUrl+"/img/home/logos/autokoorosh.svg",class:""},{id:10,img:this.baseUrl+"/img/home/logos/fractal.svg",class:""},{id:11,img:this.baseUrl+"/img/home/logos/corporate.svg",class:""},{id:12,img:this.baseUrl+"/img/home/logos/aetrio.svg",class:""},{id:13,img:this.baseUrl+"/img/home/logos/wrae.svg",class:""},{id:14,img:this.baseUrl+"/img/home/logos/beyou.svg",class:""},{id:15,img:this.baseUrl+"/img/home/logos/alchemative.svg",class:""},{id:16,img:this.baseUrl+"/img/home/logos/Asset 13.svg",class:""},{id:17,img:this.baseUrl+"/img/home/logos/caratcraft.svg",class:""},{id:18,img:this.baseUrl+"/img/home/logos/ep.svg",class:""},{id:19,img:this.baseUrl+"/img/home/logos/holidaymate.svg",class:""},{id:20,img:this.baseUrl+"/img/home/logos/j.avenue.svg",class:""},{id:22,img:this.baseUrl+"/img/home/logos/maney-angel.svg",class:""},{id:23,img:this.baseUrl+"/img/home/logos/santosh-kotli.svg",class:""},{id:24,img:this.baseUrl+"/img/home/logos/solitaire-events.svg",class:""},{id:25,img:this.baseUrl+"/img/home/logos/spacex.svg",class:""},{id:26,img:this.baseUrl+"/img/home/logos/urban-excellence.svg",class:""},{id:27,img:this.baseUrl+"/img/home/logos/virtual-key.svg",class:""},{id:28,img:this.baseUrl+"/img/home/logos/zlk.svg",class:""}),this.filteredClients=this.clientImgarray.slice(0,15),this.onHover()}ngAfterViewInit(){this.splineThreeService.initialize(this.containerRef.nativeElement,"https://prod.spline.design/lOwCHnDGwjVf9GgA/scene.splinecode")}onHover(){this.isChangingRandom||(this.isChangingRandom=!0,this.intervalId=setInterval(()=>{this.filterClients()},2e3))}filterClients(){this.filteredClients.forEach(c=>{c.class=""});let i=this.clientImgarray,r=[];for(var s=0;s<2;s++){var o=Math.floor(Math.random()*i.length);0==r.filter(d=>d.id==o).length&&r.push(i[o])}for(var a=0;a<r.length;a++)if(0==this.filteredClients.filter(d=>d.id==r[a].id).length){var l=Math.floor(Math.random()*this.filteredClients.length);this.filteredClients[l]=r[a],this.filteredClients[l].class="blur"}}get_PageMeta(){this.pageservice.getpageWithName({pageName:"about-us"}).subscribe(r=>{200==r.body.code&&r.body.result&&(this.titleService.setTitle(r?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:r?.body.result.meta_description},{name:"keywords",content:r?.body.result.meta_keywords}]))})}navigateToLink(i){this.router.navigate([i])}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(Oo),Ne(tu),Ne(wd),Ne(Md),Ne(v1))},t.\u0275cmp=qi({type:t,selectors:[["app-services"]],viewQuery:function(r,s){if(1&r&&bl(CQe,7),2&r){let o;Yr(o=$r())&&(s.containerRef=o.first)}},decls:176,vars:11,consts:[[1,"service-banner"],[1,"container"],[1,"row"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["alt","",1,"img-globe","floatimg",3,"src"],[1,"vh-100"],[1,"d-flex","flex-column","justify-content-center","align-items-start","h-100"],[1,"block-content"],[1,"d-flex","flex-row","w-100"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block","textcolor2","size90"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-flex","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none","align-items-end","size90","textcolor2"],["id","lottie"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","200",1,"csm","d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none","text-white","size90"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","200",1,"csm","d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block","text-white","size90"],[1,"position-absolute","banner-left-content","content-left"],[1,"d-flex","flex-column","justify-contente-arround","p-0","float-start",2,"height","130px","list-style","none","justify-content","space-between"],["href","https://www.instagram.com/pixtar.ae/","target","_blank",1,""],["alt","","width","15",3,"src"],["href","https://www.facebook.com/pixtar.ae/","target","_blank",1,""],["alt","","width","10",3,"src"],["href","https://www.linkedin.com/company/pixtar-ae/","target","_blank",1,""],["href","https://wa.me/+971527930781","target","_blank",1,"whatsapp-icon2","slideUpReturn","tabmob"],["alt","whatsapp","width","18",3,"src"],[1,"d-flex","flex-column","justify-contente-center","left-content2"],[1,"text-white"],[1,"featuredvideo","m80","bannerbgcolor"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],[1,"blocklist","section1"],[1,"fontsize12","text-white","semibold","mb-4"],[1,"col-md-12"],["class","col custom-col mb-lg-5 mb-md-4 mb-4",4,"ngFor","ngForOf"],["id","services1","data-scroll-nav","0",1,"services","mtrem8","mbrem8"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","order-sm-1","order-1"],[1,"img-block"],["alt","",1,"w-100",3,"src"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-5","col-lg-5","mx-auto","col-md-6","order-sm-2","order-2"],[1,"d-flex","flex-column","h-100","service-content"],[1,"fontsize12","semibold","mb-md-0","mb-sm-2","mb-2"],[1,"size32","mb-1"],[1,"size18"],[1,"size18","textcolor3","serwidth"],[1,"points"],[1,"fontsize12","mb-0"],[1,"lufgabold"],[1,"lufgamedium"],[1,"position-relative"],[1,"float-start","cwd243"],["routerLink","/branding",1,"cstbtn","cstbtn128",3,"click"],[1,"text","text128"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"],["id","services2","data-scroll-nav","1",1,"services","mtrem8","mbrem8"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-5","col-lg-5","mx-auto","col-md-6","order-md-1","order-sm-2","order-2"],[1,"d-flex","flex-column","justify-content-between","h-100","service-content","ps-md-0","ps-sm-auto","ps-auto"],[1,"float-start","cwd243","cwd2432"],["routerLink","/graphics",1,"cstbtn","cstbtn128",3,"click"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","offset-xl-1","offset-lg-1","order-md-2","order-sm-1","order-1"],[1,"mask"],["alt","",3,"src"],["id","services3","data-scroll-nav","2",1,"services","mtrem8","mbrem8"],[1,"d-flex","flex-column","justify-content-between","h-100","service-content"],[1,"float-start","cwd243","cwd2433"],["routerLink","/website",1,"cstbtn","cstbtn128",3,"click"],["id","services4","data-scroll-nav","3",1,"services","mtrem8","mbrem8"],[1,"size32"],[1,"float-start","cwd243","cwd2434"],["routerLink","/ecommerce",1,"cstbtn","cstbtn128",3,"click"],[1,"col","custom-col","mb-lg-5","mb-md-4","mb-4"],["href","javascript:void(0)"],["alt","","data-aos","zoom-in","data-aos-duration","1500","data-aos-delay","50",1,"img-fluid",3,"src"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),ue(4,"img",4),C(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"h1",9),I(10,"We don't do "),E(),C(11,"h1",10),I(12,"We don't do"),E(),ue(13,"div",11),E(),C(14,"h1",12),I(15,"one size fits all"),E(),C(16,"h1",13),I(17,"one size fits all"),E()()()(),C(18,"div",14)(19,"ul",15)(20,"li")(21,"a",16),ue(22,"img",17),E()(),C(23,"li")(24,"a",18),ue(25,"img",19),E()(),C(26,"li")(27,"a",20),ue(28,"img",17),E()(),C(29,"li")(30,"a",21),ue(31,"img",22),E()()(),C(32,"div",23)(33,"p",24),I(34,"Our services are tailored to "),E(),C(35,"p",24),I(36,"the needs of your brand."),E()()()()()()(),C(37,"section",25)(38,"div",1)(39,"div",26)(40,"div",27)(41,"h6",28),I(42,"OUR CLIENTS INCLUDE\u2026"),E(),C(43,"div",2),$o(44),C(45,"div",29)(46,"div",2),mt(47,PQe,3,1,"div",30),E()(),Ko(),E()()()()(),C(48,"section",31)(49,"div",1)(50,"div",2)(51,"div",3)(52,"div",2)(53,"div",32)(54,"div",33),ue(55,"img",34),E()(),C(56,"div",35)(57,"div",36)(58,"div")(59,"h6",37),I(60,"Our Services"),E(),C(61,"h1",38),I(62,"Premium Branding"),E(),C(63,"p",39),I(64,"Your Brand, Your Story, Perfectly Told"),E()(),C(65,"p",40),I(66,"Your brand is more than a logo\u2014it\u2019s a promise. With designs built on the timeless principles of the golden ratio, we help businesses create a story that feels both balanced and bold."),E(),C(67,"div",41)(68,"p",42)(69,"span",43),I(70," DESIGNING AND CONCEPTUALISING: "),E(),C(71,"span",44),I(72," Custom Logo | Brand Guidelines | Brand Aesthetics | Luxury Packaging"),E()()(),C(73,"div",45)(74,"div",46)(75,"p")(76,"a",47),zt("click",function(){return s.navigateToLink("branding")}),C(77,"span",48),I(78,"Explore Branding Packages"),E(),C(79,"span",49),ue(80,"i",50),E()()()()()()()()()()()(),C(81,"section",51)(82,"div",1)(83,"div",2)(84,"div",3)(85,"div",2)(86,"div",52)(87,"div",53)(88,"div")(89,"h1",38),I(90,"High-End Graphic Design"),E()(),C(91,"p",40),I(92,"WNeed fresh designs every month? Our subscription plan gives you creative power on demand\u2014because good design should always be within reach."),E(),C(93,"div",41)(94,"h5",42)(95,"span",43),I(96," DESIGNING:"),E(),C(97,"span",44),I(98," Catalog | Company Profile | Pitch-deck | Social Media Theme | Event Theme | Marketing Materials"),E()()(),C(99,"div",45)(100,"div",54)(101,"p")(102,"a",55),zt("click",function(){return s.navigateToLink("graphics")}),C(103,"span",48),I(104,"Explore plan"),E(),C(105,"span",49),ue(106,"i",50),E()()()()()()(),C(107,"div",56)(108,"div",33),ue(109,"img",34),E()()()()()(),C(110,"div",57),ue(111,"img",58),E()(),C(112,"section",59)(113,"div",1)(114,"div",2)(115,"div",3)(116,"div",2)(117,"div",32)(118,"div",33),ue(119,"img",34),E()(),C(120,"div",35)(121,"div",60)(122,"div")(123,"h1",38),I(124,"Highly-Impactful Website"),E(),C(125,"p",39),I(126,"Designs That Perform On Every Screen"),E()(),C(127,"p",40),I(128,"We don\u2019t build websites; we create experiences. Our custom-built websites are fast, functional, and perfectly aligned with your audience and business goals \u2014because we don\u2019t believe in templates. "),E(),C(129,"div",41)(130,"h5",42)(131,"span",43),I(132,"DESIGN AND DEVELOPMENT:"),E(),C(133,"span",44),I(134," Static Website | Dynamic Website | Api Integration "),E()()(),C(135,"div",45)(136,"div",61)(137,"p")(138,"a",62),zt("click",function(){return s.navigateToLink("website")}),C(139,"span",48),I(140,"Explore website service"),E(),C(141,"span",49),ue(142,"i",50),E()()()()()()()()()()()(),C(143,"section",63)(144,"div",1)(145,"div",2)(146,"div",3)(147,"div",2)(148,"div",52)(149,"div",53)(150,"div")(151,"h1",64),I(152,"Highly-Converting Ecommerce Website"),E(),C(153,"p",39),I(154,"Sell Globally With Custom Ecommerce Solutions"),E()(),C(155,"p",40),I(156," A beautiful online store isn\u2019t enough\u2014you need one that converts. Whether it\u2019s Magento, Shopify, or Node.js, we create custom eCommerce platforms that perform, scale, and grow with you. "),E(),C(157,"div",41)(158,"h5",42)(159,"span",43),I(160," DESIGNING AND DEVELOPMENT: "),E(),C(161,"span",44),I(162," Shopify | Custom Magento 2.0+ | Custom eCommerce website on NodeJS & Angular "),E()()(),C(163,"div",45)(164,"div",65)(165,"p")(166,"a",66),zt("click",function(){return s.navigateToLink("ecommerce")}),C(167,"span",48),I(168," Explore E-Commerce Solutions "),E(),C(169,"span",49),ue(170,"i",50),E()()()()()()(),C(171,"div",56)(172,"div",33),ue(173,"img",34),E()()()()()()(),ue(174,"app-testimonial")(175,"app-faq-component")),2&r&&(ce(4),Ue("src","",s.baseUrl,"/img/three-d-objects/services.png",De),ce(18),Ue("src","",s.baseUrl,"/img/home/social-media/instagram-white.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/social-media/facebook-white.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/social-media/linkedin-white.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/whatsapp-white.svg",De),ce(16),ot("ngForOf",s.filteredClients),ce(8),Ue("src","",s.baseUrl,"/img/services/branding.jpg",De),ce(54),Ue("src","",s.baseUrl,"/img/services/graphic.jpg",De),ce(2),Ue("src","",s.baseUrl,"/img/home/mask2.svg",De),ce(8),Ue("src","",s.baseUrl,"/img/services/impactfull.jpg",De),ce(54),Ue("src","",s.baseUrl,"/img/services/ecommerce.jpg",De))},dependencies:[Ba,xy,lx,_1],styles:['@font-face{font-family:lufga-light;src:url(LufgaExtraLight.4a0912d6f92f8b1f.ttf) format("truetype")}@font-face{font-family:lufga-regular;src:url(LufgaRegular.2286c86967c2d7de.ttf) format("truetype")}@font-face{font-family:lufga-medium;src:url(LufgaMedium.20363385cf20657c.ttf) format("truetype")}@font-face{font-family:lufga-semibild;src:url(LufgaSemiBold.13c6156ab43a2d33.ttf) format("truetype")}@font-face{font-family:lufga-bold;src:url(LufgaBold.a4c85edd49fd93b8.ttf) format("truetype")}.lufgamedium[_ngcontent-%COMP%]{font-family:lufga-medium}.lufgabold[_ngcontent-%COMP%]{font-family:lufga-bold}@media (max-width: 991px){section[_ngcontent-%COMP%]{padding-bottom:0}}.bannerbgcolor[_ngcontent-%COMP%], .service-banner[_ngcontent-%COMP%]{background-color:#1d1d1f}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:86vh!important}}.img-globe[_ngcontent-%COMP%]{position:absolute;right:11rem;top:30%;width:500px}@media (max-width: 1920px){.img-globe[_ngcontent-%COMP%]{right:6rem;width:400px;top:28%}}@media (max-width: 1440px){.img-globe[_ngcontent-%COMP%]{width:300px;top:33%}}@media (max-width: 1366px){.img-globe[_ngcontent-%COMP%]{width:290px;top:30%}}@media (max-width: 1199px){.img-globe[_ngcontent-%COMP%]{right:3%}}@media (max-width: 991px){.img-globe[_ngcontent-%COMP%]{display:none;width:100%;top:18%;opacity:.5;object-fit:cover;left:0;right:0}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{width:592px;padding:50px 10px;justify-content:space-around}@media (max-width: 1440px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{width:100%;padding:0}}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:20px 0}}@media (max-width: 1199px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:10px 0}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:15px 0}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:0}}@media (max-width: 767px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:20px 0}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1d1d1f;margin-top:0}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .fontsize18.textcolor3[_ngcontent-%COMP%]{font-weight:500}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .fontsize18.textcolor3[_ngcontent-%COMP%]{margin-top:15px 0px}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .size18.textcolor3[_ngcontent-%COMP%]{margin-top:15px}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1.size32[_ngcontent-%COMP%]{font-weight:500}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p.fontsize12.semibold[_ngcontent-%COMP%]{margin-bottom:15px}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#1d1d1f;line-height:29px}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:24px}}@media (max-width: 1199px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:18px}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#1d1d1f}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{font-weight:600;color:#1d1d1f;cursor:pointer}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:focus{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{margin-bottom:5rem}@media (max-width: 1399px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{margin-bottom:2rem}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{margin:15px 0}}@media (max-width: 575px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{margin:20px 0}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]   .fontsize12[_ngcontent-%COMP%]{letter-spacing:0;font-size:10px!important}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .position-relative[_ngcontent-%COMP%]{margin-top:20px}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .serwidth[_ngcontent-%COMP%]{width:499px;margin:30px 0}@media (max-width: 1399px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .serwidth[_ngcontent-%COMP%]{width:100%;margin:20px 0}}.services[_ngcontent-%COMP%]   .img-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 90px 62px -42px #00000040}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .img-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:30px}}.color1[_ngcontent-%COMP%]{color:#da9777}.barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:42px!important}@media (max-width: 1024px){.barcelony[_ngcontent-%COMP%]{font-size:36px!important}}@media (max-width: 800px){.barcelony[_ngcontent-%COMP%]{font-size:28px!important}}.p32[_ngcontent-%COMP%]{font-size:32px}@media (max-width: 600px){.p32[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 480px){.p32[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]{font-weight:700;color:#101010}@media (max-width: 1199px){.head[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 991px){.head[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px;display:inline-block;top:6px}@media (max-width: 1199px){.head[_ngcontent-%COMP%]:before{left:0}}@media (max-width: 991px){.head[_ngcontent-%COMP%]:before{height:24px;width:4px}}section.bg-black[_ngcontent-%COMP%]{padding:80px 0;background:#000}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]{padding:50px 0}}@media (max-width: 575px){section.bg-black[_ngcontent-%COMP%]{padding:50px 15px}}section.bg-black[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{color:#fff}section.bg-black[_ngcontent-%COMP%]   .cap[_ngcontent-%COMP%]{color:#fff}section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:40px;font-weight:600}@media (max-width: 1199px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 991px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:32px}}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:28px}}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:24px}@media (max-width: 1199px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px}}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.line[_ngcontent-%COMP%]{height:1px;background:#707070;width:65%;margin:0 auto;position:absolute;left:0;right:0;z-index:1}@media (max-width: 767px){.line[_ngcontent-%COMP%]{width:80%}}#lottie[_ngcontent-%COMP%]{display:block;overflow:hidden;transform:translateZ(0);text-align:center;opacity:1;position:relative;width:16%}@media (max-width: 991px){#lottie[_ngcontent-%COMP%]{top:-1.5rem}}@media (max-width: 480px){#lottie[_ngcontent-%COMP%]{top:-.5rem;width:20%}}.p28[_ngcontent-%COMP%]{font-size:28px}@media (max-width: 1199px){.p28[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.p28[_ngcontent-%COMP%]{font-size:20px}}.csm[_ngcontent-%COMP%]{margin-top:-15px!important}@media (max-width: 575px){.csm[_ngcontent-%COMP%]{margin-top:0!important}}.banner-left-content[_ngcontent-%COMP%]{display:flex;width:393px;justify-content:start;align-items:center;left:auto!important;bottom:3%!important;margin-left:-7rem}@media (max-width: 1440px){.banner-left-content[_ngcontent-%COMP%]{margin-left:-3rem}}@media (max-width: 991px){.banner-left-content[_ngcontent-%COMP%]{margin-left:-2rem}}@media (max-width: 480px){.banner-left-content[_ngcontent-%COMP%]{margin-left:0rem}.banner-left-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px;height:12px}}.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:18px;line-height:normal;font-weight:400}@media (max-width: 1199px){.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 767px){.banner-left-content[_ngcontent-%COMP%]{position:relative!important;left:0%!important;bottom:7rem!important}}@media (max-width: 480px){.banner-left-content[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 380px){.banner-left-content[_ngcontent-%COMP%]{width:315px;bottom:3rem!important}}@media (max-width: 345px){.banner-left-content[_ngcontent-%COMP%]{width:auto;padding:0}}.banner-left-content[_ngcontent-%COMP%]   p.text-color[_ngcontent-%COMP%]{font-weight:600}.banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:6rem}@media (max-width: 1440px){.banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:2rem}}@media (max-width: 991px){.banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:1rem}}.down-arrow[_ngcontent-%COMP%]{bottom:9%}@media (max-width: 1366px){.down-arrow[_ngcontent-%COMP%]{bottom:13%}}@media (max-width: 767px){.down-arrow[_ngcontent-%COMP%]{bottom:auto;margin-top:-50px}}@media (max-width: 480px){.down-arrow[_ngcontent-%COMP%]{margin-top:-30px}}@media (max-width: 480px){.down-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}}.cstheight[_ngcontent-%COMP%]{height:378px;display:flex;flex-direction:column;justify-content:center}.cstvideo[_ngcontent-%COMP%]{position:relative;z-index:1;margin-top:-15rem}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]   #aboutvideo[_ngcontent-%COMP%]{height:100%}}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]{position:relative}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;width:100%;top:0}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]{transition:.3s ease-in-out;display:flex;opacity:0;position:absolute;bottom:0;left:0;right:0;width:100%;padding:20px;height:100%;background-color:#00000080;margin:0 auto;flex-direction:column;justify-content:center;align-items:center}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:54px;height:54px;object-fit:contain}@media (max-width: 768px){.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:44px}}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]:hover   .text-block[_ngcontent-%COMP%]{display:flex;cursor:pointer;justify-content:center;align-items:center;opacity:1}.custom-col[_ngcontent-%COMP%]{flex:0 0 20%;max-width:20%;text-align:center}.custom-col[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;display:block;padding:15px;transition:all .5s;cursor:default!important}.custom-col[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{border-color:gray}.custom-col[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:57px;cursor:default!important}@media (max-width: 1199px){.custom-col[_ngcontent-%COMP%]{flex:0 0 30%;max-width:30%}}@media (max-width: 768px){.custom-col[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}}@media (max-width: 576px){.custom-col[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}}.cwd243[_ngcontent-%COMP%]{position:relative;width:243px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]{color:#1d1d1f!important;font-weight:600;display:flex;justify-content:space-between!important;align-items:center}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{position:relative;right:auto!important;width:auto;transition:.5s all ease-in-out}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]{letter-spacing:1px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{border:1px dashed #6e6e73;height:75px;width:75px;display:flex;justify-content:center;align-items:center;position:absolute;border-radius:50px;transition:.5s all ease-in-out;right:-4px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{height:60px;width:60px;right:5px}}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{right:-10px;height:50px;width:50px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{height:45px;width:45px}}.footer-collapse[_ngcontent-%COMP%]{padding:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:30px 20px}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none;border-bottom:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]:hover{outline:none;color:#1d1d1f!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){color:#1d1d1f!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;border-radius:0;font-size:20px;font-weight:500;display:flex;align-items:center}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:focus{outline:none;color:#6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:active{color:#6e6e73;outline:none}@media (max-width: 1366px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.brdtp[_ngcontent-%COMP%]{border-top:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{background-image:url(plus.2523ff04f32f499f.svg);margin-top:5px;margin-bottom:5px;color:#dadade}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{font-size:16px;font-weight:400}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.bannerdrk[_ngcontent-%COMP%]{background-color:#000}.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:52px}@media (max-width: 1399px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:42px}}@media (max-width: 1199px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px}}@media (max-width: 1024px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}}.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:32px}@media (max-width: 1399px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1199px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}}.cwd2432[_ngcontent-%COMP%]{width:135px}.cwd2433[_ngcontent-%COMP%]{width:215px}.cwd2434[_ngcontent-%COMP%]{width:270px}#services1[_ngcontent-%COMP%], #services2[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:relative;z-index:1}.mask[_ngcontent-%COMP%]{position:relative;width:100%;display:block}.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:0;width:30%;bottom:10rem}@media (max-width: 991px){.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:12rem}}@media (max-width: 767px){.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30%}}@media (max-width: 600px){.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:20rem;width:75%}}@media (max-width: 480px){.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:0;width:100%}}.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width: 575px){.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;margin:0 auto}}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.backeeedf0[_ngcontent-%COMP%]{overflow:visible!important}.faqsection[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]{position:relative;width:100%;display:block}.faqsection[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;right:0;left:auto;width:21%;bottom:0}@media (max-width: 991px){.faqsection[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:12rem}}@media (max-width: 767px){.faqsection[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30%}}@media (max-width: 600px){.faqsection[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:20rem;width:75%}}@media (max-width: 480px){.faqsection[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:0;width:100%}}.blur[_ngcontent-%COMP%]{filter:blur(5px);-webkit-filter:blur(5px);-moz-filter:blur(5px);-o-filter:blur(5px);-ms-filter:blur(5px)}']}),e})();var EQe=_(5226),$d=_.n(EQe);let YT=(()=>{const t=class{constructor(i){this.http=i,this.addReferral=r=>this.http.post(en_backendUrl+"/api/referral/referraladd",r,{observe:"response"}).pipe((0,us.K)(o=>(0,bs._)(o)))}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Jt(ac))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),b1=(()=>{const t=class{constructor(i){this.http=i,this.stripePayments=r=>this.http.post(en_backendUrl+"/api/payment/stripe-payments",r,{observe:"response"}).pipe((0,us.K)(o=>(0,bs._)(o))),this.savePaymentSuccess=r=>this.http.post(en_backendUrl+"/api/payment/save-stripe-payments",r,{observe:"response"}).pipe((0,us.K)(o=>(0,bs._)(o))),this.stripeSubscribe=r=>this.http.post(en_backendUrl+"/api/payment/stripe-subscribe",r,{observe:"response"}).pipe((0,us.K)(o=>(0,bs._)(o))),this.stripeSubscribeCancel=r=>this.http.post(en_backendUrl+"/api/payment/subscribe_cancel",r,{observe:"response"}).pipe((0,us.K)(o=>(0,bs._)(o))),this.stripeSubscribePause=r=>this.http.post(en_backendUrl+"/api/payment/subscribe_pause",r,{observe:"response"}).pipe((0,us.K)(o=>(0,bs._)(o))),this.stripeSubscribeResume=r=>this.http.post(en_backendUrl+"/api/payment/subscribe_resume",r,{observe:"response"}).pipe((0,us.K)(o=>(0,bs._)(o)))}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Jt(ac))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const OQe=["myVideo"],AQe=["canvas"];function TQe(e,t){if(1&e){const n=Xr();C(0,"div",116)(1,"div",153)(2,"a",154)(3,"img",155),zt("mouseenter",function(){const s=Zn(n).index;return ti(_t().onMouseEnter(s))})("mouseleave",function(){return Zn(n),ti(_t().onMouseLeave())}),E(),C(4,"div",156)(5,"p",157),I(6),E(),C(7,"p",158),ue(8,"span",159),E()()()()()}if(2&e){const n=t.$implicit,i=t.index,r=_t();ce(2),bd("href",n.link,De),ce(1),Zu("galleryimg",i,""),Uc("src","",r.imagepath,"",n.image,"",De),ce(3),La(n.name),ce(2),ot("innerHTML",n.desc,yd)}}function DQe(e,t){if(1&e&&(C(0,"a",161),ue(1,"img",162),C(2,"div",156)(3,"p",157),I(4),E(),C(5,"p",158),ue(6,"span",159),E()()()),2&e){const n=_t().$implicit,i=_t();bd("href",n.link,De),ce(1),Uc("src","",i.imagepath,"",n.project_images[0],"",De),ce(3),La(n.name),ce(2),ot("innerHTML",n.desc,yd)}}function IQe(e,t){if(1&e&&($o(0),mt(1,DQe,7,5,"ng-template",160),Ko()),2&e){const n=t.$implicit,i=t.index;ce(1),ot("id",n+i)}}function RQe(e,t){if(1&e&&(C(0,"div",163)(1,"a",164),ue(2,"img",165),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/dnour.svg",De)}}function kQe(e,t){if(1&e&&(C(0,"div",163)(1,"a",164),ue(2,"img",165),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/crystal.svg",De)}}function NQe(e,t){if(1&e&&(C(0,"div",163)(1,"a",164),ue(2,"img",165),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/miniaar.svg",De)}}function LQe(e,t){if(1&e&&(C(0,"div",163)(1,"a",164),ue(2,"img",165),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/bni.svg",De)}}function FQe(e,t){if(1&e&&(C(0,"div",163)(1,"a",164),ue(2,"img",165),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/angle.svg",De)}}function BQe(e,t){if(1&e&&(C(0,"div",163)(1,"a",164),ue(2,"img",165),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/pakhis.svg",De)}}function zQe(e,t){if(1&e&&(C(0,"div",163)(1,"a",164),ue(2,"img",165),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/drminnie.svg",De)}}function UQe(e,t){if(1&e&&(C(0,"div",163)(1,"a",164),ue(2,"img",165),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/veddentta.svg",De)}}function VQe(e,t){if(1&e&&(C(0,"div",163)(1,"a",164),ue(2,"img",165),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/autokoorosh.svg",De)}}function jQe(e,t){if(1&e&&(C(0,"div",163)(1,"a",164),ue(2,"img",165),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/fractal.svg",De)}}function HQe(e,t){if(1&e&&(C(0,"div",163)(1,"a",164),ue(2,"img",165),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/aetrio.svg",De)}}function GQe(e,t){if(1&e&&(C(0,"div",163)(1,"a",164),ue(2,"img",165),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/wrae.svg",De)}}function WQe(e,t){if(1&e&&(C(0,"div",163)(1,"a",164),ue(2,"img",165),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/beyou.svg",De)}}function qQe(e,t){1&e&&(C(0,"div",174)(1,"div"),I(2," Name is required. "),E()())}function XQe(e,t){if(1&e&&(C(0,"div",174)(1,"div"),I(2),E()()),2&e){const n=_t(2);ce(2),hs(" ",n.hasEmailError("payment","required")," ")}}function YQe(e,t){if(1&e){const n=Xr();C(0,"div",130)(1,"h5",166),I(2),E(),C(3,"button",132),zt("click",function(){return ti(Zn(n).$implicit.dismiss("Cross click"))}),C(4,"span",133),I(5," \xd7 "),E()()(),C(6,"div",134)(7,"div",167)(8,"div",1)(9,"div",2)(10,"div",168)(11,"div",169)(12,"form",170),zt("ngSubmit",function(){return Zn(n),ti(_t().submitPayment())}),C(13,"div",136)(14,"div",137),ue(15,"input",171),C(16,"label",139),I(17,"What's your name?"),E(),mt(18,qQe,3,0,"div",140),E(),C(19,"div",137),ue(20,"input",172),C(21,"label",139),I(22,"What\u2019s your e-mail?"),E(),mt(23,XQe,3,1,"div",140),E(),C(24,"div",146)(25,"div",147),ue(26,"input",173),E(),C(27,"div",149)(28,"button",150),zt("click",function(){return Zn(n),ti(_t().closePopUp())}),I(29,"Cancel"),E()()()()()()()()()()()}if(2&e){const n=_t();ce(2),hs(" Complete Your Payment - ",n.paymentData.name," "),ce(10),ot("formGroup",n.paymentForm),ce(6),ot("ngIf",n.submitted&&n.hasError("name","required")),ce(5),ot("ngIf",n.submitted&&n.hasEmailError("payment","required"))}}function $Qe(e,t){1&e&&(C(0,"div",174)(1,"div"),I(2," Your Name is required. "),E()())}function KQe(e,t){if(1&e&&(C(0,"div",174)(1,"div"),I(2),E()()),2&e){const n=_t();ce(2),hs(" ",n.hasEmailError("referrer_email","required")," ")}}function ZQe(e,t){1&e&&(C(0,"div",174)(1,"div"),I(2," Your Contact Number is required. "),E()())}function QQe(e,t){1&e&&(C(0,"div",174)(1,"div"),I(2," Your Friend\u2019s Name is required. "),E()())}function JQe(e,t){if(1&e&&(C(0,"div",174)(1,"div"),I(2),E()()),2&e){const n=_t();ce(2),hs(" ",n.hasEmailError("referred_email","required")," ")}}function eJe(e,t){1&e&&(C(0,"div",174)(1,"div"),I(2," Your Contact Number is required. "),E()())}function tJe(e,t){if(1&e&&(C(0,"div",175),I(1),E()),2&e){const n=_t();ce(1),hs(" ",n.errorMessage," ")}}function nJe(e,t){1&e&&(C(0,"div",176),I(1," Sending your message, please wait... "),E())}function iJe(e,t){1&e&&(C(0,"div",175),I(1," Referrer and referred Contact Number cannot be the same "),E())}function rJe(e,t){1&e&&(C(0,"div",175),I(1," Referrer and referred emails cannot be the same "),E())}const sJe=function(e){return{width:e}};let oJe=(()=>{const t=class{onScroll(i){const r=window.scrollY||document.documentElement.scrollTop;this.sectionWidth=Math.min(100,50+r/10)}constructor(i,r,s,o,a,l,c,d,h,u,p,m,v){this.renderer=i,this._platformId=r,this.referralService=s,this.pageservice=o,this.metaTagService=a,this.titleService=l,this.splineThreeService=c,this.formBuilder=d,this.http=h,this.projectservice=u,this.modalService=p,this.activeModal=m,this.payementservice=v,this.currentPage=1,this.allprojects=[],this.currentLimit=20,this.recentoptions={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],margin:14,responsive:{0:{items:2},480:{items:2},740:{items:3},940:{items:4}},nav:!1},this.clientslider={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!1,pullDrag:!1,dots:!1,slideTransition:"linear",autoplaySpeed:3e3,autoplayTimeout:5e3,autoplayHoverPause:!0,nav:!1,center:!1,navText:['<i class="fas fa-arrow-left"></i>','<i class="fas fa-arrow-right"></i>'],margin:14,responsive:{0:{items:2},480:{items:4},740:{items:4},940:{items:7}}},this.desktopslider={loop:!1,rewind:!0,autoplay:!0,autoplayTimeout:1500,center:!0,dots:!0,autoHeight:!0,autoWidth:!0,smartSpeed:1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.sectionWidth=10,this.closeResult="",this.modalReference=null,this.submitted=!1,this.successMessage="",this.errorMessage="",this.isSubmitting=!1,this.isLoading=!1,this.isContactSame=!1,this.isEmailSame=!1,this.hasError=(g,b)=>this.paymentForm.controls[g].hasError(b),this.hasEmailError=(g,b)=>"referrer_email"==g?""==this.referralForm.controls.referrer_email.value?"Email is required":"INVALID"==this.referralForm.controls.referrer_email.status?"Invalid Email":this.referralForm.controls.referrer_email.hasError(b):"referred_email"==g?""==this.referralForm.controls.referred_email.value?"Email is required":"INVALID"==this.referralForm.controls.referred_email.status?"Invalid Email":this.referralForm.controls.referred_email.hasError(b):""==this.paymentForm.controls.email.value?"Email is required":"INVALID"==this.paymentForm.controls.email.status?"Invalid Email":this.paymentForm.controls.email.hasError(b),this.hasReferralError=(g,b)=>this.referralForm.controls[g].hasError(b),this.tabTitle="Try with us",this.baseUrl=en_baseUrl+"/assets",this.imagepath=en_backendUrl+"/public/",this.get_PageMeta(),this.get_AllProjects()}ngOnInit(){setTimeout(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},500),this.paymentForm=this.formBuilder.group({name:["",Ei.required],email:["",[Ei.required,Ei.email,Ei.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]]}),this.referralForm=this.formBuilder.group({referrer_name:["",Ei.required],referrer_email:["",[Ei.required,Ei.email,Ei.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],referrer_phone:["",Ei.required],referred_name:["",Ei.required],referred_email:["",[Ei.required,Ei.email,Ei.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],referred_phone:["",Ei.required],referred_message:[""],campaign_id:[""],campaign_source:[""]})}get_PageMeta(){this.pageservice.getpageWithName({pageName:"home"}).subscribe(r=>{200==r.body.code&&(this.titleService.setTitle(r?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:r?.body.result.meta_description},{name:"keywords",content:r?.body.result.meta_keywords}]))})}get_AllProjects(){const r=["674edde2f034ad6b3ba333e1","674edf39f034ad6b3ba33406","674ee590f034ad6b3ba33422","674ed7e8f034ad6b3ba33396"];this.projectservice.getAllProjects({limit:this.currentLimit,page:this.currentPage}).subscribe(s=>{if(200===s.code&&s.result&&s.result.length>0){const o=s.result.filter(a=>r.includes(a._id));this.allprojects=[...o]}})}loadMore(){this.currentLimit=this.currentLimit+4,this.get_AllProjects()}stopSlider(){this.sliderInterval&&clearInterval(this.sliderInterval)}onMouseLeave(){this.sliderInterval&&(clearInterval(this.sliderInterval),console.log("Slider stopped"))}onMouseEnter(i){let s=this.allprojects[i].project_images,o=this.imagepath,a=document.getElementsByClassName("galleryimg"+i);this.sliderInterval=setInterval(()=>{$(a).each(function(l){let c=s[(l+Math.floor(Math.random()*s.length))%s.length];$(a).attr("src",o+c)})},900)}openPopup(i){this.modalReference=this.modalService.open(i,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass",size:"lg",backdrop:"static"}).result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}getDismissReason(i){return i===cc.ESC?"by pressing ESC":i===cc.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${i}`}getStripPayemts(i,r,s){this.paymentData={name:i,amount:r},this.modalReference=this.modalService.open(s,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass2"}).result.then(a=>{this.closeResult=`Closed with: ${a}`},a=>{this.closeResult=`Dismissed ${this.getDismissReason(a)}`})}submitPayment(){this.submitted=!0,!this.paymentForm.invalid&&this.paymentData&&(this.paymentData.email=this.paymentForm.value.email,this.paymentData.customer_name=this.paymentForm.value.name,this.paymentData.base_url=en_baseUrl,this.payementservice.stripePayments(this.paymentData).subscribe(i=>{200==i.body.code&&(localStorage.setItem("stripe-payment-user",JSON.stringify(this.paymentData)),this.paymentForm.reset(),window.open(i.body.url,"_blank"),this.modalService.dismissAll())}))}closePopUp(){this.modalService.dismissAll()}changeTabTitle(i){this.tabTitle=i}ngAfterViewInit(){const i=this.videoElement.nativeElement;i.muted=!0,i.loop=!0,i.play().catch(s=>{console.log("Autoplay failed, user interaction may be required:",s)}),this.splineThreeService.initialize(this.containerRef.nativeElement,"https://prod.spline.design/lOwCHnDGwjVf9GgA/scene.splinecode")}playInFullscreenWithAudio(){const i=this.videoElement.nativeElement;i.muted=!1,i.removeAttribute("controls"),i.play().then(()=>{i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen&&i.mozRequestFullScreen()}).catch(r=>{console.log("Error entering fullscreen with audio: ",r)})}onFullscreenChange(){const i=this.videoElement.nativeElement;document.fullscreenElement===i||document.webkitFullscreenElement===i||document.msFullscreenElement===i||document.mozFullScreenElement===i?i.play().catch(r=>{console.log("Could not play in fullscreen mode:",r)}):(i.setAttribute("controls",""),i.muted=!0)}openModal(){const i=document.getElementById("contactModal");this.renderer.addClass(i,"show"),this.renderer.setStyle(i,"display","block"),this.renderer.setStyle(i,"backgroundColor","rgba(0,0,0,0.5)"),document.body.classList.add("modal-open")}closeModal(){const i=document.getElementById("contactModal");this.renderer.removeClass(i,"show"),this.renderer.setStyle(i,"display","none"),document.body.classList.remove("modal-open")}submitReferral(){if(this.submitted=!0,this.referralForm.valid){if(this.isSubmitting=!0,this.isLoading=!0,this.referralForm.value.referrer_email==this.referralForm.value.referred_email)return this.isEmailSame=!0,void(this.isLoading=!1);if(this.referralForm.value.referrer_phone==this.referralForm.value.referred_phone)return this.isContactSame=!0,void(this.isLoading=!1);this.referralForm.valid?this.referralService.addReferral(this.referralForm.value).subscribe(i=>{200==i.body.code?(console.log("Email sent successfully",i),this.successMessage="Thank you for referring your friend! We\u2019ve sent an invitation to your friend and will notify you once they join us. Stay tuned for your rewards!",this.errorMessage="",this.isSubmitting=!1,this.isLoading=!1,this.referralForm.reset(),this.submitted=!1,this.closeModal(),$d().fire({icon:"success",title:"Thank you for referring your friend! We\u2019ve sent an invitation to your friend and will notify you once they join us. Stay tuned for your rewards!",showConfirmButton:!0})):400==i.body.code&&(this.errorMessage=i.body.message,this.isSubmitting=!1,this.isLoading=!1,setTimeout(()=>{this.errorMessage="",this.submitted=!1},5e3))},i=>{console.error("Error sending email",i),this.errorMessage="Failed to send your message. Please try again later.",this.isSubmitting=!1,this.isLoading=!1,setTimeout(()=>{this.errorMessage=""},5e3)}):(this.errorMessage="Please fill in all required fields.",this.isSubmitting=!1,this.isLoading=!1,setTimeout(()=>{this.errorMessage=""},3e3))}}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(ga),Ne(uh),Ne(YT),Ne(tu),Ne(wd),Ne(Md),Ne(v1),Ne(V0),Ne(ac),Ne(y1),Ne(J0),Ne(mf),Ne(b1))},t.\u0275cmp=qi({type:t,selectors:[["app-brading"]],viewQuery:function(r,s){if(1&r&&(bl(OQe,5),bl(AQe,7)),2&r){let o;Yr(o=$r())&&(s.videoElement=o.first),Yr(o=$r())&&(s.containerRef=o.first)}},hostBindings:function(r,s){1&r&&zt("fullscreenchange",function(a){return s.onFullscreenChange(a)},0,M0)("scroll",function(a){return s.onScroll(a)},!1,Sm)},decls:432,vars:30,consts:[[1,"cbanner","bannerbgcolor"],[1,"container"],[1,"row"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],["alt","",1,"img-globe","floatimg",3,"src"],[1,"banner","vh-100"],[1,"d-flex","flex-column","justify-content-center","h-100","align-items-start"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"contentbl"],[1,"h1","size90"],[1,"barcely"],[1,"position-absolute","banner-left-content","content-left"],[1,"d-flex","flex-column","justify-contente-arround","p-0","float-start",2,"height","130px","list-style","none","justify-content","space-between"],["href","https://www.instagram.com/pixtar.ae/","target","_blank",1,""],["alt","","width","15",3,"src"],["href","https://www.facebook.com/pixtar.ae/","target","_blank",1,""],["alt","","width","10",3,"src"],["href","https://www.linkedin.com/company/pixtar-ae/","target","_blank",1,""],["href","https://wa.me/+971527930781","target","_blank",1,"whatsapp-icon2","slideUpReturn","tabmob"],["alt","whatsapp","width","18",3,"src"],[1,"d-flex","flex-column","justify-contente-center","left-content2"],[1,"position-absolute","start-50","translate-middle","down-arrow"],["href","/branding#packages",1,"cstbtn"],[1,"text"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"bannerbgcolor","cstheight"],[1,"cstvideo"],[1,"container-fluid"],[1,"col-md-12","col-sm-11","col-11","mx-auto",3,"ngStyle"],[1,"video-frame"],["width","100%","muted","","autoplay","",2,"cursor","pointer",3,"click"],["myVideo",""],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],[1,"aboutbrand","mrem55"],[1,"col-xxl-12","col-xl-11","col-md-11","col-sm-11","col-11","mx-auto"],[1,"about-brand"],[1,"size53","weight300"],[1,"textcolor1"],[1,"barcy","text-color"],[1,"textcolor2"],[1,"topdist","bannerdrk","hard-work"],[1,"container","d-none","d-sm-none","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],[1,"d-flex","justify-content-start","align-items-center","cmargin"],[1,"text-white","h1"],[1,"line"],["class","col-md-6",4,"ngFor","ngForOf"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"customslider","d-block","d-sm-block","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],[1,"col-md-10","offset-md-1"],[3,"options"],[4,"ngFor","ngForOf"],[1,"section","bannerdrk","mt-md-5","mt-sm-4","mt-4"],[1,"col-md-10","m-auto"],[1,"d-flex","flex-column","justify-content-center","align-items-center","video-block"],[1,"position-relative"],[1,"float-start","cwd243"],["href","/contact",1,"cstbtn","cstbtn128","textcolor5"],[1,"text","text128","textcolor5"],[1,"section","choosesection"],[1,"choose-section"],[1,"h1","weight300","text-center"],[1,"textcolor1","size53"],[1,"mtrem5"],[1,"col-md-4"],[1,"box","text-center"],["alt","",1,"mb30",3,"src"],[1,"size18","textcolor1","weight600","p1"],[1,"size18","textcolor3","p2"],[1,"col-md-4","mt-md-0","mt-sm-4","mb-md-0","mb-sm-4","mb-4","mt-4"],[1,"section","client","backeeedf0"],[1,"logos"],[1,"fontsize12","mb-0","semibold"],["carouselSlide",""],[1,"section","packages","pt-0","backeeedf0"],[1,"col-md-6","col-sm-11","col-11","mx-auto"],[1,"packages-section","mbrem5"],[1,"wght500","text-center","mb-3","mt-0"],[1,"size24","textcolor2","text-center"],["id","packages",1,"col-lg-11","col-md-10","col-sm-11","col-11","mx-auto"],["packages",""],[1,"row","justify-content-center"],[1,"col-xxl-5","col-xl-5","col-lg-8","col-md-10"],[1,"card","bgblk"],[1,"card-body"],[1,"brd"],[1,"d-flex"],[1,"icons"],[1,"circle1","pulse"],[1,"circle2"],[1,"size16"],[1,"textcolor3","size90"],[1,"size90","weight700","text-white","mt-0","mb-4"],[1,"box","mb-2"],[1,"text-white","weight500","mb-2","mt-0","size20"],[1,"size16","textcolor3"],[1,"d-block"],["href","/contact",1,"cstbtn"],[1,"box"],[1,"cstbtn",3,"click"],[1,"col-xxl-7","col-xl-7","col-lg-8","col-md-10","mt-xl-0","mt-lg-5","mt-md-5","mt-sm-5","mt-5"],[1,"card","shadow",2,"max-width","600px"],[1,"text-start","py-3","weight500","size53"],["id","nav-tab","role","tablist",1,"nav","nav-tabs","mb-3"],["id","nav-home-tab","data-bs-toggle","tab","data-bs-target","#nav-home","type","button","role","tab","aria-controls","nav-home","aria-selected","true",1,"nav-link","active","weight500",3,"click"],["id","nav-profile-tab","data-bs-toggle","tab","data-bs-target","#nav-profile","type","button","role","tab","aria-controls","nav-profile","aria-selected","false",1,"nav-link","weight500",3,"click"],["alt","",3,"src"],["id","nav-contact-tab","data-bs-toggle","tab","data-bs-target","#nav-contact","type","button","role","tab","aria-controls","nav-contact","aria-selected","false",1,"nav-link","weight500",3,"click"],["id","nav-tabContent",1,"tab-content"],["id","nav-home","role","tabpanel","aria-labelledby","nav-home-tab",1,"tab-pane","fade","active","show"],[1,"cstprng-table"],[1,"cstprng-table-header"],[1,"cstprng-table-cost","size53","textcolor1","weight500","mt-0"],[1,"cstprng-table-about","size20","textcolor1","weight500"],[1,"divider"],[1,"cstprng-table-features"],[1,"size20","textcolor1","weight500"],[1,"col-md-6"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-start","align-items-center","border-0","p-0","mb-2"],[1,"fa","fa-check","me-2"],[1,"cstprng-table-cta","position-relative","mtrem3","started"],[1,"size14","cntlink"],["href","/contact",1,"text-decoration-underline"],["id","nav-profile","role","tabpanel","aria-labelledby","nav-profile-tab",1,"tab-pane","fade"],["id","nav-contact","role","tabpanel","aria-labelledby","nav-contact-tab",1,"tab-pane","fade"],["style","z-index: 0;"],["payments",""],["id","contactModal","tabindex","-1","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","modalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["method","post",3,"formGroup","ngSubmit"],[1,"row","mrl-0","mb-3",2,"padding","5px 5px"],[1,"form-floating","mb-3"],["type","text","name","referrer_name","autocomplete","off","formControlName","referrer_name","id","floatingInput","placeholder","your name",1,"form-control"],["for","floatingInput",1,"mt-0"],["class","error",4,"ngIf"],["type","email","name","referrer_email","autocomplete","off","formControlName","referrer_email","id","floatingInput","placeholder","email",1,"form-control"],["type","number","name","referrer_phone","autocomplete","off","formControlName","referrer_phone","id","floatingInput","placeholder","name","min","0",1,"form-control"],["type","text","name","referred_name","autocomplete","off","formControlName","referred_name","id","floatingInput","placeholder","name",1,"form-control"],["type","email","name","referred_email","autocomplete","off","formControlName","referred_email","id","floatingInput","placeholder","email",1,"form-control"],["type","number","name","referred_phone","autocomplete","off","formControlName","referred_phone","id","floatingInput","placeholder","name","min","0",1,"form-control"],[1,"d-flex","justify-content-center","align-items-center","mt-4"],[1,"text-center","text-sm-start","me-3"],["type","submit","name","submit","value","Submit",1,"submit"],[1,"input-group1"],["type","cancel",1,"button","text-center",3,"click"],["class","alert alert-danger mt-3","role","alert",4,"ngIf"],["class","alert alert-info mt-3","role","alert",4,"ngIf"],[1,"imgblock"],["target","_blank",3,"href"],["alt","",3,"src","mouseenter","mouseleave"],[1,"box-name","text-center"],[1,"mb-0","textcolor5","h2"],[1,"textcolor4"],[3,"innerHTML"],["carouselSlide","",3,"id"],["target","_self",3,"href"],[3,"src"],[1,"team-img","position-relative","overflow-hidden"],["href","#","target","_blank","rel","noopener noreferrer"],[3,"src","alt"],["id","modal-basic-title",1,"modal-title"],["id","content"],[1,"col-md-12"],[1,""],["method","post","novalidate","",3,"formGroup","ngSubmit"],["type","text","name","name","autocomplete","off","formControlName","name","id","floatingInput","placeholder","name",1,"form-control"],["type","email","name","email","autocomplete","off","formControlName","email","id","floatingInput","placeholder","email",1,"form-control"],["type","submit","name","submit","value","Pay Now",1,"submit"],[1,"error"],["role","alert",1,"alert","alert-danger","mt-3"],["role","alert",1,"alert","alert-info","mt-3"]],template:function(r,s){if(1&r){const o=Xr();C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),ue(4,"img",4),C(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8),I(9,"Build a "),C(10,"span",9),I(11,"Brand "),E()(),C(12,"h1",8),I(13,"that feels just right."),E()()()(),C(14,"div",10)(15,"ul",11)(16,"li")(17,"a",12),ue(18,"img",13),E()(),C(19,"li")(20,"a",14),ue(21,"img",15),E()(),C(22,"li")(23,"a",16),ue(24,"img",13),E()(),C(25,"li")(26,"a",17),ue(27,"img",18),E()()(),C(28,"div",19)(29,"p"),I(30,"Crafted with the precision of "),E(),C(31,"p"),I(32,"the golden ratio and originality"),E()()()()(),C(33,"div",20)(34,"p")(35,"a",21)(36,"span",22),I(37," Explore Packages"),E(),C(38,"span",23),ue(39,"i",24),E()()()()()(),ue(40,"div",25),C(41,"section",26)(42,"div",27)(43,"div",2)(44,"div",28)(45,"div",29)(46,"video",30,31),zt("click",function(){return s.playInFullscreenWithAudio()}),ue(48,"source",32)(49,"source",33),I(50," Your browser does not support the video tag. "),E()()()()()(),C(51,"section",34)(52,"div",1)(53,"div",2)(54,"div",35)(55,"div",36)(56,"h2",37)(57,"span",38),I(58," Your brand isn\u2019t just a"),E(),C(59,"span",39),I(60," Logo"),E(),I(61,". "),C(62,"span",40),I(63,"It\u2019s how the world sees you. At "),E(),C(64,"span",38),I(65," Pixtar"),E(),I(66,", "),C(67,"span",40),I(68," we blend art with strategy to create bespoke branding solutions "),E(),I(69," that "),C(70,"span",38),I(71,"make your story unforgettable."),E()()()()()()(),C(72,"section",41)(73,"div",42)(74,"div",2)(75,"div",35)(76,"div",43)(77,"h1",44),ue(78,"div",45),I(79," Recent Works "),E()()(),C(80,"div",35)(81,"div",2),mt(82,TQe,9,8,"div",46),E()()()(),C(83,"div",47)(84,"div",48)(85,"div",43)(86,"h1",44),ue(87,"div",45),I(88," Recent Works "),E()()(),C(89,"owl-carousel-o",49),mt(90,IQe,2,1,"ng-container",50),E()(),C(91,"div",51)(92,"div",2)(93,"div",52)(94,"div",53)(95,"div",54)(96,"div",55)(97,"p")(98,"a",56)(99,"span",57),I(100,"Book A Consultation"),E(),C(101,"span",23),ue(102,"i",24),E()()()()()()()()()(),C(103,"section",58)(104,"div",1)(105,"div",2)(106,"div",35)(107,"div",59)(108,"p",60)(109,"span",61),I(110,"Why Choose Pixtar?"),E()(),C(111,"div",62)(112,"div",2)(113,"div",63)(114,"div",64),ue(115,"img",65),C(116,"p",66),I(117,"Crafted With The Golden Ratio"),E(),C(118,"p",67),I(119,"Everything we design follows the timeless principles of the golden ratio\u2014creating perfect harmony between form and function."),E()()(),C(120,"div",68)(121,"div",64),ue(122,"img",65),C(123,"p",66),I(124,"Custom Solutions. No Templates. Ever."),E(),C(125,"p",67),I(126,"Every brand is unique, and so is our approach. We build from scratch, ensuring your business is reflected in every detail. "),E()()(),C(127,"div",63)(128,"div",64),ue(129,"img",65),C(130,"p",66),I(131,"Beyond The Limits, Always Transparent"),E(),C(132,"p",67),I(133,"We don\u2019t just deliver; we partner with you, going above and beyond with 100% transparency at every step of the way. "),E()()()()()()()()()(),C(134,"section",69)(135,"div",1)(136,"div",2)(137,"div",35)(138,"div",70)(139,"h6",71),I(140,"Our clients include..."),E(),C(141,"owl-carousel-o",49),$o(142),mt(143,RQe,3,1,"ng-template",72),mt(144,kQe,3,1,"ng-template",72),mt(145,NQe,3,1,"ng-template",72),mt(146,LQe,3,1,"ng-template",72),mt(147,FQe,3,1,"ng-template",72),mt(148,BQe,3,1,"ng-template",72),mt(149,zQe,3,1,"ng-template",72),mt(150,UQe,3,1,"ng-template",72),mt(151,VQe,3,1,"ng-template",72),mt(152,jQe,3,1,"ng-template",72),mt(153,HQe,3,1,"ng-template",72),mt(154,GQe,3,1,"ng-template",72),mt(155,WQe,3,1,"ng-template",72),Ko(),E()()()()()(),C(156,"section",73)(157,"div",1)(158,"div",2)(159,"div",74)(160,"div",75)(161,"h2",76)(162,"span",61),I(163,"What\u2019s Included in Our Branding Packages?"),E()(),C(164,"p",77),I(165,"Whether you\u2019re starting from scratch or need a brand overhaul, we\u2019ve got you covered."),E()()(),C(166,"div",78,79)(168,"div",80)(169,"div",81)(170,"div",82)(171,"div",83)(172,"div",84)(173,"div",85)(174,"div",86),ue(175,"div",87)(176,"div",88),E(),C(177,"div",22)(178,"p",89),I(179,"Slots available"),E()()()(),C(180,"h1",90),I(181,"Join "),E(),C(182,"h1",91),I(183,"Pixtar"),E(),C(184,"div",92)(185,"h4",93),I(186,"Book a 15-min intro Call"),E(),C(187,"p",94),I(188,"Learn more about how Pixtar "),C(189,"span",95),I(190," works and how it can help you."),E()(),C(191,"a",96)(192,"span",23),ue(193,"i",24),E()()(),C(194,"div",97)(195,"h4",93),I(196,"Refer a friend & earn"),E(),C(197,"p",94),I(198,"Earn 5% monthly recurring "),C(199,"span",95),I(200," commission for each referral. "),E(),C(201,"a",98),zt("click",function(){return s.openModal()}),C(202,"span",22),I(203," Get Started"),E(),C(204,"span",23),ue(205,"i",24),E()()()()()()(),C(206,"div",99)(207,"div",100)(208,"h2",101),I(209),E(),C(210,"nav")(211,"div",102)(212,"button",103),zt("click",function(){return s.changeTabTitle("Try with us")}),I(213," Explorer "),E(),C(214,"button",104),zt("click",function(){return s.changeTabTitle("Most Suitable")}),ue(215,"img",105),I(216," Navigator "),E(),C(217,"button",106),zt("click",function(){return s.changeTabTitle("Create a Brand")}),I(218," Pioneer "),E()()(),C(219,"div",107)(220,"div",108)(221,"div",109)(222,"div",110)(223,"h4",111),I(224,"AED 7,995"),E(),C(225,"h5",112),I(226,"Perfect for startups."),E()(),ue(227,"div",113),C(228,"div",114)(229,"h5",115),I(230,"What\u2019s included"),E(),C(231,"div",2)(232,"div",116)(233,"ul",117)(234,"li",118),ue(235,"i",119),I(236,"Logo design (3 Options) "),E(),C(237,"li",118),ue(238,"i",119),I(239,"Business card "),E(),C(240,"li",118),ue(241,"i",119),I(242,"Letterhead and Envelop "),E()()(),C(243,"div",116)(244,"ul",117)(245,"li",118),ue(246,"i",119),I(247,"1 Revisions (On shortlisted) "),E(),C(248,"li",118),ue(249,"i",119),I(250,"2 Color options "),E(),C(251,"li",118),ue(252,"i",119),I(253,"13 Days Delivery "),E()()()()(),C(254,"div",120)(255,"div",20)(256,"p")(257,"a",98),zt("click",function(){Zn(o);const l=Yo(373);return ti(s.getStripPayemts("Explorer",7995,l))}),C(258,"span",22),I(259," Get Started"),E(),C(260,"span",23),ue(261,"i",24),E()()()(),C(262,"p",121),I(263,"Or "),C(264,"a",122),I(265,"book a call"),E()()()()(),C(266,"div",123)(267,"div",109)(268,"div",110)(269,"h4",111),I(270,"AED 13,995"),E(),C(271,"h5",112),I(272,"A full brand identity suite."),E()(),ue(273,"div",113),C(274,"div",114)(275,"h5",115),I(276,"What\u2019s included"),E(),C(277,"div",2)(278,"div",116)(279,"ul",117)(280,"li",118),ue(281,"i",119),I(282,"Logo design (3 Options) "),E(),C(283,"li",118),ue(284,"i",119),I(285,"Business card "),E(),C(286,"li",118),ue(287,"i",119),I(288,"Letterhead and Envelop "),E(),C(289,"li",118),ue(290,"i",119),I(291,"Brand Guidelines "),E()()(),C(292,"div",116)(293,"ul",117)(294,"li",118),ue(295,"i",119),I(296,"Packing Design (1 Product) "),E(),C(297,"li",118),ue(298,"i",119),I(299,"2 Revisions (On shortlisted) "),E(),C(300,"li",118),ue(301,"i",119),I(302,"5 Color options "),E(),C(303,"li",118),ue(304,"i",119),I(305,"10 Days Delivery "),E()()()()(),C(306,"div",120)(307,"div",20)(308,"p")(309,"a",98),zt("click",function(){Zn(o);const l=Yo(373);return ti(s.getStripPayemts("Navigator",13995,l))}),C(310,"span",22),I(311," Get Started"),E(),C(312,"span",23),ue(313,"i",24),E()()()(),C(314,"p",121),I(315,"Or "),C(316,"a",122),I(317,"book a call"),E()()()()(),C(318,"div",124)(319,"div",109)(320,"div",110)(321,"h4",111),I(322,"AED 48,995"),E(),C(323,"h5",112),I(324,"The ultimate package with unlimited requests."),E()(),ue(325,"div",113),C(326,"div",114)(327,"h5",115),I(328,"What\u2019s included"),E(),C(329,"div",2)(330,"div",116)(331,"ul",117)(332,"li",118),ue(333,"i",119),I(334,"Logo design (Unlimited) "),E(),C(335,"li",118),ue(336,"i",119),I(337,"Business card "),E(),C(338,"li",118),ue(339,"i",119),I(340,"Letterhead and Envelop "),E(),C(341,"li",118),ue(342,"i",119),I(343,"Detailed Brand Guidelines "),E()()(),C(344,"div",116)(345,"ul",117)(346,"li",118),ue(347,"i",119),I(348,"Packing Design (5 Product) "),E(),C(349,"li",118),ue(350,"i",119),I(351,"Unlimited Revisions (Shortlisted) "),E(),C(352,"li",118),ue(353,"i",119),I(354,"Unlimited Color options "),E(),C(355,"li",118),ue(356,"i",119),I(357,"20 Days Delivery "),E()()()()(),C(358,"div",120)(359,"div",20)(360,"p")(361,"a",98),zt("click",function(){Zn(o);const l=Yo(373);return ti(s.getStripPayemts("Pioneer",48995,l))}),C(362,"span",22),I(363," Get Started"),E(),C(364,"span",23),ue(365,"i",24),E()()()(),C(366,"p",121),I(367,"Or "),C(368,"a",122),I(369,"book a call"),E()()()()()()()()()()()()(),ue(370,"app-testimonial")(371,"app-faq-component"),mt(372,YQe,30,4,"ng-template",125,126,xd),C(374,"div",127)(375,"div",128)(376,"div",129)(377,"div",130)(378,"h5",131),I(379,"REFER A FRIEND & EARN"),E(),C(380,"button",132),zt("click",function(){return s.closeModal()}),C(381,"span",133),I(382," \xd7 "),E()()(),C(383,"div",134)(384,"form",135),zt("ngSubmit",function(){return s.submitReferral()}),C(385,"div",136)(386,"h4")(387,"strong"),I(388,"Your Details:"),E()(),C(389,"div",137),ue(390,"input",138),C(391,"label",139),I(392,"Full Name"),E(),mt(393,$Qe,3,0,"div",140),E(),C(394,"div",137),ue(395,"input",141),C(396,"label",139),I(397,"Email Address"),E(),mt(398,KQe,3,1,"div",140),E(),C(399,"div",137),ue(400,"input",142),C(401,"label",139),I(402,"Contact Number"),E(),mt(403,ZQe,3,0,"div",140),E(),C(404,"h4")(405,"strong"),I(406,"Your Friend\u2019s Details:"),E()(),C(407,"div",137),ue(408,"input",143),C(409,"label",139),I(410,"Full Name"),E(),mt(411,QQe,3,0,"div",140),E(),C(412,"div",137),ue(413,"input",144),C(414,"label",139),I(415,"Email Address"),E(),mt(416,JQe,3,1,"div",140),E(),C(417,"div",137),ue(418,"input",145),C(419,"label",139),I(420,"Contact Number"),E(),mt(421,eJe,3,0,"div",140),E(),C(422,"div",146)(423,"div",147),ue(424,"input",148),E(),C(425,"div",149)(426,"button",150),zt("click",function(){return s.closeModal()}),I(427,"Cancel"),E()()()()(),mt(428,tJe,2,1,"div",151),mt(429,nJe,2,0,"div",152),mt(430,iJe,2,0,"div",151),mt(431,rJe,2,0,"div",151),E()()()()}2&r&&(ce(4),Ue("src","",s.baseUrl,"/img/three-d-objects/branding.png",De),ce(14),Ue("src","",s.baseUrl,"/img/home/social-media/instagram.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/social-media/facebook.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/social-media/linkedin.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/whatsapp.svg",De),ce(17),ot("ngStyle",nl(28,sJe,s.sectionWidth+"%")),ce(4),Ue("src","",s.baseUrl,"/what is brandng pixtar 2.mp4",De),ce(1),Ue("src","",s.baseUrl,"/what is brandng pixtar 2.mp4",De),ce(33),ot("ngForOf",s.allprojects),ce(7),ot("options",s.recentoptions),ce(1),ot("ngForOf",s.allprojects),ce(25),Ue("src","",s.baseUrl,"/img/home/art-icons/craft.svg",De),ce(7),Ue("src","",s.baseUrl,"/img/home/art-icons/solution.svg",De),ce(7),Ue("src","",s.baseUrl,"/img/home/art-icons/beyond.svg",De),ce(12),ot("options",s.clientslider),ce(68),La(s.tabTitle),ce(6),Ue("src","",s.baseUrl,"/img/services/shock.png",De),ce(169),ot("formGroup",s.referralForm),ce(9),ot("ngIf",s.submitted&&s.hasReferralError("referrer_name","required")),ce(5),ot("ngIf",s.submitted&&s.hasEmailError("referrer_email","required")),ce(5),ot("ngIf",s.submitted&&s.hasReferralError("referrer_phone","required")),ce(8),ot("ngIf",s.submitted&&s.hasReferralError("referred_name","required")),ce(5),ot("ngIf",s.submitted&&s.hasEmailError("referred_email","required")),ce(5),ot("ngIf",s.submitted&&s.hasReferralError("referred_phone","required")),ce(7),ot("ngIf",s.errorMessage),ce(1),ot("ngIf",s.isLoading&&!s.isEmailSame&&!s.isContactSame),ce(1),ot("ngIf",s.isContactSame),ce(1),ot("ngIf",s.isEmailSame))},dependencies:[Ba,il,I0,ly,Bm,cy,sy,oy,dy,jm,z0,W0,uf,lx,_1],styles:['.barcy[_ngcontent-%COMP%]{font-family:barcelony,sans-serif}.text-color[_ngcontent-%COMP%]{color:#da9777}.h1[_ngcontent-%COMP%]{color:#1d1d1f;font-family:Montserrat,sans-serif;margin-top:0}.h1[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{font-weight:100;color:#da9777;font-family:barcelony,sans-serif}.started[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:95px;z-index:3}.cbanner[_ngcontent-%COMP%]{min-height:100vh;height:100%;padding:0!important}.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{position:absolute;right:-19rem;top:30%;width:500px}@media (max-width: 1920px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:-6rem;width:400px;top:28%}}@media (max-width: 1650px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:0rem}}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{width:300px;top:33%}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{width:290px;top:30%}}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:0}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{display:none;width:100%;top:18%;opacity:.5;object-fit:cover;left:0;right:0}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{height:80vh!important}}@media (max-width: 1788px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:1165px}}@media (max-width: 1680px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:100%}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:1053px}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:880px}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:770px}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:auto}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:370px;padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:315px}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{position:relative}@media (max-width: 575px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{left:3px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{display:flex;width:400px;justify-content:start;align-items:center;left:auto!important;bottom:3%!important;margin-left:-7rem}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{margin-left:-3rem}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{margin-left:-2rem}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{margin-left:0rem}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px;height:12px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:18px;line-height:normal;font-weight:400}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{position:relative!important;left:0%!important;bottom:7rem!important}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:315px;bottom:3rem!important}}@media (max-width: 345px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:auto;padding:0}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p.text-color[_ngcontent-%COMP%]{font-weight:600}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:6rem}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:2rem}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:1rem}}.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:9%}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:14%}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:5%;left:55%!important}}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:auto;margin-top:-50px}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{margin-top:-30px}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}}.cstheight[_ngcontent-%COMP%]{height:378px;display:flex;flex-direction:column;justify-content:center}@media (max-width: 480px){.cstheight[_ngcontent-%COMP%]{height:200px}}.cstvideo[_ngcontent-%COMP%]{position:relative;z-index:1;margin-top:-15rem}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]{margin-top:-11rem}}@media (max-width: 480px){.cstvideo[_ngcontent-%COMP%]{margin-top:-5rem}}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]   #aboutvideo[_ngcontent-%COMP%]{height:100%}}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]{position:relative;text-align:center}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{box-shadow:0 23px 26px #0000004a}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;width:100%;top:0}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]{transition:.3s ease-in-out;display:flex;opacity:0;position:absolute;bottom:0;left:0;right:0;width:100%;padding:20px;height:100%;background-color:#00000080;margin:0 auto;flex-direction:column;justify-content:center;align-items:center}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:54px;height:54px;object-fit:contain}@media (max-width: 768px){.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:44px}}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]:hover   .text-block[_ngcontent-%COMP%]{display:flex;cursor:pointer;justify-content:center;align-items:center;opacity:1}.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:106px}@media (max-width: 1440px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:80px}}@media (max-width: 1199px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:70px}}@media (max-width: 1024px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:55px}}@media (max-width: 991px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:1.5}}.hard-work[_ngcontent-%COMP%]{margin:0;padding:0 0 30px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]{padding:20px 0 0}}.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:32px;margin-top:15px;font-weight:600}@media (max-width: 1366px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:18px}}.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{color:#fff;font-size:30px;font-weight:600}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{font-size:28px}}.hard-work[_ngcontent-%COMP%]   .rlimg[_ngcontent-%COMP%]{width:30px}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]{padding:40px 10px 50px 0}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{height:24px;width:4px;top:6px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{margin-left:30px;width:4px;left:-5px;top:4px}}.hard-work[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]{padding:10px 30px;margin-bottom:20px}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;transition:transform .9s ease}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.hard-work[_ngcontent-%COMP%]   .bannerdrk[_ngcontent-%COMP%]{background-color:#000!important}.cwd243[_ngcontent-%COMP%]{position:relative;width:195px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]{color:#1d1d1f!important;font-weight:600;display:flex;justify-content:space-between!important;align-items:center}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{position:relative;right:auto!important;width:auto;transition:.5s all ease-in-out}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]{letter-spacing:1px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{border:1px dashed #6e6e73;height:75px;width:75px;display:flex;justify-content:center;align-items:center;position:absolute;border-radius:50px;transition:.5s all ease-in-out;right:-4px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{height:60px;width:60px;right:5px}}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{right:-10px;height:50px;width:50px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{height:45px;width:45px}}.cstbtn[_ngcontent-%COMP%]{cursor:pointer}.cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:135px}@media (max-width: 480px){.cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;width:140px}}.choosesection[_ngcontent-%COMP%]{background-color:#eeedf0}.choosesection[_ngcontent-%COMP%]   .choose-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .p1[_ngcontent-%COMP%]{margin-bottom:20px!important}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage{display:flex;justify-content:center;align-items:center;text-align:center}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage img{width:100%;height:57px;object-fit:contain;margin:0 auto;padding:0 20px}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage .owl-items{margin-right:14px!important}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]{padding:30px;border-radius:50px;width:100%}@media (max-width: 575px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]{padding:20px 15px;border-radius:20px}}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]{padding:20px 0}}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]{border:1px solid #da9777;background-color:#da9777;color:#fff;border-radius:33px;position:relative;display:inline-block;padding:13px 16px;margin-bottom:20px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .circle1[_ngcontent-%COMP%]{position:absolute;width:24px;height:24px;border-radius:50px;background-color:#000;border:1px solid #000}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .circle2[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50px;background-color:#6e6e73;border:1px solid #707070;position:relative;z-index:2}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-left:10px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{border:1px solid #707070;padding:15px;border-radius:16px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]{justify-content:end;align-items:end;position:relative;top:-7px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:60px;height:60px}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:40px;height:40px}}@media (max-width: 380px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:28px;height:28px}}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{width:50px;height:50px}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{width:40px;height:40px}}@media (max-width: 380px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{width:28px;height:28px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-width:600px;width:100%;border-radius:50px;margin-bottom:0;height:100%;padding:20px 40px}@media (max-width: 1440px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:20px 30px}}@media (max-width: 1199px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:auto}}@media (max-width: 575px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:20px 10px;border-radius:20px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;background-color:#1d1d1f;width:100%;margin:20px 0}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;font-weight:500}@media (max-width: 991px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]{margin-top:8rem}@media (max-width: 1199px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]{margin-top:4rem}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{justify-content:center;background:#1d1d1f;border-radius:50px;padding:7px}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:none;border:none;color:#fff;border-radius:50px;padding:5px 15px;width:33.33%;font-size:16px}@media (max-width: 1366px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;padding:5px}}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px;padding:6px 5px}}@media (max-width: 380px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:10px;padding:6px 5px}}@media (max-width: 330px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:10px;padding:6px 3px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#da9777}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]{text-align:center;position:relative;z-index:0;left:4rem;bottom:10px}@media (max-width: 991px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]{left:3.5rem}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1d1d1f;cursor:pointer}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 12px 19px -7px #0000004d;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}.packages[_ngcontent-%COMP%]   .mtrem3[_ngcontent-%COMP%]{margin-top:5rem;margin-bottom:2rem}@media (max-width: 991px){.packages[_ngcontent-%COMP%]   .mtrem3[_ngcontent-%COMP%]{margin-top:4rem;margin-bottom:0}}.packages[_ngcontent-%COMP%]   .mtrem3[_ngcontent-%COMP%]   .start-50[_ngcontent-%COMP%]{left:42%!important}  .myCustomModalClass{background-color:#0b0b0bb8}  .myCustomModalClass .modal-dialog.modal-lg{position:relative;display:flex;justify-content:center;align-items:center;margin:0 auto;padding-top:0;height:100%}@media (min-width: 992px){  .myCustomModalClass .modal-dialog.modal-lg{--bs-modal-width: 1055px}}@media (max-width: 1280px){  .myCustomModalClass .modal-dialog.modal-lg{max-width:90%}}@media (max-width: 991px){  .myCustomModalClass .modal-dialog.modal-lg{height:auto;padding:30px 0}}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative{min-height:100%;height:100%;display:block}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative figure{margin-bottom:0}  .myCustomModalClass .btn{background-color:transparent!important;border:none!important;color:#c9bebe!important;font-size:20px;position:fixed;top:1%;right:1%;z-index:2;padding:5px}  .myCustomModalClass .btn:hover{color:#c4b4b480!important}@media (max-width: 991px){  .myCustomModalClass .btn{top:0}}@media (max-width: 480px){  .myCustomModalClass .btn{top:-6px;right:6px}}  .myCustomModalClass .custommodalanchor{border-bottom:1px solid #dfdfdf;padding-bottom:10px;margin-bottom:10px}  .myCustomModalClass .follow p{font-size:16px;margin-bottom:0;margin-left:5px}  .myCustomModalClass .owl-carousel .owl-item img{object-fit:cover}  .myCustomModalClass .link{margin-top:30px}  .myCustomModalClass .hashtaglinks a{display:inline-block;margin:0 2px}  .myCustomModalClass .rightblock{height:750px;overflow:hidden;overflow-y:scroll;padding:10px 0 10px 20px}@media (max-width: 1366px){  .myCustomModalClass .rightblock{height:600px}}@media (max-width: 991px){  .myCustomModalClass .rightblock{height:auto;margin-top:0}}  .myCustomModalClass .rightblock a{color:#0280fe!important}  .myCustomModalClass .leftblock{padding:0}@media (max-width: 991px){  .myCustomModalClass .leftblock{margin-top:0}}  video{position:relative;min-height:100%;width:90%}  .modal-body{padding:10px}.started[_ngcontent-%COMP%]{display:flex;justify-content:center}.started[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:90px;z-index:3}@media (max-width: 480px){.started[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:75px}}.bnrstart[_ngcontent-%COMP%]{left:55%!important}@media (max-width: 991px){.bnrstart[_ngcontent-%COMP%]{left:60%!important}}.bnrstart[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:166px}.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width: 575px){.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;margin:0 auto}}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.footer-collapse[_ngcontent-%COMP%]{padding:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:30px 20px}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none;border-bottom:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;border-radius:0;font-size:20px;font-weight:500;display:flex;color:#fff;align-items:center}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:hover{color:#fff;outline:none}@media (max-width: 1366px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.brdtp[_ngcontent-%COMP%]{border-top:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{background-image:url(plus.2523ff04f32f499f.svg);margin-top:5px;margin-bottom:5px;color:#dadade}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:400}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.bannerdrk[_ngcontent-%COMP%]{background-color:#000}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#101010;border:none;border-radius:0;border-bottom:1px solid #dddddd}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#878787}form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{background-color:transparent;padding:5px 30px;text-decoration:none;border:2px solid #707070;color:#878787;border-radius:30px;font-weight:600}form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{color:#da9777;background:#1d1d1f}@media (max-width: 575px){form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:16px}}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{background:transparent;color:#da9777;border:2px solid #da9777;padding:5px 30px;border-radius:30px;font-weight:600}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:hover{background:#da9777;color:#fff}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:focus{background:#da9777;color:#fff;border-color:#da9777}@media (max-width: 575px){form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{font-size:16px}}.error[_ngcontent-%COMP%]{color:#f33}.close[_ngcontent-%COMP%]{position:absolute;right:10px;background:transparent;box-shadow:none;outline:none;border:1px solid #000;border-radius:50px;height:24px;width:24px;font-size:21px;display:flex;justify-content:center;align-items:center;margin-top:-40px!important}.close[_ngcontent-%COMP%]:hover{background-color:#000;color:#da9777}.pulse[_ngcontent-%COMP%]{margin:100px;display:block;width:22px;height:22px;border-radius:50%;background:#cca92c;cursor:pointer;box-shadow:0 0 #5b5b5f;animation:_ngcontent-%COMP%_pulse 2s infinite}.pulse[_ngcontent-%COMP%]:hover{animation:none}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #5b5b5f}70%{box-shadow:0 0 0 10px #cca92c00}to{box-shadow:0 0 #cca92c00}}']}),e})();const aJe=["canvas"],lJe=["myVideo"];function cJe(e,t){if(1&e){const n=Xr();C(0,"div",157)(1,"div",158)(2,"a",159)(3,"img",160),zt("mouseenter",function(){const s=Zn(n).index;return ti(_t().onMouseEnter(s))})("mouseleave",function(){return Zn(n),ti(_t().onMouseLeave())}),E(),C(4,"div",161)(5,"p",162),I(6),E(),C(7,"p",163),ue(8,"span",164),E()()()()()}if(2&e){const n=t.$implicit,i=t.index,r=_t();ce(2),bd("href",n.link,De),ce(1),Zu("galleryimg",i,""),Uc("src","",r.imagepath,"",n.image,"",De),ce(3),La(n.name),ce(2),ot("innerHTML",n.desc,yd)}}function dJe(e,t){if(1&e&&(C(0,"a",166),ue(1,"img",167),C(2,"div",161)(3,"p",162),I(4),E(),C(5,"p",163),ue(6,"span",164),E()()()),2&e){const n=_t().$implicit,i=_t();bd("href",n.link,De),ce(1),Uc("src","",i.imagepath,"",n.project_images[0],"",De),ce(3),La(n.name),ce(2),ot("innerHTML",n.desc,yd)}}function hJe(e,t){if(1&e&&($o(0),mt(1,dJe,7,5,"ng-template",165),Ko()),2&e){const n=t.$implicit,i=t.index;ce(1),ot("id",n+i)}}function uJe(e,t){if(1&e&&(C(0,"div",168)(1,"a",169),ue(2,"img",170),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/dnour.svg",De)}}function pJe(e,t){if(1&e&&(C(0,"div",168)(1,"a",169),ue(2,"img",170),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/crystal.svg",De)}}function fJe(e,t){if(1&e&&(C(0,"div",168)(1,"a",169),ue(2,"img",170),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/miniaar.svg",De)}}function mJe(e,t){if(1&e&&(C(0,"div",168)(1,"a",169),ue(2,"img",170),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/bni.svg",De)}}function gJe(e,t){if(1&e&&(C(0,"div",168)(1,"a",169),ue(2,"img",170),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/angle.svg",De)}}function vJe(e,t){if(1&e&&(C(0,"div",168)(1,"a",169),ue(2,"img",170),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/pakhis.svg",De)}}function yJe(e,t){if(1&e&&(C(0,"div",168)(1,"a",169),ue(2,"img",170),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/drminnie.svg",De)}}function _Je(e,t){if(1&e&&(C(0,"div",168)(1,"a",169),ue(2,"img",170),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/veddentta.svg",De)}}function bJe(e,t){if(1&e&&(C(0,"div",168)(1,"a",169),ue(2,"img",170),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/autokoorosh.svg",De)}}function xJe(e,t){if(1&e&&(C(0,"div",168)(1,"a",169),ue(2,"img",170),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/fractal.svg",De)}}function wJe(e,t){if(1&e&&(C(0,"div",168)(1,"a",169),ue(2,"img",170),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/aetrio.svg",De)}}function MJe(e,t){if(1&e&&(C(0,"div",168)(1,"a",169),ue(2,"img",170),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/wrae.svg",De)}}function CJe(e,t){if(1&e&&(C(0,"div",168)(1,"a",169),ue(2,"img",170),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/beyou.svg",De)}}function PJe(e,t){1&e&&(C(0,"div",178)(1,"div"),I(2," Name is required. "),E()())}function SJe(e,t){if(1&e&&(C(0,"div",178)(1,"div"),I(2),E()()),2&e){const n=_t(2);ce(2),hs(" ",n.hasEmailError("email","required")," ")}}function EJe(e,t){if(1&e){const n=Xr();C(0,"div",134)(1,"h4",171),I(2),E(),C(3,"button",136),zt("click",function(){return ti(Zn(n).$implicit.dismiss("Cross click"))}),C(4,"span",137),I(5," \xd7 "),E()()(),C(6,"div",138)(7,"div",172)(8,"div",1)(9,"div",2)(10,"div",116)(11,"div",173)(12,"form",174),zt("ngSubmit",function(){return Zn(n),ti(_t().submitPayment())}),C(13,"div",140)(14,"div",141),ue(15,"input",175),C(16,"label",143),I(17,"What's your name?"),E(),mt(18,PJe,3,0,"div",144),E(),C(19,"div",141),ue(20,"input",176),C(21,"label",143),I(22,"What\u2019s your e-mail?"),E(),mt(23,SJe,3,1,"div",144),E(),C(24,"div",150)(25,"div",151),ue(26,"input",177),E(),C(27,"div",153)(28,"button",154),zt("click",function(){return Zn(n),ti(_t().closePopUp())}),I(29,"Cancel"),E()()()()()()()()()()()}if(2&e){const n=_t();ce(2),hs(" ",n.paymentData.name," Payments "),ce(10),ot("formGroup",n.paymentForm),ce(6),ot("ngIf",n.submitted&&n.hasError("name","required")),ce(5),ot("ngIf",n.submitted&&n.hasEmailError("email","required"))}}function OJe(e,t){1&e&&(C(0,"div",178)(1,"div"),I(2," Your Name is required. "),E()())}function AJe(e,t){if(1&e&&(C(0,"div",178)(1,"div"),I(2),E()()),2&e){const n=_t();ce(2),hs(" ",n.hasEmailError("referrer_email","required")," ")}}function TJe(e,t){1&e&&(C(0,"div",178)(1,"div"),I(2," Your Contact Number is required. "),E()())}function DJe(e,t){1&e&&(C(0,"div",178)(1,"div"),I(2," Your Friend\u2019s Name is required. "),E()())}function IJe(e,t){if(1&e&&(C(0,"div",178)(1,"div"),I(2),E()()),2&e){const n=_t();ce(2),hs(" ",n.hasEmailError("referred_email","required")," ")}}function RJe(e,t){1&e&&(C(0,"div",178)(1,"div"),I(2," Your Contact Number is required. "),E()())}function kJe(e,t){if(1&e&&(C(0,"div",179),I(1),E()),2&e){const n=_t();ce(1),hs(" ",n.errorMessage," ")}}function NJe(e,t){1&e&&(C(0,"div",180),I(1," Sending your message, please wait... "),E())}function LJe(e,t){1&e&&(C(0,"div",179),I(1," Referrer and referred Contact Number cannot be the same "),E())}function FJe(e,t){1&e&&(C(0,"div",179),I(1," Referrer and referred emails cannot be the same "),E())}const BJe=function(e){return{width:e}};let zJe=(()=>{const t=class{onScroll(i){const r=window.scrollY||document.documentElement.scrollTop;this.sectionWidth=Math.min(100,50+r/10)}constructor(i,r,s,o,a,l,c,d,h,u,p,m,v){this.renderer=i,this._platformId=r,this.referralService=s,this.pageservice=o,this.metaTagService=a,this.titleService=l,this.splineThreeService=c,this.formBuilder=d,this.http=h,this.projectservice=u,this.modalService=p,this.activeModal=m,this.payementservice=v,this.currentPage=1,this.allprojects=[],this.currentLimit=24,this.recentoptions={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],margin:14,responsive:{0:{items:2},480:{items:2},740:{items:3},940:{items:4}},nav:!1},this.clientslider={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!1,pullDrag:!1,dots:!1,slideTransition:"linear",autoplaySpeed:3e3,autoplayTimeout:5e3,autoplayHoverPause:!0,nav:!1,center:!1,navText:['<i class="fas fa-arrow-left"></i>','<i class="fas fa-arrow-right"></i>'],margin:14,responsive:{0:{items:2},480:{items:4},740:{items:4},940:{items:7}}},this.desktopslider={loop:!1,rewind:!0,autoplay:!0,autoplayTimeout:1500,center:!0,dots:!0,autoHeight:!0,autoWidth:!0,smartSpeed:1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.sectionWidth=10,this.closeResult="",this.modalReference=null,this.submitted=!1,this.formData={name:"",email:"",contact:"",rname:"",remail:"",rcontact:""},this.successMessage="",this.errorMessage="",this.isSubmitting=!1,this.isLoading=!1,this.isContactSame=!1,this.isEmailSame=!1,this.hasError=(g,b)=>this.paymentForm.controls[g].hasError(b),this.hasEmailError=(g,b)=>"referrer_email"==g?""==this.referralForm.controls.referrer_email.value?"Email is required":"INVALID"==this.referralForm.controls.referrer_email.status?"Invalid Email":this.referralForm.controls.referrer_email.hasError(b):"referred_email"==g?""==this.referralForm.controls.referred_email.value?"Email is required":"INVALID"==this.referralForm.controls.referred_email.status?"Invalid Email":this.referralForm.controls.referred_email.hasError(b):""==this.paymentForm.controls.email.value?"Email is required":"INVALID"==this.paymentForm.controls.email.status?"Invalid Email":this.paymentForm.controls.email.hasError(b),this.hasReferralError=(g,b)=>this.referralForm.controls[g].hasError(b),this.tabTitle="Try with us",this.baseUrl=en_baseUrl+"/assets",this.imagepath=en_backendUrl+"/public/",this.get_PageMeta(),this.get_AllProjects()}ngOnInit(){setTimeout(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},500),this.paymentForm=this.formBuilder.group({name:["",Ei.required],email:["",Ei.required]}),this.referralForm=this.formBuilder.group({referrer_name:["",Ei.required],referrer_email:["",[Ei.required,Ei.email,Ei.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],referrer_phone:["",Ei.required],referred_name:["",Ei.required],referred_email:["",[Ei.required,Ei.email,Ei.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],referred_phone:["",Ei.required],referred_message:[""],campaign_id:[""],campaign_source:[""]})}get_PageMeta(){this.pageservice.getpageWithName({pageName:"home"}).subscribe(r=>{200==r.body.code&&(this.titleService.setTitle(r?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:r?.body.result.meta_description},{name:"keywords",content:r?.body.result.meta_keywords}]))})}get_AllProjects(){const r=["674ea688f034ad6b3ba330d0","674ed82af034ad6b3ba3339e","63219d9db7e88c2c1d945874","6321aec9b7e88c2c1d945938"];this.projectservice.getAllProjects({limit:this.currentLimit,page:this.currentPage}).subscribe(s=>{if(200===s.code&&s.result&&s.result.length>0){const o=s.result.filter(a=>r.includes(a._id));this.allprojects=[...o]}})}loadMore(){this.currentLimit=this.currentLimit+4,this.get_AllProjects()}stopSlider(){this.sliderInterval&&clearInterval(this.sliderInterval)}onMouseLeave(){this.sliderInterval&&(clearInterval(this.sliderInterval),console.log("Slider stopped"))}onMouseEnter(i){let s=this.allprojects[i].project_images,o=this.imagepath,a=document.getElementsByClassName("galleryimg"+i);this.sliderInterval=setInterval(()=>{$(a).each(function(l){let c=s[(l+Math.floor(Math.random()*s.length))%s.length];$(a).attr("src",o+c)})},900)}openPopup(i){this.modalReference=this.modalService.open(i,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass",size:"lg",backdrop:"static"}).result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}getDismissReason(i){return i===cc.ESC?"by pressing ESC":i===cc.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${i}`}getStripPayemts(i,r,s){this.paymentData={name:i,amount:r},this.modalReference=this.modalService.open(s,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass2"}).result.then(a=>{this.closeResult=`Closed with: ${a}`},a=>{this.closeResult=`Dismissed ${this.getDismissReason(a)}`})}submitPayment(){this.submitted=!0,!this.paymentForm.invalid&&this.paymentData&&(this.paymentData.email=this.paymentForm.value.email,this.paymentData.customer_name=this.paymentForm.value.name,this.paymentData.base_url=en_baseUrl,this.payementservice.stripePayments(this.paymentData).subscribe(i=>{200==i.body.code&&(localStorage.setItem("stripe-payment-user",JSON.stringify(this.paymentData)),this.paymentForm.reset(),window.open(i.body.url,"_blank"),this.modalService.dismissAll())}))}closePopUp(){this.modalService.dismissAll()}changeTabTitle(i){this.tabTitle=i}ngAfterViewInit(){const i=this.videoElement.nativeElement;i.muted=!0,i.loop=!0,i.play().catch(s=>{console.log("Autoplay failed, user interaction may be required:",s)}),this.splineThreeService.initialize(this.containerRef.nativeElement,"https://prod.spline.design/lOwCHnDGwjVf9GgA/scene.splinecode")}playInFullscreenWithAudio(){const i=this.videoElement.nativeElement;i.muted=!1,i.removeAttribute("controls"),i.play().then(()=>{i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen&&i.mozRequestFullScreen()}).catch(r=>{console.log("Error entering fullscreen with audio: ",r)})}onFullscreenChange(){const i=this.videoElement.nativeElement;document.fullscreenElement===i||document.webkitFullscreenElement===i||document.msFullscreenElement===i||document.mozFullScreenElement===i?i.play().catch(r=>{console.log("Could not play in fullscreen mode:",r)}):(i.setAttribute("controls",""),i.muted=!0)}openModal(){const i=document.getElementById("contactModal");this.renderer.addClass(i,"show"),this.renderer.setStyle(i,"display","block"),this.renderer.setStyle(i,"backgroundColor","rgba(0,0,0,0.5)"),document.body.classList.add("modal-open")}closeModal(){const i=document.getElementById("contactModal");this.renderer.removeClass(i,"show"),this.renderer.setStyle(i,"display","none"),document.body.classList.remove("modal-open")}submitReferral(){if(this.submitted=!0,this.referralForm.valid){if(this.isSubmitting=!0,this.isLoading=!0,this.referralForm.value.referrer_email==this.referralForm.value.referred_email)return this.isEmailSame=!0,void(this.isLoading=!1);if(this.referralForm.value.referrer_phone==this.referralForm.value.referred_phone)return this.isContactSame=!0,void(this.isLoading=!1);this.referralForm.valid?this.referralService.addReferral(this.referralForm.value).subscribe(i=>{200==i.body.code?(console.log("Email sent successfully",i),this.successMessage="Thank you for referring your friend! We\u2019ve sent an invitation to your friend and will notify you once they join us. Stay tuned for your rewards!",this.errorMessage="",this.isSubmitting=!1,this.isLoading=!1,this.referralForm.reset(),this.submitted=!1,this.closeModal(),$d().fire({icon:"success",title:"Thank you for referring your friend! We\u2019ve sent an invitation to your friend and will notify you once they join us. Stay tuned for your rewards!",showConfirmButton:!0})):400==i.body.code&&(this.errorMessage=i.body.message,this.isSubmitting=!1,this.isLoading=!1,setTimeout(()=>{this.errorMessage="",this.submitted=!1},5e3))},i=>{console.error("Error sending email",i),this.errorMessage="Failed to send your message. Please try again later.",this.isSubmitting=!1,this.isLoading=!1,setTimeout(()=>{this.errorMessage=""},5e3)}):(this.errorMessage="Please fill in all required fields.",this.isSubmitting=!1,this.isLoading=!1,setTimeout(()=>{this.errorMessage=""},3e3))}}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(ga),Ne(uh),Ne(YT),Ne(tu),Ne(wd),Ne(Md),Ne(v1),Ne(V0),Ne(ac),Ne(y1),Ne(J0),Ne(mf),Ne(b1))},t.\u0275cmp=qi({type:t,selectors:[["app-website"]],viewQuery:function(r,s){if(1&r&&(bl(aJe,7),bl(lJe,5)),2&r){let o;Yr(o=$r())&&(s.containerRef=o.first),Yr(o=$r())&&(s.videoElement=o.first)}},hostBindings:function(r,s){1&r&&zt("scroll",function(a){return s.onScroll(a)},0,Sm)("fullscreenchange",function(a){return s.onFullscreenChange(a)},!1,M0)},decls:507,vars:30,consts:[[1,"cbanner","bannerbgcolor"],[1,"container"],[1,"row"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],["alt","",1,"img-globe","floatimg",3,"src"],[1,"banner","vh-100"],[1,"d-flex","flex-column","justify-content-center","h-100","align-items-start"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"contentbl"],[1,"h1","size90"],[1,"barcely"],[1,"position-absolute","banner-left-content","content-left"],[1,"d-flex","flex-column","justify-contente-arround","p-0","float-start",2,"height","130px","list-style","none","justify-content","space-between"],["href","https://www.instagram.com/pixtar.ae/","target","_blank",1,""],["alt","","width","15",3,"src"],["href","https://www.facebook.com/pixtar.ae/","target","_blank",1,""],["alt","","width","10",3,"src"],["href","https://www.linkedin.com/company/pixtar-ae/","target","_blank",1,""],["href","https://wa.me/+971527930781","target","_blank",1,"whatsapp-icon2","slideUpReturn","tabmob"],["alt","whatsapp","width","18",3,"src"],[1,"d-flex","flex-column","justify-contente-center","left-content2"],[1,"position-absolute","start-50","translate-middle","down-arrow"],["href","/website#packages",1,"cstbtn"],[1,"text"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"bannerbgcolor","cstheight"],[1,"cstvideo"],[1,"container-fluid"],[1,"col-md-12","col-sm-11","col-11","mx-auto",3,"ngStyle"],[1,"video-frame"],["width","100%","muted","","autoplay","",2,"cursor","pointer",3,"click"],["myVideo",""],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],[1,"aboutbrand","mrem55"],[1,"col-md-11","col-sm-11","col-11","mx-md-0","mx-auto"],[1,"about-brand"],[1,"size53","weight300"],[1,"textcolor2"],[1,"barcy","text-color"],[1,"textcolor1"],[1,"topdist","bannerdrk","hard-work"],[1,"container","d-none","d-sm-none","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],[1,"col-xxl-12","col-xl-11","col-md-11","col-sm-11","col-11","mx-auto"],[1,"d-flex","justify-content-start","align-items-center","cmargin"],[1,"text-white","h1"],[1,"line"],["class","col-md-6",4,"ngFor","ngForOf"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"customslider","d-block","d-sm-block","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],[1,"col-md-10","offset-md-1"],[3,"options"],[4,"ngFor","ngForOf"],[1,"section","bannerdrk","container"],[1,"col-md-10","m-auto"],[1,"d-flex","flex-column","justify-content-center","align-items-center","video-block"],[1,"position-relative"],[1,"float-start","cwd243"],["href","/contact",1,"cstbtn","cstbtn128","textcolor5"],[1,"text","text128","textcolor5"],[1,"section","choosesection"],[1,"choose-section"],[1,"h1","weight300","text-center"],[1,"textcolor1","size53"],[1,"mtrem5"],[1,"col-md-4"],[1,"box","text-center"],["alt","",1,"mb30",3,"src"],[1,"size18","textcolor1","weight600","p1"],[1,"size18","textcolor3","p2"],[1,"col-md-4","mt-md-0","mt-sm-4","mb-md-0","mb-sm-4","mb-4","mt-4"],[1,"section","client","bg1","backgroundbg"],[1,"logos"],[1,"fontsize12","mb-0","semibold"],["carouselSlide",""],[1,"section","packages","p-0","backgroundbg"],[1,"col-md-6","col-sm-11","col-11","mx-auto"],[1,"packages-section","mbrem5"],[1,"wght500","text-center","mb-3","mt-0"],[1,"size24","textcolor2","text-center"],["id","packages",1,"col-lg-11","col-md-10","col-sm-11","col-11","mx-auto"],["packages",""],[1,"row","justify-content-center"],[1,"col-xxl-5","col-xl-5","col-lg-8","col-md-10"],[1,"card","bgblk"],[1,"card-body"],[1,"brd"],[1,"d-flex"],[1,"icons"],[1,"circle1","pulse"],[1,"circle2"],[1,"size16","textcolor3"],[1,"textcolor3","size90"],[1,"size90","weight700","text-white","mt-0","mb-4"],[1,"box","mb-2"],[1,"text-white","weight500","mb-2","mt-0","size20"],[1,"d-block"],["href","/contact",1,"cstbtn"],[1,"box"],[1,"cstbtn",3,"click"],[1,"col-xxl-7","col-xl-7","col-lg-8","col-md-10","mt-xl-0","mt-lg-5","mt-md-5","mt-sm-5","mt-5"],[1,"card","shadow",2,"max-width","600px"],[1,"text-start","py-3","medium","size53"],["id","nav-tab","role","tablist",1,"nav","nav-tabs","mb-3"],["id","nav-home-tab","data-bs-toggle","tab","data-bs-target","#nav-home","type","button","role","tab","aria-controls","nav-home","aria-selected","true",1,"nav-link","active",3,"click"],["id","nav-profile-tab","data-bs-toggle","tab","data-bs-target","#nav-profile","type","button","role","tab","aria-controls","nav-profile","aria-selected","false",1,"nav-link",3,"click"],["alt","",3,"src"],["id","nav-contact-tab","data-bs-toggle","tab","data-bs-target","#nav-contact","type","button","role","tab","aria-controls","nav-contact","aria-selected","false",1,"nav-link",3,"click"],["id","nav-tabContent",1,"tab-content"],["id","nav-home","role","tabpanel","aria-labelledby","nav-home-tab",1,"tab-pane","fade","active","show"],[1,"cstprng-table"],[1,"cstprng-table-header"],[1,"cstprng-table-cost","size53","textcolor1","weight500","mt-0"],[1,"cstprng-table-about","size20","textcolor1","weight500"],[1,"divider"],[1,"cstprng-table-features"],[1,"size20","textcolor1","weight500"],[1,"col-md-12"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-start","align-items-start"],[1,"ms-2","me-auto"],[1,"fw-bold"],[1,"list-group-item","d-flex","justify-content-start","align-items-center"],[1,"fa","fa-check"],[1,"ms-2"],[1,"cstprng-table-cta","position-relative","mtrem3","started"],[1,"size14","cntlink"],["href","/contact",1,"text-decoration-underline"],["id","nav-profile","role","tabpanel","aria-labelledby","nav-profile-tab",1,"tab-pane","fade"],["id","nav-contact","role","tabpanel","aria-labelledby","nav-contact-tab",1,"tab-pane","fade"],["style","z-index: 0;"],["payments",""],["id","contactModal","tabindex","-1","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","modalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["method","post",3,"formGroup","ngSubmit"],[1,"row","mrl-0","mb-3",2,"padding","5px 5px"],[1,"form-floating","mb-3"],["type","text","name","referrer_name","autocomplete","off","formControlName","referrer_name","id","floatingInput","placeholder","your name",1,"form-control"],["for","floatingInput",1,"mt-0"],["class","error",4,"ngIf"],["type","email","name","referrer_email","autocomplete","off","formControlName","referrer_email","id","floatingInput","placeholder","email",1,"form-control"],["type","number","name","referrer_phone","autocomplete","off","formControlName","referrer_phone","id","floatingInput","placeholder","name","min","0",1,"form-control"],["type","text","name","referred_name","autocomplete","off","formControlName","referred_name","id","floatingInput","placeholder","name",1,"form-control"],["type","email","name","referred_email","autocomplete","off","formControlName","referred_email","id","floatingInput","placeholder","email",1,"form-control"],["type","number","name","referred_phone","autocomplete","off","formControlName","referred_phone","id","floatingInput","placeholder","name","min","0",1,"form-control"],[1,"d-flex","justify-content-center","align-items-center","mt-4"],[1,"text-center","text-sm-start","me-3"],["type","submit","name","submit","value","Submit",1,"submit"],[1,"input-group1"],["type","cancel",1,"button","text-center",3,"click"],["class","alert alert-danger mt-3","role","alert",4,"ngIf"],["class","alert alert-info mt-3","role","alert",4,"ngIf"],[1,"col-md-6"],[1,"imgblock"],["target","_blank",3,"href"],["alt","",3,"src","mouseenter","mouseleave"],[1,"box-name","text-center"],[1,"mb-0","textcolor5","h2"],[1,"textcolor4"],[3,"innerHTML"],["carouselSlide","",3,"id"],["target","_self",3,"href"],[3,"src"],[1,"team-img","position-relative","overflow-hidden"],["href","#","target","_blank","rel","noopener noreferrer"],[3,"src","alt"],["id","modal-basic-title",1,"modal-title"],["id","content"],[1,""],["method","post","novalidate","",3,"formGroup","ngSubmit"],["type","text","name","name","autocomplete","off","formControlName","name","id","floatingInput","placeholder","name",1,"form-control"],["type","email","name","email","autocomplete","off","formControlName","email","id","floatingInput","placeholder","email",1,"form-control"],["type","submit","name","submit","value","Pay Now",1,"submit"],[1,"error"],["role","alert",1,"alert","alert-danger","mt-3"],["role","alert",1,"alert","alert-info","mt-3"]],template:function(r,s){if(1&r){const o=Xr();C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),ue(4,"img",4),C(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8),I(9,"A Custom-Built "),C(10,"span",9),I(11,"Website "),E()(),C(12,"h1",8),I(13,"for Every Screen"),E()()()(),C(14,"div",10)(15,"ul",11)(16,"li")(17,"a",12),ue(18,"img",13),E()(),C(19,"li")(20,"a",14),ue(21,"img",15),E()(),C(22,"li")(23,"a",16),ue(24,"img",13),E()(),C(25,"li")(26,"a",17),ue(27,"img",18),E()()(),C(28,"div",19)(29,"p"),I(30,"Website is your virtual office so "),E(),C(31,"p"),I(32,"\u2014No Templates, Just Magic."),E()()()()(),C(33,"div",20)(34,"p")(35,"a",21)(36,"span",22),I(37," Explore Packages"),E(),C(38,"span",23),ue(39,"i",24),E()()()()()(),ue(40,"div",25),C(41,"section",26)(42,"div",27)(43,"div",2)(44,"div",28)(45,"div",29)(46,"video",30,31),zt("click",function(){return s.playInFullscreenWithAudio()}),ue(48,"source",32)(49,"source",33),I(50," Your browser does not support the video tag. "),E()()()()()(),C(51,"section",34)(52,"div",1)(53,"div",2)(54,"div",35)(55,"div",36)(56,"h2",37)(57,"span",38),I(58,"We just don\u2019t build"),E(),C(59,"span",39),I(60," Websites"),E(),C(61,"span",40),I(62," ; we create experiences."),E(),C(63,"span",38),I(64,"Our "),E(),C(65,"span",40),I(66," custom-built websites are fast, functional"),E(),I(67,", "),C(68,"span",38),I(69,"& perfectly aligned with your business goals \u2014because "),E(),C(70,"span",40),I(71,"we don\u2019t believe in templates."),E()()()()()()(),C(72,"section",41)(73,"div",42)(74,"div",2)(75,"div",43)(76,"div",44)(77,"h1",45),ue(78,"div",46),I(79," Recent Works "),E()()(),C(80,"div",43)(81,"div",2),mt(82,cJe,9,8,"div",47),E()()()(),C(83,"div",48)(84,"div",49)(85,"div",44)(86,"h1",45),ue(87,"div",46),I(88," Recent Works "),E()()(),C(89,"owl-carousel-o",50),mt(90,hJe,2,1,"ng-container",51),E()(),C(91,"div",52)(92,"div",2)(93,"div",53)(94,"div",54)(95,"div",55)(96,"div",56)(97,"p")(98,"a",57)(99,"span",58),I(100,"Book A Consultation"),E(),C(101,"span",23),ue(102,"i",24),E()()()()()()()()()(),C(103,"section",59)(104,"div",1)(105,"div",2)(106,"div",43)(107,"div",60)(108,"p",61)(109,"span",62),I(110,"Why Choose Pixtar?"),E()(),C(111,"div",63)(112,"div",2)(113,"div",64)(114,"div",65),ue(115,"img",66),C(116,"p",67),I(117,"Crafted With The Golden Ratio"),E(),C(118,"p",68),I(119,"Everything we design follows the timeless principles of the golden ratio\u2014creating perfect harmony between form and function."),E()()(),C(120,"div",69)(121,"div",65),ue(122,"img",66),C(123,"p",67),I(124,"Custom Solutions. No Templates. Ever."),E(),C(125,"p",68),I(126,"Every brand is unique, and so is our approach. We build from scratch, ensuring your business is reflected in every detail."),E()()(),C(127,"div",64)(128,"div",65),ue(129,"img",66),C(130,"p",67),I(131,"Beyond The Limits, Always Transparent"),E(),C(132,"p",68),I(133,"We don\u2019t just deliver; we partner with you, going above and beyond with 100% transparency at every step of the way."),E()()()()()()()()()(),C(134,"section",70)(135,"div",1)(136,"div",2)(137,"div",43)(138,"div",71)(139,"p",72),I(140,"OUR CLIENTS INCLUDE\u2026"),E(),C(141,"owl-carousel-o",50),$o(142),mt(143,uJe,3,1,"ng-template",73),mt(144,pJe,3,1,"ng-template",73),mt(145,fJe,3,1,"ng-template",73),mt(146,mJe,3,1,"ng-template",73),mt(147,gJe,3,1,"ng-template",73),mt(148,vJe,3,1,"ng-template",73),mt(149,yJe,3,1,"ng-template",73),mt(150,_Je,3,1,"ng-template",73),mt(151,bJe,3,1,"ng-template",73),mt(152,xJe,3,1,"ng-template",73),mt(153,wJe,3,1,"ng-template",73),mt(154,MJe,3,1,"ng-template",73),mt(155,CJe,3,1,"ng-template",73),Ko(),E()()()()()(),C(156,"section",74)(157,"div",1)(158,"div",2)(159,"div",75)(160,"div",76)(161,"h2",77)(162,"span",62),I(163,"What\u2019s Included in Our Branding Packages?"),E()(),C(164,"p",78),I(165,"Whether you\u2019re starting from scratch or need a brand overhaul, we\u2019ve got you covered."),E()()(),C(166,"div",79,80)(168,"div",81)(169,"div",82)(170,"div",83)(171,"div",84)(172,"div",85)(173,"div",86)(174,"div",87),ue(175,"div",88)(176,"div",89),E(),C(177,"div",22)(178,"p",90),I(179,"Slots available"),E()()()(),C(180,"h1",91),I(181,"Join "),E(),C(182,"h1",92),I(183,"Pixtar"),E(),C(184,"div",93)(185,"h4",94),I(186,"Book a 15-min intro Call"),E(),C(187,"p",90),I(188,"Learn more about how Pixtar "),C(189,"span",95),I(190," works and how it can help you."),E()(),C(191,"a",96)(192,"span",23),ue(193,"i",24),E()()(),C(194,"div",97)(195,"h4",94),I(196,"Refer a friend & earn"),E(),C(197,"p",90),I(198,"Earn 5% monthly recurring "),C(199,"span",95),I(200," commission for each referral."),E(),C(201,"a",98),zt("click",function(){return s.openModal()}),ue(202,"span",22),C(203,"span",23),ue(204,"i",24),E()()()()()()(),C(205,"div",99)(206,"div",100)(207,"h2",101),I(208),E(),C(209,"nav")(210,"div",102)(211,"button",103),zt("click",function(){return s.changeTabTitle("Try with us")}),I(212,"Explorer"),E(),C(213,"button",104),zt("click",function(){return s.changeTabTitle("Most Suitable")}),ue(214,"img",105),I(215," Navigator"),E(),C(216,"button",106),zt("click",function(){return s.changeTabTitle("Create a Brand")}),I(217,"Pioneer"),E()()(),C(218,"div",107)(219,"div",108)(220,"div",109)(221,"div",110)(222,"h4",111),I(223,"AED 9,995"),E(),C(224,"h5",112),I(225,"Static website, Perfect for startups. "),E()(),ue(226,"div",113),C(227,"div",114)(228,"h5",115),I(229,"What\u2019s included"),E(),C(230,"div",2)(231,"div",116)(232,"ul",117)(233,"li",118)(234,"div",119)(235,"div",120),I(236,"Tailored Ui/Ux Designing"),E()()(),C(237,"li",121),ue(238,"i",122),C(239,"span",123),I(240,"Custom Website Design upto 1 Theme Option"),E()(),C(241,"li",118)(242,"div",119)(243,"div",120),I(244,"Development"),E()()(),C(245,"li",121),ue(246,"i",122),C(247,"span",123),I(248,"Customized Front-End Development"),E()(),C(249,"li",121),ue(250,"i",122),C(251,"span",123),I(252,"Mobile, Tablet, & Desktop Responsive Design"),E()(),C(253,"li",121),ue(254,"i",122),C(255,"span",123),I(256,"Up to 8 Pages"),E()(),C(257,"li",121),ue(258,"i",122),C(259,"span",123),I(260,"Ability for Future Enhancements"),E()(),C(261,"li",121),ue(262,"i",122),C(263,"span",123),I(264,"Hosting Support"),E()(),C(265,"li",118)(266,"div",119)(267,"div",120),I(268,"Standout features"),E()()(),C(269,"li",121),ue(270,"i",122),C(271,"span",123),I(272,"Contact us Email Integration"),E()()()()()(),C(273,"div",124)(274,"div",20)(275,"p")(276,"a",98),zt("click",function(){Zn(o);const l=Yo(448);return ti(s.getStripPayemts("Explorer",9995,l))}),C(277,"span",22),I(278," Get Started"),E(),C(279,"span",23),ue(280,"i",24),E()()()(),C(281,"p",125),I(282,"Or "),C(283,"a",126),I(284,"book a call"),E()()()()(),C(285,"div",127)(286,"div",109)(287,"div",110)(288,"h4",111),I(289,"AED 24,995"),E(),C(290,"h5",112),I(291,"Dynamic Website."),E()(),ue(292,"div",113),C(293,"div",114)(294,"h5",115),I(295,"What\u2019s included"),E(),C(296,"div",2)(297,"div",116)(298,"ul",117)(299,"li",118)(300,"div",119)(301,"div",120),I(302,"Tailored Ui/Ux Designing"),E()()(),C(303,"li",121),ue(304,"i",122),C(305,"span",123),I(306,"Custom Website Design upto 3 Theme Option"),E()(),C(307,"li",118)(308,"div",119)(309,"div",120),I(310,"Development"),E()()(),C(311,"li",121),ue(312,"i",122),C(313,"span",123),I(314,"Custom Front-End Development"),E()(),C(315,"li",121),ue(316,"i",122),C(317,"span",123),I(318,"Mobile, Tablet, and Desktop Responsive Design"),E()(),C(319,"li",121),ue(320,"i",122),C(321,"span",123),I(322,"Up to 20 Pages (Based on Final Requirements)"),E()(),C(323,"li",121),ue(324,"i",122),C(325,"span",123),I(326,"Ability for Future Enhancements"),E()(),C(327,"li",121),ue(328,"i",122),C(329,"span",123),I(330,"Hosting Support"),E()(),C(331,"li",118)(332,"div",119)(333,"div",120),I(334,"Standout features"),E()()(),C(335,"li",121),ue(336,"i",122),C(337,"span",123),I(338,"Admin Panel and User Management"),E()(),C(339,"li",121),ue(340,"i",122),C(341,"span",123),I(342,"SEO-Optimized Development"),E()(),C(343,"li",121),ue(344,"i",122),C(345,"span",123),I(346,"Google My Business Setup"),E()(),C(347,"li",121),ue(348,"i",122),C(349,"span",123),I(350,"Appointment Booking Integration"),E()(),C(351,"li",121),ue(352,"i",122),C(353,"span",123),I(354,"Contact Us Email Integration"),E()(),C(355,"li",121),ue(356,"i",122),C(357,"span",123),I(358,"Google Maps Integration"),E()()()()()(),C(359,"div",124)(360,"div",20)(361,"p")(362,"a",98),zt("click",function(){Zn(o);const l=Yo(448);return ti(s.getStripPayemts("Navigator",24995,l))}),C(363,"span",22),I(364," Get Started"),E(),C(365,"span",23),ue(366,"i",24),E()()()(),C(367,"p",125),I(368,"Or "),C(369,"a",126),I(370,"book a call"),E()()()()(),C(371,"div",128)(372,"div",109)(373,"div",110)(374,"h4",111),I(375,"AED 59,995"),E(),C(376,"h5",112),I(377,"The ultimate package with unlimited requests."),E()(),ue(378,"div",113),C(379,"div",114)(380,"h5",115),I(381,"What\u2019s included"),E(),C(382,"div",2)(383,"div",116)(384,"ul",117)(385,"li",118)(386,"div",119)(387,"div",120),I(388,"Tailored Ui/Ux Designing"),E()()(),C(389,"li",121),ue(390,"i",122),C(391,"span",123),I(392,"Custom Website Design Upto 5 Theme Options"),E()(),C(393,"li",118)(394,"div",119)(395,"div",120),I(396,"Development & Standout Features"),E()()(),C(397,"li",121),ue(398,"i",122),C(399,"span",123),I(400,"Website Integration with CRM"),E()(),C(401,"li",121),ue(402,"i",122),C(403,"span",123),I(404,"Integration with other websites"),E()(),C(405,"li",121),ue(406,"i",122),C(407,"span",123),I(408,"Access to your Partners & Distributers to Create and Manage thier Account"),E()(),C(409,"li",121),ue(410,"i",122),C(411,"span",123),I(412,"User Pro\ufb01le Management"),E()(),C(413,"li",121),ue(414,"i",122),C(415,"span",123),I(416,"Unlimited Brochures Download options"),E()(),C(417,"li",121),ue(418,"i",122),C(419,"span",123),I(420,"WhatsApp Integration"),E()(),C(421,"li",121),ue(422,"i",122),C(423,"span",123),I(424,"Live Chat Integration"),E()(),C(425,"li",121),ue(426,"i",122),C(427,"span",123),I(428,"Google Reviews Integration"),E()(),C(429,"li",121),ue(430,"i",122),C(431,"span",123),I(432,"Social Media Live Updates Integration"),E()()()()()(),C(433,"div",124)(434,"div",20)(435,"p")(436,"a",98),zt("click",function(){Zn(o);const l=Yo(448);return ti(s.getStripPayemts("Pioneer",59995,l))}),C(437,"span",22),I(438," Get Started"),E(),C(439,"span",23),ue(440,"i",24),E()()()(),C(441,"p",125),I(442,"Or "),C(443,"a",126),I(444,"book a call"),E()()()()()()()()()()()()(),ue(445,"app-testimonial")(446,"app-faq-component"),mt(447,EJe,30,4,"ng-template",129,130,xd),C(449,"div",131)(450,"div",132)(451,"div",133)(452,"div",134)(453,"h5",135),I(454,"REFER A FRIEND & EARN"),E(),C(455,"button",136),zt("click",function(){return s.closeModal()}),C(456,"span",137),I(457," \xd7 "),E()()(),C(458,"div",138)(459,"form",139),zt("ngSubmit",function(){return s.submitReferral()}),C(460,"div",140)(461,"h4")(462,"strong"),I(463,"Your Details:"),E()(),C(464,"div",141),ue(465,"input",142),C(466,"label",143),I(467,"Full Name"),E(),mt(468,OJe,3,0,"div",144),E(),C(469,"div",141),ue(470,"input",145),C(471,"label",143),I(472,"Email Address"),E(),mt(473,AJe,3,1,"div",144),E(),C(474,"div",141),ue(475,"input",146),C(476,"label",143),I(477,"Contact Number"),E(),mt(478,TJe,3,0,"div",144),E(),C(479,"h4")(480,"strong"),I(481,"Your Friend\u2019s Details:"),E()(),C(482,"div",141),ue(483,"input",147),C(484,"label",143),I(485,"Full Name"),E(),mt(486,DJe,3,0,"div",144),E(),C(487,"div",141),ue(488,"input",148),C(489,"label",143),I(490,"Email Address"),E(),mt(491,IJe,3,1,"div",144),E(),C(492,"div",141),ue(493,"input",149),C(494,"label",143),I(495,"Contact Number"),E(),mt(496,RJe,3,0,"div",144),E(),C(497,"div",150)(498,"div",151),ue(499,"input",152),E(),C(500,"div",153)(501,"button",154),zt("click",function(){return s.closeModal()}),I(502,"Cancel"),E()()()()(),mt(503,kJe,2,1,"div",155),mt(504,NJe,2,0,"div",156),mt(505,LJe,2,0,"div",155),mt(506,FJe,2,0,"div",155),E()()()()}2&r&&(ce(4),Ue("src","",s.baseUrl,"/img/three-d-objects/website.png",De),ce(14),Ue("src","",s.baseUrl,"/img/home/social-media/instagram.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/social-media/facebook.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/social-media/linkedin.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/whatsapp.svg",De),ce(17),ot("ngStyle",nl(28,BJe,s.sectionWidth+"%")),ce(4),Ue("src","",s.baseUrl,"/Website-page-video.mp4",De),ce(1),Ue("src","",s.baseUrl,"/Website-page-video.mp4",De),ce(33),ot("ngForOf",s.allprojects),ce(7),ot("options",s.recentoptions),ce(1),ot("ngForOf",s.allprojects),ce(25),Ue("src","",s.baseUrl,"/img/home/art-icons/craft.svg",De),ce(7),Ue("src","",s.baseUrl,"/img/home/art-icons/solution.svg",De),ce(7),Ue("src","",s.baseUrl,"/img/home/art-icons/beyond.svg",De),ce(12),ot("options",s.clientslider),ce(67),La(s.tabTitle),ce(6),Ue("src","",s.baseUrl,"/img/services/shock.png",De),ce(245),ot("formGroup",s.referralForm),ce(9),ot("ngIf",s.submitted&&s.hasReferralError("referrer_name","required")),ce(5),ot("ngIf",s.submitted&&s.hasEmailError("referrer_email","required")),ce(5),ot("ngIf",s.submitted&&s.hasReferralError("referrer_phone","required")),ce(8),ot("ngIf",s.submitted&&s.hasReferralError("referred_name","required")),ce(5),ot("ngIf",s.submitted&&s.hasEmailError("referred_email","required")),ce(5),ot("ngIf",s.submitted&&s.hasReferralError("referred_phone","required")),ce(7),ot("ngIf",s.errorMessage),ce(1),ot("ngIf",s.isLoading&&!s.isEmailSame&&!s.isContactSame),ce(1),ot("ngIf",s.isContactSame),ce(1),ot("ngIf",s.isEmailSame))},dependencies:[Ba,il,I0,ly,Bm,cy,sy,oy,dy,jm,z0,W0,uf,lx,_1],styles:['.barcy[_ngcontent-%COMP%]{font-family:barcelony,sans-serif}.text-color[_ngcontent-%COMP%]{color:#da9777}.h1[_ngcontent-%COMP%]{color:#1d1d1f;font-family:Montserrat,sans-serif;margin-top:0}.h1[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{font-weight:100;color:#da9777;font-family:barcelony,sans-serif}.cbanner[_ngcontent-%COMP%]{min-height:100vh;height:100%;padding:0!important}.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{position:absolute;right:-21rem;top:30%;width:500px}@media (max-width: 1920px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:-11rem;width:350px;top:33%}}@media (max-width: 1650px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:0rem}}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{width:300px;top:33%}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{width:290px;top:30%}}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:0;width:250px;top:35%}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{display:none;width:100%;top:18%;opacity:.5;object-fit:cover;left:0;right:0}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{height:80vh!important}}@media (max-width: 1788px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:1165px}}@media (max-width: 1680px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:100%}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:1053px}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:880px}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:770px}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:auto}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:370px;padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:315px}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{position:relative}@media (max-width: 575px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{left:3px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{display:flex;width:404px;justify-content:start;align-items:center;left:auto!important;bottom:3%!important;margin-left:-7rem}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{margin-left:-3rem}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{margin-left:-2rem}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{margin-left:0rem}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px;height:12px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:18px;line-height:normal;font-weight:400}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{position:relative!important;left:0%!important;bottom:7rem!important}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:315px;bottom:3rem!important}}@media (max-width: 345px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:auto;padding:0}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p.text-color[_ngcontent-%COMP%]{font-weight:600}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:6rem}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:2rem}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:1rem}}.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:9%}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:14%}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:5%;left:55%!important}}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:auto;margin-top:-50px}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{margin-top:-30px}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}}.cbanner[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:135px}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:142px}}.cstheight[_ngcontent-%COMP%]{height:378px;display:flex;flex-direction:column;justify-content:center}@media (max-width: 480px){.cstheight[_ngcontent-%COMP%]{height:200px}}.cstvideo[_ngcontent-%COMP%]{position:relative;z-index:1;margin-top:-15rem}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]{margin-top:-11rem}}@media (max-width: 480px){.cstvideo[_ngcontent-%COMP%]{margin-top:-5rem}}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]   #aboutvideo[_ngcontent-%COMP%]{height:100%}}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]{position:relative;text-align:center}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{box-shadow:0 23px 26px #0000004a}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;width:100%;top:0}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]{transition:.3s ease-in-out;display:flex;opacity:0;position:absolute;bottom:0;left:0;right:0;width:100%;padding:20px;height:100%;background-color:#00000080;margin:0 auto;flex-direction:column;justify-content:center;align-items:center}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:54px;height:54px;object-fit:contain}@media (max-width: 768px){.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:44px}}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]:hover   .text-block[_ngcontent-%COMP%]{display:flex;cursor:pointer;justify-content:center;align-items:center;opacity:1}.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:106px}@media (max-width: 1440px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:80px}}@media (max-width: 1199px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:70px}}@media (max-width: 1024px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:55px}}@media (max-width: 991px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:1.5}}.hard-work[_ngcontent-%COMP%]{margin:0;padding:0 0 30px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]{padding:20px 0 0}}.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:32px;margin-top:15px;font-weight:600}@media (max-width: 1366px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:18px}}.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{color:#fff;font-size:30px;font-weight:600}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{font-size:28px}}.hard-work[_ngcontent-%COMP%]   .rlimg[_ngcontent-%COMP%]{width:30px}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]{padding:40px 10px 50px 0}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{height:24px;width:4px;top:6px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{margin-left:30px;width:4px;left:-5px;top:4px}}.hard-work[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]{padding:10px 30px;margin-bottom:20px}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;transition:transform .9s ease}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.hard-work[_ngcontent-%COMP%]   .bannerdrk[_ngcontent-%COMP%]{background-color:#000!important}.cwd243[_ngcontent-%COMP%]{position:relative;width:195px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]{color:#1d1d1f!important;font-weight:600;display:flex;justify-content:space-between!important;align-items:center}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{position:relative;right:auto!important;width:auto;transition:.5s all ease-in-out}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]{letter-spacing:1px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{border:1px dashed #6e6e73;height:75px;width:75px;display:flex;justify-content:center;align-items:center;position:absolute;border-radius:50px;transition:.5s all ease-in-out;right:-4px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{height:60px;width:60px;right:5px}}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{right:-10px;height:50px;width:50px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{height:45px;width:45px}}.cstbtn[_ngcontent-%COMP%]{cursor:pointer}.cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:116px;z-index:2}@media (max-width: 480px){.cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;width:140px}}.choosesection[_ngcontent-%COMP%]{background-color:#eeedf0}.choosesection[_ngcontent-%COMP%]   .choose-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .p1[_ngcontent-%COMP%]{margin-bottom:20px!important}.choosesection[_ngcontent-%COMP%]   .head-section[_ngcontent-%COMP%]{margin-bottom:80px}.choosesection[_ngcontent-%COMP%]   .para[_ngcontent-%COMP%]{padding-top:80px}.subscription-section[_ngcontent-%COMP%]{background-color:transparent!important}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage{display:flex;justify-content:center;align-items:center;text-align:center}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage img{width:100%;height:57px;object-fit:contain;margin:0 auto;padding:0 20px}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage .owl-items{margin-right:14px!important}.packages[_ngcontent-%COMP%]{padding-bottom:90px!important}@media (max-width: 991px){.packages[_ngcontent-%COMP%]{padding-bottom:50px!important}}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]{padding:30px;border-radius:50px;width:100%;height:auto}@media (max-width: 575px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]{padding:20px 15px;border-radius:20px}}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]{padding:20px 0}}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]{border:1px solid #da9777;background-color:#da9777;color:#fff;border-radius:33px;position:relative;display:inline-block;padding:13px 16px;margin-bottom:20px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .circle1[_ngcontent-%COMP%]{position:absolute;width:24px;height:24px;border-radius:50px;background-color:#000;border:1px solid #000}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .circle2[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50px;background-color:#6e6e73;border:1px solid #707070;position:relative;z-index:2}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-left:10px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{border:1px solid #707070;padding:15px;border-radius:16px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]{justify-content:end;align-items:end;position:relative;top:-7px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:60px;height:60px}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:40px;height:40px}}@media (max-width: 380px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:28px;height:28px}}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{width:50px;height:50px}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{width:40px;height:40px}}@media (max-width: 380px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{width:28px;height:28px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-width:600px;width:100%;border-radius:50px;margin-bottom:0;height:100%;padding:20px 40px}@media (max-width: 1440px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:20px 30px}}@media (max-width: 1199px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:auto}}@media (max-width: 575px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:20px 10px;border-radius:20px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;background-color:#1d1d1f;width:100%;margin:20px 0}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;font-weight:500;border:none}@media (max-width: 991px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]{margin-top:8rem}@media (max-width: 1199px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]{margin-top:4rem}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]   .cstprng-table-cta[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{z-index:2}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{justify-content:center;background:#1d1d1f;border-radius:50px;padding:7px}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:none;border:none;color:#fff;border-radius:50px;padding:5px 15px;width:33.33%;font-size:16px}@media (max-width: 1366px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;padding:5px}}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px;padding:6px 5px}}@media (max-width: 380px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:10px;padding:6px 5px}}@media (max-width: 330px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:10px;padding:6px 3px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#da9777}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]{text-align:center;position:relative;z-index:0;left:6rem;bottom:10px}@media (max-width: 991px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]{left:5.5rem}}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]{left:4rem}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1d1d1f;cursor:pointer}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 12px 19px -7px #0000004d;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}.packages[_ngcontent-%COMP%]   .mtrem3[_ngcontent-%COMP%]{margin-top:5rem;margin-bottom:2rem}@media (max-width: 991px){.packages[_ngcontent-%COMP%]   .mtrem3[_ngcontent-%COMP%]{margin-top:4rem;margin-bottom:0}}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .mtrem3[_ngcontent-%COMP%]   .start-50[_ngcontent-%COMP%]{left:42%!important}}  .myCustomModalClass{background-color:#0b0b0bb8}  .myCustomModalClass .modal-dialog.modal-lg{position:relative;display:flex;justify-content:center;align-items:center;margin:0 auto;padding-top:0;height:100%}@media (min-width: 992px){  .myCustomModalClass .modal-dialog.modal-lg{--bs-modal-width: 1055px}}@media (max-width: 1280px){  .myCustomModalClass .modal-dialog.modal-lg{max-width:90%}}@media (max-width: 991px){  .myCustomModalClass .modal-dialog.modal-lg{height:auto;padding:30px 0}}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative{min-height:100%;height:100%;display:block}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative figure{margin-bottom:0}  .myCustomModalClass .btn{background-color:transparent!important;border:none!important;color:#c9bebe!important;font-size:20px;position:fixed;top:1%;right:1%;z-index:2;padding:5px}  .myCustomModalClass .btn:hover{color:#c4b4b480!important}@media (max-width: 991px){  .myCustomModalClass .btn{top:0}}@media (max-width: 480px){  .myCustomModalClass .btn{top:-6px;right:6px}}  .myCustomModalClass .custommodalanchor{border-bottom:1px solid #dfdfdf;padding-bottom:10px;margin-bottom:10px}  .myCustomModalClass .follow p{font-size:16px;margin-bottom:0;margin-left:5px}  .myCustomModalClass .owl-carousel .owl-item img{object-fit:cover}  .myCustomModalClass .link{margin-top:30px}  .myCustomModalClass .hashtaglinks a{display:inline-block;margin:0 2px}  .myCustomModalClass .rightblock{height:750px;overflow:hidden;overflow-y:scroll;padding:10px 0 10px 20px}@media (max-width: 1366px){  .myCustomModalClass .rightblock{height:600px}}@media (max-width: 991px){  .myCustomModalClass .rightblock{height:auto;margin-top:0}}  .myCustomModalClass .rightblock a{color:#0280fe!important}  .myCustomModalClass .leftblock{padding:0}@media (max-width: 991px){  .myCustomModalClass .leftblock{margin-top:0}}  video{position:relative;min-height:100%;width:90%}  .modal-body{padding:10px}.started[_ngcontent-%COMP%]{display:flex;justify-content:center}.started[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:90px;z-index:3}@media (max-width: 480px){.started[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:75px}}.bnrstart[_ngcontent-%COMP%]{left:55%!important}@media (max-width: 991px){.bnrstart[_ngcontent-%COMP%]{left:60%!important}}.bnrstart[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:166px}.footer-collapse[_ngcontent-%COMP%]{padding:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:30px 20px}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none;border-bottom:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;color:#fff!important;border-radius:0;font-size:20px;font-weight:500;display:flex;color:#fff;align-items:center}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:hover{color:#fff;outline:none}@media (max-width: 1366px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.brdtp[_ngcontent-%COMP%]{border-top:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{background-image:url(plus.2523ff04f32f499f.svg);margin-top:5px;margin-bottom:5px;color:#dadade}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:400}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.bannerdrk[_ngcontent-%COMP%]{background-color:#000}.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width: 575px){.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;margin:0 auto}}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#101010;border:none;border-radius:0;border-bottom:1px solid #dddddd}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#878787}form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{background-color:transparent;padding:5px 30px;text-decoration:none;border:2px solid #707070;color:#878787;border-radius:30px;font-weight:600}form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{color:#da9777;background:#1d1d1f}@media (max-width: 575px){form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:16px}}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{background:transparent;color:#da9777;border:2px solid #da9777;padding:5px 30px;border-radius:30px;font-weight:600}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:hover{background:#da9777;color:#fff}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:focus{background:#da9777;color:#fff;border-color:#da9777}@media (max-width: 575px){form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{font-size:16px}}.error[_ngcontent-%COMP%]{color:#f33}.close[_ngcontent-%COMP%]{position:absolute;right:10px;background:transparent;box-shadow:none;outline:none;border:1px solid #000;border-radius:50px;height:24px;width:24px;font-size:21px;display:flex;justify-content:center;align-items:center;margin-top:-40px!important}.close[_ngcontent-%COMP%]:hover{background-color:#000;color:#da9777}.pulse[_ngcontent-%COMP%]{margin:100px;display:block;width:22px;height:22px;border-radius:50%;background:#cca92c;cursor:pointer;box-shadow:0 0 #5b5b5f;animation:_ngcontent-%COMP%_pulse 2s infinite}.pulse[_ngcontent-%COMP%]:hover{animation:none}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #5b5b5f}70%{box-shadow:0 0 0 10px #cca92c00}to{box-shadow:0 0 #cca92c00}}']}),e})(),UJe=(()=>{const t=class{constructor(i){this.http=i,this.getblogDetails=r=>this.http.post(en_backendUrl+"/api/blog/viewblog",r).pipe((0,us.K)(o=>(0,bs._)(o))),this.getAllblog=r=>this.http.post(en_backendUrl+"/api/blog/allblog",r).pipe((0,us.K)(o=>(0,bs._)(o))),this.getblogWithId=r=>this.http.post(en_backendUrl+"/api/blog/blogdetail",r,{observe:"response"}).pipe((0,us.K)(o=>(0,bs._)(o))),this.getNextblogWithId=r=>this.http.post(en_backendUrl+"/api/blog/nextblogdetail",r,{observe:"response"}).pipe((0,us.K)(o=>(0,bs._)(o))),this.getBlogWithString=r=>this.http.post(en_backendUrl+"/api/blog/searchblog",r,{observe:"response"}).pipe((0,us.K)(o=>(0,bs._)(o))),this.getAllvideoBlog=r=>this.http.post(en_backendUrl+"/api/blog/allvideoblog",r).pipe((0,us.K)(o=>(0,bs._)(o))),this.getTagDetails=r=>this.http.post(en_backendUrl+"/api/blog/viewtag",r).pipe((0,us.K)(o=>(0,bs._)(o))),this.getDownloadLink=r=>this.http.post(en_backendUrl+"/api/home/download",r).pipe((0,us.K)(o=>(0,bs._)(o))),this.addInvites=r=>this.http.post(en_backendUrl+"/api/blog/addinvite",r).pipe((0,us.K)(o=>(0,bs._)(o)))}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Jt(ac))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const VJe=["myVideo"],jJe=["container"];function HJe(e,t){if(1&e){const n=Xr();C(0,"div",158)(1,"div",159)(2,"a",160)(3,"img",161),zt("mouseenter",function(){const s=Zn(n).index;return ti(_t().onMouseEnter(s))})("mouseleave",function(){return Zn(n),ti(_t().onMouseLeave())}),E(),C(4,"div",162)(5,"p",163),I(6),E(),C(7,"p",164),ue(8,"span",165),E()()()()()}if(2&e){const n=t.$implicit,i=t.index,r=_t();ce(2),bd("href",n.link,De),ce(1),Zu("galleryimg",i,""),Uc("src","",r.imagepath,"",n.image,"",De),ce(3),La(n.name),ce(2),ot("innerHTML",n.desc,yd)}}function GJe(e,t){if(1&e&&(C(0,"a",167),ue(1,"img",168),C(2,"div",162)(3,"p",163),I(4),E(),C(5,"p",164),ue(6,"span",165),E()()()),2&e){const n=_t().$implicit,i=_t();bd("href",n.link,De),ce(1),Uc("src","",i.imagepath,"",n.project_images[0],"",De),ce(3),La(n.name),ce(2),ot("innerHTML",n.desc,yd)}}function WJe(e,t){if(1&e&&($o(0),mt(1,GJe,7,5,"ng-template",166),Ko()),2&e){const n=t.$implicit,i=t.index;ce(1),ot("id",n+i)}}function qJe(e,t){if(1&e&&(C(0,"div",169)(1,"a",170),ue(2,"img",171),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/dnour.svg",De)}}function XJe(e,t){if(1&e&&(C(0,"div",169)(1,"a",170),ue(2,"img",171),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/crystal.svg",De)}}function YJe(e,t){if(1&e&&(C(0,"div",169)(1,"a",170),ue(2,"img",171),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/miniaar.svg",De)}}function $Je(e,t){if(1&e&&(C(0,"div",169)(1,"a",170),ue(2,"img",171),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/bni.svg",De)}}function KJe(e,t){if(1&e&&(C(0,"div",169)(1,"a",170),ue(2,"img",171),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/angle.svg",De)}}function ZJe(e,t){if(1&e&&(C(0,"div",169)(1,"a",170),ue(2,"img",171),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/pakhis.svg",De)}}function QJe(e,t){if(1&e&&(C(0,"div",169)(1,"a",170),ue(2,"img",171),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/drminnie.svg",De)}}function JJe(e,t){if(1&e&&(C(0,"div",169)(1,"a",170),ue(2,"img",171),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/veddentta.svg",De)}}function eet(e,t){if(1&e&&(C(0,"div",169)(1,"a",170),ue(2,"img",171),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/autokoorosh.svg",De)}}function tet(e,t){if(1&e&&(C(0,"div",169)(1,"a",170),ue(2,"img",171),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/fractal.svg",De)}}function net(e,t){if(1&e&&(C(0,"div",169)(1,"a",170),ue(2,"img",171),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/aetrio.svg",De)}}function iet(e,t){if(1&e&&(C(0,"div",169)(1,"a",170),ue(2,"img",171),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/wrae.svg",De)}}function ret(e,t){if(1&e&&(C(0,"div",169)(1,"a",170),ue(2,"img",171),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/img/home/logos/beyou.svg",De)}}function set(e,t){1&e&&(C(0,"div",179)(1,"div"),I(2," Name is required. "),E()())}function oet(e,t){if(1&e&&(C(0,"div",179)(1,"div"),I(2),E()()),2&e){const n=_t(2);ce(2),hs(" ",n.hasEmailError("email","required")," ")}}function aet(e,t){if(1&e){const n=Xr();C(0,"div",135)(1,"h5",172),I(2),E(),C(3,"button",137),zt("click",function(){return ti(Zn(n).$implicit.dismiss("Cross click"))}),C(4,"span",138),I(5," \xd7 "),E()()(),C(6,"div",139)(7,"div",173)(8,"div",1)(9,"div",2)(10,"div",117)(11,"div",174)(12,"form",175),zt("ngSubmit",function(){return Zn(n),ti(_t().submitPayment())}),C(13,"div",141)(14,"div",142),ue(15,"input",176),C(16,"label",144),I(17,"What's your name?"),E(),mt(18,set,3,0,"div",145),E(),C(19,"div",142),ue(20,"input",177),C(21,"label",144),I(22,"What\u2019s your e-mail?"),E(),mt(23,oet,3,1,"div",145),E(),C(24,"div",151)(25,"div",152),ue(26,"input",178),E(),C(27,"div",154)(28,"button",155),zt("click",function(){return Zn(n),ti(_t().closePopUp())}),I(29,"Cancel"),E()()()()()()()()()()()}if(2&e){const n=_t();ce(2),hs(" Complete Your Payment - ",n.paymentData.name," "),ce(10),ot("formGroup",n.paymentForm),ce(6),ot("ngIf",n.submitted&&n.hasError("name","required")),ce(5),ot("ngIf",n.submitted&&n.hasEmailError("email","required"))}}function cet(e,t){1&e&&(C(0,"div",179)(1,"div"),I(2," Your Name is required. "),E()())}function det(e,t){if(1&e&&(C(0,"div",179)(1,"div"),I(2),E()()),2&e){const n=_t();ce(2),hs(" ",n.hasEmailError("referrer_email","required")," ")}}function het(e,t){1&e&&(C(0,"div",179)(1,"div"),I(2," Your Contact Number is required. "),E()())}function uet(e,t){1&e&&(C(0,"div",179)(1,"div"),I(2," Your Friend\u2019s Name is required. "),E()())}function pet(e,t){if(1&e&&(C(0,"div",179)(1,"div"),I(2),E()()),2&e){const n=_t();ce(2),hs(" ",n.hasEmailError("referred_email","required")," ")}}function fet(e,t){1&e&&(C(0,"div",179)(1,"div"),I(2," Your Contact Number is required. "),E()())}function met(e,t){if(1&e&&(C(0,"div",180),I(1),E()),2&e){const n=_t();ce(1),hs(" ",n.errorMessage," ")}}function get(e,t){1&e&&(C(0,"div",181),I(1," Sending your message, please wait... "),E())}function vet(e,t){1&e&&(C(0,"div",180),I(1," Referrer and referred Contact Number cannot be the same "),E())}function yet(e,t){1&e&&(C(0,"div",180),I(1," Referrer and referred emails cannot be the same "),E())}const _et=function(e){return{width:e}};let bet=(()=>{const t=class{onScroll(i){const r=window.scrollY||document.documentElement.scrollTop;this.sectionWidth=Math.min(100,50+r/10)}constructor(i,r,s,o,a,l,c,d,h,u,p,m,v,g){this.renderer=i,this._platformId=r,this.referralService=s,this.pageservice=o,this.metaTagService=a,this.titleService=l,this.blogService=c,this.formBuilder=d,this.http=h,this.projectservice=u,this.modalService=p,this.activeModal=m,this.payementservice=v,this.splineThreeService=g,this.currentPage=1,this.allprojects=[],this.currentLimit=24,this.recentoptions={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],margin:14,responsive:{0:{items:2},480:{items:2},740:{items:3},940:{items:4}},nav:!1},this.clientslider={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!1,pullDrag:!1,dots:!1,slideTransition:"linear",autoplaySpeed:3e3,autoplayTimeout:5e3,autoplayHoverPause:!0,nav:!1,center:!1,navText:['<i class="fas fa-arrow-left"></i>','<i class="fas fa-arrow-right"></i>'],margin:14,responsive:{0:{items:2},480:{items:4},740:{items:4},940:{items:7}}},this.desktopslider={loop:!1,rewind:!0,autoplay:!0,autoplayTimeout:1500,center:!0,dots:!0,autoHeight:!0,autoWidth:!0,smartSpeed:1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.sectionWidth=10,this.closeResult="",this.modalReference=null,this.submitted=!1,this.formData={name:"",email:"",contact:"",rname:"",remail:"",rcontact:""},this.successMessage="",this.errorMessage="",this.isSubmitting=!1,this.isLoading=!1,this.isContactSame=!1,this.isEmailSame=!1,this.tabTitle="Start your eCommerce",this.hasError=(b,x)=>this.paymentForm.controls[b].hasError(x),this.hasEmailError=(b,x)=>"referrer_email"==b?""==this.referralForm.controls.referrer_email.value?"Email is required":"INVALID"==this.referralForm.controls.referrer_email.status?"Invalid Email":this.referralForm.controls.referrer_email.hasError(x):"referred_email"==b?""==this.referralForm.controls.referred_email.value?"Email is required":"INVALID"==this.referralForm.controls.referred_email.status?"Invalid Email":this.referralForm.controls.referred_email.hasError(x):""==this.paymentForm.controls.email.value?"Email is required":"INVALID"==this.paymentForm.controls.email.status?"Invalid Email":this.paymentForm.controls.email.hasError(x),this.hasReferralError=(b,x)=>this.referralForm.controls[b].hasError(x),this.baseUrl=en_baseUrl+"/assets",this.imagepath=en_backendUrl+"/public/",this.get_PageMeta(),this.get_AllProjects()}ngOnInit(){setTimeout(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},500),this.paymentForm=this.formBuilder.group({name:["",Ei.required],email:["",Ei.required]}),this.referralForm=this.formBuilder.group({referrer_name:["",Ei.required],referrer_email:["",[Ei.required,Ei.email,Ei.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],referrer_phone:["",Ei.required],referred_name:["",Ei.required],referred_email:["",[Ei.required,Ei.email,Ei.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],referred_phone:["",Ei.required],referred_message:[""],campaign_id:[""],campaign_source:[""]}),this.splineThreeService.initialize(this.containerRef.nativeElement,"https://prod.spline.design/lOwCHnDGwjVf9GgA/scene.splinecode")}get_PageMeta(){this.pageservice.getpageWithName({pageName:"home"}).subscribe(r=>{200==r.body.code&&(this.titleService.setTitle(r?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:r?.body.result.meta_description},{name:"keywords",content:r?.body.result.meta_keywords}]))})}get_AllProjects(){const r=["634a8b16a314351f5529d71f","634a8473a314351f5529d6b4","674edf39f034ad6b3ba33406","674ee641f034ad6b3ba3342e"];this.projectservice.getAllProjects({limit:this.currentLimit,page:this.currentPage}).subscribe(s=>{if(200===s.code&&s.result&&s.result.length>0){const o=s.result.filter(a=>r.includes(a._id));this.allprojects=[...o]}})}loadMore(){this.currentLimit=this.currentLimit+4,this.get_AllProjects()}stopSlider(){this.sliderInterval&&clearInterval(this.sliderInterval)}onMouseLeave(){this.sliderInterval&&(clearInterval(this.sliderInterval),console.log("Slider stopped"))}onMouseEnter(i){let s=this.allprojects[i].project_images,o=this.imagepath,a=document.getElementsByClassName("galleryimg"+i);this.sliderInterval=setInterval(()=>{$(a).each(function(l){let c=s[(l+Math.floor(Math.random()*s.length))%s.length];$(a).attr("src",o+c)})},900)}openPopup(i){this.modalReference=this.modalService.open(i,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass",size:"lg",backdrop:"static"}).result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}getDismissReason(i){return i===cc.ESC?"by pressing ESC":i===cc.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${i}`}changeTabTitle(i){this.tabTitle=i}getStripPayemts(i,r,s){this.paymentData={name:i,amount:r},this.modalReference=this.modalService.open(s,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass2"}).result.then(a=>{this.closeResult=`Closed with: ${a}`},a=>{this.closeResult=`Dismissed ${this.getDismissReason(a)}`})}submitPayment(){this.submitted=!0,!this.paymentForm.invalid&&this.paymentData&&(this.paymentData.email=this.paymentForm.value.email,this.paymentData.customer_name=this.paymentForm.value.name,this.paymentData.base_url=en_baseUrl,this.payementservice.stripePayments(this.paymentData).subscribe(i=>{200==i.body.code&&(localStorage.setItem("stripe-payment-user",JSON.stringify(this.paymentData)),this.paymentForm.reset(),window.open(i.body.url,"_blank"),this.modalService.dismissAll())}))}closePopUp(){this.modalService.dismissAll()}ngAfterViewInit(){const i=this.videoElement.nativeElement;i.muted=!0,i.loop=!0,i.play().catch(r=>{console.log("Autoplay failed, user interaction may be required:",r)})}playInFullscreenWithAudio(){const i=this.videoElement.nativeElement;i.muted=!1,i.removeAttribute("controls"),i.play().then(()=>{i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen&&i.mozRequestFullScreen()}).catch(r=>{console.log("Error entering fullscreen with audio: ",r)})}onFullscreenChange(){const i=this.videoElement.nativeElement;document.fullscreenElement===i||document.webkitFullscreenElement===i||document.msFullscreenElement===i||document.mozFullScreenElement===i?i.play().catch(r=>{console.log("Could not play in fullscreen mode:",r)}):(i.setAttribute("controls",""),i.muted=!0)}openModal(){const i=document.getElementById("contactModal");this.renderer.addClass(i,"show"),this.renderer.setStyle(i,"display","block"),this.renderer.setStyle(i,"backgroundColor","rgba(0,0,0,0.5)"),document.body.classList.add("modal-open")}closeModal(){const i=document.getElementById("contactModal");this.renderer.removeClass(i,"show"),this.renderer.setStyle(i,"display","none"),document.body.classList.remove("modal-open")}submitReferral(){if(this.submitted=!0,this.referralForm.valid){if(this.isSubmitting=!0,this.isLoading=!0,this.referralForm.value.referrer_email==this.referralForm.value.referred_email)return this.isEmailSame=!0,void(this.isLoading=!1);if(this.referralForm.value.referrer_phone==this.referralForm.value.referred_phone)return this.isContactSame=!0,void(this.isLoading=!1);this.referralForm.valid?this.referralService.addReferral(this.referralForm.value).subscribe(i=>{200==i.body.code?(console.log("Email sent successfully",i),this.successMessage="Thank you for referring your friend! We\u2019ve sent an invitation to your friend and will notify you once they join us. Stay tuned for your rewards!",this.errorMessage="",this.isSubmitting=!1,this.isLoading=!1,this.referralForm.reset(),this.submitted=!1,this.closeModal(),$d().fire({icon:"success",title:"Thank you for referring your friend! We\u2019ve sent an invitation to your friend and will notify you once they join us. Stay tuned for your rewards!",showConfirmButton:!0})):400==i.body.code&&(this.errorMessage=i.body.message,this.isSubmitting=!1,this.isLoading=!1,setTimeout(()=>{this.errorMessage="",this.submitted=!1},5e3))},i=>{console.error("Error sending email",i),this.errorMessage="Failed to send your message. Please try again later.",this.isSubmitting=!1,this.isLoading=!1,setTimeout(()=>{this.errorMessage=""},5e3)}):(this.errorMessage="Please fill in all required fields.",this.isSubmitting=!1,this.isLoading=!1,setTimeout(()=>{this.errorMessage=""},3e3))}}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(ga),Ne(uh),Ne(YT),Ne(tu),Ne(wd),Ne(Md),Ne(UJe),Ne(V0),Ne(ac),Ne(y1),Ne(J0),Ne(mf),Ne(b1),Ne(v1))},t.\u0275cmp=qi({type:t,selectors:[["app-ecommerce"]],viewQuery:function(r,s){if(1&r&&(bl(VJe,5),bl(jJe,7)),2&r){let o;Yr(o=$r())&&(s.videoElement=o.first),Yr(o=$r())&&(s.containerRef=o.first)}},hostBindings:function(r,s){1&r&&zt("scroll",function(a){return s.onScroll(a)},0,Sm)("fullscreenchange",function(a){return s.onFullscreenChange(a)},!1,M0)},decls:509,vars:30,consts:[[1,"cbanner","bannerbgcolor"],[1,"container"],[1,"row"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],["alt","",1,"img-globe","floatimg",3,"src"],[1,"banner","vh-100"],[1,"d-flex","flex-column","justify-content-center","h-100","align-items-start"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"contentbl"],[1,"h1","size90"],[1,"barcely"],[1,"position-absolute","banner-left-content","content-left"],[1,"d-flex","flex-column","justify-contente-arround","p-0","float-start",2,"height","130px","list-style","none","justify-content","space-between"],["href","https://www.instagram.com/pixtar.ae/","target","_blank",1,""],["alt","","width","15",3,"src"],["href","https://www.facebook.com/pixtar.ae/","target","_blank",1,""],["alt","","width","10",3,"src"],["href","https://www.linkedin.com/company/pixtar-ae/","target","_blank",1,""],["href","https://wa.me/+971527930781","target","_blank",1,"whatsapp-icon2","slideUpReturn","tabmob"],["alt","whatsapp","width","18",3,"src"],[1,"d-flex","flex-column","justify-contente-center","left-content2"],[1,"position-absolute","start-50","translate-middle","down-arrow"],["href","/ecommerce#packages",1,"cstbtn"],[1,"text"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"bannerbgcolor","cstheight"],[1,"cstvideo"],[1,"container-fluid"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto",3,"ngStyle"],[1,"video-frame"],["width","100%","muted","","autoplay","",2,"cursor","pointer",3,"click"],["myVideo",""],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],[1,"aboutbrand","mrem55"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],[1,"about-brand"],[1,"size53","weight300"],[1,"textcolor2"],[1,"textcolor1"],[1,"barcy","text-color"],[1,"topdist","bannerdrk","hard-work"],[1,"container","d-none","d-sm-none","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],[1,"d-flex","justify-content-start","align-items-center","cmargin"],[1,"text-white","h1"],[1,"line"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto","m-auto"],["class","col-md-6",4,"ngFor","ngForOf"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"customslider","d-block","d-sm-block","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],[1,"col-md-10","offset-md-1"],[3,"options"],[4,"ngFor","ngForOf"],[1,"section","bannerdrk","mt-md-5","mt-sm-4","mt-4"],[1,"col-md-10","m-auto"],[1,"d-flex","flex-column","justify-content-center","align-items-center","video-block"],[1,"position-relative"],[1,"float-start","cwd243"],["href","/contact",1,"cstbtn","cstbtn128","textcolor5"],[1,"text","text128","textcolor5"],[1,"section","choosesection"],[1,"choose-section"],[1,"h1","weight300","text-center"],[1,"textcolor1","size53"],[1,"mtrem5"],[1,"col-md-4"],[1,"box","text-center"],["alt","",1,"mb30",3,"src"],[1,"size18","textcolor1","weight600","p1"],[1,"size18","textcolor3","p2"],[1,"col-md-4","mt-md-0","mt-sm-4","mb-md-0","mb-sm-4","mb-4","mt-4"],[1,"section","client","bg1","backgroundbg"],[1,"logos"],[1,"fontsize12","mb-0","semibold"],["carouselSlide",""],[1,"section","packages","pt-0","backgroundbg"],[1,"col-md-6","col-sm-11","col-11","mx-auto"],[1,"packages-section","mbrem5"],[1,"wght500","text-center","mb-3","mt-0"],[1,"size24","textcolor2","text-center"],["id","packages",1,"col-lg-11","col-md-10","col-sm-11","col-11","mx-auto"],["packages",""],[1,"row","justify-content-center"],[1,"col-xxl-5","col-xl-5","col-lg-8","col-md-10"],[1,"card","bgblk"],[1,"card-body"],[1,"brd"],[1,"d-flex"],[1,"icons"],[1,"circle1","pulse"],[1,"circle2"],[1,"size16"],[1,"textcolor3","size90"],[1,"size90","weight700","text-white","mt-0","mb-4"],[1,"box","mb-2"],[1,"text-white","weight500","mb-2","mt-0","size20"],[1,"size16","textcolor3"],[1,"d-block"],["href","/contact",1,"cstbtn"],[1,"box"],[1,"cstbtn",3,"click"],[1,"col-xxl-7","col-xl-7","col-lg-8","col-md-10","mt-xl-0","mt-lg-5","mt-md-5","mt-sm-5","mt-5"],[1,"card","shadow",2,"max-width","600px"],[1,"text-start","py-3","weight500","medium","size53"],["id","nav-tab","role","tablist",1,"nav","nav-tabs","mb-3"],["id","nav-home-tab","data-bs-toggle","tab","data-bs-target","#nav-home","type","button","role","tab","aria-controls","nav-home","aria-selected","true",1,"nav-link","active","weight500",3,"click"],["id","nav-profile-tab","data-bs-toggle","tab","data-bs-target","#nav-profile","type","button","role","tab","aria-controls","nav-profile","aria-selected","false",1,"nav-link","weight500",3,"click"],["alt","",3,"src"],["id","nav-contact-tab","data-bs-toggle","tab","data-bs-target","#nav-contact","type","button","role","tab","aria-controls","nav-contact","aria-selected","false",1,"nav-link","weight500",3,"click"],["id","nav-tabContent",1,"tab-content"],["id","nav-home","role","tabpanel","aria-labelledby","nav-home-tab",1,"tab-pane","fade","active","show"],[1,"cstprng-table"],[1,"cstprng-table-header"],[1,"cstprng-table-cost","size53","textcolor1","weight500","mt-0"],[1,"cstprng-table-about","size20","textcolor1","weight500"],[1,"divider"],[1,"cstprng-table-features"],[1,"size20","textcolor1","weight500"],[1,"col-md-12"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-start","align-items-start"],[1,"ms-2","me-auto"],[1,"fw-bold"],[1,"list-group-item","d-flex","justify-content-start","align-items-center"],[1,"fa","fa-check"],[1,"ms-2"],[1,"cstprng-table-cta","position-relative","mtrem3","started"],[1,"size14","cntlink"],["href","/contact",1,"text-decoration-underline"],["id","nav-profile","role","tabpanel","aria-labelledby","nav-profile-tab",1,"tab-pane","fade"],["id","nav-contact","role","tabpanel","aria-labelledby","nav-contact-tab",1,"tab-pane","fade"],["style","z-index: 0;"],["payments",""],["id","contactModal","tabindex","-1","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","modalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["method","post",3,"formGroup","ngSubmit"],[1,"row","mrl-0","mb-3",2,"padding","5px 5px"],[1,"form-floating","mb-3"],["type","text","name","referrer_name","autocomplete","off","formControlName","referrer_name","id","floatingInput","placeholder","your name",1,"form-control"],["for","floatingInput",1,"mt-0"],["class","error",4,"ngIf"],["type","email","name","referrer_email","autocomplete","off","formControlName","referrer_email","id","floatingInput","placeholder","email",1,"form-control"],["type","number","name","referrer_phone","autocomplete","off","formControlName","referrer_phone","id","floatingInput","placeholder","name","min","0",1,"form-control"],["type","text","name","referred_name","autocomplete","off","formControlName","referred_name","id","floatingInput","placeholder","name",1,"form-control"],["type","email","name","referred_email","autocomplete","off","formControlName","referred_email","id","floatingInput","placeholder","email",1,"form-control"],["type","number","name","referred_phone","autocomplete","off","formControlName","referred_phone","id","floatingInput","placeholder","name","min","0",1,"form-control"],[1,"d-flex","justify-content-center","align-items-center","mt-4"],[1,"text-center","text-sm-start","me-3"],["type","submit","name","submit","value","Submit",1,"submit"],[1,"input-group1"],["type","cancel",1,"button","text-center",3,"click"],["class","alert alert-danger mt-3","role","alert",4,"ngIf"],["class","alert alert-info mt-3","role","alert",4,"ngIf"],[1,"col-md-6"],[1,"imgblock"],["target","_blank",3,"href"],["alt","",3,"src","mouseenter","mouseleave"],[1,"box-name","text-center"],[1,"mb-0","textcolor5","h2"],[1,"textcolor4"],[3,"innerHTML"],["carouselSlide","",3,"id"],["target","_self",3,"href"],[3,"src"],[1,"team-img","position-relative","overflow-hidden"],["href","#","target","_blank","rel","noopener noreferrer"],[3,"src","alt"],["id","modal-basic-title",1,"modal-title"],["id","content"],[1,""],["method","post","novalidate","",3,"formGroup","ngSubmit"],["type","text","name","name","autocomplete","off","formControlName","name","id","floatingInput","placeholder","name",1,"form-control"],["type","email","name","email","autocomplete","off","formControlName","email","id","floatingInput","placeholder","email",1,"form-control"],["type","submit","name","submit","value","Pay Now",1,"submit"],[1,"error"],["role","alert",1,"alert","alert-danger","mt-3"],["role","alert",1,"alert","alert-info","mt-3"]],template:function(r,s){if(1&r){const o=Xr();C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),ue(4,"img",4),C(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8),I(9,"Sell Globally with "),E(),C(10,"h1",8),I(11,"Custom"),C(12,"span",9),I(13," eCommerce"),E()()()()(),C(14,"div",10)(15,"ul",11)(16,"li")(17,"a",12),ue(18,"img",13),E()(),C(19,"li")(20,"a",14),ue(21,"img",15),E()(),C(22,"li")(23,"a",16),ue(24,"img",13),E()(),C(25,"li")(26,"a",17),ue(27,"img",18),E()()(),C(28,"div",19)(29,"p"),I(30,"We know what it takes to make "),E(),C(31,"p"),I(32,"A successful eCommerce Store"),E()()()()(),C(33,"div",20)(34,"p")(35,"a",21)(36,"span",22),I(37," Explore Packages"),E(),C(38,"span",23),ue(39,"i",24),E()()()()()(),ue(40,"div",25),C(41,"section",26)(42,"div",27)(43,"div",2)(44,"div",28)(45,"div",29)(46,"video",30,31),zt("click",function(){return s.playInFullscreenWithAudio()}),ue(48,"source",32)(49,"source",33),I(50," Your browser does not support the video tag. "),E()()()()()(),C(51,"section",34)(52,"div",1)(53,"div",2)(54,"div",35)(55,"div",36)(56,"h2",37)(57,"span",38),I(58,"A beautiful online store isn\u2019t enough "),E(),C(59,"span",39),I(60," \u2014you need one that converts. "),E(),I(61,", "),C(62,"span",38),I(63,"Whether it\u2019s Magento, Shopify, or Node.js, "),E(),C(64,"span",39),I(65,"we create custom "),C(66,"span",40),I(67," eCommerce"),E(),I(68,". platforms that perform, scale, and grow with you."),E()()()()()()(),C(69,"section",41)(70,"div",42)(71,"div",2)(72,"div",35)(73,"div",43)(74,"h1",44),ue(75,"div",45),I(76," Recent Works "),E()()(),C(77,"div",46)(78,"div",2),mt(79,HJe,9,8,"div",47),E()()()(),C(80,"div",48)(81,"div",49)(82,"div",43)(83,"h1",44),ue(84,"div",45),I(85," Recent Works "),E()()(),C(86,"owl-carousel-o",50),mt(87,WJe,2,1,"ng-container",51),E()(),C(88,"div",52)(89,"div",2)(90,"div",53)(91,"div",54)(92,"div",55)(93,"div",56)(94,"p")(95,"a",57)(96,"span",58),I(97,"Book A Consultation"),E(),C(98,"span",23),ue(99,"i",24),E()()()()()()()()()(),C(100,"section",59)(101,"div",1)(102,"div",2)(103,"div",35)(104,"div",60)(105,"p",61)(106,"span",62),I(107,"Why Choose Pixtar?"),E()(),C(108,"div",63)(109,"div",2)(110,"div",64)(111,"div",65),ue(112,"img",66),C(113,"p",67),I(114,"Crafted With The Golden Ratio"),E(),C(115,"p",68),I(116,"Everything we design follows the timeless principles of the golden ratio\u2014creating perfect harmony between form and function."),E()()(),C(117,"div",69)(118,"div",65),ue(119,"img",66),C(120,"p",67),I(121,"Custom Solutions. No Templates. Ever."),E(),C(122,"p",68),I(123,"Every brand is unique, and so is our approach. We build from scratch, ensuring your business is reflected in every detail."),E()()(),C(124,"div",64)(125,"div",65),ue(126,"img",66),C(127,"p",67),I(128,"Beyond The Limits, Always Transparent"),E(),C(129,"p",68),I(130,"We don\u2019t just deliver; we partner with you, going above and beyond with 100% transparency at every step of the way."),E()()()()()()()()()(),C(131,"section",70)(132,"div",1)(133,"div",2)(134,"div",35)(135,"div",71)(136,"h6",72),I(137,"OUR CLIENTS INCLUDE\u2026"),E(),C(138,"owl-carousel-o",50),$o(139),mt(140,qJe,3,1,"ng-template",73),mt(141,XJe,3,1,"ng-template",73),mt(142,YJe,3,1,"ng-template",73),mt(143,$Je,3,1,"ng-template",73),mt(144,KJe,3,1,"ng-template",73),mt(145,ZJe,3,1,"ng-template",73),mt(146,QJe,3,1,"ng-template",73),mt(147,JJe,3,1,"ng-template",73),mt(148,eet,3,1,"ng-template",73),mt(149,tet,3,1,"ng-template",73),mt(150,net,3,1,"ng-template",73),mt(151,iet,3,1,"ng-template",73),mt(152,ret,3,1,"ng-template",73),Ko(),E()()()()()(),C(153,"section",74)(154,"div",1)(155,"div",2)(156,"div",75)(157,"div",76)(158,"h2",77)(159,"span",62),I(160,"What\u2019s Included in Our Branding Packages?"),E()(),C(161,"p",78),I(162,"Whether you\u2019re starting from scratch or need a brand overhaul, we\u2019ve got you covered."),E()()(),C(163,"div",79,80)(165,"div",81)(166,"div",82)(167,"div",83)(168,"div",84)(169,"div",85)(170,"div",86)(171,"div",87),ue(172,"div",88)(173,"div",89),E(),C(174,"div",22)(175,"p",90),I(176,"Slots available"),E()()()(),C(177,"h1",91),I(178,"Join "),E(),C(179,"h1",92),I(180,"Pixtar"),E(),C(181,"div",93)(182,"h4",94),I(183,"Book a 15-min intro Call"),E(),C(184,"p",95),I(185,"Learn more about how Pixtar "),C(186,"span",96),I(187," works and how it can help you."),E()(),C(188,"a",97)(189,"span",23),ue(190,"i",24),E()()(),C(191,"div",98)(192,"h4",94),I(193,"Refer a friend & earn"),E(),C(194,"p",95),I(195,"Earn 5% monthly recurring "),C(196,"span",96),I(197," commission for each referral. "),E(),C(198,"a",99),zt("click",function(){return s.openModal()}),C(199,"span",22),I(200," Get Started"),E(),C(201,"span",23),ue(202,"i",24),E()()()()()()(),C(203,"div",100)(204,"div",101)(205,"h2",102),I(206),E(),C(207,"nav")(208,"div",103)(209,"button",104),zt("click",function(){return s.changeTabTitle("Start your eCommerce")}),I(210," Shopify "),E(),C(211,"button",105),zt("click",function(){return s.changeTabTitle("Grow eCommerce Globally")}),ue(212,"img",106),I(213," Magento "),E(),C(214,"button",107),zt("click",function(){return s.changeTabTitle("Premium eCommerce")}),I(215," Custom Commerce "),E()()(),C(216,"div",108)(217,"div",109)(218,"div",110)(219,"div",111)(220,"h4",112),I(221,"AED 14,995"),E(),C(222,"h5",113),I(223,"Perfect for startups."),E()(),ue(224,"div",114),C(225,"div",115)(226,"h5",116),I(227,"What\u2019s included"),E(),C(228,"div",2)(229,"div",117)(230,"ul",118)(231,"li",119)(232,"div",120)(233,"div",121),I(234,"Tailored Ui/Ux Designing"),E()()(),C(235,"li",122),ue(236,"i",123),C(237,"span",124),I(238,"Custom Website Design 1 Theme Option"),E()(),C(239,"li",119)(240,"div",120)(241,"div",121),I(242,"Development"),E()()(),C(243,"li",122),ue(244,"i",123),C(245,"span",124),I(246,"Customized Front-End Development"),E()(),C(247,"li",122),ue(248,"i",123),C(249,"span",124),I(250,"Mobile, Tablet, & Desktop Responsive Design"),E()(),C(251,"li",122),ue(252,"i",123),C(253,"span",124),I(254,"Unlimited Products Listing"),E()(),C(255,"li",122),ue(256,"i",123),C(257,"span",124),I(258,"Ability for Future Enhancements"),E()(),C(259,"li",122),ue(260,"i",123),C(261,"span",124),I(262,"Hosting Support"),E()(),C(263,"li",119)(264,"div",120)(265,"div",121),I(266,"Standout features"),E()()(),C(267,"li",122),ue(268,"i",123),C(269,"span",124),I(270,"Contact us Email Integration"),E()(),C(271,"li",122),ue(272,"i",123),C(273,"span",124),I(274,"Payment Gateway Integration"),E()()()()()(),C(275,"div",125)(276,"div",20)(277,"p")(278,"a",99),zt("click",function(){Zn(o);const l=Yo(450);return ti(s.getStripPayemts("Shopify",14995,l))}),C(279,"span",22),I(280," Get Started"),E(),C(281,"span",23),ue(282,"i",24),E()()()(),C(283,"p",126),I(284,"Or "),C(285,"a",127),I(286,"book a call"),E()()()()(),C(287,"div",128)(288,"div",110)(289,"div",111)(290,"h4",112),I(291,"AED 24,995"),E(),C(292,"h5",113),I(293,"A full brand identity suite."),E()(),ue(294,"div",114),C(295,"div",115)(296,"h5",116),I(297,"What\u2019s included"),E(),C(298,"div",2)(299,"div",117)(300,"ul",118)(301,"li",119)(302,"div",120)(303,"div",121),I(304,"Tailored Ui/Ux Designing"),E()()(),C(305,"li",122),ue(306,"i",123),C(307,"span",124),I(308,"Custom Website Design upto 3 Theme Option"),E()(),C(309,"li",119)(310,"div",120)(311,"div",121),I(312,"Development"),E()()(),C(313,"li",122),ue(314,"i",123),C(315,"span",124),I(316,"Custom Front-End Development"),E()(),C(317,"li",122),ue(318,"i",123),C(319,"span",124),I(320,"Mobile, Tablet, and Desktop Responsive Design"),E()(),C(321,"li",122),ue(322,"i",123),C(323,"span",124),I(324,"Up to 20 Pages (Based on Final Requirements)"),E()(),C(325,"li",122),ue(326,"i",123),C(327,"span",124),I(328,"Ability for Future Enhancements"),E()(),C(329,"li",122),ue(330,"i",123),C(331,"span",124),I(332,"Hosting Support"),E()(),C(333,"li",119)(334,"div",120)(335,"div",121),I(336,"Standout features"),E()()(),C(337,"li",122),ue(338,"i",123),C(339,"span",124),I(340,"Admin Panel and User Management"),E()(),C(341,"li",122),ue(342,"i",123),C(343,"span",124),I(344,"SEO-Optimized Development"),E()(),C(345,"li",122),ue(346,"i",123),C(347,"span",124),I(348,"Google My Business Setup"),E()(),C(349,"li",122),ue(350,"i",123),C(351,"span",124),I(352,"Appointment Booking Integration"),E()(),C(353,"li",122),ue(354,"i",123),C(355,"span",124),I(356,"Contact Us Email Integration"),E()(),C(357,"li",122),ue(358,"i",123),C(359,"span",124),I(360,"Google Maps Integration"),E()()()()()(),C(361,"div",125)(362,"div",20)(363,"p")(364,"a",99),zt("click",function(){Zn(o);const l=Yo(450);return ti(s.getStripPayemts("Magento",24995,l))}),C(365,"span",22),I(366," Get Started"),E(),C(367,"span",23),ue(368,"i",24),E()()()(),C(369,"p",126),I(370,"Or "),C(371,"a",127),I(372,"book a call"),E()()()()(),C(373,"div",129)(374,"div",110)(375,"div",111)(376,"h4",112),I(377,"AED 59,995"),E(),C(378,"h5",113),I(379,"The ultimate package with unlimited requests."),E()(),ue(380,"div",114),C(381,"div",115)(382,"h5",116),I(383,"What\u2019s included"),E(),C(384,"div",2)(385,"div",117)(386,"ul",118)(387,"li",119)(388,"div",120)(389,"div",121),I(390,"Tailored Ui/Ux Designing"),E()()(),C(391,"li",122),ue(392,"i",123),C(393,"span",124),I(394,"Custom Website Design Upto 5 Theme Options"),E()(),C(395,"li",119)(396,"div",120)(397,"div",121),I(398,"Development & Standout Features"),E()()(),C(399,"li",122),ue(400,"i",123),C(401,"span",124),I(402,"Website Integration with CRM"),E()(),C(403,"li",122),ue(404,"i",123),C(405,"span",124),I(406,"Integration with other websites"),E()(),C(407,"li",122),ue(408,"i",123),C(409,"span",124),I(410,"Access to your Partners & Distributers to Create and Manage thier Account"),E()(),C(411,"li",122),ue(412,"i",123),C(413,"span",124),I(414,"User Pro\ufb01le Management"),E()(),C(415,"li",122),ue(416,"i",123),C(417,"span",124),I(418,"Unlimited Brochures Download options"),E()(),C(419,"li",122),ue(420,"i",123),C(421,"span",124),I(422,"WhatsApp Integration"),E()(),C(423,"li",122),ue(424,"i",123),C(425,"span",124),I(426,"Live Chat Integration"),E()(),C(427,"li",122),ue(428,"i",123),C(429,"span",124),I(430,"Google Reviews Integration"),E()(),C(431,"li",122),ue(432,"i",123),C(433,"span",124),I(434,"Social Media Live Updates Integration"),E()()()()()(),C(435,"div",125)(436,"div",20)(437,"p")(438,"a",99),zt("click",function(){Zn(o);const l=Yo(450);return ti(s.getStripPayemts("Custom Commerce",59995,l))}),C(439,"span",22),I(440," Get Started"),E(),C(441,"span",23),ue(442,"i",24),E()()()(),C(443,"p",126),I(444,"Or "),C(445,"a",127),I(446,"book a call"),E()()()()()()()()()()()()(),ue(447,"app-testimonial")(448,"app-faq-component"),mt(449,aet,30,4,"ng-template",130,131,xd),C(451,"div",132)(452,"div",133)(453,"div",134)(454,"div",135)(455,"h5",136),I(456,"REFER A FRIEND & EARN"),E(),C(457,"button",137),zt("click",function(){return s.closeModal()}),C(458,"span",138),I(459," \xd7 "),E()()(),C(460,"div",139)(461,"form",140),zt("ngSubmit",function(){return s.submitReferral()}),C(462,"div",141)(463,"h4")(464,"strong"),I(465,"Your Details:"),E()(),C(466,"div",142),ue(467,"input",143),C(468,"label",144),I(469,"Full Name"),E(),mt(470,cet,3,0,"div",145),E(),C(471,"div",142),ue(472,"input",146),C(473,"label",144),I(474,"Email Address"),E(),mt(475,det,3,1,"div",145),E(),C(476,"div",142),ue(477,"input",147),C(478,"label",144),I(479,"Contact Number"),E(),mt(480,het,3,0,"div",145),E(),C(481,"h4")(482,"strong"),I(483,"Your Friend\u2019s Details:"),E()(),C(484,"div",142),ue(485,"input",148),C(486,"label",144),I(487,"Full Name"),E(),mt(488,uet,3,0,"div",145),E(),C(489,"div",142),ue(490,"input",149),C(491,"label",144),I(492,"Email Address"),E(),mt(493,pet,3,1,"div",145),E(),C(494,"div",142),ue(495,"input",150),C(496,"label",144),I(497,"Contact Number"),E(),mt(498,fet,3,0,"div",145),E(),C(499,"div",151)(500,"div",152),ue(501,"input",153),E(),C(502,"div",154)(503,"button",155),zt("click",function(){return s.closeModal()}),I(504,"Cancel"),E()()()()(),mt(505,met,2,1,"div",156),mt(506,get,2,0,"div",157),mt(507,vet,2,0,"div",156),mt(508,yet,2,0,"div",156),E()()()()}2&r&&(ce(4),Ue("src","",s.baseUrl,"/img/three-d-objects/ecommerce.png",De),ce(14),Ue("src","",s.baseUrl,"/img/home/social-media/instagram.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/social-media/facebook.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/social-media/linkedin.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/whatsapp.svg",De),ce(17),ot("ngStyle",nl(28,_et,s.sectionWidth+"%")),ce(4),Ue("src","",s.baseUrl,"/eCommerce.mp4",De),ce(1),Ue("src","",s.baseUrl,"/eCommerce.mp4",De),ce(30),ot("ngForOf",s.allprojects),ce(7),ot("options",s.recentoptions),ce(1),ot("ngForOf",s.allprojects),ce(25),Ue("src","",s.baseUrl,"/img/home/art-icons/craft.svg",De),ce(7),Ue("src","",s.baseUrl,"/img/home/art-icons/solution.svg",De),ce(7),Ue("src","",s.baseUrl,"/img/home/art-icons/beyond.svg",De),ce(12),ot("options",s.clientslider),ce(68),La(s.tabTitle),ce(6),Ue("src","",s.baseUrl,"/img/services/shock.png",De),ce(249),ot("formGroup",s.referralForm),ce(9),ot("ngIf",s.submitted&&s.hasReferralError("referrer_name","required")),ce(5),ot("ngIf",s.submitted&&s.hasEmailError("referrer_email","required")),ce(5),ot("ngIf",s.submitted&&s.hasReferralError("referrer_phone","required")),ce(8),ot("ngIf",s.submitted&&s.hasReferralError("referred_name","required")),ce(5),ot("ngIf",s.submitted&&s.hasEmailError("referred_email","required")),ce(5),ot("ngIf",s.submitted&&s.hasReferralError("referred_phone","required")),ce(7),ot("ngIf",s.errorMessage),ce(1),ot("ngIf",s.isLoading&&!s.isEmailSame&&!s.isContactSame),ce(1),ot("ngIf",s.isContactSame),ce(1),ot("ngIf",s.isEmailSame))},dependencies:[Ba,il,I0,ly,Bm,cy,sy,oy,dy,jm,z0,W0,uf,lx,_1],styles:['.barcy[_ngcontent-%COMP%]{font-family:barcelony,sans-serif}.text-color[_ngcontent-%COMP%]{color:#da9777}.h1[_ngcontent-%COMP%]{color:#1d1d1f;font-family:Montserrat,sans-serif;margin-top:0}.h1[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{font-weight:100;color:#da9777;font-family:barcelony,sans-serif}.cbanner[_ngcontent-%COMP%]{min-height:100vh;height:100%;padding:0!important}.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{position:absolute;right:-19rem;top:30%;width:500px}@media (max-width: 1920px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:-6rem;width:400px;top:28%}}@media (max-width: 1650px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:0rem}}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{width:300px;top:33%}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{width:290px;top:30%}}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:3%}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{display:none;width:100%;top:18%;opacity:.5;object-fit:cover;left:0;right:0}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{height:80vh!important}}@media (max-width: 1788px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:1165px}}@media (max-width: 1680px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:100%}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:1053px}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:880px}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:770px}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:auto}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:370px;padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:315px}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{position:relative}@media (max-width: 575px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{left:3px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{display:flex;width:404px;justify-content:start;align-items:center;left:auto!important;bottom:3%!important;margin-left:-7rem}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{margin-left:-3rem}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{margin-left:-2rem}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{margin-left:0rem}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px;height:12px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:18px;line-height:normal;font-weight:400}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{position:relative!important;left:0%!important;bottom:7rem!important}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:315px;bottom:3rem!important}}@media (max-width: 345px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:auto;padding:0}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p.text-color[_ngcontent-%COMP%]{font-weight:600}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:6rem}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:2rem}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:1rem}}.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:9%}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:14%}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:5%;left:55%!important}}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:auto;margin-top:-50px}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{margin-top:-30px}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}}.cstheight[_ngcontent-%COMP%]{height:378px;display:flex;flex-direction:column;justify-content:center}@media (max-width: 480px){.cstheight[_ngcontent-%COMP%]{height:200px}}.cstvideo[_ngcontent-%COMP%]{position:relative;z-index:1;margin-top:-15rem}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]{margin-top:-11rem}}@media (max-width: 480px){.cstvideo[_ngcontent-%COMP%]{margin-top:-5rem}}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]   #aboutvideo[_ngcontent-%COMP%]{height:100%}}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]{position:relative;text-align:center}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{box-shadow:0 23px 26px #0000004a}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;width:100%;top:0}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]{transition:.3s ease-in-out;display:flex;opacity:0;position:absolute;bottom:0;left:0;right:0;width:100%;padding:20px;height:100%;background-color:#00000080;margin:0 auto;flex-direction:column;justify-content:center;align-items:center}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:54px;height:54px;object-fit:contain}@media (max-width: 768px){.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:44px}}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]:hover   .text-block[_ngcontent-%COMP%]{display:flex;cursor:pointer;justify-content:center;align-items:center;opacity:1}.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:106px}@media (max-width: 1440px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:80px}}@media (max-width: 1199px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:70px}}@media (max-width: 1024px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:55px}}@media (max-width: 991px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:1.5}}.hard-work[_ngcontent-%COMP%]{margin:0;padding:0 0 30px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]{padding:20px 0 0}}.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:32px;margin-top:15px;font-weight:600}@media (max-width: 1366px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:18px}}.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{color:#fff;font-size:30px;font-weight:600}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{font-size:28px}}.hard-work[_ngcontent-%COMP%]   .rlimg[_ngcontent-%COMP%]{width:30px}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]{padding:40px 10px 50px 0}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{height:24px;width:4px;top:6px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{margin-left:30px;width:4px;left:-5px;top:4px}}.hard-work[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]{padding:10px 30px;margin-bottom:20px}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;transition:transform .9s ease}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.hard-work[_ngcontent-%COMP%]   .bannerdrk[_ngcontent-%COMP%]{background-color:#000!important}.cwd243[_ngcontent-%COMP%]{position:relative;width:195px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]{color:#1d1d1f!important;font-weight:600;display:flex;justify-content:space-between!important;align-items:center}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{position:relative;right:auto!important;width:auto;transition:.5s all ease-in-out}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]{letter-spacing:1px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{border:1px dashed #6e6e73;height:75px;width:75px;display:flex;justify-content:center;align-items:center;position:absolute;border-radius:50px;transition:.5s all ease-in-out;right:-4px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{height:60px;width:60px;right:5px}}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{right:-10px;height:50px;width:50px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{height:45px;width:45px}}.cstbtn[_ngcontent-%COMP%]{cursor:pointer}.cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:135px}@media (max-width: 480px){.cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;width:140px}}.choosesection[_ngcontent-%COMP%]{background-color:#eeedf0}.choosesection[_ngcontent-%COMP%]   .choose-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .p1[_ngcontent-%COMP%]{margin-bottom:20px!important}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage{display:flex;justify-content:center;align-items:center;text-align:center}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage img{width:100%;height:57px;object-fit:contain;margin:0 auto;padding:0 20px}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage .owl-items{margin-right:14px!important}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]{padding:30px;border-radius:50px;width:100%;height:auto}@media (max-width: 575px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]{padding:20px 15px;border-radius:20px}}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]{padding:20px 0}}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]{border:1px solid #da9777;background-color:#da9777;color:#fff;border-radius:33px;position:relative;display:inline-block;padding:13px 16px;margin-bottom:20px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .circle1[_ngcontent-%COMP%]{position:absolute;width:24px;height:24px;border-radius:50px;background-color:#000;border:1px solid #000}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .circle2[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50px;background-color:#6e6e73;border:1px solid #707070;position:relative;z-index:2}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-left:10px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{border:1px solid #707070;padding:15px;border-radius:16px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]{justify-content:end;align-items:end;position:relative;top:-7px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:60px;height:60px}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:40px;height:40px}}@media (max-width: 380px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:28px;height:28px}}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{width:50px;height:50px}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{width:40px;height:40px}}@media (max-width: 380px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{width:28px;height:28px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-width:600px;width:100%;border-radius:50px;margin-bottom:0;height:100%;padding:20px 40px}@media (max-width: 1440px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:20px 30px}}@media (max-width: 1199px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:auto}}@media (max-width: 575px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:20px 10px;border-radius:20px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;background-color:#1d1d1f;width:100%;margin:20px 0}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;font-weight:500;border:none}@media (max-width: 991px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]{margin-top:8rem}@media (max-width: 1199px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]{margin-top:4rem}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{justify-content:center;background:#1d1d1f;border-radius:50px;padding:7px}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:none;border:none;color:#fff;border-radius:50px;padding:5px 15px;width:33.33%;font-size:16px}@media (max-width: 1366px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;padding:5px}}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px;padding:6px 5px}}@media (max-width: 380px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:10px;padding:6px 5px}}@media (max-width: 330px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:10px;padding:6px 3px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#da9777}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]{text-align:center;position:relative;z-index:0;left:4rem;bottom:10px}@media (max-width: 991px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]{left:3.5rem}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1d1d1f;cursor:pointer}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 12px 19px -7px #0000004d;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}.packages[_ngcontent-%COMP%]   .mtrem3[_ngcontent-%COMP%]{margin-top:5rem;margin-bottom:2rem}@media (max-width: 991px){.packages[_ngcontent-%COMP%]   .mtrem3[_ngcontent-%COMP%]{margin-top:4rem;margin-bottom:0}}.packages[_ngcontent-%COMP%]   .mtrem3[_ngcontent-%COMP%]   .start-50[_ngcontent-%COMP%]{left:42%!important}  .myCustomModalClass{background-color:#0b0b0bb8}  .myCustomModalClass .modal-dialog.modal-lg{position:relative;display:flex;justify-content:center;align-items:center;margin:0 auto;padding-top:0;height:100%}@media (min-width: 992px){  .myCustomModalClass .modal-dialog.modal-lg{--bs-modal-width: 1055px}}@media (max-width: 1280px){  .myCustomModalClass .modal-dialog.modal-lg{max-width:90%}}@media (max-width: 991px){  .myCustomModalClass .modal-dialog.modal-lg{height:auto;padding:30px 0}}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative{min-height:100%;height:100%;display:block}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative figure{margin-bottom:0}  .myCustomModalClass .btn{background-color:transparent!important;border:none!important;color:#c9bebe!important;font-size:20px;position:fixed;top:1%;right:1%;z-index:2;padding:5px}  .myCustomModalClass .btn:hover{color:#c4b4b480!important}@media (max-width: 991px){  .myCustomModalClass .btn{top:0}}@media (max-width: 480px){  .myCustomModalClass .btn{top:-6px;right:6px}}  .myCustomModalClass .custommodalanchor{border-bottom:1px solid #dfdfdf;padding-bottom:10px;margin-bottom:10px}  .myCustomModalClass .follow p{font-size:16px;margin-bottom:0;margin-left:5px}  .myCustomModalClass .owl-carousel .owl-item img{object-fit:cover}  .myCustomModalClass .link{margin-top:30px}  .myCustomModalClass .hashtaglinks a{display:inline-block;margin:0 2px}  .myCustomModalClass .rightblock{height:750px;overflow:hidden;overflow-y:scroll;padding:10px 0 10px 20px}@media (max-width: 1366px){  .myCustomModalClass .rightblock{height:600px}}@media (max-width: 991px){  .myCustomModalClass .rightblock{height:auto;margin-top:0}}  .myCustomModalClass .rightblock a{color:#0280fe!important}  .myCustomModalClass .leftblock{padding:0}@media (max-width: 991px){  .myCustomModalClass .leftblock{margin-top:0}}  video{position:relative;min-height:100%;width:90%}  .modal-body{padding:10px}.started[_ngcontent-%COMP%]{display:flex;justify-content:center}.started[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:90px;z-index:3}@media (max-width: 480px){.started[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:75px}}.bnrstart[_ngcontent-%COMP%]{left:55%!important}@media (max-width: 991px){.bnrstart[_ngcontent-%COMP%]{left:60%!important}}.bnrstart[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:166px}.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width: 575px){.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;margin:0 auto}}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.footer-collapse[_ngcontent-%COMP%]{padding:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:30px 20px}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none;border-bottom:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;border-radius:0;font-size:20px;font-weight:500;display:flex;color:#fff;align-items:center}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:hover{color:#fff;outline:none}@media (max-width: 1366px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.brdtp[_ngcontent-%COMP%]{border-top:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{background-image:url(plus.2523ff04f32f499f.svg);margin-top:5px;margin-bottom:5px;color:#dadade}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:400}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.bannerdrk[_ngcontent-%COMP%]{background-color:#000}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#101010;border:none;border-radius:0;border-bottom:1px solid #dddddd}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#878787}form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{background-color:transparent;padding:5px 30px;text-decoration:none;border:2px solid #707070;color:#878787;border-radius:30px;font-weight:600}form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{color:#da9777;background:#1d1d1f}@media (max-width: 575px){form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:16px}}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{background:transparent;color:#da9777;border:2px solid #da9777;padding:5px 30px;border-radius:30px;font-weight:600}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:hover{background:#da9777;color:#fff}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:focus{background:#da9777;color:#fff;border-color:#da9777}@media (max-width: 575px){form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{font-size:16px}}.error[_ngcontent-%COMP%]{color:#f33}.close[_ngcontent-%COMP%]{position:absolute;right:10px;background:transparent;box-shadow:none;outline:none;border:1px solid #000;border-radius:50px;height:24px;width:24px;font-size:21px;display:flex;justify-content:center;align-items:center;margin-top:-40px!important}.close[_ngcontent-%COMP%]:hover{background-color:#000;color:#da9777}.pulse[_ngcontent-%COMP%]{margin:100px;display:block;width:22px;height:22px;border-radius:50%;background:#cca92c;cursor:pointer;box-shadow:0 0 #5b5b5f;animation:_ngcontent-%COMP%_pulse 2s infinite}.pulse[_ngcontent-%COMP%]:hover{animation:none}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #5b5b5f}70%{box-shadow:0 0 0 10px #cca92c00}to{box-shadow:0 0 #cca92c00}}  canvas{width:850px!important;height:850px!important;position:absolute;left:0;top:0}']}),e})();const xet=["myVideo"],wet=["canvas"];function Met(e,t){if(1&e){const n=Xr();C(0,"div",116)(1,"div",201)(2,"a",202)(3,"img",203),zt("mouseenter",function(){const s=Zn(n).index;return ti(_t().onMouseEnter(s))})("mouseleave",function(){return Zn(n),ti(_t().onMouseLeave())}),E(),C(4,"div",204)(5,"p",205),I(6),E(),C(7,"p",206),ue(8,"span",207),E()()()()()}if(2&e){const n=t.$implicit,i=t.index,r=_t();ce(2),bd("href",n.link,De),ce(1),Zu("galleryimg",i,""),Uc("src","",r.imagepath,"",n.image,"",De),ce(3),La(n.name),ce(2),ot("innerHTML",n.desc,yd)}}function Cet(e,t){if(1&e&&(C(0,"a",209),ue(1,"img",210),C(2,"div",204)(3,"p",205),I(4),E(),C(5,"p",206),ue(6,"span",207),E()()()),2&e){const n=_t().$implicit,i=_t();bd("href",n.link,De),ce(1),Uc("src","",i.imagepath,"",n.project_images[0],"",De),ce(3),La(n.name),ce(2),ot("innerHTML",n.desc,yd)}}function Pet(e,t){if(1&e&&($o(0),mt(1,Cet,7,5,"ng-template",208),Ko()),2&e){const n=t.$implicit,i=t.index;ce(1),ot("id",n+i)}}function Eet(e,t){1&e&&(C(0,"div",218)(1,"div"),I(2," Name is required. "),E()())}function Oet(e,t){if(1&e&&(C(0,"div",218)(1,"div"),I(2),E()()),2&e){const n=_t(2);ce(2),hs(" ",n.hasEmailError("email","required")," ")}}function Aet(e,t){if(1&e){const n=Xr();C(0,"div",178)(1,"h5",211),I(2),E(),C(3,"button",180),zt("click",function(){return ti(Zn(n).$implicit.dismiss("Cross click"))}),C(4,"span",181),I(5," \xd7 "),E()()(),C(6,"div",182)(7,"div",212)(8,"div",1)(9,"div",2)(10,"div",213)(11,"div",131)(12,"form",214),zt("ngSubmit",function(){return Zn(n),ti(_t().submitPayment())}),C(13,"div",184)(14,"div",185),ue(15,"input",215),C(16,"label",187),I(17,"What's your name?"),E(),mt(18,Eet,3,0,"div",188),E(),C(19,"div",185),ue(20,"input",216),C(21,"label",187),I(22,"What\u2019s your e-mail?"),E(),mt(23,Oet,3,1,"div",188),E(),C(24,"div",194)(25,"div",195),ue(26,"input",217),E(),C(27,"div",197)(28,"button",198),zt("click",function(){return Zn(n),ti(_t().closePopUp())}),I(29,"Cancel"),E()()()()()()()()()()()}if(2&e){const n=_t();ce(2),hs(" Complete Your Payment - ",n.paymentData.name," "),ce(10),ot("formGroup",n.paymentForm),ce(6),ot("ngIf",n.submitted&&n.hasError("name","required")),ce(5),ot("ngIf",n.submitted&&n.hasEmailError("email","required"))}}function Tet(e,t){1&e&&(C(0,"div",218)(1,"div"),I(2," Your Name is required. "),E()())}function Det(e,t){if(1&e&&(C(0,"div",218)(1,"div"),I(2),E()()),2&e){const n=_t();ce(2),hs(" ",n.hasEmailError("referrer_email","required")," ")}}function Iet(e,t){1&e&&(C(0,"div",218)(1,"div"),I(2," Your Contact Number is required. "),E()())}function Ret(e,t){1&e&&(C(0,"div",218)(1,"div"),I(2," Your Friend\u2019s Name is required. "),E()())}function ket(e,t){if(1&e&&(C(0,"div",218)(1,"div"),I(2),E()()),2&e){const n=_t();ce(2),hs(" ",n.hasEmailError("referred_email","required")," ")}}function Net(e,t){1&e&&(C(0,"div",218)(1,"div"),I(2," Your Contact Number is required. "),E()())}function Let(e,t){if(1&e&&(C(0,"div",219),I(1),E()),2&e){const n=_t();ce(1),hs(" ",n.errorMessage," ")}}function Fet(e,t){1&e&&(C(0,"div",220),I(1," Sending your message, please wait... "),E())}function Bet(e,t){1&e&&(C(0,"div",219),I(1," Referrer and referred Contact Number cannot be the same "),E())}function zet(e,t){1&e&&(C(0,"div",219),I(1," Referrer and referred emails cannot be the same "),E())}const Uet=function(e){return{width:e}};let Vet=(()=>{const t=class{onScroll(i){const r=window.scrollY||document.documentElement.scrollTop;this.sectionWidth=Math.min(100,50+r/10)}constructor(i,r,s,o,a,l,c,d,h,u,p,m,v){this.renderer=i,this._platformId=r,this.referralService=s,this.pageservice=o,this.metaTagService=a,this.titleService=l,this.splineThreeService=c,this.formBuilder=d,this.http=h,this.projectservice=u,this.modalService=p,this.activeModal=m,this.payementservice=v,this.currentPage=1,this.allprojects=[],this.currentLimit=24,this.recentoptions={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],margin:14,responsive:{0:{items:2},480:{items:2},740:{items:3},940:{items:4}},nav:!1},this.clientslider={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!1,pullDrag:!1,dots:!1,slideTransition:"linear",autoplaySpeed:3e3,autoplayTimeout:5e3,autoplayHoverPause:!0,nav:!1,center:!1,navText:['<i class="fas fa-arrow-left"></i>','<i class="fas fa-arrow-right"></i>'],margin:14,responsive:{0:{items:3},480:{items:4},740:{items:4},940:{items:7}}},this.desktopslider={loop:!1,rewind:!0,autoplay:!0,autoplayTimeout:1500,center:!0,dots:!0,autoHeight:!0,autoWidth:!0,smartSpeed:1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.sectionWidth=10,this.closeResult="",this.modalReference=null,this.submitted=!1,this.formData={name:"",email:"",contact:"",rname:"",remail:"",rcontact:""},this.successMessage="",this.errorMessage="",this.isSubmitting=!1,this.isLoading=!1,this.isContactSame=!1,this.isEmailSame=!1,this.tabTitle="For Startups",this.hasError=(g,b)=>this.paymentForm.controls[g].hasError(b),this.hasEmailError=(g,b)=>"referrer_email"==g?""==this.referralForm.controls.referrer_email.value?"Email is required":"INVALID"==this.referralForm.controls.referrer_email.status?"Invalid Email":this.referralForm.controls.referrer_email.hasError(b):"referred_email"==g?""==this.referralForm.controls.referred_email.value?"Email is required":"INVALID"==this.referralForm.controls.referred_email.status?"Invalid Email":this.referralForm.controls.referred_email.hasError(b):""==this.paymentForm.controls.email.value?"Email is required":"INVALID"==this.paymentForm.controls.email.status?"Invalid Email":this.paymentForm.controls.email.hasError(b),this.hasReferralError=(g,b)=>this.referralForm.controls[g].hasError(b),this.baseUrl=en_baseUrl+"/assets",this.imagepath=en_backendUrl+"/public/",this.get_PageMeta(),this.get_AllProjects()}ngOnInit(){setTimeout(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},500),this.paymentForm=this.formBuilder.group({name:["",Ei.required],email:["",Ei.required]}),this.referralForm=this.formBuilder.group({referrer_name:["",Ei.required],referrer_email:["",[Ei.required,Ei.email,Ei.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],referrer_phone:["",Ei.required],referred_name:["",Ei.required],referred_email:["",[Ei.required,Ei.email,Ei.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],referred_phone:["",Ei.required],referred_message:[""],campaign_id:[""],campaign_source:[""]})}get_PageMeta(){this.pageservice.getpageWithName({pageName:"home"}).subscribe(r=>{200==r.body.code&&(this.titleService.setTitle(r?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:r?.body.result.meta_description},{name:"keywords",content:r?.body.result.meta_keywords}]))})}get_AllProjects(){const r=["634a8a50a314351f5529d70c","63219cb3b7e88c2c1d945862","634a8b16a314351f5529d71f","634a8473a314351f5529d6b4"];this.projectservice.getAllProjects({limit:this.currentLimit,page:this.currentPage}).subscribe(s=>{if(200===s.code&&s.result&&s.result.length>0){const o=s.result.filter(a=>r.includes(a._id));this.allprojects=[...o]}})}loadMore(){this.currentLimit=this.currentLimit+4,this.get_AllProjects()}stopSlider(){this.sliderInterval&&clearInterval(this.sliderInterval)}onMouseLeave(){this.sliderInterval&&(clearInterval(this.sliderInterval),console.log("Slider stopped"))}onMouseEnter(i){let s=this.allprojects[i].project_images,o=this.imagepath,a=document.getElementsByClassName("galleryimg"+i);this.sliderInterval=setInterval(()=>{$(a).each(function(l){let c=s[(l+Math.floor(Math.random()*s.length))%s.length];$(a).attr("src",o+c)})},900)}changeTabTitle(i){this.tabTitle=i}openPopup(i){this.modalReference=this.modalService.open(i,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass",size:"lg",backdrop:"static"}).result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}getDismissReason(i){return i===cc.ESC?"by pressing ESC":i===cc.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${i}`}getStripPayemts(i,r,s,o){this.paymentData={name:i,amount:r,price_id:o},this.modalReference=this.modalService.open(s,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass2"}).result.then(l=>{this.closeResult=`Closed with: ${l}`},l=>{this.closeResult=`Dismissed ${this.getDismissReason(l)}`})}submitPayment(){this.submitted=!0,!this.paymentForm.invalid&&this.paymentData&&(this.paymentData.email=this.paymentForm.value.email,this.paymentData.customer_name=this.paymentForm.value.name,this.paymentData.base_url=en_baseUrl,this.payementservice.stripeSubscribe(this.paymentData).subscribe(i=>{200==i.body.code&&(localStorage.setItem("stripe-payment-user",JSON.stringify(this.paymentData)),this.paymentForm.reset(),window.open(i.body.url,"_blank"),this.modalService.dismissAll())}))}closePopUp(){this.modalService.dismissAll()}ngAfterViewInit(){const i=this.videoElement.nativeElement;i.muted=!0,i.loop=!0,i.play().catch(s=>{console.log("Autoplay failed, user interaction may be required:",s)}),this.splineThreeService.initialize(this.containerRef.nativeElement,"https://prod.spline.design/lOwCHnDGwjVf9GgA/scene.splinecode")}playInFullscreenWithAudio(){const i=this.videoElement.nativeElement;i.muted=!1,i.removeAttribute("controls"),i.play().then(()=>{i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen&&i.mozRequestFullScreen()}).catch(r=>{console.log("Error entering fullscreen with audio: ",r)})}onFullscreenChange(){const i=this.videoElement.nativeElement;document.fullscreenElement===i||document.webkitFullscreenElement===i||document.msFullscreenElement===i||document.mozFullScreenElement===i?i.play().catch(r=>{console.log("Could not play in fullscreen mode:",r)}):(i.setAttribute("controls",""),i.muted=!0)}openModal(){const i=document.getElementById("contactModal");this.renderer.addClass(i,"show"),this.renderer.setStyle(i,"display","block"),this.renderer.setStyle(i,"backgroundColor","rgba(0,0,0,0.5)"),document.body.classList.add("modal-open")}closeModal(){const i=document.getElementById("contactModal");this.renderer.removeClass(i,"show"),this.renderer.setStyle(i,"display","none"),document.body.classList.remove("modal-open")}submitReferral(){if(this.submitted=!0,this.referralForm.valid){if(this.isSubmitting=!0,this.isLoading=!0,this.referralForm.value.referrer_email==this.referralForm.value.referred_email)return this.isEmailSame=!0,void(this.isLoading=!1);if(this.referralForm.value.referrer_phone==this.referralForm.value.referred_phone)return this.isContactSame=!0,void(this.isLoading=!1);this.referralForm.valid?this.referralService.addReferral(this.referralForm.value).subscribe(i=>{200==i.body.code?(console.log("Email sent successfully",i),this.successMessage="Thank you for referring your friend! We\u2019ve sent an invitation to your friend and will notify you once they join us. Stay tuned for your rewards!",this.errorMessage="",this.isSubmitting=!1,this.isLoading=!1,this.referralForm.reset(),this.submitted=!1,this.closeModal(),$d().fire({icon:"success",title:"Thank you for referring your friend! We\u2019ve sent an invitation to your friend and will notify you once they join us. Stay tuned for your rewards!",showConfirmButton:!0})):400==i.body.code&&(this.errorMessage=i.body.message,this.isSubmitting=!1,this.isLoading=!1,setTimeout(()=>{this.errorMessage="",this.submitted=!1},5e3))},i=>{console.error("Error sending email",i),this.errorMessage="Failed to send your message. Please try again later.",this.isSubmitting=!1,this.isLoading=!1,setTimeout(()=>{this.errorMessage=""},5e3)}):(this.errorMessage="Please fill in all required fields.",this.isSubmitting=!1,this.isLoading=!1,setTimeout(()=>{this.errorMessage=""},3e3))}}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(ga),Ne(uh),Ne(YT),Ne(tu),Ne(wd),Ne(Md),Ne(v1),Ne(V0),Ne(ac),Ne(y1),Ne(J0),Ne(mf),Ne(b1))},t.\u0275cmp=qi({type:t,selectors:[["app-graphics"]],viewQuery:function(r,s){if(1&r&&(bl(xet,5),bl(wet,7)),2&r){let o;Yr(o=$r())&&(s.videoElement=o.first),Yr(o=$r())&&(s.containerRef=o.first)}},hostBindings:function(r,s){1&r&&zt("scroll",function(a){return s.onScroll(a)},0,Sm)("fullscreenchange",function(a){return s.onFullscreenChange(a)},!1,M0)},decls:536,vars:29,consts:[[1,"cbanner","bannerbgcolor"],[1,"container"],[1,"row"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],["alt","",1,"img-globe","floatimg",3,"src"],[1,"banner","vh-100"],[1,"d-flex","flex-column","justify-content-center","h-100","align-items-start"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"contentbl"],[1,"h1","size90"],[1,"barcely"],[1,"position-absolute","banner-left-content","content-left"],[1,"d-flex","flex-column","justify-contente-arround","p-0","float-start",2,"height","130px","list-style","none","justify-content","space-between"],["href","https://www.instagram.com/pixtar.ae/","target","_blank",1,""],["alt","","width","15",3,"src"],["href","https://www.facebook.com/pixtar.ae/","target","_blank",1,""],["alt","","width","10",3,"src"],["href","https://www.linkedin.com/company/pixtar-ae/","target","_blank",1,""],["href","https://wa.me/+971527930781","target","_blank",1,"whatsapp-icon2","slideUpReturn","tabmob"],["alt","whatsapp","width","18",3,"src"],[1,"d-flex","flex-column","justify-contente-center","left-content2"],[1,"position-absolute","start-50","translate-middle","down-arrow"],["href","/branding#packages",1,"cstbtn"],[1,"text"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"bannerbgcolor","cstheight"],[1,"cstvideo"],[1,"container-fluid"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto",3,"ngStyle"],[1,"video-frame"],["width","100%","muted","","autoplay","",2,"cursor","pointer",3,"click"],["myVideo",""],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],[1,"aboutbrand","mrem55"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],[1,"about-brand"],[1,"size53","weight300"],[1,"textcolor1"],[1,"textcolor2"],[1,"barcy","text-color"],[1,"topdist","bannerdrk","hard-work"],[1,"container","d-none","d-sm-none","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],[1,"col-xxl-12","col-xl-11","col-md-11","col-sm-11","col-11","mx-auto"],[1,"d-flex","justify-content-start","align-items-center","cmargin"],[1,"text-white","h1"],[1,"line"],["class","col-md-6",4,"ngFor","ngForOf"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"customslider","d-block","d-sm-block","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],[1,"col-md-10","offset-md-1"],[3,"options"],[4,"ngFor","ngForOf"],[1,"section","bannerdrk","container"],[1,"col-md-10","m-auto"],[1,"d-flex","flex-column","justify-content-center","align-items-center","video-block"],[1,"position-relative"],[1,"float-start","cwd243"],["href","/contact",1,"cstbtn","cstbtn128","textcolor5"],[1,"text","text128","textcolor5"],[1,"section","choosesection"],[1,"choose-section"],[1,"col-md-6","col-sm-11","col-11","mx-auto"],[1,"mbrem8"],[1,"head-section","pt-xxl-3","pt-xl-0"],[1,"wght500","text-center","mb-3","mt-0"],[1,"textcolor1","size53"],[1,"size24","textcolor2","text-center"],[1,"postion-relative","mtrem5","mbrem5"],["href","graphics#package",1,"cstbtn"],[1,"h1","weight300","text-center","para"],[1,"mtrem5"],[1,"col-md-4"],[1,"box","text-center"],["alt","",1,"mb30",3,"src"],[1,"size18","textcolor1","weight600","p1"],[1,"size18","textcolor3","p2"],[1,"col-md-4","mt-md-0","mt-sm-4","mb-md-0","mb-sm-4","mb-4","mt-4"],[1,"section","packages","pt-0","backeeedf0"],[1,"packages-section","mbrem5","mtrem5"],["id","package",1,"col-lg-11","col-md-10","col-sm-11","col-11","mx-auto"],["package",""],[1,"row","justify-content-center"],[1,"col-xxl-5","col-xl-5","col-lg-8","col-md-10"],[1,"card","bgblk"],[1,"card-body"],[1,"brd"],[1,"d-flex"],[1,"icons"],[1,"circle1","pulse"],[1,"circle2"],[1,"size16","textcolor3"],[1,"textcolor3","size90"],[1,"size90","weight700","text-white","mt-0","mb-4"],[1,"box","mb-2"],[1,"text-white","weight500","mb-2","mt-0","size20"],[1,"d-block"],["href","/contact",1,"cstbtn"],[1,"box"],[1,"cstbtn",3,"click"],[1,"col-xxl-7","col-xl-7","col-lg-8","col-md-10","mt-xl-0","mt-lg-5","mt-md-5","mt-sm-5","mt-5"],[1,"card","shadow",2,"max-width","600px"],[1,"text-start","py-3","medium","size53"],["id","nav-tab","role","tablist",1,"nav","nav-tabs","mb-3"],["id","nav-home-tab","data-bs-toggle","tab","data-bs-target","#nav-home","type","button","role","tab","aria-controls","nav-home","aria-selected","true",1,"nav-link","active",3,"click"],["id","nav-profile-tab","data-bs-toggle","tab","data-bs-target","#nav-profile","type","button","role","tab","aria-controls","nav-profile","aria-selected","false",1,"nav-link",3,"click"],["alt","",3,"src"],["id","nav-contact-tab","data-bs-toggle","tab","data-bs-target","#nav-contact","type","button","role","tab","aria-controls","nav-contact","aria-selected","false",1,"nav-link",3,"click"],["id","nav-tabContent",1,"tab-content"],["id","nav-home","role","tabpanel","aria-labelledby","nav-home-tab",1,"tab-pane","fade","active","show"],[1,"cstprng-table"],[1,"cstprng-table-header"],[1,"cstprng-table-cost","size53","textcolor1","weight500","mt-0"],[1,"cstprng-table-about","size20","textcolor1","weight500"],[1,"divider"],[1,"cstprng-table-features"],[1,"size20","textcolor1","weight500"],[1,"col-md-6"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-start","align-items-center","border-0","p-0","mb-2"],[1,"fa","fa-check","me-2"],[1,"cstprng-table-cta","position-relative","mtrem3","started"],[1,"size14","cntlink"],["href","/contact",1,"text-decoration-underline"],["id","nav-profile","role","tabpanel","aria-labelledby","nav-profile-tab",1,"tab-pane","fade"],["id","nav-contact","role","tabpanel","aria-labelledby","nav-contact-tab",1,"tab-pane","fade"],[1,"col-lg-5","col-md-7","col-sm-11","col-11","mx-auto"],[1,"subscription-section","mtrem5"],[1,"section","bannerdrk","faqsection"],[1,"col-md-10","col-sm-11","col-11","m-auto"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-lg-4","col-md-6","col-sm-6"],[1,"creative"],[1,""],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-lg-7","offset-lg-1","col-md-6","col-sm-6"],[1,"custom-collapse","footer-collapse"],["id","accordionExample1",1,"accordion"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","false","aria-controls","collapseOne",1,"accordion-button","collapsed","brdtp"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],[1,"accordion-body"],["id","headingTwo",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed"],["id","collapseTwo","aria-labelledby","headingTwo","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingThree",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseThree","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseThree","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingFour",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFour","aria-expanded","false","aria-controls","collapseFour",1,"accordion-button","collapsed"],["id","collapseFour","aria-labelledby","headingFour","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingFive",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFive","aria-expanded","false","aria-controls","collapseFive",1,"accordion-button","collapsed"],["id","collapseFive","aria-labelledby","headingFive","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingSix",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSix","aria-expanded","false","aria-controls","collapseSix",1,"accordion-button","collapsed"],["id","collapseSix","aria-labelledby","headingSix","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingSeven",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSeven","aria-expanded","false","aria-controls","collapseSeven",1,"accordion-button","collapsed","brdbtm"],["id","collapseSeven","aria-labelledby","headingSeven","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingEight",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseEight","aria-expanded","false","aria-controls","collapseEight",1,"accordion-button","collapsed","brdbtm"],["id","collapseEight","aria-labelledby","headingEight","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingNine",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseNine","aria-expanded","false","aria-controls","collapseNine",1,"accordion-button","collapsed","brdbtm"],["id","collapseNine","aria-labelledby","headingNine","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingTen",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTen","aria-expanded","false","aria-controls","collapseTen",1,"accordion-button","collapsed","brdbtm"],["id","collapseTen","aria-labelledby","headingTen","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingEleven",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseEleven","aria-expanded","false","aria-controls","collapseEleven",1,"accordion-button","collapsed","brdbtm"],["id","collapseEleven","aria-labelledby","headingEleven","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingTweleve",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTweleve","aria-expanded","false","aria-controls","collapseTweleve",1,"accordion-button","collapsed","brdbtm"],["id","collapseTweleve","aria-labelledby","headingTweleve","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["style","z-index: 0;"],["payments",""],["id","contactModal","tabindex","-1","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","modalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["method","post",3,"formGroup","ngSubmit"],[1,"row","mrl-0","mb-3",2,"padding","5px 5px"],[1,"form-floating","mb-3"],["type","text","name","referrer_name","autocomplete","off","formControlName","referrer_name","id","floatingInput","placeholder","your name",1,"form-control"],["for","floatingInput",1,"mt-0"],["class","error",4,"ngIf"],["type","email","name","referrer_email","autocomplete","off","formControlName","referrer_email","id","floatingInput","placeholder","email",1,"form-control"],["type","number","name","referrer_phone","autocomplete","off","formControlName","referrer_phone","id","floatingInput","placeholder","name","min","0",1,"form-control"],["type","text","name","referred_name","autocomplete","off","formControlName","referred_name","id","floatingInput","placeholder","name",1,"form-control"],["type","email","name","referred_email","autocomplete","off","formControlName","referred_email","id","floatingInput","placeholder","email",1,"form-control"],["type","number","name","referred_phone","autocomplete","off","formControlName","referred_phone","id","floatingInput","placeholder","name","min","0",1,"form-control"],[1,"d-flex","justify-content-center","align-items-center","mt-4"],[1,"text-center","text-sm-start","me-3"],["type","submit","name","submit","value","Submit",1,"submit"],[1,"input-group1"],["type","cancel",1,"button","text-center",3,"click"],["class","alert alert-danger mt-3","role","alert",4,"ngIf"],["class","alert alert-info mt-3","role","alert",4,"ngIf"],[1,"imgblock"],["target","_blank",3,"href"],["alt","",3,"src","mouseenter","mouseleave"],[1,"box-name","text-center"],[1,"mb-0","textcolor5","h2"],[1,"textcolor4"],[3,"innerHTML"],["carouselSlide","",3,"id"],["target","_self",3,"href"],[3,"src"],["id","modal-basic-title",1,"modal-title"],["id","content"],[1,"col-md-12"],["method","post","novalidate","",3,"formGroup","ngSubmit"],["type","text","name","name","autocomplete","off","formControlName","name","id","floatingInput","placeholder","name",1,"form-control"],["type","email","name","email","autocomplete","off","formControlName","email","id","floatingInput","placeholder","email",1,"form-control"],["type","submit","name","submit","value","Pay Now",1,"submit"],[1,"error"],["role","alert",1,"alert","alert-danger","mt-3"],["role","alert",1,"alert","alert-info","mt-3"]],template:function(r,s){if(1&r){const o=Xr();C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),ue(4,"img",4),C(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8)(9,"span",9),I(10,"Graphic "),E(),I(11,"Designs"),E(),C(12,"h1",8),I(13,"on Demand."),E(),C(14,"h1",8),I(15,"Your Way, Every Day."),E()()()(),C(16,"div",10)(17,"ul",11)(18,"li")(19,"a",12),ue(20,"img",13),E()(),C(21,"li")(22,"a",14),ue(23,"img",15),E()(),C(24,"li")(25,"a",16),ue(26,"img",13),E()(),C(27,"li")(28,"a",17),ue(29,"img",18),E()()(),C(30,"div",19)(31,"p"),I(32,"Design subscriptions for everyone."),E(),C(33,"p"),I(34,"Pause or cancel anytime."),E()()()()(),C(35,"div",20)(36,"p")(37,"a",21)(38,"span",22),I(39," Explore Packages"),E(),C(40,"span",23),ue(41,"i",24),E()()()()()(),ue(42,"div",25),C(43,"section",26)(44,"div",27)(45,"div",2)(46,"div",28)(47,"div",29)(48,"video",30,31),zt("click",function(){return s.playInFullscreenWithAudio()}),ue(50,"source",32)(51,"source",33),I(52," Your browser does not support the video tag. "),E()()()()()(),C(53,"section",34)(54,"div",1)(55,"div",2)(56,"div",35)(57,"div",36)(58,"h2",37)(59,"span",38),I(60," Imagine never having to search for a designer again."),E(),C(61,"span",39),I(62,"With Pixtar\u2019s "),E(),C(63,"span",40),I(64," Graphic design "),E(),C(65,"span",39),I(66,"subscription,"),E(),C(67,"span",38),I(68," you get premium designs on demand"),E(),C(69,"span",39),I(70," \u2014crafted with care, precision, and zero templates."),E()()()()()()(),C(71,"section",41)(72,"div",42)(73,"div",2)(74,"div",43)(75,"div",44)(76,"h1",45),ue(77,"div",46),I(78," Recent Works "),E()()(),C(79,"div",43)(80,"div",2),mt(81,Met,9,8,"div",47),E()()()(),C(82,"div",48)(83,"div",49)(84,"div",44)(85,"h1",45),ue(86,"div",46),I(87," Recent Works "),E()()(),C(88,"owl-carousel-o",50),mt(89,Pet,2,1,"ng-container",51),E()(),C(90,"div",52)(91,"div",2)(92,"div",53)(93,"div",54)(94,"div",55)(95,"div",56)(96,"p")(97,"a",57)(98,"span",58),I(99,"Book A Consultation"),E(),C(100,"span",23),ue(101,"i",24),E()()()()()()()()()(),C(102,"section",59)(103,"div",1)(104,"div",2)(105,"div",35)(106,"div",60)(107,"div",61)(108,"div",62)(109,"div",63)(110,"h2",64)(111,"span",65),I(112,"A Simple, Stress-Free Design Process"),E()(),C(113,"p",66),I(114,"Say goodbye to hourly rates and unreliable freelancers. With Pixtar\u2019s subscription, you get unlimited, high-quality graphic design\u2014crafted from scratch, no templates, no limits."),E()(),C(115,"div",67)(116,"div",20)(117,"p")(118,"a",68)(119,"span",22),I(120," Subscribe Now"),E(),C(121,"span",23),ue(122,"i",24),E()()()()()()(),C(123,"p",69)(124,"span",65),I(125,"What Makes Us Different?"),E()(),C(126,"div",70)(127,"div",2)(128,"div",71)(129,"div",72),ue(130,"img",73),C(131,"p",74),I(132,"Subscribe To Pixtar"),E(),C(133,"p",75),I(134,"Pick a plan that fits your needs. The more credits, the more flexibility."),E()()(),C(135,"div",76)(136,"div",72),ue(137,"img",73),C(138,"p",74),I(139,"Request A Design"),E(),C(140,"p",75),I(141,"Got a project in mind? Send your request and we\u2019ll start crafting."),E()()(),C(142,"div",71)(143,"div",72),ue(144,"img",73),C(145,"p",74),I(146,"We Design, You Relax"),E(),C(147,"p",75),I(148,"We\u2019ll fine-tune the designs until you love them."),E()()()()()()()()()(),C(149,"section",77)(150,"div",1)(151,"div",2)(152,"div",61)(153,"div",78)(154,"h2",64)(155,"span",65),I(156,"Plans Designed to Fit Every Need"),E()(),C(157,"p",66),I(158,"Whether you\u2019re a startup, a growing business, or an enterprise, we\u2019ve got a plan for you. Each credit gives you access to premium design services\u2014crafted to perfection using the golden ratio"),E()()(),C(159,"div",79,80)(161,"div",81)(162,"div",82)(163,"div",83)(164,"div",84)(165,"div",85)(166,"div",86)(167,"div",87),ue(168,"div",88)(169,"div",89),E(),C(170,"div",22)(171,"p",90),I(172,"Slots available"),E()()()(),C(173,"h1",91),I(174,"Join "),E(),C(175,"h1",92),I(176,"Pixtar"),E(),C(177,"div",93)(178,"h4",94),I(179,"Book a 15-min intro Call"),E(),C(180,"p",90),I(181,"Learn more about how Pixtar "),C(182,"span",95),I(183," works and how it can help you."),E()(),C(184,"a",96)(185,"span",23),ue(186,"i",24),E()()(),C(187,"div",97)(188,"h4",94),I(189,"Refer a friend & earn"),E(),C(190,"p",90),I(191,"Earn 5% monthly recurring "),C(192,"span",95),I(193," commission for each referral."),E(),C(194,"a",98),zt("click",function(){return s.openModal()}),C(195,"span",22),I(196," Get Started"),E(),C(197,"span",23),ue(198,"i",24),E()()()()()()(),C(199,"div",99)(200,"div",100)(201,"h2",101),I(202),E(),C(203,"nav")(204,"div",102)(205,"button",103),zt("click",function(){return s.changeTabTitle("For Starups")}),I(206," Explorer "),E(),C(207,"button",104),zt("click",function(){return s.changeTabTitle("For Growing Businesses.")}),ue(208,"img",105),I(209," Pro "),E(),C(210,"button",106),zt("click",function(){return s.changeTabTitle("For Agencies & Large Teams")}),I(211," Enterprise "),E()()(),C(212,"div",107)(213,"div",108)(214,"div",109)(215,"div",110)(216,"h4",111),I(217,"AED 6,995"),E(),C(218,"h5",112),I(219,"One request at a time, Pause or cancel anytime."),E()(),ue(220,"div",113),C(221,"div",114)(222,"h5",115),I(223,"What\u2019s included"),E(),C(224,"div",2)(225,"div",116)(226,"ul",117)(227,"li",118),ue(228,"i",119),I(229,"One requests at a time "),E(),C(230,"li",118),ue(231,"i",119),I(232,"Average 48 hour delivery "),E(),C(233,"li",118),ue(234,"i",119),I(235,"Unlimited brands "),E()()(),C(236,"div",116)(237,"ul",117)(238,"li",118),ue(239,"i",119),I(240,"Adobe .Ai .Ps .Xd "),E(),C(241,"li",118),ue(242,"i",119),I(243,"Dedicated Account Manager "),E(),C(244,"li",118),ue(245,"i",119),I(246,"Pause or cancel anytime "),E()()()()(),C(247,"div",120)(248,"div",20)(249,"p")(250,"a",98),zt("click",function(){Zn(o);const l=Yo(477);return ti(s.getStripPayemts("Explorer",6995,l,"price_1QKFksE1meeZaYUdjH9OLyfv"))}),C(251,"span",22),I(252," Get Started"),E(),C(253,"span",23),ue(254,"i",24),E()()()(),C(255,"p",121),I(256,"Or "),C(257,"a",122),I(258,"book a call"),E()()()()(),C(259,"div",123)(260,"div",109)(261,"div",110)(262,"h4",111),I(263,"AED 11,995"),E(),C(264,"h5",112),I(265,"Double the requests. Pause or cancel anytime."),E()(),ue(266,"div",113),C(267,"div",114)(268,"h5",115),I(269,"What\u2019s included"),E(),C(270,"div",2)(271,"div",116)(272,"ul",117)(273,"li",118),ue(274,"i",119),I(275,"Two requests at a time "),E(),C(276,"li",118),ue(277,"i",119),I(278,"Average 48 hour delivery "),E(),C(279,"li",118),ue(280,"i",119),I(281,"Unlimited brands "),E(),C(282,"li",118),ue(283,"i",119),I(284,"XD UI design "),E()()(),C(285,"div",116)(286,"ul",117)(287,"li",118),ue(288,"i",119),I(289,"15 stock photos "),E(),C(290,"li",118),ue(291,"i",119),I(292,"Unlimited users "),E(),C(293,"li",118),ue(294,"i",119),I(295,"Dedicated Account Manager "),E(),C(296,"li",118),ue(297,"i",119),I(298,"Pause or cancel anytime "),E()()()()(),C(299,"div",120)(300,"div",20)(301,"p")(302,"a",98),zt("click",function(){Zn(o);const l=Yo(477);return ti(s.getStripPayemts("Pro",11995,l,"price_1QKFm1E1meeZaYUdeb4XrOTb"))}),C(303,"span",22),I(304," Get Started"),E(),C(305,"span",23),ue(306,"i",24),E()()()(),C(307,"p",121),I(308,"Or "),C(309,"a",122),I(310,"book a call"),E()()()()(),C(311,"div",124)(312,"div",109)(313,"div",110)(314,"h4",111),I(315,"AED 24,995"),E(),C(316,"h5",112),I(317,"For Agencies and Large Teams."),E()(),ue(318,"div",113),C(319,"div",114)(320,"h5",115),I(321,"What\u2019s included"),E(),C(322,"div",2)(323,"div",116)(324,"ul",117)(325,"li",118),ue(326,"i",119),I(327,"10 requests at a time "),E(),C(328,"li",118),ue(329,"i",119),I(330,"Same-day turnaround "),E(),C(331,"li",118),ue(332,"i",119),I(333,"Unlimited brands "),E(),C(334,"li",118),ue(335,"i",119),I(336,"XD UI design "),E()()(),C(337,"div",116)(338,"ul",117)(339,"li",118),ue(340,"i",119),I(341,"Unlimited stock photos "),E(),C(342,"li",118),ue(343,"i",119),I(344,"Unlimited users "),E(),C(345,"li",118),ue(346,"i",119),I(347,"Dedicated Creative Director & Slack Support. "),E(),C(348,"li",118),ue(349,"i",119),I(350,"Pause or cancel anytime "),E()()()()(),C(351,"div",120)(352,"div",20)(353,"p")(354,"a",98),zt("click",function(){Zn(o);const l=Yo(477);return ti(s.getStripPayemts("Enterprise",24995,l,"price_1QKFo9E1meeZaYUdXTwBkfqo"))}),C(355,"span",22),I(356," Get Started"),E(),C(357,"span",23),ue(358,"i",24),E()()()(),C(359,"p",121),I(360,"Or "),C(361,"a",122),I(362,"book a call"),E()()()()()()()()()(),C(363,"div",125)(364,"div",126)(365,"h2",64)(366,"span",65),I(367,"Your Subscription, Your Way"),E()(),C(368,"p",66),I(369," Got a busy month and need more credits? No problem. You can top-up anytime or upgrade your plan on the fly "),E()()()()()(),ue(370,"app-testimonial"),C(371,"section",127)(372,"div",1)(373,"div",2)(374,"div",128)(375,"div",2)(376,"div",129)(377,"div",130)(378,"h1",131),I(379," Frequently "),ue(380,"br"),I(381," Asked "),ue(382,"br"),I(383," Questions\u2026 "),ue(384,"br"),E()()(),C(385,"div",132)(386,"div",95)(387,"div",133)(388,"div",134)(389,"div",135)(390,"h2",136)(391,"button",137),I(392," Why not just hire a full-time designer? "),E()(),C(393,"div",138)(394,"div",139),I(395," Good question! Hiring a senior-level designer now costs upwards of $50,000\u2013$80,000 annually\u2014plus benefits\u2014and that\u2019s if you can even find one available. Plus, keeping a full-time designer often means paying for downtime when there\u2019s no work. "),ue(396,"br")(397,"br"),I(398," With our monthly plan, you can pause and resume your subscription anytime, so you\u2019re only paying for design when you actually need it. "),E()()(),C(399,"div",135)(400,"h2",140)(401,"button",141),I(402," Is there a limit to my design requests? "),E()(),C(403,"div",142)(404,"div",139),I(405," Nope! Once you\u2019re subscribed, feel free to add as many design requests to your queue as you need\u2014they\u2019ll be delivered one at a time. "),E()()(),C(406,"div",135)(407,"h2",143)(408,"button",144),I(409," How fast can I expect my designs? "),E()(),C(410,"div",145)(411,"div",139),I(412," Most requests are turned around within 48 hours. Typical requests like banners, brochures, flyers, event themes, and social templates usually take about two days, though bigger projects may take a little longer. If your request is on the larger side, you can expect steady progress every 24 hours until it\u2019s complete. "),E()()(),C(413,"div",135)(414,"h2",146)(415,"button",147),I(416," Who\u2019s doing the design work? "),E()(),C(417,"div",148)(418,"div",139),I(419," Surprise! Pixtar is a tight-knit team of nine, and our founder is hands-on with every project. This means you\u2019ll work directly with Pixtar\u2019s founder. For specialized requests, like animations or custom illustrations, we collaborate with our trusted partner designers. "),E()()(),C(420,"div",135)(421,"h2",149)(422,"button",150),I(423," How does the pause feature work? "),E()(),C(424,"div",151)(425,"div",139),I(426," We get it\u2014sometimes you don\u2019t have a full month\u2019s worth of design needs. With the pause feature, you can stop your subscription anytime. Here\u2019s how it works: Billing runs on a 31-day cycle. Let\u2019s say you\u2019ve used the service for 21 days, then decide to pause. This leaves you with 10 days of service, which you can pick up anytime in the future. "),E()()(),C(427,"div",135)(428,"h2",152)(429,"button",153),I(430," What about larger projects? "),E()(),C(431,"div",154)(432,"div",139),I(433," No problem! Larger requests, like full website or app designs, are delivered in parts. We break them down on our end and deliver portions every 24\u201348 hours until everything\u2019s complete. "),E()()(),C(434,"div",135)(435,"h2",155)(436,"button",156),I(437," Which design tools do you use? "),E()(),C(438,"div",157)(439,"div",139),I(440," We work primarily with Adobe Illustrator, Photoshop, and XD to create your designs. "),E()()(),C(441,"div",135)(442,"h2",158)(443,"button",159),I(444," How do I send design requests? "),E()(),C(445,"div",160)(446,"div",139),I(447," We make it easy! You can request designs in Trello by adding a card, sharing Google Docs or wireframes, or even by sending a quick Loom video (perfect if you\u2019d rather talk through your ideas than write them out). If it can be shared or linked in Trello, it\u2019s fair game. "),E()()(),C(448,"div",135)(449,"h2",161)(450,"button",162),I(451," What if the design isn\u2019t quite right? "),E()(),C(452,"div",163)(453,"div",139),I(454," No problem! We\u2019ll work with you to revise the design until it\u2019s exactly what you\u2019re looking for. "),E()()(),C(455,"div",135)(456,"h2",164)(457,"button",165),I(458," Are there any types of design you don\u2019t cover? "),E()(),C(459,"div",166)(460,"div",139),I(461," Yes, there are a few: 3D modeling, animated graphics (like GIFs), document design (medical forms, for example), complex packaging, extensive print designs (such as magazines or books), and Adobe InDesign documents aren\u2019t included in our offerings. "),E()()(),C(462,"div",135)(463,"h2",167)(464,"button",168),I(465," What if I only need a single design? "),E()(),C(466,"div",169)(467,"div",139),I(468," That\u2019s totally fine! You can pause your subscription whenever you\u2019re done and resume when you have new design needs\u2014no wasted time. "),E()()(),C(469,"div",135)(470,"h2",170)(471,"button",171),I(472," Are refunds available if I\u2019m not satisfied with the service? "),E()(),C(473,"div",172)(474,"div",139),I(475," Due to the high-quality nature of the work, we don\u2019t offer refunds. "),E()()()()()()()()()()()(),mt(476,Aet,30,4,"ng-template",173,174,xd),C(478,"div",175)(479,"div",176)(480,"div",177)(481,"div",178)(482,"h5",179),I(483,"REFER A FRIEND & EARN"),E(),C(484,"button",180),zt("click",function(){return s.closeModal()}),C(485,"span",181),I(486," \xd7 "),E()()(),C(487,"div",182)(488,"form",183),zt("ngSubmit",function(){return s.submitReferral()}),C(489,"div",184)(490,"h4")(491,"strong"),I(492,"Your Details:"),E()(),C(493,"div",185),ue(494,"input",186),C(495,"label",187),I(496,"Full Name"),E(),mt(497,Tet,3,0,"div",188),E(),C(498,"div",185),ue(499,"input",189),C(500,"label",187),I(501,"Email Address"),E(),mt(502,Det,3,1,"div",188),E(),C(503,"div",185),ue(504,"input",190),C(505,"label",187),I(506,"Contact Number"),E(),mt(507,Iet,3,0,"div",188),E(),C(508,"h4")(509,"strong"),I(510,"Your Friend\u2019s Details:"),E()(),C(511,"div",185),ue(512,"input",191),C(513,"label",187),I(514,"Full Name"),E(),mt(515,Ret,3,0,"div",188),E(),C(516,"div",185),ue(517,"input",192),C(518,"label",187),I(519,"Email Address"),E(),mt(520,ket,3,1,"div",188),E(),C(521,"div",185),ue(522,"input",193),C(523,"label",187),I(524,"Contact Number"),E(),mt(525,Net,3,0,"div",188),E(),C(526,"div",194)(527,"div",195),ue(528,"input",196),E(),C(529,"div",197)(530,"button",198),zt("click",function(){return s.closeModal()}),I(531,"Cancel"),E()()()()(),mt(532,Let,2,1,"div",199),mt(533,Fet,2,0,"div",200),mt(534,Bet,2,0,"div",199),mt(535,zet,2,0,"div",199),E()()()()}2&r&&(ce(4),Ue("src","",s.baseUrl,"/img/three-d-objects/graphic.png",De),ce(16),Ue("src","",s.baseUrl,"/img/home/social-media/instagram.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/social-media/facebook.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/social-media/linkedin.svg",De),ce(3),Ue("src","",s.baseUrl,"/img/home/whatsapp.svg",De),ce(17),ot("ngStyle",nl(27,Uet,s.sectionWidth+"%")),ce(4),Ue("src","",s.baseUrl,"/videos/graphic-page-video.mp4",De),ce(1),Ue("src","",s.baseUrl,"/videos/graphic-page-video.mp4",De),ce(30),ot("ngForOf",s.allprojects),ce(7),ot("options",s.recentoptions),ce(1),ot("ngForOf",s.allprojects),ce(41),Ue("src","",s.baseUrl,"/img/home/art-icons/craft.svg",De),ce(7),Ue("src","",s.baseUrl,"/img/home/art-icons/solution.svg",De),ce(7),Ue("src","",s.baseUrl,"/img/home/art-icons/beyond.svg",De),ce(58),La(s.tabTitle),ce(6),Ue("src","",s.baseUrl,"/img/services/shock.png",De),ce(280),ot("formGroup",s.referralForm),ce(9),ot("ngIf",s.submitted&&s.hasReferralError("referrer_name","required")),ce(5),ot("ngIf",s.submitted&&s.hasEmailError("referrer_email","required")),ce(5),ot("ngIf",s.submitted&&s.hasReferralError("referrer_phone","required")),ce(8),ot("ngIf",s.submitted&&s.hasReferralError("referred_name","required")),ce(5),ot("ngIf",s.submitted&&s.hasEmailError("referred_email","required")),ce(5),ot("ngIf",s.submitted&&s.hasReferralError("referred_phone","required")),ce(7),ot("ngIf",s.errorMessage),ce(1),ot("ngIf",s.isLoading&&!s.isEmailSame&&!s.isContactSame),ce(1),ot("ngIf",s.isContactSame),ce(1),ot("ngIf",s.isEmailSame))},dependencies:[Ba,il,I0,ly,Bm,cy,sy,oy,dy,jm,z0,W0,uf,_1],styles:['.barcy[_ngcontent-%COMP%]{font-family:barcelony,sans-serif}.text-color[_ngcontent-%COMP%]{color:#da9777}.h1[_ngcontent-%COMP%]{color:#1d1d1f;font-family:Montserrat,sans-serif;margin-top:0}.h1[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{font-weight:100;color:#da9777;font-family:barcelony,sans-serif}.cbanner[_ngcontent-%COMP%]{min-height:100vh;height:100%;padding:0!important}.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{position:absolute;right:-19rem;top:30%;width:500px}@media (max-width: 1920px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:-6rem;width:400px;top:28%}}@media (max-width: 1650px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:0rem}}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{width:300px;top:33%}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{width:290px;top:30%}}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:0}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{display:none;width:100%;top:18%;opacity:.5;object-fit:cover;left:0;right:0}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{height:80vh!important}}@media (max-width: 1788px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:1165px}}@media (max-width: 1680px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:100%}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:1053px}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:880px}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:770px}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:auto}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:370px;padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:315px}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{position:relative}@media (max-width: 575px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{left:3px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{display:flex;width:400px;justify-content:start;align-items:center;left:auto!important;bottom:3%!important;margin-left:-7rem}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{margin-left:-3rem}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{margin-left:-2rem}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{margin-left:0rem}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px;height:12px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:18px;line-height:normal;font-weight:400}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{position:relative!important;left:0%!important;bottom:7rem!important}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:315px;bottom:3rem!important}}@media (max-width: 345px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:auto;padding:0}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p.text-color[_ngcontent-%COMP%]{font-weight:600}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:6rem}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:2rem}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:1rem}}.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:9%}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:14%}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:5%;left:55%!important}}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:auto;margin-top:-50px}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{margin-top:-30px}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}}.cstheight[_ngcontent-%COMP%]{height:378px;display:flex;flex-direction:column;justify-content:center}@media (max-width: 480px){.cstheight[_ngcontent-%COMP%]{height:200px}}.cstvideo[_ngcontent-%COMP%]{position:relative;z-index:1;margin-top:-15rem}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]{margin-top:-11rem}}@media (max-width: 480px){.cstvideo[_ngcontent-%COMP%]{margin-top:-5rem}}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]   #aboutvideo[_ngcontent-%COMP%]{height:100%}}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]{position:relative;text-align:center}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{box-shadow:0 23px 26px #0000004a}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;width:100%;top:0}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]{transition:.3s ease-in-out;display:flex;opacity:0;position:absolute;bottom:0;left:0;right:0;width:100%;padding:20px;height:100%;background-color:#00000080;margin:0 auto;flex-direction:column;justify-content:center;align-items:center}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:54px;height:54px;object-fit:contain}@media (max-width: 768px){.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:44px}}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]:hover   .text-block[_ngcontent-%COMP%]{display:flex;cursor:pointer;justify-content:center;align-items:center;opacity:1}.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:106px}@media (max-width: 1440px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:80px}}@media (max-width: 1199px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:70px}}@media (max-width: 1024px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:55px}}@media (max-width: 991px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:1.5}}.hard-work[_ngcontent-%COMP%]{margin:0;padding:0 0 30px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]{padding:20px 0 0}}.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:32px;margin-top:15px;font-weight:600}@media (max-width: 1366px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:18px}}.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{color:#fff;font-size:30px;font-weight:600}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{font-size:28px}}.hard-work[_ngcontent-%COMP%]   .rlimg[_ngcontent-%COMP%]{width:30px}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]{padding:40px 10px 50px 0}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{height:24px;width:4px;top:6px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{margin-left:30px;width:4px;left:-5px;top:4px}}.hard-work[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]{padding:10px 30px;margin-bottom:20px}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;transition:transform .9s ease}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.hard-work[_ngcontent-%COMP%]   .bannerdrk[_ngcontent-%COMP%]{background-color:#000!important}.cwd243[_ngcontent-%COMP%]{position:relative;width:195px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]{color:#1d1d1f!important;font-weight:600;display:flex;justify-content:space-between!important;align-items:center}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{position:relative;right:auto!important;width:auto;transition:.5s all ease-in-out}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]{letter-spacing:1px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{border:1px dashed #6e6e73;height:75px;width:75px;display:flex;justify-content:center;align-items:center;position:absolute;border-radius:50px;transition:.5s all ease-in-out;right:-4px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{height:60px;width:60px;right:5px}}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{right:-10px;height:50px;width:50px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{height:45px;width:45px}}.cstbtn[_ngcontent-%COMP%]{cursor:pointer}.cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:135px;z-index:2}@media (max-width: 480px){.cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;width:140px}}.choosesection[_ngcontent-%COMP%]{background-color:#eeedf0}.choosesection[_ngcontent-%COMP%]   .choose-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .p1[_ngcontent-%COMP%]{margin-bottom:20px!important}.choosesection[_ngcontent-%COMP%]   .head-section[_ngcontent-%COMP%]{margin-bottom:80px}.choosesection[_ngcontent-%COMP%]   .para[_ngcontent-%COMP%]{padding-top:80px}.subscription-section[_ngcontent-%COMP%]{background-color:transparent!important}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage{display:flex;justify-content:center;align-items:center;text-align:center}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage img{width:100%;height:57px;object-fit:contain;margin:0 auto;padding:0 20px}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage .owl-items{margin-right:14px!important}.packages[_ngcontent-%COMP%]{padding-bottom:90px!important}@media (max-width: 991px){.packages[_ngcontent-%COMP%]{padding-bottom:50px!important}}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]{padding:30px;border-radius:50px;width:100%;height:auto}@media (max-width: 575px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]{padding:20px 15px;border-radius:20px}}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]{padding:20px 0}}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]{border:1px solid #da9777;background-color:#da9777;color:#fff;border-radius:33px;position:relative;display:inline-block;padding:13px 16px;margin-bottom:20px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .circle1[_ngcontent-%COMP%]{position:absolute;width:24px;height:24px;border-radius:50px;background-color:#000;border:1px solid #000}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .circle2[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50px;background-color:#6e6e73;border:1px solid #707070;position:relative;z-index:2}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-left:10px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{border:1px solid #707070;padding:15px;border-radius:16px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]{justify-content:end;align-items:end;position:relative;top:-7px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:60px;height:60px}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:40px;height:40px}}@media (max-width: 380px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:28px;height:28px}}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{width:50px;height:50px}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{width:40px;height:40px}}@media (max-width: 380px){.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   a.cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{width:28px;height:28px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-width:600px;width:100%;border-radius:50px;margin-bottom:0;height:100%;padding:20px 40px}@media (max-width: 1440px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:20px 30px}}@media (max-width: 1199px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:auto}}@media (max-width: 575px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:20px 10px;border-radius:20px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;background-color:#1d1d1f;width:100%;margin:20px 0}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;font-weight:500;border:none}@media (max-width: 991px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]{margin-top:8rem}@media (max-width: 1199px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]{margin-top:4rem}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]   .cstprng-table-cta[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{z-index:2}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{justify-content:center;background:#1d1d1f;border-radius:50px;padding:7px}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:none;border:none;color:#fff;border-radius:50px;padding:5px 15px;width:33.33%;font-size:16px}@media (max-width: 1366px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;padding:5px}}@media (max-width: 480px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px;padding:6px 5px}}@media (max-width: 380px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:10px;padding:6px 5px}}@media (max-width: 330px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:10px;padding:6px 3px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#da9777}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]{text-align:center;position:relative;z-index:0;left:4rem;bottom:10px}@media (max-width: 991px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]{left:3.5rem}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1d1d1f;cursor:pointer}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 12px 19px -7px #0000004d;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}.packages[_ngcontent-%COMP%]   .mtrem3[_ngcontent-%COMP%]{margin-top:5rem;margin-bottom:2rem}@media (max-width: 991px){.packages[_ngcontent-%COMP%]   .mtrem3[_ngcontent-%COMP%]{margin-top:4rem;margin-bottom:0}}.packages[_ngcontent-%COMP%]   .mtrem3[_ngcontent-%COMP%]   .start-50[_ngcontent-%COMP%]{left:42%!important}  .myCustomModalClass{background-color:#0b0b0bb8}  .myCustomModalClass .modal-dialog.modal-lg{position:relative;display:flex;justify-content:center;align-items:center;margin:0 auto;padding-top:0;height:100%}@media (min-width: 992px){  .myCustomModalClass .modal-dialog.modal-lg{--bs-modal-width: 1055px}}@media (max-width: 1280px){  .myCustomModalClass .modal-dialog.modal-lg{max-width:90%}}@media (max-width: 991px){  .myCustomModalClass .modal-dialog.modal-lg{height:auto;padding:30px 0}}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative{min-height:100%;height:100%;display:block}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative figure{margin-bottom:0}  .myCustomModalClass .btn{background-color:transparent!important;border:none!important;color:#c9bebe!important;font-size:20px;position:fixed;top:1%;right:1%;z-index:2;padding:5px}  .myCustomModalClass .btn:hover{color:#c4b4b480!important}@media (max-width: 991px){  .myCustomModalClass .btn{top:0}}@media (max-width: 480px){  .myCustomModalClass .btn{top:-6px;right:6px}}  .myCustomModalClass .custommodalanchor{border-bottom:1px solid #dfdfdf;padding-bottom:10px;margin-bottom:10px}  .myCustomModalClass .follow p{font-size:16px;margin-bottom:0;margin-left:5px}  .myCustomModalClass .owl-carousel .owl-item img{object-fit:cover}  .myCustomModalClass .link{margin-top:30px}  .myCustomModalClass .hashtaglinks a{display:inline-block;margin:0 2px}  .myCustomModalClass .rightblock{height:750px;overflow:hidden;overflow-y:scroll;padding:10px 0 10px 20px}@media (max-width: 1366px){  .myCustomModalClass .rightblock{height:600px}}@media (max-width: 991px){  .myCustomModalClass .rightblock{height:auto;margin-top:0}}  .myCustomModalClass .rightblock a{color:#0280fe!important}  .myCustomModalClass .leftblock{padding:0}@media (max-width: 991px){  .myCustomModalClass .leftblock{margin-top:0}}  video{position:relative;min-height:100%;width:90%}  .modal-body{padding:10px}.started[_ngcontent-%COMP%]{display:flex;justify-content:center}.started[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:90px;z-index:3}@media (max-width: 480px){.started[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:75px}}.bnrstart[_ngcontent-%COMP%]{left:55%!important}@media (max-width: 991px){.bnrstart[_ngcontent-%COMP%]{left:60%!important}}.bnrstart[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:140px}.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width: 575px){.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;margin:0 auto}}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.footer-collapse[_ngcontent-%COMP%]{padding:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:30px 20px}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none;border-bottom:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;border-radius:0;font-size:20px;font-weight:500;display:flex;color:#fff;align-items:center}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:hover{color:#fff;outline:none}@media (max-width: 1366px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.brdtp[_ngcontent-%COMP%]{border-top:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{background-image:url(plus.2523ff04f32f499f.svg);margin-top:5px;margin-bottom:5px;color:#dadade}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:400}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.bannerdrk[_ngcontent-%COMP%]{background-color:#000}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#101010;border:none;border-radius:0;border-bottom:1px solid #dddddd}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#878787}form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{background-color:transparent;padding:5px 30px;text-decoration:none;border:2px solid #707070;color:#878787;border-radius:30px;font-weight:600}form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{color:#da9777;background:#1d1d1f}@media (max-width: 575px){form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:16px}}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{background:transparent;color:#da9777;border:2px solid #da9777;padding:5px 30px;border-radius:30px;font-weight:600}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:hover{background:#da9777;color:#fff}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:focus{background:#da9777;color:#fff;border-color:#da9777}@media (max-width: 575px){form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{font-size:16px}}.error[_ngcontent-%COMP%]{color:#f33}.close[_ngcontent-%COMP%]{position:absolute;right:10px;background:transparent;box-shadow:none;outline:none;border:1px solid #000;border-radius:50px;height:24px;width:24px;font-size:21px;display:flex;justify-content:center;align-items:center;margin-top:-40px!important}.close[_ngcontent-%COMP%]:hover{background-color:#000;color:#da9777}.pulse[_ngcontent-%COMP%]{margin:100px;display:block;width:22px;height:22px;border-radius:50%;background:#cca92c;cursor:pointer;box-shadow:0 0 #5b5b5f;animation:_ngcontent-%COMP%_pulse 2s infinite}.pulse[_ngcontent-%COMP%]:hover{animation:none}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #5b5b5f}70%{box-shadow:0 0 0 10px #cca92c00}to{box-shadow:0 0 #cca92c00}}']}),e})();const jet=["targetSection"],Het=["lastSection"],Get=["canvas"];let Wet=(()=>{const t=class{onScroll(i){const r=document.getElementById("section3"),s=document.getElementById("sixth"),o=r?.getBoundingClientRect(),a=s?.getBoundingClientRect();window,console.log("rect - "+o.top),console.log("rect1 - "+a.top),o&&!a?($("#section3").addClass("sticky"),this.isScroll=!0):a&&o.top<=1?$("#section3").removeClass("sticky"):$("#section3").addClass("sticky")}constructor(i,r,s,o,a,l,c,d,h,u,p,m){this.renderer=i,this._platformId=r,this.testimonialService=s,this.pageservice=o,this.metaTagService=a,this.titleService=l,this.splineThreeService=c,this.formBuilder=d,this.http=h,this.projectservice=u,this.modalService=p,this.activeModal=m,this.currentPage=1,this.allprojects=[],this.currentLimit=4,this.desktopslider={loop:!1,rewind:!0,autoplay:!0,autoplayTimeout:15e3,center:!0,dots:!0,autoHeight:!0,autoWidth:!0,smartSpeed:1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.baseUrl=en_baseUrl+"/assets",this.imagepath=en_backendUrl+"/public/",this.get_PageMeta(),this.get_AllProjects()}ngOnInit(){setTimeout(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},500)}ngAfterViewInit(){new IntersectionObserver(o=>{o.forEach(a=>{a.isIntersecting&&setTimeout(()=>{$("#section3").addClass("sticky")},200)})},{threshold:.1}).observe(this.targetSection.nativeElement),new IntersectionObserver(o=>{o.forEach(a=>{a.isIntersecting&&setTimeout(()=>{},200)})},{threshold:.1}).observe(this.lastSection.nativeElement),this.splineThreeService.initialize(this.containerRef.nativeElement,"https://prod.spline.design/lOwCHnDGwjVf9GgA/scene.splinecode")}get_PageMeta(){this.pageservice.getpageWithName({pageName:"home"}).subscribe(r=>{200==r.body.code&&(this.titleService.setTitle(r?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:r?.body.result.meta_description},{name:"keywords",content:r?.body.result.meta_keywords}]))})}get_AllProjects(){this.projectservice.getAllProjects({limit:this.currentLimit,page:this.currentPage}).subscribe(r=>{200==r.code&&r.result&&r.result.length>0&&r.result.forEach(s=>{s.status&&this.allprojects.push(s)})})}loadMore(){this.currentLimit=this.currentLimit+4,this.get_AllProjects()}stopSlider(){this.sliderInterval&&clearInterval(this.sliderInterval)}onMouseLeave(){this.sliderInterval&&(clearInterval(this.sliderInterval),console.log("Slider stopped"))}onMouseEnter(i){let s=this.allprojects[i].project_images,o=this.imagepath,a=document.getElementsByClassName("galleryimg"+i);this.sliderInterval=setInterval(()=>{$(a).each(function(l){let c=s[(l+Math.floor(Math.random()*s.length))%s.length];$(a).attr("src",o+c)})},900)}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(ga),Ne(uh),Ne(Pk),Ne(tu),Ne(wd),Ne(Md),Ne(v1),Ne(V0),Ne(ac),Ne(y1),Ne(J0),Ne(mf))},t.\u0275cmp=qi({type:t,selectors:[["app-studio"]],viewQuery:function(r,s){if(1&r&&(bl(jet,5),bl(Het,5),bl(Get,7)),2&r){let o;Yr(o=$r())&&(s.targetSection=o.first),Yr(o=$r())&&(s.lastSection=o.first),Yr(o=$r())&&(s.containerRef=o.first)}},hostBindings:function(r,s){1&r&&zt("scroll",function(a){return s.onScroll(a)},0,Sm)},decls:188,vars:9,consts:[[1,"cbanner"],[1,"container"],[1,"row"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],["alt","",1,"img-globe","floatimg",3,"src"],[1,"banner","vh-100"],[1,"d-flex","flex-column","justify-content-center","h-100","align-items-start"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"contentbl"],[1,"h1","size90","textcolor3"],[1,"h1","size90","textcolor1"],[1,"position-absolute","banner-left-content","content-left"],[1,"d-flex","flex-column","justify-contente-center","left-content2"],[1,"p3","semibold","textcolor1","size18"],[1,"aboutbrand","mtrem5"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],[1,"about-brand","mrem55"],[1,"size53","weight300"],[1,"textcolor3"],[1,"textcolor1"],[1,"barcy","text-color"],[1,"care-section"],[1,"care"],[1,"fontsize12"],[1,"size32","mb30","textcolor1"],["alt","",1,"mb30","w-100",3,"src"],[1,"col-md-4","col-sm-6"],[1,"box"],[1,"size18","textcolor1","semibold"],[1,"size18","textcolor1"],[1,"lufgasemibold"],[1,"deserve-section","mrem55"],[1,"deserve","text-center"],[1,"textcolor1","weight500","size53","mb30"],[1,"textcolor1","size18"],["id","section3",1,"things-section","bannerdrk","position-relative"],[1,"header","text-center"],[1,"text-white","weight500","size53","mb30"],["id","section-target","id","oneth",1,"things"],["targetSection",""],[1,"scroll-track"],[1,"track-item","pt-0"],[1,"number-wrapper"],["alt","",3,"src"],[1,"text-wrapper"],[1,"size32","text-white","mb-3"],[1,"text-white"],[1,"track-item"],["id","last-section",1,"track-item"],["lastSection",""],["id","sixth",1,"text-wrapper"],[1,"business","position-relative"],[1,"wrapper","position-relative"],[1,"imgbox"],["alt","",1,"img-fluid",3,"src"],[1,"box1"],[1,"textcolor1","mb-5","size32","lufgalight"],[1,"d-block"],[1,"textcolor1","size32","weight700"],[1,"textcolor1","mt-0","size18","weight700"],[1,"bottomtext","d-flex","justify-content-center","position-relative"],[1,"size53","textcolor1","mt-0"],[1,"action","position-relative","mbrem5","mtrem3"],[1,"position-absolute","start-50","translate-middle"],["href","/contact",1,"cstbtn","cstbtn128","ftr1"],[1,"text","text128"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),ue(4,"img",4),C(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8),I(9,"When your vision needs "),E(),C(10,"h1",9),I(11,"a team by your side."),E()()()(),C(12,"div",10)(13,"div",11)(14,"p"),I(15,"If you\u2019re looking for a detail obsessed,"),E(),C(16,"p"),I(17,"marketing-savvy design team"),E(),C(18,"p"),I(19,"that elevate your brand and business\u2026"),E(),C(20,"h5",12),I(21,"Then you\u2019re in the right place!"),E()()()()()()(),C(22,"section",13)(23,"div",1)(24,"div",2)(25,"div",14)(26,"div",15)(27,"h2",16)(28,"span",17),I(29,"At Pixtar, we believe "),E(),C(30,"span",18),I(31," design isn\u2019t just about "),C(32,"span",19),I(33," Aesthetics"),E(),I(34," \u2014it\u2019s about creating harmony, inspiring trust, and building connections."),E(),C(35,"span",17),I(36," We\u2019re a team of"),E(),C(37,"span",18),I(38," creators, thinkers, and dreamers, rooted in Dubai-UAE "),E(),C(39,"span",17),I(40," but designing for a global audience."),E()()()()()()(),C(41,"section",20)(42,"div",1)(43,"div",2)(44,"div",14)(45,"div",21)(46,"h6",22),I(47,"WHAT DRIVES OUR DESIGN"),E(),C(48,"p",23),I(49,"We Care About\u2026"),E(),ue(50,"img",24),E(),C(51,"div",2)(52,"div",25)(53,"div",26)(54,"h5",27),I(55,"You"),E(),C(56,"p",28),I(57,"We\u2019re here to make your life easier and to bring excitement to "),C(58,"span",29),I(59,"launching your brand or website."),E(),I(60," From the first design concept to a smooth launch, we handle every detail, so you can "),C(61,"span",29),I(62,"focus on what matters most."),E()()()(),C(63,"div",25)(64,"div",26)(65,"h5",27),I(66,"Your Audience"),E(),C(67,"p",28),I(68,"Our designs don\u2019t just look good "),C(69,"span",29),I(70,"\u2014they connect."),E(),I(71," We create engaging, easy-to-navigate experiences that leave a lasting impression,"),C(72,"span",29),I(73," making sure your audience feels right at home on every page."),E()()()(),C(74,"div",25)(75,"div",26)(76,"h5",27),I(77,"Your Business Goals"),E(),C(78,"p",28)(79,"span",29),I(80,"Great design solves problems,"),E(),I(81," from building brand loyalty to driving conversions. We\u2019re here to help you "),C(82,"span",29),I(83," grow, boost your impact, and reach more people "),E(),I(84,"through design that works as hard as you do."),E()()()()()()()(),C(85,"section",30)(86,"div",1)(87,"div",2)(88,"div",14)(89,"div",31)(90,"h2",32),I(91,"You Deserve The Best Team By Your Side. "),ue(92,"br"),I(93," So We Built One For You."),E(),C(94,"p",33),I(95,"Large Enough To Tackle Any Project. Small Enough To Keep It Personal."),E()()()()()(),C(96,"section",34)(97,"div",1)(98,"div",2)(99,"div",14)(100,"div",35)(101,"h2",36),I(102,"Six Things You Should Know "),ue(103,"br"),I(104,"About Pixtar"),E()(),C(105,"div",37,38)(107,"div",39)(108,"div",40)(109,"div",41),ue(110,"img",42),E(),C(111,"div",43)(112,"p",44),I(113,"We Looove What We Do"),E(),C(114,"p",45),I(115," We\u2019re not just designers; we\u2019re creators who live and breathe design. The kind of team that sparks with new ideas even during a weekend coffee run. Your project isn\u2019t just work\u2014it\u2019s what we love to do. "),E()()(),C(116,"div",46)(117,"div",41),ue(118,"img",42),E(),C(119,"div",43)(120,"p",44),I(121,"Conversion-Focused Design"),E(),C(122,"p",45),I(123,"Beautiful design that goes beyond aesthetics. We craft visuals that captivate, influence, and drive action, helping you connect with customers and achieve real results. "),E()()(),C(124,"div",46)(125,"div",41),ue(126,"img",42),E(),C(127,"div",43)(128,"p",44),I(129,"People First, Always"),E(),C(130,"p",45),I(131," Every project we take on starts with people. We believe that respect, care, and collaboration make great design possible. When we work together, creativity flourishes. "),E()()(),C(132,"div",46)(133,"div",41),ue(134,"img",42),E(),C(135,"div",43)(136,"p",44),I(137,"A Team Of Superpowers"),E(),C(138,"p",45),I(139,"Individually, we each have our own strengths. Together, we bring them all to the table\u2014design, strategy, and development\u2014to create powerful, custom solutions that stand out. "),E()()(),C(140,"div",46)(141,"div",41),ue(142,"img",42),E(),C(143,"div",43)(144,"p",44),I(145,"Details That Matter"),E(),C(146,"p",45),I(147,"Our commitment to detail means peace of mind for you. From concept to launch, we meticulously refine every aspect of your brand or website, ensuring everything is intentional and perfectly crafted. "),E()()(),C(148,"div",47,48)(150,"div",41),ue(151,"img",42),E(),C(152,"div",49)(153,"p",44),I(154,"Here For The Journey"),E(),C(155,"p",45),I(156," We\u2019re all about building designs that stand the test of time. Think of us as your long-term creative partner\u2014ready to grow with you, committed to your success, and always here to help bring your vision to life. "),E()()()()()()()()(),C(157,"section",50)(158,"div",1)(159,"div",2)(160,"div",14)(161,"div",51)(162,"div",52),ue(163,"img",53),E(),C(164,"div",54)(165,"p",55),I(166," \u201cIf you want a partner who gets you, knows your business, and is on "),C(167,"span",56),I(168," your side 100%\u2014look no further.\u201d"),E()(),C(169,"h2",57),I(170,"KBN "),E(),C(171,"h4",58),I(172,"CEO & Creative Director"),E()(),C(173,"div",59)(174,"h2",60),I(175,"We\u2019ll be your partner "),ue(176,"br"),I(177," in your journey"),E()()()()()()(),C(178,"div",61)(179,"div",62)(180,"p")(181,"a",63)(182,"span",64),I(183," Let\u2019s Begin"),E(),C(184,"span",65),ue(185,"i",66),E()()()()(),ue(186,"app-testimonial")(187,"app-faq-component")),2&r&&(ce(4),Ue("src","",s.baseUrl,"/img/home/studio-image.png",De),ce(46),Ue("src","",s.baseUrl,"/img/about-us/careimg.jpg",De),ce(60),Ue("src","",s.baseUrl,"/img/about-us/zero1.png",De),ce(8),Ue("src","",s.baseUrl,"/img/about-us/zero2.png",De),ce(8),Ue("src","",s.baseUrl,"/img/about-us/zero3.png",De),ce(8),Ue("src","",s.baseUrl,"/img/about-us/zero4.png",De),ce(8),Ue("src","",s.baseUrl,"/img/about-us/zero5.png",De),ce(9),Ue("src","",s.baseUrl,"/img/about-us/zero6.png",De),ce(12),Ue("src","",s.baseUrl,"/img/about-us/kbn.png",De))},dependencies:[lx,_1],styles:['@font-face{font-family:lufga-light;src:url(LufgaLight.d75803ba24fabf82.ttf) format("truetype")}@font-face{font-family:lufga-regular;src:url(LufgaRegular.2286c86967c2d7de.ttf) format("truetype")}@font-face{font-family:lufga-medium;src:url(LufgaMedium.20363385cf20657c.ttf) format("truetype")}@font-face{font-family:lufga-semibild;src:url(LufgaSemiBold.13c6156ab43a2d33.ttf) format("truetype")}@font-face{font-family:lufga-bold;src:url(LufgaBold.a4c85edd49fd93b8.ttf) format("truetype")}.lufgasemibold[_ngcontent-%COMP%]{font-family:lufga-semibild}.barcy[_ngcontent-%COMP%]{font-family:barcelony,sans-serif}.text-color[_ngcontent-%COMP%]{color:#da9777}.h1[_ngcontent-%COMP%]{color:#1d1d1f;font-family:Montserrat,sans-serif;margin-top:0}.cbanner[_ngcontent-%COMP%]{min-height:100vh;height:100%;padding:0!important}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{height:80vh!important}}@media (max-width: 1680px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:100%}}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:1068px}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:770px}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:auto}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:370px;padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:315px}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{position:relative}@media (max-width: 575px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{left:3px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{display:flex;width:360px;justify-content:start;align-items:center;left:auto!important;bottom:3%!important}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{margin-left:0rem}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px;height:12px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:18px;line-height:normal}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .p3[_ngcontent-%COMP%]{margin-top:30px}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{position:relative!important;left:5%!important;bottom:9rem!important}}@media (max-width: 575px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{position:relative!important;left:1%!important}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:315px;bottom:3rem!important}}@media (max-width: 345px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:auto;padding:0}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p.text-color[_ngcontent-%COMP%]{font-weight:600}.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{position:absolute;right:-23%;top:35%;width:450px}@media (max-width: 1920px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:-18%;top:30%}}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{width:280px;right:-8%;top:34%}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:-6%}}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:0%;width:230px;top:37%}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{display:none;width:100%;top:95px;opacity:.5;object-fit:cover;left:0;right:0}}.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:106px}@media (max-width: 1440px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:80px}}@media (max-width: 1199px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:70px}}@media (max-width: 1024px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:55px}}@media (max-width: 991px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:1.5}}.things-section[_ngcontent-%COMP%]{background:linear-gradient(180deg,#1D1D1F 85%,#1D1D1F 100%);min-height:100vh;height:100vh;overflow:scroll;z-index:0}@media (max-width: 991px){.things-section[_ngcontent-%COMP%]{min-height:75vh;height:75vh}}.things-section[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:9997;padding-top:100px;padding-bottom:65px;background:linear-gradient(180deg,rgb(29,29,31) 85%,rgba(29,29,29,0) 100%)}@media (max-width: 991px){.things-section[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding-top:30px}}.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]{max-width:780px;margin-left:auto;margin-right:auto}.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]   .track-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:100px;padding-bottom:100px;background:linear-gradient(180deg,rgba(29,29,29,0) 0%,rgb(29,29,29) 20%,rgb(29,29,29) 80%,rgba(29,29,29,0) 100%)}@media (max-width: 991px){.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]   .track-item[_ngcontent-%COMP%]{padding-top:80px;padding-bottom:80px;display:block;text-align:center}}@media (max-width: 768px){.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]   .track-item[_ngcontent-%COMP%]{max-width:100%}}.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]   .track-item[_ngcontent-%COMP%]   .number-wrapper[_ngcontent-%COMP%]{color:#6e6e73}.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]   .track-item[_ngcontent-%COMP%]   .number-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:400px}@media (max-width: 991px){.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]   .track-item[_ngcontent-%COMP%]   .number-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px}}.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]   .track-item[_ngcontent-%COMP%]   .text-wrapper[_ngcontent-%COMP%]{position:relative;margin-left:-61px}@media (max-width: 991px){.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]   .track-item[_ngcontent-%COMP%]   .text-wrapper[_ngcontent-%COMP%]{margin-left:0}}.business[_ngcontent-%COMP%]{min-height:710px}@media (max-width: 1366px){.business[_ngcontent-%COMP%]{min-height:650px}}@media (max-width: 767px){.business[_ngcontent-%COMP%]{min-height:570px}}.business[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{position:relative}.business[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;z-index:0;width:65%;float:right;right:0}@media (max-width: 767px){.business[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}.business[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .bottomtext[_ngcontent-%COMP%]{margin-top:11rem}@media (max-width: 1440px){.business[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .bottomtext[_ngcontent-%COMP%]{margin-top:7rem}}@media (max-width: 1366px){.business[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .bottomtext[_ngcontent-%COMP%]{margin-top:5rem}}.business[_ngcontent-%COMP%]   .box1[_ngcontent-%COMP%]{position:relative;z-index:1;width:52%;padding-top:5rem;display:flex;flex-direction:column;justify-content:center}@media (max-width: 1199px){.business[_ngcontent-%COMP%]   .box1[_ngcontent-%COMP%]{padding-top:4rem}}@media (max-width: 767px){.business[_ngcontent-%COMP%]   .box1[_ngcontent-%COMP%]{padding-top:17rem;width:80%}}@media (max-width: 480px){.business[_ngcontent-%COMP%]   .box1[_ngcontent-%COMP%]{padding-top:12rem;width:100%}}@media (max-width: 380px){.business[_ngcontent-%COMP%]   .box1[_ngcontent-%COMP%]{padding-top:10rem}.business[_ngcontent-%COMP%]   .box1[_ngcontent-%COMP%]   .d-block[_ngcontent-%COMP%]{display:inline!important}}div.action[_ngcontent-%COMP%]{padding-bottom:50px}div.action[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:88px}.bannerdrk[_ngcontent-%COMP%]{background-color:#000!important}.footer-collapse[_ngcontent-%COMP%]{padding:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:30px 20px}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;border-top:1px dashed #6e6e73;border-radius:0;font-size:20px;font-weight:500;display:flex;align-items:center;color:#fff}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:focus{outline:none;color:#fff}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:hover{color:#fff!important;outline:none}@media (max-width: 1366px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.brdbtm[_ngcontent-%COMP%]{border-bottom:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{background-image:url(plus.2523ff04f32f499f.svg);margin-top:5px;margin-bottom:5px;color:#dadade}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:400}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.bannerdrk[_ngcontent-%COMP%]{background-color:#000}.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width: 575px){.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;margin:0 auto}}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.care-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{margin-bottom:30px}.care-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){margin-bottom:20px}@media (max-width: 1366px){.care-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){margin-bottom:15px}}.care-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:15px 0 30px}.things-section.sticky[_ngcontent-%COMP%]{position:sticky!important;top:0;z-index:10}.mtrem3[_ngcontent-%COMP%]{margin-top:3rem}@media (max-width: 767px){.mtrem3[_ngcontent-%COMP%]{margin-top:1rem}}']}),e})(),loe=(()=>{const t=class{constructor(i,r,s){this.payementservice=i,this.routes=r,this.route=s;let o=localStorage.getItem("stripe-payment-user");this.paramData=this.route.snapshot.queryParams.ispayament,o&&(this.paymentData=JSON.parse(o))}ngOnInit(){this.submitPayment()}submitPayment(){this.paymentData&&(this.paymentData.payment_gateway="Stripe",this.paymentData.payment_method="Card",this.paymentData.status="Success",this.payementservice.savePaymentSuccess(this.paymentData).subscribe(i=>{200==i.body.code&&(localStorage.setItem("stripe-payment-user",""),setTimeout(()=>{this.routes.navigate(["/"])},3e3))}))}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(b1),Ne(Oo),Ne(jc))},t.\u0275cmp=qi({type:t,selectors:[["app-payment-success"]],decls:17,vars:0,consts:[[1,"service-banner"],[1,"container"],[1,"row"],[1,"col-xl-11","m-auto"],[1,"vh-100"],[1,"d-flex","flex-column","justify-content-center","align-items-center","h-100"],[1,"block-content"],[1,"d-flex","flex-row","w-100"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],["id","lottie"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","200",1,"csm","d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"p32","head","position-relative","w-100","start-0","end-0","d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8),I(9,"Your Payment is Successfull "),E(),ue(10,"div",9),E(),C(11,"h1",10),I(12,"Your Payment is "),E(),C(13,"h1",11),I(14," Successfull"),E()()(),C(15,"p",12),I(16," We do it real "),E()()()()()())},styles:['@media (max-width: 575px){section[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}}.service-banner[_ngcontent-%COMP%]{background:url(pixtar-splitlogo.fc88c164801c64f4.svg);background-repeat:no-repeat;background-position:100% 92%;background-size:23%}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:86vh!important}}@media (max-width: 767px){.service-banner[_ngcontent-%COMP%]{background-size:60%}}@media (max-width: 575px){.service-banner[_ngcontent-%COMP%]{background-position:100% 103%;min-height:100vh;height:100%}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0;font-size:106px;font-weight:700;color:#1d1d1f;line-height:normal}@media (max-width: 1366px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:90px}}@media (max-width: 1024px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:80px}}@media (max-width: 991px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px}}@media (max-width: 380px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px;font-weight:400;line-height:normal;margin-bottom:0;color:#101010}@media (max-width: 1366px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:30px}}@media (max-width: 1024px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 991px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 767){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:20px;margin-top:-40px;transition:transform .7s ease-in-out}@media (max-width: 767px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{width:60px}}@media (max-width: 600px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:10px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-top:-24px;width:40px}}@media (max-width: 380px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:5px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]:hover{transform:rotate(-30deg)}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:50px 10px}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:30px 0}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:15px 0}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px;font-weight:700;color:#1d1d1f;margin-top:0}@media (max-width: 1440px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:44px}}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}@media (max-width: 1024px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:38px}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px}}@media (max-width: 600px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:32px;font-weight:400;color:#1d1d1f;line-height:normal}@media (max-width: 1440px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1024px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#1d1d1f}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{font-weight:600;color:#1d1d1f;cursor:pointer}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:focus{color:#da9777}@media (max-width: 575px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{margin:20px 0}}.color1[_ngcontent-%COMP%]{color:#da9777}.barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:42px!important}@media (max-width: 1024px){.barcelony[_ngcontent-%COMP%]{font-size:36px!important}}@media (max-width: 800px){.barcelony[_ngcontent-%COMP%]{font-size:28px!important}}.p32[_ngcontent-%COMP%]{font-size:32px}@media (max-width: 600px){.p32[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 480px){.p32[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]{font-weight:700;color:#101010}@media (max-width: 1199px){.head[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 991px){.head[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px;display:inline-block;top:6px}@media (max-width: 1199px){.head[_ngcontent-%COMP%]:before{left:0}}@media (max-width: 991px){.head[_ngcontent-%COMP%]:before{height:24px;width:4px}}section.bg-black[_ngcontent-%COMP%]{padding:80px 0;background:#000}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]{padding:50px 0}}@media (max-width: 575px){section.bg-black[_ngcontent-%COMP%]{padding:50px 15px}}section.bg-black[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{color:#fff}section.bg-black[_ngcontent-%COMP%]   .cap[_ngcontent-%COMP%]{color:#fff}section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:40px;font-weight:600}@media (max-width: 1199px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 991px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:32px}}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:28px}}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:24px}@media (max-width: 1199px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px}}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.line[_ngcontent-%COMP%]{height:1px;background:#707070;width:65%;margin:0 auto;position:absolute;left:0;right:0;z-index:1}@media (max-width: 767px){.line[_ngcontent-%COMP%]{width:80%}}#lottie[_ngcontent-%COMP%]{display:block;overflow:hidden;transform:translateZ(0);text-align:center;opacity:1;position:relative;top:-1.5rem;width:16%}@media (max-width: 991px){#lottie[_ngcontent-%COMP%]{top:-1.5rem}}@media (max-width: 480px){#lottie[_ngcontent-%COMP%]{top:-.5rem;width:20%}}.p28[_ngcontent-%COMP%]{font-size:28px}@media (max-width: 1199px){.p28[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.p28[_ngcontent-%COMP%]{font-size:20px}}.csm[_ngcontent-%COMP%]{margin-top:-15px!important}@media (max-width: 575px){.csm[_ngcontent-%COMP%]{margin-top:0!important}}']}),e})(),qet=(()=>{const t=class{constructor(i,r,s){this.payementservice=i,this.routes=r,this.route=s;let o=localStorage.getItem("stripe-payment-user");this.paramData=this.route.snapshot.queryParams.ispayament,o&&(this.paymentData=JSON.parse(o))}ngOnInit(){this.submitPayment()}submitPayment(){this.paymentData&&(this.paymentData.payment_gateway="Stripe",this.paymentData.payment_method="Card",this.paymentData.status="Failed",this.payementservice.savePaymentSuccess(this.paymentData).subscribe(i=>{200==i.body.code&&(localStorage.setItem("stripe-payment-user",""),setTimeout(()=>{this.routes.navigate(["/"])},3e3))}))}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(b1),Ne(Oo),Ne(jc))},t.\u0275cmp=qi({type:t,selectors:[["app-payment-failed"]],decls:17,vars:0,consts:[[1,"service-banner"],[1,"container"],[1,"row"],[1,"col-xl-11","m-auto"],[1,"vh-100"],[1,"d-flex","flex-column","justify-content-center","align-items-center","h-100"],[1,"block-content"],[1,"d-flex","flex-row","w-100"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],["id","lottie"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","200",1,"csm","d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"p32","head","position-relative","w-100","start-0","end-0","d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"]],template:function(r,s){1&r&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8),I(9,"Your Payment is Failed "),E(),ue(10,"div",9),E(),C(11,"h1",10),I(12,"Your Payment is "),E(),C(13,"h1",11),I(14," Failed"),E()()(),C(15,"p",12),I(16," We do it real "),E()()()()()())},styles:['@media (max-width: 575px){section[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}}.service-banner[_ngcontent-%COMP%]{background:url(pixtar-splitlogo.fc88c164801c64f4.svg);background-repeat:no-repeat;background-position:100% 92%;background-size:23%}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:86vh!important}}@media (max-width: 767px){.service-banner[_ngcontent-%COMP%]{background-size:60%}}@media (max-width: 575px){.service-banner[_ngcontent-%COMP%]{background-position:100% 103%;min-height:100vh;height:100%}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0;font-size:106px;font-weight:700;color:#1d1d1f;line-height:normal}@media (max-width: 1366px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:90px}}@media (max-width: 1024px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:80px}}@media (max-width: 991px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px}}@media (max-width: 380px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px;font-weight:400;line-height:normal;margin-bottom:0;color:#101010}@media (max-width: 1366px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:30px}}@media (max-width: 1024px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 991px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 767){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:20px;margin-top:-40px;transition:transform .7s ease-in-out}@media (max-width: 767px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{width:60px}}@media (max-width: 600px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:10px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-top:-24px;width:40px}}@media (max-width: 380px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:5px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]:hover{transform:rotate(-30deg)}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:50px 10px}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:30px 0}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:15px 0}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px;font-weight:700;color:#1d1d1f;margin-top:0}@media (max-width: 1440px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:44px}}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}@media (max-width: 1024px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:38px}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px}}@media (max-width: 600px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:32px;font-weight:400;color:#1d1d1f;line-height:normal}@media (max-width: 1440px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1024px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#1d1d1f}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{font-weight:600;color:#1d1d1f;cursor:pointer}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:focus{color:#da9777}@media (max-width: 575px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{margin:20px 0}}.color1[_ngcontent-%COMP%]{color:#da9777}.barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:42px!important}@media (max-width: 1024px){.barcelony[_ngcontent-%COMP%]{font-size:36px!important}}@media (max-width: 800px){.barcelony[_ngcontent-%COMP%]{font-size:28px!important}}.p32[_ngcontent-%COMP%]{font-size:32px}@media (max-width: 600px){.p32[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 480px){.p32[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]{font-weight:700;color:#101010}@media (max-width: 1199px){.head[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 991px){.head[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px;display:inline-block;top:6px}@media (max-width: 1199px){.head[_ngcontent-%COMP%]:before{left:0}}@media (max-width: 991px){.head[_ngcontent-%COMP%]:before{height:24px;width:4px}}section.bg-black[_ngcontent-%COMP%]{padding:80px 0;background:#000}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]{padding:50px 0}}@media (max-width: 575px){section.bg-black[_ngcontent-%COMP%]{padding:50px 15px}}section.bg-black[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{color:#fff}section.bg-black[_ngcontent-%COMP%]   .cap[_ngcontent-%COMP%]{color:#fff}section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:40px;font-weight:600}@media (max-width: 1199px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 991px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:32px}}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:28px}}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:24px}@media (max-width: 1199px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px}}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.line[_ngcontent-%COMP%]{height:1px;background:#707070;width:65%;margin:0 auto;position:absolute;left:0;right:0;z-index:1}@media (max-width: 767px){.line[_ngcontent-%COMP%]{width:80%}}#lottie[_ngcontent-%COMP%]{display:block;overflow:hidden;transform:translateZ(0);text-align:center;opacity:1;position:relative;top:-1.5rem;width:16%}@media (max-width: 991px){#lottie[_ngcontent-%COMP%]{top:-1.5rem}}@media (max-width: 480px){#lottie[_ngcontent-%COMP%]{top:-.5rem;width:20%}}.p28[_ngcontent-%COMP%]{font-size:28px}@media (max-width: 1199px){.p28[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.p28[_ngcontent-%COMP%]{font-size:20px}}.csm[_ngcontent-%COMP%]{margin-top:-15px!important}@media (max-width: 575px){.csm[_ngcontent-%COMP%]{margin-top:0!important}}']}),e})(),mU=(()=>{const t=class{constructor(i,r,s,o){this.route=i,this.router=r,this.paymentservice=s,this.location=o,this.subscriber_id=this.route.snapshot.paramMap.get("subscriberID");var a=this.location.path();this.subscriber_id&&a.includes("cancel")?(this.type="cancel",this.cancelSubscription()):this.subscriber_id&&a.includes("pause")?(this.type="pause",$d().fire({title:"Are you sure?",text:"You want be Pause from Pixtar Service!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#878787",cancelButtonColor:"#d33",confirmButtonText:"Yes, Pause!"}).then(l=>{l.isConfirmed&&this.pauseSubscription()})):this.subscriber_id&&a.includes("resume")&&(this.type="resume",$d().fire({title:"Are you sure?",text:"You want be Resume Pixtar Service!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#878787",cancelButtonColor:"#d33",confirmButtonText:"Yes, Resume!"}).then(l=>{l.isConfirmed&&this.resumeSubscription()}))}ngOnInit(){}cancelSubscription(){var i=this;return(0,xo.Z)(function*(){let r={},s={};const{value:o}=yield $d().fire({title:"You want be Unsubscribe from Pixtar Service!",text:"Select reason for why are you cancelling,",input:"select",confirmButtonColor:"#878787",inputOptions:{customer_service:"Customer service was less than expected",low_quality:"Quality was less than expected",missing_features:"Some features are missing",other:"Other reason",switched_service:"I\u2019m switching to a different service",too_complex:"Ease of use was less than expected",too_expensive:"It\u2019s too expensive",unused:"I don\u2019t use the service enough"},inputPlaceholder:"Select a Reason",inputValidator:a=>new Promise(l=>{a?l():l("You need to select reason :)")})});o&&(s=o),i.subscriber_id&&o&&(r.subscriptionId=i.subscriber_id,r.reason_obj=s,i.paymentservice.stripeSubscribeCancel(r).subscribe(a=>{200==a.body.code?($d().fire({title:"Cancelled!",text:"Your Subscription has been Cancelled.",icon:"success",confirmButtonColor:"#878787"}),setTimeout(()=>{$d().close(),i.router.navigate(["/"])},5e3)):i.router.navigate(["/"])}))})()}pauseSubscription(){if(this.subscriber_id){let i={};i.subscriptionId=this.subscriber_id,this.paymentservice.stripeSubscribePause(i).subscribe(r=>{200==r.body.code&&($d().fire({title:"Pause!",text:"Your Subscription has been Pause.",icon:"success",confirmButtonColor:"#878787"}),setTimeout(()=>{$d().close(),this.router.navigate(["/"])},5e3))})}}resumeSubscription(){if(this.subscriber_id){let i={};i.subscriptionId=this.subscriber_id,this.paymentservice.stripeSubscribeResume(i).subscribe(r=>{200==r.body.code&&($d().fire({title:"Resume!",text:"Your Subscription has been Resume.",icon:"success",confirmButtonColor:"#878787"}),setTimeout(()=>{$d().close(),this.router.navigate(["/"])},5e3))})}}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(jc),Ne(Oo),Ne(b1),Ne(km))},t.\u0275cmp=qi({type:t,selectors:[["app-unsubscription"]],decls:2,vars:0,template:function(r,s){1&r&&(C(0,"p"),I(1,"unsubscription works!"),E())}}),e})();const Xet=[{path:"",component:fU},{path:"home",component:fU},{path:"process",component:iQe},{path:"about",component:pbe},{path:"services",component:SQe},{path:"branding",component:oJe},{path:"website",component:zJe},{path:"ecommerce",component:bet},{path:"graphics",component:Vet},{path:"studio",component:Wet},{path:"projects",component:cQe},{path:"contact",component:jW},{path:"contact/:id",component:jW},{path:"businesscard",component:gbe},{path:"businesscard/view/:id",component:wbe},{path:"p/kbn",component:bbe},{path:"p/kbn2",component:xbe},{path:"p/js",component:_be},{path:"p/io",component:ybe},{path:"p/godly",component:vbe},{path:"project-details/dnour",component:Fbe},{path:"project-details/pakhis",component:dQe},{path:"project-details/beyou",component:bQe},{path:"project-details/autokoorosh",component:xQe},{path:"project-details/vendetta",component:wQe},{path:"project-details/spacex",component:MQe},{path:"payment-success",component:loe},{path:"payment-success/:ispayament",component:loe},{path:"payment-failed",component:qet},{path:"unsubscription/cancel/:subscriberID",component:mU},{path:"unsubscription/pause/:subscriberID",component:mU},{path:"unsubscription/resume/:subscriberID",component:mU},{path:"**",component:fU}];let Yet=(()=>{const t=class{};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ki({type:t}),t.\u0275inj=Kn({imports:[DW.forRoot(Xet,{initialNavigation:"enabledBlocking"}),DW]}),e})();_(811);var $et=_(7123);function Ket(e,t){1&e&&ue(0,"img",54),2&e&&Ue("src","",_t().baseUrl,"/img/logos/pixtar-main-logo.svg",De)}function Zet(e,t){1&e&&ue(0,"img",54),2&e&&Ue("src","",_t().baseUrl,"/img/logos/pixtar-main-logo-white.svg",De)}function Qet(e,t){1&e&&ue(0,"img",55),2&e&&Ue("src","",_t().baseUrl,"/img/logos/pixtar-black-logo.svg",De)}function Jet(e,t){1&e&&ue(0,"img",55),2&e&&Ue("src","",_t().baseUrl,"/img/logos/pixtar_white.svg",De)}function ett(e,t){if(1&e){const n=Xr();C(0,"img",56),zt("mouseenter",function(){return Zn(n),ti(_t().func())})("mouseleave",function(){return Zn(n),ti(_t().func2())}),E()}2&e&&Ue("src","",_t().baseUrl,"/img/home/home.png",De)}function ttt(e,t){if(1&e){const n=Xr();C(0,"img",56),zt("mouseenter",function(){return Zn(n),ti(_t().func())})("mouseleave",function(){return Zn(n),ti(_t().func3())}),E()}2&e&&Ue("src","",_t().baseUrl,"/img/home/homewhite.png",De)}function ntt(e,t){1&e&&(C(0,"h3",57),I(1,"Close"),E())}function itt(e,t){1&e&&(C(0,"h3",58),I(1,"Close"),E())}function rtt(e,t){1&e&&(C(0,"h3",59),I(1,"Menu"),E())}function stt(e,t){1&e&&(C(0,"h3",60),I(1,"Menu"),E())}function ott(e,t){if(1&e){const n=Xr();C(0,"img",61),zt("click",function(){return Zn(n),ti(_t().selectLink("/"))}),E()}2&e&&Ue("src","",_t().baseUrl,"/img/logos/pixtar-black-logo.svg",De)}function att(e,t){if(1&e){const n=Xr();C(0,"img",61),zt("click",function(){return Zn(n),ti(_t().selectLink("/"))}),E()}2&e&&Ue("src","",_t().baseUrl,"/img/logos/pixtar_white.svg",De)}function ltt(e,t){if(1&e){const n=Xr();C(0,"img",62),zt("mouseenter",function(){return Zn(n),ti(_t().func4())})("mouseleave",function(){return Zn(n),ti(_t().func5())}),E()}2&e&&Ue("src","",_t().baseUrl,"/img/home/home.png",De)}function ctt(e,t){if(1&e){const n=Xr();C(0,"img",62),zt("mouseenter",function(){return Zn(n),ti(_t().func4())})("mouseleave",function(){return Zn(n),ti(_t().func6())}),E()}2&e&&Ue("src","",_t().baseUrl,"/img/home/homewhite.png",De)}function dtt(e,t){if(1&e&&(C(0,"p",63)(1,"a",64),ue(2,"img",65),E(),C(3,"a",66),ue(4,"img",65),E(),C(5,"a",67),ue(6,"img",65),E(),C(7,"a",68),ue(8,"img",69),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/images/instagram.svg",De),ce(2),Ue("src","",n.baseUrl,"/images/facebook.svg",De),ce(2),Ue("src","",n.baseUrl,"/images/linkedin.svg",De),ce(2),Ue("src","",n.baseUrl,"/img/home/whatsapp.svg",De)}}function htt(e,t){if(1&e&&(C(0,"p",63)(1,"a",64),ue(2,"img",65),E(),C(3,"a",66),ue(4,"img",65),E(),C(5,"a",67),ue(6,"img",65),E(),C(7,"a",68),ue(8,"img",70),E()()),2&e){const n=_t();ce(2),Ue("src","",n.baseUrl,"/images/instagram-white.svg",De),ce(2),Ue("src","",n.baseUrl,"/images/facebook-white.svg",De),ce(2),Ue("src","",n.baseUrl,"/images/linkedin-white.svg",De),ce(2),Ue("src","",n.baseUrl,"/img/home/whatsapp-white.svg",De)}}let utt=(()=>{const t=class{constructor(i,r,s){this.location=i,this.element=r,this.route=s,this.isNavbar=!1,this.ifwhitebar=!1,this.ifblackbar=!0,this.isMenuActive=!1,this.ifbarcliked=!1,this.sidebarVisible=!1,this.imagepath=en_baseUrl+"/public/",this.baseUrl=en_baseUrl+"/assets"}ngOnInit(){this.ifblackbar=!1,Li("#navMenus").on("click","li",function(){Li(".menu-nav-item").removeClass("active"),Li(this).addClass("active")}),this.isHomemenu()}sidebarOpen(){const i=this.toggleButton,r=document.getElementsByTagName("html")[0];setTimeout(function(){i.classList.add("toggled")},500),r.classList.add("nav-open"),this.sidebarVisible=!0}sidebarClose(){const i=document.getElementsByTagName("html")[0];this.sidebarVisible=!1,i.classList.remove("nav-open")}sidebarToggle(){!1===this.sidebarVisible?this.sidebarOpen():this.sidebarClose()}isHome(){var i=this.location.prepareExternalUrl(this.location.path());return"#"===i.charAt(0)&&(i=i.slice(1)),"/home"===i}isDocumentation(){var i=this.location.prepareExternalUrl(this.location.path());return"#"===i.charAt(0)&&(i=i.slice(1)),"/documentation"===i}selectLink(i){"process"==i&&(this.ifbarcliked=!1),Li("#burger-toggle").prop("checked",!1),Li(".showcls").removeClass("active"),Li(".showcls2").removeClass("active")}showBlackbars(){var i=this.location.path();return"process"!=(i=i.split("/")[1])&&"services"!=i||this.ifbarcliked?(this.ifblackbar=!0,this.ifwhitebar=!1,Li(".navbar").removeClass("noblack")):(this.ifblackbar=!1,this.ifwhitebar=!0,Li(".navbar").addClass("noblack")),this.isHomemenu(),!0}onclicchange(){var i=this.location.path();i=i.split("/")[1],this.ifbarcliked=!("process"!=i&&"services"!=i||this.ifbarcliked)}func(){Li(".home-icon").attr("src",this.baseUrl+"/img/home/homehover.png")}func2(){Li(".home-icon").attr("src",this.baseUrl+"/img/home/home.png")}func3(){Li(".home-icon").attr("src",this.baseUrl+"/img/home/homewhite.png")}func4(){Li(".menuhome").attr("src",this.baseUrl+"/img/home/homehover.png")}func5(){Li(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")}func6(){Li(".menuhome").attr("src",this.baseUrl+"/img/home/homewhite.png")}isHomemenu(){Li("#home").removeClass("active"),Li("#projects").removeClass("active"),Li("#about").removeClass("active"),Li("#process").removeClass("active"),Li("#contact").removeClass("active"),Li("#ecommerce").removeClass("active"),Li("#graphics").removeClass("active"),Li("#services").removeClass("active"),Li("#studio").removeClass("active"),Li("#website").removeClass("active"),Li("#branding").removeClass("active");let i=this.baseUrl;var r=this.location.path();"home"==(r=r.split("/")[1])||"#"==r?(Li("#home").addClass("active"),Li(".menuhome").attr("src",i+"/img/home/homehover.png")):"projects"==r?(Li("#projects").addClass("active"),Li(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")):"about"==r?(Li("#about").addClass("active"),Li(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")):"process"==r?(Li("#process").addClass("active"),Li(".menuhome").attr("src",this.baseUrl+"/img/home/homewhite.png")):"ecommerce"==r?(Li("#ecommerce").addClass("active"),Li(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")):"graphics"==r?(Li("#graphics").addClass("active"),Li(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")):"services"==r?(Li("#services").addClass("active"),Li(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")):"studio"==r?(Li("#studio").addClass("active"),Li(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")):"website"==r?(Li("#website").addClass("active"),Li(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")):"contact"==r?(Li("#contact").addClass("active"),Li(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")):"branding"==r&&(Li("#branding").addClass("active"),Li(".menuhome").attr("src",this.baseUrl+"/img/home/home.png"))}labelchange(){Li(".showcls").toggleClass("active"),Li(".showcls2").toggleClass("active")}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(km),Ne(Ts),Ne(Oo))},t.\u0275cmp=qi({type:t,selectors:[["app-navbar"]],decls:100,vars:17,consts:[["color-on-scroll","500",1,"navbar","navbar-expand-lg","fixed-top","navbar-transparent"],[1,"container-fluid"],[1,"w-100"],[1,"col-lg-10","offset-lg-1"],[1,"menu-container",2,"width","100%"],[1,"d-flex","justify-content-between","menu-block"],[1,"brand"],["href","/"],["alt","","width","160","class","logo1",3,"src",4,"ngIf"],["alt","pixtar","width","40","class","logo2",3,"src",4,"ngIf"],[1,"menu-list"],["alt","homeicon","class","home-icon",3,"src","mouseenter","mouseleave",4,"ngIf"],["type","checkbox","id","burger-toggle"],["for","burger-toggle",1,"burger-menu",3,"click"],[1,"line"],[1,"labelmenu"],["class","cstmenu showcls",4,"ngIf"],["class","cstmenu text-white showcls",4,"ngIf"],["class","d-none d-sm-none d-md-none d-lg-block cstmenu showcls2",4,"ngIf"],["class","d-none d-sm-none d-md-none d-lg-block cstmenu text-white showcls2",4,"ngIf"],["id","menu",1,"menu"],["class","logo","alt","pixtar","width","40",3,"src","click",4,"ngIf"],[1,"menu-inner"],["id","navMenus",1,"menu-nav"],["id","home",1,"menu-nav-item"],["href","/",1,"menu-nav-link",3,"click"],["alt","homeicon","class","menuhome",3,"src","mouseenter","mouseleave",4,"ngIf"],["id","services",1,"menu-nav-item"],[1,"list1"],["href","/services",1,"menu-nav-link",3,"click"],[1,"d-flex","sub-service","ps-0"],["id","branding",1,"menu-nav-item"],["href","/branding",1,"menu-nav-link","hover-underline-animation",3,"click"],["id","graphics",1,"menu-nav-item"],["href","/graphics",1,"menu-nav-link","hover-underline-animation",3,"click"],["id","website",1,"menu-nav-item"],["href","/website",1,"menu-nav-link","hover-underline-animation",3,"click"],["id","ecommerce",1,"menu-nav-item"],["href","/ecommerce",1,"menu-nav-link","hover-underline-animation",3,"click"],["id","studio",1,"menu-nav-item"],["href","/studio",1,"menu-nav-link",3,"click"],["id","projects",1,"menu-nav-item"],["href","/projects",1,"menu-nav-link",3,"click"],["id","process",1,"menu-nav-item"],["href","/process",1,"menu-nav-link",3,"click"],["id","blog",1,"menu-nav-item"],["target","_blank","href","/blog",1,"menu-nav-link",3,"click"],["id","contact",1,"menu-nav-item"],["href","/contact",1,"menu-nav-link","lastanch",3,"click"],[1,"d-flex","flex-row"],["alt","","width","30",1,"arrowimg",3,"src"],[1,"gallery"],[1,"position-absolute","menu-left-content"],["class","mt-2",4,"ngIf"],["alt","","width","160",1,"logo1",3,"src"],["alt","pixtar","width","40",1,"logo2",3,"src"],["alt","homeicon",1,"home-icon",3,"src","mouseenter","mouseleave"],[1,"cstmenu","showcls"],[1,"cstmenu","text-white","showcls"],[1,"d-none","d-sm-none","d-md-none","d-lg-block","cstmenu","showcls2"],[1,"d-none","d-sm-none","d-md-none","d-lg-block","cstmenu","text-white","showcls2"],["alt","pixtar","width","40",1,"logo",3,"src","click"],["alt","homeicon",1,"menuhome",3,"src","mouseenter","mouseleave"],[1,"mt-2"],["href","https://www.instagram.com/pixtar.ae/","target","_blank",1,"me-2"],["alt","","width","30",3,"src"],["href","https://www.facebook.com/pixtar.ae/","target","_blank",1,"me-2"],["href","https://www.linkedin.com/company/pixtar-ae/","target","_blank",1,"me-2"],["href","https://wa.me/+971527930781","target","_blank",1,"whatsapp-icon2","slideUpReturn","tabmob"],["alt","whatsapp","width","30",3,"src"],["alt","whatsapp",3,"src"]],template:function(r,s){1&r&&(C(0,"nav",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),mt(8,Ket,1,1,"img",8),mt(9,Zet,1,1,"img",8),mt(10,Qet,1,1,"img",9),mt(11,Jet,1,1,"img",9),E()(),C(12,"div",10)(13,"a",7),mt(14,ett,1,1,"img",11),mt(15,ttt,1,1,"img",11),E(),ue(16,"input",12),C(17,"label",13),zt("click",function(){return s.labelchange()}),ue(18,"div",14)(19,"div",14)(20,"div",14),E(),C(21,"div",15),mt(22,ntt,2,0,"h3",16),mt(23,itt,2,0,"h3",17),mt(24,rtt,2,0,"h3",18),mt(25,stt,2,0,"h3",19),E(),C(26,"div",20)(27,"a",7),mt(28,ott,1,1,"img",21),E(),C(29,"a",7),mt(30,att,1,1,"img",21),E(),C(31,"div",22)(32,"ul",23)(33,"li",24)(34,"a",25),zt("click",function(){return s.selectLink("/")}),C(35,"span")(36,"div"),mt(37,ltt,1,1,"img",26),mt(38,ctt,1,1,"img",26),E()()()(),C(39,"li",27)(40,"span",28)(41,"a",29),zt("click",function(){return s.selectLink("services")}),C(42,"span")(43,"div"),I(44,"Services"),E()()()(),C(45,"ul",30)(46,"li",31)(47,"a",32),zt("click",function(){return s.selectLink("branding")}),C(48,"span")(49,"div"),I(50,"Branding"),E()()()(),C(51,"li",33)(52,"a",34),zt("click",function(){return s.selectLink("graphics")}),C(53,"span")(54,"div"),I(55,"Graphics"),E()()()(),C(56,"li",35)(57,"a",36),zt("click",function(){return s.selectLink("website")}),C(58,"span")(59,"div"),I(60,"Website"),E()()()(),C(61,"li",37)(62,"a",38),zt("click",function(){return s.selectLink("ecommerce")}),C(63,"span")(64,"div"),I(65,"Ecommerce"),E()()()()()(),C(66,"li",39)(67,"a",40),zt("click",function(){return s.selectLink("studio")}),C(68,"span")(69,"div"),I(70,"Studio"),E()()()(),C(71,"li",41)(72,"a",42),zt("click",function(){return s.selectLink("projects")}),C(73,"span")(74,"div"),I(75,"Projects"),E()()()(),C(76,"li",43)(77,"a",44),zt("click",function(){return s.selectLink("process")}),C(78,"span")(79,"div"),I(80,"Process"),E()()()(),C(81,"li",45)(82,"a",46),zt("click",function(){return s.selectLink("blog")}),C(83,"span")(84,"div"),I(85,"Blogs"),E()()()(),C(86,"li",47)(87,"a",48),zt("click",function(){return s.selectLink("contact")}),C(88,"span")(89,"div",49),I(90,"Contact "),ue(91,"img",50),E()()()()(),C(92,"div",51)(93,"div",52)(94,"p"),I(95,"Creative agency based in Dubai, "),E(),C(96,"p"),I(97,"United Arab Emirates"),E(),mt(98,dtt,9,4,"p",53),mt(99,htt,9,4,"p",53),E()()()()()()()()()()()),2&r&&(ce(8),ot("ngIf",s.showBlackbars()&&s.ifblackbar),ce(1),ot("ngIf",s.showBlackbars()&&s.ifwhitebar),ce(1),ot("ngIf",s.showBlackbars()&&s.ifblackbar),ce(1),ot("ngIf",s.showBlackbars()&&s.ifwhitebar),ce(3),ot("ngIf",s.showBlackbars()&&s.ifblackbar),ce(1),ot("ngIf",s.showBlackbars()&&s.ifwhitebar),ce(7),ot("ngIf",s.showBlackbars()&&s.ifblackbar),ce(1),ot("ngIf",s.showBlackbars()&&s.ifwhitebar),ce(1),ot("ngIf",s.showBlackbars()&&s.ifblackbar),ce(1),ot("ngIf",s.showBlackbars()&&s.ifwhitebar),ce(3),ot("ngIf",s.showBlackbars()&&s.ifblackbar),ce(2),ot("ngIf",s.showBlackbars()&&s.ifwhitebar),ce(7),ot("ngIf",s.showBlackbars()&&s.ifblackbar),ce(1),ot("ngIf",s.showBlackbars()&&s.ifwhitebar),ce(53),Ue("src","",s.baseUrl,"/img/home/contactarrow.svg",De),ce(7),ot("ngIf",s.showBlackbars()&&s.ifblackbar),ce(1),ot("ngIf",s.showBlackbars()&&s.ifwhitebar))},dependencies:[il,xk],styles:['.navbar[_ngcontent-%COMP%]{background:transparent;box-shadow:none}.navbar[_ngcontent-%COMP%]   .menu-block[_ngcontent-%COMP%]{padding:20px 0;align-items:center}@media (max-width: 1366px){.navbar[_ngcontent-%COMP%]   .menu-block[_ngcontent-%COMP%]{padding:10px 0}}@media (max-width: 575px){.navbar[_ngcontent-%COMP%]   .menu-block[_ngcontent-%COMP%]{padding:10px 0 10px 15px}}@media (max-width: 380px){.navbar[_ngcontent-%COMP%]   .menu-block[_ngcontent-%COMP%]{padding:10px 0}}.navbar[_ngcontent-%COMP%]   .logo1[_ngcontent-%COMP%]{margin-top:0;display:none!important}.navbar[_ngcontent-%COMP%]   .logo1[_ngcontent-%COMP%]   .ptext[_ngcontent-%COMP%]{position:relative;top:5px}.navbar[_ngcontent-%COMP%]   .logo2[_ngcontent-%COMP%]{margin-top:0;display:block!important;margin-left:1px}@media (max-width: 575px){.navbar[_ngcontent-%COMP%]   .logo2[_ngcontent-%COMP%]{width:35px}}.navbar[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.navbar[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#000;margin-top:0}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:all .4s ease;opacity:0}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none;font-weight:500;cursor:pointer;font-size:1.75rem}@media (max-width: 1366px){.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 480px){.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.8rem}}@media (max-width: 380px){.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.6rem}}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus   i[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:active   i[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:visited   i[_ngcontent-%COMP%]{color:#de9b7a;opacity:1;transform:rotate(60deg)}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus   a[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:active   a[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:visited   a[_ngcontent-%COMP%]{color:#de9b7a}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.menu-nav-item.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#de9b7a}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.menu-nav-item.active[_ngcontent-%COMP%]   .lastanch[_ngcontent-%COMP%]{color:#000!important}.navbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif!important;font-weight:700;color:#000}.noblack[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{background-color:#000;background-image:url(pixtar-splitlogo-black.8d5f4727f3a5141b.svg)}.noblack[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.noblack[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .noblack[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#de9b7a}.noblack[_ngcontent-%COMP%]   .sub-service[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.noblack[_ngcontent-%COMP%]   .sub-service[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#de9b7a}.navbar.navbar-transparent[_ngcontent-%COMP%]{border-bottom:none;box-shadow:none;padding-top:0;padding-bottom:0;height:85px}.navbar.navbar-transparent[_ngcontent-%COMP%]   .logo1[_ngcontent-%COMP%]{display:block!important}@media (max-width: 767px){.navbar.navbar-transparent[_ngcontent-%COMP%]   .logo1[_ngcontent-%COMP%]{width:145px}}.navbar.navbar-transparent[_ngcontent-%COMP%]   .logo2[_ngcontent-%COMP%]{display:none!important}.navbar.active[_ngcontent-%COMP%]:before{content:"";height:85px;position:fixed;transition:all .25s ease;width:100%;will-change:transform;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);background:hsla(0,0%,100%,.5)}.noblack.navbar-transparent[_ngcontent-%COMP%]{background-color:transparent!important}p[_ngcontent-%COMP%]{margin:0}.cstmenu[_ngcontent-%COMP%]{font-weight:600}#burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]:nth-child(1)   img[_ngcontent-%COMP%]{transition-delay:.18s}#burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]:nth-child(2)   img[_ngcontent-%COMP%]{transition-delay:.26s}#burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]:nth-child(3)   img[_ngcontent-%COMP%]{transition-delay:.34s}#burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]:nth-child(4)   img[_ngcontent-%COMP%]{transition-delay:.42s}#burger-toggle[_ngcontent-%COMP%]:checked ~ .burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:after{transform:translate(0)}#burger-toggle[_ngcontent-%COMP%]:checked ~ .burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(1){transform:translateY(calc(var(--burger-menu-radius) / 5)) rotate(45deg)}#burger-toggle[_ngcontent-%COMP%]:checked ~ .burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(2){transform:scaleX(0)}#burger-toggle[_ngcontent-%COMP%]:checked ~ .burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(3){transform:translateY(calc(var(--burger-menu-radius) / -5)) rotate(-45deg)}#burger-toggle[_ngcontent-%COMP%]{position:absolute;appearance:none;opacity:0;display:none}#burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]{opacity:1;visibility:visible}#burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]   .menu-nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}#burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]   .menu-nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], #burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], #burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{transform:translateY(0);transition:1.2s .1s cubic-bezier(.35,0,.07,1)}.burger-menu[_ngcontent-%COMP%]{--burger-menu-radius: 4em;position:relative;top:0;right:0;z-index:100;display:block;width:var(--burger-menu-radius);height:var(--burger-menu-radius);outline:none;cursor:pointer;width:55px}.burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{position:absolute;left:25%;width:50%;height:2px;background:#000;border-radius:10px;overflow:hidden;transition:.5s}.burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(1){top:30%}.burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(2){top:50%}.burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(3){top:70%}.burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;left:0;width:100%;height:100%;background:var(--primary-color-darker);transform:translate(-100%);transition:.25s}.burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(2):after{transition-delay:.1s}.burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(3):after{transition-delay:.2s}@media (max-width: 380px){.burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{left:45%}}.burger-menu[_ngcontent-%COMP%]:hover   .line[_ngcontent-%COMP%]:after{transform:translate(0)}.noblack[_ngcontent-%COMP%]   .burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{background:#fff}.menu[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;display:flex;justify-content:flex-start;align-items:center;background-color:#fff;opacity:0;overflow-x:hidden;visibility:hidden;transition:.3s;padding:0 9vw;min-height:100vh;height:100%;background-image:url(pixtar-splitlogo.fc88c164801c64f4.svg);background-repeat:no-repeat;background-position:100% 107%;background-size:23%}@media (max-width: 767px){.menu[_ngcontent-%COMP%]{background-size:60%}}.menu-nav[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0;padding:0;text-align:center;list-style-type:none}@media screen and (max-width: 750px){.menu-nav[_ngcontent-%COMP%]{flex-direction:column}}.menu-nav-item[_ngcontent-%COMP%]{flex:1;margin:15px 0}@media (max-width: 1366px){.menu-nav-item[_ngcontent-%COMP%]{margin:15px 0;line-height:normal}}@media (max-width: 380px){.menu-nav-item[_ngcontent-%COMP%]{margin:10px 0}}.menu-nav-link[_ngcontent-%COMP%]{position:relative;display:inline-flex;font-size:2rem;color:#fff;text-decoration:none}.menu-nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden}.menu-nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform:translateY(102%)}.menu-nav-link[_ngcontent-%COMP%]:after{position:absolute;content:"";top:100%;left:0;width:100%;height:3px;background:var(--primary-color);transform:scaleX(0);transform-origin:right;transition:transform .5s}.menu-nav-link[_ngcontent-%COMP%]:hover:after{transform:scaleX(1);transform-origin:left}.menu[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{margin-top:60px;text-align:center}.menu[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:24px;color:#fff;overflow:hidden}.menu[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;letter-spacing:2px;text-transform:uppercase;transform:translateY(102%)}.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]{margin-top:36px;display:flex;flex-wrap:wrap}@media screen and (max-width: 750px){.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]{justify-content:center}}.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]{width:15vw;margin:0 12px;overflow:hidden}@media screen and (max-width: 750px){.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]{width:40vw;margin:0 12px 12px 0}}.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:relative;transition:.6s}.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]:before{position:absolute;content:attr(data-label);top:0;left:0;z-index:1;display:flex;justify-content:center;align-items:center;width:100%;height:100%;color:#fff;background:rgba(0,0,0,.6);opacity:0;transition:.4s}.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]:hover   .image[_ngcontent-%COMP%]{transform:scale(1.2)}.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]:hover   .image[_ngcontent-%COMP%]:before{opacity:1}.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:250px;transform:translateY(102%)}.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:pointer;position:fixed;top:1.3vw}@media (max-width: 1440px){.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:2vw}}@media (max-width: 1366px){.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:1vw;left:9.5vw}}@media (max-width: 1024px){.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:1.5vw}}@media (max-width: 991px){.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{left:2vw;top:1.5vw}}@media (max-width: 600px){.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:4vw;left:3vw}}@media (max-width: 575px){.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:4vw;left:8vw;width:35px}}@media (max-width: 380px){.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:5vw;left:4.8vw}}.menu[_ngcontent-%COMP%]   .menu-inner[_ngcontent-%COMP%]{display:flex;width:50%;justify-content:center;align-items:center}@media (max-width: 600px){.menu[_ngcontent-%COMP%]   .menu-inner[_ngcontent-%COMP%]{width:50%}}.lastanch[_ngcontent-%COMP%]{font-weight:700!important;color:#de9b7a!important}.lastanch[_ngcontent-%COMP%]:hover{color:#000!important}.lastanch[_ngcontent-%COMP%]:focus{color:#000!important}.lastanch[_ngcontent-%COMP%]   .arrowimg[_ngcontent-%COMP%]{position:relative;top:-6px;margin-left:10px}.noblack[_ngcontent-%COMP%]   .lastanch[_ngcontent-%COMP%]:hover{color:#fff!important}.menu-left-content[_ngcontent-%COMP%]{left:5%;bottom:3%;text-align:left}.menu-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:normal;font-size:18px}@media (max-width: 1199px){.menu-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.menu-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}.menu-left-content[_ngcontent-%COMP%]   .text-color[_ngcontent-%COMP%]{color:#de9b7a}.menu-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(3){font-weight:600}.home-icon[_ngcontent-%COMP%]{height:23px;position:relative;right:1rem}@media (max-width: 575px){.home-icon[_ngcontent-%COMP%]{right:.5rem;height:20px}}.menuhome[_ngcontent-%COMP%]{height:40px}@media (max-width: 575px){.menuhome[_ngcontent-%COMP%]{height:30px}}.showcls[_ngcontent-%COMP%]{display:none}.showcls.active[_ngcontent-%COMP%]{position:relative;z-index:1;display:block;animation:fadeIn 1s}@media (max-width: 991px){.showcls.active[_ngcontent-%COMP%]{display:none}}.showcls2[_ngcontent-%COMP%]{display:block;animation:fadeIn 1s}.showcls2.active[_ngcontent-%COMP%]{display:none!important}.labelmenu[_ngcontent-%COMP%]{display:block;position:relative;width:76.19px}.labelmenu[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{position:absolute;top:-1rem}@media (max-width: 991px){.labelmenu[_ngcontent-%COMP%]{display:none}}.sub-service[_ngcontent-%COMP%]{position:absolute;margin-top:2px;margin-left:15px}@media (max-width: 380px){.sub-service[_ngcontent-%COMP%]{margin-top:-1px}}.sub-service[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0}.sub-service[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px;font-size:16px;color:#000}@media (max-width: 480px){.sub-service[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 380px){.sub-service[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}}.sub-service[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%], .sub-service[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#de9b7a}.sub-service[_ngcontent-%COMP%]   .hover-underline-animation[_ngcontent-%COMP%]:after{content:"";position:absolute;width:88%;transform:scaleX(0);height:2px;bottom:0;left:0;background-color:#de9b7a;transform-origin:bottom right;transition:transform .25s ease-out;background-image:none!important}.sub-service[_ngcontent-%COMP%]   .hover-underline-animation[_ngcontent-%COMP%]:hover:after{transform:scaleX(1);transform-origin:bottom left}.brand[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.brand[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;position:relative;display:block}.brand[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{font-size:33px;font-weight:100;margin:12px 7px 0;color:#000}.brand[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-top:10px;color:#000}@media (max-width: 767px){.brand[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;display:block;margin-top:0}}.logo[_ngcontent-%COMP%]{text-decoration:none}.logo[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{font-size:33px;font-weight:100;margin:12px 7px 0;color:#000!important}.logo[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-top:10px;color:#000!important;font-size:16px}@media (max-width: 767px){.logo[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;display:block;margin-top:0}}']}),e})(),ptt=(()=>{const t=class{constructor(i){this.location=i,this.test=new Date,this.isfooterBlack=!1,this.imagepath=en_baseUrl+"/public/",this.baseUrl=en_baseUrl+"/assets"}ngOnInit(){}removeFooter(){this.isfooterBlack=!1;var i=this.location.path();return("projects"==(i=i.split("/")[1])||"about"==i)&&(this.isfooterBlack=!0,!0)}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(km))},t.\u0275cmp=qi({type:t,selectors:[["app-footer"]],decls:49,vars:5,consts:[[1,"footer"],[1,"container"],[1,"row"],[1,"col-md-12","col-sm-11","col-11","mx-auto"],[1,"desb","pb-0"],[1,"text-center"],[1,"footer-nav","desb"],[1,"position-absolute","start-50","translate-middle"],["href","/contact",1,"cstbtn","cstbtn128","ftr1"],[1,"text","text128"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"d-flex","justify-content-between","align-items-center","footer-block"],[1,"d-flex1"],["alt","","width","160",1,"logo1",3,"src"],[1,"d-flex2"],[1,"mb-0"],["href","/services"],["href","/studio"],["href","/about"],["href","/process"],["href","/contact",1,"cstbtn","cstbtn128","ftr2"],["aria-hidden","true",1,"fa","fa-chevron-right","opacity-0"],[1,"credits","ml-auto"],[1,"copyright"]],template:function(r,s){1&r&&(C(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p",5),I(6,"READY TO TRANSFORM YOUR BRAND? "),ue(7,"br"),I(8," GET IN TOUCH WITH US TODAY."),E()(),C(9,"nav",6)(10,"div",7)(11,"p")(12,"a",8)(13,"span",9),I(14," Let\u2019s Talk"),E(),C(15,"span",10),ue(16,"i",11),E()()()(),C(17,"div",12)(18,"div",13),ue(19,"img",14),C(20,"p"),I(21,"Pixtar Branding Services LLC."),E(),C(22,"p"),I(23,"Dubai, United Arab Emirates"),E()(),C(24,"div",15)(25,"ul",16)(26,"li")(27,"a",17),I(28,"Services"),E()(),C(29,"li")(30,"a",18),I(31,"Studio"),E()(),C(32,"li")(33,"a",19),I(34,"About"),E()(),C(35,"li")(36,"a",20),I(37,"Process"),E()(),C(38,"li")(39,"p")(40,"a",21)(41,"span",9),I(42," Ask for a Quote"),E(),C(43,"span",10),ue(44,"i",22),E()()()()()()()()(),C(45,"div",23)(46,"span",24),I(47),C3(48,"date"),E()()()()()),2&r&&(ce(19),Ue("src","",s.baseUrl,"/img/logos/pixtar-main-logo.svg",De),ce(28),hs(" \xa9 ",function c9(e,t,n,i){const r=e+Ps,s=ln(),o=Ss(s,r);return zx(s,r)?s9(s,Ws(),t,o.transform,n,i,o):o.transform(n,i)}(48,2,s.test,"yyyy"),", All Rights Reserved Pixtar "))},dependencies:[L7],styles:[".footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none}.footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 5px}@media (max-width: 1366px){.footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:38px;height:38px}}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0}}.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]{padding:80px 0}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]{padding:50px 0}}@media (max-width: 600px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]{padding:30px 0}}.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:32px}@media (max-width: 1366px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1024px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .qrcode[_ngcontent-%COMP%]{height:150px}@media (max-width: 991px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .qrcode[_ngcontent-%COMP%]{height:130px}}@media (max-width: 575px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .qrcode[_ngcontent-%COMP%]{height:80px}}.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]{padding-top:20px}@media (max-width: 991px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]{padding-top:10px}}.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:barcelony,sans-serif;font-size:78px;color:#000;line-height:1}@media (max-width: 1366px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:60px}}@media (max-width: 1280px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:50px}}@media (max-width: 991px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:40px}}@media (max-width: 575px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:30px}}.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#000;font-size:90px;text-transform:uppercase;font-weight:700;line-height:1}@media (max-width: 1366px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:70px}}@media (max-width: 1280px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px}}@media (max-width: 991px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:50px}}@media (max-width: 575px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]{padding-top:50px}.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000;font-size:14px;line-height:normal;margin-bottom:0;position:relative;left:54px}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex1[_ngcontent-%COMP%]{text-align:center}.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{left:0}}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex1[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:10px}}.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;display:flex;align-items:center}.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 10px}@media (max-width: 480px){.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 5px}}@media (max-width: 320px){.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 3px}}.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#7a7a7a;font-size:14px;font-weight:600}.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#dd9a7a}.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#dd9a7a}@media (max-width: 480px){.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0}}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]{margin-top:15px;display:flex;align-items:center}}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]{flex-direction:column;justify-content:center!important;align-items:center!important}}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]{display:block;margin:0}}.footer[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#777;text-decoration:none;font-weight:600}.footer[_ngcontent-%COMP%]   .credits[_ngcontent-%COMP%], .footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]{line-height:normal}.footer[_ngcontent-%COMP%]   .credits[_ngcontent-%COMP%]{margin:15px 0}.footerBlk[_ngcontent-%COMP%]{background:#000}.footerBlk[_ngcontent-%COMP%]   .d-flex1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff!important}.footerBlk[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff!important;font-size:18px}.footerBlk[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#dd9a7a!important}.whatsapp-icon[_ngcontent-%COMP%]{position:fixed;width:34px;text-align:center;text-decoration:none;bottom:4%;right:2%;z-index:9;cursor:pointer}@media (max-width: 1440px){.whatsapp-icon[_ngcontent-%COMP%]{bottom:3%}}@media (max-width: 480px){.whatsapp-icon[_ngcontent-%COMP%]{bottom:2%;right:4%;width:28px}}.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#1d1d1f}@media (max-width: 1366px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   .start-50[_ngcontent-%COMP%]{left:52%!important}}@media (max-width: 1024px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   .start-50[_ngcontent-%COMP%]{left:53%!important}}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   .start-50[_ngcontent-%COMP%]{left:54%!important}}@media (max-width: 600px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   .start-50[_ngcontent-%COMP%]{margin:.5rem auto}}@media (max-width: 480px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   .start-50[_ngcontent-%COMP%]{left:59%!important}}.footer[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]{color:#1d1d1f!important;font-weight:600;display:flex;justify-content:end;align-items:center;text-decoration:none!important}.footer[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{border:1px dashed #6e6e73;height:35px;width:35px;display:flex;justify-content:center;align-items:center;position:absolute;border-radius:50px;transition:.5s all ease-in-out}.footer[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background:-webkit-linear-gradient(#e5a381,#a9644b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:8px}.footer[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{height:25px;width:25px}.footer[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:115px;position:relative;right:4px;font-size:14px}@media (max-width: 480px){.footer[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;width:107px}}.cstbtn.ftr1[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:77px}"]}),e})();function ftt(e,t){1&e&&ue(0,"app-navbar")}function mtt(e,t){1&e&&ue(0,"app-footer")}let gtt=(()=>{const t=class{constructor(i,r,s){this.renderer=i,this.location=r,this.metaTagService=s}ngOnInit(){$et.init(),this.metaTagService.addTags([{name:"keywords",content:"pixtar.ae, pixtar"},{name:"robots",content:"index, follow"},{name:"author",content:"Ipcs"},{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"},{name:"date",content:"2022-10-1",scheme:"YYYY-MM-DD"},{charset:"UTF-8"}]),window.scroll({top:0,left:0,behavior:"smooth"})}removeFooter(){var i=this.location.prepareExternalUrl(this.location.path());return!("/signup"===(i=i.slice(1))||"/nucleoicons"===i||i.includes("contact")||"p/kbn"===i||"p/kbn2"===i||"p/js"===i||"p/io"===i||"p/godly"===i)}removeHeader(){var i=this.location.prepareExternalUrl(this.location.path());return"p/kbn"!==(i=i.slice(1))&&"p/kbn2"!==i&&"p/js"!==i&&"p/io"!==i&&"p/godly"!==i||($("#botpenguin-launcher-12").hasClass("botpenguin-right")&&$(".BotPenguin-chat").addClass("d-none"),!1)}};let e=t;return t.\u0275fac=function(r){return new(r||t)(Ne(ga),Ne(km),Ne(wd))},t.\u0275cmp=qi({type:t,selectors:[["app-root"]],decls:3,vars:2,consts:[[4,"ngIf"]],template:function(r,s){1&r&&(mt(0,ftt,1,0,"app-navbar",0),ue(1,"router-outlet"),mt(2,mtt,1,0,"app-footer",0)),2&r&&(ot("ngIf",s.removeHeader()),ce(2),ot("ngIf",s.removeFooter()))},dependencies:[il,FR,utt,ptt]}),e})(),vtt=(()=>{const t=class{};let e=t;return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ki({type:t,bootstrap:[gtt]}),t.\u0275inj=Kn({providers:[mf],imports:[cj.withServerTransition({appId:"serverApp"}),Yet,l1e,V0e,rG,zve,ibe,hbe.forRoot(),yCe]}),e})();function coe(){Rme().bootstrapModule(vtt).catch(e=>console.error(e))}"complete"===document.readyState?coe():document.addEventListener("DOMContentLoaded",coe)},7123:function(f){f.exports=function(y){function _(S){if(M[S])return M[S].exports;var T=M[S]={exports:{},id:S,loaded:!1};return y[S].call(T.exports,T,T.exports,_),T.loaded=!0,T.exports}var M={};return _.m=y,_.c=M,_.p="dist/",_(0)}([function(y,_,M){"use strict";function S(bt){return bt&&bt.__esModule?bt:{default:bt}}var T=Object.assign||function(bt){for(var Ft=1;Ft<arguments.length;Ft++){var dn=arguments[Ft];for(var Sn in dn)Object.prototype.hasOwnProperty.call(dn,Sn)&&(bt[Sn]=dn[Sn])}return bt},H=(S(M(1)),M(6)),q=S(H),F=S(M(7)),U=S(M(8)),j=S(M(9)),z=S(M(10)),de=S(M(11)),Ee=S(M(14)),je=[],ct=!1,Ke={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},lt=function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(ct=!0),ct)return je=(0,de.default)(je,Ke),(0,z.default)(je,Ke.once),je},At=function(){je=(0,Ee.default)(),lt()};y.exports={init:function(bt){Ke=T(Ke,bt),je=(0,Ee.default)();var Ft=document.all&&!window.atob;return function(bt){return!0===bt||"mobile"===bt&&j.default.mobile()||"phone"===bt&&j.default.phone()||"tablet"===bt&&j.default.tablet()||"function"==typeof bt&&!0===bt()}(Ke.disable)||Ft?void je.forEach(function(bt,Ft){bt.node.removeAttribute("data-aos"),bt.node.removeAttribute("data-aos-easing"),bt.node.removeAttribute("data-aos-duration"),bt.node.removeAttribute("data-aos-delay")}):(Ke.disableMutationObserver||U.default.isSupported()||(console.info('\n      aos: MutationObserver is not supported on this browser,\n      code mutations observing has been disabled.\n      You may have to call "refreshHard()" by yourself.\n    '),Ke.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",Ke.easing),document.querySelector("body").setAttribute("data-aos-duration",Ke.duration),document.querySelector("body").setAttribute("data-aos-delay",Ke.delay),"DOMContentLoaded"===Ke.startEvent&&["complete","interactive"].indexOf(document.readyState)>-1?lt(!0):"load"===Ke.startEvent?window.addEventListener(Ke.startEvent,function(){lt(!0)}):document.addEventListener(Ke.startEvent,function(){lt(!0)}),window.addEventListener("resize",(0,F.default)(lt,Ke.debounceDelay,!0)),window.addEventListener("orientationchange",(0,F.default)(lt,Ke.debounceDelay,!0)),window.addEventListener("scroll",(0,q.default)(function(){(0,z.default)(je,Ke.once)},Ke.throttleDelay)),Ke.disableMutationObserver||U.default.ready("[data-aos]",At),je)},refresh:lt,refreshHard:At}},function(y,_){},,,,,function(y,_){(function(M){"use strict";function S(ze,Mt,bt){function Ft(gn){var er=Rn,Si=Nn;return Rn=Nn=void 0,Gt=gn,Xn=ze.apply(Si,er)}function Ot(gn){var er=gn-li;return void 0===li||er>=Mt||er<0||Kn&&gn-Gt>=cn}function Xe(){var gn=X();return Ot(gn)?St(gn):void(Yn=setTimeout(Xe,function Sn(gn){var Mr=Mt-(gn-li);return Kn?At(Mr,cn-(gn-Gt)):Mr}(gn)))}function St(gn){return Yn=void 0,bi&&Rn?Ft(gn):(Rn=Nn=void 0,Xn)}function zn(){var gn=X(),er=Ot(gn);if(Rn=arguments,Nn=this,li=gn,er){if(void 0===Yn)return function dn(gn){return Gt=gn,Yn=setTimeout(Xe,Mt),qr?Ft(gn):Xn}(li);if(Kn)return Yn=setTimeout(Xe,Mt),Ft(li)}return void 0===Yn&&(Yn=setTimeout(Xe,Mt)),Xn}var Rn,Nn,cn,Xn,Yn,li,Gt=0,qr=!1,Kn=!1,bi=!0;if("function"!=typeof ze)throw new TypeError(G);return Mt=J(Mt)||0,Y(bt)&&(qr=!!bt.leading,cn=(Kn="maxWait"in bt)?lt(J(bt.maxWait)||0,Mt):cn,bi="trailing"in bt?!!bt.trailing:bi),zn.cancel=function _n(){void 0!==Yn&&clearTimeout(Yn),Gt=0,Rn=li=Nn=Yn=void 0},zn.flush=function jn(){return void 0===Yn?Xn:St(X())},zn}function Y(ze){var Mt=typeof ze>"u"?"undefined":F(ze);return!!ze&&("object"==Mt||"function"==Mt)}function q(ze){return"symbol"==(typeof ze>"u"?"undefined":F(ze))||function H(ze){return!!ze&&"object"==(typeof ze>"u"?"undefined":F(ze))}(ze)&&Ke.call(ze)==V}function J(ze){if("number"==typeof ze)return ze;if(q(ze))return U;if(Y(ze)){var Mt="function"==typeof ze.valueOf?ze.valueOf():ze;ze=Y(Mt)?Mt+"":Mt}if("string"!=typeof ze)return 0===ze?ze:+ze;ze=ze.replace(j,"");var bt=z.test(ze);return bt||ee.test(ze)?de(ze.slice(2),bt?2:8):K.test(ze)?U:+ze}var F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ze){return typeof ze}:function(ze){return ze&&"function"==typeof Symbol&&ze.constructor===Symbol&&ze!==Symbol.prototype?"symbol":typeof ze},G="Expected a function",U=NaN,V="[object Symbol]",j=/^\s+|\s+$/g,K=/^[-+]0x[0-9a-f]+$/i,z=/^0b[01]+$/i,ee=/^0o[0-7]+$/i,de=parseInt,pe="object"==(typeof M>"u"?"undefined":F(M))&&M&&M.Object===Object&&M,Ee="object"==(typeof self>"u"?"undefined":F(self))&&self&&self.Object===Object&&self,je=pe||Ee||Function("return this")(),Ke=Object.prototype.toString,lt=Math.max,At=Math.min,X=function(){return je.Date.now()};y.exports=function T(ze,Mt,bt){var Ft=!0,dn=!0;if("function"!=typeof ze)throw new TypeError(G);return Y(bt)&&(Ft="leading"in bt?!!bt.leading:Ft,dn="trailing"in bt?!!bt.trailing:dn),S(ze,Mt,{leading:Ft,maxWait:Mt,trailing:dn})}}).call(_,function(){return this}())},function(y,_){(function(M){"use strict";function T(X){var ze=typeof X>"u"?"undefined":J(X);return!!X&&("object"==ze||"function"==ze)}function H(X){return"symbol"==(typeof X>"u"?"undefined":J(X))||function Y(X){return!!X&&"object"==(typeof X>"u"?"undefined":J(X))}(X)&&ct.call(X)==U}function q(X){if("number"==typeof X)return X;if(H(X))return G;if(T(X)){var ze="function"==typeof X.valueOf?X.valueOf():X;X=T(ze)?ze+"":ze}if("string"!=typeof X)return 0===X?X:+X;X=X.replace(V,"");var Mt=K.test(X);return Mt||z.test(X)?ee(X.slice(2),Mt?2:8):j.test(X)?G:+X}var J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(X){return typeof X}:function(X){return X&&"function"==typeof Symbol&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},F="Expected a function",G=NaN,U="[object Symbol]",V=/^\s+|\s+$/g,j=/^[-+]0x[0-9a-f]+$/i,K=/^0b[01]+$/i,z=/^0o[0-7]+$/i,ee=parseInt,de="object"==(typeof M>"u"?"undefined":J(M))&&M&&M.Object===Object&&M,pe="object"==(typeof self>"u"?"undefined":J(self))&&self&&self.Object===Object&&self,Ee=de||pe||Function("return this")(),ct=Object.prototype.toString,Ke=Math.max,lt=Math.min,At=function(){return Ee.Date.now()};y.exports=function S(X,ze,Mt){function bt(bi){var gn=zn,er=Rn;return zn=Rn=void 0,li=bi,cn=X.apply(er,gn)}function Sn(bi){var gn=bi-Yn;return void 0===Yn||gn>=ze||gn<0||qr&&bi-li>=Nn}function Ot(){var bi=At();return Sn(bi)?Xe(bi):void(Xn=setTimeout(Ot,function dn(bi){var Si=ze-(bi-Yn);return qr?lt(Si,Nn-(bi-li)):Si}(bi)))}function Xe(bi){return Xn=void 0,Kn&&zn?bt(bi):(zn=Rn=void 0,cn)}function jn(){var bi=At(),gn=Sn(bi);if(zn=arguments,Rn=this,Yn=bi,gn){if(void 0===Xn)return function Ft(bi){return li=bi,Xn=setTimeout(Ot,ze),Gt?bt(bi):cn}(Yn);if(qr)return Xn=setTimeout(Ot,ze),bt(Yn)}return void 0===Xn&&(Xn=setTimeout(Ot,ze)),cn}var zn,Rn,Nn,cn,Xn,Yn,li=0,Gt=!1,qr=!1,Kn=!0;if("function"!=typeof X)throw new TypeError(F);return ze=q(ze)||0,T(Mt)&&(Gt=!!Mt.leading,Nn=(qr="maxWait"in Mt)?Ke(q(Mt.maxWait)||0,ze):Nn,Kn="trailing"in Mt?!!Mt.trailing:Kn),jn.cancel=function St(){void 0!==Xn&&clearTimeout(Xn),li=0,zn=Yn=Rn=Xn=void 0},jn.flush=function _n(){return void 0===Xn?cn:Xe(At())},jn}}).call(_,function(){return this}())},function(y,_){"use strict";function M(J){var F=void 0,G=void 0;for(F=0;F<J.length;F+=1)if((G=J[F]).dataset&&G.dataset.aos||G.children&&M(G.children))return!0;return!1}function S(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function H(J){J&&J.forEach(function(F){var G=Array.prototype.slice.call(F.addedNodes),U=Array.prototype.slice.call(F.removedNodes);if(M(G.concat(U)))return q()})}Object.defineProperty(_,"__esModule",{value:!0});var q=function(){};_.default={isSupported:function T(){return!!S()},ready:function Y(J,F){var G=window.document,V=new(S())(H);q=F,V.observe(G.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}}},function(y,_){"use strict";function S(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(_,"__esModule",{value:!0});var T=function(){function G(U,V){for(var j=0;j<V.length;j++){var K=V[j];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(U,K.key,K)}}return function(U,V,j){return V&&G(U.prototype,V),j&&G(U,j),U}}(),Y=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,H=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,q=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,J=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,F=function(){function G(){!function M(G,U){if(!(G instanceof U))throw new TypeError("Cannot call a class as a function")}(this,G)}return T(G,[{key:"phone",value:function(){var U=S();return!(!Y.test(U)&&!H.test(U.substr(0,4)))}},{key:"mobile",value:function(){var U=S();return!(!q.test(U)&&!J.test(U.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),G}();_.default=new F},function(y,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.default=function(T,Y){var H=window.pageYOffset,q=window.innerHeight;T.forEach(function(J,F){!function(T,Y,H){var q=T.node.getAttribute("data-aos-once");Y>T.position?T.node.classList.add("aos-animate"):typeof q<"u"&&("false"===q||!H&&"true"!==q)&&T.node.classList.remove("aos-animate")}(J,q+H,Y)})}},function(y,_,M){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var Y=function S(q){return q&&q.__esModule?q:{default:q}}(M(12));_.default=function(q,J){return q.forEach(function(F,G){F.node.classList.add("aos-init"),F.position=(0,Y.default)(F.node,J.offset)}),q}},function(y,_,M){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var Y=function S(q){return q&&q.__esModule?q:{default:q}}(M(13));_.default=function(q,J){var F=0,G=0,U=window.innerHeight,V={offset:q.getAttribute("data-aos-offset"),anchor:q.getAttribute("data-aos-anchor"),anchorPlacement:q.getAttribute("data-aos-anchor-placement")};switch(V.offset&&!isNaN(V.offset)&&(G=parseInt(V.offset)),V.anchor&&document.querySelectorAll(V.anchor)&&(q=document.querySelectorAll(V.anchor)[0]),F=(0,Y.default)(q).top,V.anchorPlacement){case"top-bottom":break;case"center-bottom":F+=q.offsetHeight/2;break;case"bottom-bottom":F+=q.offsetHeight;break;case"top-center":F+=U/2;break;case"bottom-center":F+=U/2+q.offsetHeight;break;case"center-center":F+=U/2+q.offsetHeight/2;break;case"top-top":F+=U;break;case"bottom-top":F+=q.offsetHeight+U;break;case"center-top":F+=q.offsetHeight/2+U}return V.anchorPlacement||V.offset||isNaN(J)||(G=J),F+G}},function(y,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(S){for(var T=0,Y=0;S&&!isNaN(S.offsetLeft)&&!isNaN(S.offsetTop);)T+=S.offsetLeft-("BODY"!=S.tagName?S.scrollLeft:0),Y+=S.offsetTop-("BODY"!=S.tagName?S.scrollTop:0),S=S.offsetParent;return{top:Y,left:T}}},function(y,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(S){return S=S||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(S,function(T){return{node:T}})}}])},8259:function(f,y){var M;!function(S,T){"use strict";"object"==typeof f.exports?f.exports=S.document?T(S,!0):function(Y){if(!Y.document)throw new Error("jQuery requires a window with a document");return T(Y)}:T(S)}(typeof window<"u"?window:this,function(S,T){"use strict";var Y=[],H=Object.getPrototypeOf,q=Y.slice,J=Y.flat?function(O){return Y.flat.call(O)}:function(O){return Y.concat.apply([],O)},F=Y.push,G=Y.indexOf,U={},V=U.toString,j=U.hasOwnProperty,K=j.toString,z=K.call(Object),ee={},de=function(B){return"function"==typeof B&&"number"!=typeof B.nodeType&&"function"!=typeof B.item},pe=function(B){return null!=B&&B===B.window},Ee=S.document,je={type:!0,src:!0,nonce:!0,noModule:!0};function ct(O,B,te){var se,ve,ye=(te=te||Ee).createElement("script");if(ye.text=O,B)for(se in je)(ve=B[se]||B.getAttribute&&B.getAttribute(se))&&ye.setAttribute(se,ve);te.head.appendChild(ye).parentNode.removeChild(ye)}function Ke(O){return null==O?O+"":"object"==typeof O||"function"==typeof O?U[V.call(O)]||"object":typeof O}var At=/HTML$/i,X=function(O,B){return new X.fn.init(O,B)};function ze(O){var B=!!O&&"length"in O&&O.length,te=Ke(O);return!de(O)&&!pe(O)&&("array"===te||0===B||"number"==typeof B&&B>0&&B-1 in O)}function Mt(O,B){return O.nodeName&&O.nodeName.toLowerCase()===B.toLowerCase()}X.fn=X.prototype={jquery:"3.7.1",constructor:X,length:0,toArray:function(){return q.call(this)},get:function(O){return null==O?q.call(this):O<0?this[O+this.length]:this[O]},pushStack:function(O){var B=X.merge(this.constructor(),O);return B.prevObject=this,B},each:function(O){return X.each(this,O)},map:function(O){return this.pushStack(X.map(this,function(B,te){return O.call(B,te,B)}))},slice:function(){return this.pushStack(q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(X.grep(this,function(O,B){return(B+1)%2}))},odd:function(){return this.pushStack(X.grep(this,function(O,B){return B%2}))},eq:function(O){var B=this.length,te=+O+(O<0?B:0);return this.pushStack(te>=0&&te<B?[this[te]]:[])},end:function(){return this.prevObject||this.constructor()},push:F,sort:Y.sort,splice:Y.splice},X.extend=X.fn.extend=function(){var O,B,te,se,ve,ye,we=arguments[0]||{},Je=1,Ye=arguments.length,ht=!1;for("boolean"==typeof we&&(ht=we,we=arguments[Je]||{},Je++),"object"!=typeof we&&!de(we)&&(we={}),Je===Ye&&(we=this,Je--);Je<Ye;Je++)if(null!=(O=arguments[Je]))for(B in O)se=O[B],"__proto__"!==B&&we!==se&&(ht&&se&&(X.isPlainObject(se)||(ve=Array.isArray(se)))?(te=we[B],ye=ve&&!Array.isArray(te)?[]:ve||X.isPlainObject(te)?te:{},ve=!1,we[B]=X.extend(ht,ye,se)):void 0!==se&&(we[B]=se));return we},X.extend({expando:"jQuery"+("3.7.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(O){throw new Error(O)},noop:function(){},isPlainObject:function(O){var B,te;return!(!O||"[object Object]"!==V.call(O)||(B=H(O))&&("function"!=typeof(te=j.call(B,"constructor")&&B.constructor)||K.call(te)!==z))},isEmptyObject:function(O){var B;for(B in O)return!1;return!0},globalEval:function(O,B,te){ct(O,{nonce:B&&B.nonce},te)},each:function(O,B){var te,se=0;if(ze(O))for(te=O.length;se<te&&!1!==B.call(O[se],se,O[se]);se++);else for(se in O)if(!1===B.call(O[se],se,O[se]))break;return O},text:function(O){var B,te="",se=0,ve=O.nodeType;if(!ve)for(;B=O[se++];)te+=X.text(B);return 1===ve||11===ve?O.textContent:9===ve?O.documentElement.textContent:3===ve||4===ve?O.nodeValue:te},makeArray:function(O,B){var te=B||[];return null!=O&&(ze(Object(O))?X.merge(te,"string"==typeof O?[O]:O):F.call(te,O)),te},inArray:function(O,B,te){return null==B?-1:G.call(B,O,te)},isXMLDoc:function(O){var te=O&&(O.ownerDocument||O).documentElement;return!At.test(O&&O.namespaceURI||te&&te.nodeName||"HTML")},merge:function(O,B){for(var te=+B.length,se=0,ve=O.length;se<te;se++)O[ve++]=B[se];return O.length=ve,O},grep:function(O,B,te){for(var ve=[],ye=0,we=O.length,Je=!te;ye<we;ye++)!B(O[ye],ye)!==Je&&ve.push(O[ye]);return ve},map:function(O,B,te){var se,ve,ye=0,we=[];if(ze(O))for(se=O.length;ye<se;ye++)null!=(ve=B(O[ye],ye,te))&&we.push(ve);else for(ye in O)null!=(ve=B(O[ye],ye,te))&&we.push(ve);return J(we)},guid:1,support:ee}),"function"==typeof Symbol&&(X.fn[Symbol.iterator]=Y[Symbol.iterator]),X.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(O,B){U["[object "+B+"]"]=B.toLowerCase()});var bt=Y.pop,Ft=Y.sort,dn=Y.splice,Sn="[\\x20\\t\\r\\n\\f]",Ot=new RegExp("^"+Sn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Sn+"+$","g");X.contains=function(O,B){var te=B&&B.parentNode;return O===te||!(!te||1!==te.nodeType||!(O.contains?O.contains(te):O.compareDocumentPosition&&16&O.compareDocumentPosition(te)))};var Xe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function St(O,B){return B?"\0"===O?"\ufffd":O.slice(0,-1)+"\\"+O.charCodeAt(O.length-1).toString(16)+" ":"\\"+O}X.escapeSelector=function(O){return(O+"").replace(Xe,St)};var _n=Ee,jn=F;!function(){var O,B,te,se,ve,we,Je,Ye,ht,jt,ye=jn,nn=X.expando,xt=0,Cn=0,Mi=sh(),Ti=sh(),Gi=sh(),po=sh(),Ss=function(Ve,dt){return Ve===dt&&(ve=!0),0},ys="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",yl="(?:\\\\[\\da-fA-F]{1,6}"+Sn+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Wi="\\["+Sn+"*("+yl+")(?:"+Sn+"*([*^$|!~]?=)"+Sn+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+yl+"))|)"+Sn+"*\\]",md=":("+yl+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Wi+")*)|.*)\\)|)",lr=new RegExp(Sn+"+","g"),Ns=new RegExp("^"+Sn+"*,"+Sn+"*"),Nc=new RegExp("^"+Sn+"*([>+~]|"+Sn+")"+Sn+"*"),Ni=new RegExp(Sn+"|>"),Ia=new RegExp(md),zu=new RegExp("^"+yl+"$"),Al={ID:new RegExp("^#("+yl+")"),CLASS:new RegExp("^\\.("+yl+")"),TAG:new RegExp("^("+yl+"|[*])"),ATTR:new RegExp("^"+Wi),PSEUDO:new RegExp("^"+md),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Sn+"*(even|odd|(([+-]|)(\\d*)n|)"+Sn+"*(?:([+-]|)"+Sn+"*(\\d+)|))"+Sn+"*\\)|)","i"),bool:new RegExp("^(?:"+ys+")$","i"),needsContext:new RegExp("^"+Sn+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Sn+"*((?:-\\d)?\\d*)"+Sn+"*\\)|)(?=[^-]|$)","i")},Lc=/^(?:input|select|textarea|button)$/i,Fc=/^h\d$/i,ma=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qp=/[+~]/,Tl=new RegExp("\\\\[\\da-fA-F]{1,6}"+Sn+"?|\\\\([^\\r\\n\\f])","g"),ln=function(Ve,dt){var Et="0x"+Ve.slice(1)-65536;return dt||(Et<0?String.fromCharCode(Et+65536):String.fromCharCode(Et>>10|55296,1023&Et|56320))},Dr=function(){Ws()},Zn=Ra(function(Ve){return!0===Ve.disabled&&Mt(Ve,"fieldset")},{dir:"parentNode",next:"legend"});try{ye.apply(Y=q.call(_n.childNodes),_n.childNodes)}catch{ye={apply:function(dt,Et){jn.apply(dt,q.call(Et))},call:function(dt){jn.apply(dt,q.call(arguments,1))}}}function ji(Ve,dt,Et,Vt){var tn,kn,Hn,oi,Wn,br,Me,W=dt&&dt.ownerDocument,ie=dt?dt.nodeType:9;if(Et=Et||[],"string"!=typeof Ve||!Ve||1!==ie&&9!==ie&&11!==ie)return Et;if(!Vt&&(Ws(dt),dt=dt||we,Ye)){if(11!==ie&&(Wn=ma.exec(Ve)))if(tn=Wn[1]){if(9===ie){if(!(Hn=dt.getElementById(tn)))return Et;if(Hn.id===tn)return ye.call(Et,Hn),Et}else if(W&&(Hn=W.getElementById(tn))&&ji.contains(dt,Hn)&&Hn.id===tn)return ye.call(Et,Hn),Et}else{if(Wn[2])return ye.apply(Et,dt.getElementsByTagName(Ve)),Et;if((tn=Wn[3])&&dt.getElementsByClassName)return ye.apply(Et,dt.getElementsByClassName(tn)),Et}if(!(po[Ve+" "]||ht&&ht.test(Ve))){if(Me=Ve,W=dt,1===ie&&(Ni.test(Ve)||Nc.test(Ve))){for(((W=qp.test(Ve)&&Hh(dt.parentNode)||dt)!=dt||!ee.scope)&&((oi=dt.getAttribute("id"))?oi=X.escapeSelector(oi):dt.setAttribute("id",oi=nn)),kn=(br=ah(Ve)).length;kn--;)br[kn]=(oi?"#"+oi:":scope")+" "+tc(br[kn]);Me=br.join(",")}try{return ye.apply(Et,W.querySelectorAll(Me)),Et}catch{po(Ve,!0)}finally{oi===nn&&dt.removeAttribute("id")}}}return Wh(Ve.replace(Ot,"$1"),dt,Et,Vt)}function sh(){var Ve=[];return function dt(Et,Vt){return Ve.push(Et+" ")>B.cacheLength&&delete dt[Ve.shift()],dt[Et+" "]=Vt}}function qo(Ve){return Ve[nn]=!0,Ve}function no(Ve){var dt=we.createElement("fieldset");try{return!!Ve(dt)}catch{return!1}finally{dt.parentNode&&dt.parentNode.removeChild(dt),dt=null}}function Xp(Ve){return function(dt){return Mt(dt,"input")&&dt.type===Ve}}function Yp(Ve){return function(dt){return(Mt(dt,"input")||Mt(dt,"button"))&&dt.type===Ve}}function Mm(Ve){return function(dt){return"form"in dt?dt.parentNode&&!1===dt.disabled?"label"in dt?"label"in dt.parentNode?dt.parentNode.disabled===Ve:dt.disabled===Ve:dt.isDisabled===Ve||dt.isDisabled!==!Ve&&Zn(dt)===Ve:dt.disabled===Ve:"label"in dt&&dt.disabled===Ve}}function oh(Ve){return qo(function(dt){return dt=+dt,qo(function(Et,Vt){for(var tn,kn=Ve([],Et.length,dt),Hn=kn.length;Hn--;)Et[tn=kn[Hn]]&&(Et[tn]=!(Vt[tn]=Et[tn]))})})}function Hh(Ve){return Ve&&typeof Ve.getElementsByTagName<"u"&&Ve}function Ws(Ve){var dt,Et=Ve?Ve.ownerDocument||Ve:_n;return Et==we||9!==Et.nodeType||!Et.documentElement||(Je=(we=Et).documentElement,Ye=!X.isXMLDoc(we),jt=Je.matches||Je.webkitMatchesSelector||Je.msMatchesSelector,Je.msMatchesSelector&&_n!=we&&(dt=we.defaultView)&&dt.top!==dt&&dt.addEventListener("unload",Dr),ee.getById=no(function(Vt){return Je.appendChild(Vt).id=X.expando,!we.getElementsByName||!we.getElementsByName(X.expando).length}),ee.disconnectedMatch=no(function(Vt){return jt.call(Vt,"*")}),ee.scope=no(function(){return we.querySelectorAll(":scope")}),ee.cssHas=no(function(){try{return we.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),ee.getById?(B.filter.ID=function(Vt){var tn=Vt.replace(Tl,ln);return function(kn){return kn.getAttribute("id")===tn}},B.find.ID=function(Vt,tn){if(typeof tn.getElementById<"u"&&Ye){var kn=tn.getElementById(Vt);return kn?[kn]:[]}}):(B.filter.ID=function(Vt){var tn=Vt.replace(Tl,ln);return function(kn){var Hn=typeof kn.getAttributeNode<"u"&&kn.getAttributeNode("id");return Hn&&Hn.value===tn}},B.find.ID=function(Vt,tn){if(typeof tn.getElementById<"u"&&Ye){var kn,Hn,oi,Wn=tn.getElementById(Vt);if(Wn){if((kn=Wn.getAttributeNode("id"))&&kn.value===Vt)return[Wn];for(oi=tn.getElementsByName(Vt),Hn=0;Wn=oi[Hn++];)if((kn=Wn.getAttributeNode("id"))&&kn.value===Vt)return[Wn]}return[]}}),B.find.TAG=function(Vt,tn){return typeof tn.getElementsByTagName<"u"?tn.getElementsByTagName(Vt):tn.querySelectorAll(Vt)},B.find.CLASS=function(Vt,tn){if(typeof tn.getElementsByClassName<"u"&&Ye)return tn.getElementsByClassName(Vt)},ht=[],no(function(Vt){var tn;Je.appendChild(Vt).innerHTML="<a id='"+nn+"' href='' disabled='disabled'></a><select id='"+nn+"-\r\\' disabled='disabled'><option selected=''></option></select>",Vt.querySelectorAll("[selected]").length||ht.push("\\["+Sn+"*(?:value|"+ys+")"),Vt.querySelectorAll("[id~="+nn+"-]").length||ht.push("~="),Vt.querySelectorAll("a#"+nn+"+*").length||ht.push(".#.+[+~]"),Vt.querySelectorAll(":checked").length||ht.push(":checked"),(tn=we.createElement("input")).setAttribute("type","hidden"),Vt.appendChild(tn).setAttribute("name","D"),Je.appendChild(Vt).disabled=!0,2!==Vt.querySelectorAll(":disabled").length&&ht.push(":enabled",":disabled"),(tn=we.createElement("input")).setAttribute("name",""),Vt.appendChild(tn),Vt.querySelectorAll("[name='']").length||ht.push("\\["+Sn+"*name"+Sn+"*="+Sn+"*(?:''|\"\")")}),ee.cssHas||ht.push(":has"),ht=ht.length&&new RegExp(ht.join("|")),Ss=function(Vt,tn){if(Vt===tn)return ve=!0,0;var kn=!Vt.compareDocumentPosition-!tn.compareDocumentPosition;return kn||(1&(kn=(Vt.ownerDocument||Vt)==(tn.ownerDocument||tn)?Vt.compareDocumentPosition(tn):1)||!ee.sortDetached&&tn.compareDocumentPosition(Vt)===kn?Vt===we||Vt.ownerDocument==_n&&ji.contains(_n,Vt)?-1:tn===we||tn.ownerDocument==_n&&ji.contains(_n,tn)?1:se?G.call(se,Vt)-G.call(se,tn):0:4&kn?-1:1)}),we}for(O in ji.matches=function(Ve,dt){return ji(Ve,null,null,dt)},ji.matchesSelector=function(Ve,dt){if(Ws(Ve),Ye&&!po[dt+" "]&&(!ht||!ht.test(dt)))try{var Et=jt.call(Ve,dt);if(Et||ee.disconnectedMatch||Ve.document&&11!==Ve.document.nodeType)return Et}catch{po(dt,!0)}return ji(dt,we,null,[Ve]).length>0},ji.contains=function(Ve,dt){return(Ve.ownerDocument||Ve)!=we&&Ws(Ve),X.contains(Ve,dt)},ji.attr=function(Ve,dt){(Ve.ownerDocument||Ve)!=we&&Ws(Ve);var Et=B.attrHandle[dt.toLowerCase()],Vt=Et&&j.call(B.attrHandle,dt.toLowerCase())?Et(Ve,dt,!Ye):void 0;return void 0!==Vt?Vt:Ve.getAttribute(dt)},ji.error=function(Ve){throw new Error("Syntax error, unrecognized expression: "+Ve)},X.uniqueSort=function(Ve){var dt,Et=[],Vt=0,tn=0;if(ve=!ee.sortStable,se=!ee.sortStable&&q.call(Ve,0),Ft.call(Ve,Ss),ve){for(;dt=Ve[tn++];)dt===Ve[tn]&&(Vt=Et.push(tn));for(;Vt--;)dn.call(Ve,Et[Vt],1)}return se=null,Ve},X.fn.uniqueSort=function(){return this.pushStack(X.uniqueSort(q.apply(this)))},(B=X.expr={cacheLength:50,createPseudo:qo,match:Al,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Ve){return Ve[1]=Ve[1].replace(Tl,ln),Ve[3]=(Ve[3]||Ve[4]||Ve[5]||"").replace(Tl,ln),"~="===Ve[2]&&(Ve[3]=" "+Ve[3]+" "),Ve.slice(0,4)},CHILD:function(Ve){return Ve[1]=Ve[1].toLowerCase(),"nth"===Ve[1].slice(0,3)?(Ve[3]||ji.error(Ve[0]),Ve[4]=+(Ve[4]?Ve[5]+(Ve[6]||1):2*("even"===Ve[3]||"odd"===Ve[3])),Ve[5]=+(Ve[7]+Ve[8]||"odd"===Ve[3])):Ve[3]&&ji.error(Ve[0]),Ve},PSEUDO:function(Ve){var dt,Et=!Ve[6]&&Ve[2];return Al.CHILD.test(Ve[0])?null:(Ve[3]?Ve[2]=Ve[4]||Ve[5]||"":Et&&Ia.test(Et)&&(dt=ah(Et,!0))&&(dt=Et.indexOf(")",Et.length-dt)-Et.length)&&(Ve[0]=Ve[0].slice(0,dt),Ve[2]=Et.slice(0,dt)),Ve.slice(0,3))}},filter:{TAG:function(Ve){var dt=Ve.replace(Tl,ln).toLowerCase();return"*"===Ve?function(){return!0}:function(Et){return Mt(Et,dt)}},CLASS:function(Ve){var dt=Mi[Ve+" "];return dt||(dt=new RegExp("(^|"+Sn+")"+Ve+"("+Sn+"|$)"))&&Mi(Ve,function(Et){return dt.test("string"==typeof Et.className&&Et.className||typeof Et.getAttribute<"u"&&Et.getAttribute("class")||"")})},ATTR:function(Ve,dt,Et){return function(Vt){var tn=ji.attr(Vt,Ve);return null==tn?"!="===dt:!dt||(tn+="","="===dt?tn===Et:"!="===dt?tn!==Et:"^="===dt?Et&&0===tn.indexOf(Et):"*="===dt?Et&&tn.indexOf(Et)>-1:"$="===dt?Et&&tn.slice(-Et.length)===Et:"~="===dt?(" "+tn.replace(lr," ")+" ").indexOf(Et)>-1:"|="===dt&&(tn===Et||tn.slice(0,Et.length+1)===Et+"-"))}},CHILD:function(Ve,dt,Et,Vt,tn){var kn="nth"!==Ve.slice(0,3),Hn="last"!==Ve.slice(-4),oi="of-type"===dt;return 1===Vt&&0===tn?function(Wn){return!!Wn.parentNode}:function(Wn,br,Me){var W,ie,Se,gt,un,Un=kn!==Hn?"nextSibling":"previousSibling",Xi=Wn.parentNode,ds=oi&&Wn.nodeName.toLowerCase(),Xo=!Me&&!oi,qs=!1;if(Xi){if(kn){for(;Un;){for(Se=Wn;Se=Se[Un];)if(oi?Mt(Se,ds):1===Se.nodeType)return!1;un=Un="only"===Ve&&!un&&"nextSibling"}return!0}if(un=[Hn?Xi.firstChild:Xi.lastChild],Hn&&Xo){for(qs=(gt=(W=(ie=Xi[nn]||(Xi[nn]={}))[Ve]||[])[0]===xt&&W[1])&&W[2],Se=gt&&Xi.childNodes[gt];Se=++gt&&Se&&Se[Un]||(qs=gt=0)||un.pop();)if(1===Se.nodeType&&++qs&&Se===Wn){ie[Ve]=[xt,gt,qs];break}}else if(Xo&&(qs=gt=(W=(ie=Wn[nn]||(Wn[nn]={}))[Ve]||[])[0]===xt&&W[1]),!1===qs)for(;(Se=++gt&&Se&&Se[Un]||(qs=gt=0)||un.pop())&&(!(oi?Mt(Se,ds):1===Se.nodeType)||!++qs||(Xo&&((ie=Se[nn]||(Se[nn]={}))[Ve]=[xt,qs]),Se!==Wn)););return(qs-=tn)===Vt||qs%Vt==0&&qs/Vt>=0}}},PSEUDO:function(Ve,dt){var Et,Vt=B.pseudos[Ve]||B.setFilters[Ve.toLowerCase()]||ji.error("unsupported pseudo: "+Ve);return Vt[nn]?Vt(dt):Vt.length>1?(Et=[Ve,Ve,"",dt],B.setFilters.hasOwnProperty(Ve.toLowerCase())?qo(function(tn,kn){for(var Hn,oi=Vt(tn,dt),Wn=oi.length;Wn--;)tn[Hn=G.call(tn,oi[Wn])]=!(kn[Hn]=oi[Wn])}):function(tn){return Vt(tn,0,Et)}):Vt}},pseudos:{not:qo(function(Ve){var dt=[],Et=[],Vt=ju(Ve.replace(Ot,"$1"));return Vt[nn]?qo(function(tn,kn,Hn,oi){for(var Wn,br=Vt(tn,null,oi,[]),Me=tn.length;Me--;)(Wn=br[Me])&&(tn[Me]=!(kn[Me]=Wn))}):function(tn,kn,Hn){return dt[0]=tn,Vt(dt,null,Hn,Et),dt[0]=null,!Et.pop()}}),has:qo(function(Ve){return function(dt){return ji(Ve,dt).length>0}}),contains:qo(function(Ve){return Ve=Ve.replace(Tl,ln),function(dt){return(dt.textContent||X.text(dt)).indexOf(Ve)>-1}}),lang:qo(function(Ve){return zu.test(Ve||"")||ji.error("unsupported lang: "+Ve),Ve=Ve.replace(Tl,ln).toLowerCase(),function(dt){var Et;do{if(Et=Ye?dt.lang:dt.getAttribute("xml:lang")||dt.getAttribute("lang"))return(Et=Et.toLowerCase())===Ve||0===Et.indexOf(Ve+"-")}while((dt=dt.parentNode)&&1===dt.nodeType);return!1}}),target:function(Ve){var dt=S.location&&S.location.hash;return dt&&dt.slice(1)===Ve.id},root:function(Ve){return Ve===Je},focus:function(Ve){return Ve===function ti(){try{return we.activeElement}catch{}}()&&we.hasFocus()&&!!(Ve.type||Ve.href||~Ve.tabIndex)},enabled:Mm(!1),disabled:Mm(!0),checked:function(Ve){return Mt(Ve,"input")&&!!Ve.checked||Mt(Ve,"option")&&!!Ve.selected},selected:function(Ve){return!0===Ve.selected},empty:function(Ve){for(Ve=Ve.firstChild;Ve;Ve=Ve.nextSibling)if(Ve.nodeType<6)return!1;return!0},parent:function(Ve){return!B.pseudos.empty(Ve)},header:function(Ve){return Fc.test(Ve.nodeName)},input:function(Ve){return Lc.test(Ve.nodeName)},button:function(Ve){return Mt(Ve,"input")&&"button"===Ve.type||Mt(Ve,"button")},text:function(Ve){var dt;return Mt(Ve,"input")&&"text"===Ve.type&&(null==(dt=Ve.getAttribute("type"))||"text"===dt.toLowerCase())},first:oh(function(){return[0]}),last:oh(function(Ve,dt){return[dt-1]}),eq:oh(function(Ve,dt,Et){return[Et<0?Et+dt:Et]}),even:oh(function(Ve,dt){for(var Et=0;Et<dt;Et+=2)Ve.push(Et);return Ve}),odd:oh(function(Ve,dt){for(var Et=1;Et<dt;Et+=2)Ve.push(Et);return Ve}),lt:oh(function(Ve,dt,Et){var Vt;for(Vt=Et<0?Et+dt:Et>dt?dt:Et;--Vt>=0;)Ve.push(Vt);return Ve}),gt:oh(function(Ve,dt,Et){for(var Vt=Et<0?Et+dt:Et;++Vt<dt;)Ve.push(Vt);return Ve})}}).pseudos.nth=B.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})B.pseudos[O]=Xp(O);for(O in{submit:!0,reset:!0})B.pseudos[O]=Yp(O);function Dl(){}function ah(Ve,dt){var Et,Vt,tn,kn,Hn,oi,Wn,br=Ti[Ve+" "];if(br)return dt?0:br.slice(0);for(Hn=Ve,oi=[],Wn=B.preFilter;Hn;){for(kn in(!Et||(Vt=Ns.exec(Hn)))&&(Vt&&(Hn=Hn.slice(Vt[0].length)||Hn),oi.push(tn=[])),Et=!1,(Vt=Nc.exec(Hn))&&(Et=Vt.shift(),tn.push({value:Et,type:Vt[0].replace(Ot," ")}),Hn=Hn.slice(Et.length)),B.filter)(Vt=Al[kn].exec(Hn))&&(!Wn[kn]||(Vt=Wn[kn](Vt)))&&(Et=Vt.shift(),tn.push({value:Et,type:kn,matches:Vt}),Hn=Hn.slice(Et.length));if(!Et)break}return dt?Hn.length:Hn?ji.error(Ve):Ti(Ve,oi).slice(0)}function tc(Ve){for(var dt=0,Et=Ve.length,Vt="";dt<Et;dt++)Vt+=Ve[dt].value;return Vt}function Ra(Ve,dt,Et){var Vt=dt.dir,tn=dt.next,kn=tn||Vt,Hn=Et&&"parentNode"===kn,oi=Cn++;return dt.first?function(Wn,br,Me){for(;Wn=Wn[Vt];)if(1===Wn.nodeType||Hn)return Ve(Wn,br,Me);return!1}:function(Wn,br,Me){var W,ie,Se=[xt,oi];if(Me){for(;Wn=Wn[Vt];)if((1===Wn.nodeType||Hn)&&Ve(Wn,br,Me))return!0}else for(;Wn=Wn[Vt];)if(1===Wn.nodeType||Hn)if(ie=Wn[nn]||(Wn[nn]={}),tn&&Mt(Wn,tn))Wn=Wn[Vt]||Wn;else{if((W=ie[kn])&&W[0]===xt&&W[1]===oi)return Se[2]=W[2];if(ie[kn]=Se,Se[2]=Ve(Wn,br,Me))return!0}return!1}}function Uu(Ve){return Ve.length>1?function(dt,Et,Vt){for(var tn=Ve.length;tn--;)if(!Ve[tn](dt,Et,Vt))return!1;return!0}:Ve[0]}function Vu(Ve,dt,Et,Vt,tn){for(var kn,Hn=[],oi=0,Wn=Ve.length,br=null!=dt;oi<Wn;oi++)(kn=Ve[oi])&&(!Et||Et(kn,Vt,tn))&&(Hn.push(kn),br&&dt.push(oi));return Hn}function $p(Ve,dt,Et,Vt,tn,kn){return Vt&&!Vt[nn]&&(Vt=$p(Vt)),tn&&!tn[nn]&&(tn=$p(tn,kn)),qo(function(Hn,oi,Wn,br){var Me,W,ie,Se,gt=[],un=[],Un=oi.length,Xi=Hn||function Cm(Ve,dt,Et){for(var Vt=0,tn=dt.length;Vt<tn;Vt++)ji(Ve,dt[Vt],Et);return Et}(dt||"*",Wn.nodeType?[Wn]:Wn,[]),ds=!Ve||!Hn&&dt?Xi:Vu(Xi,gt,Ve,Wn,br);if(Et?Et(ds,Se=tn||(Hn?Ve:Un||Vt)?[]:oi,Wn,br):Se=ds,Vt)for(Me=Vu(Se,un),Vt(Me,[],Wn,br),W=Me.length;W--;)(ie=Me[W])&&(Se[un[W]]=!(ds[un[W]]=ie));if(Hn){if(tn||Ve){if(tn){for(Me=[],W=Se.length;W--;)(ie=Se[W])&&Me.push(ds[W]=ie);tn(null,Se=[],Me,br)}for(W=Se.length;W--;)(ie=Se[W])&&(Me=tn?G.call(Hn,ie):gt[W])>-1&&(Hn[Me]=!(oi[Me]=ie))}}else Se=Vu(Se===oi?Se.splice(Un,Se.length):Se),tn?tn(null,oi,Se,br):ye.apply(oi,Se)})}function lh(Ve){for(var dt,Et,Vt,tn=Ve.length,kn=B.relative[Ve[0].type],Hn=kn||B.relative[" "],oi=kn?1:0,Wn=Ra(function(W){return W===dt},Hn,!0),br=Ra(function(W){return G.call(dt,W)>-1},Hn,!0),Me=[function(W,ie,Se){var gt=!kn&&(Se||ie!=te)||((dt=ie).nodeType?Wn(W,ie,Se):br(W,ie,Se));return dt=null,gt}];oi<tn;oi++)if(Et=B.relative[Ve[oi].type])Me=[Ra(Uu(Me),Et)];else{if((Et=B.filter[Ve[oi].type].apply(null,Ve[oi].matches))[nn]){for(Vt=++oi;Vt<tn&&!B.relative[Ve[Vt].type];Vt++);return $p(oi>1&&Uu(Me),oi>1&&tc(Ve.slice(0,oi-1).concat({value:" "===Ve[oi-2].type?"*":""})).replace(Ot,"$1"),Et,oi<Vt&&lh(Ve.slice(oi,Vt)),Vt<tn&&lh(Ve=Ve.slice(Vt)),Vt<tn&&tc(Ve))}Me.push(Et)}return Uu(Me)}function ju(Ve,dt){var Et,Vt=[],tn=[],kn=Gi[Ve+" "];if(!kn){for(dt||(dt=ah(Ve)),Et=dt.length;Et--;)(kn=lh(dt[Et]))[nn]?Vt.push(kn):tn.push(kn);kn=Gi(Ve,function Gh(Ve,dt){var Et=dt.length>0,Vt=Ve.length>0,tn=function(kn,Hn,oi,Wn,br){var Me,W,ie,Se=0,gt="0",un=kn&&[],Un=[],Xi=te,ds=kn||Vt&&B.find.TAG("*",br),Xo=xt+=null==Xi?1:Math.random()||.1,qs=ds.length;for(br&&(te=Hn==we||Hn||br);gt!==qs&&null!=(Me=ds[gt]);gt++){if(Vt&&Me){for(W=0,!Hn&&Me.ownerDocument!=we&&(Ws(Me),oi=!Ye);ie=Ve[W++];)if(ie(Me,Hn||we,oi)){ye.call(Wn,Me);break}br&&(xt=Xo)}Et&&((Me=!ie&&Me)&&Se--,kn&&un.push(Me))}if(Se+=gt,Et&&gt!==Se){for(W=0;ie=dt[W++];)ie(un,Un,Hn,oi);if(kn){if(Se>0)for(;gt--;)un[gt]||Un[gt]||(Un[gt]=bt.call(Wn));Un=Vu(Un)}ye.apply(Wn,Un),br&&!kn&&Un.length>0&&Se+dt.length>1&&X.uniqueSort(Wn)}return br&&(xt=Xo,te=Xi),un};return Et?qo(tn):tn}(tn,Vt)),kn.selector=Ve}return kn}function Wh(Ve,dt,Et,Vt){var tn,kn,Hn,oi,Wn,br="function"==typeof Ve&&Ve,Me=!Vt&&ah(Ve=br.selector||Ve);if(Et=Et||[],1===Me.length){if((kn=Me[0]=Me[0].slice(0)).length>2&&"ID"===(Hn=kn[0]).type&&9===dt.nodeType&&Ye&&B.relative[kn[1].type]){if(!(dt=(B.find.ID(Hn.matches[0].replace(Tl,ln),dt)||[])[0]))return Et;br&&(dt=dt.parentNode),Ve=Ve.slice(kn.shift().value.length)}for(tn=Al.needsContext.test(Ve)?0:kn.length;tn--&&!B.relative[oi=(Hn=kn[tn]).type];)if((Wn=B.find[oi])&&(Vt=Wn(Hn.matches[0].replace(Tl,ln),qp.test(kn[0].type)&&Hh(dt.parentNode)||dt))){if(kn.splice(tn,1),!(Ve=Vt.length&&tc(kn)))return ye.apply(Et,Vt),Et;break}}return(br||ju(Ve,Me))(Vt,dt,!Ye,Et,!dt||qp.test(Ve)&&Hh(dt.parentNode)||dt),Et}Dl.prototype=B.filters=B.pseudos,B.setFilters=new Dl,ee.sortStable=nn.split("").sort(Ss).join("")===nn,Ws(),ee.sortDetached=no(function(Ve){return 1&Ve.compareDocumentPosition(we.createElement("fieldset"))}),X.find=ji,X.expr[":"]=X.expr.pseudos,X.unique=X.uniqueSort,ji.compile=ju,ji.select=Wh,ji.setDocument=Ws,ji.tokenize=ah,ji.escape=X.escapeSelector,ji.getText=X.text,ji.isXML=X.isXMLDoc,ji.selectors=X.expr,ji.support=X.support,ji.uniqueSort=X.uniqueSort}();var zn=function(O,B,te){for(var se=[],ve=void 0!==te;(O=O[B])&&9!==O.nodeType;)if(1===O.nodeType){if(ve&&X(O).is(te))break;se.push(O)}return se},Rn=function(O,B){for(var te=[];O;O=O.nextSibling)1===O.nodeType&&O!==B&&te.push(O);return te},Nn=X.expr.match.needsContext,cn=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Xn(O,B,te){return de(B)?X.grep(O,function(se,ve){return!!B.call(se,ve,se)!==te}):B.nodeType?X.grep(O,function(se){return se===B!==te}):"string"!=typeof B?X.grep(O,function(se){return G.call(B,se)>-1!==te}):X.filter(B,O,te)}X.filter=function(O,B,te){var se=B[0];return te&&(O=":not("+O+")"),1===B.length&&1===se.nodeType?X.find.matchesSelector(se,O)?[se]:[]:X.find.matches(O,X.grep(B,function(ve){return 1===ve.nodeType}))},X.fn.extend({find:function(O){var B,te,se=this.length,ve=this;if("string"!=typeof O)return this.pushStack(X(O).filter(function(){for(B=0;B<se;B++)if(X.contains(ve[B],this))return!0}));for(te=this.pushStack([]),B=0;B<se;B++)X.find(O,ve[B],te);return se>1?X.uniqueSort(te):te},filter:function(O){return this.pushStack(Xn(this,O||[],!1))},not:function(O){return this.pushStack(Xn(this,O||[],!0))},is:function(O){return!!Xn(this,"string"==typeof O&&Nn.test(O)?X(O):O||[],!1).length}});var Yn,li=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Gt=X.fn.init=function(O,B,te){var se,ve;if(!O)return this;if(te=te||Yn,"string"==typeof O){if(!(se="<"===O[0]&&">"===O[O.length-1]&&O.length>=3?[null,O,null]:li.exec(O))||!se[1]&&B)return!B||B.jquery?(B||te).find(O):this.constructor(B).find(O);if(se[1]){if(X.merge(this,X.parseHTML(se[1],(B=B instanceof X?B[0]:B)&&B.nodeType?B.ownerDocument||B:Ee,!0)),cn.test(se[1])&&X.isPlainObject(B))for(se in B)de(this[se])?this[se](B[se]):this.attr(se,B[se]);return this}return(ve=Ee.getElementById(se[2]))&&(this[0]=ve,this.length=1),this}return O.nodeType?(this[0]=O,this.length=1,this):de(O)?void 0!==te.ready?te.ready(O):O(X):X.makeArray(O,this)};Gt.prototype=X.fn,Yn=X(Ee);var qr=/^(?:parents|prev(?:Until|All))/,Kn={children:!0,contents:!0,next:!0,prev:!0};function bi(O,B){for(;(O=O[B])&&1!==O.nodeType;);return O}X.fn.extend({has:function(O){var B=X(O,this),te=B.length;return this.filter(function(){for(var se=0;se<te;se++)if(X.contains(this,B[se]))return!0})},closest:function(O,B){var te,se=0,ve=this.length,ye=[],we="string"!=typeof O&&X(O);if(!Nn.test(O))for(;se<ve;se++)for(te=this[se];te&&te!==B;te=te.parentNode)if(te.nodeType<11&&(we?we.index(te)>-1:1===te.nodeType&&X.find.matchesSelector(te,O))){ye.push(te);break}return this.pushStack(ye.length>1?X.uniqueSort(ye):ye)},index:function(O){return O?"string"==typeof O?G.call(X(O),this[0]):G.call(this,O.jquery?O[0]:O):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(O,B){return this.pushStack(X.uniqueSort(X.merge(this.get(),X(O,B))))},addBack:function(O){return this.add(null==O?this.prevObject:this.prevObject.filter(O))}}),X.each({parent:function(O){var B=O.parentNode;return B&&11!==B.nodeType?B:null},parents:function(O){return zn(O,"parentNode")},parentsUntil:function(O,B,te){return zn(O,"parentNode",te)},next:function(O){return bi(O,"nextSibling")},prev:function(O){return bi(O,"previousSibling")},nextAll:function(O){return zn(O,"nextSibling")},prevAll:function(O){return zn(O,"previousSibling")},nextUntil:function(O,B,te){return zn(O,"nextSibling",te)},prevUntil:function(O,B,te){return zn(O,"previousSibling",te)},siblings:function(O){return Rn((O.parentNode||{}).firstChild,O)},children:function(O){return Rn(O.firstChild)},contents:function(O){return null!=O.contentDocument&&H(O.contentDocument)?O.contentDocument:(Mt(O,"template")&&(O=O.content||O),X.merge([],O.childNodes))}},function(O,B){X.fn[O]=function(te,se){var ve=X.map(this,B,te);return"Until"!==O.slice(-5)&&(se=te),se&&"string"==typeof se&&(ve=X.filter(se,ve)),this.length>1&&(Kn[O]||X.uniqueSort(ve),qr.test(O)&&ve.reverse()),this.pushStack(ve)}});var gn=/[^\x20\t\r\n\f]+/g;function Si(O){return O}function Mr(O){throw O}function Rs(O,B,te,se){var ve;try{O&&de(ve=O.promise)?ve.call(O).done(B).fail(te):O&&de(ve=O.then)?ve.call(O,B,te):B.apply(void 0,[O].slice(se))}catch(ye){te.apply(void 0,[ye])}}X.Callbacks=function(O){O="string"==typeof O?function er(O){var B={};return X.each(O.match(gn)||[],function(te,se){B[se]=!0}),B}(O):X.extend({},O);var B,te,se,ve,ye=[],we=[],Je=-1,Ye=function(){for(ve=ve||O.once,se=B=!0;we.length;Je=-1)for(te=we.shift();++Je<ye.length;)!1===ye[Je].apply(te[0],te[1])&&O.stopOnFalse&&(Je=ye.length,te=!1);O.memory||(te=!1),B=!1,ve&&(ye=te?[]:"")},ht={add:function(){return ye&&(te&&!B&&(Je=ye.length-1,we.push(te)),function jt(nn){X.each(nn,function(xt,Cn){de(Cn)?(!O.unique||!ht.has(Cn))&&ye.push(Cn):Cn&&Cn.length&&"string"!==Ke(Cn)&&jt(Cn)})}(arguments),te&&!B&&Ye()),this},remove:function(){return X.each(arguments,function(jt,nn){for(var xt;(xt=X.inArray(nn,ye,xt))>-1;)ye.splice(xt,1),xt<=Je&&Je--}),this},has:function(jt){return jt?X.inArray(jt,ye)>-1:ye.length>0},empty:function(){return ye&&(ye=[]),this},disable:function(){return ve=we=[],ye=te="",this},disabled:function(){return!ye},lock:function(){return ve=we=[],!te&&!B&&(ye=te=""),this},locked:function(){return!!ve},fireWith:function(jt,nn){return ve||(nn=[jt,(nn=nn||[]).slice?nn.slice():nn],we.push(nn),B||Ye()),this},fire:function(){return ht.fireWith(this,arguments),this},fired:function(){return!!se}};return ht},X.extend({Deferred:function(O){var B=[["notify","progress",X.Callbacks("memory"),X.Callbacks("memory"),2],["resolve","done",X.Callbacks("once memory"),X.Callbacks("once memory"),0,"resolved"],["reject","fail",X.Callbacks("once memory"),X.Callbacks("once memory"),1,"rejected"]],te="pending",se={state:function(){return te},always:function(){return ve.done(arguments).fail(arguments),this},catch:function(ye){return se.then(null,ye)},pipe:function(){var ye=arguments;return X.Deferred(function(we){X.each(B,function(Je,Ye){var ht=de(ye[Ye[4]])&&ye[Ye[4]];ve[Ye[1]](function(){var jt=ht&&ht.apply(this,arguments);jt&&de(jt.promise)?jt.promise().progress(we.notify).done(we.resolve).fail(we.reject):we[Ye[0]+"With"](this,ht?[jt]:arguments)})}),ye=null}).promise()},then:function(ye,we,Je){var Ye=0;function ht(jt,nn,xt,Cn){return function(){var Mi=this,Ti=arguments,Gi=function(){var Ss,ys;if(!(jt<Ye)){if((Ss=xt.apply(Mi,Ti))===nn.promise())throw new TypeError("Thenable self-resolution");de(ys=Ss&&("object"==typeof Ss||"function"==typeof Ss)&&Ss.then)?Cn?ys.call(Ss,ht(Ye,nn,Si,Cn),ht(Ye,nn,Mr,Cn)):(Ye++,ys.call(Ss,ht(Ye,nn,Si,Cn),ht(Ye,nn,Mr,Cn),ht(Ye,nn,Si,nn.notifyWith))):(xt!==Si&&(Mi=void 0,Ti=[Ss]),(Cn||nn.resolveWith)(Mi,Ti))}},po=Cn?Gi:function(){try{Gi()}catch(Ss){X.Deferred.exceptionHook&&X.Deferred.exceptionHook(Ss,po.error),jt+1>=Ye&&(xt!==Mr&&(Mi=void 0,Ti=[Ss]),nn.rejectWith(Mi,Ti))}};jt?po():(X.Deferred.getErrorHook?po.error=X.Deferred.getErrorHook():X.Deferred.getStackHook&&(po.error=X.Deferred.getStackHook()),S.setTimeout(po))}}return X.Deferred(function(jt){B[0][3].add(ht(0,jt,de(Je)?Je:Si,jt.notifyWith)),B[1][3].add(ht(0,jt,de(ye)?ye:Si)),B[2][3].add(ht(0,jt,de(we)?we:Mr))}).promise()},promise:function(ye){return null!=ye?X.extend(ye,se):se}},ve={};return X.each(B,function(ye,we){var Je=we[2],Ye=we[5];se[we[1]]=Je.add,Ye&&Je.add(function(){te=Ye},B[3-ye][2].disable,B[3-ye][3].disable,B[0][2].lock,B[0][3].lock),Je.add(we[3].fire),ve[we[0]]=function(){return ve[we[0]+"With"](this===ve?void 0:this,arguments),this},ve[we[0]+"With"]=Je.fireWith}),se.promise(ve),O&&O.call(ve,ve),ve},when:function(O){var B=arguments.length,te=B,se=Array(te),ve=q.call(arguments),ye=X.Deferred(),we=function(Je){return function(Ye){se[Je]=this,ve[Je]=arguments.length>1?q.call(arguments):Ye,--B||ye.resolveWith(se,ve)}};if(B<=1&&(Rs(O,ye.done(we(te)).resolve,ye.reject,!B),"pending"===ye.state()||de(ve[te]&&ve[te].then)))return ye.then();for(;te--;)Rs(ve[te],we(te),ye.reject);return ye.promise()}});var Cr=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;X.Deferred.exceptionHook=function(O,B){S.console&&S.console.warn&&O&&Cr.test(O.name)&&S.console.warn("jQuery.Deferred exception: "+O.message,O.stack,B)},X.readyException=function(O){S.setTimeout(function(){throw O})};var gs=X.Deferred();function Zr(){Ee.removeEventListener("DOMContentLoaded",Zr),S.removeEventListener("load",Zr),X.ready()}X.fn.ready=function(O){return gs.then(O).catch(function(B){X.readyException(B)}),this},X.extend({isReady:!1,readyWait:1,ready:function(O){(!0===O?--X.readyWait:X.isReady)||(X.isReady=!0,!(!0!==O&&--X.readyWait>0)&&gs.resolveWith(Ee,[X]))}}),X.ready.then=gs.then,"complete"===Ee.readyState||"loading"!==Ee.readyState&&!Ee.documentElement.doScroll?S.setTimeout(X.ready):(Ee.addEventListener("DOMContentLoaded",Zr),S.addEventListener("load",Zr));var En=function(O,B,te,se,ve,ye,we){var Je=0,Ye=O.length,ht=null==te;if("object"===Ke(te))for(Je in ve=!0,te)En(O,B,Je,te[Je],!0,ye,we);else if(void 0!==se&&(ve=!0,de(se)||(we=!0),ht&&(we?(B.call(O,se),B=null):(ht=B,B=function(jt,nn,xt){return ht.call(X(jt),xt)})),B))for(;Je<Ye;Je++)B(O[Je],te,we?se:se.call(O[Je],Je,B(O[Je],te)));return ve?O:ht?B.call(O):Ye?B(O[0],te):ye},wi=/^-ms-/,Rr=/-([a-z])/g;function or(O,B){return B.toUpperCase()}function ar(O){return O.replace(wi,"ms-").replace(Rr,or)}var Pr=function(O){return 1===O.nodeType||9===O.nodeType||!+O.nodeType};function fi(){this.expando=X.expando+fi.uid++}fi.uid=1,fi.prototype={cache:function(O){var B=O[this.expando];return B||(B={},Pr(O)&&(O.nodeType?O[this.expando]=B:Object.defineProperty(O,this.expando,{value:B,configurable:!0}))),B},set:function(O,B,te){var se,ve=this.cache(O);if("string"==typeof B)ve[ar(B)]=te;else for(se in B)ve[ar(se)]=B[se];return ve},get:function(O,B){return void 0===B?this.cache(O):O[this.expando]&&O[this.expando][ar(B)]},access:function(O,B,te){return void 0===B||B&&"string"==typeof B&&void 0===te?this.get(O,B):(this.set(O,B,te),void 0!==te?te:B)},remove:function(O,B){var te,se=O[this.expando];if(void 0!==se){if(void 0!==B)for((te=(B=Array.isArray(B)?B.map(ar):(B=ar(B))in se?[B]:B.match(gn)||[]).length);te--;)delete se[B[te]];(void 0===B||X.isEmptyObject(se))&&(O.nodeType?O[this.expando]=void 0:delete O[this.expando])}},hasData:function(O){var B=O[this.expando];return void 0!==B&&!X.isEmptyObject(B)}};var Vn=new fi,os=new fi,ua=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Br=/[A-Z]/g;function mi(O,B,te){var se;if(void 0===te&&1===O.nodeType)if(se="data-"+B.replace(Br,"-$&").toLowerCase(),"string"==typeof(te=O.getAttribute(se))){try{te=function Ln(O){return"true"===O||"false"!==O&&("null"===O?null:O===+O+""?+O:ua.test(O)?JSON.parse(O):O)}(te)}catch{}os.set(O,B,te)}else te=void 0;return te}X.extend({hasData:function(O){return os.hasData(O)||Vn.hasData(O)},data:function(O,B,te){return os.access(O,B,te)},removeData:function(O,B){os.remove(O,B)},_data:function(O,B,te){return Vn.access(O,B,te)},_removeData:function(O,B){Vn.remove(O,B)}}),X.fn.extend({data:function(O,B){var te,se,ve,ye=this[0],we=ye&&ye.attributes;if(void 0===O){if(this.length&&(ve=os.get(ye),1===ye.nodeType&&!Vn.get(ye,"hasDataAttrs"))){for(te=we.length;te--;)we[te]&&0===(se=we[te].name).indexOf("data-")&&(se=ar(se.slice(5)),mi(ye,se,ve[se]));Vn.set(ye,"hasDataAttrs",!0)}return ve}return"object"==typeof O?this.each(function(){os.set(this,O)}):En(this,function(Je){var Ye;if(ye&&void 0===Je)return void 0!==(Ye=os.get(ye,O))||void 0!==(Ye=mi(ye,O))?Ye:void 0;this.each(function(){os.set(this,O,Je)})},null,B,arguments.length>1,null,!0)},removeData:function(O){return this.each(function(){os.remove(this,O)})}}),X.extend({queue:function(O,B,te){var se;if(O)return se=Vn.get(O,B=(B||"fx")+"queue"),te&&(!se||Array.isArray(te)?se=Vn.access(O,B,X.makeArray(te)):se.push(te)),se||[]},dequeue:function(O,B){var te=X.queue(O,B=B||"fx"),se=te.length,ve=te.shift(),ye=X._queueHooks(O,B);"inprogress"===ve&&(ve=te.shift(),se--),ve&&("fx"===B&&te.unshift("inprogress"),delete ye.stop,ve.call(O,function(){X.dequeue(O,B)},ye)),!se&&ye&&ye.empty.fire()},_queueHooks:function(O,B){var te=B+"queueHooks";return Vn.get(O,te)||Vn.access(O,te,{empty:X.Callbacks("once memory").add(function(){Vn.remove(O,[B+"queue",te])})})}}),X.fn.extend({queue:function(O,B){var te=2;return"string"!=typeof O&&(B=O,O="fx",te--),arguments.length<te?X.queue(this[0],O):void 0===B?this:this.each(function(){var se=X.queue(this,O,B);X._queueHooks(this,O),"fx"===O&&"inprogress"!==se[0]&&X.dequeue(this,O)})},dequeue:function(O){return this.each(function(){X.dequeue(this,O)})},clearQueue:function(O){return this.queue(O||"fx",[])},promise:function(O,B){var te,se=1,ve=X.Deferred(),ye=this,we=this.length,Je=function(){--se||ve.resolveWith(ye,[ye])};for("string"!=typeof O&&(B=O,O=void 0),O=O||"fx";we--;)(te=Vn.get(ye[we],O+"queueHooks"))&&te.empty&&(se++,te.empty.add(Je));return Je(),ve.promise(B)}});var zr=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ts=new RegExp("^(?:([+-])=|)("+zr+")([a-z%]*)$","i"),as=["Top","Right","Bottom","Left"],ls=Ee.documentElement,Cs=function(O){return X.contains(O.ownerDocument,O)},co={composed:!0};ls.getRootNode&&(Cs=function(O){return X.contains(O.ownerDocument,O)||O.getRootNode(co)===O.ownerDocument});var Gs=function(O,B){return"none"===(O=B||O).style.display||""===O.style.display&&Cs(O)&&"none"===X.css(O,"display")};function Jt(O,B,te,se){var ve,ye,we=20,Je=se?function(){return se.cur()}:function(){return X.css(O,B,"")},Ye=Je(),ht=te&&te[3]||(X.cssNumber[B]?"":"px"),jt=O.nodeType&&(X.cssNumber[B]||"px"!==ht&&+Ye)&&ts.exec(X.css(O,B));if(jt&&jt[3]!==ht){for(ht=ht||jt[3],jt=+(Ye/=2)||1;we--;)X.style(O,B,jt+ht),(1-ye)*(1-(ye=Je()/Ye||.5))<=0&&(we=0),jt/=ye;X.style(O,B,(jt*=2)+ht),te=te||[]}return te&&(jt=+jt||+Ye||0,ve=te[1]?jt+(te[1]+1)*te[2]:+te[2],se&&(se.unit=ht,se.start=jt,se.end=ve)),ve}var Ta={};function Ai(O){var B,te=O.ownerDocument,se=O.nodeName,ve=Ta[se];return ve||(B=te.body.appendChild(te.createElement(se)),ve=X.css(B,"display"),B.parentNode.removeChild(B),"none"===ve&&(ve="block"),Ta[se]=ve,ve)}function Os(O,B){for(var te,se,ve=[],ye=0,we=O.length;ye<we;ye++)(se=O[ye]).style&&(te=se.style.display,B?("none"===te&&(ve[ye]=Vn.get(se,"display")||null,ve[ye]||(se.style.display="")),""===se.style.display&&Gs(se)&&(ve[ye]=Ai(se))):"none"!==te&&(ve[ye]="none",Vn.set(se,"display",te)));for(ye=0;ye<we;ye++)null!=ve[ye]&&(O[ye].style.display=ve[ye]);return O}X.fn.extend({show:function(){return Os(this,!0)},hide:function(){return Os(this)},toggle:function(O){return"boolean"==typeof O?O?this.show():this.hide():this.each(function(){Gs(this)?X(this).show():X(this).hide()})}});var B,te,Pn=/^(?:checkbox|radio)$/i,Kt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,mn=/^$|^module$|\/(?:java|ecma)script/i;B=Ee.createDocumentFragment().appendChild(Ee.createElement("div")),(te=Ee.createElement("input")).setAttribute("type","radio"),te.setAttribute("checked","checked"),te.setAttribute("name","t"),B.appendChild(te),ee.checkClone=B.cloneNode(!0).cloneNode(!0).lastChild.checked,B.innerHTML="<textarea>x</textarea>",ee.noCloneChecked=!!B.cloneNode(!0).lastChild.defaultValue,B.innerHTML="<option></option>",ee.option=!!B.lastChild;var Mn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function An(O,B){var te;return te=typeof O.getElementsByTagName<"u"?O.getElementsByTagName(B||"*"):typeof O.querySelectorAll<"u"?O.querySelectorAll(B||"*"):[],void 0===B||B&&Mt(O,B)?X.merge([O],te):te}function ri(O,B){for(var te=0,se=O.length;te<se;te++)Vn.set(O[te],"globalEval",!B||Vn.get(B[te],"globalEval"))}Mn.tbody=Mn.tfoot=Mn.colgroup=Mn.caption=Mn.thead,Mn.th=Mn.td,ee.option||(Mn.optgroup=Mn.option=[1,"<select multiple='multiple'>","</select>"]);var _r=/<|&#?\w+;/;function xi(O,B,te,se,ve){for(var ye,we,Je,Ye,ht,jt,nn=B.createDocumentFragment(),xt=[],Cn=0,Mi=O.length;Cn<Mi;Cn++)if((ye=O[Cn])||0===ye)if("object"===Ke(ye))X.merge(xt,ye.nodeType?[ye]:ye);else if(_r.test(ye)){for(we=we||nn.appendChild(B.createElement("div")),Je=(Kt.exec(ye)||["",""])[1].toLowerCase(),we.innerHTML=(Ye=Mn[Je]||Mn._default)[1]+X.htmlPrefilter(ye)+Ye[2],jt=Ye[0];jt--;)we=we.lastChild;X.merge(xt,we.childNodes),(we=nn.firstChild).textContent=""}else xt.push(B.createTextNode(ye));for(nn.textContent="",Cn=0;ye=xt[Cn++];)if(se&&X.inArray(ye,se)>-1)ve&&ve.push(ye);else if(ht=Cs(ye),we=An(nn.appendChild(ye),"script"),ht&&ri(we),te)for(jt=0;ye=we[jt++];)mn.test(ye.type||"")&&te.push(ye);return nn}var Qr=/^([^.]*)(?:\.(.+)|)/;function si(){return!0}function Jr(){return!1}function ml(O,B,te,se,ve,ye){var we,Je;if("object"==typeof B){for(Je in"string"!=typeof te&&(se=se||te,te=void 0),B)ml(O,Je,te,se,B[Je],ye);return O}if(null==se&&null==ve?(ve=te,se=te=void 0):null==ve&&("string"==typeof te?(ve=se,se=void 0):(ve=se,se=te,te=void 0)),!1===ve)ve=Jr;else if(!ve)return O;return 1===ye&&(we=ve,ve=function(Ye){return X().off(Ye),we.apply(this,arguments)},ve.guid=we.guid||(we.guid=X.guid++)),O.each(function(){X.event.add(this,B,ve,se,te)})}function Qd(O,B,te){te?(Vn.set(O,B,!1),X.event.add(O,B,{namespace:!1,handler:function(se){var ve,ye=Vn.get(this,B);if(1&se.isTrigger&&this[B]){if(ye)(X.event.special[B]||{}).delegateType&&se.stopPropagation();else if(ye=q.call(arguments),Vn.set(this,B,ye),this[B](),ve=Vn.get(this,B),Vn.set(this,B,!1),ye!==ve)return se.stopImmediatePropagation(),se.preventDefault(),ve}else ye&&(Vn.set(this,B,X.event.trigger(ye[0],ye.slice(1),this)),se.stopPropagation(),se.isImmediatePropagationStopped=si)}})):void 0===Vn.get(O,B)&&X.event.add(O,B,si)}X.event={global:{},add:function(O,B,te,se,ve){var ye,we,Je,Ye,ht,jt,nn,xt,Cn,Mi,Ti,Gi=Vn.get(O);if(Pr(O))for(te.handler&&(te=(ye=te).handler,ve=ye.selector),ve&&X.find.matchesSelector(ls,ve),te.guid||(te.guid=X.guid++),(Ye=Gi.events)||(Ye=Gi.events=Object.create(null)),(we=Gi.handle)||(we=Gi.handle=function(po){return typeof X<"u"&&X.event.triggered!==po.type?X.event.dispatch.apply(O,arguments):void 0}),ht=(B=(B||"").match(gn)||[""]).length;ht--;)Cn=Ti=(Je=Qr.exec(B[ht])||[])[1],Mi=(Je[2]||"").split(".").sort(),Cn&&(nn=X.event.special[Cn]||{},nn=X.event.special[Cn=(ve?nn.delegateType:nn.bindType)||Cn]||{},jt=X.extend({type:Cn,origType:Ti,data:se,handler:te,guid:te.guid,selector:ve,needsContext:ve&&X.expr.match.needsContext.test(ve),namespace:Mi.join(".")},ye),(xt=Ye[Cn])||((xt=Ye[Cn]=[]).delegateCount=0,(!nn.setup||!1===nn.setup.call(O,se,Mi,we))&&O.addEventListener&&O.addEventListener(Cn,we)),nn.add&&(nn.add.call(O,jt),jt.handler.guid||(jt.handler.guid=te.guid)),ve?xt.splice(xt.delegateCount++,0,jt):xt.push(jt),X.event.global[Cn]=!0)},remove:function(O,B,te,se,ve){var ye,we,Je,Ye,ht,jt,nn,xt,Cn,Mi,Ti,Gi=Vn.hasData(O)&&Vn.get(O);if(Gi&&(Ye=Gi.events)){for(ht=(B=(B||"").match(gn)||[""]).length;ht--;)if(Cn=Ti=(Je=Qr.exec(B[ht])||[])[1],Mi=(Je[2]||"").split(".").sort(),Cn){for(nn=X.event.special[Cn]||{},xt=Ye[Cn=(se?nn.delegateType:nn.bindType)||Cn]||[],Je=Je[2]&&new RegExp("(^|\\.)"+Mi.join("\\.(?:.*\\.|)")+"(\\.|$)"),we=ye=xt.length;ye--;)jt=xt[ye],(ve||Ti===jt.origType)&&(!te||te.guid===jt.guid)&&(!Je||Je.test(jt.namespace))&&(!se||se===jt.selector||"**"===se&&jt.selector)&&(xt.splice(ye,1),jt.selector&&xt.delegateCount--,nn.remove&&nn.remove.call(O,jt));we&&!xt.length&&((!nn.teardown||!1===nn.teardown.call(O,Mi,Gi.handle))&&X.removeEvent(O,Cn,Gi.handle),delete Ye[Cn])}else for(Cn in Ye)X.event.remove(O,Cn+B[ht],te,se,!0);X.isEmptyObject(Ye)&&Vn.remove(O,"handle events")}},dispatch:function(O){var B,te,se,ve,ye,we,Je=new Array(arguments.length),Ye=X.event.fix(O),ht=(Vn.get(this,"events")||Object.create(null))[Ye.type]||[],jt=X.event.special[Ye.type]||{};for(Je[0]=Ye,B=1;B<arguments.length;B++)Je[B]=arguments[B];if(Ye.delegateTarget=this,!jt.preDispatch||!1!==jt.preDispatch.call(this,Ye)){for(we=X.event.handlers.call(this,Ye,ht),B=0;(ve=we[B++])&&!Ye.isPropagationStopped();)for(Ye.currentTarget=ve.elem,te=0;(ye=ve.handlers[te++])&&!Ye.isImmediatePropagationStopped();)(!Ye.rnamespace||!1===ye.namespace||Ye.rnamespace.test(ye.namespace))&&(Ye.handleObj=ye,Ye.data=ye.data,void 0!==(se=((X.event.special[ye.origType]||{}).handle||ye.handler).apply(ve.elem,Je))&&!1===(Ye.result=se)&&(Ye.preventDefault(),Ye.stopPropagation()));return jt.postDispatch&&jt.postDispatch.call(this,Ye),Ye.result}},handlers:function(O,B){var te,se,ve,ye,we,Je=[],Ye=B.delegateCount,ht=O.target;if(Ye&&ht.nodeType&&!("click"===O.type&&O.button>=1))for(;ht!==this;ht=ht.parentNode||this)if(1===ht.nodeType&&("click"!==O.type||!0!==ht.disabled)){for(ye=[],we={},te=0;te<Ye;te++)void 0===we[ve=(se=B[te]).selector+" "]&&(we[ve]=se.needsContext?X(ve,this).index(ht)>-1:X.find(ve,this,null,[ht]).length),we[ve]&&ye.push(se);ye.length&&Je.push({elem:ht,handlers:ye})}return ht=this,Ye<B.length&&Je.push({elem:ht,handlers:B.slice(Ye)}),Je},addProp:function(O,B){Object.defineProperty(X.Event.prototype,O,{enumerable:!0,configurable:!0,get:de(B)?function(){if(this.originalEvent)return B(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[O]},set:function(te){Object.defineProperty(this,O,{enumerable:!0,configurable:!0,writable:!0,value:te})}})},fix:function(O){return O[X.expando]?O:new X.Event(O)},special:{load:{noBubble:!0},click:{setup:function(O){var B=this||O;return Pn.test(B.type)&&B.click&&Mt(B,"input")&&Qd(B,"click",!0),!1},trigger:function(O){var B=this||O;return Pn.test(B.type)&&B.click&&Mt(B,"input")&&Qd(B,"click"),!0},_default:function(O){var B=O.target;return Pn.test(B.type)&&B.click&&Mt(B,"input")&&Vn.get(B,"click")||Mt(B,"a")}},beforeunload:{postDispatch:function(O){void 0!==O.result&&O.originalEvent&&(O.originalEvent.returnValue=O.result)}}}},X.removeEvent=function(O,B,te){O.removeEventListener&&O.removeEventListener(B,te)},X.Event=function(O,B){if(!(this instanceof X.Event))return new X.Event(O,B);O&&O.type?(this.originalEvent=O,this.type=O.type,this.isDefaultPrevented=O.defaultPrevented||void 0===O.defaultPrevented&&!1===O.returnValue?si:Jr,this.target=O.target&&3===O.target.nodeType?O.target.parentNode:O.target,this.currentTarget=O.currentTarget,this.relatedTarget=O.relatedTarget):this.type=O,B&&X.extend(this,B),this.timeStamp=O&&O.timeStamp||Date.now(),this[X.expando]=!0},X.Event.prototype={constructor:X.Event,isDefaultPrevented:Jr,isPropagationStopped:Jr,isImmediatePropagationStopped:Jr,isSimulated:!1,preventDefault:function(){var O=this.originalEvent;this.isDefaultPrevented=si,O&&!this.isSimulated&&O.preventDefault()},stopPropagation:function(){var O=this.originalEvent;this.isPropagationStopped=si,O&&!this.isSimulated&&O.stopPropagation()},stopImmediatePropagation:function(){var O=this.originalEvent;this.isImmediatePropagationStopped=si,O&&!this.isSimulated&&O.stopImmediatePropagation(),this.stopPropagation()}},X.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},X.event.addProp),X.each({focus:"focusin",blur:"focusout"},function(O,B){function te(se){if(Ee.documentMode){var ve=Vn.get(this,"handle"),ye=X.event.fix(se);ye.type="focusin"===se.type?"focus":"blur",ye.isSimulated=!0,ve(se),ye.target===ye.currentTarget&&ve(ye)}else X.event.simulate(B,se.target,X.event.fix(se))}X.event.special[O]={setup:function(){var se;if(Qd(this,O,!0),!Ee.documentMode)return!1;(se=Vn.get(this,B))||this.addEventListener(B,te),Vn.set(this,B,(se||0)+1)},trigger:function(){return Qd(this,O),!0},teardown:function(){var se;if(!Ee.documentMode)return!1;(se=Vn.get(this,B)-1)?Vn.set(this,B,se):(this.removeEventListener(B,te),Vn.remove(this,B))},_default:function(se){return Vn.get(se.target,O)},delegateType:B},X.event.special[B]={setup:function(){var se=this.ownerDocument||this.document||this,ve=Ee.documentMode?this:se,ye=Vn.get(ve,B);ye||(Ee.documentMode?this.addEventListener(B,te):se.addEventListener(O,te,!0)),Vn.set(ve,B,(ye||0)+1)},teardown:function(){var se=this.ownerDocument||this.document||this,ve=Ee.documentMode?this:se,ye=Vn.get(ve,B)-1;ye?Vn.set(ve,B,ye):(Ee.documentMode?this.removeEventListener(B,te):se.removeEventListener(O,te,!0),Vn.remove(ve,B))}}}),X.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(O,B){X.event.special[O]={delegateType:B,bindType:B,handle:function(te){var se,ye=te.relatedTarget,we=te.handleObj;return(!ye||ye!==this&&!X.contains(this,ye))&&(te.type=we.origType,se=we.handler.apply(this,arguments),te.type=B),se}}}),X.fn.extend({on:function(O,B,te,se){return ml(this,O,B,te,se)},one:function(O,B,te,se){return ml(this,O,B,te,se,1)},off:function(O,B,te){var se,ve;if(O&&O.preventDefault&&O.handleObj)return se=O.handleObj,X(O.delegateTarget).off(se.namespace?se.origType+"."+se.namespace:se.origType,se.selector,se.handler),this;if("object"==typeof O){for(ve in O)this.off(ve,B,O[ve]);return this}return(!1===B||"function"==typeof B)&&(te=B,B=void 0),!1===te&&(te=Jr),this.each(function(){X.event.remove(this,O,te,B)})}});var cs=/<script|<style|<link/i,Zl=/checked\s*(?:[^=]|=\s*.checked.)/i,Uh=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function gm(O,B){return Mt(O,"table")&&Mt(11!==B.nodeType?B:B.firstChild,"tr")&&X(O).children("tbody")[0]||O}function qi(O){return O.type=(null!==O.getAttribute("type"))+"/"+O.type,O}function n0(O){return"true/"===(O.type||"").slice(0,5)?O.type=O.type.slice(5):O.removeAttribute("type"),O}function vm(O,B){var te,se,ve,we,Je,Ye;if(1===B.nodeType){if(Vn.hasData(O)&&(Ye=Vn.get(O).events))for(ve in Vn.remove(B,"handle events"),Ye)for(te=0,se=Ye[ve].length;te<se;te++)X.event.add(B,ve,Ye[ve][te]);os.hasData(O)&&(we=os.access(O),Je=X.extend({},we),os.set(B,Je))}}function jp(O,B){var te=B.nodeName.toLowerCase();"input"===te&&Pn.test(O.type)?B.checked=O.checked:("input"===te||"textarea"===te)&&(B.defaultValue=O.defaultValue)}function Ki(O,B,te,se){B=J(B);var ve,ye,we,Je,Ye,ht,jt=0,nn=O.length,xt=nn-1,Cn=B[0],Mi=de(Cn);if(Mi||nn>1&&"string"==typeof Cn&&!ee.checkClone&&Zl.test(Cn))return O.each(function(Ti){var Gi=O.eq(Ti);Mi&&(B[0]=Cn.call(this,Ti,Gi.html())),Ki(Gi,B,te,se)});if(nn&&(ye=(ve=xi(B,O[0].ownerDocument,!1,O,se)).firstChild,1===ve.childNodes.length&&(ve=ye),ye||se)){for(Je=(we=X.map(An(ve,"script"),qi)).length;jt<nn;jt++)Ye=ve,jt!==xt&&(Ye=X.clone(Ye,!0,!0),Je&&X.merge(we,An(Ye,"script"))),te.call(O[jt],Ye,jt);if(Je)for(ht=we[we.length-1].ownerDocument,X.map(we,n0),jt=0;jt<Je;jt++)mn.test((Ye=we[jt]).type||"")&&!Vn.access(Ye,"globalEval")&&X.contains(ht,Ye)&&(Ye.src&&"module"!==(Ye.type||"").toLowerCase()?X._evalUrl&&!Ye.noModule&&X._evalUrl(Ye.src,{nonce:Ye.nonce||Ye.getAttribute("nonce")},ht):ct(Ye.textContent.replace(Uh,""),Ye,ht))}return O}function Hp(O,B,te){for(var se,ve=B?X.filter(B,O):O,ye=0;null!=(se=ve[ye]);ye++)!te&&1===se.nodeType&&X.cleanData(An(se)),se.parentNode&&(te&&Cs(se)&&ri(An(se,"script")),se.parentNode.removeChild(se));return O}X.extend({htmlPrefilter:function(O){return O},clone:function(O,B,te){var se,ve,ye,we,Je=O.cloneNode(!0),Ye=Cs(O);if(!(ee.noCloneChecked||1!==O.nodeType&&11!==O.nodeType||X.isXMLDoc(O)))for(we=An(Je),se=0,ve=(ye=An(O)).length;se<ve;se++)jp(ye[se],we[se]);if(B)if(te)for(ye=ye||An(O),we=we||An(Je),se=0,ve=ye.length;se<ve;se++)vm(ye[se],we[se]);else vm(O,Je);return(we=An(Je,"script")).length>0&&ri(we,!Ye&&An(O,"script")),Je},cleanData:function(O){for(var B,te,se,ve=X.event.special,ye=0;void 0!==(te=O[ye]);ye++)if(Pr(te)){if(B=te[Vn.expando]){if(B.events)for(se in B.events)ve[se]?X.event.remove(te,se):X.removeEvent(te,se,B.handle);te[Vn.expando]=void 0}te[os.expando]&&(te[os.expando]=void 0)}}}),X.fn.extend({detach:function(O){return Hp(this,O,!0)},remove:function(O){return Hp(this,O)},text:function(O){return En(this,function(B){return void 0===B?X.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=B)})},null,O,arguments.length)},append:function(){return Ki(this,arguments,function(O){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||gm(this,O).appendChild(O)})},prepend:function(){return Ki(this,arguments,function(O){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var B=gm(this,O);B.insertBefore(O,B.firstChild)}})},before:function(){return Ki(this,arguments,function(O){this.parentNode&&this.parentNode.insertBefore(O,this)})},after:function(){return Ki(this,arguments,function(O){this.parentNode&&this.parentNode.insertBefore(O,this.nextSibling)})},empty:function(){for(var O,B=0;null!=(O=this[B]);B++)1===O.nodeType&&(X.cleanData(An(O,!1)),O.textContent="");return this},clone:function(O,B){return O=O??!1,B=B??O,this.map(function(){return X.clone(this,O,B)})},html:function(O){return En(this,function(B){var te=this[0]||{},se=0,ve=this.length;if(void 0===B&&1===te.nodeType)return te.innerHTML;if("string"==typeof B&&!cs.test(B)&&!Mn[(Kt.exec(B)||["",""])[1].toLowerCase()]){B=X.htmlPrefilter(B);try{for(;se<ve;se++)1===(te=this[se]||{}).nodeType&&(X.cleanData(An(te,!1)),te.innerHTML=B);te=0}catch{}}te&&this.empty().append(B)},null,O,arguments.length)},replaceWith:function(){var O=[];return Ki(this,arguments,function(B){var te=this.parentNode;X.inArray(this,O)<0&&(X.cleanData(An(this)),te&&te.replaceChild(B,this))},O)}}),X.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(O,B){X.fn[O]=function(te){for(var se,ve=[],ye=X(te),we=ye.length-1,Je=0;Je<=we;Je++)se=Je===we?this:this.clone(!0),X(ye[Je])[B](se),F.apply(ve,se.get());return this.pushStack(ve)}});var cd=new RegExp("^("+zr+")(?!px)[a-z%]+$","i"),xn=/^--/,Mo=function(O){var B=O.ownerDocument.defaultView;return(!B||!B.opener)&&(B=S),B.getComputedStyle(O)},Ur=function(O,B,te){var se,ve,ye={};for(ve in B)ye[ve]=O.style[ve],O.style[ve]=B[ve];for(ve in se=te.call(O),B)O.style[ve]=ye[ve];return se},Io=new RegExp(as.join("|"),"i");function ho(O,B,te){var se,ve,ye,we,Je=xn.test(B),Ye=O.style;return(te=te||Mo(O))&&(we=te.getPropertyValue(B)||te[B],Je&&we&&(we=we.replace(Ot,"$1")||void 0),""===we&&!Cs(O)&&(we=X.style(O,B)),!ee.pixelBoxStyles()&&cd.test(we)&&Io.test(B)&&(se=Ye.width,ve=Ye.minWidth,ye=Ye.maxWidth,Ye.minWidth=Ye.maxWidth=Ye.width=we,we=te.width,Ye.width=se,Ye.minWidth=ve,Ye.maxWidth=ye)),void 0!==we?we+"":we}function dd(O,B){return{get:function(){if(!O())return(this.get=B).apply(this,arguments);delete this.get}}}!function(){function O(){if(ht){Ye.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",ht.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ls.appendChild(Ye).appendChild(ht);var jt=S.getComputedStyle(ht);te="1%"!==jt.top,Je=12===B(jt.marginLeft),ht.style.right="60%",ye=36===B(jt.right),se=36===B(jt.width),ht.style.position="absolute",ve=12===B(ht.offsetWidth/3),ls.removeChild(Ye),ht=null}}function B(jt){return Math.round(parseFloat(jt))}var te,se,ve,ye,we,Je,Ye=Ee.createElement("div"),ht=Ee.createElement("div");ht.style&&(ht.style.backgroundClip="content-box",ht.cloneNode(!0).style.backgroundClip="",ee.clearCloneStyle="content-box"===ht.style.backgroundClip,X.extend(ee,{boxSizingReliable:function(){return O(),se},pixelBoxStyles:function(){return O(),ye},pixelPosition:function(){return O(),te},reliableMarginLeft:function(){return O(),Je},scrollboxSize:function(){return O(),ve},reliableTrDimensions:function(){var jt,nn,xt,Cn;return null==we&&(jt=Ee.createElement("table"),nn=Ee.createElement("tr"),xt=Ee.createElement("div"),jt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",nn.style.cssText="box-sizing:content-box;border:1px solid",nn.style.height="1px",xt.style.height="9px",xt.style.display="block",ls.appendChild(jt).appendChild(nn).appendChild(xt),Cn=S.getComputedStyle(nn),we=parseInt(Cn.height,10)+parseInt(Cn.borderTopWidth,10)+parseInt(Cn.borderBottomWidth,10)===nn.offsetHeight,ls.removeChild(jt)),we}}))}();var Ro=["Webkit","Moz","ms"],Gp=Ee.createElement("div").style,Iu={};function Ja(O){return X.cssProps[O]||Iu[O]||(O in Gp?O:Iu[O]=function Ru(O){for(var B=O[0].toUpperCase()+O.slice(1),te=Ro.length;te--;)if((O=Ro[te]+B)in Gp)return O}(O)||O)}var Gn=/^(none|table(?!-c[ea]).+)/,tr={position:"absolute",visibility:"hidden",display:"block"},ks={letterSpacing:"0",fontWeight:"400"};function el(O,B,te){var se=ts.exec(B);return se?Math.max(0,se[2]-(te||0))+(se[3]||"px"):B}function Ql(O,B,te,se,ve,ye){var we="width"===B?1:0,Je=0,Ye=0,ht=0;if(te===(se?"border":"content"))return 0;for(;we<4;we+=2)"margin"===te&&(ht+=X.css(O,te+as[we],!0,ve)),se?("content"===te&&(Ye-=X.css(O,"padding"+as[we],!0,ve)),"margin"!==te&&(Ye-=X.css(O,"border"+as[we]+"Width",!0,ve))):(Ye+=X.css(O,"padding"+as[we],!0,ve),"padding"!==te?Ye+=X.css(O,"border"+as[we]+"Width",!0,ve):Je+=X.css(O,"border"+as[we]+"Width",!0,ve));return!se&&ye>=0&&(Ye+=Math.max(0,Math.ceil(O["offset"+B[0].toUpperCase()+B.slice(1)]-ye-Ye-Je-.5))||0),Ye+ht}function Co(O,B,te){var se=Mo(O),ye=(!ee.boxSizingReliable()||te)&&"border-box"===X.css(O,"boxSizing",!1,se),we=ye,Je=ho(O,B,se),Ye="offset"+B[0].toUpperCase()+B.slice(1);if(cd.test(Je)){if(!te)return Je;Je="auto"}return(!ee.boxSizingReliable()&&ye||!ee.reliableTrDimensions()&&Mt(O,"tr")||"auto"===Je||!parseFloat(Je)&&"inline"===X.css(O,"display",!1,se))&&O.getClientRects().length&&(ye="border-box"===X.css(O,"boxSizing",!1,se),(we=Ye in O)&&(Je=O[Ye])),(Je=parseFloat(Je)||0)+Ql(O,B,te||(ye?"border":"content"),we,se,Je)+"px"}function As(O,B,te,se,ve){return new As.prototype.init(O,B,te,se,ve)}X.extend({cssHooks:{opacity:{get:function(O,B){if(B){var te=ho(O,"opacity");return""===te?"1":te}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(O,B,te,se){if(O&&3!==O.nodeType&&8!==O.nodeType&&O.style){var ve,ye,we,Je=ar(B),Ye=xn.test(B),ht=O.style;if(Ye||(B=Ja(Je)),we=X.cssHooks[B]||X.cssHooks[Je],void 0===te)return we&&"get"in we&&void 0!==(ve=we.get(O,!1,se))?ve:ht[B];if("string"==(ye=typeof te)&&(ve=ts.exec(te))&&ve[1]&&(te=Jt(O,B,ve),ye="number"),null==te||te!=te)return;"number"===ye&&!Ye&&(te+=ve&&ve[3]||(X.cssNumber[Je]?"":"px")),!ee.clearCloneStyle&&""===te&&0===B.indexOf("background")&&(ht[B]="inherit"),(!we||!("set"in we)||void 0!==(te=we.set(O,te,se)))&&(Ye?ht.setProperty(B,te):ht[B]=te)}},css:function(O,B,te,se){var ve,ye,we,Je=ar(B);return xn.test(B)||(B=Ja(Je)),(we=X.cssHooks[B]||X.cssHooks[Je])&&"get"in we&&(ve=we.get(O,!0,te)),void 0===ve&&(ve=ho(O,B,se)),"normal"===ve&&B in ks&&(ve=ks[B]),""===te||te?(ye=parseFloat(ve),!0===te||isFinite(ye)?ye||0:ve):ve}}),X.each(["height","width"],function(O,B){X.cssHooks[B]={get:function(te,se,ve){if(se)return!Gn.test(X.css(te,"display"))||te.getClientRects().length&&te.getBoundingClientRect().width?Co(te,B,ve):Ur(te,tr,function(){return Co(te,B,ve)})},set:function(te,se,ve){var ye,we=Mo(te),Je=!ee.scrollboxSize()&&"absolute"===we.position,ht=(Je||ve)&&"border-box"===X.css(te,"boxSizing",!1,we),jt=ve?Ql(te,B,ve,ht,we):0;return ht&&Je&&(jt-=Math.ceil(te["offset"+B[0].toUpperCase()+B.slice(1)]-parseFloat(we[B])-Ql(te,B,"border",!1,we)-.5)),jt&&(ye=ts.exec(se))&&"px"!==(ye[3]||"px")&&(te.style[B]=se,se=X.css(te,B)),el(0,se,jt)}}}),X.cssHooks.marginLeft=dd(ee.reliableMarginLeft,function(O,B){if(B)return(parseFloat(ho(O,"marginLeft"))||O.getBoundingClientRect().left-Ur(O,{marginLeft:0},function(){return O.getBoundingClientRect().left}))+"px"}),X.each({margin:"",padding:"",border:"Width"},function(O,B){X.cssHooks[O+B]={expand:function(te){for(var se=0,ve={},ye="string"==typeof te?te.split(" "):[te];se<4;se++)ve[O+as[se]+B]=ye[se]||ye[se-2]||ye[0];return ve}},"margin"!==O&&(X.cssHooks[O+B].set=el)}),X.fn.extend({css:function(O,B){return En(this,function(te,se,ve){var ye,we,Je={},Ye=0;if(Array.isArray(se)){for(ye=Mo(te),we=se.length;Ye<we;Ye++)Je[se[Ye]]=X.css(te,se[Ye],!1,ye);return Je}return void 0!==ve?X.style(te,se,ve):X.css(te,se)},O,B,arguments.length>1)}}),X.Tween=As,As.prototype={constructor:As,init:function(O,B,te,se,ve,ye){this.elem=O,this.prop=te,this.easing=ve||X.easing._default,this.options=B,this.start=this.now=this.cur(),this.end=se,this.unit=ye||(X.cssNumber[te]?"":"px")},cur:function(){var O=As.propHooks[this.prop];return O&&O.get?O.get(this):As.propHooks._default.get(this)},run:function(O){var B,te=As.propHooks[this.prop];return this.pos=B=this.options.duration?X.easing[this.easing](O,this.options.duration*O,0,1,this.options.duration):O,this.now=(this.end-this.start)*B+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),te&&te.set?te.set(this):As.propHooks._default.set(this),this}},As.prototype.init.prototype=As.prototype,As.propHooks={_default:{get:function(O){var B;return 1!==O.elem.nodeType||null!=O.elem[O.prop]&&null==O.elem.style[O.prop]?O.elem[O.prop]:(B=X.css(O.elem,O.prop,""))&&"auto"!==B?B:0},set:function(O){X.fx.step[O.prop]?X.fx.step[O.prop](O):1!==O.elem.nodeType||!X.cssHooks[O.prop]&&null==O.elem.style[Ja(O.prop)]?O.elem[O.prop]=O.now:X.style(O.elem,O.prop,O.now+O.unit)}}},As.propHooks.scrollTop=As.propHooks.scrollLeft={set:function(O){O.elem.nodeType&&O.elem.parentNode&&(O.elem[O.prop]=O.now)}},X.easing={linear:function(O){return O},swing:function(O){return.5-Math.cos(O*Math.PI)/2},_default:"swing"},X.fx=As.prototype.init,X.fx.step={};var vs,hd,ku=/^(?:toggle|show|hide)$/,nr=/queueHooks$/;function Vh(){hd&&(!1===Ee.hidden&&S.requestAnimationFrame?S.requestAnimationFrame(Vh):S.setTimeout(Vh,X.fx.interval),X.fx.tick())}function gl(){return S.setTimeout(function(){vs=void 0}),vs=Date.now()}function Jd(O,B){var te,se=0,ve={height:O};for(B=B?1:0;se<4;se+=2-B)ve["margin"+(te=as[se])]=ve["padding"+te]=O;return B&&(ve.opacity=ve.width=O),ve}function ud(O,B,te){for(var se,ve=(ko.tweeners[B]||[]).concat(ko.tweeners["*"]),ye=0,we=ve.length;ye<we;ye++)if(se=ve[ye].call(te,B,O))return se}function ko(O,B,te){var se,ve,ye=0,we=ko.prefilters.length,Je=X.Deferred().always(function(){delete Ye.elem}),Ye=function(){if(ve)return!1;for(var nn=vs||gl(),xt=Math.max(0,ht.startTime+ht.duration-nn),Mi=1-(xt/ht.duration||0),Ti=0,Gi=ht.tweens.length;Ti<Gi;Ti++)ht.tweens[Ti].run(Mi);return Je.notifyWith(O,[ht,Mi,xt]),Mi<1&&Gi?xt:(Gi||Je.notifyWith(O,[ht,1,0]),Je.resolveWith(O,[ht]),!1)},ht=Je.promise({elem:O,props:X.extend({},B),opts:X.extend(!0,{specialEasing:{},easing:X.easing._default},te),originalProperties:B,originalOptions:te,startTime:vs||gl(),duration:te.duration,tweens:[],createTween:function(nn,xt){var Cn=X.Tween(O,ht.opts,nn,xt,ht.opts.specialEasing[nn]||ht.opts.easing);return ht.tweens.push(Cn),Cn},stop:function(nn){var xt=0,Cn=nn?ht.tweens.length:0;if(ve)return this;for(ve=!0;xt<Cn;xt++)ht.tweens[xt].run(1);return nn?(Je.notifyWith(O,[ht,1,0]),Je.resolveWith(O,[ht,nn])):Je.rejectWith(O,[ht,nn]),this}}),jt=ht.props;for(function eh(O,B){var te,se,ve,ye,we;for(te in O)if(ve=B[se=ar(te)],ye=O[te],Array.isArray(ye)&&(ve=ye[1],ye=O[te]=ye[0]),te!==se&&(O[se]=ye,delete O[te]),(we=X.cssHooks[se])&&"expand"in we)for(te in ye=we.expand(ye),delete O[se],ye)te in O||(O[te]=ye[te],B[te]=ve);else B[se]=ve}(jt,ht.opts.specialEasing);ye<we;ye++)if(se=ko.prefilters[ye].call(ht,O,jt,ht.opts))return de(se.stop)&&(X._queueHooks(ht.elem,ht.opts.queue).stop=se.stop.bind(se)),se;return X.map(jt,ud,ht),de(ht.opts.start)&&ht.opts.start.call(O,ht),ht.progress(ht.opts.progress).done(ht.opts.done,ht.opts.complete).fail(ht.opts.fail).always(ht.opts.always),X.fx.timer(X.extend(Ye,{elem:O,anim:ht,queue:ht.opts.queue})),ht}X.Animation=X.extend(ko,{tweeners:{"*":[function(O,B){var te=this.createTween(O,B);return Jt(te.elem,O,ts.exec(B),te),te}]},tweener:function(O,B){de(O)?(B=O,O=["*"]):O=O.match(gn);for(var te,se=0,ve=O.length;se<ve;se++)(ko.tweeners[te=O[se]]=ko.tweeners[te]||[]).unshift(B)},prefilters:[function _o(O,B,te){var se,ve,ye,we,Je,Ye,ht,jt,nn="width"in B||"height"in B,xt=this,Cn={},Mi=O.style,Ti=O.nodeType&&Gs(O),Gi=Vn.get(O,"fxshow");for(se in te.queue||(null==(we=X._queueHooks(O,"fx")).unqueued&&(we.unqueued=0,Je=we.empty.fire,we.empty.fire=function(){we.unqueued||Je()}),we.unqueued++,xt.always(function(){xt.always(function(){we.unqueued--,X.queue(O,"fx").length||we.empty.fire()})})),B)if(ku.test(ve=B[se])){if(delete B[se],ye=ye||"toggle"===ve,ve===(Ti?"hide":"show")){if("show"!==ve||!Gi||void 0===Gi[se])continue;Ti=!0}Cn[se]=Gi&&Gi[se]||X.style(O,se)}if((Ye=!X.isEmptyObject(B))||!X.isEmptyObject(Cn))for(se in nn&&1===O.nodeType&&(te.overflow=[Mi.overflow,Mi.overflowX,Mi.overflowY],null==(ht=Gi&&Gi.display)&&(ht=Vn.get(O,"display")),"none"===(jt=X.css(O,"display"))&&(ht?jt=ht:(Os([O],!0),ht=O.style.display||ht,jt=X.css(O,"display"),Os([O]))),("inline"===jt||"inline-block"===jt&&null!=ht)&&"none"===X.css(O,"float")&&(Ye||(xt.done(function(){Mi.display=ht}),null==ht&&(ht="none"===(jt=Mi.display)?"":jt)),Mi.display="inline-block")),te.overflow&&(Mi.overflow="hidden",xt.always(function(){Mi.overflow=te.overflow[0],Mi.overflowX=te.overflow[1],Mi.overflowY=te.overflow[2]})),Ye=!1,Cn)Ye||(Gi?"hidden"in Gi&&(Ti=Gi.hidden):Gi=Vn.access(O,"fxshow",{display:ht}),ye&&(Gi.hidden=!Ti),Ti&&Os([O],!0),xt.done(function(){for(se in Ti||Os([O]),Vn.remove(O,"fxshow"),Cn)X.style(O,se,Cn[se])})),Ye=ud(Ti?Gi[se]:0,se,xt),se in Gi||(Gi[se]=Ye.start,Ti&&(Ye.end=Ye.start,Ye.start=0))}],prefilter:function(O,B){B?ko.prefilters.unshift(O):ko.prefilters.push(O)}}),X.speed=function(O,B,te){var se=O&&"object"==typeof O?X.extend({},O):{complete:te||!te&&B||de(O)&&O,duration:O,easing:te&&B||B&&!de(B)&&B};return X.fx.off?se.duration=0:"number"!=typeof se.duration&&(se.duration=se.duration in X.fx.speeds?X.fx.speeds[se.duration]:X.fx.speeds._default),(null==se.queue||!0===se.queue)&&(se.queue="fx"),se.old=se.complete,se.complete=function(){de(se.old)&&se.old.call(this),se.queue&&X.dequeue(this,se.queue)},se},X.fn.extend({fadeTo:function(O,B,te,se){return this.filter(Gs).css("opacity",0).show().end().animate({opacity:B},O,te,se)},animate:function(O,B,te,se){var ve=X.isEmptyObject(O),ye=X.speed(B,te,se),we=function(){var Je=ko(this,X.extend({},O),ye);(ve||Vn.get(this,"finish"))&&Je.stop(!0)};return we.finish=we,ve||!1===ye.queue?this.each(we):this.queue(ye.queue,we)},stop:function(O,B,te){var se=function(ve){var ye=ve.stop;delete ve.stop,ye(te)};return"string"!=typeof O&&(te=B,B=O,O=void 0),B&&this.queue(O||"fx",[]),this.each(function(){var ve=!0,ye=null!=O&&O+"queueHooks",we=X.timers,Je=Vn.get(this);if(ye)Je[ye]&&Je[ye].stop&&se(Je[ye]);else for(ye in Je)Je[ye]&&Je[ye].stop&&nr.test(ye)&&se(Je[ye]);for(ye=we.length;ye--;)we[ye].elem===this&&(null==O||we[ye].queue===O)&&(we[ye].anim.stop(te),ve=!1,we.splice(ye,1));(ve||!te)&&X.dequeue(this,O)})},finish:function(O){return!1!==O&&(O=O||"fx"),this.each(function(){var B,te=Vn.get(this),se=te[O+"queue"],ve=te[O+"queueHooks"],ye=X.timers,we=se?se.length:0;for(te.finish=!0,X.queue(this,O,[]),ve&&ve.stop&&ve.stop.call(this,!0),B=ye.length;B--;)ye[B].elem===this&&ye[B].queue===O&&(ye[B].anim.stop(!0),ye.splice(B,1));for(B=0;B<we;B++)se[B]&&se[B].finish&&se[B].finish.call(this);delete te.finish})}}),X.each(["toggle","show","hide"],function(O,B){var te=X.fn[B];X.fn[B]=function(se,ve,ye){return null==se||"boolean"==typeof se?te.apply(this,arguments):this.animate(Jd(B,!0),se,ve,ye)}}),X.each({slideDown:Jd("show"),slideUp:Jd("hide"),slideToggle:Jd("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(O,B){X.fn[O]=function(te,se,ve){return this.animate(B,te,se,ve)}}),X.timers=[],X.fx.tick=function(){var O,B=0,te=X.timers;for(vs=Date.now();B<te.length;B++)!(O=te[B])()&&te[B]===O&&te.splice(B--,1);te.length||X.fx.stop(),vs=void 0},X.fx.timer=function(O){X.timers.push(O),X.fx.start()},X.fx.interval=13,X.fx.start=function(){hd||(hd=!0,Vh())},X.fx.stop=function(){hd=null},X.fx.speeds={slow:600,fast:200,_default:400},X.fn.delay=function(O,B){return O=X.fx&&X.fx.speeds[O]||O,this.queue(B=B||"fx",function(te,se){var ve=S.setTimeout(te,O);se.stop=function(){S.clearTimeout(ve)}})},function(){var O=Ee.createElement("input"),te=Ee.createElement("select").appendChild(Ee.createElement("option"));O.type="checkbox",ee.checkOn=""!==O.value,ee.optSelected=te.selected,(O=Ee.createElement("input")).value="t",O.type="radio",ee.radioValue="t"===O.value}();var vl,uo=X.expr.attrHandle;X.fn.extend({attr:function(O,B){return En(this,X.attr,O,B,arguments.length>1)},removeAttr:function(O){return this.each(function(){X.removeAttr(this,O)})}}),X.extend({attr:function(O,B,te){var se,ve,ye=O.nodeType;if(3!==ye&&8!==ye&&2!==ye)return typeof O.getAttribute>"u"?X.prop(O,B,te):((1!==ye||!X.isXMLDoc(O))&&(ve=X.attrHooks[B.toLowerCase()]||(X.expr.match.bool.test(B)?vl:void 0)),void 0!==te?null===te?void X.removeAttr(O,B):ve&&"set"in ve&&void 0!==(se=ve.set(O,te,B))?se:(O.setAttribute(B,te+""),te):ve&&"get"in ve&&null!==(se=ve.get(O,B))?se:(se=X.find.attr(O,B))??void 0)},attrHooks:{type:{set:function(O,B){if(!ee.radioValue&&"radio"===B&&Mt(O,"input")){var te=O.value;return O.setAttribute("type",B),te&&(O.value=te),B}}}},removeAttr:function(O,B){var te,se=0,ve=B&&B.match(gn);if(ve&&1===O.nodeType)for(;te=ve[se++];)O.removeAttribute(te)}}),vl={set:function(O,B,te){return!1===B?X.removeAttr(O,te):O.setAttribute(te,te),te}},X.each(X.expr.match.bool.source.match(/\w+/g),function(O,B){var te=uo[B]||X.find.attr;uo[B]=function(se,ve,ye){var we,Je,Ye=ve.toLowerCase();return ye||(Je=uo[Ye],uo[Ye]=we,we=null!=te(se,ve,ye)?Ye:null,uo[Ye]=Je),we}});var ym=/^(?:input|select|textarea|button)$/i,Ps=/^(?:a|area)$/i;function th(O){return(O.match(gn)||[]).join(" ")}function pa(O){return O.getAttribute&&O.getAttribute("class")||""}function Nu(O){return Array.isArray(O)?O:"string"==typeof O&&O.match(gn)||[]}X.fn.extend({prop:function(O,B){return En(this,X.prop,O,B,arguments.length>1)},removeProp:function(O){return this.each(function(){delete this[X.propFix[O]||O]})}}),X.extend({prop:function(O,B,te){var se,ve,ye=O.nodeType;if(3!==ye&&8!==ye&&2!==ye)return(1!==ye||!X.isXMLDoc(O))&&(ve=X.propHooks[B=X.propFix[B]||B]),void 0!==te?ve&&"set"in ve&&void 0!==(se=ve.set(O,te,B))?se:O[B]=te:ve&&"get"in ve&&null!==(se=ve.get(O,B))?se:O[B]},propHooks:{tabIndex:{get:function(O){var B=X.find.attr(O,"tabindex");return B?parseInt(B,10):ym.test(O.nodeName)||Ps.test(O.nodeName)&&O.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ee.optSelected||(X.propHooks.selected={get:function(O){return null},set:function(O){}}),X.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){X.propFix[this.toLowerCase()]=this}),X.fn.extend({addClass:function(O){var B,te,se,ve,ye,we;return de(O)?this.each(function(Je){X(this).addClass(O.call(this,Je,pa(this)))}):(B=Nu(O)).length?this.each(function(){if(se=pa(this),te=1===this.nodeType&&" "+th(se)+" "){for(ye=0;ye<B.length;ye++)te.indexOf(" "+(ve=B[ye])+" ")<0&&(te+=ve+" ");we=th(te),se!==we&&this.setAttribute("class",we)}}):this},removeClass:function(O){var B,te,se,ve,ye,we;return de(O)?this.each(function(Je){X(this).removeClass(O.call(this,Je,pa(this)))}):arguments.length?(B=Nu(O)).length?this.each(function(){if(se=pa(this),te=1===this.nodeType&&" "+th(se)+" "){for(ye=0;ye<B.length;ye++)for(ve=B[ye];te.indexOf(" "+ve+" ")>-1;)te=te.replace(" "+ve+" "," ");we=th(te),se!==we&&this.setAttribute("class",we)}}):this:this.attr("class","")},toggleClass:function(O,B){var te,se,ve,ye,we=typeof O,Je="string"===we||Array.isArray(O);return de(O)?this.each(function(Ye){X(this).toggleClass(O.call(this,Ye,pa(this),B),B)}):"boolean"==typeof B&&Je?B?this.addClass(O):this.removeClass(O):(te=Nu(O),this.each(function(){if(Je)for(ye=X(this),ve=0;ve<te.length;ve++)ye.hasClass(se=te[ve])?ye.removeClass(se):ye.addClass(se);else(void 0===O||"boolean"===we)&&((se=pa(this))&&Vn.set(this,"__className__",se),this.setAttribute&&this.setAttribute("class",se||!1===O?"":Vn.get(this,"__className__")||""))}))},hasClass:function(O){var B,te,se=0;for(B=" "+O+" ";te=this[se++];)if(1===te.nodeType&&(" "+th(pa(te))+" ").indexOf(B)>-1)return!0;return!1}});var nh=/\r/g;X.fn.extend({val:function(O){var B,te,se,ve=this[0];return arguments.length?(se=de(O),this.each(function(ye){var we;1===this.nodeType&&(null==(we=se?O.call(this,ye,X(this).val()):O)?we="":"number"==typeof we?we+="":Array.isArray(we)&&(we=X.map(we,function(Je){return null==Je?"":Je+""})),(!(B=X.valHooks[this.type]||X.valHooks[this.nodeName.toLowerCase()])||!("set"in B)||void 0===B.set(this,we,"value"))&&(this.value=we))})):ve?(B=X.valHooks[ve.type]||X.valHooks[ve.nodeName.toLowerCase()])&&"get"in B&&void 0!==(te=B.get(ve,"value"))?te:"string"==typeof(te=ve.value)?te.replace(nh,""):te??"":void 0}}),X.extend({valHooks:{option:{get:function(O){return X.find.attr(O,"value")??th(X.text(O))}},select:{get:function(O){var B,te,se,ve=O.options,ye=O.selectedIndex,we="select-one"===O.type,Je=we?null:[],Ye=we?ye+1:ve.length;for(se=ye<0?Ye:we?ye:0;se<Ye;se++)if(((te=ve[se]).selected||se===ye)&&!te.disabled&&(!te.parentNode.disabled||!Mt(te.parentNode,"optgroup"))){if(B=X(te).val(),we)return B;Je.push(B)}return Je},set:function(O,B){for(var te,se,ve=O.options,ye=X.makeArray(B),we=ve.length;we--;)((se=ve[we]).selected=X.inArray(X.valHooks.option.get(se),ye)>-1)&&(te=!0);return te||(O.selectedIndex=-1),ye}}}}),X.each(["radio","checkbox"],function(){X.valHooks[this]={set:function(O,B){if(Array.isArray(B))return O.checked=X.inArray(X(O).val(),B)>-1}},ee.checkOn||(X.valHooks[this].get=function(O){return null===O.getAttribute("value")?"on":O.value})});var Jl=S.location,pd={guid:Date.now()},Po=/\?/;X.parseXML=function(O){var B,te;if(!O||"string"!=typeof O)return null;try{B=(new S.DOMParser).parseFromString(O,"text/xml")}catch{}return te=B&&B.getElementsByTagName("parsererror")[0],(!B||te)&&X.error("Invalid XML: "+(te?X.map(te.childNodes,function(se){return se.textContent}).join("\n"):O)),B};var r0=/^(?:focusinfocus|focusoutblur)$/,fa=function(O){O.stopPropagation()};X.extend(X.event,{trigger:function(O,B,te,se){var ve,ye,we,Je,Ye,ht,jt,nn,xt=[te||Ee],Cn=j.call(O,"type")?O.type:O,Mi=j.call(O,"namespace")?O.namespace.split("."):[];if(ye=nn=we=te=te||Ee,3!==te.nodeType&&8!==te.nodeType&&!r0.test(Cn+X.event.triggered)&&(Cn.indexOf(".")>-1&&(Mi=Cn.split("."),Cn=Mi.shift(),Mi.sort()),Ye=Cn.indexOf(":")<0&&"on"+Cn,(O=O[X.expando]?O:new X.Event(Cn,"object"==typeof O&&O)).isTrigger=se?2:3,O.namespace=Mi.join("."),O.rnamespace=O.namespace?new RegExp("(^|\\.)"+Mi.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,O.result=void 0,O.target||(O.target=te),B=null==B?[O]:X.makeArray(B,[O]),jt=X.event.special[Cn]||{},se||!jt.trigger||!1!==jt.trigger.apply(te,B))){if(!se&&!jt.noBubble&&!pe(te)){for(r0.test((Je=jt.delegateType||Cn)+Cn)||(ye=ye.parentNode);ye;ye=ye.parentNode)xt.push(ye),we=ye;we===(te.ownerDocument||Ee)&&xt.push(we.defaultView||we.parentWindow||S)}for(ve=0;(ye=xt[ve++])&&!O.isPropagationStopped();)nn=ye,O.type=ve>1?Je:jt.bindType||Cn,(ht=(Vn.get(ye,"events")||Object.create(null))[O.type]&&Vn.get(ye,"handle"))&&ht.apply(ye,B),(ht=Ye&&ye[Ye])&&ht.apply&&Pr(ye)&&(O.result=ht.apply(ye,B),!1===O.result&&O.preventDefault());return O.type=Cn,!se&&!O.isDefaultPrevented()&&(!jt._default||!1===jt._default.apply(xt.pop(),B))&&Pr(te)&&Ye&&de(te[Cn])&&!pe(te)&&((we=te[Ye])&&(te[Ye]=null),X.event.triggered=Cn,O.isPropagationStopped()&&nn.addEventListener(Cn,fa),te[Cn](),O.isPropagationStopped()&&nn.removeEventListener(Cn,fa),X.event.triggered=void 0,we&&(te[Ye]=we)),O.result}},simulate:function(O,B,te){var se=X.extend(new X.Event,te,{type:O,isSimulated:!0});X.event.trigger(se,null,B)}}),X.fn.extend({trigger:function(O,B){return this.each(function(){X.event.trigger(O,B,this)})},triggerHandler:function(O,B){var te=this[0];if(te)return X.event.trigger(O,B,te,!0)}});var tl=/\[\]$/,Lu=/\r?\n/g,jh=/^(?:submit|button|image|reset|file)$/i,ec=/^(?:input|select|textarea|keygen)/i;function Da(O,B,te,se){var ve;if(Array.isArray(B))X.each(B,function(ye,we){te||tl.test(O)?se(O,we):Da(O+"["+("object"==typeof we&&null!=we?ye:"")+"]",we,te,se)});else if(te||"object"!==Ke(B))se(O,B);else for(ve in B)Da(O+"["+ve+"]",B[ve],te,se)}X.param=function(O,B){var te,se=[],ve=function(ye,we){var Je=de(we)?we():we;se[se.length]=encodeURIComponent(ye)+"="+encodeURIComponent(Je??"")};if(null==O)return"";if(Array.isArray(O)||O.jquery&&!X.isPlainObject(O))X.each(O,function(){ve(this.name,this.value)});else for(te in O)Da(te,O[te],B,ve);return se.join("&")},X.fn.extend({serialize:function(){return X.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var O=X.prop(this,"elements");return O?X.makeArray(O):this}).filter(function(){var O=this.type;return this.name&&!X(this).is(":disabled")&&ec.test(this.nodeName)&&!jh.test(O)&&(this.checked||!Pn.test(O))}).map(function(O,B){var te=X(this).val();return null==te?null:Array.isArray(te)?X.map(te,function(se){return{name:B.name,value:se.replace(Lu,"\r\n")}}):{name:B.name,value:te.replace(Lu,"\r\n")}}).get()}});var s0=/%20/g,o0=/#.*$/,a0=/([?&])_=[^&]*/,kc=/^(.*?):[ \t]*([^\r\n]*)$/gm,l0=/^(?:GET|HEAD)$/,Fu=/^\/\//,c0={},_m={},d0="*/".concat("*"),Wp=Ee.createElement("a");function ih(O){return function(B,te){"string"!=typeof B&&(te=B,B="*");var se,ve=0,ye=B.toLowerCase().match(gn)||[];if(de(te))for(;se=ye[ve++];)"+"===se[0]?(se=se.slice(1)||"*",(O[se]=O[se]||[]).unshift(te)):(O[se]=O[se]||[]).push(te)}}function h0(O,B,te,se){var ve={},ye=O===_m;function we(Je){var Ye;return ve[Je]=!0,X.each(O[Je]||[],function(ht,jt){var nn=jt(B,te,se);return"string"!=typeof nn||ye||ve[nn]?ye?!(Ye=nn):void 0:(B.dataTypes.unshift(nn),we(nn),!1)}),Ye}return we(B.dataTypes[0])||!ve["*"]&&we("*")}function bm(O,B){var te,se,ve=X.ajaxSettings.flatOptions||{};for(te in B)void 0!==B[te]&&((ve[te]?O:se||(se={}))[te]=B[te]);return se&&X.extend(!0,O,se),O}Wp.href=Jl.href,X.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Jl.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Jl.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":d0,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":X.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(O,B){return B?bm(bm(O,X.ajaxSettings),B):bm(X.ajaxSettings,O)},ajaxPrefilter:ih(c0),ajaxTransport:ih(_m),ajax:function(O,B){"object"==typeof O&&(B=O,O=void 0);var te,se,ve,ye,we,Je,Ye,ht,jt,nn,xt=X.ajaxSetup({},B=B||{}),Cn=xt.context||xt,Mi=xt.context&&(Cn.nodeType||Cn.jquery)?X(Cn):X.event,Ti=X.Deferred(),Gi=X.Callbacks("once memory"),po=xt.statusCode||{},Ss={},ys={},yl="canceled",Wi={readyState:0,getResponseHeader:function(lr){var Ns;if(Ye){if(!ye)for(ye={};Ns=kc.exec(ve);)ye[Ns[1].toLowerCase()+" "]=(ye[Ns[1].toLowerCase()+" "]||[]).concat(Ns[2]);Ns=ye[lr.toLowerCase()+" "]}return null==Ns?null:Ns.join(", ")},getAllResponseHeaders:function(){return Ye?ve:null},setRequestHeader:function(lr,Ns){return null==Ye&&(lr=ys[lr.toLowerCase()]=ys[lr.toLowerCase()]||lr,Ss[lr]=Ns),this},overrideMimeType:function(lr){return null==Ye&&(xt.mimeType=lr),this},statusCode:function(lr){var Ns;if(lr)if(Ye)Wi.always(lr[Wi.status]);else for(Ns in lr)po[Ns]=[po[Ns],lr[Ns]];return this},abort:function(lr){var Ns=lr||yl;return te&&te.abort(Ns),md(0,Ns),this}};if(Ti.promise(Wi),xt.url=((O||xt.url||Jl.href)+"").replace(Fu,Jl.protocol+"//"),xt.type=B.method||B.type||xt.method||xt.type,xt.dataTypes=(xt.dataType||"*").toLowerCase().match(gn)||[""],null==xt.crossDomain){Je=Ee.createElement("a");try{Je.href=xt.url,Je.href=Je.href,xt.crossDomain=Wp.protocol+"//"+Wp.host!=Je.protocol+"//"+Je.host}catch{xt.crossDomain=!0}}if(xt.data&&xt.processData&&"string"!=typeof xt.data&&(xt.data=X.param(xt.data,xt.traditional)),h0(c0,xt,B,Wi),Ye)return Wi;for(jt in(ht=X.event&&xt.global)&&0==X.active++&&X.event.trigger("ajaxStart"),xt.type=xt.type.toUpperCase(),xt.hasContent=!l0.test(xt.type),se=xt.url.replace(o0,""),xt.hasContent?xt.data&&xt.processData&&0===(xt.contentType||"").indexOf("application/x-www-form-urlencoded")&&(xt.data=xt.data.replace(s0,"+")):(nn=xt.url.slice(se.length),xt.data&&(xt.processData||"string"==typeof xt.data)&&(se+=(Po.test(se)?"&":"?")+xt.data,delete xt.data),!1===xt.cache&&(se=se.replace(a0,"$1"),nn=(Po.test(se)?"&":"?")+"_="+pd.guid+++nn),xt.url=se+nn),xt.ifModified&&(X.lastModified[se]&&Wi.setRequestHeader("If-Modified-Since",X.lastModified[se]),X.etag[se]&&Wi.setRequestHeader("If-None-Match",X.etag[se])),(xt.data&&xt.hasContent&&!1!==xt.contentType||B.contentType)&&Wi.setRequestHeader("Content-Type",xt.contentType),Wi.setRequestHeader("Accept",xt.dataTypes[0]&&xt.accepts[xt.dataTypes[0]]?xt.accepts[xt.dataTypes[0]]+("*"!==xt.dataTypes[0]?", "+d0+"; q=0.01":""):xt.accepts["*"]),xt.headers)Wi.setRequestHeader(jt,xt.headers[jt]);if(xt.beforeSend&&(!1===xt.beforeSend.call(Cn,Wi,xt)||Ye))return Wi.abort();if(yl="abort",Gi.add(xt.complete),Wi.done(xt.success),Wi.fail(xt.error),te=h0(_m,xt,B,Wi)){if(Wi.readyState=1,ht&&Mi.trigger("ajaxSend",[Wi,xt]),Ye)return Wi;xt.async&&xt.timeout>0&&(we=S.setTimeout(function(){Wi.abort("timeout")},xt.timeout));try{Ye=!1,te.send(Ss,md)}catch(lr){if(Ye)throw lr;md(-1,lr)}}else md(-1,"No Transport");function md(lr,Ns,Nc,Ni){var Ia,zu,Al,Lc,Fc,ma=Ns;Ye||(Ye=!0,we&&S.clearTimeout(we),te=void 0,ve=Ni||"",Wi.readyState=lr>0?4:0,Ia=lr>=200&&lr<300||304===lr,Nc&&(Lc=function u0(O,B,te){for(var se,ve,ye,we,Je=O.contents,Ye=O.dataTypes;"*"===Ye[0];)Ye.shift(),void 0===se&&(se=O.mimeType||B.getResponseHeader("Content-Type"));if(se)for(ve in Je)if(Je[ve]&&Je[ve].test(se)){Ye.unshift(ve);break}if(Ye[0]in te)ye=Ye[0];else{for(ve in te){if(!Ye[0]||O.converters[ve+" "+Ye[0]]){ye=ve;break}we||(we=ve)}ye=ye||we}if(ye)return ye!==Ye[0]&&Ye.unshift(ye),te[ye]}(xt,Wi,Nc)),!Ia&&X.inArray("script",xt.dataTypes)>-1&&X.inArray("json",xt.dataTypes)<0&&(xt.converters["text script"]=function(){}),Lc=function w1(O,B,te,se){var ve,ye,we,Je,Ye,ht={},jt=O.dataTypes.slice();if(jt[1])for(we in O.converters)ht[we.toLowerCase()]=O.converters[we];for(ye=jt.shift();ye;)if(O.responseFields[ye]&&(te[O.responseFields[ye]]=B),!Ye&&se&&O.dataFilter&&(B=O.dataFilter(B,O.dataType)),Ye=ye,ye=jt.shift())if("*"===ye)ye=Ye;else if("*"!==Ye&&Ye!==ye){if(!(we=ht[Ye+" "+ye]||ht["* "+ye]))for(ve in ht)if((Je=ve.split(" "))[1]===ye&&(we=ht[Ye+" "+Je[0]]||ht["* "+Je[0]])){!0===we?we=ht[ve]:!0!==ht[ve]&&(ye=Je[0],jt.unshift(Je[1]));break}if(!0!==we)if(we&&O.throws)B=we(B);else try{B=we(B)}catch(nn){return{state:"parsererror",error:we?nn:"No conversion from "+Ye+" to "+ye}}}return{state:"success",data:B}}(xt,Lc,Wi,Ia),Ia?(xt.ifModified&&((Fc=Wi.getResponseHeader("Last-Modified"))&&(X.lastModified[se]=Fc),(Fc=Wi.getResponseHeader("etag"))&&(X.etag[se]=Fc)),204===lr||"HEAD"===xt.type?ma="nocontent":304===lr?ma="notmodified":(ma=Lc.state,zu=Lc.data,Ia=!(Al=Lc.error))):(Al=ma,(lr||!ma)&&(ma="error",lr<0&&(lr=0))),Wi.status=lr,Wi.statusText=(Ns||ma)+"",Ia?Ti.resolveWith(Cn,[zu,ma,Wi]):Ti.rejectWith(Cn,[Wi,ma,Al]),Wi.statusCode(po),po=void 0,ht&&Mi.trigger(Ia?"ajaxSuccess":"ajaxError",[Wi,xt,Ia?zu:Al]),Gi.fireWith(Cn,[Wi,ma]),ht&&(Mi.trigger("ajaxComplete",[Wi,xt]),--X.active||X.event.trigger("ajaxStop")))}return Wi},getJSON:function(O,B,te){return X.get(O,B,te,"json")},getScript:function(O,B){return X.get(O,void 0,B,"script")}}),X.each(["get","post"],function(O,B){X[B]=function(te,se,ve,ye){return de(se)&&(ye=ye||ve,ve=se,se=void 0),X.ajax(X.extend({url:te,type:B,dataType:ye,data:se,success:ve},X.isPlainObject(te)&&te))}}),X.ajaxPrefilter(function(O){var B;for(B in O.headers)"content-type"===B.toLowerCase()&&(O.contentType=O.headers[B]||"")}),X._evalUrl=function(O,B,te){return X.ajax({url:O,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(se){X.globalEval(se,B,te)}})},X.fn.extend({wrapAll:function(O){var B;return this[0]&&(de(O)&&(O=O.call(this[0])),B=X(O,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&B.insertBefore(this[0]),B.map(function(){for(var te=this;te.firstElementChild;)te=te.firstElementChild;return te}).append(this)),this},wrapInner:function(O){return de(O)?this.each(function(B){X(this).wrapInner(O.call(this,B))}):this.each(function(){var B=X(this),te=B.contents();te.length?te.wrapAll(O):B.append(O)})},wrap:function(O){var B=de(O);return this.each(function(te){X(this).wrapAll(B?O.call(this,te):O)})},unwrap:function(O){return this.parent(O).not("body").each(function(){X(this).replaceWith(this.childNodes)}),this}}),X.expr.pseudos.hidden=function(O){return!X.expr.pseudos.visible(O)},X.expr.pseudos.visible=function(O){return!!(O.offsetWidth||O.offsetHeight||O.getClientRects().length)},X.ajaxSettings.xhr=function(){try{return new S.XMLHttpRequest}catch{}};var xm={0:200,1223:204},rh=X.ajaxSettings.xhr();ee.cors=!!rh&&"withCredentials"in rh,ee.ajax=rh=!!rh,X.ajaxTransport(function(O){var B,te;if(ee.cors||rh&&!O.crossDomain)return{send:function(se,ve){var ye,we=O.xhr();if(we.open(O.type,O.url,O.async,O.username,O.password),O.xhrFields)for(ye in O.xhrFields)we[ye]=O.xhrFields[ye];for(ye in O.mimeType&&we.overrideMimeType&&we.overrideMimeType(O.mimeType),!O.crossDomain&&!se["X-Requested-With"]&&(se["X-Requested-With"]="XMLHttpRequest"),se)we.setRequestHeader(ye,se[ye]);B=function(Je){return function(){B&&(B=te=we.onload=we.onerror=we.onabort=we.ontimeout=we.onreadystatechange=null,"abort"===Je?we.abort():"error"===Je?"number"!=typeof we.status?ve(0,"error"):ve(we.status,we.statusText):ve(xm[we.status]||we.status,we.statusText,"text"!==(we.responseType||"text")||"string"!=typeof we.responseText?{binary:we.response}:{text:we.responseText},we.getAllResponseHeaders()))}},we.onload=B(),te=we.onerror=we.ontimeout=B("error"),void 0!==we.onabort?we.onabort=te:we.onreadystatechange=function(){4===we.readyState&&S.setTimeout(function(){B&&te()})},B=B("abort");try{we.send(O.hasContent&&O.data||null)}catch(Je){if(B)throw Je}},abort:function(){B&&B()}}}),X.ajaxPrefilter(function(O){O.crossDomain&&(O.contents.script=!1)}),X.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(O){return X.globalEval(O),O}}}),X.ajaxPrefilter("script",function(O){void 0===O.cache&&(O.cache=!1),O.crossDomain&&(O.type="GET")}),X.ajaxTransport("script",function(O){var B,te;if(O.crossDomain||O.scriptAttrs)return{send:function(se,ve){B=X("<script>").attr(O.scriptAttrs||{}).prop({charset:O.scriptCharset,src:O.url}).on("load error",te=function(ye){B.remove(),te=null,ye&&ve("error"===ye.type?404:200,ye.type)}),Ee.head.appendChild(B[0])},abort:function(){te&&te()}}});var O,p0=[],wm=/(=)\?(?=&|$)|\?\?/;X.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var O=p0.pop()||X.expando+"_"+pd.guid++;return this[O]=!0,O}}),X.ajaxPrefilter("json jsonp",function(O,B,te){var se,ve,ye,we=!1!==O.jsonp&&(wm.test(O.url)?"url":"string"==typeof O.data&&0===(O.contentType||"").indexOf("application/x-www-form-urlencoded")&&wm.test(O.data)&&"data");if(we||"jsonp"===O.dataTypes[0])return se=O.jsonpCallback=de(O.jsonpCallback)?O.jsonpCallback():O.jsonpCallback,we?O[we]=O[we].replace(wm,"$1"+se):!1!==O.jsonp&&(O.url+=(Po.test(O.url)?"&":"?")+O.jsonp+"="+se),O.converters["script json"]=function(){return ye||X.error(se+" was not called"),ye[0]},O.dataTypes[0]="json",ve=S[se],S[se]=function(){ye=arguments},te.always(function(){void 0===ve?X(S).removeProp(se):S[se]=ve,O[se]&&(O.jsonpCallback=B.jsonpCallback,p0.push(se)),ye&&de(ve)&&ve(ye[0]),ye=ve=void 0}),"script"}),ee.createHTMLDocument=((O=Ee.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===O.childNodes.length),X.parseHTML=function(O,B,te){return"string"!=typeof O?[]:("boolean"==typeof B&&(te=B,B=!1),B||(ee.createHTMLDocument?((se=(B=Ee.implementation.createHTMLDocument("")).createElement("base")).href=Ee.location.href,B.head.appendChild(se)):B=Ee),ye=!te&&[],(ve=cn.exec(O))?[B.createElement(ve[1])]:(ve=xi([O],B,ye),ye&&ye.length&&X(ye).remove(),X.merge([],ve.childNodes)));var se,ve,ye},X.fn.load=function(O,B,te){var se,ve,ye,we=this,Je=O.indexOf(" ");return Je>-1&&(se=th(O.slice(Je)),O=O.slice(0,Je)),de(B)?(te=B,B=void 0):B&&"object"==typeof B&&(ve="POST"),we.length>0&&X.ajax({url:O,type:ve||"GET",dataType:"html",data:B}).done(function(Ye){ye=arguments,we.html(se?X("<div>").append(X.parseHTML(Ye)).find(se):Ye)}).always(te&&function(Ye,ht){we.each(function(){te.apply(this,ye||[Ye.responseText,ht,Ye])})}),this},X.expr.pseudos.animated=function(O){return X.grep(X.timers,function(B){return O===B.elem}).length},X.offset={setOffset:function(O,B,te){var se,ve,ye,we,Je,Ye,jt=X.css(O,"position"),nn=X(O),xt={};"static"===jt&&(O.style.position="relative"),Je=nn.offset(),ye=X.css(O,"top"),Ye=X.css(O,"left"),("absolute"===jt||"fixed"===jt)&&(ye+Ye).indexOf("auto")>-1?(we=(se=nn.position()).top,ve=se.left):(we=parseFloat(ye)||0,ve=parseFloat(Ye)||0),de(B)&&(B=B.call(O,te,X.extend({},Je))),null!=B.top&&(xt.top=B.top-Je.top+we),null!=B.left&&(xt.left=B.left-Je.left+ve),"using"in B?B.using.call(O,xt):nn.css(xt)}},X.fn.extend({offset:function(O){if(arguments.length)return void 0===O?this:this.each(function(ve){X.offset.setOffset(this,O,ve)});var B,te,se=this[0];return se?se.getClientRects().length?{top:(B=se.getBoundingClientRect()).top+(te=se.ownerDocument.defaultView).pageYOffset,left:B.left+te.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var O,B,te,se=this[0],ve={top:0,left:0};if("fixed"===X.css(se,"position"))B=se.getBoundingClientRect();else{for(B=this.offset(),te=se.ownerDocument,O=se.offsetParent||te.documentElement;O&&(O===te.body||O===te.documentElement)&&"static"===X.css(O,"position");)O=O.parentNode;O&&O!==se&&1===O.nodeType&&((ve=X(O).offset()).top+=X.css(O,"borderTopWidth",!0),ve.left+=X.css(O,"borderLeftWidth",!0))}return{top:B.top-ve.top-X.css(se,"marginTop",!0),left:B.left-ve.left-X.css(se,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var O=this.offsetParent;O&&"static"===X.css(O,"position");)O=O.offsetParent;return O||ls})}}),X.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(O,B){var te="pageYOffset"===B;X.fn[O]=function(se){return En(this,function(ve,ye,we){var Je;if(pe(ve)?Je=ve:9===ve.nodeType&&(Je=ve.defaultView),void 0===we)return Je?Je[B]:ve[ye];Je?Je.scrollTo(te?Je.pageXOffset:we,te?we:Je.pageYOffset):ve[ye]=we},O,se,arguments.length)}}),X.each(["top","left"],function(O,B){X.cssHooks[B]=dd(ee.pixelPosition,function(te,se){if(se)return se=ho(te,B),cd.test(se)?X(te).position()[B]+"px":se})}),X.each({Height:"height",Width:"width"},function(O,B){X.each({padding:"inner"+O,content:B,"":"outer"+O},function(te,se){X.fn[se]=function(ve,ye){var we=arguments.length&&(te||"boolean"!=typeof ve),Je=te||(!0===ve||!0===ye?"margin":"border");return En(this,function(Ye,ht,jt){var nn;return pe(Ye)?0===se.indexOf("outer")?Ye["inner"+O]:Ye.document.documentElement["client"+O]:9===Ye.nodeType?(nn=Ye.documentElement,Math.max(Ye.body["scroll"+O],nn["scroll"+O],Ye.body["offset"+O],nn["offset"+O],nn["client"+O])):void 0===jt?X.css(Ye,ht,Je):X.style(Ye,ht,jt,Je)},B,we?ve:void 0,we)}})}),X.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(O,B){X.fn[B]=function(te){return this.on(B,te)}}),X.fn.extend({bind:function(O,B,te){return this.on(O,null,B,te)},unbind:function(O,B){return this.off(O,null,B)},delegate:function(O,B,te,se){return this.on(B,O,te,se)},undelegate:function(O,B,te){return 1===arguments.length?this.off(O,"**"):this.off(B,O||"**",te)},hover:function(O,B){return this.on("mouseenter",O).on("mouseleave",B||O)}}),X.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(O,B){X.fn[B]=function(te,se){return arguments.length>0?this.on(B,null,te,se):this.trigger(B)}});var M1=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;X.proxy=function(O,B){var te,se,ve;if("string"==typeof B&&(te=O[B],B=O,O=te),de(O))return se=q.call(arguments,2),ve=function(){return O.apply(B||this,se.concat(q.call(arguments)))},ve.guid=O.guid=O.guid||X.guid++,ve},X.holdReady=function(O){O?X.readyWait++:X.ready(!0)},X.isArray=Array.isArray,X.parseJSON=JSON.parse,X.nodeName=Mt,X.isFunction=de,X.isWindow=pe,X.camelCase=ar,X.type=Ke,X.now=Date.now,X.isNumeric=function(O){var B=X.type(O);return("number"===B||"string"===B)&&!isNaN(O-parseFloat(O))},X.trim=function(O){return null==O?"":(O+"").replace(M1,"$1")},void 0!==(M=function(){return X}.apply(y,[]))&&(f.exports=M);var fd=S.jQuery,Bu=S.$;return X.noConflict=function(O){return S.$===X&&(S.$=Bu),O&&S.jQuery===X&&(S.jQuery=fd),X},typeof T>"u"&&(S.jQuery=S.$=X),X})},8548:f=>{var y,M;M=function(_,M,S){"use strict";var T,Y;if(function(){var Xe,St={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(Xe in Y=_.lazySizesConfig||_.lazysizesConfig||{},St)Xe in Y||(Y[Xe]=St[Xe])}(),!M||!M.getElementsByClassName)return{init:function(){},cfg:Y,noSupport:!0};var Xe,St,_n,jn,zn,Rn,Nn,H=M.documentElement,q=_.HTMLPictureElement,J="addEventListener",F="getAttribute",G=_[J].bind(_),U=_.setTimeout,V=_.requestAnimationFrame||U,j=_.requestIdleCallback,K=/^picture$/i,z=["load","error","lazyincluded","_lazyloaded"],ee={},de=Array.prototype.forEach,pe=function(Xe,St){return ee[St]||(ee[St]=new RegExp("(\\s|^)"+St+"(\\s|$)")),ee[St].test(Xe[F]("class")||"")&&ee[St]},Ee=function(Xe,St){pe(Xe,St)||Xe.setAttribute("class",(Xe[F]("class")||"").trim()+" "+St)},je=function(Xe,St){var _n;(_n=pe(Xe,St))&&Xe.setAttribute("class",(Xe[F]("class")||"").replace(_n," "))},ct=function(Xe,St,_n){var jn=_n?J:"removeEventListener";_n&&ct(Xe,St),z.forEach(function(zn){Xe[jn](zn,St)})},Ke=function(Xe,St,_n,jn,zn){var Rn=M.createEvent("Event");return _n||(_n={}),_n.instance=T,Rn.initEvent(St,!jn,!zn),Rn.detail=_n,Xe.dispatchEvent(Rn),Rn},lt=function(Xe,St){var _n;!q&&(_n=_.picturefill||Y.pf)?(St&&St.src&&!Xe[F]("srcset")&&Xe.setAttribute("srcset",St.src),_n({reevaluate:!0,elements:[Xe]})):St&&St.src&&(Xe.src=St.src)},At=function(Xe,St){return(getComputedStyle(Xe,null)||{})[St]},X=function(Xe,St,_n){for(_n=_n||Xe.offsetWidth;_n<Y.minSize&&St&&!Xe._lazysizesWidth;)_n=St.offsetWidth,St=St.parentNode;return _n},ze=(jn=[],zn=_n=[],Nn=function(cn,Xn){Xe&&!Xn?cn.apply(this,arguments):(zn.push(cn),St||(St=!0,(M.hidden?U:V)(Rn)))},Nn._lsFlush=Rn=function(){var cn=zn;for(zn=_n.length?jn:_n,Xe=!0,St=!1;cn.length;)cn.shift()();Xe=!1},Nn),Mt=function(Xe,St){return St?function(){ze(Xe)}:function(){var _n=this,jn=arguments;ze(function(){Xe.apply(_n,jn)})}},Ft=function(Xe){var St,_n,zn=function(){St=null,Xe()},Rn=function(){var Nn=S.now()-_n;Nn<99?U(Rn,99-Nn):(j||zn)(zn)};return function(){_n=S.now(),St||(St=U(Rn,99))}},dn=function(){var Xe,St,_n,jn,zn,Rn,Nn,cn,Xn,Yn,li,Gt,qr=/^img$/i,Kn=/^iframe$/i,bi="onscroll"in _&&!/(gle|ing)bot/.test(navigator.userAgent),er=0,Si=0,Mr=-1,Rs=function(Ln){Si--,(!Ln||Si<0||!Ln.target)&&(Si=0)},Cr=function(Ln){return null==Gt&&(Gt="hidden"==At(M.body,"visibility")),Gt||!("hidden"==At(Ln.parentNode,"visibility")&&"hidden"==At(Ln,"visibility"))},gs=function(Ln,mi){var zr,ts=Ln,as=Cr(Ln);for(cn-=mi,li+=mi,Xn-=mi,Yn+=mi;as&&(ts=ts.offsetParent)&&ts!=M.body&&ts!=H;)(as=(At(ts,"opacity")||1)>0)&&"visible"!=At(ts,"overflow")&&(zr=ts.getBoundingClientRect(),as=Yn>zr.left&&Xn<zr.right&&li>zr.top-1&&cn<zr.bottom+1);return as},Zr=function(){var Ln,mi,zr,ts,as,ls,Cs,co,Gs,Jt,Ta,Ai,Os=T.elements;if((jn=Y.loadMode)&&Si<8&&(Ln=Os.length)){for(mi=0,Mr++;mi<Ln;mi++)if(Os[mi]&&!Os[mi]._lazyRace){if(!bi||T.prematureUnveil&&T.prematureUnveil(Os[mi])){Vn(Os[mi]);continue}if((!(co=Os[mi][F]("data-expand"))||!(ls=1*co))&&(ls=er),Jt||(T._defEx=Jt=!Y.expand||Y.expand<1?H.clientHeight>500&&H.clientWidth>500?500:370:Y.expand,Ai=Y.hFac,Gt=null,er<(Ta=Jt*Y.expFactor)&&Si<1&&Mr>2&&jn>2&&!M.hidden?(er=Ta,Mr=0):er=jn>1&&Mr>1&&Si<6?Jt:0),Gs!==ls&&(Rn=innerWidth+ls*Ai,Nn=innerHeight+ls,Cs=-1*ls,Gs=ls),zr=Os[mi].getBoundingClientRect(),(li=zr.bottom)>=Cs&&(cn=zr.top)<=Nn&&(Yn=zr.right)>=Cs*Ai&&(Xn=zr.left)<=Rn&&(li||Yn||Xn||cn)&&(Y.loadHidden||Cr(Os[mi]))&&(St&&Si<3&&!co&&(jn<3||Mr<4)||gs(Os[mi],ls))){if(Vn(Os[mi]),as=!0,Si>9)break}else!as&&St&&!ts&&Si<4&&Mr<4&&jn>2&&(Xe[0]||Y.preloadAfterLoad)&&(Xe[0]||!co&&(li||Yn||Xn||cn||"auto"!=Os[mi][F](Y.sizesAttr)))&&(ts=Xe[0]||Os[mi])}ts&&!as&&Vn(ts)}},En=function(Xe){var St,_n=0,jn=Y.throttleDelay,zn=Y.ricTimeout,Rn=function(){St=!1,_n=S.now(),Xe()},Nn=j&&zn>49?function(){j(Rn,{timeout:zn}),zn!==Y.ricTimeout&&(zn=Y.ricTimeout)}:Mt(function(){U(Rn)},!0);return function(cn){var Xn;(cn=!0===cn)&&(zn=33),!St&&(St=!0,(Xn=jn-(S.now()-_n))<0&&(Xn=0),cn||Xn<9?Nn():U(Nn,Xn))}}(Zr),wi=function(Ln){var mi=Ln.target;mi._lazyCache?delete mi._lazyCache:(Rs(Ln),Ee(mi,Y.loadedClass),je(mi,Y.loadingClass),ct(mi,or),Ke(mi,"lazyloaded"))},Rr=Mt(wi),or=function(Ln){Rr({target:Ln.target})},Pr=function(Ln){var mi,zr=Ln[F](Y.srcsetAttr);(mi=Y.customMedia[Ln[F]("data-media")||Ln[F]("media")])&&Ln.setAttribute("media",mi),zr&&Ln.setAttribute("srcset",zr)},fi=Mt(function(Ln,mi,zr,ts,as){var ls,Cs,co,Gs,Jt,Ta;(Jt=Ke(Ln,"lazybeforeunveil",mi)).defaultPrevented||(ts&&(zr?Ee(Ln,Y.autosizesClass):Ln.setAttribute("sizes",ts)),Cs=Ln[F](Y.srcsetAttr),ls=Ln[F](Y.srcAttr),as&&(Gs=(co=Ln.parentNode)&&K.test(co.nodeName||"")),Ta=mi.firesLoad||"src"in Ln&&(Cs||ls||Gs),Jt={target:Ln},Ee(Ln,Y.loadingClass),Ta&&(clearTimeout(_n),_n=U(Rs,2500),ct(Ln,or,!0)),Gs&&de.call(co.getElementsByTagName("source"),Pr),Cs?Ln.setAttribute("srcset",Cs):ls&&!Gs&&(Kn.test(Ln.nodeName)?function(Ln,mi){var zr=Ln.getAttribute("data-load-mode")||Y.iframeLoadMode;0==zr?Ln.contentWindow.location.replace(mi):1==zr&&(Ln.src=mi)}(Ln,ls):Ln.src=ls),as&&(Cs||Gs)&&lt(Ln,{src:ls})),Ln._lazyRace&&delete Ln._lazyRace,je(Ln,Y.lazyClass),ze(function(){var Ai=Ln.complete&&Ln.naturalWidth>1;(!Ta||Ai)&&(Ai&&Ee(Ln,Y.fastLoadedClass),wi(Jt),Ln._lazyCache=!0,U(function(){"_lazyCache"in Ln&&delete Ln._lazyCache},9)),"lazy"==Ln.loading&&Si--},!0)}),Vn=function(Ln){if(!Ln._lazyRace){var mi,zr=qr.test(Ln.nodeName),ts=zr&&(Ln[F](Y.sizesAttr)||Ln[F]("sizes")),as="auto"==ts;(as||!St)&&zr&&(Ln[F]("src")||Ln.srcset)&&!Ln.complete&&!pe(Ln,Y.errorClass)&&pe(Ln,Y.lazyClass)||(mi=Ke(Ln,"lazyunveilread").detail,as&&Sn.updateElem(Ln,!0,Ln.offsetWidth),Ln._lazyRace=!0,Si++,fi(Ln,mi,as,ts,zr))}},os=Ft(function(){Y.loadMode=3,En()}),ua=function(){3==Y.loadMode&&(Y.loadMode=2),os()},Br=function(){if(!St){if(S.now()-zn<999)return void U(Br,999);St=!0,Y.loadMode=3,En(),G("scroll",ua,!0)}};return{_:function(){zn=S.now(),T.elements=M.getElementsByClassName(Y.lazyClass),Xe=M.getElementsByClassName(Y.lazyClass+" "+Y.preloadClass),G("scroll",En,!0),G("resize",En,!0),G("pageshow",function(Ln){if(Ln.persisted){var mi=M.querySelectorAll("."+Y.loadingClass);mi.length&&mi.forEach&&V(function(){mi.forEach(function(zr){zr.complete&&Vn(zr)})})}}),_.MutationObserver?new MutationObserver(En).observe(H,{childList:!0,subtree:!0,attributes:!0}):(H[J]("DOMNodeInserted",En,!0),H[J]("DOMAttrModified",En,!0),setInterval(En,999)),G("hashchange",En,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(Ln){M[J](Ln,En,!0)}),/d$|^c/.test(M.readyState)?Br():(G("load",Br),M[J]("DOMContentLoaded",En),U(Br,2e4)),T.elements.length?(Zr(),ze._lsFlush()):En()},checkElems:En,unveil:Vn,_aLSL:ua}}(),Sn=function(){var Xe,St=Mt(function(Rn,Nn,cn,Xn){var Yn,li,Gt;if(Rn._lazysizesWidth=Xn,Rn.setAttribute("sizes",Xn+="px"),K.test(Nn.nodeName||""))for(li=0,Gt=(Yn=Nn.getElementsByTagName("source")).length;li<Gt;li++)Yn[li].setAttribute("sizes",Xn);cn.detail.dataAttr||lt(Rn,cn.detail)}),_n=function(Rn,Nn,cn){var Xn,Yn=Rn.parentNode;Yn&&(cn=X(Rn,Yn,cn),(Xn=Ke(Rn,"lazybeforesizes",{width:cn,dataAttr:!!Nn})).defaultPrevented||(cn=Xn.detail.width)&&cn!==Rn._lazysizesWidth&&St(Rn,Yn,Xn,cn))},zn=Ft(function(){var Rn,Nn=Xe.length;if(Nn)for(Rn=0;Rn<Nn;Rn++)_n(Xe[Rn])});return{_:function(){Xe=M.getElementsByClassName(Y.autosizesClass),G("resize",zn)},checkElems:zn,updateElem:_n}}(),Ot=function(){!Ot.i&&M.getElementsByClassName&&(Ot.i=!0,Sn._(),dn._())};return U(function(){Y.init&&Ot()}),T={cfg:Y,autoSizer:Sn,loader:dn,init:Ot,uP:lt,aC:Ee,rC:je,hC:pe,fire:Ke,gW:X,rAF:ze}}(y=typeof window<"u"?window:{},y.document,Date),y.lazySizes=M,f.exports&&(f.exports=M)},2181:(f,y,_)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var M=_(5186),S=_(1973);M.Observable.prototype.filter=S.filter},1973:(f,y,_)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var M=_(8732);y.filter=function S(T,Y){return M.filter(T,Y)(this)}},5186:(f,y,_)=>{"use strict";_.r(y),_.d(y,{ArgumentOutOfRangeError:()=>Ft.W,AsyncSubject:()=>F.c,BehaviorSubject:()=>q.X,ConnectableObservable:()=>S.c,EMPTY:()=>er.E,EmptyError:()=>dn.K,GroupedObservable:()=>T.T,NEVER:()=>fi.C,Notification:()=>At.P,NotificationKind:()=>At.W,ObjectUnsubscribedError:()=>Sn.N,Observable:()=>M.y,ReplaySubject:()=>J.t,Scheduler:()=>ct.b,Subject:()=>H.xQ,Subscriber:()=>lt.L,Subscription:()=>Ke.w,TimeoutError:()=>Xe.W,UnsubscriptionError:()=>Ot.B,VirtualAction:()=>je,VirtualTimeScheduler:()=>Ee,animationFrame:()=>pe,animationFrameScheduler:()=>de,asap:()=>G.e,asapScheduler:()=>G.E,async:()=>U.P,asyncScheduler:()=>U.z,bindCallback:()=>Rn,bindNodeCallback:()=>Yn,combineLatest:()=>Kn.aj,concat:()=>bi.z,config:()=>Os.v,defer:()=>gn.P,empty:()=>er.c,forkJoin:()=>Si.D,from:()=>Mr.D,fromEvent:()=>Rs.R,fromEventPattern:()=>gs,generate:()=>Zr,identity:()=>Mt.y,iif:()=>wi,interval:()=>or,isObservable:()=>bt,merge:()=>Pr.T,never:()=>fi.F,noop:()=>ze.Z,observable:()=>Y.L,of:()=>Vn.of,onErrorResumeNext:()=>os,pairs:()=>ua,partition:()=>ts,pipe:()=>X.z,queue:()=>V.c,queueScheduler:()=>V.N,race:()=>as.S3,range:()=>ls,scheduled:()=>Ai.x,throwError:()=>co._,timer:()=>Gs.H,using:()=>Jt,zip:()=>Ta.$R});var M=_(4202),S=_(1762),T=_(4002),Y=_(3821),H=_(8929),q=_(591),J=_(839),F=_(2185),G=_(8139),U=_(353),V=_(341),j=_(6686),z=_(198);const de=new class ee extends z.v{flush(Kt){this.active=!0,this.scheduled=void 0;const{actions:mn}=this;let Mn,An=-1,ri=mn.length;Kt=Kt||mn.shift();do{if(Mn=Kt.execute(Kt.state,Kt.delay))break}while(++An<ri&&(Kt=mn.shift()));if(this.active=!1,Mn){for(;++An<ri&&(Kt=mn.shift());)Kt.unsubscribe();throw Mn}}}(class K extends j.o{constructor(Kt,mn){super(Kt,mn),this.scheduler=Kt,this.work=mn}requestAsyncId(Kt,mn,Mn=0){return null!==Mn&&Mn>0?super.requestAsyncId(Kt,mn,Mn):(Kt.actions.push(this),Kt.scheduled||(Kt.scheduled=requestAnimationFrame(()=>Kt.flush(null))))}recycleAsyncId(Kt,mn,Mn=0){if(null!==Mn&&Mn>0||null===Mn&&this.delay>0)return super.recycleAsyncId(Kt,mn,Mn);0===Kt.actions.length&&(cancelAnimationFrame(mn),Kt.scheduled=void 0)}}),pe=de;let Ee=(()=>{class Pn extends z.v{constructor(mn=je,Mn=Number.POSITIVE_INFINITY){super(mn,()=>this.frame),this.maxFrames=Mn,this.frame=0,this.index=-1}flush(){const{actions:mn,maxFrames:Mn}=this;let An,ri;for(;(ri=mn[0])&&ri.delay<=Mn&&(mn.shift(),this.frame=ri.delay,!(An=ri.execute(ri.state,ri.delay))););if(An){for(;ri=mn.shift();)ri.unsubscribe();throw An}}}return Pn.frameTimeFactor=10,Pn})();class je extends j.o{constructor(Kt,mn,Mn=(Kt.index+=1)){super(Kt,mn),this.scheduler=Kt,this.work=mn,this.index=Mn,this.active=!0,this.index=Kt.index=Mn}schedule(Kt,mn=0){if(!this.id)return super.schedule(Kt,mn);this.active=!1;const Mn=new je(this.scheduler,this.work);return this.add(Mn),Mn.schedule(Kt,mn)}requestAsyncId(Kt,mn,Mn=0){this.delay=Kt.frame+Mn;const{actions:An}=Kt;return An.push(this),An.sort(je.sortActions),!0}recycleAsyncId(Kt,mn,Mn=0){}_execute(Kt,mn){if(!0===this.active)return super._execute(Kt,mn)}static sortActions(Kt,mn){return Kt.delay===mn.delay?Kt.index===mn.index?0:Kt.index>mn.index?1:-1:Kt.delay>mn.delay?1:-1}}var ct=_(2221),Ke=_(4096),lt=_(3489),At=_(9312),X=_(4843),ze=_(7876),Mt=_(5379);function bt(Pn){return!!Pn&&(Pn instanceof M.y||"function"==typeof Pn.lift&&"function"==typeof Pn.subscribe)}var Ft=_(4231),dn=_(4450),Sn=_(5279),Ot=_(7964),Xe=_(854),St=_(4850),_n=_(9476),jn=_(6688),zn=_(2866);function Rn(Pn,Kt,mn){if(Kt){if(!(0,zn.K)(Kt))return(...Mn)=>Rn(Pn,mn)(...Mn).pipe((0,St.U)(An=>(0,jn.k)(An)?Kt(...An):Kt(An)));mn=Kt}return function(...Mn){const An=this;let ri;const _r={context:An,subject:ri,callbackFunc:Pn,scheduler:mn};return new M.y(xi=>{if(mn)return mn.schedule(Nn,0,{args:Mn,subscriber:xi,params:_r});if(!ri){ri=new F.c;const Qr=(...si)=>{ri.next(si.length<=1?si[0]:si),ri.complete()};try{Pn.apply(An,[...Mn,Qr])}catch(si){(0,_n._)(ri)?ri.error(si):console.warn(si)}}return ri.subscribe(xi)})}}function Nn(Pn){const{args:mn,subscriber:Mn,params:An}=Pn,{callbackFunc:ri,context:_r,scheduler:xi}=An;let{subject:Qr}=An;if(!Qr){Qr=An.subject=new F.c;const si=(...Jr)=>{this.add(xi.schedule(cn,0,{value:Jr.length<=1?Jr[0]:Jr,subject:Qr}))};try{ri.apply(_r,[...mn,si])}catch(Jr){Qr.error(Jr)}}this.add(Qr.subscribe(Mn))}function cn(Pn){const{value:Kt,subject:mn}=Pn;mn.next(Kt),mn.complete()}function Yn(Pn,Kt,mn){if(Kt){if(!(0,zn.K)(Kt))return(...Mn)=>Yn(Pn,mn)(...Mn).pipe((0,St.U)(An=>(0,jn.k)(An)?Kt(...An):Kt(An)));mn=Kt}return function(...Mn){const An={subject:void 0,args:Mn,callbackFunc:Pn,scheduler:mn,context:this};return new M.y(ri=>{const{context:_r}=An;let{subject:xi}=An;if(mn)return mn.schedule(li,0,{params:An,subscriber:ri,context:_r});if(!xi){xi=An.subject=new F.c;const Qr=(...si)=>{const Jr=si.shift();Jr?xi.error(Jr):(xi.next(si.length<=1?si[0]:si),xi.complete())};try{Pn.apply(_r,[...Mn,Qr])}catch(si){(0,_n._)(xi)?xi.error(si):console.warn(si)}}return xi.subscribe(ri)})}}function li(Pn){const{params:Kt,subscriber:mn,context:Mn}=Pn,{callbackFunc:An,args:ri,scheduler:_r}=Kt;let xi=Kt.subject;if(!xi){xi=Kt.subject=new F.c;const Qr=(...si)=>{const Jr=si.shift();this.add(Jr?_r.schedule(qr,0,{err:Jr,subject:xi}):_r.schedule(Gt,0,{value:si.length<=1?si[0]:si,subject:xi}))};try{An.apply(Mn,[...ri,Qr])}catch(si){this.add(_r.schedule(qr,0,{err:si,subject:xi}))}}this.add(xi.subscribe(mn))}function Gt(Pn){const{value:Kt,subject:mn}=Pn;mn.next(Kt),mn.complete()}function qr(Pn){const{err:Kt,subject:mn}=Pn;mn.error(Kt)}var Kn=_(6053),bi=_(1961),gn=_(8514),er=_(8896),Si=_(567),Mr=_(3527),Rs=_(3753),Cr=_(7043);function gs(Pn,Kt,mn){return mn?gs(Pn,Kt).pipe((0,St.U)(Mn=>(0,jn.k)(Mn)?mn(...Mn):mn(Mn))):new M.y(Mn=>{const An=(..._r)=>Mn.next(1===_r.length?_r[0]:_r);let ri;try{ri=Pn(An)}catch(_r){return void Mn.error(_r)}if((0,Cr.m)(Kt))return()=>Kt(An,ri)})}function Zr(Pn,Kt,mn,Mn,An){let ri,_r;return 1==arguments.length?(_r=Pn.initialState,Kt=Pn.condition,mn=Pn.iterate,ri=Pn.resultSelector||Mt.y,An=Pn.scheduler):void 0===Mn||(0,zn.K)(Mn)?(_r=Pn,ri=Mt.y,An=Mn):(_r=Pn,ri=Mn),new M.y(xi=>{let Qr=_r;if(An)return An.schedule(En,0,{subscriber:xi,iterate:mn,condition:Kt,resultSelector:ri,state:Qr});for(;;){if(Kt){let Jr;try{Jr=Kt(Qr)}catch(ml){return void xi.error(ml)}if(!Jr){xi.complete();break}}let si;try{si=ri(Qr)}catch(Jr){return void xi.error(Jr)}if(xi.next(si),xi.closed)break;try{Qr=mn(Qr)}catch(Jr){return void xi.error(Jr)}}})}function En(Pn){const{subscriber:Kt,condition:mn}=Pn;if(Kt.closed)return;if(Pn.needIterate)try{Pn.state=Pn.iterate(Pn.state)}catch(An){return void Kt.error(An)}else Pn.needIterate=!0;if(mn){let An;try{An=mn(Pn.state)}catch(ri){return void Kt.error(ri)}if(!An)return void Kt.complete();if(Kt.closed)return}let Mn;try{Mn=Pn.resultSelector(Pn.state)}catch(An){return void Kt.error(An)}return Kt.closed||(Kt.next(Mn),Kt.closed)?void 0:this.schedule(Pn)}function wi(Pn,Kt=er.E,mn=er.E){return(0,gn.P)(()=>Pn()?Kt:mn)}var Rr=_(4241);function or(Pn=0,Kt=U.P){return(!(0,Rr.k)(Pn)||Pn<0)&&(Pn=0),(!Kt||"function"!=typeof Kt.schedule)&&(Kt=U.P),new M.y(mn=>(mn.add(Kt.schedule(ar,Pn,{subscriber:mn,counter:0,period:Pn})),mn))}function ar(Pn){const{subscriber:Kt,counter:mn,period:Mn}=Pn;Kt.next(mn),this.schedule({subscriber:Kt,counter:mn+1,period:Mn},Mn)}var Pr=_(6787),fi=_(7274),Vn=_(1086);function os(...Pn){if(0===Pn.length)return er.E;const[Kt,...mn]=Pn;return 1===Pn.length&&(0,jn.k)(Kt)?os(...Kt):new M.y(Mn=>{const An=()=>Mn.add(os(...mn).subscribe(Mn));return(0,Mr.D)(Kt).subscribe({next(ri){Mn.next(ri)},error:An,complete:An})})}function ua(Pn,Kt){return new M.y(Kt?mn=>{const Mn=Object.keys(Pn),An=new Ke.w;return An.add(Kt.schedule(Br,0,{keys:Mn,index:0,subscriber:mn,subscription:An,obj:Pn})),An}:mn=>{const Mn=Object.keys(Pn);for(let An=0;An<Mn.length&&!mn.closed;An++){const ri=Mn[An];Pn.hasOwnProperty(ri)&&mn.next([ri,Pn[ri]])}mn.complete()})}function Br(Pn){const{keys:Kt,index:mn,subscriber:Mn,subscription:An,obj:ri}=Pn;if(!Mn.closed)if(mn<Kt.length){const _r=Kt[mn];Mn.next([_r,ri[_r]]),An.add(this.schedule({keys:Kt,index:mn+1,subscriber:Mn,subscription:An,obj:ri}))}else Mn.complete()}var Ln=_(5884),mi=_(9249),zr=_(2198);function ts(Pn,Kt,mn){return[(0,zr.h)(Kt,mn)(new M.y((0,mi.s)(Pn))),(0,zr.h)((0,Ln.f)(Kt,mn))(new M.y((0,mi.s)(Pn)))]}var as=_(1946);function ls(Pn=0,Kt,mn){return new M.y(Mn=>{void 0===Kt&&(Kt=Pn,Pn=0);let An=0,ri=Pn;if(mn)return mn.schedule(Cs,0,{index:An,count:Kt,start:Pn,subscriber:Mn});for(;;){if(An++>=Kt){Mn.complete();break}if(Mn.next(ri++),Mn.closed)break}})}function Cs(Pn){const{start:Kt,index:mn,count:Mn,subscriber:An}=Pn;mn>=Mn?An.complete():(An.next(Kt),!An.closed&&(Pn.index=mn+1,Pn.start=Kt+1,this.schedule(Pn)))}var co=_(1737),Gs=_(8723);function Jt(Pn,Kt){return new M.y(mn=>{let Mn,An;try{Mn=Pn()}catch(xi){return void mn.error(xi)}try{An=Kt(Mn)}catch(xi){return void mn.error(xi)}const _r=(An?(0,Mr.D)(An):er.E).subscribe(mn);return()=>{_r.unsubscribe(),Mn&&Mn.unsubscribe()}})}var Ta=_(1746),Ai=_(3998),Os=_(2830)},2185:(f,y,_)=>{"use strict";_.d(y,{c:()=>T});var M=_(8929),S=_(4096);class T extends M.xQ{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(H){return this.hasError?(H.error(this.thrownError),S.w.EMPTY):this.hasCompleted&&this.hasNext?(H.next(this.value),H.complete(),S.w.EMPTY):super._subscribe(H)}next(H){this.hasCompleted||(this.value=H,this.hasNext=!0)}error(H){this.hasCompleted||super.error(H)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}},591:(f,y,_)=>{"use strict";_.d(y,{X:()=>T});var M=_(8929),S=_(5279);class T extends M.xQ{constructor(H){super(),this._value=H}get value(){return this.getValue()}_subscribe(H){const q=super._subscribe(H);return q&&!q.closed&&H.next(this._value),q}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new S.N;return this._value}next(H){super.next(this._value=H)}}},9312:(f,y,_)=>{"use strict";_.d(y,{P:()=>H,W:()=>Y});var M=_(8896),S=_(1086),T=_(1737),Y=(()=>{return(q=Y||(Y={})).NEXT="N",q.ERROR="E",q.COMPLETE="C",Y;var q})();class H{constructor(J,F,G){this.kind=J,this.value=F,this.error=G,this.hasValue="N"===J}observe(J){switch(this.kind){case"N":return J.next&&J.next(this.value);case"E":return J.error&&J.error(this.error);case"C":return J.complete&&J.complete()}}do(J,F,G){switch(this.kind){case"N":return J&&J(this.value);case"E":return F&&F(this.error);case"C":return G&&G()}}accept(J,F,G){return J&&"function"==typeof J.next?this.observe(J):this.do(J,F,G)}toObservable(){switch(this.kind){case"N":return(0,S.of)(this.value);case"E":return(0,T._)(this.error);case"C":return(0,M.c)()}throw new Error("unexpected notification kind value")}static createNext(J){return typeof J<"u"?new H("N",J):H.undefinedValueNotification}static createError(J){return new H("E",void 0,J)}static createComplete(){return H.completeNotification}}H.completeNotification=new H("C"),H.undefinedValueNotification=new H("N",void 0)},4202:(f,y,_)=>{"use strict";_.d(y,{y:()=>G});var M=_(9476),S=_(3489),T=_(7668),Y=_(3292),q=_(3821),J=_(4843),F=_(2830);let G=(()=>{class V{constructor(K){this._isScalar=!1,K&&(this._subscribe=K)}lift(K){const z=new V;return z.source=this,z.operator=K,z}subscribe(K,z,ee){const{operator:de}=this,pe=function H(V,j,K){if(V){if(V instanceof S.L)return V;if(V[T.b])return V[T.b]()}return V||j||K?new S.L(V,j,K):new S.L(Y.c)}(K,z,ee);if(pe.add(de?de.call(pe,this.source):this.source||F.v.useDeprecatedSynchronousErrorHandling&&!pe.syncErrorThrowable?this._subscribe(pe):this._trySubscribe(pe)),F.v.useDeprecatedSynchronousErrorHandling&&pe.syncErrorThrowable&&(pe.syncErrorThrowable=!1,pe.syncErrorThrown))throw pe.syncErrorValue;return pe}_trySubscribe(K){try{return this._subscribe(K)}catch(z){F.v.useDeprecatedSynchronousErrorHandling&&(K.syncErrorThrown=!0,K.syncErrorValue=z),(0,M._)(K)?K.error(z):console.warn(z)}}forEach(K,z){return new(z=U(z))((ee,de)=>{let pe;pe=this.subscribe(Ee=>{try{K(Ee)}catch(je){de(je),pe&&pe.unsubscribe()}},de,ee)})}_subscribe(K){const{source:z}=this;return z&&z.subscribe(K)}[q.L](){return this}pipe(...K){return 0===K.length?this:(0,J.U)(K)(this)}toPromise(K){return new(K=U(K))((z,ee)=>{let de;this.subscribe(pe=>de=pe,pe=>ee(pe),()=>z(de))})}}return V.create=j=>new V(j),V})();function U(V){if(V||(V=F.v.Promise||Promise),!V)throw new Error("no Promise impl found");return V}},3292:(f,y,_)=>{"use strict";_.d(y,{c:()=>T});var M=_(2830),S=_(2782);const T={closed:!0,next(Y){},error(Y){if(M.v.useDeprecatedSynchronousErrorHandling)throw Y;(0,S.z)(Y)},complete(){}}},826:(f,y,_)=>{"use strict";_.d(y,{L:()=>S});var M=_(3489);class S extends M.L{notifyNext(Y,H,q,J,F){this.destination.next(H)}notifyError(Y,H){this.destination.error(Y)}notifyComplete(Y){this.destination.complete()}}},839:(f,y,_)=>{"use strict";_.d(y,{t:()=>J});var M=_(8929),S=_(341),T=_(4096),Y=_(7770),H=_(5279),q=_(5283);class J extends M.xQ{constructor(U=Number.POSITIVE_INFINITY,V=Number.POSITIVE_INFINITY,j){super(),this.scheduler=j,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=U<1?1:U,this._windowTime=V<1?1:V,V===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(U){if(!this.isStopped){const V=this._events;V.push(U),V.length>this._bufferSize&&V.shift()}super.next(U)}nextTimeWindow(U){this.isStopped||(this._events.push(new F(this._getNow(),U)),this._trimBufferThenGetEvents()),super.next(U)}_subscribe(U){const V=this._infiniteTimeWindow,j=V?this._events:this._trimBufferThenGetEvents(),K=this.scheduler,z=j.length;let ee;if(this.closed)throw new H.N;if(this.isStopped||this.hasError?ee=T.w.EMPTY:(this.observers.push(U),ee=new q.W(this,U)),K&&U.add(U=new Y.ht(U,K)),V)for(let de=0;de<z&&!U.closed;de++)U.next(j[de]);else for(let de=0;de<z&&!U.closed;de++)U.next(j[de].value);return this.hasError?U.error(this.thrownError):this.isStopped&&U.complete(),ee}_getNow(){return(this.scheduler||S.c).now()}_trimBufferThenGetEvents(){const U=this._getNow(),V=this._bufferSize,j=this._windowTime,K=this._events,z=K.length;let ee=0;for(;ee<z&&!(U-K[ee].time<j);)ee++;return z>V&&(ee=Math.max(ee,z-V)),ee>0&&K.splice(0,ee),K}}class F{constructor(U,V){this.time=U,this.value=V}}},2221:(f,y,_)=>{"use strict";_.d(y,{b:()=>M});let M=(()=>{class S{constructor(Y,H=S.now){this.SchedulerAction=Y,this.now=H}schedule(Y,H=0,q){return new this.SchedulerAction(this,Y).schedule(q,H)}}return S.now=()=>Date.now(),S})()},8929:(f,y,_)=>{"use strict";_.d(y,{Yc:()=>J,xQ:()=>F});var M=_(4202),S=_(3489),T=_(4096),Y=_(5279),H=_(5283),q=_(7668);class J extends S.L{constructor(V){super(V),this.destination=V}}let F=(()=>{class U extends M.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[q.b](){return new J(this)}lift(j){const K=new G(this,this);return K.operator=j,K}next(j){if(this.closed)throw new Y.N;if(!this.isStopped){const{observers:K}=this,z=K.length,ee=K.slice();for(let de=0;de<z;de++)ee[de].next(j)}}error(j){if(this.closed)throw new Y.N;this.hasError=!0,this.thrownError=j,this.isStopped=!0;const{observers:K}=this,z=K.length,ee=K.slice();for(let de=0;de<z;de++)ee[de].error(j);this.observers.length=0}complete(){if(this.closed)throw new Y.N;this.isStopped=!0;const{observers:j}=this,K=j.length,z=j.slice();for(let ee=0;ee<K;ee++)z[ee].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(j){if(this.closed)throw new Y.N;return super._trySubscribe(j)}_subscribe(j){if(this.closed)throw new Y.N;return this.hasError?(j.error(this.thrownError),T.w.EMPTY):this.isStopped?(j.complete(),T.w.EMPTY):(this.observers.push(j),new H.W(this,j))}asObservable(){const j=new M.y;return j.source=this,j}}return U.create=(V,j)=>new G(V,j),U})();class G extends F{constructor(V,j){super(),this.destination=V,this.source=j}next(V){const{destination:j}=this;j&&j.next&&j.next(V)}error(V){const{destination:j}=this;j&&j.error&&this.destination.error(V)}complete(){const{destination:V}=this;V&&V.complete&&this.destination.complete()}_subscribe(V){const{source:j}=this;return j?this.source.subscribe(V):T.w.EMPTY}}},5283:(f,y,_)=>{"use strict";_.d(y,{W:()=>S});var M=_(4096);class S extends M.w{constructor(Y,H){super(),this.subject=Y,this.subscriber=H,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Y=this.subject,H=Y.observers;if(this.subject=null,!H||0===H.length||Y.isStopped||Y.closed)return;const q=H.indexOf(this.subscriber);-1!==q&&H.splice(q,1)}}},3489:(f,y,_)=>{"use strict";_.d(y,{L:()=>J});var M=_(7043),S=_(3292),T=_(4096),Y=_(7668),H=_(2830),q=_(2782);class J extends T.w{constructor(U,V,j){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=S.c;break;case 1:if(!U){this.destination=S.c;break}if("object"==typeof U){U instanceof J?(this.syncErrorThrowable=U.syncErrorThrowable,this.destination=U,U.add(this)):(this.syncErrorThrowable=!0,this.destination=new F(this,U));break}default:this.syncErrorThrowable=!0,this.destination=new F(this,U,V,j)}}[Y.b](){return this}static create(U,V,j){const K=new J(U,V,j);return K.syncErrorThrowable=!1,K}next(U){this.isStopped||this._next(U)}error(U){this.isStopped||(this.isStopped=!0,this._error(U))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(U){this.destination.next(U)}_error(U){this.destination.error(U),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:U}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=U,this}}class F extends J{constructor(U,V,j,K){super(),this._parentSubscriber=U;let z,ee=this;(0,M.m)(V)?z=V:V&&(z=V.next,j=V.error,K=V.complete,V!==S.c&&(ee=Object.create(V),(0,M.m)(ee.unsubscribe)&&this.add(ee.unsubscribe.bind(ee)),ee.unsubscribe=this.unsubscribe.bind(this))),this._context=ee,this._next=z,this._error=j,this._complete=K}next(U){if(!this.isStopped&&this._next){const{_parentSubscriber:V}=this;H.v.useDeprecatedSynchronousErrorHandling&&V.syncErrorThrowable?this.__tryOrSetError(V,this._next,U)&&this.unsubscribe():this.__tryOrUnsub(this._next,U)}}error(U){if(!this.isStopped){const{_parentSubscriber:V}=this,{useDeprecatedSynchronousErrorHandling:j}=H.v;if(this._error)j&&V.syncErrorThrowable?(this.__tryOrSetError(V,this._error,U),this.unsubscribe()):(this.__tryOrUnsub(this._error,U),this.unsubscribe());else if(V.syncErrorThrowable)j?(V.syncErrorValue=U,V.syncErrorThrown=!0):(0,q.z)(U),this.unsubscribe();else{if(this.unsubscribe(),j)throw U;(0,q.z)(U)}}}complete(){if(!this.isStopped){const{_parentSubscriber:U}=this;if(this._complete){const V=()=>this._complete.call(this._context);H.v.useDeprecatedSynchronousErrorHandling&&U.syncErrorThrowable?(this.__tryOrSetError(U,V),this.unsubscribe()):(this.__tryOrUnsub(V),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(U,V){try{U.call(this._context,V)}catch(j){if(this.unsubscribe(),H.v.useDeprecatedSynchronousErrorHandling)throw j;(0,q.z)(j)}}__tryOrSetError(U,V,j){if(!H.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{V.call(this._context,j)}catch(K){return H.v.useDeprecatedSynchronousErrorHandling?(U.syncErrorValue=K,U.syncErrorThrown=!0,!0):((0,q.z)(K),!0)}return!1}_unsubscribe(){const{_parentSubscriber:U}=this;this._context=null,this._parentSubscriber=null,U.unsubscribe()}}},4096:(f,y,_)=>{"use strict";_.d(y,{w:()=>H});var J,M=_(6688),S=_(7830),T=_(7043),Y=_(7964);class H{constructor(F){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,F&&(this._ctorUnsubscribe=!0,this._unsubscribe=F)}unsubscribe(){let F;if(this.closed)return;let{_parentOrParents:G,_ctorUnsubscribe:U,_unsubscribe:V,_subscriptions:j}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,G instanceof H)G.remove(this);else if(null!==G)for(let K=0;K<G.length;++K)G[K].remove(this);if((0,T.m)(V)){U&&(this._unsubscribe=void 0);try{V.call(this)}catch(K){F=K instanceof Y.B?q(K.errors):[K]}}if((0,M.k)(j)){let K=-1,z=j.length;for(;++K<z;){const ee=j[K];if((0,S.K)(ee))try{ee.unsubscribe()}catch(de){F=F||[],de instanceof Y.B?F=F.concat(q(de.errors)):F.push(de)}}}if(F)throw new Y.B(F)}add(F){let G=F;if(!F)return H.EMPTY;switch(typeof F){case"function":G=new H(F);case"object":if(G===this||G.closed||"function"!=typeof G.unsubscribe)return G;if(this.closed)return G.unsubscribe(),G;if(!(G instanceof H)){const j=G;G=new H,G._subscriptions=[j]}break;default:throw new Error("unrecognized teardown "+F+" added to Subscription.")}let{_parentOrParents:U}=G;if(null===U)G._parentOrParents=this;else if(U instanceof H){if(U===this)return G;G._parentOrParents=[U,this]}else{if(-1!==U.indexOf(this))return G;U.push(this)}const V=this._subscriptions;return null===V?this._subscriptions=[G]:V.push(G),G}remove(F){const G=this._subscriptions;if(G){const U=G.indexOf(F);-1!==U&&G.splice(U,1)}}}function q(J){return J.reduce((F,G)=>F.concat(G instanceof Y.B?G.errors:G),[])}H.EMPTY=((J=new H).closed=!0,J)},2830:(f,y,_)=>{"use strict";_.d(y,{v:()=>S});let M=!1;const S={Promise:void 0,set useDeprecatedSynchronousErrorHandling(T){if(T){const Y=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Y.stack)}else M&&console.log("RxJS: Back to a better error behavior. Thank you. <3");M=T},get useDeprecatedSynchronousErrorHandling(){return M}}},1177:(f,y,_)=>{"use strict";_.d(y,{Ds:()=>q,IY:()=>Y,ft:()=>F});var M=_(3489),S=_(4202),T=_(9249);class Y extends M.L{constructor(U){super(),this.parent=U}_next(U){this.parent.notifyNext(U)}_error(U){this.parent.notifyError(U),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class q extends M.L{notifyNext(U){this.destination.next(U)}notifyError(U){this.destination.error(U)}notifyComplete(){this.destination.complete()}}function F(G,U){if(U.closed)return;if(G instanceof S.y)return G.subscribe(U);let V;try{V=(0,T.s)(G)(U)}catch(j){U.error(j)}return V}},1762:(f,y,_)=>{"use strict";_.d(y,{N:()=>q,c:()=>H});var M=_(8929),S=_(4202),T=_(4096),Y=_(4327);class H extends S.y{constructor(V,j){super(),this.source=V,this.subjectFactory=j,this._refCount=0,this._isComplete=!1}_subscribe(V){return this.getSubject().subscribe(V)}getSubject(){const V=this._subject;return(!V||V.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let V=this._connection;return V||(this._isComplete=!1,V=this._connection=new T.w,V.add(this.source.subscribe(new J(this.getSubject(),this))),V.closed&&(this._connection=null,V=T.w.EMPTY)),V}refCount(){return(0,Y.x)()(this)}}const q=(()=>{const U=H.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:U._subscribe},_isComplete:{value:U._isComplete,writable:!0},getSubject:{value:U.getSubject},connect:{value:U.connect},refCount:{value:U.refCount}}})();class J extends M.Yc{constructor(V,j){super(V),this.connectable=j}_error(V){this._unsubscribe(),super._error(V)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const V=this.connectable;if(V){this.connectable=null;const j=V._connection;V._refCount=0,V._subject=null,V._connection=null,j&&j.unsubscribe()}}}},6053:(f,y,_)=>{"use strict";_.d(y,{Ms:()=>F,aj:()=>J});var M=_(2866),S=_(6688),T=_(826),Y=_(448),H=_(3009);const q={};function J(...U){let V,j;return(0,M.K)(U[U.length-1])&&(j=U.pop()),"function"==typeof U[U.length-1]&&(V=U.pop()),1===U.length&&(0,S.k)(U[0])&&(U=U[0]),(0,H.n)(U,j).lift(new F(V))}class F{constructor(V){this.resultSelector=V}call(V,j){return j.subscribe(new G(V,this.resultSelector))}}class G extends T.L{constructor(V,j){super(V),this.resultSelector=j,this.active=0,this.values=[],this.observables=[]}_next(V){this.values.push(q),this.observables.push(V)}_complete(){const V=this.observables,j=V.length;if(0===j)this.destination.complete();else{this.active=j,this.toRespond=j;for(let K=0;K<j;K++)this.add((0,Y.D)(this,V[K],void 0,K))}}notifyComplete(V){0==(this.active-=1)&&this.destination.complete()}notifyNext(V,j,K){const z=this.values,de=this.toRespond?z[K]===q?--this.toRespond:this.toRespond:0;z[K]=j,0===de&&(this.resultSelector?this._tryResultSelector(z):this.destination.next(z.slice()))}_tryResultSelector(V){let j;try{j=this.resultSelector.apply(this,V)}catch(K){return void this.destination.error(K)}this.destination.next(j)}}},1961:(f,y,_)=>{"use strict";_.d(y,{z:()=>T});var M=_(1086),S=_(534);function T(...Y){return(0,S.u)()((0,M.of)(...Y))}},8514:(f,y,_)=>{"use strict";_.d(y,{P:()=>Y});var M=_(4202),S=_(3527),T=_(8896);function Y(H){return new M.y(q=>{let J;try{J=H()}catch(G){return void q.error(G)}return(J?(0,S.D)(J):(0,T.c)()).subscribe(q)})}},8896:(f,y,_)=>{"use strict";_.d(y,{E:()=>S,c:()=>T});var M=_(4202);const S=new M.y(H=>H.complete());function T(H){return H?function Y(H){return new M.y(q=>H.schedule(()=>q.complete()))}(H):S}},567:(f,y,_)=>{"use strict";_.d(y,{D:()=>q});var M=_(4202),S=_(6688),T=_(4850),Y=_(7830),H=_(3527);function q(...F){if(1===F.length){const G=F[0];if((0,S.k)(G))return J(G,null);if((0,Y.K)(G)&&Object.getPrototypeOf(G)===Object.prototype){const U=Object.keys(G);return J(U.map(V=>G[V]),U)}}if("function"==typeof F[F.length-1]){const G=F.pop();return J(F=1===F.length&&(0,S.k)(F[0])?F[0]:F,null).pipe((0,T.U)(U=>G(...U)))}return J(F,null)}function J(F,G){return new M.y(U=>{const V=F.length;if(0===V)return void U.complete();const j=new Array(V);let K=0,z=0;for(let ee=0;ee<V;ee++){const de=(0,H.D)(F[ee]);let pe=!1;U.add(de.subscribe({next:Ee=>{pe||(pe=!0,z++),j[ee]=Ee},error:Ee=>U.error(Ee),complete:()=>{K++,(K===V||!pe)&&(z===V&&U.next(G?G.reduce((Ee,je,ct)=>(Ee[je]=j[ct],Ee),{}):j),U.complete())}}))}})}},3527:(f,y,_)=>{"use strict";_.d(y,{D:()=>Y});var M=_(4202),S=_(9249),T=_(3998);function Y(H,q){return q?(0,T.x)(H,q):H instanceof M.y?H:new M.y((0,S.s)(H))}},3009:(f,y,_)=>{"use strict";_.d(y,{n:()=>Y});var M=_(4202),S=_(3650),T=_(6454);function Y(H,q){return q?(0,T.r)(H,q):new M.y((0,S.V)(H))}},3753:(f,y,_)=>{"use strict";_.d(y,{R:()=>q});var M=_(4202),S=_(6688),T=_(7043),Y=_(4850);function q(V,j,K,z){return(0,T.m)(K)&&(z=K,K=void 0),z?q(V,j,K).pipe((0,Y.U)(ee=>(0,S.k)(ee)?z(...ee):z(ee))):new M.y(ee=>{J(V,j,function de(pe){ee.next(arguments.length>1?Array.prototype.slice.call(arguments):pe)},ee,K)})}function J(V,j,K,z,ee){let de;if(function U(V){return V&&"function"==typeof V.addEventListener&&"function"==typeof V.removeEventListener}(V)){const pe=V;V.addEventListener(j,K,ee),de=()=>pe.removeEventListener(j,K,ee)}else if(function G(V){return V&&"function"==typeof V.on&&"function"==typeof V.off}(V)){const pe=V;V.on(j,K),de=()=>pe.off(j,K)}else if(function F(V){return V&&"function"==typeof V.addListener&&"function"==typeof V.removeListener}(V)){const pe=V;V.addListener(j,K),de=()=>pe.removeListener(j,K)}else{if(!V||!V.length)throw new TypeError("Invalid event target");for(let pe=0,Ee=V.length;pe<Ee;pe++)J(V[pe],j,K,z,ee)}z.add(de)}},6787:(f,y,_)=>{"use strict";_.d(y,{T:()=>H});var M=_(4202),S=_(2866),T=_(9146),Y=_(3009);function H(...q){let J=Number.POSITIVE_INFINITY,F=null,G=q[q.length-1];return(0,S.K)(G)?(F=q.pop(),q.length>1&&"number"==typeof q[q.length-1]&&(J=q.pop())):"number"==typeof G&&(J=q.pop()),null===F&&1===q.length&&q[0]instanceof M.y?q[0]:(0,T.J)(J)((0,Y.n)(q,F))}},7274:(f,y,_)=>{"use strict";_.d(y,{C:()=>T,F:()=>Y});var M=_(4202),S=_(7876);const T=new M.y(S.Z);function Y(){return T}},1086:(f,y,_)=>{"use strict";_.d(y,{of:()=>Y});var M=_(2866),S=_(3009),T=_(6454);function Y(...H){let q=H[H.length-1];return(0,M.K)(q)?(H.pop(),(0,T.r)(H,q)):(0,S.n)(H)}},1946:(f,y,_)=>{"use strict";_.d(y,{S3:()=>H});var M=_(6688),S=_(3009),T=_(826),Y=_(448);function H(...F){if(1===F.length){if(!(0,M.k)(F[0]))return F[0];F=F[0]}return(0,S.n)(F,void 0).lift(new q)}class q{call(G,U){return U.subscribe(new J(G))}}class J extends T.L{constructor(G){super(G),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(G){this.observables.push(G)}_complete(){const G=this.observables,U=G.length;if(0===U)this.destination.complete();else{for(let V=0;V<U&&!this.hasFirst;V++){const K=(0,Y.D)(this,G[V],void 0,V);this.subscriptions&&this.subscriptions.push(K),this.add(K)}this.observables=null}}notifyNext(G,U,V){if(!this.hasFirst){this.hasFirst=!0;for(let j=0;j<this.subscriptions.length;j++)if(j!==V){let K=this.subscriptions[j];K.unsubscribe(),this.remove(K)}this.subscriptions=null}this.destination.next(U)}}},1737:(f,y,_)=>{"use strict";_.d(y,{_:()=>S});var M=_(4202);function S(Y,H){return new M.y(H?q=>H.schedule(T,0,{error:Y,subscriber:q}):q=>q.error(Y))}function T({error:Y,subscriber:H}){H.error(Y)}},8723:(f,y,_)=>{"use strict";_.d(y,{H:()=>H});var M=_(4202),S=_(353),T=_(4241),Y=_(2866);function H(J=0,F,G){let U=-1;return(0,T.k)(F)?U=Number(F)<1?1:Number(F):(0,Y.K)(F)&&(G=F),(0,Y.K)(G)||(G=S.P),new M.y(V=>{const j=(0,T.k)(J)?J:+J-G.now();return G.schedule(q,j,{index:0,period:U,subscriber:V})})}function q(J){const{index:F,period:G,subscriber:U}=J;if(U.next(F),!U.closed){if(-1===G)return U.complete();J.index=F+1,this.schedule(J,G)}}},1746:(f,y,_)=>{"use strict";_.d(y,{$R:()=>q,mx:()=>J});var M=_(3009),S=_(6688),T=_(3489),Y=_(5430),H=_(1177);function q(...j){const K=j[j.length-1];return"function"==typeof K&&j.pop(),(0,M.n)(j,void 0).lift(new J(K))}class J{constructor(K){this.resultSelector=K}call(K,z){return z.subscribe(new F(K,this.resultSelector))}}class F extends T.L{constructor(K,z,ee=Object.create(null)){super(K),this.resultSelector=z,this.iterators=[],this.active=0,this.resultSelector="function"==typeof z?z:void 0}_next(K){const z=this.iterators;(0,S.k)(K)?z.push(new U(K)):z.push("function"==typeof K[Y.hZ]?new G(K[Y.hZ]()):new V(this.destination,this,K))}_complete(){const K=this.iterators,z=K.length;if(this.unsubscribe(),0!==z){this.active=z;for(let ee=0;ee<z;ee++){let de=K[ee];de.stillUnsubscribed?this.destination.add(de.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const K=this.iterators,z=K.length,ee=this.destination;for(let Ee=0;Ee<z;Ee++){let je=K[Ee];if("function"==typeof je.hasValue&&!je.hasValue())return}let de=!1;const pe=[];for(let Ee=0;Ee<z;Ee++){let je=K[Ee],ct=je.next();if(je.hasCompleted()&&(de=!0),ct.done)return void ee.complete();pe.push(ct.value)}this.resultSelector?this._tryresultSelector(pe):ee.next(pe),de&&ee.complete()}_tryresultSelector(K){let z;try{z=this.resultSelector.apply(this,K)}catch(ee){return void this.destination.error(ee)}this.destination.next(z)}}class G{constructor(K){this.iterator=K,this.nextResult=K.next()}hasValue(){return!0}next(){const K=this.nextResult;return this.nextResult=this.iterator.next(),K}hasCompleted(){const K=this.nextResult;return Boolean(K&&K.done)}}class U{constructor(K){this.array=K,this.index=0,this.length=0,this.length=K.length}[Y.hZ](){return this}next(K){const z=this.index++;return z<this.length?{value:this.array[z],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class V extends H.Ds{constructor(K,z,ee){super(K),this.parent=z,this.observable=ee,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[Y.hZ](){return this}next(){const K=this.buffer;return 0===K.length&&this.isComplete?{value:null,done:!0}:{value:K.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(K){this.buffer.push(K),this.parent.checkIterators()}subscribe(){return(0,H.ft)(this.observable,new H.IY(this))}}},7221:(f,y,_)=>{"use strict";_.d(y,{K:()=>S});var M=_(1177);function S(H){return function(J){const F=new T(H),G=J.lift(F);return F.caught=G}}class T{constructor(q){this.selector=q}call(q,J){return J.subscribe(new Y(q,this.selector,this.caught))}}class Y extends M.Ds{constructor(q,J,F){super(q),this.selector=J,this.caught=F}error(q){if(!this.isStopped){let J;try{J=this.selector(q,this.caught)}catch(U){return void super.error(U)}this._unsubscribeAndRecycle();const F=new M.IY(this);this.add(F);const G=(0,M.ft)(J,F);G!==F&&this.add(G)}}}},534:(f,y,_)=>{"use strict";_.d(y,{u:()=>S});var M=_(9146);function S(){return(0,M.J)(1)}},1406:(f,y,_)=>{"use strict";_.d(y,{b:()=>S});var M=_(1709);function S(T,Y){return(0,M.zg)(T,Y,1)}},7314:(f,y,_)=>{"use strict";_.d(y,{d:()=>S});var M=_(3489);function S(H=null){return q=>q.lift(new T(H))}class T{constructor(q){this.defaultValue=q}call(q,J){return J.subscribe(new Y(q,this.defaultValue))}}class Y extends M.L{constructor(q,J){super(q),this.defaultValue=J,this.isEmpty=!0}_next(q){this.isEmpty=!1,this.destination.next(q)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},943:(f,y,_)=>{"use strict";_.d(y,{g:()=>H});var M=_(353),S=_(2697),T=_(3489),Y=_(9312);function H(G,U=M.P){const j=(0,S.J)(G)?+G-U.now():Math.abs(G);return K=>K.lift(new q(j,U))}class q{constructor(U,V){this.delay=U,this.scheduler=V}call(U,V){return V.subscribe(new J(U,this.delay,this.scheduler))}}class J extends T.L{constructor(U,V,j){super(U),this.delay=V,this.scheduler=j,this.queue=[],this.active=!1,this.errored=!1}static dispatch(U){const V=U.source,j=V.queue,K=U.scheduler,z=U.destination;for(;j.length>0&&j[0].time-K.now()<=0;)j.shift().notification.observe(z);if(j.length>0){const ee=Math.max(0,j[0].time-K.now());this.schedule(U,ee)}else this.unsubscribe(),V.active=!1}_schedule(U){this.active=!0,this.destination.add(U.schedule(J.dispatch,this.delay,{source:this,destination:this.destination,scheduler:U}))}scheduleNotification(U){if(!0===this.errored)return;const V=this.scheduler,j=new F(V.now()+this.delay,U);this.queue.push(j),!1===this.active&&this._schedule(V)}_next(U){this.scheduleNotification(Y.P.createNext(U))}_error(U){this.errored=!0,this.queue=[],this.destination.error(U),this.unsubscribe()}_complete(){this.scheduleNotification(Y.P.createComplete()),this.unsubscribe()}}class F{constructor(U,V){this.time=U,this.notification=V}}},5778:(f,y,_)=>{"use strict";_.d(y,{x:()=>S});var M=_(3489);function S(H,q){return J=>J.lift(new T(H,q))}class T{constructor(q,J){this.compare=q,this.keySelector=J}call(q,J){return J.subscribe(new Y(q,this.compare,this.keySelector))}}class Y extends M.L{constructor(q,J,F){super(q),this.keySelector=F,this.hasKey=!1,"function"==typeof J&&(this.compare=J)}compare(q,J){return q===J}_next(q){let J;try{const{keySelector:G}=this;J=G?G(q):q}catch(G){return this.destination.error(G)}let F=!1;if(this.hasKey)try{const{compare:G}=this;F=G(this.key,J)}catch(G){return this.destination.error(G)}else this.hasKey=!0;F||(this.key=J,this.destination.next(q))}}},2334:(f,y,_)=>{"use strict";_.d(y,{l:()=>T});var M=_(1961),S=_(1086);function T(...Y){return H=>(0,M.z)(H,(0,S.of)(...Y))}},2198:(f,y,_)=>{"use strict";_.d(y,{h:()=>S});var M=_(3489);function S(H,q){return function(F){return F.lift(new T(H,q))}}class T{constructor(q,J){this.predicate=q,this.thisArg=J}call(q,J){return J.subscribe(new Y(q,this.predicate,this.thisArg))}}class Y extends M.L{constructor(q,J,F){super(q),this.predicate=J,this.thisArg=F,this.count=0}_next(q){let J;try{J=this.predicate.call(this.thisArg,q,this.count++)}catch(F){return void this.destination.error(F)}J&&this.destination.next(q)}}},537:(f,y,_)=>{"use strict";_.d(y,{x:()=>T});var M=_(3489),S=_(4096);function T(q){return J=>J.lift(new Y(q))}class Y{constructor(J){this.callback=J}call(J,F){return F.subscribe(new H(J,this.callback))}}class H extends M.L{constructor(J,F){super(J),this.add(new S.w(F))}}},7224:(f,y,_)=>{"use strict";_.d(y,{P:()=>J});var M=_(4450),S=_(2198),T=_(2986),Y=_(7314),H=_(4907),q=_(5379);function J(F,G){const U=arguments.length>=2;return V=>V.pipe(F?(0,S.h)((j,K)=>F(j,K,V)):q.y,(0,T.q)(1),U?(0,Y.d)(G):(0,H.T)(()=>new M.K))}},4002:(f,y,_)=>{"use strict";_.d(y,{T:()=>G,v:()=>H});var M=_(3489),S=_(4096),T=_(4202),Y=_(8929);function H(V,j,K,z){return ee=>ee.lift(new q(V,j,K,z))}class q{constructor(j,K,z,ee){this.keySelector=j,this.elementSelector=K,this.durationSelector=z,this.subjectSelector=ee}call(j,K){return K.subscribe(new J(j,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class J extends M.L{constructor(j,K,z,ee,de){super(j),this.keySelector=K,this.elementSelector=z,this.durationSelector=ee,this.subjectSelector=de,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(j){let K;try{K=this.keySelector(j)}catch(z){return void this.error(z)}this._group(j,K)}_group(j,K){let z=this.groups;z||(z=this.groups=new Map);let de,ee=z.get(K);if(this.elementSelector)try{de=this.elementSelector(j)}catch(pe){this.error(pe)}else de=j;if(!ee){ee=this.subjectSelector?this.subjectSelector():new Y.xQ,z.set(K,ee);const pe=new G(K,ee,this);if(this.destination.next(pe),this.durationSelector){let Ee;try{Ee=this.durationSelector(new G(K,ee))}catch(je){return void this.error(je)}this.add(Ee.subscribe(new F(K,ee,this)))}}ee.closed||ee.next(de)}_error(j){const K=this.groups;K&&(K.forEach((z,ee)=>{z.error(j)}),K.clear()),this.destination.error(j)}_complete(){const j=this.groups;j&&(j.forEach((K,z)=>{K.complete()}),j.clear()),this.destination.complete()}removeGroup(j){this.groups.delete(j)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class F extends M.L{constructor(j,K,z){super(K),this.key=j,this.group=K,this.parent=z}_next(j){this.complete()}_unsubscribe(){const{parent:j,key:K}=this;this.key=this.parent=null,j&&j.removeGroup(K)}}class G extends T.y{constructor(j,K,z){super(),this.key=j,this.groupSubject=K,this.refCountSubscription=z}_subscribe(j){const K=new S.w,{refCountSubscription:z,groupSubject:ee}=this;return z&&!z.closed&&K.add(new U(z)),K.add(ee.subscribe(j)),K}}class U extends S.w{constructor(j){super(),this.parent=j,j.count++}unsubscribe(){const j=this.parent;!j.closed&&!this.closed&&(super.unsubscribe(),j.count-=1,0===j.count&&j.attemptedToUnsubscribe&&j.unsubscribe())}}},8127:(f,y,_)=>{"use strict";_.d(y,{Z:()=>J});var M=_(4450),S=_(2198),T=_(2821),Y=_(4907),H=_(7314),q=_(5379);function J(F,G){const U=arguments.length>=2;return V=>V.pipe(F?(0,S.h)((j,K)=>F(j,K,V)):q.y,(0,T.h)(1),U?(0,H.d)(G):(0,Y.T)(()=>new M.K))}},4850:(f,y,_)=>{"use strict";_.d(y,{U:()=>S});var M=_(3489);function S(H,q){return function(F){if("function"!=typeof H)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return F.lift(new T(H,q))}}class T{constructor(q,J){this.project=q,this.thisArg=J}call(q,J){return J.subscribe(new Y(q,this.project,this.thisArg))}}class Y extends M.L{constructor(q,J,F){super(q),this.project=J,this.count=0,this.thisArg=F||this}_next(q){let J;try{J=this.project.call(this.thisArg,q,this.count++)}catch(F){return void this.destination.error(F)}this.destination.next(J)}}},7604:(f,y,_)=>{"use strict";_.d(y,{h:()=>S});var M=_(3489);function S(H){return q=>q.lift(new T(H))}class T{constructor(q){this.value=q}call(q,J){return J.subscribe(new Y(q,this.value))}}class Y extends M.L{constructor(q,J){super(q),this.value=J}_next(q){this.destination.next(this.value)}}},9146:(f,y,_)=>{"use strict";_.d(y,{J:()=>T});var M=_(1709),S=_(5379);function T(Y=Number.POSITIVE_INFINITY){return(0,M.zg)(S.y,Y)}},1709:(f,y,_)=>{"use strict";_.d(y,{VS:()=>J,zg:()=>Y});var M=_(4850),S=_(3527),T=_(1177);function Y(F,G,U=Number.POSITIVE_INFINITY){return"function"==typeof G?V=>V.pipe(Y((j,K)=>(0,S.D)(F(j,K)).pipe((0,M.U)((z,ee)=>G(j,z,K,ee))),U)):("number"==typeof G&&(U=G),V=>V.lift(new H(F,U)))}class H{constructor(G,U=Number.POSITIVE_INFINITY){this.project=G,this.concurrent=U}call(G,U){return U.subscribe(new q(G,this.project,this.concurrent))}}class q extends T.Ds{constructor(G,U,V=Number.POSITIVE_INFINITY){super(G),this.project=U,this.concurrent=V,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(G){this.active<this.concurrent?this._tryNext(G):this.buffer.push(G)}_tryNext(G){let U;const V=this.index++;try{U=this.project(G,V)}catch(j){return void this.destination.error(j)}this.active++,this._innerSub(U)}_innerSub(G){const U=new T.IY(this),V=this.destination;V.add(U);const j=(0,T.ft)(G,U);j!==U&&V.add(j)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(G){this.destination.next(G)}notifyComplete(){const G=this.buffer;this.active--,G.length>0?this._next(G.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}const J=Y},2536:(f,y,_)=>{"use strict";_.d(y,{O:()=>S});var M=_(1762);function S(Y,H){return function(J){let F;if(F="function"==typeof Y?Y:function(){return Y},"function"==typeof H)return J.lift(new T(F,H));const G=Object.create(J,M.N);return G.source=J,G.subjectFactory=F,G}}class T{constructor(H,q){this.subjectFactory=H,this.selector=q}call(H,q){const{selector:J}=this,F=this.subjectFactory(),G=J(F).subscribe(H);return G.add(q.subscribe(F)),G}}},7770:(f,y,_)=>{"use strict";_.d(y,{QV:()=>T,ht:()=>H});var M=_(3489),S=_(9312);function T(J,F=0){return function(U){return U.lift(new Y(J,F))}}class Y{constructor(F,G=0){this.scheduler=F,this.delay=G}call(F,G){return G.subscribe(new H(F,this.scheduler,this.delay))}}class H extends M.L{constructor(F,G,U=0){super(F),this.scheduler=G,this.delay=U}static dispatch(F){const{notification:G,destination:U}=F;G.observe(U),this.unsubscribe()}scheduleMessage(F){this.destination.add(this.scheduler.schedule(H.dispatch,this.delay,new q(F,this.destination)))}_next(F){this.scheduleMessage(S.P.createNext(F))}_error(F){this.scheduleMessage(S.P.createError(F)),this.unsubscribe()}_complete(){this.scheduleMessage(S.P.createComplete()),this.unsubscribe()}}class q{constructor(F,G){this.notification=F,this.destination=G}}},8077:(f,y,_)=>{"use strict";_.d(y,{u:()=>H});var M=_(2014),S=_(2821),T=_(7314),Y=_(4843);function H(q,J){return arguments.length>=2?function(G){return(0,Y.z)((0,M.R)(q,J),(0,S.h)(1),(0,T.d)(J))(G)}:function(G){return(0,Y.z)((0,M.R)((U,V,j)=>q(U,V,j+1)),(0,S.h)(1))(G)}}},4327:(f,y,_)=>{"use strict";_.d(y,{x:()=>S});var M=_(3489);function S(){return function(q){return q.lift(new T(q))}}class T{constructor(q){this.connectable=q}call(q,J){const{connectable:F}=this;F._refCount++;const G=new Y(q,F),U=J.subscribe(G);return G.closed||(G.connection=F.connect()),U}}class Y extends M.L{constructor(q,J){super(q),this.connectable=J}_unsubscribe(){const{connectable:q}=this;if(!q)return void(this.connection=null);this.connectable=null;const J=q._refCount;if(J<=0)return void(this.connection=null);if(q._refCount=J-1,J>1)return void(this.connection=null);const{connection:F}=this,G=q._connection;this.connection=null,G&&(!F||G===F)&&G.unsubscribe()}}},2014:(f,y,_)=>{"use strict";_.d(y,{R:()=>S});var M=_(3489);function S(H,q){let J=!1;return arguments.length>=2&&(J=!0),function(G){return G.lift(new T(H,q,J))}}class T{constructor(q,J,F=!1){this.accumulator=q,this.seed=J,this.hasSeed=F}call(q,J){return J.subscribe(new Y(q,this.accumulator,this.seed,this.hasSeed))}}class Y extends M.L{constructor(q,J,F,G){super(q),this.accumulator=J,this._seed=F,this.hasSeed=G,this.index=0}get seed(){return this._seed}set seed(q){this.hasSeed=!0,this._seed=q}_next(q){if(this.hasSeed)return this._tryNext(q);this.seed=q,this.destination.next(q)}_tryNext(q){const J=this.index++;let F;try{F=this.accumulator(this.seed,q,J)}catch(G){this.destination.error(G)}this.seed=F,this.destination.next(F)}}},8117:(f,y,_)=>{"use strict";_.d(y,{B:()=>H});var M=_(2536),S=_(4327),T=_(8929);function Y(){return new T.xQ}function H(){return q=>(0,S.x)()((0,M.O)(Y)(q))}},1307:(f,y,_)=>{"use strict";_.d(y,{T:()=>S});var M=_(3489);function S(H){return q=>q.lift(new T(H))}class T{constructor(q){this.total=q}call(q,J){return J.subscribe(new Y(q,this.total))}}class Y extends M.L{constructor(q,J){super(q),this.total=J,this.count=0}_next(q){++this.count>this.total&&this.destination.next(q)}}},1059:(f,y,_)=>{"use strict";_.d(y,{O:()=>T});var M=_(1961),S=_(2866);function T(...Y){const H=Y[Y.length-1];return(0,S.K)(H)?(Y.pop(),q=>(0,M.z)(Y,q,H)):q=>(0,M.z)(Y,q)}},7545:(f,y,_)=>{"use strict";_.d(y,{w:()=>Y});var M=_(4850),S=_(3527),T=_(1177);function Y(J,F){return"function"==typeof F?G=>G.pipe(Y((U,V)=>(0,S.D)(J(U,V)).pipe((0,M.U)((j,K)=>F(U,j,V,K))))):G=>G.lift(new H(J))}class H{constructor(F){this.project=F}call(F,G){return G.subscribe(new q(F,this.project))}}class q extends T.Ds{constructor(F,G){super(F),this.project=G,this.index=0}_next(F){let G;const U=this.index++;try{G=this.project(F,U)}catch(V){return void this.destination.error(V)}this._innerSub(G)}_innerSub(F){const G=this.innerSubscription;G&&G.unsubscribe();const U=new T.IY(this),V=this.destination;V.add(U),this.innerSubscription=(0,T.ft)(F,U),this.innerSubscription!==U&&V.add(this.innerSubscription)}_complete(){const{innerSubscription:F}=this;(!F||F.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(F){this.destination.next(F)}}},2986:(f,y,_)=>{"use strict";_.d(y,{q:()=>Y});var M=_(3489),S=_(4231),T=_(8896);function Y(J){return F=>0===J?(0,T.c)():F.lift(new H(J))}class H{constructor(F){if(this.total=F,this.total<0)throw new S.W}call(F,G){return G.subscribe(new q(F,this.total))}}class q extends M.L{constructor(F,G){super(F),this.total=G,this.count=0}_next(F){const G=this.total,U=++this.count;U<=G&&(this.destination.next(F),U===G&&(this.destination.complete(),this.unsubscribe()))}}},2821:(f,y,_)=>{"use strict";_.d(y,{h:()=>Y});var M=_(3489),S=_(4231),T=_(8896);function Y(J){return function(G){return 0===J?(0,T.c)():G.lift(new H(J))}}class H{constructor(F){if(this.total=F,this.total<0)throw new S.W}call(F,G){return G.subscribe(new q(F,this.total))}}class q extends M.L{constructor(F,G){super(F),this.total=G,this.ring=new Array,this.count=0}_next(F){const G=this.ring,U=this.total,V=this.count++;G.length<U?G.push(F):G[V%U]=F}_complete(){const F=this.destination;let G=this.count;if(G>0){const U=this.count>=this.total?this.total:this.count,V=this.ring;for(let j=0;j<U;j++){const K=G++%U;F.next(V[K])}}F.complete()}}},7625:(f,y,_)=>{"use strict";_.d(y,{R:()=>S});var M=_(1177);function S(H){return q=>q.lift(new T(H))}class T{constructor(q){this.notifier=q}call(q,J){const F=new Y(q),G=(0,M.ft)(this.notifier,new M.IY(F));return G&&!F.seenValue?(F.add(G),J.subscribe(F)):F}}class Y extends M.Ds{constructor(q){super(q),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}},4290:(f,y,_)=>{"use strict";_.d(y,{o:()=>S});var M=_(3489);function S(H,q=!1){return J=>J.lift(new T(H,q))}class T{constructor(q,J){this.predicate=q,this.inclusive=J}call(q,J){return J.subscribe(new Y(q,this.predicate,this.inclusive))}}class Y extends M.L{constructor(q,J,F){super(q),this.predicate=J,this.inclusive=F,this.index=0}_next(q){const J=this.destination;let F;try{F=this.predicate(q,this.index++)}catch(G){return void J.error(G)}this.nextOrComplete(q,F)}nextOrComplete(q,J){const F=this.destination;Boolean(J)?F.next(q):(this.inclusive&&F.next(q),F.complete())}}},2994:(f,y,_)=>{"use strict";_.d(y,{b:()=>Y});var M=_(3489),S=_(7876),T=_(7043);function Y(J,F,G){return function(V){return V.lift(new H(J,F,G))}}class H{constructor(F,G,U){this.nextOrObserver=F,this.error=G,this.complete=U}call(F,G){return G.subscribe(new q(F,this.nextOrObserver,this.error,this.complete))}}class q extends M.L{constructor(F,G,U,V){super(F),this._tapNext=S.Z,this._tapError=S.Z,this._tapComplete=S.Z,this._tapError=U||S.Z,this._tapComplete=V||S.Z,(0,T.m)(G)?(this._context=this,this._tapNext=G):G&&(this._context=G,this._tapNext=G.next||S.Z,this._tapError=G.error||S.Z,this._tapComplete=G.complete||S.Z)}_next(F){try{this._tapNext.call(this._context,F)}catch(G){return void this.destination.error(G)}this.destination.next(F)}_error(F){try{this._tapError.call(this._context,F)}catch(G){return void this.destination.error(G)}this.destination.error(F)}_complete(){try{this._tapComplete.call(this._context)}catch(F){return void this.destination.error(F)}return this.destination.complete()}}},4907:(f,y,_)=>{"use strict";_.d(y,{T:()=>T});var M=_(4450),S=_(3489);function T(J=q){return F=>F.lift(new Y(J))}class Y{constructor(F){this.errorFactory=F}call(F,G){return G.subscribe(new H(F,this.errorFactory))}}class H extends S.L{constructor(F,G){super(F),this.errorFactory=G,this.hasValue=!1}_next(F){this.hasValue=!0,this.destination.next(F)}_complete(){if(this.hasValue)return this.destination.complete();{let F;try{F=this.errorFactory()}catch(G){F=G}this.destination.error(F)}}}function q(){return new M.K}},864:(f,y,_)=>{"use strict";_.d(y,{q:()=>T});var M=_(8077);function S(Y,H,q){return 0===q?[H]:(Y.push(H),Y)}function T(){return(0,M.u)(S,[])}},7168:(f,y,_)=>{"use strict";_.d(y,{M:()=>T});var M=_(826),S=_(448);function T(...q){return J=>{let F;return"function"==typeof q[q.length-1]&&(F=q.pop()),J.lift(new Y(q,F))}}class Y{constructor(J,F){this.observables=J,this.project=F}call(J,F){return F.subscribe(new H(J,this.observables,this.project))}}class H extends M.L{constructor(J,F,G){super(J),this.observables=F,this.project=G,this.toRespond=[];const U=F.length;this.values=new Array(U);for(let V=0;V<U;V++)this.toRespond.push(V);for(let V=0;V<U;V++)this.add((0,S.D)(this,F[V],void 0,V))}notifyNext(J,F,G){this.values[G]=F;const U=this.toRespond;if(U.length>0){const V=U.indexOf(G);-1!==V&&U.splice(V,1)}}notifyComplete(){}_next(J){if(0===this.toRespond.length){const F=[J,...this.values];this.project?this._tryProject(F):this.destination.next(F)}}_tryProject(J){let F;try{F=this.project.apply(this,J)}catch(G){return void this.destination.error(G)}this.destination.next(F)}}},6454:(f,y,_)=>{"use strict";_.d(y,{r:()=>T});var M=_(4202),S=_(4096);function T(Y,H){return new M.y(q=>{const J=new S.w;let F=0;return J.add(H.schedule(function(){F!==Y.length?(q.next(Y[F++]),q.closed||J.add(this.schedule())):q.complete()})),J})}},3998:(f,y,_)=>{"use strict";_.d(y,{x:()=>K});var M=_(4202),S=_(4096),T=_(3821),q=_(6454),J=_(5430),U=_(8955),V=_(8515);function K(z,ee){if(null!=z){if(function G(z){return z&&"function"==typeof z[T.L]}(z))return function Y(z,ee){return new M.y(de=>{const pe=new S.w;return pe.add(ee.schedule(()=>{const Ee=z[T.L]();pe.add(Ee.subscribe({next(je){pe.add(ee.schedule(()=>de.next(je)))},error(je){pe.add(ee.schedule(()=>de.error(je)))},complete(){pe.add(ee.schedule(()=>de.complete()))}}))})),pe})}(z,ee);if((0,U.t)(z))return function H(z,ee){return new M.y(de=>{const pe=new S.w;return pe.add(ee.schedule(()=>z.then(Ee=>{pe.add(ee.schedule(()=>{de.next(Ee),pe.add(ee.schedule(()=>de.complete()))}))},Ee=>{pe.add(ee.schedule(()=>de.error(Ee)))}))),pe})}(z,ee);if((0,V.z)(z))return(0,q.r)(z,ee);if(function j(z){return z&&"function"==typeof z[J.hZ]}(z)||"string"==typeof z)return function F(z,ee){if(!z)throw new Error("Iterable cannot be null");return new M.y(de=>{const pe=new S.w;let Ee;return pe.add(()=>{Ee&&"function"==typeof Ee.return&&Ee.return()}),pe.add(ee.schedule(()=>{Ee=z[J.hZ](),pe.add(ee.schedule(function(){if(de.closed)return;let je,ct;try{const Ke=Ee.next();je=Ke.value,ct=Ke.done}catch(Ke){return void de.error(Ke)}ct?de.complete():(de.next(je),this.schedule())}))})),pe})}(z,ee)}throw new TypeError((null!==z&&typeof z||z)+" is not observable")}},6686:(f,y,_)=>{"use strict";_.d(y,{o:()=>T});var M=_(4096);class S extends M.w{constructor(H,q){super()}schedule(H,q=0){return this}}class T extends S{constructor(H,q){super(H,q),this.scheduler=H,this.work=q,this.pending=!1}schedule(H,q=0){if(this.closed)return this;this.state=H;const J=this.id,F=this.scheduler;return null!=J&&(this.id=this.recycleAsyncId(F,J,q)),this.pending=!0,this.delay=q,this.id=this.id||this.requestAsyncId(F,this.id,q),this}requestAsyncId(H,q,J=0){return setInterval(H.flush.bind(H,this),J)}recycleAsyncId(H,q,J=0){if(null!==J&&this.delay===J&&!1===this.pending)return q;clearInterval(q)}execute(H,q){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const J=this._execute(H,q);if(J)return J;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(H,q){let F,J=!1;try{this.work(H)}catch(G){J=!0,F=!!G&&G||new Error(G)}if(J)return this.unsubscribe(),F}_unsubscribe(){const H=this.id,q=this.scheduler,J=q.actions,F=J.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==F&&J.splice(F,1),null!=H&&(this.id=this.recycleAsyncId(q,H,null)),this.delay=null}}},198:(f,y,_)=>{"use strict";_.d(y,{v:()=>S});var M=_(2221);class S extends M.b{constructor(Y,H=M.b.now){super(Y,()=>S.delegate&&S.delegate!==this?S.delegate.now():H()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Y,H=0,q){return S.delegate&&S.delegate!==this?S.delegate.schedule(Y,H,q):super.schedule(Y,H,q)}flush(Y){const{actions:H}=this;if(this.active)return void H.push(Y);let q;this.active=!0;do{if(q=Y.execute(Y.state,Y.delay))break}while(Y=H.shift());if(this.active=!1,q){for(;Y=H.shift();)Y.unsubscribe();throw q}}}},8139:(f,y,_)=>{"use strict";_.d(y,{e:()=>j,E:()=>V});let M=1;const S=Promise.resolve(),T={};function Y(K){return K in T&&(delete T[K],!0)}const H={setImmediate(K){const z=M++;return T[z]=!0,S.then(()=>Y(z)&&K()),z},clearImmediate(K){Y(K)}};var J=_(6686),G=_(198);const V=new class U extends G.v{flush(z){this.active=!0,this.scheduled=void 0;const{actions:ee}=this;let de,pe=-1,Ee=ee.length;z=z||ee.shift();do{if(de=z.execute(z.state,z.delay))break}while(++pe<Ee&&(z=ee.shift()));if(this.active=!1,de){for(;++pe<Ee&&(z=ee.shift());)z.unsubscribe();throw de}}}(class F extends J.o{constructor(z,ee){super(z,ee),this.scheduler=z,this.work=ee}requestAsyncId(z,ee,de=0){return null!==de&&de>0?super.requestAsyncId(z,ee,de):(z.actions.push(this),z.scheduled||(z.scheduled=H.setImmediate(z.flush.bind(z,null))))}recycleAsyncId(z,ee,de=0){if(null!==de&&de>0||null===de&&this.delay>0)return super.recycleAsyncId(z,ee,de);0===z.actions.length&&(H.clearImmediate(ee),z.scheduled=void 0)}}),j=V},353:(f,y,_)=>{"use strict";_.d(y,{P:()=>Y,z:()=>T});var M=_(6686);const T=new(_(198).v)(M.o),Y=T},341:(f,y,_)=>{"use strict";_.d(y,{c:()=>q,N:()=>H});var M=_(6686),T=_(198);const H=new class Y extends T.v{}(class S extends M.o{constructor(F,G){super(F,G),this.scheduler=F,this.work=G}schedule(F,G=0){return G>0?super.schedule(F,G):(this.delay=G,this.state=F,this.scheduler.flush(this),this)}execute(F,G){return G>0||this.closed?super.execute(F,G):this._execute(F,G)}requestAsyncId(F,G,U=0){return null!==U&&U>0||null===U&&this.delay>0?super.requestAsyncId(F,G,U):F.flush(this)}}),q=H},5430:(f,y,_)=>{"use strict";_.d(y,{hZ:()=>S});const S=function M(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3821:(f,y,_)=>{"use strict";_.d(y,{L:()=>M});const M="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:(f,y,_)=>{"use strict";_.d(y,{b:()=>M});const M="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},4231:(f,y,_)=>{"use strict";_.d(y,{W:()=>S});const S=(()=>{function T(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return T.prototype=Object.create(Error.prototype),T})()},4450:(f,y,_)=>{"use strict";_.d(y,{K:()=>S});const S=(()=>{function T(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return T.prototype=Object.create(Error.prototype),T})()},5279:(f,y,_)=>{"use strict";_.d(y,{N:()=>S});const S=(()=>{function T(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return T.prototype=Object.create(Error.prototype),T})()},854:(f,y,_)=>{"use strict";_.d(y,{W:()=>S});const S=(()=>{function T(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return T.prototype=Object.create(Error.prototype),T})()},7964:(f,y,_)=>{"use strict";_.d(y,{B:()=>S});const S=(()=>{function T(Y){return Error.call(this),this.message=Y?`${Y.length} errors occurred during unsubscription:\n${Y.map((H,q)=>`${q+1}) ${H.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Y,this}return T.prototype=Object.create(Error.prototype),T})()},9476:(f,y,_)=>{"use strict";_.d(y,{_:()=>S});var M=_(3489);function S(T){for(;T;){const{closed:Y,destination:H,isStopped:q}=T;if(Y||q)return!1;T=H&&H instanceof M.L?H:null}return!0}},2782:(f,y,_)=>{"use strict";function M(S){setTimeout(()=>{throw S},0)}_.d(y,{z:()=>M})},5379:(f,y,_)=>{"use strict";function M(S){return S}_.d(y,{y:()=>M})},6688:(f,y,_)=>{"use strict";_.d(y,{k:()=>M});const M=Array.isArray||(S=>S&&"number"==typeof S.length)},8515:(f,y,_)=>{"use strict";_.d(y,{z:()=>M});const M=S=>S&&"number"==typeof S.length&&"function"!=typeof S},2697:(f,y,_)=>{"use strict";function M(S){return S instanceof Date&&!isNaN(+S)}_.d(y,{J:()=>M})},7043:(f,y,_)=>{"use strict";function M(S){return"function"==typeof S}_.d(y,{m:()=>M})},4241:(f,y,_)=>{"use strict";_.d(y,{k:()=>S});var M=_(6688);function S(T){return!(0,M.k)(T)&&T-parseFloat(T)+1>=0}},7830:(f,y,_)=>{"use strict";function M(S){return null!==S&&"object"==typeof S}_.d(y,{K:()=>M})},8955:(f,y,_)=>{"use strict";function M(S){return!!S&&"function"!=typeof S.subscribe&&"function"==typeof S.then}_.d(y,{t:()=>M})},2866:(f,y,_)=>{"use strict";function M(S){return S&&"function"==typeof S.schedule}_.d(y,{K:()=>M})},7876:(f,y,_)=>{"use strict";function M(){}_.d(y,{Z:()=>M})},5884:(f,y,_)=>{"use strict";function M(S,T){function Y(){return!Y.pred.apply(Y.thisArg,arguments)}return Y.pred=S,Y.thisArg=T,Y}_.d(y,{f:()=>M})},4843:(f,y,_)=>{"use strict";_.d(y,{U:()=>T,z:()=>S});var M=_(5379);function S(...Y){return T(Y)}function T(Y){return 0===Y.length?M.y:1===Y.length?Y[0]:function(q){return Y.reduce((J,F)=>F(J),q)}}},9249:(f,y,_)=>{"use strict";_.d(y,{s:()=>V});var M=_(3650),S=_(2782),Y=_(5430),q=_(3821),F=_(8515),G=_(8955),U=_(7830);const V=j=>{if(j&&"function"==typeof j[q.L])return(j=>K=>{const z=j[q.L]();if("function"!=typeof z.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return z.subscribe(K)})(j);if((0,F.z)(j))return(0,M.V)(j);if((0,G.t)(j))return(j=>K=>(j.then(z=>{K.closed||(K.next(z),K.complete())},z=>K.error(z)).then(null,S.z),K))(j);if(j&&"function"==typeof j[Y.hZ])return(j=>K=>{const z=j[Y.hZ]();for(;;){let ee;try{ee=z.next()}catch(de){return K.error(de),K}if(ee.done){K.complete();break}if(K.next(ee.value),K.closed)break}return"function"==typeof z.return&&K.add(()=>{z.return&&z.return()}),K})(j);{const z=`You provided ${(0,U.K)(j)?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(z)}}},3650:(f,y,_)=>{"use strict";_.d(y,{V:()=>M});const M=S=>T=>{for(let Y=0,H=S.length;Y<H&&!T.closed;Y++)T.next(S[Y]);T.complete()}},448:(f,y,_)=>{"use strict";_.d(y,{D:()=>H});var M=_(3489);class S extends M.L{constructor(J,F,G){super(),this.parent=J,this.outerValue=F,this.outerIndex=G,this.index=0}_next(J){this.parent.notifyNext(this.outerValue,J,this.outerIndex,this.index++,this)}_error(J){this.parent.notifyError(J,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var T=_(9249),Y=_(4202);function H(q,J,F,G,U=new S(q,F,G)){if(!U.closed)return J instanceof Y.y?J.subscribe(U):(0,T.s)(J)(U)}},8732:(f,y,_)=>{"use strict";_.r(y),_.d(y,{audit:()=>S,auditTime:()=>J,buffer:()=>F,bufferCount:()=>j,bufferTime:()=>pe,bufferToggle:()=>bt,bufferWhen:()=>Sn,catchError:()=>St.K,combineAll:()=>jn,combineLatest:()=>cn,concat:()=>Yn,concatAll:()=>li.u,concatMap:()=>Gt.b,concatMapTo:()=>qr,count:()=>Kn,debounce:()=>er,debounceTime:()=>Rs,defaultIfEmpty:()=>En.d,delay:()=>wi.g,delayWhen:()=>or,dematerialize:()=>os,distinct:()=>Ln,distinctUntilChanged:()=>ts.x,distinctUntilKeyChanged:()=>as,elementAt:()=>Jt,endWith:()=>Ta.l,every:()=>Ai,exhaust:()=>Kt,exhaustMap:()=>ri,expand:()=>Qr,filter:()=>Cs.h,finalize:()=>ml.x,find:()=>Qd,findIndex:()=>Uh,first:()=>gm.P,flatMap:()=>Gn.VS,groupBy:()=>qi.v,ignoreElements:()=>n0,isEmpty:()=>Ki,last:()=>xn.Z,map:()=>An.U,mapTo:()=>Mo.h,materialize:()=>Io,max:()=>Gp,merge:()=>Ru,mergeAll:()=>Ja.J,mergeMap:()=>Gn.zg,mergeMapTo:()=>tr,mergeScan:()=>ks,min:()=>Co,multicast:()=>As.O,observeOn:()=>vs.QV,onErrorResumeNext:()=>hd,pairwise:()=>gl,partition:()=>eh,pluck:()=>ko,publish:()=>ym,publishBehavior:()=>th,publishLast:()=>Nu,publishReplay:()=>Jl,race:()=>Po,reduce:()=>Ro.u,refCount:()=>Fu.x,repeat:()=>fa,repeatWhen:()=>jh,retry:()=>s0,retryWhen:()=>kc,sample:()=>c0,sampleTime:()=>Wp,scan:()=>u0.R,sequenceEqual:()=>w1,share:()=>wm.B,shareReplay:()=>M1,single:()=>O,skip:()=>se.T,skipLast:()=>ve,skipUntil:()=>Je,skipWhile:()=>jt,startWith:()=>Cn.O,subscribeOn:()=>po,switchAll:()=>Wi,switchMap:()=>ys.w,switchMapTo:()=>md,take:()=>Gs.q,takeLast:()=>lr.h,takeUntil:()=>Ns.R,takeWhile:()=>Nc.o,tap:()=>Ni.b,throttle:()=>zu,throttleTime:()=>Fc,throwIfEmpty:()=>co.T,timeInterval:()=>Dr,timeout:()=>Yp,timeoutWith:()=>sh,timestamp:()=>Mm,toArray:()=>Hh.q,window:()=>Ws,windowCount:()=>tc,windowTime:()=>Cm,windowToggle:()=>Ve,windowWhen:()=>Vt,withLatestFrom:()=>Hn.M,zip:()=>Wn,zipAll:()=>br});var M=_(1177);function S(Me){return function(ie){return ie.lift(new T(Me))}}class T{constructor(W){this.durationSelector=W}call(W,ie){return ie.subscribe(new Y(W,this.durationSelector))}}class Y extends M.Ds{constructor(W,ie){super(W),this.durationSelector=ie,this.hasValue=!1}_next(W){if(this.value=W,this.hasValue=!0,!this.throttled){let ie;try{const{durationSelector:gt}=this;ie=gt(W)}catch(gt){return this.destination.error(gt)}const Se=(0,M.ft)(ie,new M.IY(this));!Se||Se.closed?this.clearThrottle():this.add(this.throttled=Se)}}clearThrottle(){const{value:W,hasValue:ie,throttled:Se}=this;Se&&(this.remove(Se),this.throttled=void 0,Se.unsubscribe()),ie&&(this.value=void 0,this.hasValue=!1,this.destination.next(W))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var H=_(353),q=_(8723);function J(Me,W=H.P){return S(()=>(0,q.H)(Me,W))}function F(Me){return function(ie){return ie.lift(new G(Me))}}class G{constructor(W){this.closingNotifier=W}call(W,ie){return ie.subscribe(new U(W,this.closingNotifier))}}class U extends M.Ds{constructor(W,ie){super(W),this.buffer=[],this.add((0,M.ft)(ie,new M.IY(this)))}_next(W){this.buffer.push(W)}notifyNext(){const W=this.buffer;this.buffer=[],this.destination.next(W)}}var V=_(3489);function j(Me,W=null){return function(Se){return Se.lift(new K(Me,W))}}class K{constructor(W,ie){this.bufferSize=W,this.startBufferEvery=ie,this.subscriberClass=ie&&W!==ie?ee:z}call(W,ie){return ie.subscribe(new this.subscriberClass(W,this.bufferSize,this.startBufferEvery))}}class z extends V.L{constructor(W,ie){super(W),this.bufferSize=ie,this.buffer=[]}_next(W){const ie=this.buffer;ie.push(W),ie.length==this.bufferSize&&(this.destination.next(ie),this.buffer=[])}_complete(){const W=this.buffer;W.length>0&&this.destination.next(W),super._complete()}}class ee extends V.L{constructor(W,ie,Se){super(W),this.bufferSize=ie,this.startBufferEvery=Se,this.buffers=[],this.count=0}_next(W){const{bufferSize:ie,startBufferEvery:Se,buffers:gt,count:un}=this;this.count++,un%Se==0&&gt.push([]);for(let Un=gt.length;Un--;){const Xi=gt[Un];Xi.push(W),Xi.length===ie&&(gt.splice(Un,1),this.destination.next(Xi))}}_complete(){const{buffers:W,destination:ie}=this;for(;W.length>0;){let Se=W.shift();Se.length>0&&ie.next(Se)}super._complete()}}var de=_(2866);function pe(Me){let W=arguments.length,ie=H.P;(0,de.K)(arguments[arguments.length-1])&&(ie=arguments[arguments.length-1],W--);let Se=null;W>=2&&(Se=arguments[1]);let gt=Number.POSITIVE_INFINITY;return W>=3&&(gt=arguments[2]),function(Un){return Un.lift(new Ee(Me,Se,gt,ie))}}class Ee{constructor(W,ie,Se,gt){this.bufferTimeSpan=W,this.bufferCreationInterval=ie,this.maxBufferSize=Se,this.scheduler=gt}call(W,ie){return ie.subscribe(new ct(W,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))}}class je{constructor(){this.buffer=[]}}class ct extends V.L{constructor(W,ie,Se,gt,un){super(W),this.bufferTimeSpan=ie,this.bufferCreationInterval=Se,this.maxBufferSize=gt,this.scheduler=un,this.contexts=[];const Un=this.openContext();if(this.timespanOnly=null==Se||Se<0,this.timespanOnly)this.add(Un.closeAction=un.schedule(Ke,ie,{subscriber:this,context:Un,bufferTimeSpan:ie}));else{const ds={bufferTimeSpan:ie,bufferCreationInterval:Se,subscriber:this,scheduler:un};this.add(Un.closeAction=un.schedule(At,ie,{subscriber:this,context:Un})),this.add(un.schedule(lt,Se,ds))}}_next(W){const ie=this.contexts,Se=ie.length;let gt;for(let un=0;un<Se;un++){const Un=ie[un],Xi=Un.buffer;Xi.push(W),Xi.length==this.maxBufferSize&&(gt=Un)}gt&&this.onBufferFull(gt)}_error(W){this.contexts.length=0,super._error(W)}_complete(){const{contexts:W,destination:ie}=this;for(;W.length>0;){const Se=W.shift();ie.next(Se.buffer)}super._complete()}_unsubscribe(){this.contexts=null}onBufferFull(W){this.closeContext(W);const ie=W.closeAction;if(ie.unsubscribe(),this.remove(ie),!this.closed&&this.timespanOnly){W=this.openContext();const Se=this.bufferTimeSpan;this.add(W.closeAction=this.scheduler.schedule(Ke,Se,{subscriber:this,context:W,bufferTimeSpan:Se}))}}openContext(){const W=new je;return this.contexts.push(W),W}closeContext(W){this.destination.next(W.buffer);const ie=this.contexts;(ie?ie.indexOf(W):-1)>=0&&ie.splice(ie.indexOf(W),1)}}function Ke(Me){const W=Me.subscriber,ie=Me.context;ie&&W.closeContext(ie),W.closed||(Me.context=W.openContext(),Me.context.closeAction=this.schedule(Me,Me.bufferTimeSpan))}function lt(Me){const{bufferCreationInterval:W,bufferTimeSpan:ie,subscriber:Se,scheduler:gt}=Me,un=Se.openContext();Se.closed||(Se.add(un.closeAction=gt.schedule(At,ie,{subscriber:Se,context:un})),this.schedule(Me,W))}function At(Me){const{subscriber:W,context:ie}=Me;W.closeContext(ie)}var X=_(4096),ze=_(448),Mt=_(826);function bt(Me,W){return function(Se){return Se.lift(new Ft(Me,W))}}class Ft{constructor(W,ie){this.openings=W,this.closingSelector=ie}call(W,ie){return ie.subscribe(new dn(W,this.openings,this.closingSelector))}}class dn extends Mt.L{constructor(W,ie,Se){super(W),this.closingSelector=Se,this.contexts=[],this.add((0,ze.D)(this,ie))}_next(W){const ie=this.contexts,Se=ie.length;for(let gt=0;gt<Se;gt++)ie[gt].buffer.push(W)}_error(W){const ie=this.contexts;for(;ie.length>0;){const Se=ie.shift();Se.subscription.unsubscribe(),Se.buffer=null,Se.subscription=null}this.contexts=null,super._error(W)}_complete(){const W=this.contexts;for(;W.length>0;){const ie=W.shift();this.destination.next(ie.buffer),ie.subscription.unsubscribe(),ie.buffer=null,ie.subscription=null}this.contexts=null,super._complete()}notifyNext(W,ie){W?this.closeBuffer(W):this.openBuffer(ie)}notifyComplete(W){this.closeBuffer(W.context)}openBuffer(W){try{const Se=this.closingSelector.call(this,W);Se&&this.trySubscribe(Se)}catch(ie){this._error(ie)}}closeBuffer(W){const ie=this.contexts;if(ie&&W){const{buffer:Se,subscription:gt}=W;this.destination.next(Se),ie.splice(ie.indexOf(W),1),this.remove(gt),gt.unsubscribe()}}trySubscribe(W){const ie=this.contexts,gt=new X.w,un={buffer:[],subscription:gt};ie.push(un);const Un=(0,ze.D)(this,W,un);!Un||Un.closed?this.closeBuffer(un):(Un.context=un,this.add(Un),gt.add(Un))}}function Sn(Me){return function(W){return W.lift(new Ot(Me))}}class Ot{constructor(W){this.closingSelector=W}call(W,ie){return ie.subscribe(new Xe(W,this.closingSelector))}}class Xe extends M.Ds{constructor(W,ie){super(W),this.closingSelector=ie,this.subscribing=!1,this.openBuffer()}_next(W){this.buffer.push(W)}_complete(){const W=this.buffer;W&&this.destination.next(W),super._complete()}_unsubscribe(){this.buffer=void 0,this.subscribing=!1}notifyNext(){this.openBuffer()}notifyComplete(){this.subscribing?this.complete():this.openBuffer()}openBuffer(){let Se,{closingSubscription:W}=this;W&&(this.remove(W),W.unsubscribe()),this.buffer&&this.destination.next(this.buffer),this.buffer=[];try{const{closingSelector:gt}=this;Se=gt()}catch(gt){return this.error(gt)}W=new X.w,this.closingSubscription=W,this.add(W),this.subscribing=!0,W.add((0,M.ft)(Se,new M.IY(this))),this.subscribing=!1}}var St=_(7221),_n=_(6053);function jn(Me){return W=>W.lift(new _n.Ms(Me))}var zn=_(6688),Rn=_(3527);function cn(...Me){let W=null;return"function"==typeof Me[Me.length-1]&&(W=Me.pop()),1===Me.length&&(0,zn.k)(Me[0])&&(Me=Me[0].slice()),ie=>ie.lift.call((0,Rn.D)([ie,...Me]),new _n.Ms(W))}var Xn=_(1961);function Yn(...Me){return W=>W.lift.call((0,Xn.z)(W,...Me))}var li=_(534),Gt=_(1406);function qr(Me,W){return(0,Gt.b)(()=>Me,W)}function Kn(Me){return W=>W.lift(new bi(Me,W))}class bi{constructor(W,ie){this.predicate=W,this.source=ie}call(W,ie){return ie.subscribe(new gn(W,this.predicate,this.source))}}class gn extends V.L{constructor(W,ie,Se){super(W),this.predicate=ie,this.source=Se,this.count=0,this.index=0}_next(W){this.predicate?this._tryPredicate(W):this.count++}_tryPredicate(W){let ie;try{ie=this.predicate(W,this.index++,this.source)}catch(Se){return void this.destination.error(Se)}ie&&this.count++}_complete(){this.destination.next(this.count),this.destination.complete()}}function er(Me){return W=>W.lift(new Si(Me))}class Si{constructor(W){this.durationSelector=W}call(W,ie){return ie.subscribe(new Mr(W,this.durationSelector))}}class Mr extends M.Ds{constructor(W,ie){super(W),this.durationSelector=ie,this.hasValue=!1}_next(W){try{const ie=this.durationSelector.call(this,W);ie&&this._tryNext(W,ie)}catch(ie){this.destination.error(ie)}}_complete(){this.emitValue(),this.destination.complete()}_tryNext(W,ie){let Se=this.durationSubscription;this.value=W,this.hasValue=!0,Se&&(Se.unsubscribe(),this.remove(Se)),Se=(0,M.ft)(ie,new M.IY(this)),Se&&!Se.closed&&this.add(this.durationSubscription=Se)}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){if(this.hasValue){const W=this.value,ie=this.durationSubscription;ie&&(this.durationSubscription=void 0,ie.unsubscribe(),this.remove(ie)),this.value=void 0,this.hasValue=!1,super._next(W)}}}function Rs(Me,W=H.P){return ie=>ie.lift(new Cr(Me,W))}class Cr{constructor(W,ie){this.dueTime=W,this.scheduler=ie}call(W,ie){return ie.subscribe(new gs(W,this.dueTime,this.scheduler))}}class gs extends V.L{constructor(W,ie,Se){super(W),this.dueTime=ie,this.scheduler=Se,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(W){this.clearDebounce(),this.lastValue=W,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Zr,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:W}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(W)}}clearDebounce(){const W=this.debouncedSubscription;null!==W&&(this.remove(W),W.unsubscribe(),this.debouncedSubscription=null)}}function Zr(Me){Me.debouncedNext()}var En=_(7314),wi=_(943),Rr=_(4202);function or(Me,W){return W?ie=>new fi(ie,W).lift(new ar(Me)):ie=>ie.lift(new ar(Me))}class ar{constructor(W){this.delayDurationSelector=W}call(W,ie){return ie.subscribe(new Pr(W,this.delayDurationSelector))}}class Pr extends Mt.L{constructor(W,ie){super(W),this.delayDurationSelector=ie,this.completed=!1,this.delayNotifierSubscriptions=[],this.index=0}notifyNext(W,ie,Se,gt,un){this.destination.next(W),this.removeSubscription(un),this.tryComplete()}notifyError(W,ie){this._error(W)}notifyComplete(W){const ie=this.removeSubscription(W);ie&&this.destination.next(ie),this.tryComplete()}_next(W){const ie=this.index++;try{const Se=this.delayDurationSelector(W,ie);Se&&this.tryDelay(Se,W)}catch(Se){this.destination.error(Se)}}_complete(){this.completed=!0,this.tryComplete(),this.unsubscribe()}removeSubscription(W){W.unsubscribe();const ie=this.delayNotifierSubscriptions.indexOf(W);return-1!==ie&&this.delayNotifierSubscriptions.splice(ie,1),W.outerValue}tryDelay(W,ie){const Se=(0,ze.D)(this,W,ie);Se&&!Se.closed&&(this.destination.add(Se),this.delayNotifierSubscriptions.push(Se))}tryComplete(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()}}class fi extends Rr.y{constructor(W,ie){super(),this.source=W,this.subscriptionDelay=ie}_subscribe(W){this.subscriptionDelay.subscribe(new Vn(W,this.source))}}class Vn extends V.L{constructor(W,ie){super(),this.parent=W,this.source=ie,this.sourceSubscribed=!1}_next(W){this.subscribeToSource()}_error(W){this.unsubscribe(),this.parent.error(W)}_complete(){this.unsubscribe(),this.subscribeToSource()}subscribeToSource(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))}}function os(){return function(W){return W.lift(new ua)}}class ua{call(W,ie){return ie.subscribe(new Br(W))}}class Br extends V.L{constructor(W){super(W)}_next(W){W.observe(this.destination)}}function Ln(Me,W){return ie=>ie.lift(new mi(Me,W))}class mi{constructor(W,ie){this.keySelector=W,this.flushes=ie}call(W,ie){return ie.subscribe(new zr(W,this.keySelector,this.flushes))}}class zr extends M.Ds{constructor(W,ie,Se){super(W),this.keySelector=ie,this.values=new Set,Se&&this.add((0,M.ft)(Se,new M.IY(this)))}notifyNext(){this.values.clear()}notifyError(W){this._error(W)}_next(W){this.keySelector?this._useKeySelector(W):this._finalizeNext(W,W)}_useKeySelector(W){let ie;const{destination:Se}=this;try{ie=this.keySelector(W)}catch(gt){return void Se.error(gt)}this._finalizeNext(ie,W)}_finalizeNext(W,ie){const{values:Se}=this;Se.has(W)||(Se.add(W),this.destination.next(ie))}}var ts=_(5778);function as(Me,W){return(0,ts.x)((ie,Se)=>W?W(ie[Me],Se[Me]):ie[Me]===Se[Me])}var ls=_(4231),Cs=_(2198),co=_(4907),Gs=_(2986);function Jt(Me,W){if(Me<0)throw new ls.W;const ie=arguments.length>=2;return Se=>Se.pipe((0,Cs.h)((gt,un)=>un===Me),(0,Gs.q)(1),ie?(0,En.d)(W):(0,co.T)(()=>new ls.W))}var Ta=_(2334);function Ai(Me,W){return ie=>ie.lift(new Os(Me,W,ie))}class Os{constructor(W,ie,Se){this.predicate=W,this.thisArg=ie,this.source=Se}call(W,ie){return ie.subscribe(new Pn(W,this.predicate,this.thisArg,this.source))}}class Pn extends V.L{constructor(W,ie,Se,gt){super(W),this.predicate=ie,this.thisArg=Se,this.source=gt,this.index=0,this.thisArg=Se||this}notifyComplete(W){this.destination.next(W),this.destination.complete()}_next(W){let ie=!1;try{ie=this.predicate.call(this.thisArg,W,this.index++,this.source)}catch(Se){return void this.destination.error(Se)}ie||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Kt(){return Me=>Me.lift(new mn)}class mn{call(W,ie){return ie.subscribe(new Mn(W))}}class Mn extends M.Ds{constructor(W){super(W),this.hasCompleted=!1,this.hasSubscription=!1}_next(W){this.hasSubscription||(this.hasSubscription=!0,this.add((0,M.ft)(W,new M.IY(this))))}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}var An=_(4850);function ri(Me,W){return W?ie=>ie.pipe(ri((Se,gt)=>(0,Rn.D)(Me(Se,gt)).pipe((0,An.U)((un,Un)=>W(Se,un,gt,Un))))):ie=>ie.lift(new _r(Me))}class _r{constructor(W){this.project=W}call(W,ie){return ie.subscribe(new xi(W,this.project))}}class xi extends M.Ds{constructor(W,ie){super(W),this.project=ie,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(W){this.hasSubscription||this.tryNext(W)}tryNext(W){let ie;const Se=this.index++;try{ie=this.project(W,Se)}catch(gt){return void this.destination.error(gt)}this.hasSubscription=!0,this._innerSub(ie)}_innerSub(W){const ie=new M.IY(this),Se=this.destination;Se.add(ie);const gt=(0,M.ft)(W,ie);gt!==ie&&Se.add(gt)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(W){this.destination.next(W)}notifyError(W){this.destination.error(W)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}function Qr(Me,W=Number.POSITIVE_INFINITY,ie){return W=(W||0)<1?Number.POSITIVE_INFINITY:W,Se=>Se.lift(new si(Me,W,ie))}class si{constructor(W,ie,Se){this.project=W,this.concurrent=ie,this.scheduler=Se}call(W,ie){return ie.subscribe(new Jr(W,this.project,this.concurrent,this.scheduler))}}class Jr extends M.Ds{constructor(W,ie,Se,gt){super(W),this.project=ie,this.concurrent=Se,this.scheduler=gt,this.index=0,this.active=0,this.hasCompleted=!1,Se<Number.POSITIVE_INFINITY&&(this.buffer=[])}static dispatch(W){const{subscriber:ie,result:Se,value:gt,index:un}=W;ie.subscribeToProjection(Se,gt,un)}_next(W){const ie=this.destination;if(ie.closed)return void this._complete();const Se=this.index++;if(this.active<this.concurrent){ie.next(W);try{const{project:gt}=this,un=gt(W,Se);this.scheduler?this.destination.add(this.scheduler.schedule(Jr.dispatch,0,{subscriber:this,result:un,value:W,index:Se})):this.subscribeToProjection(un,W,Se)}catch(gt){ie.error(gt)}}else this.buffer.push(W)}subscribeToProjection(W,ie,Se){this.active++,this.destination.add((0,M.ft)(W,new M.IY(this)))}_complete(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()}notifyNext(W){this._next(W)}notifyComplete(){const W=this.buffer;this.active--,W&&W.length>0&&this._next(W.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()}}var ml=_(537);function Qd(Me,W){if("function"!=typeof Me)throw new TypeError("predicate is not a function");return ie=>ie.lift(new cs(Me,ie,!1,W))}class cs{constructor(W,ie,Se,gt){this.predicate=W,this.source=ie,this.yieldIndex=Se,this.thisArg=gt}call(W,ie){return ie.subscribe(new Zl(W,this.predicate,this.source,this.yieldIndex,this.thisArg))}}class Zl extends V.L{constructor(W,ie,Se,gt,un){super(W),this.predicate=ie,this.source=Se,this.yieldIndex=gt,this.thisArg=un,this.index=0}notifyComplete(W){const ie=this.destination;ie.next(W),ie.complete(),this.unsubscribe()}_next(W){const{predicate:ie,thisArg:Se}=this,gt=this.index++;try{ie.call(Se||this,W,gt,this.source)&&this.notifyComplete(this.yieldIndex?gt:W)}catch(un){this.destination.error(un)}}_complete(){this.notifyComplete(this.yieldIndex?-1:void 0)}}function Uh(Me,W){return ie=>ie.lift(new cs(Me,ie,!0,W))}var gm=_(7224),qi=_(4002);function n0(){return function(W){return W.lift(new vm)}}class vm{call(W,ie){return ie.subscribe(new jp(W))}}class jp extends V.L{_next(W){}}function Ki(){return Me=>Me.lift(new Hp)}class Hp{call(W,ie){return ie.subscribe(new cd(W))}}class cd extends V.L{constructor(W){super(W)}notifyComplete(W){const ie=this.destination;ie.next(W),ie.complete()}_next(W){this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}var xn=_(8127),Mo=_(7604),Ur=_(9312);function Io(){return function(W){return W.lift(new ho)}}class ho{call(W,ie){return ie.subscribe(new dd(W))}}class dd extends V.L{constructor(W){super(W)}_next(W){this.destination.next(Ur.P.createNext(W))}_error(W){const ie=this.destination;ie.next(Ur.P.createError(W)),ie.complete()}_complete(){const W=this.destination;W.next(Ur.P.createComplete()),W.complete()}}var Ro=_(8077);function Gp(Me){return(0,Ro.u)("function"==typeof Me?(ie,Se)=>Me(ie,Se)>0?ie:Se:(ie,Se)=>ie>Se?ie:Se)}var Iu=_(6787);function Ru(...Me){return W=>W.lift.call((0,Iu.T)(W,...Me))}var Ja=_(9146),Gn=_(1709);function tr(Me,W,ie=Number.POSITIVE_INFINITY){return"function"==typeof W?(0,Gn.zg)(()=>Me,W,ie):("number"==typeof W&&(ie=W),(0,Gn.zg)(()=>Me,ie))}function ks(Me,W,ie=Number.POSITIVE_INFINITY){return Se=>Se.lift(new el(Me,W,ie))}class el{constructor(W,ie,Se){this.accumulator=W,this.seed=ie,this.concurrent=Se}call(W,ie){return ie.subscribe(new Ql(W,this.accumulator,this.seed,this.concurrent))}}class Ql extends M.Ds{constructor(W,ie,Se,gt){super(W),this.accumulator=ie,this.acc=Se,this.concurrent=gt,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(W){if(this.active<this.concurrent){const ie=this.index++,Se=this.destination;let gt;try{const{accumulator:un}=this;gt=un(this.acc,W,ie)}catch(un){return Se.error(un)}this.active++,this._innerSub(gt)}else this.buffer.push(W)}_innerSub(W){const ie=new M.IY(this),Se=this.destination;Se.add(ie);const gt=(0,M.ft)(W,ie);gt!==ie&&Se.add(gt)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()}notifyNext(W){const{destination:ie}=this;this.acc=W,this.hasValue=!0,ie.next(W)}notifyComplete(){const W=this.buffer;this.active--,W.length>0?this._next(W.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())}}function Co(Me){return(0,Ro.u)("function"==typeof Me?(ie,Se)=>Me(ie,Se)<0?ie:Se:(ie,Se)=>ie<Se?ie:Se)}var As=_(2536),vs=_(7770);function hd(...Me){return 1===Me.length&&(0,zn.k)(Me[0])&&(Me=Me[0]),W=>W.lift(new nr(Me))}class nr{constructor(W){this.nextSources=W}call(W,ie){return ie.subscribe(new Vh(W,this.nextSources))}}class Vh extends M.Ds{constructor(W,ie){super(W),this.destination=W,this.nextSources=ie}notifyError(){this.subscribeToNextSource()}notifyComplete(){this.subscribeToNextSource()}_error(W){this.subscribeToNextSource(),this.unsubscribe()}_complete(){this.subscribeToNextSource(),this.unsubscribe()}subscribeToNextSource(){const W=this.nextSources.shift();if(W){const ie=new M.IY(this),Se=this.destination;Se.add(ie);const gt=(0,M.ft)(W,ie);gt!==ie&&Se.add(gt)}else this.destination.complete()}}function gl(){return Me=>Me.lift(new Jd)}class Jd{call(W,ie){return ie.subscribe(new ud(W))}}class ud extends V.L{constructor(W){super(W),this.hasPrev=!1}_next(W){let ie;this.hasPrev?ie=[this.prev,W]:this.hasPrev=!0,this.prev=W,ie&&this.destination.next(ie)}}var _o=_(5884);function eh(Me,W){return ie=>[(0,Cs.h)(Me,W)(ie),(0,Cs.h)((0,_o.f)(Me,W))(ie)]}function ko(...Me){const W=Me.length;if(0===W)throw new Error("list of properties cannot be empty.");return ie=>(0,An.U)(function vl(Me,W){return Se=>{let gt=Se;for(let un=0;un<W;un++){const Un=gt?.[Me[un]];if(void 0===Un)return;gt=Un}return gt}}(Me,W))(ie)}var uo=_(8929);function ym(Me){return Me?(0,As.O)(()=>new uo.xQ,Me):(0,As.O)(new uo.xQ)}var Ps=_(591);function th(Me){return W=>(0,As.O)(new Ps.X(Me))(W)}var pa=_(2185);function Nu(){return Me=>(0,As.O)(new pa.c)(Me)}var nh=_(839);function Jl(Me,W,ie,Se){ie&&"function"!=typeof ie&&(Se=ie);const gt="function"==typeof ie?ie:void 0,un=new nh.t(Me,W,Se);return Un=>(0,As.O)(()=>un,gt)(Un)}var pd=_(1946);function Po(...Me){return function(ie){return 1===Me.length&&(0,zn.k)(Me[0])&&(Me=Me[0]),ie.lift.call((0,pd.S3)(ie,...Me))}}var r0=_(8896);function fa(Me=-1){return W=>0===Me?(0,r0.c)():W.lift(new tl(Me<0?-1:Me-1,W))}class tl{constructor(W,ie){this.count=W,this.source=ie}call(W,ie){return ie.subscribe(new Lu(W,this.count,this.source))}}class Lu extends V.L{constructor(W,ie,Se){super(W),this.count=ie,this.source=Se}complete(){if(!this.isStopped){const{source:W,count:ie}=this;if(0===ie)return super.complete();ie>-1&&(this.count=ie-1),W.subscribe(this._unsubscribeAndRecycle())}}}function jh(Me){return W=>W.lift(new ec(Me))}class ec{constructor(W){this.notifier=W}call(W,ie){return ie.subscribe(new Da(W,this.notifier,ie))}}class Da extends M.Ds{constructor(W,ie,Se){super(W),this.notifier=ie,this.source=Se,this.sourceIsBeingSubscribedTo=!0}notifyNext(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)}notifyComplete(){if(!1===this.sourceIsBeingSubscribedTo)return super.complete()}complete(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return super.complete();this._unsubscribeAndRecycle(),this.notifications.next(void 0)}}_unsubscribe(){const{notifications:W,retriesSubscription:ie}=this;W&&(W.unsubscribe(),this.notifications=void 0),ie&&(ie.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}_unsubscribeAndRecycle(){const{_unsubscribe:W}=this;return this._unsubscribe=null,super._unsubscribeAndRecycle(),this._unsubscribe=W,this}subscribeToRetries(){let W;this.notifications=new uo.xQ;try{const{notifier:ie}=this;W=ie(this.notifications)}catch{return super.complete()}this.retries=W,this.retriesSubscription=(0,M.ft)(W,new M.IY(this))}}function s0(Me=-1){return W=>W.lift(new o0(Me,W))}class o0{constructor(W,ie){this.count=W,this.source=ie}call(W,ie){return ie.subscribe(new a0(W,this.count,this.source))}}class a0 extends V.L{constructor(W,ie,Se){super(W),this.count=ie,this.source=Se}error(W){if(!this.isStopped){const{source:ie,count:Se}=this;if(0===Se)return super.error(W);Se>-1&&(this.count=Se-1),ie.subscribe(this._unsubscribeAndRecycle())}}}function kc(Me){return W=>W.lift(new x1(Me,W))}class x1{constructor(W,ie){this.notifier=W,this.source=ie}call(W,ie){return ie.subscribe(new l0(W,this.notifier,this.source))}}class l0 extends M.Ds{constructor(W,ie,Se){super(W),this.notifier=ie,this.source=Se}error(W){if(!this.isStopped){let ie=this.errors,Se=this.retries,gt=this.retriesSubscription;if(Se)this.errors=void 0,this.retriesSubscription=void 0;else{ie=new uo.xQ;try{const{notifier:un}=this;Se=un(ie)}catch(un){return super.error(un)}gt=(0,M.ft)(Se,new M.IY(this))}this._unsubscribeAndRecycle(),this.errors=ie,this.retries=Se,this.retriesSubscription=gt,ie.next(W)}}_unsubscribe(){const{errors:W,retriesSubscription:ie}=this;W&&(W.unsubscribe(),this.errors=void 0),ie&&(ie.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}notifyNext(){const{_unsubscribe:W}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=W,this.source.subscribe(this)}}var Fu=_(4327);function c0(Me){return W=>W.lift(new _m(Me))}class _m{constructor(W){this.notifier=W}call(W,ie){const Se=new d0(W),gt=ie.subscribe(Se);return gt.add((0,M.ft)(this.notifier,new M.IY(Se))),gt}}class d0 extends M.Ds{constructor(){super(...arguments),this.hasValue=!1}_next(W){this.value=W,this.hasValue=!0}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}function Wp(Me,W=H.P){return ie=>ie.lift(new ih(Me,W))}class ih{constructor(W,ie){this.period=W,this.scheduler=ie}call(W,ie){return ie.subscribe(new h0(W,this.period,this.scheduler))}}class h0 extends V.L{constructor(W,ie,Se){super(W),this.period=ie,this.scheduler=Se,this.hasValue=!1,this.add(Se.schedule(bm,ie,{subscriber:this,period:ie}))}_next(W){this.lastValue=W,this.hasValue=!0}notifyNext(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}function bm(Me){let{subscriber:W,period:ie}=Me;W.notifyNext(),this.schedule(Me,ie)}var u0=_(2014);function w1(Me,W){return ie=>ie.lift(new xm(Me,W))}class xm{constructor(W,ie){this.compareTo=W,this.comparator=ie}call(W,ie){return ie.subscribe(new rh(W,this.compareTo,this.comparator))}}class rh extends V.L{constructor(W,ie,Se){super(W),this.compareTo=ie,this.comparator=Se,this._a=[],this._b=[],this._oneComplete=!1,this.destination.add(ie.subscribe(new p0(W,this)))}_next(W){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(W),this.checkValues())}_complete(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()}checkValues(){const{_a:W,_b:ie,comparator:Se}=this;for(;W.length>0&&ie.length>0;){let gt=W.shift(),un=ie.shift(),Un=!1;try{Un=Se?Se(gt,un):gt===un}catch(Xi){this.destination.error(Xi)}Un||this.emit(!1)}}emit(W){const{destination:ie}=this;ie.next(W),ie.complete()}nextB(W){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(W),this.checkValues())}completeB(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0}}class p0 extends V.L{constructor(W,ie){super(W),this.parent=ie}_next(W){this.parent.nextB(W)}_error(W){this.parent.error(W),this.unsubscribe()}_complete(){this.parent.completeB(),this.unsubscribe()}}var wm=_(8117);function M1(Me,W,ie){let Se;return Se=Me&&"object"==typeof Me?Me:{bufferSize:Me,windowTime:W,refCount:!1,scheduler:ie},gt=>gt.lift(function fd({bufferSize:Me=Number.POSITIVE_INFINITY,windowTime:W=Number.POSITIVE_INFINITY,refCount:ie,scheduler:Se}){let gt,Un,un=0,Xi=!1,ds=!1;return function(qs){let nc;un++,!gt||Xi?(Xi=!1,gt=new nh.t(Me,W,Se),nc=gt.subscribe(this),Un=qs.subscribe({next(Kp){gt.next(Kp)},error(Kp){Xi=!0,gt.error(Kp)},complete(){ds=!0,Un=void 0,gt.complete()}}),ds&&(Un=void 0)):nc=gt.subscribe(this),this.add(()=>{un--,nc.unsubscribe(),nc=void 0,Un&&!ds&&ie&&0===un&&(Un.unsubscribe(),Un=void 0,gt=void 0)})}}(Se))}var Bu=_(4450);function O(Me){return W=>W.lift(new B(Me,W))}class B{constructor(W,ie){this.predicate=W,this.source=ie}call(W,ie){return ie.subscribe(new te(W,this.predicate,this.source))}}class te extends V.L{constructor(W,ie,Se){super(W),this.predicate=ie,this.source=Se,this.seenValue=!1,this.index=0}applySingleValue(W){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=W)}_next(W){const ie=this.index++;this.predicate?this.tryNext(W,ie):this.applySingleValue(W)}tryNext(W,ie){try{this.predicate(W,ie,this.source)&&this.applySingleValue(W)}catch(Se){this.destination.error(Se)}}_complete(){const W=this.destination;this.index>0?(W.next(this.seenValue?this.singleValue:void 0),W.complete()):W.error(new Bu.K)}}var se=_(1307);function ve(Me){return W=>W.lift(new ye(Me))}class ye{constructor(W){if(this._skipCount=W,this._skipCount<0)throw new ls.W}call(W,ie){return ie.subscribe(0===this._skipCount?new V.L(W):new we(W,this._skipCount))}}class we extends V.L{constructor(W,ie){super(W),this._skipCount=ie,this._count=0,this._ring=new Array(ie)}_next(W){const ie=this._skipCount,Se=this._count++;if(Se<ie)this._ring[Se]=W;else{const gt=Se%ie,un=this._ring,Un=un[gt];un[gt]=W,this.destination.next(Un)}}}function Je(Me){return W=>W.lift(new Ye(Me))}class Ye{constructor(W){this.notifier=W}call(W,ie){return ie.subscribe(new ht(W,this.notifier))}}class ht extends M.Ds{constructor(W,ie){super(W),this.hasValue=!1;const Se=new M.IY(this);this.add(Se),this.innerSubscription=Se;const gt=(0,M.ft)(ie,Se);gt!==Se&&(this.add(gt),this.innerSubscription=gt)}_next(W){this.hasValue&&super._next(W)}notifyNext(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()}notifyComplete(){}}function jt(Me){return W=>W.lift(new nn(Me))}class nn{constructor(W){this.predicate=W}call(W,ie){return ie.subscribe(new xt(W,this.predicate))}}class xt extends V.L{constructor(W,ie){super(W),this.predicate=ie,this.skipping=!0,this.index=0}_next(W){const ie=this.destination;this.skipping&&this.tryCallPredicate(W),this.skipping||ie.next(W)}tryCallPredicate(W){try{const ie=this.predicate(W,this.index++);this.skipping=Boolean(ie)}catch(ie){this.destination.error(ie)}}}var Cn=_(1059),Mi=_(8139),Ti=_(4241);class Gi extends Rr.y{constructor(W,ie=0,Se=Mi.e){super(),this.source=W,this.delayTime=ie,this.scheduler=Se,(!(0,Ti.k)(ie)||ie<0)&&(this.delayTime=0),(!Se||"function"!=typeof Se.schedule)&&(this.scheduler=Mi.e)}static create(W,ie=0,Se=Mi.e){return new Gi(W,ie,Se)}static dispatch(W){const{source:ie,subscriber:Se}=W;return this.add(ie.subscribe(Se))}_subscribe(W){return this.scheduler.schedule(Gi.dispatch,this.delayTime,{source:this.source,subscriber:W})}}function po(Me,W=0){return function(Se){return Se.lift(new Ss(Me,W))}}class Ss{constructor(W,ie){this.scheduler=W,this.delay=ie}call(W,ie){return new Gi(ie,this.delay,this.scheduler).subscribe(W)}}var ys=_(7545),yl=_(5379);function Wi(){return(0,ys.w)(yl.y)}function md(Me,W){return W?(0,ys.w)(()=>Me,W):(0,ys.w)(()=>Me)}var lr=_(2821),Ns=_(7625),Nc=_(4290),Ni=_(2994);const Ia={leading:!0,trailing:!1};function zu(Me,W=Ia){return ie=>ie.lift(new Al(Me,!!W.leading,!!W.trailing))}class Al{constructor(W,ie,Se){this.durationSelector=W,this.leading=ie,this.trailing=Se}call(W,ie){return ie.subscribe(new Lc(W,this.durationSelector,this.leading,this.trailing))}}class Lc extends M.Ds{constructor(W,ie,Se,gt){super(W),this.destination=W,this.durationSelector=ie,this._leading=Se,this._trailing=gt,this._hasValue=!1}_next(W){this._hasValue=!0,this._sendValue=W,this._throttled||(this._leading?this.send():this.throttle(W))}send(){const{_hasValue:W,_sendValue:ie}=this;W&&(this.destination.next(ie),this.throttle(ie)),this._hasValue=!1,this._sendValue=void 0}throttle(W){const ie=this.tryDurationSelector(W);ie&&this.add(this._throttled=(0,M.ft)(ie,new M.IY(this)))}tryDurationSelector(W){try{return this.durationSelector(W)}catch(ie){return this.destination.error(ie),null}}throttlingDone(){const{_throttled:W,_trailing:ie}=this;W&&W.unsubscribe(),this._throttled=void 0,ie&&this.send()}notifyNext(){this.throttlingDone()}notifyComplete(){this.throttlingDone()}}function Fc(Me,W=H.P,ie=Ia){return Se=>Se.lift(new ma(Me,W,ie.leading,ie.trailing))}class ma{constructor(W,ie,Se,gt){this.duration=W,this.scheduler=ie,this.leading=Se,this.trailing=gt}call(W,ie){return ie.subscribe(new qp(W,this.duration,this.scheduler,this.leading,this.trailing))}}class qp extends V.L{constructor(W,ie,Se,gt,un){super(W),this.duration=ie,this.scheduler=Se,this.leading=gt,this.trailing=un,this._hasTrailingValue=!1,this._trailingValue=null}_next(W){this.throttled?this.trailing&&(this._trailingValue=W,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Tl,this.duration,{subscriber:this})),this.leading?this.destination.next(W):this.trailing&&(this._trailingValue=W,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const W=this.throttled;W&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),W.unsubscribe(),this.remove(W),this.throttled=null)}}function Tl(Me){const{subscriber:W}=Me;W.clearThrottle()}var ln=_(8514);function Dr(Me=H.P){return W=>(0,ln.P)(()=>W.pipe((0,u0.R)(({current:ie},Se)=>({value:Se,current:Me.now(),last:ie}),{current:Me.now(),value:void 0,last:void 0}),(0,An.U)(({current:ie,last:Se,value:gt})=>new Zn(gt,ie-Se))))}class Zn{constructor(W,ie){this.value=W,this.interval=ie}}var ti=_(854),ji=_(2697);function sh(Me,W,ie=H.P){return Se=>{let gt=(0,ji.J)(Me),un=gt?+Me-ie.now():Math.abs(Me);return Se.lift(new qo(un,gt,W,ie))}}class qo{constructor(W,ie,Se,gt){this.waitFor=W,this.absoluteTimeout=ie,this.withObservable=Se,this.scheduler=gt}call(W,ie){return ie.subscribe(new no(W,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class no extends M.Ds{constructor(W,ie,Se,gt,un){super(W),this.absoluteTimeout=ie,this.waitFor=Se,this.withObservable=gt,this.scheduler=un,this.scheduleTimeout()}static dispatchTimeout(W){const{withObservable:ie}=W;W._unsubscribeAndRecycle(),W.add((0,M.ft)(ie,new M.IY(W)))}scheduleTimeout(){const{action:W}=this;W?this.action=W.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(no.dispatchTimeout,this.waitFor,this))}_next(W){this.absoluteTimeout||this.scheduleTimeout(),super._next(W)}_unsubscribe(){this.action=void 0,this.scheduler=null,this.withObservable=null}}var Xp=_(1737);function Yp(Me,W=H.P){return sh(Me,(0,Xp._)(new ti.W),W)}function Mm(Me=H.P){return(0,An.U)(W=>new oh(W,Me.now()))}class oh{constructor(W,ie){this.value=W,this.timestamp=ie}}var Hh=_(864);function Ws(Me){return function(ie){return ie.lift(new Dl(Me))}}class Dl{constructor(W){this.windowBoundaries=W}call(W,ie){const Se=new ah(W),gt=ie.subscribe(Se);return gt.closed||Se.add((0,M.ft)(this.windowBoundaries,new M.IY(Se))),gt}}class ah extends M.Ds{constructor(W){super(W),this.window=new uo.xQ,W.next(this.window)}notifyNext(){this.openWindow()}notifyError(W){this._error(W)}notifyComplete(){this._complete()}_next(W){this.window.next(W)}_error(W){this.window.error(W),this.destination.error(W)}_complete(){this.window.complete(),this.destination.complete()}_unsubscribe(){this.window=null}openWindow(){const W=this.window;W&&W.complete();const ie=this.destination,Se=this.window=new uo.xQ;ie.next(Se)}}function tc(Me,W=0){return function(Se){return Se.lift(new Ra(Me,W))}}class Ra{constructor(W,ie){this.windowSize=W,this.startWindowEvery=ie}call(W,ie){return ie.subscribe(new Uu(W,this.windowSize,this.startWindowEvery))}}class Uu extends V.L{constructor(W,ie,Se){super(W),this.destination=W,this.windowSize=ie,this.startWindowEvery=Se,this.windows=[new uo.xQ],this.count=0,W.next(this.windows[0])}_next(W){const ie=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,Se=this.destination,gt=this.windowSize,un=this.windows,Un=un.length;for(let ds=0;ds<Un&&!this.closed;ds++)un[ds].next(W);const Xi=this.count-gt+1;if(Xi>=0&&Xi%ie==0&&!this.closed&&un.shift().complete(),++this.count%ie==0&&!this.closed){const ds=new uo.xQ;un.push(ds),Se.next(ds)}}_error(W){const ie=this.windows;if(ie)for(;ie.length>0&&!this.closed;)ie.shift().error(W);this.destination.error(W)}_complete(){const W=this.windows;if(W)for(;W.length>0&&!this.closed;)W.shift().complete();this.destination.complete()}_unsubscribe(){this.count=0,this.windows=null}}function Cm(Me){let W=H.P,ie=null,Se=Number.POSITIVE_INFINITY;return(0,de.K)(arguments[3])&&(W=arguments[3]),(0,de.K)(arguments[2])?W=arguments[2]:(0,Ti.k)(arguments[2])&&(Se=Number(arguments[2])),(0,de.K)(arguments[1])?W=arguments[1]:(0,Ti.k)(arguments[1])&&(ie=Number(arguments[1])),function(un){return un.lift(new Vu(Me,ie,Se,W))}}class Vu{constructor(W,ie,Se,gt){this.windowTimeSpan=W,this.windowCreationInterval=ie,this.maxWindowSize=Se,this.scheduler=gt}call(W,ie){return ie.subscribe(new lh(W,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))}}class $p extends uo.xQ{constructor(){super(...arguments),this._numberOfNextedValues=0}next(W){this._numberOfNextedValues++,super.next(W)}get numberOfNextedValues(){return this._numberOfNextedValues}}class lh extends V.L{constructor(W,ie,Se,gt,un){super(W),this.destination=W,this.windowTimeSpan=ie,this.windowCreationInterval=Se,this.maxWindowSize=gt,this.scheduler=un,this.windows=[];const Un=this.openWindow();if(null!==Se&&Se>=0){const ds={windowTimeSpan:ie,windowCreationInterval:Se,subscriber:this,scheduler:un};this.add(un.schedule(Wh,ie,{subscriber:this,window:Un,context:null})),this.add(un.schedule(ju,Se,ds))}else this.add(un.schedule(Gh,ie,{subscriber:this,window:Un,windowTimeSpan:ie}))}_next(W){const ie=this.windows,Se=ie.length;for(let gt=0;gt<Se;gt++){const un=ie[gt];un.closed||(un.next(W),un.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(un))}}_error(W){const ie=this.windows;for(;ie.length>0;)ie.shift().error(W);this.destination.error(W)}_complete(){const W=this.windows;for(;W.length>0;){const ie=W.shift();ie.closed||ie.complete()}this.destination.complete()}openWindow(){const W=new $p;return this.windows.push(W),this.destination.next(W),W}closeWindow(W){W.complete();const ie=this.windows;ie.splice(ie.indexOf(W),1)}}function Gh(Me){const{subscriber:W,windowTimeSpan:ie,window:Se}=Me;Se&&W.closeWindow(Se),Me.window=W.openWindow(),this.schedule(Me,ie)}function ju(Me){const{windowTimeSpan:W,subscriber:ie,scheduler:Se,windowCreationInterval:gt}=Me,un=ie.openWindow();let Xi={action:this,subscription:null};Xi.subscription=Se.schedule(Wh,W,{subscriber:ie,window:un,context:Xi}),this.add(Xi.subscription),this.schedule(Me,gt)}function Wh(Me){const{subscriber:W,window:ie,context:Se}=Me;Se&&Se.action&&Se.subscription&&Se.action.remove(Se.subscription),W.closeWindow(ie)}function Ve(Me,W){return ie=>ie.lift(new dt(Me,W))}class dt{constructor(W,ie){this.openings=W,this.closingSelector=ie}call(W,ie){return ie.subscribe(new Et(W,this.openings,this.closingSelector))}}class Et extends Mt.L{constructor(W,ie,Se){super(W),this.openings=ie,this.closingSelector=Se,this.contexts=[],this.add(this.openSubscription=(0,ze.D)(this,ie,ie))}_next(W){const{contexts:ie}=this;if(ie){const Se=ie.length;for(let gt=0;gt<Se;gt++)ie[gt].window.next(W)}}_error(W){const{contexts:ie}=this;if(this.contexts=null,ie){const Se=ie.length;let gt=-1;for(;++gt<Se;){const un=ie[gt];un.window.error(W),un.subscription.unsubscribe()}}super._error(W)}_complete(){const{contexts:W}=this;if(this.contexts=null,W){const ie=W.length;let Se=-1;for(;++Se<ie;){const gt=W[Se];gt.window.complete(),gt.subscription.unsubscribe()}}super._complete()}_unsubscribe(){const{contexts:W}=this;if(this.contexts=null,W){const ie=W.length;let Se=-1;for(;++Se<ie;){const gt=W[Se];gt.window.unsubscribe(),gt.subscription.unsubscribe()}}}notifyNext(W,ie,Se,gt,un){if(W===this.openings){let Un;try{const{closingSelector:nc}=this;Un=nc(ie)}catch(nc){return this.error(nc)}const Xi=new uo.xQ,ds=new X.w,Xo={window:Xi,subscription:ds};this.contexts.push(Xo);const qs=(0,ze.D)(this,Un,Xo);qs.closed?this.closeWindow(this.contexts.length-1):(qs.context=Xo,ds.add(qs)),this.destination.next(Xi)}else this.closeWindow(this.contexts.indexOf(W))}notifyError(W){this.error(W)}notifyComplete(W){W!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(W.context))}closeWindow(W){if(-1===W)return;const{contexts:ie}=this,Se=ie[W],{window:gt,subscription:un}=Se;ie.splice(W,1),gt.complete(),un.unsubscribe()}}function Vt(Me){return function(ie){return ie.lift(new tn(Me))}}class tn{constructor(W){this.closingSelector=W}call(W,ie){return ie.subscribe(new kn(W,this.closingSelector))}}class kn extends Mt.L{constructor(W,ie){super(W),this.destination=W,this.closingSelector=ie,this.openWindow()}notifyNext(W,ie,Se,gt,un){this.openWindow(un)}notifyError(W){this._error(W)}notifyComplete(W){this.openWindow(W)}_next(W){this.window.next(W)}_error(W){this.window.error(W),this.destination.error(W),this.unsubscribeClosingNotification()}_complete(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()}unsubscribeClosingNotification(){this.closingNotification&&this.closingNotification.unsubscribe()}openWindow(W=null){W&&(this.remove(W),W.unsubscribe());const ie=this.window;ie&&ie.complete();const Se=this.window=new uo.xQ;let gt;this.destination.next(Se);try{const{closingSelector:un}=this;gt=un()}catch(un){return this.destination.error(un),void this.window.error(un)}this.add(this.closingNotification=(0,ze.D)(this,gt))}}var Hn=_(7168),oi=_(1746);function Wn(...Me){return function(ie){return ie.lift.call((0,oi.$R)(ie,...Me))}}function br(Me){return W=>W.lift(new oi.mx(Me))}},811:(f,y,_)=>{"use strict";_(2181)},5226:function(f){f.exports=function(){"use strict";function y(Z,ne,ge){if("function"==typeof Z?Z===ne:Z.has(ne))return arguments.length<3?ne:ge;throw new TypeError("Private element is not present on this object")}function M(Z,ne){return Z.get(y(Z,ne))}function S(Z,ne,ge){(function _(Z,ne){if(ne.has(Z))throw new TypeError("Cannot initialize the same private elements twice on an object")})(Z,ne),ne.set(Z,ge)}const H={},J=Z=>new Promise(ne=>{if(!Z)return ne();const ge=window.scrollX,Ge=window.scrollY;H.restoreFocusTimeout=setTimeout(()=>{H.previousActiveElement instanceof HTMLElement?(H.previousActiveElement.focus(),H.previousActiveElement=null):document.body&&document.body.focus(),ne()},100),window.scrollTo(ge,Ge)}),F="swal2-",U=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((Z,ne)=>(Z[ne]=F+ne,Z),{}),j=["success","warning","info","question","error"].reduce((Z,ne)=>(Z[ne]=F+ne,Z),{}),K="SweetAlert2:",z=Z=>Z.charAt(0).toUpperCase()+Z.slice(1),ee=Z=>{console.warn(`${K} ${"object"==typeof Z?Z.join(" "):Z}`)},de=Z=>{console.error(`${K} ${Z}`)},pe=[],Ee=Z=>{pe.includes(Z)||(pe.push(Z),ee(Z))},je=function(Z){let ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Ee(`"${Z}" is deprecated and will be removed in the next major release.${ne?` Use "${ne}" instead.`:""}`)},ct=Z=>"function"==typeof Z?Z():Z,Ke=Z=>Z&&"function"==typeof Z.toPromise,lt=Z=>Ke(Z)?Z.toPromise():Promise.resolve(Z),At=Z=>Z&&Promise.resolve(Z)===Z,X=()=>document.body.querySelector(`.${U.container}`),ze=Z=>{const ne=X();return ne?ne.querySelector(Z):null},Mt=Z=>ze(`.${Z}`),bt=()=>Mt(U.popup),Ft=()=>Mt(U.icon),Sn=()=>Mt(U.title),Ot=()=>Mt(U["html-container"]),Xe=()=>Mt(U.image),St=()=>Mt(U["progress-steps"]),_n=()=>Mt(U["validation-message"]),jn=()=>ze(`.${U.actions} .${U.confirm}`),zn=()=>ze(`.${U.actions} .${U.cancel}`),Rn=()=>ze(`.${U.actions} .${U.deny}`),cn=()=>ze(`.${U.loader}`),Xn=()=>Mt(U.actions),Yn=()=>Mt(U.footer),li=()=>Mt(U["timer-progress-bar"]),Gt=()=>Mt(U.close),Kn=()=>{const Z=bt();if(!Z)return[];const ne=Z.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),ge=Array.from(ne).sort((qn,pr)=>{const ns=parseInt(qn.getAttribute("tabindex")||"0"),io=parseInt(pr.getAttribute("tabindex")||"0");return ns>io?1:ns<io?-1:0}),Ge=Z.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),kt=Array.from(Ge).filter(qn=>"-1"!==qn.getAttribute("tabindex"));return[...new Set(ge.concat(kt))].filter(qn=>Br(qn))},bi=()=>Mr(document.body,U.shown)&&!Mr(document.body,U["toast-shown"])&&!Mr(document.body,U["no-backdrop"]),gn=()=>{const Z=bt();return!!Z&&Mr(Z,U.toast)},Si=(Z,ne)=>{if(Z.textContent="",ne){const Ge=(new DOMParser).parseFromString(ne,"text/html"),kt=Ge.querySelector("head");kt&&Array.from(kt.childNodes).forEach(pr=>{Z.appendChild(pr)});const qn=Ge.querySelector("body");qn&&Array.from(qn.childNodes).forEach(pr=>{pr instanceof HTMLVideoElement||pr instanceof HTMLAudioElement?Z.appendChild(pr.cloneNode(!0)):Z.appendChild(pr)})}},Mr=(Z,ne)=>{if(!ne)return!1;const ge=ne.split(/\s+/);for(let Ge=0;Ge<ge.length;Ge++)if(!Z.classList.contains(ge[Ge]))return!1;return!0},Cr=(Z,ne,ge)=>{if(((Z,ne)=>{Array.from(Z.classList).forEach(ge=>{!Object.values(U).includes(ge)&&!Object.values(j).includes(ge)&&!Object.values(ne.showClass||{}).includes(ge)&&Z.classList.remove(ge)})})(Z,ne),!ne.customClass)return;const Ge=ne.customClass[ge];if(Ge){if("string"!=typeof Ge&&!Ge.forEach)return void ee(`Invalid type of customClass.${ge}! Expected string or iterable object, got "${typeof Ge}"`);wi(Z,Ge)}},gs=(Z,ne)=>{if(!ne)return null;switch(ne){case"select":case"textarea":case"file":return Z.querySelector(`.${U.popup} > .${U[ne]}`);case"checkbox":return Z.querySelector(`.${U.popup} > .${U.checkbox} input`);case"radio":return Z.querySelector(`.${U.popup} > .${U.radio} input:checked`)||Z.querySelector(`.${U.popup} > .${U.radio} input:first-child`);case"range":return Z.querySelector(`.${U.popup} > .${U.range} input`);default:return Z.querySelector(`.${U.popup} > .${U.input}`)}},Zr=Z=>{if(Z.focus(),"file"!==Z.type){const ne=Z.value;Z.value="",Z.value=ne}},En=(Z,ne,ge)=>{!Z||!ne||("string"==typeof ne&&(ne=ne.split(/\s+/).filter(Boolean)),ne.forEach(Ge=>{Array.isArray(Z)?Z.forEach(kt=>{ge?kt.classList.add(Ge):kt.classList.remove(Ge)}):ge?Z.classList.add(Ge):Z.classList.remove(Ge)}))},wi=(Z,ne)=>{En(Z,ne,!0)},Rr=(Z,ne)=>{En(Z,ne,!1)},or=(Z,ne)=>{const ge=Array.from(Z.children);for(let Ge=0;Ge<ge.length;Ge++){const kt=ge[Ge];if(kt instanceof HTMLElement&&Mr(kt,ne))return kt}},ar=(Z,ne,ge)=>{ge===`${parseInt(ge)}`&&(ge=parseInt(ge)),ge||0===parseInt(ge)?Z.style.setProperty(ne,"number"==typeof ge?`${ge}px`:ge):Z.style.removeProperty(ne)},Pr=function(Z){Z&&(Z.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex")},fi=Z=>{Z&&(Z.style.display="none")},Vn=function(Z){let ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";Z&&new MutationObserver(()=>{ua(Z,Z.innerHTML,ne)}).observe(Z,{childList:!0,subtree:!0})},os=(Z,ne,ge,Ge)=>{const kt=Z.querySelector(ne);kt&&kt.style.setProperty(ge,Ge)},ua=function(Z,ne){ne?Pr(Z,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):fi(Z)},Br=Z=>!(!Z||!(Z.offsetWidth||Z.offsetHeight||Z.getClientRects().length)),mi=Z=>Z.scrollHeight>Z.clientHeight,zr=Z=>{const ne=window.getComputedStyle(Z),ge=parseFloat(ne.getPropertyValue("animation-duration")||"0"),Ge=parseFloat(ne.getPropertyValue("transition-duration")||"0");return ge>0||Ge>0},ts=function(Z){let ne=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const ge=li();ge&&Br(ge)&&(ne&&(ge.style.transition="none",ge.style.width="100%"),setTimeout(()=>{ge.style.transition=`width ${Z/1e3}s linear`,ge.style.width="0%"},10))},Cs=`\n <div aria-labelledby="${U.title}" aria-describedby="${U["html-container"]}" class="${U.popup}" tabindex="-1">\n   <button type="button" class="${U.close}"></button>\n   <ul class="${U["progress-steps"]}"></ul>\n   <div class="${U.icon}"></div>\n   <img class="${U.image}" />\n   <h2 class="${U.title}" id="${U.title}"></h2>\n   <div class="${U["html-container"]}" id="${U["html-container"]}"></div>\n   <input class="${U.input}" id="${U.input}" />\n   <input type="file" class="${U.file}" />\n   <div class="${U.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${U.select}" id="${U.select}"></select>\n   <div class="${U.radio}"></div>\n   <label class="${U.checkbox}">\n     <input type="checkbox" id="${U.checkbox}" />\n     <span class="${U.label}"></span>\n   </label>\n   <textarea class="${U.textarea}" id="${U.textarea}"></textarea>\n   <div class="${U["validation-message"]}" id="${U["validation-message"]}"></div>\n   <div class="${U.actions}">\n     <div class="${U.loader}"></div>\n     <button type="button" class="${U.confirm}"></button>\n     <button type="button" class="${U.deny}"></button>\n     <button type="button" class="${U.cancel}"></button>\n   </div>\n   <div class="${U.footer}"></div>\n   <div class="${U["timer-progress-bar-container"]}">\n     <div class="${U["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),Gs=()=>{H.currentInstance.resetValidationMessage()},Pn=Z=>{const ne=(()=>{const Z=X();return!!Z&&(Z.remove(),Rr([document.documentElement,document.body],[U["no-backdrop"],U["toast-shown"],U["has-column"]]),!0)})();if(typeof window>"u"||typeof document>"u")return void de("SweetAlert2 requires document to initialize");const ge=document.createElement("div");ge.className=U.container,ne&&wi(ge,U["no-transition"]),Si(ge,Cs);const Ge=(Z=>"string"==typeof Z?document.querySelector(Z):Z)(Z.target);Ge.appendChild(ge),(Z=>{const ne=bt();ne.setAttribute("role",Z.toast?"alert":"dialog"),ne.setAttribute("aria-live",Z.toast?"polite":"assertive"),Z.toast||ne.setAttribute("aria-modal","true")})(Z),(Z=>{"rtl"===window.getComputedStyle(Z).direction&&wi(X(),U.rtl)})(Ge),(()=>{const Z=bt(),ne=or(Z,U.input),ge=or(Z,U.file),Ge=Z.querySelector(`.${U.range} input`),kt=Z.querySelector(`.${U.range} output`),qn=or(Z,U.select),pr=Z.querySelector(`.${U.checkbox} input`),ns=or(Z,U.textarea);ne.oninput=Gs,ge.onchange=Gs,qn.onchange=Gs,pr.onchange=Gs,ns.oninput=Gs,Ge.oninput=()=>{Gs(),kt.value=Ge.value},Ge.onchange=()=>{Gs(),kt.value=Ge.value}})()},Kt=(Z,ne)=>{Z instanceof HTMLElement?ne.appendChild(Z):"object"==typeof Z?mn(Z,ne):Z&&Si(ne,Z)},mn=(Z,ne)=>{Z.jquery?Mn(ne,Z):Si(ne,Z.toString())},Mn=(Z,ne)=>{if(Z.textContent="",0 in ne)for(let ge=0;ge in ne;ge++)Z.appendChild(ne[ge].cloneNode(!0));else Z.appendChild(ne.cloneNode(!0))},An=(Z,ne)=>{const ge=Xn(),Ge=cn();!ge||!Ge||(ne.showConfirmButton||ne.showDenyButton||ne.showCancelButton?Pr(ge):fi(ge),Cr(ge,ne,"actions"),function ri(Z,ne,ge){const Ge=jn(),kt=Rn(),qn=zn();!Ge||!kt||!qn||(xi(Ge,"confirm",ge),xi(kt,"deny",ge),xi(qn,"cancel",ge),function _r(Z,ne,ge,Ge){Ge.buttonsStyling?(wi([Z,ne,ge],U.styled),Ge.confirmButtonColor&&(Z.style.backgroundColor=Ge.confirmButtonColor,wi(Z,U["default-outline"])),Ge.denyButtonColor&&(ne.style.backgroundColor=Ge.denyButtonColor,wi(ne,U["default-outline"])),Ge.cancelButtonColor&&(ge.style.backgroundColor=Ge.cancelButtonColor,wi(ge,U["default-outline"]))):Rr([Z,ne,ge],U.styled)}(Ge,kt,qn,ge),ge.reverseButtons&&(ge.toast?(Z.insertBefore(qn,Ge),Z.insertBefore(kt,Ge)):(Z.insertBefore(qn,ne),Z.insertBefore(kt,ne),Z.insertBefore(Ge,ne))))}(ge,Ge,ne),Si(Ge,ne.loaderHtml||""),Cr(Ge,ne,"loader"))};function xi(Z,ne,ge){const Ge=z(ne);ua(Z,ge[`show${Ge}Button`],"inline-block"),Si(Z,ge[`${ne}ButtonText`]||""),Z.setAttribute("aria-label",ge[`${ne}ButtonAriaLabel`]||""),Z.className=U[ne],Cr(Z,ge,`${ne}Button`)}const si=(Z,ne)=>{const ge=X();ge&&(function Jr(Z,ne){"string"==typeof ne?Z.style.background=ne:ne||wi([document.documentElement,document.body],U["no-backdrop"])}(ge,ne.backdrop),function ml(Z,ne){ne&&(ne in U?wi(Z,U[ne]):(ee('The "position" parameter is not valid, defaulting to "center"'),wi(Z,U.center)))}(ge,ne.position),function Qd(Z,ne){ne&&wi(Z,U[`grow-${ne}`])}(ge,ne.grow),Cr(ge,ne,"container"))};var cs={innerParams:new WeakMap,domCache:new WeakMap};const Zl=["input","file","range","select","radio","checkbox","textarea"],gm=Z=>{if(!Z.input)return;if(!xn[Z.input])return void de(`Unexpected type of input! Expected ${Object.keys(xn).join(" | ")}, got "${Z.input}"`);const ne=Hp(Z.input);if(!ne)return;const ge=xn[Z.input](ne,Z);Pr(ne),Z.inputAutoFocus&&setTimeout(()=>{Zr(ge)})},n0=(Z,ne)=>{const ge=bt();if(!ge)return;const Ge=gs(ge,Z);if(Ge){(Z=>{for(let ne=0;ne<Z.attributes.length;ne++){const ge=Z.attributes[ne].name;["id","type","value","style"].includes(ge)||Z.removeAttribute(ge)}})(Ge);for(const kt in ne)Ge.setAttribute(kt,ne[kt])}},vm=Z=>{if(!Z.input)return;const ne=Hp(Z.input);ne&&Cr(ne,Z,"input")},jp=(Z,ne)=>{!Z.placeholder&&ne.inputPlaceholder&&(Z.placeholder=ne.inputPlaceholder)},Ki=(Z,ne,ge)=>{if(ge.inputLabel){const Ge=document.createElement("label"),kt=U["input-label"];Ge.setAttribute("for",Z.id),Ge.className=kt,"object"==typeof ge.customClass&&wi(Ge,ge.customClass.inputLabel),Ge.innerText=ge.inputLabel,ne.insertAdjacentElement("beforebegin",Ge)}},Hp=Z=>{const ne=bt();if(ne)return or(ne,U[Z]||U.input)},cd=(Z,ne)=>{["string","number"].includes(typeof ne)?Z.value=`${ne}`:At(ne)||ee(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof ne}"`)},xn={};xn.text=xn.email=xn.password=xn.number=xn.tel=xn.url=xn.search=xn.date=xn["datetime-local"]=xn.time=xn.week=xn.month=(Z,ne)=>(cd(Z,ne.inputValue),Ki(Z,Z,ne),jp(Z,ne),Z.type=ne.input,Z),xn.file=(Z,ne)=>(Ki(Z,Z,ne),jp(Z,ne),Z),xn.range=(Z,ne)=>{const ge=Z.querySelector("input"),Ge=Z.querySelector("output");return cd(ge,ne.inputValue),ge.type=ne.input,cd(Ge,ne.inputValue),Ki(ge,Z,ne),Z},xn.select=(Z,ne)=>{if(Z.textContent="",ne.inputPlaceholder){const ge=document.createElement("option");Si(ge,ne.inputPlaceholder),ge.value="",ge.disabled=!0,ge.selected=!0,Z.appendChild(ge)}return Ki(Z,Z,ne),Z},xn.radio=Z=>(Z.textContent="",Z),xn.checkbox=(Z,ne)=>{const ge=gs(bt(),"checkbox");ge.value="1",ge.checked=Boolean(ne.inputValue);const Ge=Z.querySelector("span");return Si(Ge,ne.inputPlaceholder||ne.inputLabel),ge},xn.textarea=(Z,ne)=>{cd(Z,ne.inputValue),jp(Z,ne),Ki(Z,Z,ne);return setTimeout(()=>{if("MutationObserver"in window){const Ge=parseInt(window.getComputedStyle(bt()).width);new MutationObserver(()=>{if(!document.body.contains(Z))return;const qn=Z.offsetWidth+(Ge=>parseInt(window.getComputedStyle(Ge).marginLeft)+parseInt(window.getComputedStyle(Ge).marginRight))(Z);qn>Ge?bt().style.width=`${qn}px`:ar(bt(),"width",ne.width)}).observe(Z,{attributes:!0,attributeFilter:["style"]})}}),Z};const Mo=(Z,ne)=>{const ge=Ot();ge&&(Vn(ge),Cr(ge,ne,"htmlContainer"),ne.html?(Kt(ne.html,ge),Pr(ge,"block")):ne.text?(ge.textContent=ne.text,Pr(ge,"block")):fi(ge),((Z,ne)=>{const ge=bt();if(!ge)return;const Ge=cs.innerParams.get(Z),kt=!Ge||ne.input!==Ge.input;Zl.forEach(qn=>{const pr=or(ge,U[qn]);pr&&(n0(qn,ne.inputAttributes),pr.className=U[qn],kt&&fi(pr))}),ne.input&&(kt&&gm(ne),vm(ne))})(Z,ne))},ho=(Z,ne)=>{for(const[ge,Ge]of Object.entries(j))ne.icon!==ge&&Rr(Z,Ge);wi(Z,ne.icon&&j[ne.icon]),Ru(Z,ne),dd(),Cr(Z,ne,"icon")},dd=()=>{const Z=bt();if(!Z)return;const ne=window.getComputedStyle(Z).getPropertyValue("background-color"),ge=Z.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let Ge=0;Ge<ge.length;Ge++)ge[Ge].style.backgroundColor=ne},Iu=(Z,ne)=>{if(!ne.icon&&!ne.iconHtml)return;let ge=Z.innerHTML,Ge="";ne.iconHtml?Ge=Ja(ne.iconHtml):"success"===ne.icon?(Ge='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',ge=ge.replace(/ style=".*?"/g,"")):"error"===ne.icon?Ge='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':ne.icon&&(Ge=Ja({question:"?",warning:"!",info:"i"}[ne.icon])),ge.trim()!==Ge.trim()&&Si(Z,Ge)},Ru=(Z,ne)=>{if(ne.iconColor){Z.style.color=ne.iconColor,Z.style.borderColor=ne.iconColor;for(const ge of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])os(Z,ge,"background-color",ne.iconColor);os(Z,".swal2-success-ring","border-color",ne.iconColor)}},Ja=Z=>`<div class="${U["icon-content"]}">${Z}</div>`,ks=(Z,ne)=>{const ge=ne.showClass||{};Z.className=`${U.popup} ${Br(Z)?ge.popup:""}`,ne.toast?(wi([document.documentElement,document.body],U["toast-shown"]),wi(Z,U.toast)):wi(Z,U.modal),Cr(Z,ne,"popup"),"string"==typeof ne.customClass&&wi(Z,ne.customClass),ne.icon&&wi(Z,U[`icon-${ne.icon}`])},Ql=Z=>{const ne=document.createElement("li");return wi(ne,U["progress-step"]),Si(ne,Z),ne},Co=Z=>{const ne=document.createElement("li");return wi(ne,U["progress-step-line"]),Z.progressStepsDistance&&ar(ne,"width",Z.progressStepsDistance),ne},vs=(Z,ne)=>{((Z,ne)=>{const ge=X(),Ge=bt();if(ge&&Ge){if(ne.toast){ar(ge,"width",ne.width),Ge.style.width="100%";const kt=cn();kt&&Ge.insertBefore(kt,Ft())}else ar(Ge,"width",ne.width);ar(Ge,"padding",ne.padding),ne.color&&(Ge.style.color=ne.color),ne.background&&(Ge.style.background=ne.background),fi(_n()),ks(Ge,ne)}})(0,ne),si(0,ne),((Z,ne)=>{const ge=St();if(!ge)return;const{progressSteps:Ge,currentProgressStep:kt}=ne;Ge&&0!==Ge.length&&void 0!==kt?(Pr(ge),ge.textContent="",kt>=Ge.length&&ee("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),Ge.forEach((qn,pr)=>{const ns=Ql(qn);if(ge.appendChild(ns),pr===kt&&wi(ns,U["active-progress-step"]),pr!==Ge.length-1){const io=Co(ne);ge.appendChild(io)}})):fi(ge)})(0,ne),((Z,ne)=>{const ge=cs.innerParams.get(Z),Ge=Ft();if(Ge){if(ge&&ne.icon===ge.icon)return Iu(Ge,ne),void ho(Ge,ne);if(!ne.icon&&!ne.iconHtml)return void fi(Ge);if(ne.icon&&-1===Object.keys(j).indexOf(ne.icon))return de(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${ne.icon}"`),void fi(Ge);Pr(Ge),Iu(Ge,ne),ho(Ge,ne),wi(Ge,ne.showClass&&ne.showClass.icon)}})(Z,ne),((Z,ne)=>{const ge=Xe();if(ge){if(!ne.imageUrl)return void fi(ge);Pr(ge,""),ge.setAttribute("src",ne.imageUrl),ge.setAttribute("alt",ne.imageAlt||""),ar(ge,"width",ne.imageWidth),ar(ge,"height",ne.imageHeight),ge.className=U.image,Cr(ge,ne,"image")}})(0,ne),((Z,ne)=>{const ge=Sn();ge&&(Vn(ge),ua(ge,ne.title||ne.titleText,"block"),ne.title&&Kt(ne.title,ge),ne.titleText&&(ge.innerText=ne.titleText),Cr(ge,ne,"title"))})(0,ne),((Z,ne)=>{const ge=Gt();ge&&(Si(ge,ne.closeButtonHtml||""),Cr(ge,ne,"closeButton"),ua(ge,ne.showCloseButton),ge.setAttribute("aria-label",ne.closeButtonAriaLabel||""))})(0,ne),Mo(Z,ne),An(0,ne),((Z,ne)=>{const ge=Yn();ge&&(Vn(ge),ua(ge,ne.footer,"block"),ne.footer&&Kt(ne.footer,ge),Cr(ge,ne,"footer"))})(0,ne);const ge=bt();"function"==typeof ne.didRender&&ge&&ne.didRender(ge),H.eventEmitter.emit("didRender",ge)},ku=()=>{var Z;return null===(Z=jn())||void 0===Z?void 0:Z.click()},gl=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Jd=Z=>{Z.keydownTarget&&Z.keydownHandlerAdded&&(Z.keydownTarget.removeEventListener("keydown",Z.keydownHandler,{capture:Z.keydownListenerCapture}),Z.keydownHandlerAdded=!1)},_o=(Z,ne)=>{var ge;const Ge=Kn();if(Ge.length)return(Z+=ne)===Ge.length?Z=0:-1===Z&&(Z=Ge.length-1),void Ge[Z].focus();null===(ge=bt())||void 0===ge||ge.focus()},eh=["ArrowRight","ArrowDown"],ko=["ArrowLeft","ArrowUp"],vl=(Z,ne,ge)=>{Z&&(ne.isComposing||229===ne.keyCode||(Z.stopKeydownPropagation&&ne.stopPropagation(),"Enter"===ne.key?uo(ne,Z):"Tab"===ne.key?ym(ne):[...eh,...ko].includes(ne.key)?Ps(ne.key):"Escape"===ne.key&&th(ne,Z,ge)))},uo=(Z,ne)=>{if(!ct(ne.allowEnterKey))return;const ge=gs(bt(),ne.input);if(Z.target&&ge&&Z.target instanceof HTMLElement&&Z.target.outerHTML===ge.outerHTML){if(["textarea","file"].includes(ne.input))return;ku(),Z.preventDefault()}},ym=Z=>{const ne=Z.target,ge=Kn();let Ge=-1;for(let kt=0;kt<ge.length;kt++)if(ne===ge[kt]){Ge=kt;break}_o(Ge,Z.shiftKey?-1:1),Z.stopPropagation(),Z.preventDefault()},Ps=Z=>{const ne=Xn(),ge=jn(),Ge=Rn(),kt=zn();if(!(ne&&ge&&Ge&&kt))return;if(document.activeElement instanceof HTMLElement&&![ge,Ge,kt].includes(document.activeElement))return;const pr=eh.includes(Z)?"nextElementSibling":"previousElementSibling";let ns=document.activeElement;if(ns){for(let io=0;io<ne.children.length;io++){if(ns=ns[pr],!ns)return;if(ns instanceof HTMLButtonElement&&Br(ns))break}ns instanceof HTMLButtonElement&&ns.focus()}},th=(Z,ne,ge)=>{ct(ne.allowEscapeKey)&&(Z.preventDefault(),ge(gl.esc))};var pa={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const nh=()=>{Array.from(document.body.children).forEach(ne=>{ne.hasAttribute("data-previous-aria-hidden")?(ne.setAttribute("aria-hidden",ne.getAttribute("data-previous-aria-hidden")||""),ne.removeAttribute("data-previous-aria-hidden")):ne.removeAttribute("aria-hidden")})},Jl=typeof window<"u"&&!!window.GestureEvent,Po=()=>{const Z=X();if(!Z)return;let ne;Z.ontouchstart=ge=>{ne=r0(ge)},Z.ontouchmove=ge=>{ne&&(ge.preventDefault(),ge.stopPropagation())}},r0=Z=>{const ne=Z.target,ge=X(),Ge=Ot();return!(!ge||!Ge||fa(Z)||tl(Z)||ne!==ge&&(mi(ge)||!(ne instanceof HTMLElement)||"INPUT"===ne.tagName||"TEXTAREA"===ne.tagName||mi(Ge)&&Ge.contains(ne)))},fa=Z=>Z.touches&&Z.touches.length&&"stylus"===Z.touches[0].touchType,tl=Z=>Z.touches&&Z.touches.length>1,Lu=()=>{if(Mr(document.body,U.iosfix)){const Z=parseInt(document.body.style.top,10);Rr(document.body,U.iosfix),document.body.style.top="",document.body.scrollTop=-1*Z}};let ec=null;const Da=Z=>{null===ec&&(document.body.scrollHeight>window.innerHeight||"scroll"===Z)&&(ec=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${ec+(()=>{const Z=document.createElement("div");Z.className=U["scrollbar-measure"],document.body.appendChild(Z);const ne=Z.getBoundingClientRect().width-Z.clientWidth;return document.body.removeChild(Z),ne})()}px`)},s0=()=>{null!==ec&&(document.body.style.paddingRight=`${ec}px`,ec=null)};function o0(Z,ne,ge,Ge){gn()?Wp(Z,Ge):(J(ge).then(()=>Wp(Z,Ge)),Jd(H)),Jl?(ne.setAttribute("style","display:none !important"),ne.removeAttribute("class"),ne.innerHTML=""):ne.remove(),bi()&&(s0(),Lu(),nh()),function a0(){Rr([document.documentElement,document.body],[U.shown,U["height-auto"],U["no-backdrop"],U["toast-shown"]])}()}function kc(Z){Z=c0(Z);const ne=pa.swalPromiseResolve.get(this),ge=x1(this);this.isAwaitingPromise?Z.isDismissed||(Fu(this),ne(Z)):ge&&ne(Z)}const x1=Z=>{const ne=bt();if(!ne)return!1;const ge=cs.innerParams.get(Z);if(!ge||Mr(ne,ge.hideClass.popup))return!1;Rr(ne,ge.showClass.popup),wi(ne,ge.hideClass.popup);const Ge=X();return Rr(Ge,ge.showClass.backdrop),wi(Ge,ge.hideClass.backdrop),_m(Z,ne,ge),!0};function l0(Z){const ne=pa.swalPromiseReject.get(this);Fu(this),ne&&ne(Z)}const Fu=Z=>{Z.isAwaitingPromise&&(delete Z.isAwaitingPromise,cs.innerParams.get(Z)||Z._destroy())},c0=Z=>typeof Z>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},Z),_m=(Z,ne,ge)=>{var Ge;const kt=X(),qn=zr(ne);"function"==typeof ge.willClose&&ge.willClose(ne),null===(Ge=H.eventEmitter)||void 0===Ge||Ge.emit("willClose",ne),qn?d0(Z,ne,kt,ge.returnFocus,ge.didClose):o0(Z,kt,ge.returnFocus,ge.didClose)},d0=(Z,ne,ge,Ge,kt)=>{H.swalCloseEventFinishedCallback=o0.bind(null,Z,ge,Ge,kt);const qn=function(pr){var ns;pr.target===ne&&(null===(ns=H.swalCloseEventFinishedCallback)||void 0===ns||ns.call(H),delete H.swalCloseEventFinishedCallback,ne.removeEventListener("animationend",qn),ne.removeEventListener("transitionend",qn))};ne.addEventListener("animationend",qn),ne.addEventListener("transitionend",qn)},Wp=(Z,ne)=>{setTimeout(()=>{var ge;"function"==typeof ne&&ne.bind(Z.params)(),null===(ge=H.eventEmitter)||void 0===ge||ge.emit("didClose"),Z._destroy&&Z._destroy()})},ih=Z=>{let ne=bt();if(ne||new Hu,ne=bt(),!ne)return;const ge=cn();gn()?fi(Ft()):h0(ne,Z),Pr(ge),ne.setAttribute("data-loading","true"),ne.setAttribute("aria-busy","true"),ne.focus()},h0=(Z,ne)=>{const ge=Xn(),Ge=cn();!ge||!Ge||(!ne&&Br(jn())&&(ne=jn()),Pr(ge),ne&&(fi(ne),Ge.setAttribute("data-button-to-replace",ne.className),ge.insertBefore(Ge,ne)),wi([Z,ge],U.loading))},w1=Z=>Z.checked?1:0,xm=Z=>Z.checked?Z.value:null,rh=Z=>Z.files&&Z.files.length?null!==Z.getAttribute("multiple")?Z.files:Z.files[0]:null,p0=(Z,ne)=>{const ge=bt();if(!ge)return;const Ge=kt=>{"select"===ne.input?function M1(Z,ne,ge){const Ge=or(Z,U.select);if(!Ge)return;const kt=(qn,pr,ns)=>{const io=document.createElement("option");io.value=ns,Si(io,pr),io.selected=O(ns,ge.inputValue),qn.appendChild(io)};ne.forEach(qn=>{const pr=qn[0],ns=qn[1];if(Array.isArray(ns)){const io=document.createElement("optgroup");io.label=pr,io.disabled=!1,Ge.appendChild(io),ns.forEach(Zp=>kt(io,Zp[1],Zp[0]))}else kt(Ge,ns,pr)}),Ge.focus()}(ge,Bu(kt),ne):"radio"===ne.input&&function fd(Z,ne,ge){const Ge=or(Z,U.radio);if(!Ge)return;ne.forEach(qn=>{const pr=qn[0],ns=qn[1],io=document.createElement("input"),Zp=document.createElement("label");io.type="radio",io.name=U.radio,io.value=pr,O(pr,ge.inputValue)&&(io.checked=!0);const px=document.createElement("span");Si(px,ns),px.className=U.label,Zp.appendChild(io),Zp.appendChild(px),Ge.appendChild(Zp)});const kt=Ge.querySelectorAll("input");kt.length&&kt[0].focus()}(ge,Bu(kt),ne)};Ke(ne.inputOptions)||At(ne.inputOptions)?(ih(jn()),lt(ne.inputOptions).then(kt=>{Z.hideLoading(),Ge(kt)})):"object"==typeof ne.inputOptions?Ge(ne.inputOptions):de("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof ne.inputOptions)},wm=(Z,ne)=>{const ge=Z.getInput();ge&&(fi(ge),lt(ne.inputValue).then(Ge=>{ge.value="number"===ne.input?`${parseFloat(Ge)||0}`:`${Ge}`,Pr(ge),ge.focus(),Z.hideLoading()}).catch(Ge=>{de(`Error in inputValue promise: ${Ge}`),ge.value="",Pr(ge),ge.focus(),Z.hideLoading()}))};const Bu=Z=>{const ne=[];return Z instanceof Map?Z.forEach((ge,Ge)=>{let kt=ge;"object"==typeof kt&&(kt=Bu(kt)),ne.push([Ge,kt])}):Object.keys(Z).forEach(ge=>{let Ge=Z[ge];"object"==typeof Ge&&(Ge=Bu(Ge)),ne.push([ge,Ge])}),ne},O=(Z,ne)=>!!ne&&ne.toString()===Z.toString(),ve=(Z,ne)=>{const ge=cs.innerParams.get(Z);if(!ge.input)return void de(`The "input" parameter is needed to be set when using returnInputValueOn${z(ne)}`);const Ge=Z.getInput(),kt=((Z,ne)=>{const ge=Z.getInput();if(!ge)return null;switch(ne.input){case"checkbox":return w1(ge);case"radio":return xm(ge);case"file":return rh(ge);default:return ne.inputAutoTrim?ge.value.trim():ge.value}})(Z,ge);ge.inputValidator?ye(Z,kt,ne):Ge&&!Ge.checkValidity()?(Z.enableButtons(),Z.showValidationMessage(ge.validationMessage||Ge.validationMessage)):"deny"===ne?we(Z,kt):ht(Z,kt)},ye=(Z,ne,ge)=>{const Ge=cs.innerParams.get(Z);Z.disableInput(),Promise.resolve().then(()=>lt(Ge.inputValidator(ne,Ge.validationMessage))).then(qn=>{Z.enableButtons(),Z.enableInput(),qn?Z.showValidationMessage(qn):"deny"===ge?we(Z,ne):ht(Z,ne)})},we=(Z,ne)=>{const ge=cs.innerParams.get(Z||void 0);ge.showLoaderOnDeny&&ih(Rn()),ge.preDeny?(Z.isAwaitingPromise=!0,Promise.resolve().then(()=>lt(ge.preDeny(ne,ge.validationMessage))).then(kt=>{!1===kt?(Z.hideLoading(),Fu(Z)):Z.close({isDenied:!0,value:typeof kt>"u"?ne:kt})}).catch(kt=>Ye(Z||void 0,kt))):Z.close({isDenied:!0,value:ne})},Je=(Z,ne)=>{Z.close({isConfirmed:!0,value:ne})},Ye=(Z,ne)=>{Z.rejectPromise(ne)},ht=(Z,ne)=>{const ge=cs.innerParams.get(Z||void 0);ge.showLoaderOnConfirm&&ih(),ge.preConfirm?(Z.resetValidationMessage(),Z.isAwaitingPromise=!0,Promise.resolve().then(()=>lt(ge.preConfirm(ne,ge.validationMessage))).then(kt=>{Br(_n())||!1===kt?(Z.hideLoading(),Fu(Z)):Je(Z,typeof kt>"u"?ne:kt)}).catch(kt=>Ye(Z||void 0,kt))):Je(Z,ne)};function jt(){const Z=cs.innerParams.get(this);if(!Z)return;const ne=cs.domCache.get(this);fi(ne.loader),gn()?Z.icon&&Pr(Ft()):nn(ne),Rr([ne.popup,ne.actions],U.loading),ne.popup.removeAttribute("aria-busy"),ne.popup.removeAttribute("data-loading"),ne.confirmButton.disabled=!1,ne.denyButton.disabled=!1,ne.cancelButton.disabled=!1}const nn=Z=>{const ne=Z.popup.getElementsByClassName(Z.loader.getAttribute("data-button-to-replace"));ne.length?Pr(ne[0],"inline-block"):!Br(jn())&&!Br(Rn())&&!Br(zn())&&fi(Z.actions)};function xt(){const Z=cs.innerParams.get(this),ne=cs.domCache.get(this);return ne?gs(ne.popup,Z.input):null}function Cn(Z,ne,ge){const Ge=cs.domCache.get(Z);ne.forEach(kt=>{Ge[kt].disabled=ge})}function Mi(Z,ne){const ge=bt();if(ge&&Z)if("radio"===Z.type){const Ge=ge.querySelectorAll(`[name="${U.radio}"]`);for(let kt=0;kt<Ge.length;kt++)Ge[kt].disabled=ne}else Z.disabled=ne}function Ti(){Cn(this,["confirmButton","denyButton","cancelButton"],!1)}function Gi(){Cn(this,["confirmButton","denyButton","cancelButton"],!0)}function po(){Mi(this.getInput(),!1)}function Ss(){Mi(this.getInput(),!0)}function ys(Z){const ne=cs.domCache.get(this),ge=cs.innerParams.get(this);Si(ne.validationMessage,Z),ne.validationMessage.className=U["validation-message"],ge.customClass&&ge.customClass.validationMessage&&wi(ne.validationMessage,ge.customClass.validationMessage),Pr(ne.validationMessage);const Ge=this.getInput();Ge&&(Ge.setAttribute("aria-invalid","true"),Ge.setAttribute("aria-describedby",U["validation-message"]),Zr(Ge),wi(Ge,U.inputerror))}function yl(){const Z=cs.domCache.get(this);Z.validationMessage&&fi(Z.validationMessage);const ne=this.getInput();ne&&(ne.removeAttribute("aria-invalid"),ne.removeAttribute("aria-describedby"),Rr(ne,U.inputerror))}const Wi={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},md=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],lr={allowEnterKey:void 0},Ns=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Nc=Z=>Object.prototype.hasOwnProperty.call(Wi,Z),Ni=Z=>-1!==md.indexOf(Z),Ia=Z=>lr[Z],zu=Z=>{Nc(Z)||ee(`Unknown parameter "${Z}"`)},Al=Z=>{Ns.includes(Z)&&ee(`The parameter "${Z}" is incompatible with toasts`)},Lc=Z=>{const ne=Ia(Z);ne&&je(Z,ne)};function ma(Z){const ne=bt(),ge=cs.innerParams.get(this);if(!ne||Mr(ne,ge.hideClass.popup))return void ee("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const Ge=qp(Z),kt=Object.assign({},ge,Ge);vs(this,kt),cs.innerParams.set(this,kt),Object.defineProperties(this,{params:{value:Object.assign({},this.params,Z),writable:!1,enumerable:!0}})}const qp=Z=>{const ne={};return Object.keys(Z).forEach(ge=>{Ni(ge)?ne[ge]=Z[ge]:ee(`Invalid parameter to update: ${ge}`)}),ne};function Tl(){const Z=cs.domCache.get(this),ne=cs.innerParams.get(this);ne?(Z.popup&&H.swalCloseEventFinishedCallback&&(H.swalCloseEventFinishedCallback(),delete H.swalCloseEventFinishedCallback),"function"==typeof ne.didDestroy&&ne.didDestroy(),H.eventEmitter.emit("didDestroy"),ln(this)):Dr(this)}const ln=Z=>{Dr(Z),delete Z.params,delete H.keydownHandler,delete H.keydownTarget,delete H.currentInstance},Dr=Z=>{Z.isAwaitingPromise?(Zn(cs,Z),Z.isAwaitingPromise=!0):(Zn(pa,Z),Zn(cs,Z),delete Z.isAwaitingPromise,delete Z.disableButtons,delete Z.enableButtons,delete Z.getInput,delete Z.disableInput,delete Z.enableInput,delete Z.hideLoading,delete Z.disableLoading,delete Z.showValidationMessage,delete Z.resetValidationMessage,delete Z.close,delete Z.closePopup,delete Z.closeModal,delete Z.closeToast,delete Z.rejectPromise,delete Z.update,delete Z._destroy)},Zn=(Z,ne)=>{for(const ge in Z)Z[ge].delete(ne)};var ti=Object.freeze({__proto__:null,_destroy:Tl,close:kc,closeModal:kc,closePopup:kc,closeToast:kc,disableButtons:Gi,disableInput:Ss,disableLoading:jt,enableButtons:Ti,enableInput:po,getInput:xt,handleAwaitingPromise:Fu,hideLoading:jt,rejectPromise:l0,resetValidationMessage:yl,showValidationMessage:ys,update:ma});const sh=(Z,ne,ge)=>{ne.popup.onclick=()=>{Z&&(qo(Z)||Z.timer||Z.input)||ge(gl.close)}},qo=Z=>!!(Z.showConfirmButton||Z.showDenyButton||Z.showCancelButton||Z.showCloseButton);let no=!1;const Xp=Z=>{Z.popup.onmousedown=()=>{Z.container.onmouseup=function(ne){Z.container.onmouseup=()=>{},ne.target===Z.container&&(no=!0)}}},Yp=Z=>{Z.container.onmousedown=ne=>{ne.target===Z.container&&ne.preventDefault(),Z.popup.onmouseup=function(ge){Z.popup.onmouseup=()=>{},(ge.target===Z.popup||ge.target instanceof HTMLElement&&Z.popup.contains(ge.target))&&(no=!0)}}},Mm=(Z,ne,ge)=>{ne.container.onclick=Ge=>{no?no=!1:Ge.target===ne.container&&ct(Z.allowOutsideClick)&&ge(gl.backdrop)}},Hh=Z=>Z instanceof Element||(Z=>"object"==typeof Z&&Z.jquery)(Z);const Ra=()=>{if(H.timeout)return(()=>{const Z=li();if(!Z)return;const ne=parseInt(window.getComputedStyle(Z).width);Z.style.removeProperty("transition"),Z.style.width="100%";const ge=parseInt(window.getComputedStyle(Z).width);Z.style.width=ne/ge*100+"%"})(),H.timeout.stop()},Uu=()=>{if(H.timeout){const Z=H.timeout.start();return ts(Z),Z}};let lh=!1;const Gh={};const Wh=Z=>{for(let ne=Z.target;ne&&ne!==document;ne=ne.parentNode)for(const ge in Gh){const Ge=ne.getAttribute(ge);if(Ge)return void Gh[ge].fire({template:Ge})}};H.eventEmitter=new class Ve{constructor(){this.events={}}_getHandlersByEventName(ne){return typeof this.events[ne]>"u"&&(this.events[ne]=[]),this.events[ne]}on(ne,ge){const Ge=this._getHandlersByEventName(ne);Ge.includes(ge)||Ge.push(ge)}once(ne,ge){var Ge=this;const kt=function(){Ge.removeListener(ne,kt);for(var qn=arguments.length,pr=new Array(qn),ns=0;ns<qn;ns++)pr[ns]=arguments[ns];ge.apply(Ge,pr)};this.on(ne,kt)}emit(ne){for(var ge=arguments.length,Ge=new Array(ge>1?ge-1:0),kt=1;kt<ge;kt++)Ge[kt-1]=arguments[kt];this._getHandlersByEventName(ne).forEach(qn=>{try{qn.apply(this,Ge)}catch(pr){console.error(pr)}})}removeListener(ne,ge){const Ge=this._getHandlersByEventName(ne),kt=Ge.indexOf(ge);kt>-1&&Ge.splice(kt,1)}removeAllListeners(ne){void 0!==this.events[ne]&&(this.events[ne].length=0)}reset(){this.events={}}};var tn=Object.freeze({__proto__:null,argsToParams:Z=>{const ne={};return"object"!=typeof Z[0]||Hh(Z[0])?["title","html","icon"].forEach((ge,Ge)=>{const kt=Z[Ge];"string"==typeof kt||Hh(kt)?ne[ge]=kt:void 0!==kt&&de(`Unexpected type of ${ge}! Expected "string" or "Element", got ${typeof kt}`)}):Object.assign(ne,Z[0]),ne},bindClickHandler:function ju(){Gh[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,lh||(document.body.addEventListener("click",Wh),lh=!0)},clickCancel:()=>{var Z;return null===(Z=zn())||void 0===Z?void 0:Z.click()},clickConfirm:ku,clickDeny:()=>{var Z;return null===(Z=Rn())||void 0===Z?void 0:Z.click()},enableLoading:ih,fire:function Dl(){for(var Z=arguments.length,ne=new Array(Z),ge=0;ge<Z;ge++)ne[ge]=arguments[ge];return new this(...ne)},getActions:Xn,getCancelButton:zn,getCloseButton:Gt,getConfirmButton:jn,getContainer:X,getDenyButton:Rn,getFocusableElements:Kn,getFooter:Yn,getHtmlContainer:Ot,getIcon:Ft,getIconContent:()=>Mt(U["icon-content"]),getImage:Xe,getInputLabel:()=>Mt(U["input-label"]),getLoader:cn,getPopup:bt,getProgressSteps:St,getTimerLeft:()=>H.timeout&&H.timeout.getTimerLeft(),getTimerProgressBar:li,getTitle:Sn,getValidationMessage:_n,increaseTimer:Z=>{if(H.timeout){const ne=H.timeout.increase(Z);return ts(ne,!0),ne}},isDeprecatedParameter:Ia,isLoading:()=>{const Z=bt();return!!Z&&Z.hasAttribute("data-loading")},isTimerRunning:()=>!(!H.timeout||!H.timeout.isRunning()),isUpdatableParameter:Ni,isValidParameter:Nc,isVisible:()=>Br(bt()),mixin:function ah(Z){return class ne extends(this){_main(Ge,kt){return super._main(Ge,Object.assign({},Z,kt))}}},off:(Z,ne)=>{Z?ne?H.eventEmitter.removeListener(Z,ne):H.eventEmitter.removeAllListeners(Z):H.eventEmitter.reset()},on:(Z,ne)=>{H.eventEmitter.on(Z,ne)},once:(Z,ne)=>{H.eventEmitter.once(Z,ne)},resumeTimer:Uu,showLoading:ih,stopTimer:Ra,toggleTimer:()=>{const Z=H.timeout;return Z&&(Z.running?Ra():Uu())}});class kn{constructor(ne,ge){this.callback=ne,this.remaining=ge,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(ne){const ge=this.running;return ge&&this.stop(),this.remaining+=ne,ge&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Hn=["swal-title","swal-html","swal-footer"],Wn=Z=>{const ne={};return Array.from(Z.querySelectorAll("swal-param")).forEach(Ge=>{Un(Ge,["name","value"]);const kt=Ge.getAttribute("name"),qn=Ge.getAttribute("value");!kt||!qn||(ne[kt]="boolean"==typeof Wi[kt]?"false"!==qn:"object"==typeof Wi[kt]?JSON.parse(qn):qn)}),ne},br=Z=>{const ne={};return Array.from(Z.querySelectorAll("swal-function-param")).forEach(Ge=>{const kt=Ge.getAttribute("name"),qn=Ge.getAttribute("value");!kt||!qn||(ne[kt]=new Function(`return ${qn}`)())}),ne},Me=Z=>{const ne={};return Array.from(Z.querySelectorAll("swal-button")).forEach(Ge=>{Un(Ge,["type","color","aria-label"]);const kt=Ge.getAttribute("type");!kt||!["confirm","cancel","deny"].includes(kt)||(ne[`${kt}ButtonText`]=Ge.innerHTML,ne[`show${z(kt)}Button`]=!0,Ge.hasAttribute("color")&&(ne[`${kt}ButtonColor`]=Ge.getAttribute("color")),Ge.hasAttribute("aria-label")&&(ne[`${kt}ButtonAriaLabel`]=Ge.getAttribute("aria-label")))}),ne},W=Z=>{const ne={},ge=Z.querySelector("swal-image");return ge&&(Un(ge,["src","width","height","alt"]),ge.hasAttribute("src")&&(ne.imageUrl=ge.getAttribute("src")||void 0),ge.hasAttribute("width")&&(ne.imageWidth=ge.getAttribute("width")||void 0),ge.hasAttribute("height")&&(ne.imageHeight=ge.getAttribute("height")||void 0),ge.hasAttribute("alt")&&(ne.imageAlt=ge.getAttribute("alt")||void 0)),ne},ie=Z=>{const ne={},ge=Z.querySelector("swal-icon");return ge&&(Un(ge,["type","color"]),ge.hasAttribute("type")&&(ne.icon=ge.getAttribute("type")),ge.hasAttribute("color")&&(ne.iconColor=ge.getAttribute("color")),ne.iconHtml=ge.innerHTML),ne},Se=Z=>{const ne={},ge=Z.querySelector("swal-input");ge&&(Un(ge,["type","label","placeholder","value"]),ne.input=ge.getAttribute("type")||"text",ge.hasAttribute("label")&&(ne.inputLabel=ge.getAttribute("label")),ge.hasAttribute("placeholder")&&(ne.inputPlaceholder=ge.getAttribute("placeholder")),ge.hasAttribute("value")&&(ne.inputValue=ge.getAttribute("value")));const Ge=Array.from(Z.querySelectorAll("swal-input-option"));return Ge.length&&(ne.inputOptions={},Ge.forEach(kt=>{Un(kt,["value"]);const qn=kt.getAttribute("value");qn&&(ne.inputOptions[qn]=kt.innerHTML)})),ne},gt=(Z,ne)=>{const ge={};for(const Ge in ne){const kt=ne[Ge],qn=Z.querySelector(kt);qn&&(Un(qn,[]),ge[kt.replace(/^swal-/,"")]=qn.innerHTML.trim())}return ge},un=Z=>{const ne=Hn.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(Z.children).forEach(ge=>{const Ge=ge.tagName.toLowerCase();ne.includes(Ge)||ee(`Unrecognized element <${Ge}>`)})},Un=(Z,ne)=>{Array.from(Z.attributes).forEach(ge=>{-1===ne.indexOf(ge.name)&&ee([`Unrecognized attribute "${ge.name}" on <${Z.tagName.toLowerCase()}>.`,ne.length?`Allowed attributes are: ${ne.join(", ")}`:"To set the value, use HTML within the element."])})},ds=Z=>{const ne=X(),ge=bt();"function"==typeof Z.willOpen&&Z.willOpen(ge),H.eventEmitter.emit("willOpen",ge);const kt=window.getComputedStyle(document.body).overflowY;Kp(ne,ge,Z),setTimeout(()=>{qs(ne,ge)},10),bi()&&(nc(ne,Z.scrollbarPadding,kt),(()=>{const Z=X();Array.from(document.body.children).forEach(ge=>{ge.contains(Z)||(ge.hasAttribute("aria-hidden")&&ge.setAttribute("data-previous-aria-hidden",ge.getAttribute("aria-hidden")||""),ge.setAttribute("aria-hidden","true"))})})()),!gn()&&!H.previousActiveElement&&(H.previousActiveElement=document.activeElement),"function"==typeof Z.didOpen&&setTimeout(()=>Z.didOpen(ge)),H.eventEmitter.emit("didOpen",ge),Rr(ne,U["no-transition"])},Xo=Z=>{const ne=bt();if(Z.target!==ne)return;const ge=X();ne.removeEventListener("animationend",Xo),ne.removeEventListener("transitionend",Xo),ge.style.overflowY="auto"},qs=(Z,ne)=>{zr(ne)?(Z.style.overflowY="hidden",ne.addEventListener("animationend",Xo),ne.addEventListener("transitionend",Xo)):Z.style.overflowY="auto"},nc=(Z,ne,ge)=>{(()=>{if(Jl&&!Mr(document.body,U.iosfix)){const Z=document.body.scrollTop;document.body.style.top=-1*Z+"px",wi(document.body,U.iosfix),Po()}})(),ne&&"hidden"!==ge&&Da(ge),setTimeout(()=>{Z.scrollTop=0})},Kp=(Z,ne,ge)=>{wi(Z,ge.showClass.backdrop),ge.animation?(ne.style.setProperty("opacity","0","important"),Pr(ne,"grid"),setTimeout(()=>{wi(ne,ge.showClass.popup),ne.style.removeProperty("opacity")},10)):Pr(ne,"grid"),wi([document.documentElement,document.body],U.shown),ge.heightAuto&&ge.backdrop&&!ge.toast&&wi([document.documentElement,document.body],U["height-auto"])};var dx={email:(Z,ne)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(Z)?Promise.resolve():Promise.resolve(ne||"Invalid email address"),url:(Z,ne)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(Z)?Promise.resolve():Promise.resolve(ne||"Invalid URL")};function f0(Z){(function KT(Z){Z.inputValidator||("email"===Z.input&&(Z.inputValidator=dx.email),"url"===Z.input&&(Z.inputValidator=dx.url))})(Z),Z.showLoaderOnConfirm&&!Z.preConfirm&&ee("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function Pm(Z){(!Z.target||"string"==typeof Z.target&&!document.querySelector(Z.target)||"string"!=typeof Z.target&&!Z.target.appendChild)&&(ee('Target parameter is not valid, defaulting to "body"'),Z.target="body")}(Z),"string"==typeof Z.title&&(Z.title=Z.title.split("\n").join("<br />")),Pn(Z)}let ch;var hx=new WeakMap;class fo{constructor(){if(S(this,hx,void 0),typeof window>"u")return;ch=this;for(var ne=arguments.length,ge=new Array(ne),Ge=0;Ge<ne;Ge++)ge[Ge]=arguments[Ge];const kt=Object.freeze(this.constructor.argsToParams(ge));this.params=kt,this.isAwaitingPromise=!1,function T(Z,ne,ge){return Z.set(y(Z,ne),ge),ge}(hx,this,this._main(ch.params))}_main(ne){let ge=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((Z=>{!1===Z.backdrop&&Z.allowOutsideClick&&ee('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const ne in Z)zu(ne),Z.toast&&Al(ne),Lc(ne)})(Object.assign({},ge,ne)),H.currentInstance){const qn=pa.swalPromiseResolve.get(H.currentInstance),{isAwaitingPromise:pr}=H.currentInstance;H.currentInstance._destroy(),pr||qn({isDismissed:!0}),bi()&&nh()}H.currentInstance=ch;const Ge=ZT(ne,ge);f0(Ge),Object.freeze(Ge),H.timeout&&(H.timeout.stop(),delete H.timeout),clearTimeout(H.restoreFocusTimeout);const kt=QT(ch);return vs(ch,Ge),cs.innerParams.set(ch,Ge),gU(ch,kt,Ge)}then(ne){return M(hx,this).then(ne)}finally(ne){return M(hx,this).finally(ne)}}const gU=(Z,ne,ge)=>new Promise((Ge,kt)=>{const qn=pr=>{Z.close({isDismissed:!0,dismiss:pr})};pa.swalPromiseResolve.set(Z,Ge),pa.swalPromiseReject.set(Z,kt),ne.confirmButton.onclick=()=>{(Z=>{const ne=cs.innerParams.get(Z);Z.disableButtons(),ne.input?ve(Z,"confirm"):ht(Z,!0)})(Z)},ne.denyButton.onclick=()=>{(Z=>{const ne=cs.innerParams.get(Z);Z.disableButtons(),ne.returnInputValueOnDeny?ve(Z,"deny"):we(Z,!1)})(Z)},ne.cancelButton.onclick=()=>{((Z,ne)=>{Z.disableButtons(),ne(gl.cancel)})(Z,qn)},ne.closeButton.onclick=()=>{qn(gl.close)},((Z,ne,ge)=>{Z.toast?sh(Z,ne,ge):(Xp(ne),Yp(ne),Mm(Z,ne,ge))})(ge,ne,qn),((Z,ne,ge)=>{Jd(Z),ne.toast||(Z.keydownHandler=Ge=>vl(ne,Ge,ge),Z.keydownTarget=ne.keydownListenerCapture?window:bt(),Z.keydownListenerCapture=ne.keydownListenerCapture,Z.keydownTarget.addEventListener("keydown",Z.keydownHandler,{capture:Z.keydownListenerCapture}),Z.keydownHandlerAdded=!0)})(H,ge,qn),((Z,ne)=>{"select"===ne.input||"radio"===ne.input?p0(Z,ne):["text","email","number","tel","textarea"].some(ge=>ge===ne.input)&&(Ke(ne.inputValue)||At(ne.inputValue))&&(ih(jn()),wm(Z,ne))})(Z,ge),ds(ge),vU(H,ge,qn),yU(ne,ge),setTimeout(()=>{ne.container.scrollTop=0})}),ZT=(Z,ne)=>{const ge=(Z=>{const ne="string"==typeof Z.template?document.querySelector(Z.template):Z.template;if(!ne)return{};const ge=ne.content;return un(ge),Object.assign(Wn(ge),br(ge),Me(ge),W(ge),ie(ge),Se(ge),gt(ge,Hn))})(Z),Ge=Object.assign({},Wi,ne,ge,Z);return Ge.showClass=Object.assign({},Wi.showClass,Ge.showClass),Ge.hideClass=Object.assign({},Wi.hideClass,Ge.hideClass),!1===Ge.animation&&(Ge.showClass={backdrop:"swal2-noanimation"},Ge.hideClass={}),Ge},QT=Z=>{const ne={popup:bt(),container:X(),actions:Xn(),confirmButton:jn(),denyButton:Rn(),cancelButton:zn(),loader:cn(),closeButton:Gt(),validationMessage:_n(),progressSteps:St()};return cs.domCache.set(Z,ne),ne},vU=(Z,ne,ge)=>{const Ge=li();fi(Ge),ne.timer&&(Z.timeout=new kn(()=>{ge("timer"),delete Z.timeout},ne.timer),ne.timerProgressBar&&(Pr(Ge),Cr(Ge,ne,"timerProgressBar"),setTimeout(()=>{Z.timeout&&Z.timeout.running&&ts(ne.timer)})))},yU=(Z,ne)=>{if(!ne.toast){if(!ct(ne.allowEnterKey))return je("allowEnterKey"),void ZC();ux(Z)||KC(Z,ne)||_o(-1,1)}},ux=Z=>{const ne=Array.from(Z.popup.querySelectorAll("[autofocus]"));for(const ge of ne)if(ge instanceof HTMLElement&&Br(ge))return ge.focus(),!0;return!1},KC=(Z,ne)=>ne.focusDeny&&Br(Z.denyButton)?(Z.denyButton.focus(),!0):ne.focusCancel&&Br(Z.cancelButton)?(Z.cancelButton.focus(),!0):!(!ne.focusConfirm||!Br(Z.confirmButton)||(Z.confirmButton.focus(),0)),ZC=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const Z=new Date,ne=localStorage.getItem("swal-initiation");ne?(Z.getTime()-Date.parse(ne))/864e5>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const ge=document.createElement("audio");ge.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",ge.loop=!0,document.body.appendChild(ge),setTimeout(()=>{ge.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${Z}`)}fo.prototype.disableButtons=Gi,fo.prototype.enableButtons=Ti,fo.prototype.getInput=xt,fo.prototype.disableInput=Ss,fo.prototype.enableInput=po,fo.prototype.hideLoading=jt,fo.prototype.disableLoading=jt,fo.prototype.showValidationMessage=ys,fo.prototype.resetValidationMessage=yl,fo.prototype.close=kc,fo.prototype.closePopup=kc,fo.prototype.closeModal=kc,fo.prototype.closeToast=kc,fo.prototype.rejectPromise=l0,fo.prototype.update=ma,fo.prototype._destroy=Tl,Object.assign(fo,tn),Object.keys(ti).forEach(Z=>{fo[Z]=function(){return ch&&ch[Z]?ch[Z](...arguments):null}}),fo.DismissReason=gl,fo.version="11.14.5";const Hu=fo;return Hu.default=Hu,Hu}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(y,_){var M=y.createElement("style");if(y.getElementsByTagName("head")[0].appendChild(M),M.styleSheet)M.styleSheet.disabled||(M.styleSheet.cssText=_);else try{M.innerHTML=_}catch{M.innerText=_}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')},4942:function(module,exports,__webpack_require__){var y;typeof navigator<"u"&&(y=function(){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(f){_useWebWorker=!!f},getWebWorker=function(){return _useWebWorker},setLocationHref=function(f){locationHref=f},getLocationHref=function(){return locationHref};function createTag(f){return document.createElement(f)}function extendPrototype(f,y){var _,M,S=f.length;for(_=0;_<S;_+=1)for(var T in M=f[_].prototype)Object.prototype.hasOwnProperty.call(M,T)&&(y.prototype[T]=M[T])}function getDescriptor(f,y){return Object.getOwnPropertyDescriptor(f,y)}function createProxyFunction(f){function y(){}return y.prototype=f,y}var audioControllerFactory=function(){function f(y){this.audios=[],this.audioFactory=y,this._volume=1,this._isMuted=!1}return f.prototype={addAudio:function(y){this.audios.push(y)},pause:function(){var y,_=this.audios.length;for(y=0;y<_;y+=1)this.audios[y].pause()},resume:function(){var y,_=this.audios.length;for(y=0;y<_;y+=1)this.audios[y].resume()},setRate:function(y){var _,M=this.audios.length;for(_=0;_<M;_+=1)this.audios[_].setRate(y)},createAudio:function(y){return this.audioFactory?this.audioFactory(y):window.Howl?new window.Howl({src:[y]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(y){this.audioFactory=y},setVolume:function(y){this._volume=y,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var y,_=this.audios.length;for(y=0;y<_;y+=1)this.audios[y].volume(this._volume*(this._isMuted?0:1))}},function(){return new f}}(),createTypedArray=function(){function f(y,_){var M,S=0,T=[];switch(y){case"int16":case"uint8c":M=1;break;default:M=1.1}for(S=0;S<_;S+=1)T.push(M);return T}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(y,_){return"float32"===y?new Float32Array(_):"int16"===y?new Int16Array(_):"uint8c"===y?new Uint8ClampedArray(_):f(y,_)}:f}();function createSizedArray(f){return Array.apply(null,{length:f})}function _typeof$6(f){return(_typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(f)}var subframeEnabled=!0,expressionsPlugin=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_shouldRoundValues=!1,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface$1(){return{}}(function(){var f,y=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],_=y.length;for(f=0;f<_;f+=1)BMMath[y[f]]=Math[y[f]]})(),BMMath.random=Math.random,BMMath.abs=function(f){if("object"===_typeof$6(f)&&f.length){var y,_=createSizedArray(f.length),M=f.length;for(y=0;y<M;y+=1)_[y]=Math.abs(f[y]);return _}return Math.abs(f)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(f){_shouldRoundValues=!!f}function bmRnd(f){return _shouldRoundValues?Math.round(f):f}function styleDiv(f){f.style.position="absolute",f.style.top=0,f.style.left=0,f.style.display="block",f.style.transformOrigin="0 0",f.style.webkitTransformOrigin="0 0",f.style.backfaceVisibility="visible",f.style.webkitBackfaceVisibility="visible",f.style.transformStyle="preserve-3d",f.style.webkitTransformStyle="preserve-3d",f.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(f,y,_,M){this.type=f,this.currentTime=y,this.totalTime=_,this.direction=M<0?-1:1}function BMCompleteEvent(f,y){this.type=f,this.direction=y<0?-1:1}function BMCompleteLoopEvent(f,y,_,M){this.type=f,this.currentLoop=_,this.totalLoops=y,this.direction=M<0?-1:1}function BMSegmentStartEvent(f,y,_){this.type=f,this.firstFrame=y,this.totalFrames=_}function BMDestroyEvent(f,y){this.type=f,this.target=y}function BMRenderFrameErrorEvent(f,y){this.type="renderFrameError",this.nativeError=f,this.currentTime=y}function BMConfigErrorEvent(f){this.type="configError",this.nativeError=f}function BMAnimationConfigErrorEvent(f,y){this.type=f,this.nativeError=y}var createElementID=(_count=0,function(){return idPrefix$1+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(f,y,_){var M,S,T,Y,H,q,J,F;switch(q=_*(1-y),J=_*(1-(H=6*f-(Y=Math.floor(6*f)))*y),F=_*(1-(1-H)*y),Y%6){case 0:M=_,S=F,T=q;break;case 1:M=J,S=_,T=q;break;case 2:M=q,S=_,T=F;break;case 3:M=q,S=J,T=_;break;case 4:M=F,S=q,T=_;break;case 5:M=_,S=q,T=J}return[M,S,T]}function RGBtoHSV(f,y,_){var M,S=Math.max(f,y,_),T=Math.min(f,y,_),Y=S-T,H=0===S?0:Y/S,q=S/255;switch(S){case T:M=0;break;case f:M=y-_+Y*(y<_?6:0),M/=6*Y;break;case y:M=_-f+2*Y,M/=6*Y;break;case _:M=f-y+4*Y,M/=6*Y}return[M,H,q]}function addSaturationToRGB(f,y){var _=RGBtoHSV(255*f[0],255*f[1],255*f[2]);return _[1]+=y,_[1]>1?_[1]=1:_[1]<=0&&(_[1]=0),HSVtoRGB(_[0],_[1],_[2])}function addBrightnessToRGB(f,y){var _=RGBtoHSV(255*f[0],255*f[1],255*f[2]);return _[2]+=y,_[2]>1?_[2]=1:_[2]<0&&(_[2]=0),HSVtoRGB(_[0],_[1],_[2])}function addHueToRGB(f,y){var _=RGBtoHSV(255*f[0],255*f[1],255*f[2]);return _[0]+=y/360,_[0]>1?_[0]-=1:_[0]<0&&(_[0]+=1),HSVtoRGB(_[0],_[1],_[2])}var rgbToHex=function(){var f,y,_=[];for(f=0;f<256;f+=1)y=f.toString(16),_[f]=1===y.length?"0"+y:y;return function(M,S,T){return M<0&&(M=0),S<0&&(S=0),T<0&&(T=0),"#"+_[M]+_[S]+_[T]}}(),setSubframeEnabled=function(f){subframeEnabled=!!f},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(f){expressionsPlugin=f},getExpressionsPlugin=function(){return expressionsPlugin},setDefaultCurveSegments=function(f){defaultCurveSegments=f},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(f){idPrefix$1=f},getIdPrefix=function(){return idPrefix$1};function createNS(f){return document.createElementNS(svgNS,f)}function _typeof$5(f){return(_typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(f)}var dataManager=function(){var f,y,_=1,M=[],S={onmessage:function(){},postMessage:function(q){f({data:q})}},T={postMessage:function(q){S.onmessage({data:q})}};function Y(){y||((y=function(q){if(window.Worker&&window.Blob&&getWebWorker()){var J=new Blob(["var _workerSelf = self; self.onmessage = ",q.toString()],{type:"text/javascript"}),F=URL.createObjectURL(J);return new Worker(F)}return f=q,S}(function(q){if(T.dataManager||(T.dataManager=function(){function F(Ke,lt){var At,X,ze,Mt,bt,Ft,dn=Ke.length;for(X=0;X<dn;X+=1)if("ks"in(At=Ke[X])&&!At.completed){if(At.completed=!0,At.tt&&(Ke[X-1].td=At.tt),At.hasMask){var Sn=At.masksProperties;for(Mt=Sn.length,ze=0;ze<Mt;ze+=1)if(Sn[ze].pt.k.i)V(Sn[ze].pt.k);else for(Ft=Sn[ze].pt.k.length,bt=0;bt<Ft;bt+=1)Sn[ze].pt.k[bt].s&&V(Sn[ze].pt.k[bt].s[0]),Sn[ze].pt.k[bt].e&&V(Sn[ze].pt.k[bt].e[0])}0===At.ty?(At.layers=G(At.refId,lt),F(At.layers,lt)):4===At.ty&&U(At.shapes)}}function G(Ke,lt){var At=function(X,ze){for(var Mt=0,bt=ze.length;Mt<bt;){if(ze[Mt].id===X)return ze[Mt];Mt+=1}return null}(Ke,lt);return At?At.layers.__used?JSON.parse(JSON.stringify(At.layers)):(At.layers.__used=!0,At.layers):null}function U(Ke){var lt,At,X;for(lt=Ke.length-1;lt>=0;lt-=1)if("sh"===Ke[lt].ty)if(Ke[lt].ks.k.i)V(Ke[lt].ks.k);else for(X=Ke[lt].ks.k.length,At=0;At<X;At+=1)Ke[lt].ks.k[At].s&&V(Ke[lt].ks.k[At].s[0]),Ke[lt].ks.k[At].e&&V(Ke[lt].ks.k[At].e[0]);else"gr"===Ke[lt].ty&&U(Ke[lt].it)}function V(Ke){var lt,At=Ke.i.length;for(lt=0;lt<At;lt+=1)Ke.i[lt][0]+=Ke.v[lt][0],Ke.i[lt][1]+=Ke.v[lt][1],Ke.o[lt][0]+=Ke.v[lt][0],Ke.o[lt][1]+=Ke.v[lt][1]}function j(Ke,lt){var At=lt?lt.split("."):[100,100,100];return Ke[0]>At[0]||!(At[0]>Ke[0])&&(Ke[1]>At[1]||!(At[1]>Ke[1])&&(Ke[2]>At[2]||!(At[2]>Ke[2])&&null))}var K,z=function(){var Ke=[4,4,14];function lt(At){var X,ze,Mt,bt=At.length;for(X=0;X<bt;X+=1)5===At[X].ty&&(Mt=(ze=At[X]).t.d,ze.t.d={k:[{s:Mt,t:0}]})}return function(At){if(j(Ke,At.v)&&(lt(At.layers),At.assets)){var X,ze=At.assets.length;for(X=0;X<ze;X+=1)At.assets[X].layers&&lt(At.assets[X].layers)}}}(),ee=(K=[4,7,99],function(Ke){if(Ke.chars&&!j(K,Ke.v)){var lt,At=Ke.chars.length;for(lt=0;lt<At;lt+=1){var X=Ke.chars[lt];X.data&&X.data.shapes&&(U(X.data.shapes),X.data.ip=0,X.data.op=99999,X.data.st=0,X.data.sr=1,X.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},Ke.chars[lt].t||(X.data.shapes.push({ty:"no"}),X.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),de=function(){var Ke=[5,7,15];function lt(At){var X,ze,Mt=At.length;for(X=0;X<Mt;X+=1)5===At[X].ty&&(ze=void 0,"number"==typeof(ze=At[X].t.p).a&&(ze.a={a:0,k:ze.a}),"number"==typeof ze.p&&(ze.p={a:0,k:ze.p}),"number"==typeof ze.r&&(ze.r={a:0,k:ze.r}))}return function(At){if(j(Ke,At.v)&&(lt(At.layers),At.assets)){var X,ze=At.assets.length;for(X=0;X<ze;X+=1)At.assets[X].layers&&lt(At.assets[X].layers)}}}(),pe=function(){var Ke=[4,1,9];function lt(X){var ze,Mt,bt,Ft=X.length;for(ze=0;ze<Ft;ze+=1)if("gr"===X[ze].ty)lt(X[ze].it);else if("fl"===X[ze].ty||"st"===X[ze].ty)if(X[ze].c.k&&X[ze].c.k[0].i)for(bt=X[ze].c.k.length,Mt=0;Mt<bt;Mt+=1)X[ze].c.k[Mt].s&&(X[ze].c.k[Mt].s[0]/=255,X[ze].c.k[Mt].s[1]/=255,X[ze].c.k[Mt].s[2]/=255,X[ze].c.k[Mt].s[3]/=255),X[ze].c.k[Mt].e&&(X[ze].c.k[Mt].e[0]/=255,X[ze].c.k[Mt].e[1]/=255,X[ze].c.k[Mt].e[2]/=255,X[ze].c.k[Mt].e[3]/=255);else X[ze].c.k[0]/=255,X[ze].c.k[1]/=255,X[ze].c.k[2]/=255,X[ze].c.k[3]/=255}function At(X){var ze,Mt=X.length;for(ze=0;ze<Mt;ze+=1)4===X[ze].ty&&lt(X[ze].shapes)}return function(X){if(j(Ke,X.v)&&(At(X.layers),X.assets)){var ze,Mt=X.assets.length;for(ze=0;ze<Mt;ze+=1)X.assets[ze].layers&&At(X.assets[ze].layers)}}}(),Ee=function(){var Ke=[4,4,18];function lt(X){var ze,Mt,bt;for(ze=X.length-1;ze>=0;ze-=1)if("sh"===X[ze].ty)if(X[ze].ks.k.i)X[ze].ks.k.c=X[ze].closed;else for(bt=X[ze].ks.k.length,Mt=0;Mt<bt;Mt+=1)X[ze].ks.k[Mt].s&&(X[ze].ks.k[Mt].s[0].c=X[ze].closed),X[ze].ks.k[Mt].e&&(X[ze].ks.k[Mt].e[0].c=X[ze].closed);else"gr"===X[ze].ty&&lt(X[ze].it)}function At(X){var ze,Mt,bt,Ft,dn,Sn,Ot=X.length;for(Mt=0;Mt<Ot;Mt+=1){if((ze=X[Mt]).hasMask){var Xe=ze.masksProperties;for(Ft=Xe.length,bt=0;bt<Ft;bt+=1)if(Xe[bt].pt.k.i)Xe[bt].pt.k.c=Xe[bt].cl;else for(Sn=Xe[bt].pt.k.length,dn=0;dn<Sn;dn+=1)Xe[bt].pt.k[dn].s&&(Xe[bt].pt.k[dn].s[0].c=Xe[bt].cl),Xe[bt].pt.k[dn].e&&(Xe[bt].pt.k[dn].e[0].c=Xe[bt].cl)}4===ze.ty&&lt(ze.shapes)}}return function(X){if(j(Ke,X.v)&&(At(X.layers),X.assets)){var ze,Mt=X.assets.length;for(ze=0;ze<Mt;ze+=1)X.assets[ze].layers&&At(X.assets[ze].layers)}}}(),ct={completeData:function(Ke){Ke.__complete||(pe(Ke),z(Ke),ee(Ke),de(Ke),Ee(Ke),F(Ke.layers,Ke.assets),function(lt,At){if(lt){var X=0,ze=lt.length;for(X=0;X<ze;X+=1)1===lt[X].t&&(lt[X].data.layers=G(lt[X].data.refId,At),F(lt[X].data.layers,At))}}(Ke.chars,Ke.assets),Ke.__complete=!0)}};return ct.checkColors=pe,ct.checkChars=ee,ct.checkPathProperties=de,ct.checkShapes=Ee,ct.completeLayers=F,ct}()),T.assetLoader||(T.assetLoader=function(){function F(G){var U=G.getResponseHeader("content-type");return U&&"json"===G.responseType&&-1!==U.indexOf("json")||G.response&&"object"===_typeof$5(G.response)?G.response:G.response&&"string"==typeof G.response?JSON.parse(G.response):G.responseText?JSON.parse(G.responseText):null}return{load:function(G,U,V,j){var K,z=new XMLHttpRequest;try{z.responseType="json"}catch{}z.onreadystatechange=function(){if(4===z.readyState)if(200===z.status)K=F(z),V(K);else try{K=F(z),V(K)}catch(ee){j&&j(ee)}};try{z.open("GET",G,!0)}catch{z.open("GET",U+"/"+G,!0)}z.send()}}}()),"loadAnimation"===q.data.type)T.assetLoader.load(q.data.path,q.data.fullPath,function(F){T.dataManager.completeData(F),T.postMessage({id:q.data.id,payload:F,status:"success"})},function(){T.postMessage({id:q.data.id,status:"error"})});else if("complete"===q.data.type){var J=q.data.animation;T.dataManager.completeData(J),T.postMessage({id:q.data.id,payload:J,status:"success"})}else"loadData"===q.data.type&&T.assetLoader.load(q.data.path,q.data.fullPath,function(F){T.postMessage({id:q.data.id,payload:F,status:"success"})},function(){T.postMessage({id:q.data.id,status:"error"})})})).onmessage=function(q){var J=q.data,F=J.id,G=M[F];M[F]=null,"success"===J.status?G.onComplete(J.payload):G.onError&&G.onError()})}function H(q,J){var F="processId_"+(_+=1);return M[F]={onComplete:q,onError:J},F}return{loadAnimation:function(q,J,F){Y();var G=H(J,F);y.postMessage({type:"loadAnimation",path:q,fullPath:window.location.origin+window.location.pathname,id:G})},loadData:function(q,J,F){Y();var G=H(J,F);y.postMessage({type:"loadData",path:q,fullPath:window.location.origin+window.location.pathname,id:G})},completeAnimation:function(q,J,F){Y();var G=H(J,F);y.postMessage({type:"complete",animation:q,id:G})}}}(),ImagePreloader=function(){var f=function(){var H=createTag("canvas");H.width=1,H.height=1;var q=H.getContext("2d");return q.fillStyle="rgba(0,0,0,0)",q.fillRect(0,0,1,1),H}();function y(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function _(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function M(H,q,J){var F="";if(H.e)F=H.p;else if(q){var G=H.p;-1!==G.indexOf("images/")&&(G=G.split("/")[1]),F=q+G}else F=J,F+=H.u?H.u:"",F+=H.p;return F}function S(H){var q=0,J=setInterval(function(){(H.getBBox().width||q>500)&&(this._imageLoaded(),clearInterval(J)),q+=1}.bind(this),50)}function T(H){var q={assetData:H},J=M(H,this.assetsPath,this.path);return dataManager.loadData(J,function(F){q.img=F,this._footageLoaded()}.bind(this),function(){q.img={},this._footageLoaded()}.bind(this)),q}function Y(){this._imageLoaded=y.bind(this),this._footageLoaded=_.bind(this),this.testImageLoaded=S.bind(this),this.createFootageData=T.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Y.prototype={loadAssets:function(H,q){var J;this.imagesLoadedCb=q;var F=H.length;for(J=0;J<F;J+=1)H[J].layers||(H[J].t&&"seq"!==H[J].t?3===H[J].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(H[J]))):(this.totalImages+=1,this.images.push(this._createImageData(H[J]))))},setAssetsPath:function(H){this.assetsPath=H||""},setPath:function(H){this.path=H||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(H){for(var q=0,J=this.images.length;q<J;){if(this.images[q].assetData===H)return this.images[q].img;q+=1}return null},createImgData:function(H){var q=M(H,this.assetsPath,this.path),J=createTag("img");J.crossOrigin="anonymous",J.addEventListener("load",this._imageLoaded,!1),J.addEventListener("error",function(){F.img=f,this._imageLoaded()}.bind(this),!1),J.src=q;var F={img:J,assetData:H};return F},createImageData:function(H){var q=M(H,this.assetsPath,this.path),J=createNS("image");isSafari?this.testImageLoaded(J):J.addEventListener("load",this._imageLoaded,!1),J.addEventListener("error",function(){F.img=f,this._imageLoaded()}.bind(this),!1),J.setAttributeNS("http://www.w3.org/1999/xlink","href",q),this._elementHelper.append?this._elementHelper.append(J):this._elementHelper.appendChild(J);var F={img:J,assetData:H};return F},imageLoaded:y,footageLoaded:_,setCacheType:function(H,q){"svg"===H?(this._elementHelper=q,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},Y}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(f,y){if(this._cbs[f])for(var _=this._cbs[f],M=0;M<_.length;M+=1)_[M](y)},addEventListener:function(f,y){return this._cbs[f]||(this._cbs[f]=[]),this._cbs[f].push(y),function(){this.removeEventListener(f,y)}.bind(this)},removeEventListener:function(f,y){if(y){if(this._cbs[f]){for(var _=0,M=this._cbs[f].length;_<M;)this._cbs[f][_]===y&&(this._cbs[f].splice(_,1),_-=1,M-=1),_+=1;this._cbs[f].length||(this._cbs[f]=null)}}else this._cbs[f]=null}};var markerParser=function(){function f(y){for(var _,M=y.split("\r\n"),S={},T=0,Y=0;Y<M.length;Y+=1)2===(_=M[Y].split(":")).length&&(S[_[0]]=_[1].trim(),T+=1);if(0===T)throw new Error;return S}return function(y){for(var _=[],M=0;M<y.length;M+=1){var S=y[M],T={time:S.tm,duration:S.dr};try{T.payload=JSON.parse(y[M].cm)}catch{try{T.payload=f(y[M].cm)}catch{T.payload={name:y[M].cm}}}_.push(T)}return _}}(),ProjectInterface=function(){function f(y){this.compositions.push(y)}return function(){function y(_){for(var M=0,S=this.compositions.length;M<S;){if(this.compositions[M].data&&this.compositions[M].data.nm===_)return this.compositions[M].prepareFrame&&this.compositions[M].data.xt&&this.compositions[M].prepareFrame(this.currentFrame),this.compositions[M].compInterface;M+=1}return null}return y.compositions=[],y.currentFrame=0,y.registerComposition=f,y}}(),renderers={},registerRenderer=function(f,y){renderers[f]=y};function getRenderer(f){return renderers[f]}function _typeof$4(f){return(_typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(f)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0)};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(f){(f.wrapper||f.container)&&(this.wrapper=f.wrapper||f.container);var y="svg";f.animType?y=f.animType:f.renderer&&(y=f.renderer);var _=getRenderer(y);this.renderer=new _(this,f.rendererSettings),this.imagePreloader.setCacheType(y,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=y,this.loop=""===f.loop||null==f.loop||!0===f.loop||!1!==f.loop&&parseInt(f.loop,10),this.autoplay=!("autoplay"in f)||f.autoplay,this.name=f.name?f.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(f,"autoloadSegments")||f.autoloadSegments,this.assetsPath=f.assetsPath,this.initialSegment=f.initialSegment,f.audioFactory&&this.audioController.setAudioFactory(f.audioFactory),f.animationData?this.setupAnimation(f.animationData):f.path&&(this.path=-1!==f.path.lastIndexOf("\\")?f.path.substr(0,f.path.lastIndexOf("\\")+1):f.path.substr(0,f.path.lastIndexOf("/")+1),this.fileName=f.path.substr(f.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(f.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(f){dataManager.completeAnimation(f,this.configAnimation)},AnimationItem.prototype.setData=function(f,y){y&&"object"!==_typeof$4(y)&&(y=JSON.parse(y));var _={wrapper:f,animationData:y},M=f.attributes;_.path=M.getNamedItem("data-animation-path")?M.getNamedItem("data-animation-path").value:M.getNamedItem("data-bm-path")?M.getNamedItem("data-bm-path").value:M.getNamedItem("bm-path")?M.getNamedItem("bm-path").value:"",_.animType=M.getNamedItem("data-anim-type")?M.getNamedItem("data-anim-type").value:M.getNamedItem("data-bm-type")?M.getNamedItem("data-bm-type").value:M.getNamedItem("bm-type")?M.getNamedItem("bm-type").value:M.getNamedItem("data-bm-renderer")?M.getNamedItem("data-bm-renderer").value:M.getNamedItem("bm-renderer")?M.getNamedItem("bm-renderer").value:"canvas";var S=M.getNamedItem("data-anim-loop")?M.getNamedItem("data-anim-loop").value:M.getNamedItem("data-bm-loop")?M.getNamedItem("data-bm-loop").value:M.getNamedItem("bm-loop")?M.getNamedItem("bm-loop").value:"";"false"===S?_.loop=!1:"true"===S?_.loop=!0:""!==S&&(_.loop=parseInt(S,10));var T=M.getNamedItem("data-anim-autoplay")?M.getNamedItem("data-anim-autoplay").value:M.getNamedItem("data-bm-autoplay")?M.getNamedItem("data-bm-autoplay").value:!M.getNamedItem("bm-autoplay")||M.getNamedItem("bm-autoplay").value;_.autoplay="false"!==T,_.name=M.getNamedItem("data-name")?M.getNamedItem("data-name").value:M.getNamedItem("data-bm-name")?M.getNamedItem("data-bm-name").value:M.getNamedItem("bm-name")?M.getNamedItem("bm-name").value:"","false"===(M.getNamedItem("data-anim-prerender")?M.getNamedItem("data-anim-prerender").value:M.getNamedItem("data-bm-prerender")?M.getNamedItem("data-bm-prerender").value:M.getNamedItem("bm-prerender")?M.getNamedItem("bm-prerender").value:"")&&(_.prerender=!1),this.setParams(_)},AnimationItem.prototype.includeLayers=function(f){f.op>this.animationData.op&&(this.animationData.op=f.op,this.totalFrames=Math.floor(f.op-this.animationData.ip));var y,_,M=this.animationData.layers,S=M.length,T=f.layers,Y=T.length;for(_=0;_<Y;_+=1)for(y=0;y<S;){if(M[y].id===T[_].id){M[y]=T[_];break}y+=1}if((f.chars||f.fonts)&&(this.renderer.globalData.fontManager.addChars(f.chars),this.renderer.globalData.fontManager.addFonts(f.fonts,this.renderer.globalData.defs)),f.assets)for(S=f.assets.length,y=0;y<S;y+=1)this.animationData.assets.push(f.assets[y]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(f){this.animationData=f;var y=getExpressionsPlugin();y&&y.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var f=this.animationData.segments;if(!f||0===f.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var y=f.shift();this.timeCompleted=y.time*this.frameRate;var _=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(_,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(f){if(this.renderer)try{this.animationData=f,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(f),f.assets||(f.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(f.assets),this.markers=markerParser(f.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(y){this.triggerConfigError(y)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var f=getExpressionsPlugin();f&&f.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(f){this.isSubframeEnabled=!!f},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(f){this.triggerRenderFrameError(f)}},AnimationItem.prototype.play=function(f){f&&this.name!==f||!0===this.isPaused&&(this.isPaused=!1,this.trigger("_pause"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(f){f&&this.name!==f||!1===this.isPaused&&(this.isPaused=!0,this.trigger("_play"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(f){f&&this.name!==f||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(f){f&&this.name!==f||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(f){for(var y,_=0;_<this.markers.length;_+=1)if((y=this.markers[_]).payload&&y.payload.name===f)return y;return null},AnimationItem.prototype.goToAndStop=function(f,y,_){if(!_||this.name===_){var M=Number(f);if(isNaN(M)){var S=this.getMarkerData(f);S&&this.goToAndStop(S.time,!0)}else this.setCurrentRawFrameValue(y?f:f*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(f,y,_){if(!_||this.name===_){var M=Number(f);if(isNaN(M)){var S=this.getMarkerData(f);S&&(S.duration?this.playSegments([S.time,S.time+S.duration],!0):this.goToAndStop(S.time,!0))}else this.goToAndStop(M,y,_);this.play()}},AnimationItem.prototype.advanceTime=function(f){if(!0!==this.isPaused&&!1!==this.isLoaded){var y=this.currentRawFrame+f*this.frameModifier,_=!1;y>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?y>=this.totalFrames?(this.playCount+=1,this.checkSegments(y%this.totalFrames)||(this.setCurrentRawFrameValue(y%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(y):this.checkSegments(y>this.totalFrames?y%this.totalFrames:0)||(_=!0,y=this.totalFrames-1):y<0?this.checkSegments(y%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(_=!0,y=0):(this.setCurrentRawFrameValue(this.totalFrames+y%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(y),_&&(this.setCurrentRawFrameValue(y),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(f,y){this.playCount=0,f[1]<f[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=f[0]-f[1],this.timeCompleted=this.totalFrames,this.firstFrame=f[1],this.setCurrentRawFrameValue(this.totalFrames-.001-y)):f[1]>f[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=f[1]-f[0],this.timeCompleted=this.totalFrames,this.firstFrame=f[0],this.setCurrentRawFrameValue(.001+y)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(f,y){var _=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<f?_=f:this.currentRawFrame+this.firstFrame>y&&(_=y-f)),this.firstFrame=f,this.totalFrames=y-f,this.timeCompleted=this.totalFrames,-1!==_&&this.goToAndStop(_,!0)},AnimationItem.prototype.playSegments=function(f,y){if(y&&(this.segments.length=0),"object"===_typeof$4(f[0])){var _,M=f.length;for(_=0;_<M;_+=1)this.segments.push(f[_])}else this.segments.push(f);this.segments.length&&y&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(f){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),f&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(f){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),f),!0)},AnimationItem.prototype.destroy=function(f){f&&this.name!==f||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(f){this.currentRawFrame=f,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(f){this.playSpeed=f,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(f){this.playDirection=f<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setVolume=function(f,y){y&&this.name!==y||this.audioController.setVolume(f)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(f){f&&this.name!==f||this.audioController.mute()},AnimationItem.prototype.unmute=function(f){f&&this.name!==f||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(f){var y="";if(f.e)y=f.p;else if(this.assetsPath){var _=f.p;-1!==_.indexOf("images/")&&(_=_.split("/")[1]),y=this.assetsPath+_}else y=this.path,y+=f.u?f.u:"",y+=f.p;return y},AnimationItem.prototype.getAssetData=function(f){for(var y=0,_=this.assets.length;y<_;){if(f===this.assets[y].id)return this.assets[y];y+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(f){return f?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(f,y,_){try{this.renderer.getElementByPath(f).updateDocumentData(y,_)}catch{}},AnimationItem.prototype.trigger=function(f){if(this._cbs&&this._cbs[f])switch(f){case"enterFrame":this.triggerEvent(f,new BMEnterFrameEvent(f,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(f,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(f,new BMCompleteLoopEvent(f,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(f,new BMCompleteEvent(f,this.frameMult));break;case"segmentStart":this.triggerEvent(f,new BMSegmentStartEvent(f,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(f,new BMDestroyEvent(f,this));break;default:this.triggerEvent(f)}"enterFrame"===f&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(f,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===f&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(f,this.loop,this.playCount,this.frameMult)),"complete"===f&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(f,this.frameMult)),"segmentStart"===f&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(f,this.firstFrame,this.totalFrames)),"destroy"===f&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(f,this))},AnimationItem.prototype.triggerRenderFrameError=function(f){var y=new BMRenderFrameErrorEvent(f,this.currentFrame);this.triggerEvent("error",y),this.onError&&this.onError.call(this,y)},AnimationItem.prototype.triggerConfigError=function(f){var y=new BMConfigErrorEvent(f,this.currentFrame);this.triggerEvent("error",y),this.onError&&this.onError.call(this,y)};var animationManager=function(){var f={},y=[],_=0,M=0,S=0,T=!0,Y=!1;function H(K){for(var z=0,ee=K.target;z<M;)y[z].animation===ee&&(y.splice(z,1),z-=1,M-=1,ee.isPaused||F()),z+=1}function q(K,z){if(!K)return null;for(var ee=0;ee<M;){if(y[ee].elem===K&&null!==y[ee].elem)return y[ee].animation;ee+=1}var de=new AnimationItem;return G(de,K),de.setData(K,z),de}function J(){S+=1,j()}function F(){S-=1}function G(K,z){K.addEventListener("destroy",H),K.addEventListener("_active",J),K.addEventListener("_idle",F),y.push({elem:z,animation:K}),M+=1}function U(K){var z,ee=K-_;for(z=0;z<M;z+=1)y[z].animation.advanceTime(ee);_=K,S&&!Y?window.requestAnimationFrame(U):T=!0}function V(K){_=K,window.requestAnimationFrame(U)}function j(){!Y&&S&&T&&(window.requestAnimationFrame(V),T=!1)}return f.registerAnimation=q,f.loadAnimation=function(K){var z=new AnimationItem;return G(z,null),z.setParams(K),z},f.setSpeed=function(K,z){var ee;for(ee=0;ee<M;ee+=1)y[ee].animation.setSpeed(K,z)},f.setDirection=function(K,z){var ee;for(ee=0;ee<M;ee+=1)y[ee].animation.setDirection(K,z)},f.play=function(K){var z;for(z=0;z<M;z+=1)y[z].animation.play(K)},f.pause=function(K){var z;for(z=0;z<M;z+=1)y[z].animation.pause(K)},f.stop=function(K){var z;for(z=0;z<M;z+=1)y[z].animation.stop(K)},f.togglePause=function(K){var z;for(z=0;z<M;z+=1)y[z].animation.togglePause(K)},f.searchAnimations=function(K,z,ee){var de,pe=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Ee=pe.length;for(de=0;de<Ee;de+=1)ee&&pe[de].setAttribute("data-bm-type",ee),q(pe[de],K);if(z&&0===Ee){ee||(ee="svg");var je=document.getElementsByTagName("body")[0];je.innerText="";var ct=createTag("div");ct.style.width="100%",ct.style.height="100%",ct.setAttribute("data-bm-type",ee),je.appendChild(ct),q(ct,K)}},f.resize=function(){var K;for(K=0;K<M;K+=1)y[K].animation.resize()},f.goToAndStop=function(K,z,ee){var de;for(de=0;de<M;de+=1)y[de].animation.goToAndStop(K,z,ee)},f.destroy=function(K){var z;for(z=M-1;z>=0;z-=1)y[z].animation.destroy(K)},f.freeze=function(){Y=!0},f.unfreeze=function(){Y=!1,j()},f.setVolume=function(K,z){var ee;for(ee=0;ee<M;ee+=1)y[ee].animation.setVolume(K,z)},f.mute=function(K){var z;for(z=0;z<M;z+=1)y[z].animation.mute(K)},f.unmute=function(K){var z;for(z=0;z<M;z+=1)y[z].animation.unmute(K)},f.getRegisteredAnimations=function(){var K,z=y.length,ee=[];for(K=0;K<z;K+=1)ee.push(y[K].animation);return ee},f}(),BezierFactory=function(){var f={getBezierEasing:function(F,G,U,V,j){var K=j||("bez_"+F+"_"+G+"_"+U+"_"+V).replace(/\./g,"p");if(y[K])return y[K];var z=new J([F,G,U,V]);return y[K]=z,z}},y={},_=.1,M="function"==typeof Float32Array;function S(F,G){return 1-3*G+3*F}function T(F,G){return 3*G-6*F}function Y(F){return 3*F}function H(F,G,U){return((S(G,U)*F+T(G,U))*F+Y(G))*F}function q(F,G,U){return 3*S(G,U)*F*F+2*T(G,U)*F+Y(G)}function J(F){this._p=F,this._mSampleValues=M?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return J.prototype={get:function(F){var G=this._p[0],U=this._p[1],V=this._p[2],j=this._p[3];return this._precomputed||this._precompute(),G===U&&V===j?F:0===F?0:1===F?1:H(this._getTForX(F),U,j)},_precompute:function(){var F=this._p[0],G=this._p[1],U=this._p[2],V=this._p[3];this._precomputed=!0,F===G&&U===V||this._calcSampleValues()},_calcSampleValues:function(){for(var F=this._p[0],G=this._p[2],U=0;U<11;++U)this._mSampleValues[U]=H(U*_,F,G)},_getTForX:function(F){for(var G=this._p[0],U=this._p[2],V=this._mSampleValues,j=0,K=1;10!==K&&V[K]<=F;++K)j+=_;var z=j+(F-V[--K])/(V[K+1]-V[K])*_,ee=q(z,G,U);return ee>=.001?function(de,pe,Ee,je){for(var ct=0;ct<4;++ct){var Ke=q(pe,Ee,je);if(0===Ke)return pe;pe-=(H(pe,Ee,je)-de)/Ke}return pe}(F,z,G,U):0===ee?z:function(de,pe,Ee,je,ct){var Ke,lt,At=0;do{(Ke=H(lt=pe+(Ee-pe)/2,je,ct)-de)>0?Ee=lt:pe=lt}while(Math.abs(Ke)>1e-7&&++At<10);return lt}(F,j,j+_,G,U)}},f}(),pooling={double:function(f){return f.concat(createSizedArray(f.length))}},poolFactory=function(f,y,_){var M=0,S=f,T=createSizedArray(S);return{newElement:function(){return M?T[M-=1]:y()},release:function(Y){M===S&&(T=pooling.double(T),S*=2),_&&_(Y),T[M]=Y,M+=1}}},bezierLengthPool=poolFactory(8,function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}),segmentsLengthPool=poolFactory(8,function(){return{lengths:[],totalLength:0}},function(f){var y,_=f.lengths.length;for(y=0;y<_;y+=1)bezierLengthPool.release(f.lengths[y]);f.lengths.length=0});function bezFunction(){var f=Math;function y(J,F,G,U,V,j){var K=J*U+F*V+G*j-V*U-j*J-G*F;return K>-.001&&K<.001}var _=function(J,F,G,U){var V,j,K,z,ee,de,pe=getDefaultCurveSegments(),Ee=0,je=[],ct=[],Ke=bezierLengthPool.newElement();for(K=G.length,V=0;V<pe;V+=1){for(ee=V/(pe-1),de=0,j=0;j<K;j+=1)z=bmPow(1-ee,3)*J[j]+3*bmPow(1-ee,2)*ee*G[j]+3*(1-ee)*bmPow(ee,2)*U[j]+bmPow(ee,3)*F[j],je[j]=z,null!==ct[j]&&(de+=bmPow(je[j]-ct[j],2)),ct[j]=je[j];de&&(Ee+=de=bmSqrt(de)),Ke.percents[V]=ee,Ke.lengths[V]=Ee}return Ke.addedLength=Ee,Ke};function M(J){this.segmentLength=0,this.points=new Array(J)}function S(J,F){this.partialLength=J,this.point=F}var T,Y=(T={},function(J,F,G,U){var V=(J[0]+"_"+J[1]+"_"+F[0]+"_"+F[1]+"_"+G[0]+"_"+G[1]+"_"+U[0]+"_"+U[1]).replace(/\./g,"p");if(!T[V]){var j,K,z,ee,de,pe,Ee,je=getDefaultCurveSegments(),ct=0,Ke=null;2===J.length&&(J[0]!==F[0]||J[1]!==F[1])&&y(J[0],J[1],F[0],F[1],J[0]+G[0],J[1]+G[1])&&y(J[0],J[1],F[0],F[1],F[0]+U[0],F[1]+U[1])&&(je=2);var lt=new M(je);for(z=G.length,j=0;j<je;j+=1){for(Ee=createSizedArray(z),de=j/(je-1),pe=0,K=0;K<z;K+=1)ee=bmPow(1-de,3)*J[K]+3*bmPow(1-de,2)*de*(J[K]+G[K])+3*(1-de)*bmPow(de,2)*(F[K]+U[K])+bmPow(de,3)*F[K],Ee[K]=ee,null!==Ke&&(pe+=bmPow(Ee[K]-Ke[K],2));ct+=pe=bmSqrt(pe),lt.points[j]=new S(pe,Ee),Ke=Ee}lt.segmentLength=ct,T[V]=lt}return T[V]});function H(J,F){var G=F.percents,U=F.lengths,V=G.length,j=bmFloor((V-1)*J),K=J*F.addedLength,z=0;if(j===V-1||0===j||K===U[j])return G[j];for(var ee=U[j]>K?-1:1,de=!0;de;)if(U[j]<=K&&U[j+1]>K?(z=(K-U[j])/(U[j+1]-U[j]),de=!1):j+=ee,j<0||j>=V-1){if(j===V-1)return G[j];de=!1}return G[j]+(G[j+1]-G[j])*z}var q=createTypedArray("float32",8);return{getSegmentsLength:function(J){var F,G=segmentsLengthPool.newElement(),U=J.c,V=J.v,j=J.o,K=J.i,z=J._length,ee=G.lengths,de=0;for(F=0;F<z-1;F+=1)ee[F]=_(V[F],V[F+1],j[F],K[F+1]),de+=ee[F].addedLength;return U&&z&&(ee[F]=_(V[F],V[0],j[F],K[0]),de+=ee[F].addedLength),G.totalLength=de,G},getNewSegment:function(J,F,G,U,V,j,K){V<0?V=0:V>1&&(V=1);var z,ee=H(V,K),de=H(j=j>1?1:j,K),pe=J.length,Ee=1-ee,je=1-de,ct=Ee*Ee*Ee,Ke=ee*Ee*Ee*3,lt=ee*ee*Ee*3,At=ee*ee*ee,X=Ee*Ee*je,ze=ee*Ee*je+Ee*ee*je+Ee*Ee*de,Mt=ee*ee*je+Ee*ee*de+ee*Ee*de,bt=ee*ee*de,Ft=Ee*je*je,dn=ee*je*je+Ee*de*je+Ee*je*de,Sn=ee*de*je+Ee*de*de+ee*je*de,Ot=ee*de*de,Xe=je*je*je,St=de*je*je+je*de*je+je*je*de,_n=de*de*je+je*de*de+de*je*de,jn=de*de*de;for(z=0;z<pe;z+=1)q[4*z]=f.round(1e3*(ct*J[z]+Ke*G[z]+lt*U[z]+At*F[z]))/1e3,q[4*z+1]=f.round(1e3*(X*J[z]+ze*G[z]+Mt*U[z]+bt*F[z]))/1e3,q[4*z+2]=f.round(1e3*(Ft*J[z]+dn*G[z]+Sn*U[z]+Ot*F[z]))/1e3,q[4*z+3]=f.round(1e3*(Xe*J[z]+St*G[z]+_n*U[z]+jn*F[z]))/1e3;return q},getPointInSegment:function(J,F,G,U,V,j){var K=H(V,j),z=1-K;return[f.round(1e3*(z*z*z*J[0]+(K*z*z+z*K*z+z*z*K)*G[0]+(K*K*z+z*K*K+K*z*K)*U[0]+K*K*K*F[0]))/1e3,f.round(1e3*(z*z*z*J[1]+(K*z*z+z*K*z+z*z*K)*G[1]+(K*K*z+z*K*K+K*z*K)*U[1]+K*K*K*F[1]))/1e3]},buildBezierData:Y,pointOnLine2D:y,pointOnLine3D:function(J,F,G,U,V,j,K,z,ee){if(0===G&&0===j&&0===ee)return y(J,F,U,V,K,z);var de,pe=f.sqrt(f.pow(U-J,2)+f.pow(V-F,2)+f.pow(j-G,2)),Ee=f.sqrt(f.pow(K-J,2)+f.pow(z-F,2)+f.pow(ee-G,2)),je=f.sqrt(f.pow(K-U,2)+f.pow(z-V,2)+f.pow(ee-j,2));return(de=pe>Ee?pe>je?pe-Ee-je:je-Ee-pe:je>Ee?je-Ee-pe:Ee-pe-je)>-1e-4&&de<1e-4}}}var bez=bezFunction(),PropertyFactory=function(){var f=initialDefaultFrame,y=Math.abs;function _(U,V){var j,K=this.offsetTime;"multidimensional"===this.propType&&(j=createTypedArray("float32",this.pv.length));for(var z,ee,de,pe,Ee,je,ct,Ke,lt,At=V.lastIndex,X=At,ze=this.keyframes.length-1,Mt=!0;Mt;){if(z=this.keyframes[X],ee=this.keyframes[X+1],X===ze-1&&U>=ee.t-K){z.h&&(z=ee),At=0;break}if(ee.t-K>U){At=X;break}X<ze-1?X+=1:(At=0,Mt=!1)}de=this.keyframesMetadata[X]||{};var bt,Ft,dn,Sn,Ot,Xe,St,_n,jn,zn,Rs,Cr,gs,Zr,En,wi,Rr,or,ar,Pr,fi,Vn,os,ua,Br,Ln,mi,Rn=ee.t-K,Nn=z.t-K;if(z.to){de.bezierData||(de.bezierData=bez.buildBezierData(z.s,ee.s||z.e,z.to,z.ti));var cn=de.bezierData;if(U>=Rn||U<Nn){var Xn=U>=Rn?cn.points.length-1:0;for(Ee=cn.points[Xn].point.length,pe=0;pe<Ee;pe+=1)j[pe]=cn.points[Xn].point[pe]}else{de.__fnct?lt=de.__fnct:(lt=BezierFactory.getBezierEasing(z.o.x,z.o.y,z.i.x,z.i.y,z.n).get,de.__fnct=lt),je=lt((U-Nn)/(Rn-Nn));var Yn,li=cn.segmentLength*je,Gt=V.lastFrame<U&&V._lastKeyframeIndex===X?V._lastAddedLength:0;for(Ke=V.lastFrame<U&&V._lastKeyframeIndex===X?V._lastPoint:0,Mt=!0,ct=cn.points.length;Mt;){if(Gt+=cn.points[Ke].partialLength,0===li||0===je||Ke===cn.points.length-1){for(Ee=cn.points[Ke].point.length,pe=0;pe<Ee;pe+=1)j[pe]=cn.points[Ke].point[pe];break}if(li>=Gt&&li<Gt+cn.points[Ke+1].partialLength){for(Yn=(li-Gt)/cn.points[Ke+1].partialLength,Ee=cn.points[Ke].point.length,pe=0;pe<Ee;pe+=1)j[pe]=cn.points[Ke].point[pe]+(cn.points[Ke+1].point[pe]-cn.points[Ke].point[pe])*Yn;break}Ke<ct-1?Ke+=1:Mt=!1}V._lastPoint=Ke,V._lastAddedLength=Gt-cn.points[Ke].partialLength,V._lastKeyframeIndex=X}}else{var er;if(ze=z.s.length,bt=ee.s||z.e,this.sh&&1!==z.h)if(U>=Rn)j[0]=bt[0],j[1]=bt[1],j[2]=bt[2];else if(U<=Nn)j[0]=z.s[0],j[1]=z.s[1],j[2]=z.s[2];else{var Si=M(z.s),Mr=M(bt);Ft=j,gs=(U-Nn)/(Rn-Nn),ar=[],(En=(Pr=(Rs=Si)[0])*(ua=(Cr=Mr)[0])+(fi=Rs[1])*(Br=Cr[1])+(Vn=Rs[2])*(Ln=Cr[2])+(os=Rs[3])*(mi=Cr[3]))<0&&(En=-En,ua=-ua,Br=-Br,Ln=-Ln,mi=-mi),1-En>1e-6?(Zr=Math.acos(En),wi=Math.sin(Zr),Rr=Math.sin((1-gs)*Zr)/wi,or=Math.sin(gs*Zr)/wi):(Rr=1-gs,or=gs),ar[0]=Rr*Pr+or*ua,ar[1]=Rr*fi+or*Br,ar[2]=Rr*Vn+or*Ln,ar[3]=Rr*os+or*mi,Sn=(dn=ar)[0],Ot=dn[1],Xe=dn[2],St=dn[3],_n=Math.atan2(2*Ot*St-2*Sn*Xe,1-2*Ot*Ot-2*Xe*Xe),jn=Math.asin(2*Sn*Ot+2*Xe*St),zn=Math.atan2(2*Sn*St-2*Ot*Xe,1-2*Sn*Sn-2*Xe*Xe),Ft[0]=_n/degToRads,Ft[1]=jn/degToRads,Ft[2]=zn/degToRads}else for(X=0;X<ze;X+=1)1!==z.h&&(U>=Rn?je=1:U<Nn?je=0:(z.o.x.constructor===Array?(de.__fnct||(de.__fnct=[]),de.__fnct[X]?lt=de.__fnct[X]:(lt=BezierFactory.getBezierEasing(void 0===z.o.x[X]?z.o.x[0]:z.o.x[X],void 0===z.o.y[X]?z.o.y[0]:z.o.y[X],void 0===z.i.x[X]?z.i.x[0]:z.i.x[X],void 0===z.i.y[X]?z.i.y[0]:z.i.y[X]).get,de.__fnct[X]=lt)):de.__fnct?lt=de.__fnct:(lt=BezierFactory.getBezierEasing(z.o.x,z.o.y,z.i.x,z.i.y).get,z.keyframeMetadata=lt),je=lt((U-Nn)/(Rn-Nn)))),bt=ee.s||z.e,er=1===z.h?z.s[X]:z.s[X]+(bt[X]-z.s[X])*je,"multidimensional"===this.propType?j[X]=er:j=er}return V.lastIndex=At,j}function M(U){var V=U[0]*degToRads,j=U[1]*degToRads,K=U[2]*degToRads,z=Math.cos(V/2),ee=Math.cos(j/2),de=Math.cos(K/2),pe=Math.sin(V/2),Ee=Math.sin(j/2),je=Math.sin(K/2);return[pe*Ee*de+z*ee*je,pe*ee*de+z*Ee*je,z*Ee*de-pe*ee*je,z*ee*de-pe*Ee*je]}function S(){var U=this.comp.renderedFrame-this.offsetTime,V=this.keyframes[0].t-this.offsetTime,j=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(U===this._caching.lastFrame||this._caching.lastFrame!==f&&(this._caching.lastFrame>=j&&U>=j||this._caching.lastFrame<V&&U<V))){this._caching.lastFrame>=U&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var K=this.interpolateValue(U,this._caching);this.pv=K}return this._caching.lastFrame=U,this.pv}function T(U){var V;if("unidimensional"===this.propType)y(this.v-(V=U*this.mult))>1e-5&&(this.v=V,this._mdf=!0);else for(var j=0,K=this.v.length;j<K;)y(this.v[j]-(V=U[j]*this.mult))>1e-5&&(this.v[j]=V,this._mdf=!0),j+=1}function Y(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var U;this.lock=!0,this._mdf=this._isFirstFrame;var V=this.effectsSequence.length,j=this.kf?this.pv:this.data.k;for(U=0;U<V;U+=1)j=this.effectsSequence[U](j);this.setVValue(j),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function H(U){this.effectsSequence.push(U),this.container.addDynamicProperty(this)}function q(U,V,j,K){this.propType="unidimensional",this.mult=j||1,this.data=V,this.v=j?V.k*j:V.k,this.pv=V.k,this._mdf=!1,this.elem=U,this.container=K,this.comp=U.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=Y,this.setVValue=T,this.addEffect=H}function J(U,V,j,K){var z;this.propType="multidimensional",this.mult=j||1,this.data=V,this._mdf=!1,this.elem=U,this.container=K,this.comp=U.comp,this.k=!1,this.kf=!1,this.frameId=-1;var ee=V.k.length;for(this.v=createTypedArray("float32",ee),this.pv=createTypedArray("float32",ee),this.vel=createTypedArray("float32",ee),z=0;z<ee;z+=1)this.v[z]=V.k[z]*this.mult,this.pv[z]=V.k[z];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=Y,this.setVValue=T,this.addEffect=H}function F(U,V,j,K){this.propType="unidimensional",this.keyframes=V.k,this.keyframesMetadata=[],this.offsetTime=U.data.st,this.frameId=-1,this._caching={lastFrame:f,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=V,this.mult=j||1,this.elem=U,this.container=K,this.comp=U.comp,this.v=f,this.pv=f,this._isFirstFrame=!0,this.getValue=Y,this.setVValue=T,this.interpolateValue=_,this.effectsSequence=[S.bind(this)],this.addEffect=H}function G(U,V,j,K){var z;this.propType="multidimensional";var ee,de,pe,Ee,je=V.k.length;for(z=0;z<je-1;z+=1)V.k[z].to&&V.k[z].s&&V.k[z+1]&&V.k[z+1].s&&(de=V.k[z+1].s,pe=V.k[z].to,Ee=V.k[z].ti,(2===(ee=V.k[z].s).length&&(ee[0]!==de[0]||ee[1]!==de[1])&&bez.pointOnLine2D(ee[0],ee[1],de[0],de[1],ee[0]+pe[0],ee[1]+pe[1])&&bez.pointOnLine2D(ee[0],ee[1],de[0],de[1],de[0]+Ee[0],de[1]+Ee[1])||3===ee.length&&(ee[0]!==de[0]||ee[1]!==de[1]||ee[2]!==de[2])&&bez.pointOnLine3D(ee[0],ee[1],ee[2],de[0],de[1],de[2],ee[0]+pe[0],ee[1]+pe[1],ee[2]+pe[2])&&bez.pointOnLine3D(ee[0],ee[1],ee[2],de[0],de[1],de[2],de[0]+Ee[0],de[1]+Ee[1],de[2]+Ee[2]))&&(V.k[z].to=null,V.k[z].ti=null),ee[0]===de[0]&&ee[1]===de[1]&&0===pe[0]&&0===pe[1]&&0===Ee[0]&&0===Ee[1]&&(2===ee.length||ee[2]===de[2]&&0===pe[2]&&0===Ee[2])&&(V.k[z].to=null,V.k[z].ti=null));this.effectsSequence=[S.bind(this)],this.data=V,this.keyframes=V.k,this.keyframesMetadata=[],this.offsetTime=U.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=j||1,this.elem=U,this.container=K,this.comp=U.comp,this.getValue=Y,this.setVValue=T,this.interpolateValue=_,this.frameId=-1;var ct=V.k[0].s.length;for(this.v=createTypedArray("float32",ct),this.pv=createTypedArray("float32",ct),z=0;z<ct;z+=1)this.v[z]=f,this.pv[z]=f;this._caching={lastFrame:f,lastIndex:0,value:createTypedArray("float32",ct)},this.addEffect=H}return{getProp:function(U,V,j,K,z){var ee;if(V.k.length)if("number"==typeof V.k[0])ee=new J(U,V,K,z);else switch(j){case 0:ee=new F(U,V,K,z);break;case 1:ee=new G(U,V,K,z)}else ee=new q(U,V,K,z);return ee.effectsSequence.length&&z.addDynamicProperty(ee),ee}}}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(f){-1===this.dynamicProperties.indexOf(f)&&(this.dynamicProperties.push(f),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var f;this._mdf=!1;var y=this.dynamicProperties.length;for(f=0;f<y;f+=1)this.dynamicProperties[f].getValue(),this.dynamicProperties[f]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(f){this.container=f,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,function(){return createTypedArray("float32",2)});function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(f,y){this.c=f,this.setLength(y);for(var _=0;_<y;)this.v[_]=pointPool.newElement(),this.o[_]=pointPool.newElement(),this.i[_]=pointPool.newElement(),_+=1},ShapePath.prototype.setLength=function(f){for(;this._maxLength<f;)this.doubleArrayLength();this._length=f},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(f,y,_,M,S){var T;switch(this._length=Math.max(this._length,M+1),this._length>=this._maxLength&&this.doubleArrayLength(),_){case"v":T=this.v;break;case"i":T=this.i;break;case"o":T=this.o;break;default:T=[]}(!T[M]||T[M]&&!S)&&(T[M]=pointPool.newElement()),T[M][0]=f,T[M][1]=y},ShapePath.prototype.setTripleAt=function(f,y,_,M,S,T,Y,H){this.setXYAt(f,y,"v",Y,H),this.setXYAt(_,M,"o",Y,H),this.setXYAt(S,T,"i",Y,H)},ShapePath.prototype.reverse=function(){var f=new ShapePath;f.setPathData(this.c,this._length);var y=this.v,_=this.o,M=this.i,S=0;this.c&&(f.setTripleAt(y[0][0],y[0][1],M[0][0],M[0][1],_[0][0],_[0][1],0,!1),S=1);var T,Y=this._length-1,H=this._length;for(T=S;T<H;T+=1)f.setTripleAt(y[Y][0],y[Y][1],M[Y][0],M[Y][1],_[Y][0],_[Y][1],T,!1),Y-=1;return f};var shapePool=(factory=poolFactory(4,function(){return new ShapePath},function(f){var y,_=f._length;for(y=0;y<_;y+=1)pointPool.release(f.v[y]),pointPool.release(f.i[y]),pointPool.release(f.o[y]),f.v[y]=null,f.i[y]=null,f.o[y]=null;f._length=0,f.c=!1}),factory.clone=function(f){var y,_=factory.newElement(),M=void 0===f._length?f.v.length:f._length;for(_.setLength(M),_.c=f.c,y=0;y<M;y+=1)_.setTripleAt(f.v[y][0],f.v[y][1],f.o[y][0],f.o[y][1],f.i[y][0],f.i[y][1],y);return _},factory),factory;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(f){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=f,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var f;for(f=0;f<this._length;f+=1)shapePool.release(this.shapes[f]);this._length=0};var shapeCollectionPool=(ob={newShapeCollection:function(){return _length?pool[_length-=1]:new ShapeCollection},release:function(f){var y,_=f._length;for(y=0;y<_;y+=1)shapePool.release(f.shapes[y]);f._length=0,_length===_maxLength&&(pool=pooling.double(pool),_maxLength*=2),pool[_length]=f,_length+=1}},_length=0,_maxLength=4,pool=createSizedArray(_maxLength),ob),ob,_length,_maxLength,pool,ShapePropertyFactory=function(){var f=-999999;function y(V,j,K){var z,ee,de,pe,Ee,je,ct,Ke,At=K.lastIndex,X=this.keyframes;if(V<X[0].t-this.offsetTime)z=X[0].s[0],de=!0,At=0;else if(V>=X[X.length-1].t-this.offsetTime)z=X[X.length-1].s?X[X.length-1].s[0]:X[X.length-2].e[0],de=!0;else{for(var ze,Mt,bt,Ft=At,dn=X.length-1,Sn=!0;Sn&&(ze=X[Ft],!((Mt=X[Ft+1]).t-this.offsetTime>V));)Ft<dn-1?Ft+=1:Sn=!1;if(bt=this.keyframesMetadata[Ft]||{},At=Ft,!(de=1===ze.h)){if(V>=Mt.t-this.offsetTime)Ke=1;else if(V<ze.t-this.offsetTime)Ke=0;else{var Ot;bt.__fnct?Ot=bt.__fnct:(Ot=BezierFactory.getBezierEasing(ze.o.x,ze.o.y,ze.i.x,ze.i.y).get,bt.__fnct=Ot),Ke=Ot((V-(ze.t-this.offsetTime))/(Mt.t-this.offsetTime-(ze.t-this.offsetTime)))}ee=Mt.s?Mt.s[0]:ze.e[0]}z=ze.s[0]}for(je=j._length,ct=z.i[0].length,K.lastIndex=At,pe=0;pe<je;pe+=1)for(Ee=0;Ee<ct;Ee+=1)j.i[pe][Ee]=de?z.i[pe][Ee]:z.i[pe][Ee]+(ee.i[pe][Ee]-z.i[pe][Ee])*Ke,j.o[pe][Ee]=de?z.o[pe][Ee]:z.o[pe][Ee]+(ee.o[pe][Ee]-z.o[pe][Ee])*Ke,j.v[pe][Ee]=de?z.v[pe][Ee]:z.v[pe][Ee]+(ee.v[pe][Ee]-z.v[pe][Ee])*Ke}function _(){var V=this.comp.renderedFrame-this.offsetTime,j=this.keyframes[0].t-this.offsetTime,K=this.keyframes[this.keyframes.length-1].t-this.offsetTime,z=this._caching.lastFrame;return z!==f&&(z<j&&V<j||z>K&&V>K)||(this._caching.lastIndex=z<V?this._caching.lastIndex:0,this.interpolateShape(V,this.pv,this._caching)),this._caching.lastFrame=V,this.pv}function M(){this.paths=this.localShapeCollection}function S(V){(function(j,K){if(j._length!==K._length||j.c!==K.c)return!1;var z,ee=j._length;for(z=0;z<ee;z+=1)if(j.v[z][0]!==K.v[z][0]||j.v[z][1]!==K.v[z][1]||j.o[z][0]!==K.o[z][0]||j.o[z][1]!==K.o[z][1]||j.i[z][0]!==K.i[z][0]||j.i[z][1]!==K.i[z][1])return!1;return!0})(this.v,V)||(this.v=shapePool.clone(V),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function T(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var V,j;this.lock=!0,this._mdf=!1,V=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var K=this.effectsSequence.length;for(j=0;j<K;j+=1)V=this.effectsSequence[j](V);this.setVValue(V),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function Y(V,j,K){this.propType="shape",this.comp=V.comp,this.container=V,this.elem=V,this.data=j,this.k=!1,this.kf=!1,this._mdf=!1,this.v=shapePool.clone(3===K?j.pt.k:j.ks.k),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=M,this.effectsSequence=[]}function H(V){this.effectsSequence.push(V),this.container.addDynamicProperty(this)}function q(V,j,K){this.propType="shape",this.comp=V.comp,this.elem=V,this.container=V,this.offsetTime=V.data.st,this.keyframes=3===K?j.pt.k:j.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var z=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,z),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=f,this.reset=M,this._caching={lastFrame:f,lastIndex:0},this.effectsSequence=[_.bind(this)]}Y.prototype.interpolateShape=y,Y.prototype.getValue=T,Y.prototype.setVValue=S,Y.prototype.addEffect=H,q.prototype.getValue=T,q.prototype.interpolateShape=y,q.prototype.setVValue=S,q.prototype.addEffect=H;var J=function(){var V=roundCorner;function j(K,z){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=z.d,this.elem=K,this.comp=K.comp,this.frameId=-1,this.initDynamicPropertyContainer(K),this.p=PropertyFactory.getProp(K,z.p,1,0,this),this.s=PropertyFactory.getProp(K,z.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return j.prototype={reset:M,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var K=this.p.v[0],z=this.p.v[1],ee=this.s.v[0]/2,de=this.s.v[1]/2,pe=3!==this.d,Ee=this.v;Ee.v[0][0]=K,Ee.v[0][1]=z-de,Ee.v[1][0]=pe?K+ee:K-ee,Ee.v[1][1]=z,Ee.v[2][0]=K,Ee.v[2][1]=z+de,Ee.v[3][0]=pe?K-ee:K+ee,Ee.v[3][1]=z,Ee.i[0][0]=pe?K-ee*V:K+ee*V,Ee.i[0][1]=z-de,Ee.i[1][0]=pe?K+ee:K-ee,Ee.i[1][1]=z-de*V,Ee.i[2][0]=pe?K+ee*V:K-ee*V,Ee.i[2][1]=z+de,Ee.i[3][0]=pe?K-ee:K+ee,Ee.i[3][1]=z+de*V,Ee.o[0][0]=pe?K+ee*V:K-ee*V,Ee.o[0][1]=z-de,Ee.o[1][0]=pe?K+ee:K-ee,Ee.o[1][1]=z+de*V,Ee.o[2][0]=pe?K-ee*V:K+ee*V,Ee.o[2][1]=z+de,Ee.o[3][0]=pe?K-ee:K+ee,Ee.o[3][1]=z-de*V}},extendPrototype([DynamicPropertyContainer],j),j}(),F=function(){function V(j,K){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=j,this.comp=j.comp,this.data=K,this.frameId=-1,this.d=K.d,this.initDynamicPropertyContainer(j),1===K.sy?(this.ir=PropertyFactory.getProp(j,K.ir,0,0,this),this.is=PropertyFactory.getProp(j,K.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(j,K.pt,0,0,this),this.p=PropertyFactory.getProp(j,K.p,1,0,this),this.r=PropertyFactory.getProp(j,K.r,0,degToRads,this),this.or=PropertyFactory.getProp(j,K.or,0,0,this),this.os=PropertyFactory.getProp(j,K.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return V.prototype={reset:M,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var j,K,z,ee,de=2*Math.floor(this.pt.v),pe=2*Math.PI/de,Ee=!0,je=this.or.v,ct=this.ir.v,Ke=this.os.v,lt=this.is.v,At=2*Math.PI*je/(2*de),X=2*Math.PI*ct/(2*de),ze=-Math.PI/2;ze+=this.r.v;var Mt=3===this.data.d?-1:1;for(this.v._length=0,j=0;j<de;j+=1){z=Ee?Ke:lt,ee=Ee?At:X;var bt=(K=Ee?je:ct)*Math.cos(ze),Ft=K*Math.sin(ze),dn=0===bt&&0===Ft?0:Ft/Math.sqrt(bt*bt+Ft*Ft),Sn=0===bt&&0===Ft?0:-bt/Math.sqrt(bt*bt+Ft*Ft);this.v.setTripleAt(bt+=+this.p.v[0],Ft+=+this.p.v[1],bt-dn*ee*z*Mt,Ft-Sn*ee*z*Mt,bt+dn*ee*z*Mt,Ft+Sn*ee*z*Mt,j,!0),Ee=!Ee,ze+=pe*Mt}},convertPolygonToPath:function(){var j,K=Math.floor(this.pt.v),z=2*Math.PI/K,ee=this.or.v,de=this.os.v,pe=2*Math.PI*ee/(4*K),Ee=.5*-Math.PI,je=3===this.data.d?-1:1;for(Ee+=this.r.v,this.v._length=0,j=0;j<K;j+=1){var ct=ee*Math.cos(Ee),Ke=ee*Math.sin(Ee),lt=0===ct&&0===Ke?0:Ke/Math.sqrt(ct*ct+Ke*Ke),At=0===ct&&0===Ke?0:-ct/Math.sqrt(ct*ct+Ke*Ke);this.v.setTripleAt(ct+=+this.p.v[0],Ke+=+this.p.v[1],ct-lt*pe*de*je,Ke-At*pe*de*je,ct+lt*pe*de*je,Ke+At*pe*de*je,j,!0),Ee+=z*je}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],V),V}(),G=function(){function V(j,K){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=j,this.comp=j.comp,this.frameId=-1,this.d=K.d,this.initDynamicPropertyContainer(j),this.p=PropertyFactory.getProp(j,K.p,1,0,this),this.s=PropertyFactory.getProp(j,K.s,1,0,this),this.r=PropertyFactory.getProp(j,K.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return V.prototype={convertRectToPath:function(){var j=this.p.v[0],K=this.p.v[1],z=this.s.v[0]/2,ee=this.s.v[1]/2,de=bmMin(z,ee,this.r.v),pe=de*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(j+z,K-ee+de,j+z,K-ee+de,j+z,K-ee+pe,0,!0),this.v.setTripleAt(j+z,K+ee-de,j+z,K+ee-pe,j+z,K+ee-de,1,!0),0!==de?(this.v.setTripleAt(j+z-de,K+ee,j+z-de,K+ee,j+z-pe,K+ee,2,!0),this.v.setTripleAt(j-z+de,K+ee,j-z+pe,K+ee,j-z+de,K+ee,3,!0),this.v.setTripleAt(j-z,K+ee-de,j-z,K+ee-de,j-z,K+ee-pe,4,!0),this.v.setTripleAt(j-z,K-ee+de,j-z,K-ee+pe,j-z,K-ee+de,5,!0),this.v.setTripleAt(j-z+de,K-ee,j-z+de,K-ee,j-z+pe,K-ee,6,!0),this.v.setTripleAt(j+z-de,K-ee,j+z-pe,K-ee,j+z-de,K-ee,7,!0)):(this.v.setTripleAt(j-z,K+ee,j-z+pe,K+ee,j-z,K+ee,2),this.v.setTripleAt(j-z,K-ee,j-z,K-ee+pe,j-z,K-ee,3))):(this.v.setTripleAt(j+z,K-ee+de,j+z,K-ee+pe,j+z,K-ee+de,0,!0),0!==de?(this.v.setTripleAt(j+z-de,K-ee,j+z-de,K-ee,j+z-pe,K-ee,1,!0),this.v.setTripleAt(j-z+de,K-ee,j-z+pe,K-ee,j-z+de,K-ee,2,!0),this.v.setTripleAt(j-z,K-ee+de,j-z,K-ee+de,j-z,K-ee+pe,3,!0),this.v.setTripleAt(j-z,K+ee-de,j-z,K+ee-pe,j-z,K+ee-de,4,!0),this.v.setTripleAt(j-z+de,K+ee,j-z+de,K+ee,j-z+pe,K+ee,5,!0),this.v.setTripleAt(j+z-de,K+ee,j+z-pe,K+ee,j+z-de,K+ee,6,!0),this.v.setTripleAt(j+z,K+ee-de,j+z,K+ee-de,j+z,K+ee-pe,7,!0)):(this.v.setTripleAt(j-z,K-ee,j-z+pe,K-ee,j-z,K-ee,1,!0),this.v.setTripleAt(j-z,K+ee,j-z,K+ee-pe,j-z,K+ee,2,!0),this.v.setTripleAt(j+z,K+ee,j+z-pe,K+ee,j+z,K+ee,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:M},extendPrototype([DynamicPropertyContainer],V),V}();return{getShapeProp:function(V,j,K){var z;return 3===K||4===K?z=(3===K?j.pt:j.ks).k.length?new q(V,j,K):new Y(V,j,K):5===K?z=new G(V,j):6===K?z=new J(V,j):7===K&&(z=new F(V,j)),z.k&&V.addDynamicProperty(z),z},getConstructorFunction:function(){return Y},getKeyframedConstructorFunction:function(){return q}}}(),Matrix=function(){var f=Math.cos,y=Math.sin,_=Math.tan,M=Math.round;function S(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function T(Ot){if(0===Ot)return this;var Xe=f(Ot),St=y(Ot);return this._t(Xe,-St,0,0,St,Xe,0,0,0,0,1,0,0,0,0,1)}function Y(Ot){if(0===Ot)return this;var Xe=f(Ot),St=y(Ot);return this._t(1,0,0,0,0,Xe,-St,0,0,St,Xe,0,0,0,0,1)}function H(Ot){if(0===Ot)return this;var Xe=f(Ot),St=y(Ot);return this._t(Xe,0,St,0,0,1,0,0,-St,0,Xe,0,0,0,0,1)}function q(Ot){if(0===Ot)return this;var Xe=f(Ot),St=y(Ot);return this._t(Xe,-St,0,0,St,Xe,0,0,0,0,1,0,0,0,0,1)}function J(Ot,Xe){return this._t(1,Xe,Ot,1,0,0)}function F(Ot,Xe){return this.shear(_(Ot),_(Xe))}function G(Ot,Xe){var St=f(Xe),_n=y(Xe);return this._t(St,_n,0,0,-_n,St,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,_(Ot),1,0,0,0,0,1,0,0,0,0,1)._t(St,-_n,0,0,_n,St,0,0,0,0,1,0,0,0,0,1)}function U(Ot,Xe,St){return St||0===St||(St=1),1===Ot&&1===Xe&&1===St?this:this._t(Ot,0,0,0,0,Xe,0,0,0,0,St,0,0,0,0,1)}function V(Ot,Xe,St,_n,jn,zn,Rn,Nn,cn,Xn,Yn,li,Gt,qr,Kn,bi){return this.props[0]=Ot,this.props[1]=Xe,this.props[2]=St,this.props[3]=_n,this.props[4]=jn,this.props[5]=zn,this.props[6]=Rn,this.props[7]=Nn,this.props[8]=cn,this.props[9]=Xn,this.props[10]=Yn,this.props[11]=li,this.props[12]=Gt,this.props[13]=qr,this.props[14]=Kn,this.props[15]=bi,this}function j(Ot,Xe,St){return St=St||0,0!==Ot||0!==Xe||0!==St?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Ot,Xe,St,1):this}function K(Ot,Xe,St,_n,jn,zn,Rn,Nn,cn,Xn,Yn,li,Gt,qr,Kn,bi){var gn=this.props;if(1===Ot&&0===Xe&&0===St&&0===_n&&0===jn&&1===zn&&0===Rn&&0===Nn&&0===cn&&0===Xn&&1===Yn&&0===li)return gn[12]=gn[12]*Ot+gn[15]*Gt,gn[13]=gn[13]*zn+gn[15]*qr,gn[14]=gn[14]*Yn+gn[15]*Kn,gn[15]*=bi,this._identityCalculated=!1,this;var er=gn[0],Si=gn[1],Mr=gn[2],Rs=gn[3],Cr=gn[4],gs=gn[5],Zr=gn[6],En=gn[7],wi=gn[8],Rr=gn[9],or=gn[10],ar=gn[11],Pr=gn[12],fi=gn[13],Vn=gn[14],os=gn[15];return gn[0]=er*Ot+Si*jn+Mr*cn+Rs*Gt,gn[1]=er*Xe+Si*zn+Mr*Xn+Rs*qr,gn[2]=er*St+Si*Rn+Mr*Yn+Rs*Kn,gn[3]=er*_n+Si*Nn+Mr*li+Rs*bi,gn[4]=Cr*Ot+gs*jn+Zr*cn+En*Gt,gn[5]=Cr*Xe+gs*zn+Zr*Xn+En*qr,gn[6]=Cr*St+gs*Rn+Zr*Yn+En*Kn,gn[7]=Cr*_n+gs*Nn+Zr*li+En*bi,gn[8]=wi*Ot+Rr*jn+or*cn+ar*Gt,gn[9]=wi*Xe+Rr*zn+or*Xn+ar*qr,gn[10]=wi*St+Rr*Rn+or*Yn+ar*Kn,gn[11]=wi*_n+Rr*Nn+or*li+ar*bi,gn[12]=Pr*Ot+fi*jn+Vn*cn+os*Gt,gn[13]=Pr*Xe+fi*zn+Vn*Xn+os*qr,gn[14]=Pr*St+fi*Rn+Vn*Yn+os*Kn,gn[15]=Pr*_n+fi*Nn+Vn*li+os*bi,this._identityCalculated=!1,this}function z(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function ee(Ot){for(var Xe=0;Xe<16;){if(Ot.props[Xe]!==this.props[Xe])return!1;Xe+=1}return!0}function de(Ot){var Xe;for(Xe=0;Xe<16;Xe+=1)Ot.props[Xe]=this.props[Xe];return Ot}function pe(Ot){var Xe;for(Xe=0;Xe<16;Xe+=1)this.props[Xe]=Ot[Xe]}function Ee(Ot,Xe,St){return{x:Ot*this.props[0]+Xe*this.props[4]+St*this.props[8]+this.props[12],y:Ot*this.props[1]+Xe*this.props[5]+St*this.props[9]+this.props[13],z:Ot*this.props[2]+Xe*this.props[6]+St*this.props[10]+this.props[14]}}function je(Ot,Xe,St){return Ot*this.props[0]+Xe*this.props[4]+St*this.props[8]+this.props[12]}function ct(Ot,Xe,St){return Ot*this.props[1]+Xe*this.props[5]+St*this.props[9]+this.props[13]}function Ke(Ot,Xe,St){return Ot*this.props[2]+Xe*this.props[6]+St*this.props[10]+this.props[14]}function lt(){var Ot=this.props[0]*this.props[5]-this.props[1]*this.props[4],Xe=this.props[5]/Ot,St=-this.props[1]/Ot,_n=-this.props[4]/Ot,jn=this.props[0]/Ot,zn=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Ot,Rn=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Ot,Nn=new Matrix;return Nn.props[0]=Xe,Nn.props[1]=St,Nn.props[4]=_n,Nn.props[5]=jn,Nn.props[12]=zn,Nn.props[13]=Rn,Nn}function At(Ot){return this.getInverseMatrix().applyToPointArray(Ot[0],Ot[1],Ot[2]||0)}function X(Ot){var Xe,St=Ot.length,_n=[];for(Xe=0;Xe<St;Xe+=1)_n[Xe]=At(Ot[Xe]);return _n}function ze(Ot,Xe,St){var _n=createTypedArray("float32",6);if(this.isIdentity())_n[0]=Ot[0],_n[1]=Ot[1],_n[2]=Xe[0],_n[3]=Xe[1],_n[4]=St[0],_n[5]=St[1];else{var jn=this.props[0],zn=this.props[1],Rn=this.props[4],Nn=this.props[5],cn=this.props[12],Xn=this.props[13];_n[0]=Ot[0]*jn+Ot[1]*Rn+cn,_n[1]=Ot[0]*zn+Ot[1]*Nn+Xn,_n[2]=Xe[0]*jn+Xe[1]*Rn+cn,_n[3]=Xe[0]*zn+Xe[1]*Nn+Xn,_n[4]=St[0]*jn+St[1]*Rn+cn,_n[5]=St[0]*zn+St[1]*Nn+Xn}return _n}function Mt(Ot,Xe,St){return this.isIdentity()?[Ot,Xe,St]:[Ot*this.props[0]+Xe*this.props[4]+St*this.props[8]+this.props[12],Ot*this.props[1]+Xe*this.props[5]+St*this.props[9]+this.props[13],Ot*this.props[2]+Xe*this.props[6]+St*this.props[10]+this.props[14]]}function bt(Ot,Xe){if(this.isIdentity())return Ot+","+Xe;var St=this.props;return Math.round(100*(Ot*St[0]+Xe*St[4]+St[12]))/100+","+Math.round(100*(Ot*St[1]+Xe*St[5]+St[13]))/100}function Ft(){for(var Ot=0,Xe=this.props,St="matrix3d(";Ot<16;)St+=M(1e4*Xe[Ot])/1e4,St+=15===Ot?")":",",Ot+=1;return St}function dn(Ot){return Ot<1e-6&&Ot>0||Ot>-1e-6&&Ot<0?M(1e4*Ot)/1e4:Ot}function Sn(){var Ot=this.props;return"matrix("+dn(Ot[0])+","+dn(Ot[1])+","+dn(Ot[4])+","+dn(Ot[5])+","+dn(Ot[12])+","+dn(Ot[13])+")"}return function(){this.reset=S,this.rotate=T,this.rotateX=Y,this.rotateY=H,this.rotateZ=q,this.skew=F,this.skewFromAxis=G,this.shear=J,this.scale=U,this.setTransform=V,this.translate=j,this.transform=K,this.applyToPoint=Ee,this.applyToX=je,this.applyToY=ct,this.applyToZ=Ke,this.applyToPointArray=Mt,this.applyToTriplePoints=ze,this.applyToPointStringified=bt,this.toCSS=Ft,this.to2dCSS=Sn,this.clone=de,this.cloneFromProps=pe,this.equals=ee,this.inversePoints=X,this.inversePoint=At,this.getInverseMatrix=lt,this._t=this.transform,this.isIdentity=z,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(f){return(_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(f)}var lottie={},standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";function setLocation(f){setLocationHref(f)}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(f){setSubframeEnabled(f)}function setPrefix(f){setIdPrefix(f)}function loadAnimation(f){return!0===standalone&&(f.animationData=JSON.parse(animationData)),animationManager.loadAnimation(f)}function setQuality(f){if("string"==typeof f)switch(f){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(f)&&f>1&&setDefaultCurveSegments(f);getDefaultCurveSegments()>=50?roundValues(!1):roundValues(!0)}function inBrowser(){return typeof navigator<"u"}function installPlugin(f,y){"expressions"===f&&setExpressionsPlugin(y)}function getFactory(f){switch(f){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(f){for(var y=queryString.split("&"),_=0;_<y.length;_+=1){var M=y[_].split("=");if(decodeURIComponent(M[0])==f)return decodeURIComponent(M[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.9.6";var queryString="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)}catch(f){}var ShapeModifiers=(f={},y={},f.registerModifier=function(_,M){y[_]||(y[_]=M)},f.getModifier=function(_,M,S){return new y[_](M,S)},f),f,y;function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(f){if(!this.closed){f.sh.container.addDynamicProperty(f.sh);var y={shape:f.sh,data:f,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(y),this.addShapeToModifier(y),this._isAnimated&&f.setAsAnimated()}},ShapeModifier.prototype.init=function(f,y){this.shapes=[],this.elem=f,this.initDynamicPropertyContainer(f),this.initModifierProperties(f,y),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(f,y){this.s=PropertyFactory.getProp(f,y.s,0,.01,this),this.e=PropertyFactory.getProp(f,y.e,0,.01,this),this.o=PropertyFactory.getProp(f,y.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=y.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(f){f.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(f,y,_,M,S){var T=[];y<=1?T.push({s:f,e:y}):f>=1?T.push({s:f-1,e:y-1}):(T.push({s:f,e:1}),T.push({s:0,e:y-1}));var Y,H,q=[],J=T.length;for(Y=0;Y<J;Y+=1)(H=T[Y]).e*S<M||H.s*S>M+_||q.push([H.s*S<=M?0:(H.s*S-M)/_,H.e*S>=M+_?1:(H.e*S-M)/_]);return q.length||q.push([0,0]),q},TrimModifier.prototype.releasePathsData=function(f){var y,_=f.length;for(y=0;y<_;y+=1)segmentsLengthPool.release(f[y]);return f.length=0,f},TrimModifier.prototype.processShapes=function(f){var y,_,M,S;if(this._mdf||f){var T=this.o.v%360/360;if(T<0&&(T+=1),(y=this.s.v>1?1+T:this.s.v<0?0+T:this.s.v+T)>(_=this.e.v>1?1+T:this.e.v<0?0+T:this.e.v+T)){var Y=y;y=_,_=Y}y=1e-4*Math.round(1e4*y),_=1e-4*Math.round(1e4*_),this.sValue=y,this.eValue=_}else y=this.sValue,_=this.eValue;var H,q,J,F,G,U=this.shapes.length,V=0;if(_===y)for(S=0;S<U;S+=1)this.shapes[S].localShapeCollection.releaseShapes(),this.shapes[S].shape._mdf=!0,this.shapes[S].shape.paths=this.shapes[S].localShapeCollection,this._mdf&&(this.shapes[S].pathsData.length=0);else if(1===_&&0===y||0===_&&1===y){if(this._mdf)for(S=0;S<U;S+=1)this.shapes[S].pathsData.length=0,this.shapes[S].shape._mdf=!0}else{var j,K,z=[];for(S=0;S<U;S+=1)if((j=this.shapes[S]).shape._mdf||this._mdf||f||2===this.m){if(q=(M=j.shape.paths)._length,G=0,!j.shape._mdf&&j.pathsData.length)G=j.totalShapeLength;else{for(J=this.releasePathsData(j.pathsData),H=0;H<q;H+=1)F=bez.getSegmentsLength(M.shapes[H]),J.push(F),G+=F.totalLength;j.totalShapeLength=G,j.pathsData=J}V+=G,j.shape._mdf=!0}else j.shape.paths=j.localShapeCollection;var ee,de=y,pe=_,Ee=0;for(S=U-1;S>=0;S-=1)if((j=this.shapes[S]).shape._mdf){for((K=j.localShapeCollection).releaseShapes(),2===this.m&&U>1?(ee=this.calculateShapeEdges(y,_,j.totalShapeLength,Ee,V),Ee+=j.totalShapeLength):ee=[[de,pe]],q=ee.length,H=0;H<q;H+=1){de=ee[H][0],pe=ee[H][1],z.length=0,pe<=1?z.push({s:j.totalShapeLength*de,e:j.totalShapeLength*pe}):de>=1?z.push({s:j.totalShapeLength*(de-1),e:j.totalShapeLength*(pe-1)}):(z.push({s:j.totalShapeLength*de,e:j.totalShapeLength}),z.push({s:0,e:j.totalShapeLength*(pe-1)}));var je=this.addShapes(j,z[0]);if(z[0].s!==z[0].e){if(z.length>1)if(j.shape.paths.shapes[j.shape.paths._length-1].c){var ct=je.pop();this.addPaths(je,K),je=this.addShapes(j,z[1],ct)}else this.addPaths(je,K),je=this.addShapes(j,z[1]);this.addPaths(je,K)}}j.shape.paths=K}}},TrimModifier.prototype.addPaths=function(f,y){var _,M=f.length;for(_=0;_<M;_+=1)y.addShape(f[_])},TrimModifier.prototype.addSegment=function(f,y,_,M,S,T,Y){S.setXYAt(y[0],y[1],"o",T),S.setXYAt(_[0],_[1],"i",T+1),Y&&S.setXYAt(f[0],f[1],"v",T),S.setXYAt(M[0],M[1],"v",T+1)},TrimModifier.prototype.addSegmentFromArray=function(f,y,_,M){y.setXYAt(f[1],f[5],"o",_),y.setXYAt(f[2],f[6],"i",_+1),M&&y.setXYAt(f[0],f[4],"v",_),y.setXYAt(f[3],f[7],"v",_+1)},TrimModifier.prototype.addShapes=function(f,y,_){var M,S,T,Y,H,q,J,F,G=f.pathsData,U=f.shape.paths.shapes,V=f.shape.paths._length,j=0,K=[],z=!0;for(_?(H=_._length,F=_._length):(_=shapePool.newElement(),H=0,F=0),K.push(_),M=0;M<V;M+=1){for(q=G[M].lengths,_.c=U[M].c,T=U[M].c?q.length:q.length+1,S=1;S<T;S+=1)if(j+(Y=q[S-1]).addedLength<y.s)j+=Y.addedLength,_.c=!1;else{if(j>y.e){_.c=!1;break}y.s<=j&&y.e>=j+Y.addedLength?(this.addSegment(U[M].v[S-1],U[M].o[S-1],U[M].i[S],U[M].v[S],_,H,z),z=!1):(J=bez.getNewSegment(U[M].v[S-1],U[M].v[S],U[M].o[S-1],U[M].i[S],(y.s-j)/Y.addedLength,(y.e-j)/Y.addedLength,q[S-1]),this.addSegmentFromArray(J,_,H,z),z=!1,_.c=!1),j+=Y.addedLength,H+=1}if(U[M].c&&q.length){if(Y=q[S-1],j<=y.e){var ee=q[S-1].addedLength;y.s<=j&&y.e>=j+ee?(this.addSegment(U[M].v[S-1],U[M].o[S-1],U[M].i[0],U[M].v[0],_,H,z),z=!1):(J=bez.getNewSegment(U[M].v[S-1],U[M].v[0],U[M].o[S-1],U[M].i[0],(y.s-j)/ee,(y.e-j)/ee,q[S-1]),this.addSegmentFromArray(J,_,H,z),z=!1,_.c=!1)}else _.c=!1;j+=Y.addedLength,H+=1}if(_._length&&(_.setXYAt(_.v[F][0],_.v[F][1],"i",F),_.setXYAt(_.v[_._length-1][0],_.v[_._length-1][1],"o",_._length-1)),j>y.e)break;M<V-1&&(_=shapePool.newElement(),z=!0,K.push(_),H=0)}return K},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(f,y){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(f,y.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(f,y){var _=y/100,M=[0,0],S=f._length,T=0;for(T=0;T<S;T+=1)M[0]+=f.v[T][0],M[1]+=f.v[T][1];M[0]/=S,M[1]/=S;var U=shapePool.newElement();for(U.c=f.c,T=0;T<S;T+=1)U.setTripleAt(f.v[T][0]+(M[0]-f.v[T][0])*_,f.v[T][1]+(M[1]-f.v[T][1])*_,f.o[T][0]+(M[0]-f.o[T][0])*-_,f.o[T][1]+(M[1]-f.o[T][1])*-_,f.i[T][0]+(M[0]-f.i[T][0])*-_,f.i[T][1]+(M[1]-f.i[T][1])*-_,T);return U},PuckerAndBloatModifier.prototype.processShapes=function(f){var y,_,M,S,T,Y,H=this.shapes.length,q=this.amount.v;if(0!==q)for(_=0;_<H;_+=1){if(Y=(T=this.shapes[_]).localShapeCollection,T.shape._mdf||this._mdf||f)for(Y.releaseShapes(),T.shape._mdf=!0,y=T.shape.paths.shapes,S=T.shape.paths._length,M=0;M<S;M+=1)Y.addShape(this.processPath(y[M],q));T.shape.paths=T.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var f=[0,0];function y(_,M,S){if(this.elem=_,this.frameId=-1,this.propType="transform",this.data=M,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(S||_),M.p&&M.p.s?(this.px=PropertyFactory.getProp(_,M.p.x,0,0,this),this.py=PropertyFactory.getProp(_,M.p.y,0,0,this),M.p.z&&(this.pz=PropertyFactory.getProp(_,M.p.z,0,0,this))):this.p=PropertyFactory.getProp(_,M.p||{k:[0,0,0]},1,0,this),M.rx){if(this.rx=PropertyFactory.getProp(_,M.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(_,M.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(_,M.rz,0,degToRads,this),M.or.k[0].ti){var T,Y=M.or.k.length;for(T=0;T<Y;T+=1)M.or.k[T].to=null,M.or.k[T].ti=null}this.or=PropertyFactory.getProp(_,M.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(_,M.r||{k:0},0,degToRads,this);M.sk&&(this.sk=PropertyFactory.getProp(_,M.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(_,M.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(_,M.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(_,M.s||{k:[100,100,100]},1,.01,this),this.o=M.o?PropertyFactory.getProp(_,M.o,0,.01,_):{_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return y.prototype={applyToMatrix:function(_){var M=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||M,this.a&&_.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&_.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&_.skewFromAxis(-this.sk.v,this.sa.v),this.r?_.rotate(-this.r.v):_.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?_.translate(this.px.v,this.py.v,this.data.p.z?-this.pz.v:0):_.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(_){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||_){var M;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var S,T;if(M=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(S=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/M,0),T=this.p.getValueAtTime(this.p.keyframes[0].t/M,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(S=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/M,0),T=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/M,0)):(S=this.p.pv,T=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/M,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){S=[],T=[];var Y=this.px,H=this.py;Y._caching.lastFrame+Y.offsetTime<=Y.keyframes[0].t?(S[0]=Y.getValueAtTime((Y.keyframes[0].t+.01)/M,0),S[1]=H.getValueAtTime((H.keyframes[0].t+.01)/M,0),T[0]=Y.getValueAtTime(Y.keyframes[0].t/M,0),T[1]=H.getValueAtTime(H.keyframes[0].t/M,0)):Y._caching.lastFrame+Y.offsetTime>=Y.keyframes[Y.keyframes.length-1].t?(S[0]=Y.getValueAtTime(Y.keyframes[Y.keyframes.length-1].t/M,0),S[1]=H.getValueAtTime(H.keyframes[H.keyframes.length-1].t/M,0),T[0]=Y.getValueAtTime((Y.keyframes[Y.keyframes.length-1].t-.01)/M,0),T[1]=H.getValueAtTime((H.keyframes[H.keyframes.length-1].t-.01)/M,0)):(S=[Y.pv,H.pv],T[0]=Y.getValueAtTime((Y._caching.lastFrame+Y.offsetTime-.01)/M,Y.offsetTime),T[1]=H.getValueAtTime((H._caching.lastFrame+H.offsetTime-.01)/M,H.offsetTime))}else S=T=f;this.v.rotate(-Math.atan2(S[1]-T[1],S[0]-T[0]))}this.data.p&&this.data.p.s?this.v.translate(this.px.v,this.py.v,this.data.p.z?-this.pz.v:0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],y),y.prototype.addDynamicProperty=function(_){this._addDynamicProperty(_),this.elem.addDynamicProperty(_),this._isDirty=!0},y.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(_,M,S){return new y(_,M,S)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function getFontProperties(f){for(var y=f.fStyle?f.fStyle.split(" "):[],_="normal",M="normal",S=y.length,T=0;T<S;T+=1)switch(y[T].toLowerCase()){case"italic":M="italic";break;case"bold":_="700";break;case"black":_="900";break;case"medium":_="500";break;case"regular":case"normal":_="400";break;case"light":case"thin":_="200"}return{style:M,weight:f.fWeight||_}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(f,y){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(f,y.c,0,null,this),this.o=PropertyFactory.getProp(f,y.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(f,y.tr,this),this.so=PropertyFactory.getProp(f,y.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(f,y.tr.eo,0,.01,this),this.data=y,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(f,y,_,M,S,T){var Y=T?-1:1,H=M.s.v[0]+(1-M.s.v[0])*(1-S),q=M.s.v[1]+(1-M.s.v[1])*(1-S);f.translate(M.p.v[0]*Y*S,M.p.v[1]*Y*S,M.p.v[2]),y.translate(-M.a.v[0],-M.a.v[1],M.a.v[2]),y.rotate(-M.r.v*Y*S),y.translate(M.a.v[0],M.a.v[1],M.a.v[2]),_.translate(-M.a.v[0],-M.a.v[1],M.a.v[2]),_.scale(T?1/H:H,T?1/q:q),_.translate(M.a.v[0],M.a.v[1],M.a.v[2])},RepeaterModifier.prototype.init=function(f,y,_,M){for(this.elem=f,this.arr=y,this.pos=_,this.elemsData=M,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(f),this.initModifierProperties(f,y[_]);_>0;)this._elements.unshift(y[_-=1]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(f){var y,_=f.length;for(y=0;y<_;y+=1)f[y]._processed=!1,"gr"===f[y].ty&&this.resetElements(f[y].it)},RepeaterModifier.prototype.cloneElements=function(f){var y=JSON.parse(JSON.stringify(f));return this.resetElements(y),y},RepeaterModifier.prototype.changeGroupRender=function(f,y){var _,M=f.length;for(_=0;_<M;_+=1)f[_]._render=y,"gr"===f[_].ty&&this.changeGroupRender(f[_].it,y)},RepeaterModifier.prototype.processShapes=function(f){var y,_,M,S,T,Y=!1;if(this._mdf||f){var H,q=Math.ceil(this.c.v);if(this._groups.length<q){for(;this._groups.length<q;){var J={it:this.cloneElements(this._elements),ty:"gr"};J.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,J),this._groups.splice(0,0,J),this._currentCopies+=1}this.elem.reloadShapes(),Y=!0}for(T=0,M=0;M<=this._groups.length-1;M+=1){if(this._groups[M]._render=H=T<q,this.changeGroupRender(this._groups[M].it,H),!H){var F=this.elemsData[M].it,G=F[F.length-1];0!==G.transform.op.v?(G.transform.op._mdf=!0,G.transform.op.v=0):G.transform.op._mdf=!1}T+=1}this._currentCopies=q;var U=this.o.v,V=U%1,j=U>0?Math.floor(U):Math.ceil(U),K=this.pMatrix.props,z=this.rMatrix.props,ee=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var de,pe,Ee=0;if(U>0){for(;Ee<j;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),Ee+=1;V&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,V,!1),Ee+=V)}else if(U<0){for(;Ee>j;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),Ee-=1;V&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-V,!0),Ee-=V)}for(M=1===this.data.m?0:this._currentCopies-1,S=1===this.data.m?1:-1,T=this._currentCopies;T;){if(pe=(_=(y=this.elemsData[M].it)[y.length-1].transform.mProps.v.props).length,y[y.length-1].transform.mProps._mdf=!0,y[y.length-1].transform.op._mdf=!0,y[y.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+M/(this._currentCopies-1)*(this.eo.v-this.so.v),0!==Ee){for((0!==M&&1===S||M!==this._currentCopies-1&&-1===S)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(z[0],z[1],z[2],z[3],z[4],z[5],z[6],z[7],z[8],z[9],z[10],z[11],z[12],z[13],z[14],z[15]),this.matrix.transform(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5],ee[6],ee[7],ee[8],ee[9],ee[10],ee[11],ee[12],ee[13],ee[14],ee[15]),this.matrix.transform(K[0],K[1],K[2],K[3],K[4],K[5],K[6],K[7],K[8],K[9],K[10],K[11],K[12],K[13],K[14],K[15]),de=0;de<pe;de+=1)_[de]=this.matrix.props[de];this.matrix.reset()}else for(this.matrix.reset(),de=0;de<pe;de+=1)_[de]=this.matrix.props[de];Ee+=1,T-=1,M+=S}}else for(T=this._currentCopies,M=0,S=1;T;)_=(y=this.elemsData[M].it)[y.length-1].transform.mProps.v.props,y[y.length-1].transform.mProps._mdf=!1,y[y.length-1].transform.op._mdf=!1,T-=1,M+=S;return Y},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(f,y){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(f,y.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(f,y){var _,M=shapePool.newElement();M.c=f.c;var S,T,Y,H,q,J,F,G,U,V,j,K,z=f._length,ee=0;for(_=0;_<z;_+=1)T=f.i[_],(S=f.v[_])[0]===(Y=f.o[_])[0]&&S[1]===Y[1]&&S[0]===T[0]&&S[1]===T[1]?0!==_&&_!==z-1||f.c?(H=0===_?f.v[z-1]:f.v[_-1],J=(q=Math.sqrt(Math.pow(S[0]-H[0],2)+Math.pow(S[1]-H[1],2)))?Math.min(q/2,y)/q:0,F=j=S[0]+(H[0]-S[0])*J,G=K=S[1]-(S[1]-H[1])*J,M.setTripleAt(F,G,F-(F-S[0])*roundCorner,G-(G-S[1])*roundCorner,j,K,ee),ee+=1,H=_===z-1?f.v[0]:f.v[_+1],J=(q=Math.sqrt(Math.pow(S[0]-H[0],2)+Math.pow(S[1]-H[1],2)))?Math.min(q/2,y)/q:0,F=U=S[0]+(H[0]-S[0])*J,G=V=S[1]+(H[1]-S[1])*J,M.setTripleAt(F,G,U,V,j=F-(F-S[0])*roundCorner,K=G-(G-S[1])*roundCorner,ee),ee+=1):(M.setTripleAt(S[0],S[1],Y[0],Y[1],T[0],T[1],ee),ee+=1):(M.setTripleAt(f.v[_][0],f.v[_][1],f.o[_][0],f.o[_][1],f.i[_][0],f.i[_][1],ee),ee+=1);return M},RoundCornersModifier.prototype.processShapes=function(f){var y,_,M,S,T,Y,H=this.shapes.length,q=this.rd.v;if(0!==q)for(_=0;_<H;_+=1){if(Y=(T=this.shapes[_]).localShapeCollection,T.shape._mdf||this._mdf||f)for(Y.releaseShapes(),T.shape._mdf=!0,y=T.shape.paths.shapes,S=T.shape.paths._length,M=0;M<S;M+=1)Y.addShape(this.processPath(y[M],q));T.shape.paths=T.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var f={w:0,size:0,shapes:[],data:{shapes:[]}},y=[];y=y.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var _=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],M=[65039,8205];function S(q,J){var F=createTag("span");F.setAttribute("aria-hidden",!0),F.style.fontFamily=J;var G=createTag("span");G.innerText="giItT1WQy@!-/#",F.style.position="absolute",F.style.left="-10000px",F.style.top="-10000px",F.style.fontSize="300px",F.style.fontVariant="normal",F.style.fontStyle="normal",F.style.fontWeight="normal",F.style.letterSpacing="0",F.appendChild(G),document.body.appendChild(F);var U=G.offsetWidth;return G.style.fontFamily=function(V){var j,K=V.split(","),z=K.length,ee=[];for(j=0;j<z;j+=1)"sans-serif"!==K[j]&&"monospace"!==K[j]&&ee.push(K[j]);return ee.join(",")}(q)+", "+J,{node:G,w:U,parent:F}}function T(q,J){var F,G=document.body&&J?"svg":"canvas",U=getFontProperties(q);if("svg"===G){var V=createNS("text");V.style.fontSize="100px",V.setAttribute("font-family",q.fFamily),V.setAttribute("font-style",U.style),V.setAttribute("font-weight",U.weight),V.textContent="1",q.fClass?(V.style.fontFamily="inherit",V.setAttribute("class",q.fClass)):V.style.fontFamily=q.fFamily,J.appendChild(V),F=V}else{var j=new OffscreenCanvas(500,500).getContext("2d");j.font=U.style+" "+U.weight+" 100px "+q.fFamily,F=j}return{measureText:function(K){return"svg"===G?(F.textContent=K,F.getComputedTextLength()):F.measureText(K).width}}}var Y=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};return Y.isModifier=function(q,J){var F=q.toString(16)+J.toString(16);return-1!==_.indexOf(F)},Y.isZeroWidthJoiner=function(q,J){return J?q===M[0]&&J===M[1]:q===M[1]},Y.isCombinedCharacter=function(q){return-1!==y.indexOf(q)},Y.prototype={addChars:function(q){if(q){var J;this.chars||(this.chars=[]);var F,G,U=q.length,V=this.chars.length;for(J=0;J<U;J+=1){for(F=0,G=!1;F<V;)this.chars[F].style===q[J].style&&this.chars[F].fFamily===q[J].fFamily&&this.chars[F].ch===q[J].ch&&(G=!0),F+=1;G||(this.chars.push(q[J]),V+=1)}}},addFonts:function(q,J){if(q){if(this.chars)return this.isLoaded=!0,void(this.fonts=q.list);if(!document.body)return this.isLoaded=!0,q.list.forEach(function(Ee){Ee.helper=T(Ee),Ee.cache={}}),void(this.fonts=q.list);var F,G=q.list,U=G.length,V=U;for(F=0;F<U;F+=1){var j,K,z=!0;if(G[F].loaded=!1,G[F].monoCase=S(G[F].fFamily,"monospace"),G[F].sansCase=S(G[F].fFamily,"sans-serif"),G[F].fPath){if("p"===G[F].fOrigin||3===G[F].origin){if((j=document.querySelectorAll('style[f-forigin="p"][f-family="'+G[F].fFamily+'"], style[f-origin="3"][f-family="'+G[F].fFamily+'"]')).length>0&&(z=!1),z){var ee=createTag("style");ee.setAttribute("f-forigin",G[F].fOrigin),ee.setAttribute("f-origin",G[F].origin),ee.setAttribute("f-family",G[F].fFamily),ee.type="text/css",ee.innerText="@font-face {font-family: "+G[F].fFamily+"; font-style: normal; src: url('"+G[F].fPath+"');}",J.appendChild(ee)}}else if("g"===G[F].fOrigin||1===G[F].origin){for(j=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),K=0;K<j.length;K+=1)-1!==j[K].href.indexOf(G[F].fPath)&&(z=!1);if(z){var de=createTag("link");de.setAttribute("f-forigin",G[F].fOrigin),de.setAttribute("f-origin",G[F].origin),de.type="text/css",de.rel="stylesheet",de.href=G[F].fPath,document.body.appendChild(de)}}else if("t"===G[F].fOrigin||2===G[F].origin){for(j=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),K=0;K<j.length;K+=1)G[F].fPath===j[K].src&&(z=!1);if(z){var pe=createTag("link");pe.setAttribute("f-forigin",G[F].fOrigin),pe.setAttribute("f-origin",G[F].origin),pe.setAttribute("rel","stylesheet"),pe.setAttribute("href",G[F].fPath),J.appendChild(pe)}}}else G[F].loaded=!0,V-=1;G[F].helper=T(G[F],J),G[F].cache={},this.fonts.push(G[F])}0===V?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(q,J,F){for(var G=0,U=this.chars.length;G<U;){if(this.chars[G].ch===q&&this.chars[G].style===J&&this.chars[G].fFamily===F)return this.chars[G];G+=1}return("string"==typeof q&&13!==q.charCodeAt(0)||!q)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",q,J,F)),f},getFontByName:function(q){for(var J=0,F=this.fonts.length;J<F;){if(this.fonts[J].fName===q)return this.fonts[J];J+=1}return this.fonts[0]},measureText:function(q,J,F){var G=this.getFontByName(J),U=q.charCodeAt(0);if(!G.cache[U+1]){var V=G.helper;if(" "===q){var j=V.measureText("|"+q+"|"),K=V.measureText("||");G.cache[U+1]=(j-K)/100}else G.cache[U+1]=V.measureText(q)/100}return G.cache[U+1]*F},checkLoadedFonts:function(){var q,G=this.fonts.length,U=G;for(q=0;q<G;q+=1)this.fonts[q].loaded?U-=1:"n"===this.fonts[q].fOrigin||0===this.fonts[q].origin?this.fonts[q].loaded=!0:((this.fonts[q].monoCase.node.offsetWidth!==this.fonts[q].monoCase.w||this.fonts[q].sansCase.node.offsetWidth!==this.fonts[q].sansCase.w)&&(U-=1,this.fonts[q].loaded=!0),this.fonts[q].loaded&&(this.fonts[q].sansCase.parent.parentNode.removeChild(this.fonts[q].sansCase.parent),this.fonts[q].monoCase.parent.parentNode.removeChild(this.fonts[q].monoCase.parent)));0!==U&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}},Y}();function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(f){-1===this.renderableComponents.indexOf(f)&&this.renderableComponents.push(f)},removeRenderableComponent:function(f){-1!==this.renderableComponents.indexOf(f)&&this.renderableComponents.splice(this.renderableComponents.indexOf(f),1)},prepareRenderableFrame:function(f){this.checkLayerLimits(f)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(f){this.data.ip-this.data.st<=f&&this.data.op-this.data.st>f?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var f,y=this.renderableComponents.length;for(f=0;f<y;f+=1)this.renderableComponents[f].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var MaskManagerInterface=function(){function f(y,_){this._mask=y,this._data=_}return Object.defineProperty(f.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(f.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(y){var _,M=createSizedArray(y.viewData.length),S=y.viewData.length;for(_=0;_<S;_+=1)M[_]=new f(y.viewData[_],y.masksProperties[_]);return function(T){for(_=0;_<S;){if(y.masksProperties[_].nm===T)return M[_];_+=1}return null}}}(),ExpressionPropertyInterface=function(){var f={pv:0,v:0,mult:1},y={pv:[0,0,0],v:[0,0,0],mult:1};function _(S,T,Y){Object.defineProperty(S,"velocity",{get:function(){return T.getVelocityAtTime(T.comp.currentFrame)}}),S.numKeys=T.keyframes?T.keyframes.length:0,S.key=function(H){if(!S.numKeys)return 0;var q;q="s"in T.keyframes[H-1]?T.keyframes[H-1].s:"e"in T.keyframes[H-2]?T.keyframes[H-2].e:T.keyframes[H-2].s;var J="unidimensional"===Y?new Number(q):Object.assign({},q);return J.time=T.keyframes[H-1].t/T.elem.comp.globalData.frameRate,J.value="unidimensional"===Y?q[0]:q,J},S.valueAtTime=T.getValueAtTime,S.speedAtTime=T.getSpeedAtTime,S.velocityAtTime=T.getVelocityAtTime,S.propertyGroup=T.propertyGroup}function M(){return f}return function(S){return S?"unidimensional"===S.propType?function(T){T&&"pv"in T||(T=f);var Y=1/T.mult,H=T.pv*Y,q=new Number(H);return q.value=H,_(q,T,"unidimensional"),function(){return T.k&&T.getValue(),q.value!==(H=T.v*Y)&&((q=new Number(H)).value=H,_(q,T,"unidimensional")),q}}(S):function(T){T&&"pv"in T||(T=y);var Y=1/T.mult,H=T.data&&T.data.l||T.pv.length,q=createTypedArray("float32",H),J=createTypedArray("float32",H);return q.value=J,_(q,T,"multidimensional"),function(){T.k&&T.getValue();for(var F=0;F<H;F+=1)J[F]=T.v[F]*Y,q[F]=J[F];return q}}(S):M}}(),TransformExpressionInterface=function(f){function y(Y){switch(Y){case"scale":case"Scale":case"ADBE Scale":case 6:return y.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return y.rotation;case"ADBE Rotate X":return y.xRotation;case"ADBE Rotate Y":return y.yRotation;case"position":case"Position":case"ADBE Position":case 2:return y.position;case"ADBE Position_0":return y.xPosition;case"ADBE Position_1":return y.yPosition;case"ADBE Position_2":return y.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return y.anchorPoint;case"opacity":case"Opacity":case 11:return y.opacity;default:return null}}var _,M,S,T;return Object.defineProperty(y,"rotation",{get:ExpressionPropertyInterface(f.r||f.rz)}),Object.defineProperty(y,"zRotation",{get:ExpressionPropertyInterface(f.rz||f.r)}),Object.defineProperty(y,"xRotation",{get:ExpressionPropertyInterface(f.rx)}),Object.defineProperty(y,"yRotation",{get:ExpressionPropertyInterface(f.ry)}),Object.defineProperty(y,"scale",{get:ExpressionPropertyInterface(f.s)}),f.p?T=ExpressionPropertyInterface(f.p):(_=ExpressionPropertyInterface(f.px),M=ExpressionPropertyInterface(f.py),f.pz&&(S=ExpressionPropertyInterface(f.pz))),Object.defineProperty(y,"position",{get:function(){return f.p?T():[_(),M(),S?S():0]}}),Object.defineProperty(y,"xPosition",{get:ExpressionPropertyInterface(f.px)}),Object.defineProperty(y,"yPosition",{get:ExpressionPropertyInterface(f.py)}),Object.defineProperty(y,"zPosition",{get:ExpressionPropertyInterface(f.pz)}),Object.defineProperty(y,"anchorPoint",{get:ExpressionPropertyInterface(f.a)}),Object.defineProperty(y,"opacity",{get:ExpressionPropertyInterface(f.o)}),Object.defineProperty(y,"skew",{get:ExpressionPropertyInterface(f.sk)}),Object.defineProperty(y,"skewAxis",{get:ExpressionPropertyInterface(f.sa)}),Object.defineProperty(y,"orientation",{get:ExpressionPropertyInterface(f.or)}),y},LayerExpressionInterface=function(){function f(J){var F=new Matrix;return void 0!==J?this._elem.finalTransform.mProp.getValueAtTime(J).clone(F):this._elem.finalTransform.mProp.applyToMatrix(F),F}function y(J,F){var G=this.getMatrix(F);return G.props[12]=0,G.props[13]=0,G.props[14]=0,this.applyPoint(G,J)}function _(J,F){var G=this.getMatrix(F);return this.applyPoint(G,J)}function M(J,F){var G=this.getMatrix(F);return G.props[12]=0,G.props[13]=0,G.props[14]=0,this.invertPoint(G,J)}function S(J,F){var G=this.getMatrix(F);return this.invertPoint(G,J)}function T(J,F){if(this._elem.hierarchy&&this._elem.hierarchy.length){var G,U=this._elem.hierarchy.length;for(G=0;G<U;G+=1)this._elem.hierarchy[G].finalTransform.mProp.applyToMatrix(J)}return J.applyToPointArray(F[0],F[1],F[2]||0)}function Y(J,F){if(this._elem.hierarchy&&this._elem.hierarchy.length){var G,U=this._elem.hierarchy.length;for(G=0;G<U;G+=1)this._elem.hierarchy[G].finalTransform.mProp.applyToMatrix(J)}return J.inversePoint(F)}function H(J){var F=new Matrix;if(F.reset(),this._elem.finalTransform.mProp.applyToMatrix(F),this._elem.hierarchy&&this._elem.hierarchy.length){var G,U=this._elem.hierarchy.length;for(G=0;G<U;G+=1)this._elem.hierarchy[G].finalTransform.mProp.applyToMatrix(F);return F.inversePoint(J)}return F.inversePoint(J)}function q(){return[1,1,1,1]}return function(J){var F;function G(V){switch(V){case"ADBE Root Vectors Group":case"Contents":case 2:return G.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return F;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return G.effect;case"ADBE Text Properties":return G.textInterface;default:return null}}G.getMatrix=f,G.invertPoint=Y,G.applyPoint=T,G.toWorld=_,G.toWorldVec=y,G.fromWorld=S,G.fromWorldVec=M,G.toComp=_,G.fromComp=H,G.sampleImage=q,G.sourceRectAtTime=J.sourceRectAtTime.bind(J),G._elem=J;var U=getDescriptor(F=TransformExpressionInterface(J.finalTransform.mProp),"anchorPoint");return Object.defineProperties(G,{hasParent:{get:function(){return J.hierarchy.length}},parent:{get:function(){return J.hierarchy[0].layerInterface}},rotation:getDescriptor(F,"rotation"),scale:getDescriptor(F,"scale"),position:getDescriptor(F,"position"),opacity:getDescriptor(F,"opacity"),anchorPoint:U,anchor_point:U,transform:{get:function(){return F}},active:{get:function(){return J.isInRange}}}),G.startTime=J.data.st,G.index=J.data.ind,G.source=J.data.refId,G.height=0===J.data.ty?J.data.h:100,G.width=0===J.data.ty?J.data.w:100,G.inPoint=J.data.ip/J.comp.globalData.frameRate,G.outPoint=J.data.op/J.comp.globalData.frameRate,G._name=J.data.nm,G.registerMaskInterface=function(V){G.mask=new MaskManagerInterface(V,J)},G.registerEffectsInterface=function(V){G.effect=V},G}}(),propertyGroupFactory=function(f,y){return function(_){return(_=void 0===_?1:_)<=0?f:y(_-1)}},PropertyInterface=function(f,y){var _={_name:f};return function(M){return(M=void 0===M?1:M)<=0?_:y(M-1)}},EffectsExpressionInterface=function(){function f(_,M,S,T){function Y(G){for(var U=_.ef,V=0,j=U.length;V<j;){if(G===U[V].nm||G===U[V].mn||G===U[V].ix)return 5===U[V].ty?J[V]:J[V]();V+=1}throw new Error}var H,q=propertyGroupFactory(Y,S),J=[],F=_.ef.length;for(H=0;H<F;H+=1)J.push(5===_.ef[H].ty?f(_.ef[H],M.effectElements[H],M.effectElements[H].propertyGroup,T):y(M.effectElements[H],_.ef[H].ty,T,q));return"ADBE Color Control"===_.mn&&Object.defineProperty(Y,"color",{get:function(){return J[0]()}}),Object.defineProperties(Y,{numProperties:{get:function(){return _.np}},_name:{value:_.nm},propertyGroup:{value:q}}),Y.active=Y.enabled=0!==_.en,Y}function y(_,M,S,T){var Y=ExpressionPropertyInterface(_.p);return _.p.setGroupProperty&&_.p.setGroupProperty(PropertyInterface("",T)),function(){return 10===M?S.comp.compInterface(_.p.v):Y()}}return{createEffectsInterface:function(_,M){if(_.effectsManager){var S,T=[],Y=_.data.ef,H=_.effectsManager.effectElements.length;for(S=0;S<H;S+=1)T.push(f(Y[S],_.effectsManager.effectElements[S],M,_));var q=_.data.ef||[],J=function(F){for(S=0,H=q.length;S<H;){if(F===q[S].nm||F===q[S].mn||F===q[S].ix)return T[S];S+=1}return null};return Object.defineProperty(J,"numProperties",{get:function(){return q.length}}),J}return null}}}(),CompExpressionInterface=function(f){function y(_){for(var M=0,S=f.layers.length;M<S;){if(f.layers[M].nm===_||f.layers[M].ind===_)return f.elements[M].layerInterface;M+=1}return null}return Object.defineProperty(y,"_name",{value:f.data.nm}),y.layer=y,y.pixelAspect=1,y.height=f.data.h||f.globalData.compSize.h,y.width=f.data.w||f.globalData.compSize.w,y.pixelAspect=1,y.frameDuration=1/f.globalData.frameRate,y.displayStartTime=0,y.numLayers=f.layers.length,y},ShapePathInterface=function(f,y,_){var M=y.sh;function S(Y){return"Shape"===Y||"shape"===Y||"Path"===Y||"path"===Y||"ADBE Vector Shape"===Y||2===Y?S.path:null}var T=propertyGroupFactory(S,_);return M.setGroupProperty(PropertyInterface("Path",T)),Object.defineProperties(S,{path:{get:function(){return M.k&&M.getValue(),M}},shape:{get:function(){return M.k&&M.getValue(),M}},_name:{value:f.nm},ix:{value:f.ix},propertyIndex:{value:f.ix},mn:{value:f.mn},propertyGroup:{value:_}}),S},ShapeExpressionInterface=function(){function f(V,j,K){var z,ee=[],de=V?V.length:0;for(z=0;z<de;z+=1)"gr"===V[z].ty?ee.push(y(V[z],j[z],K)):"fl"===V[z].ty?ee.push(_(V[z],j[z],K)):"st"===V[z].ty?ee.push(T(V[z],j[z],K)):"tm"===V[z].ty?ee.push(Y(V[z],j[z],K)):"tr"===V[z].ty||ee.push("el"===V[z].ty?q(V[z],j[z],K):"sr"===V[z].ty?J(V[z],j[z],K):"sh"===V[z].ty?ShapePathInterface(V[z],j[z],K):"rc"===V[z].ty?F(V[z],j[z],K):"rd"===V[z].ty?G(V[z],j[z],K):"rp"===V[z].ty?U(V[z],j[z],K):"gf"===V[z].ty?M(V[z],j[z],K):function(){return null});return ee}function y(V,j,K){var z=function(pe){switch(pe){case"ADBE Vectors Group":case"Contents":case 2:return z.content;default:return z.transform}};z.propertyGroup=propertyGroupFactory(z,K);var ee=function(pe,Ee,je){var ct,Ke=function(At){for(var X=0,ze=ct.length;X<ze;){if(ct[X]._name===At||ct[X].mn===At||ct[X].propertyIndex===At||ct[X].ix===At||ct[X].ind===At)return ct[X];X+=1}return"number"==typeof At?ct[At-1]:null};Ke.propertyGroup=propertyGroupFactory(Ke,je),ct=f(pe.it,Ee.it,Ke.propertyGroup),Ke.numProperties=ct.length;var lt=H(pe.it[pe.it.length-1],Ee.it[Ee.it.length-1],Ke.propertyGroup);return Ke.transform=lt,Ke.propertyIndex=pe.cix,Ke._name=pe.nm,Ke}(V,j,z.propertyGroup),de=H(V.it[V.it.length-1],j.it[j.it.length-1],z.propertyGroup);return z.content=ee,z.transform=de,Object.defineProperty(z,"_name",{get:function(){return V.nm}}),z.numProperties=V.np,z.propertyIndex=V.ix,z.nm=V.nm,z.mn=V.mn,z}function _(V,j,K){function z(ee){return"Color"===ee||"color"===ee?z.color:"Opacity"===ee||"opacity"===ee?z.opacity:null}return Object.defineProperties(z,{color:{get:ExpressionPropertyInterface(j.c)},opacity:{get:ExpressionPropertyInterface(j.o)},_name:{value:V.nm},mn:{value:V.mn}}),j.c.setGroupProperty(PropertyInterface("Color",K)),j.o.setGroupProperty(PropertyInterface("Opacity",K)),z}function M(V,j,K){function z(ee){return"Start Point"===ee||"start point"===ee?z.startPoint:"End Point"===ee||"end point"===ee?z.endPoint:"Opacity"===ee||"opacity"===ee?z.opacity:null}return Object.defineProperties(z,{startPoint:{get:ExpressionPropertyInterface(j.s)},endPoint:{get:ExpressionPropertyInterface(j.e)},opacity:{get:ExpressionPropertyInterface(j.o)},type:{get:function(){return"a"}},_name:{value:V.nm},mn:{value:V.mn}}),j.s.setGroupProperty(PropertyInterface("Start Point",K)),j.e.setGroupProperty(PropertyInterface("End Point",K)),j.o.setGroupProperty(PropertyInterface("Opacity",K)),z}function T(V,j,K){var z,Ke,ee=propertyGroupFactory(ct,K),de=propertyGroupFactory(je,ee),Ee=V.d?V.d.length:0,je={};for(z=0;z<Ee;z+=1)Ke=z,Object.defineProperty(je,V.d[Ke].nm,{get:ExpressionPropertyInterface(j.d.dataProps[Ke].p)}),j.d.dataProps[z].p.setGroupProperty(de);function ct(Ke){return"Color"===Ke||"color"===Ke?ct.color:"Opacity"===Ke||"opacity"===Ke?ct.opacity:"Stroke Width"===Ke||"stroke width"===Ke?ct.strokeWidth:null}return Object.defineProperties(ct,{color:{get:ExpressionPropertyInterface(j.c)},opacity:{get:ExpressionPropertyInterface(j.o)},strokeWidth:{get:ExpressionPropertyInterface(j.w)},dash:{get:function(){return je}},_name:{value:V.nm},mn:{value:V.mn}}),j.c.setGroupProperty(PropertyInterface("Color",ee)),j.o.setGroupProperty(PropertyInterface("Opacity",ee)),j.w.setGroupProperty(PropertyInterface("Stroke Width",ee)),ct}function Y(V,j,K){function z(de){return de===V.e.ix||"End"===de||"end"===de?z.end:de===V.s.ix?z.start:de===V.o.ix?z.offset:null}var ee=propertyGroupFactory(z,K);return z.propertyIndex=V.ix,j.s.setGroupProperty(PropertyInterface("Start",ee)),j.e.setGroupProperty(PropertyInterface("End",ee)),j.o.setGroupProperty(PropertyInterface("Offset",ee)),z.propertyIndex=V.ix,z.propertyGroup=K,Object.defineProperties(z,{start:{get:ExpressionPropertyInterface(j.s)},end:{get:ExpressionPropertyInterface(j.e)},offset:{get:ExpressionPropertyInterface(j.o)},_name:{value:V.nm}}),z.mn=V.mn,z}function H(V,j,K){function z(de){return V.a.ix===de||"Anchor Point"===de?z.anchorPoint:V.o.ix===de||"Opacity"===de?z.opacity:V.p.ix===de||"Position"===de?z.position:V.r.ix===de||"Rotation"===de||"ADBE Vector Rotation"===de?z.rotation:V.s.ix===de||"Scale"===de?z.scale:V.sk&&V.sk.ix===de||"Skew"===de?z.skew:V.sa&&V.sa.ix===de||"Skew Axis"===de?z.skewAxis:null}var ee=propertyGroupFactory(z,K);return j.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",ee)),j.transform.mProps.p.setGroupProperty(PropertyInterface("Position",ee)),j.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",ee)),j.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",ee)),j.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",ee)),j.transform.mProps.sk&&(j.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",ee)),j.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",ee))),j.transform.op.setGroupProperty(PropertyInterface("Opacity",ee)),Object.defineProperties(z,{opacity:{get:ExpressionPropertyInterface(j.transform.mProps.o)},position:{get:ExpressionPropertyInterface(j.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(j.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(j.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(j.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(j.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(j.transform.mProps.sa)},_name:{value:V.nm}}),z.ty="tr",z.mn=V.mn,z.propertyGroup=K,z}function q(V,j,K){function z(pe){return V.p.ix===pe?z.position:V.s.ix===pe?z.size:null}var ee=propertyGroupFactory(z,K);z.propertyIndex=V.ix;var de="tm"===j.sh.ty?j.sh.prop:j.sh;return de.s.setGroupProperty(PropertyInterface("Size",ee)),de.p.setGroupProperty(PropertyInterface("Position",ee)),Object.defineProperties(z,{size:{get:ExpressionPropertyInterface(de.s)},position:{get:ExpressionPropertyInterface(de.p)},_name:{value:V.nm}}),z.mn=V.mn,z}function J(V,j,K){function z(pe){return V.p.ix===pe?z.position:V.r.ix===pe?z.rotation:V.pt.ix===pe?z.points:V.or.ix===pe||"ADBE Vector Star Outer Radius"===pe?z.outerRadius:V.os.ix===pe?z.outerRoundness:!V.ir||V.ir.ix!==pe&&"ADBE Vector Star Inner Radius"!==pe?V.is&&V.is.ix===pe?z.innerRoundness:null:z.innerRadius}var ee=propertyGroupFactory(z,K),de="tm"===j.sh.ty?j.sh.prop:j.sh;return z.propertyIndex=V.ix,de.or.setGroupProperty(PropertyInterface("Outer Radius",ee)),de.os.setGroupProperty(PropertyInterface("Outer Roundness",ee)),de.pt.setGroupProperty(PropertyInterface("Points",ee)),de.p.setGroupProperty(PropertyInterface("Position",ee)),de.r.setGroupProperty(PropertyInterface("Rotation",ee)),V.ir&&(de.ir.setGroupProperty(PropertyInterface("Inner Radius",ee)),de.is.setGroupProperty(PropertyInterface("Inner Roundness",ee))),Object.defineProperties(z,{position:{get:ExpressionPropertyInterface(de.p)},rotation:{get:ExpressionPropertyInterface(de.r)},points:{get:ExpressionPropertyInterface(de.pt)},outerRadius:{get:ExpressionPropertyInterface(de.or)},outerRoundness:{get:ExpressionPropertyInterface(de.os)},innerRadius:{get:ExpressionPropertyInterface(de.ir)},innerRoundness:{get:ExpressionPropertyInterface(de.is)},_name:{value:V.nm}}),z.mn=V.mn,z}function F(V,j,K){function z(pe){return V.p.ix===pe?z.position:V.r.ix===pe?z.roundness:V.s.ix===pe||"Size"===pe||"ADBE Vector Rect Size"===pe?z.size:null}var ee=propertyGroupFactory(z,K),de="tm"===j.sh.ty?j.sh.prop:j.sh;return z.propertyIndex=V.ix,de.p.setGroupProperty(PropertyInterface("Position",ee)),de.s.setGroupProperty(PropertyInterface("Size",ee)),de.r.setGroupProperty(PropertyInterface("Rotation",ee)),Object.defineProperties(z,{position:{get:ExpressionPropertyInterface(de.p)},roundness:{get:ExpressionPropertyInterface(de.r)},size:{get:ExpressionPropertyInterface(de.s)},_name:{value:V.nm}}),z.mn=V.mn,z}function G(V,j,K){function z(pe){return V.r.ix===pe||"Round Corners 1"===pe?z.radius:null}var ee=propertyGroupFactory(z,K),de=j;return z.propertyIndex=V.ix,de.rd.setGroupProperty(PropertyInterface("Radius",ee)),Object.defineProperties(z,{radius:{get:ExpressionPropertyInterface(de.rd)},_name:{value:V.nm}}),z.mn=V.mn,z}function U(V,j,K){function z(pe){return V.c.ix===pe||"Copies"===pe?z.copies:V.o.ix===pe||"Offset"===pe?z.offset:null}var ee=propertyGroupFactory(z,K),de=j;return z.propertyIndex=V.ix,de.c.setGroupProperty(PropertyInterface("Copies",ee)),de.o.setGroupProperty(PropertyInterface("Offset",ee)),Object.defineProperties(z,{copies:{get:ExpressionPropertyInterface(de.c)},offset:{get:ExpressionPropertyInterface(de.o)},_name:{value:V.nm}}),z.mn=V.mn,z}return function(V,j,K){var z;function ee(de){if("number"==typeof de)return 0===(de=void 0===de?1:de)?K:z[de-1];for(var pe=0,Ee=z.length;pe<Ee;){if(z[pe]._name===de)return z[pe];pe+=1}return null}return ee.propertyGroup=propertyGroupFactory(ee,function(){return K}),z=f(V,j,ee.propertyGroup),ee.numProperties=z.length,ee._name="Contents",ee}}(),TextExpressionInterface=function(f){var y,_;function M(S){return"ADBE Text Document"===S?M.sourceText:null}return Object.defineProperty(M,"sourceText",{get:function(){f.textProperty.getValue();var S=f.textProperty.currentData.t;return S!==y&&(f.textProperty.currentData.t=y,(_=new String(S)).value=S||new String(S)),_}}),M},getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(f){return blendModeEnums[f]||""}),blendModeEnums;function SliderEffect(f,y,_){this.p=PropertyFactory.getProp(y,f.v,0,0,_)}function AngleEffect(f,y,_){this.p=PropertyFactory.getProp(y,f.v,0,0,_)}function ColorEffect(f,y,_){this.p=PropertyFactory.getProp(y,f.v,1,0,_)}function PointEffect(f,y,_){this.p=PropertyFactory.getProp(y,f.v,1,0,_)}function LayerIndexEffect(f,y,_){this.p=PropertyFactory.getProp(y,f.v,0,0,_)}function MaskIndexEffect(f,y,_){this.p=PropertyFactory.getProp(y,f.v,0,0,_)}function CheckboxEffect(f,y,_){this.p=PropertyFactory.getProp(y,f.v,0,0,_)}function NoValueEffect(){this.p={}}function EffectsManager(f,y){var _,M=f.ef||[];this.effectElements=[];var S,T=M.length;for(_=0;_<T;_+=1)S=new GroupEffect(M[_],y),this.effectElements.push(S)}function GroupEffect(f,y){this.init(f,y)}function BaseElement(){}function FrameElement(){}function _typeof$2(f){return _typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},_typeof$2(f)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(f,y){var _;this.data=f,this.effectElements=[],this.initDynamicPropertyContainer(y);var M,S=this.data.ef.length,T=this.data.ef;for(_=0;_<S;_+=1){switch(M=null,T[_].ty){case 0:M=new SliderEffect(T[_],y,this);break;case 1:M=new AngleEffect(T[_],y,this);break;case 2:M=new ColorEffect(T[_],y,this);break;case 3:M=new PointEffect(T[_],y,this);break;case 4:case 7:M=new CheckboxEffect(T[_],y,this);break;case 10:M=new LayerIndexEffect(T[_],y,this);break;case 11:M=new MaskIndexEffect(T[_],y,this);break;case 5:M=new EffectsManager(T[_],y,this);break;default:M=new NoValueEffect(T[_],y,this)}M&&this.effectElements.push(M)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var f=0,y=this.data.masksProperties.length;f<y;){if("n"!==this.data.masksProperties[f].mode&&!1!==this.data.masksProperties[f].cl)return!0;f+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var f=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(f),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var f=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=f},initBaseData:function(f,y,_){this.globalData=y,this.comp=_,this.data=f,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(f,y){var _,M=this.dynamicProperties.length;for(_=0;_<M;_+=1)(y||this._isParent&&"transform"===this.dynamicProperties[_].propType)&&(this.dynamicProperties[_].getValue(),this.dynamicProperties[_]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(f){-1===this.dynamicProperties.indexOf(f)&&this.dynamicProperties.push(f)}};var FootageInterface=(dataInterfaceFactory=function(f){function y(_){return"Outline"===_?y.outlineInterface():null}return y._name="Outline",y.outlineInterface=function(_){var M="",S=_.getFootageData();function T(Y){if(S[Y])return M=Y,"object"===_typeof$2(S=S[Y])?T:S;var H=Y.indexOf(M);if(-1!==H){var q=parseInt(Y.substr(H+M.length),10);return"object"===_typeof$2(S=S[q])?T:S}return""}return function(){return M="",S=_.getFootageData(),T}}(f),y},function(f){function y(_){return"Data"===_?y.dataInterface:null}return y._name="Data",y.dataInterface=dataInterfaceFactory(f),y}),dataInterfaceFactory;function FootageElement(f,y,_){this.initFrame(),this.initRenderable(),this.assetData=y.getAssetData(f.refId),this.footageData=y.imageLoader.getAsset(this.assetData),this.initBaseData(f,y,_)}function AudioElement(f,y,_){this.initFrame(),this.initRenderable(),this.assetData=y.getAssetData(f.refId),this.initBaseData(f,y,_),this._isPlaying=!1,this._canPlay=!1;var M=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(M),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=f.tm?PropertyFactory.getProp(this,f.tm,0,y.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,f.au&&f.au.lv?f.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}function TransformElement(){}function MaskElement(f,y,_){this.data=f,this.element=y,this.globalData=_,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var M,S,T=this.globalData.defs,Y=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(Y),this.solidPath="";var H,q,J,F,G,U,V=this.masksProperties,j=0,K=[],z=createElementID(),ee="clipPath",de="clip-path";for(M=0;M<Y;M+=1)if(("a"!==V[M].mode&&"n"!==V[M].mode||V[M].inv||100!==V[M].o.k||V[M].o.x)&&(ee="mask",de="mask"),"s"!==V[M].mode&&"i"!==V[M].mode||0!==j?J=null:((J=createNS("rect")).setAttribute("fill","#ffffff"),J.setAttribute("width",this.element.comp.data.w||0),J.setAttribute("height",this.element.comp.data.h||0),K.push(J)),S=createNS("path"),"n"===V[M].mode)this.viewData[M]={op:PropertyFactory.getProp(this.element,V[M].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,V[M],3),elem:S,lastPath:""},T.appendChild(S);else{var pe;if(j+=1,S.setAttribute("fill","s"===V[M].mode?"#000000":"#ffffff"),S.setAttribute("clip-rule","nonzero"),0!==V[M].x.k?(ee="mask",de="mask",U=PropertyFactory.getProp(this.element,V[M].x,0,null,this.element),pe=createElementID(),(F=createNS("filter")).setAttribute("id",pe),(G=createNS("feMorphology")).setAttribute("operator","erode"),G.setAttribute("in","SourceGraphic"),G.setAttribute("radius","0"),F.appendChild(G),T.appendChild(F),S.setAttribute("stroke","s"===V[M].mode?"#000000":"#ffffff")):(G=null,U=null),this.storedData[M]={elem:S,x:U,expan:G,lastPath:"",lastOperator:"",filterId:pe,lastRadius:0},"i"===V[M].mode){q=K.length;var Ee=createNS("g");for(H=0;H<q;H+=1)Ee.appendChild(K[H]);var je=createNS("mask");je.setAttribute("mask-type","alpha"),je.setAttribute("id",z+"_"+j),je.appendChild(S),T.appendChild(je),Ee.setAttribute("mask","url("+getLocationHref()+"#"+z+"_"+j+")"),K.length=0,K.push(Ee)}else K.push(S);V[M].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[M]={elem:S,lastPath:"",op:PropertyFactory.getProp(this.element,V[M].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,V[M],3),invRect:J},this.viewData[M].prop.k||this.drawPath(V[M],this.viewData[M].prop.v,this.viewData[M])}for(this.maskElement=createNS(ee),Y=K.length,M=0;M<Y;M+=1)this.maskElement.appendChild(K[M]);j>0&&(this.maskElement.setAttribute("id",z),this.element.maskedElement.setAttribute(de,"url("+getLocationHref()+"#"+z+")"),T.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){this.layerInterface=FootageInterface(this)},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(f){this.prepareRenderableFrame(f,!0),this.prepareProperties(f,!0),this._currentTime=this.tm._placeholder?f/this.data.sr:this.tm.v,this._volume=this.lv.v[0];var _=this._volume*this._volumeMultiplier;this._previousVolume!==_&&(this._previousVolume=_,this.audio.volume(_))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(f){this.audio.rate(f)},AudioElement.prototype.volume=function(f){this._volumeMultiplier=f,this._previousVolume=f*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(f){var y,_,M=this.layers.length;for(this.completeLayers=!0,y=M-1;y>=0;y-=1)this.elements[y]||(_=this.layers[y]).ip-_.st<=f-this.layers[y].st&&_.op-_.st>f-this.layers[y].st&&this.buildItem(y),this.completeLayers=!!this.elements[y]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(f){switch(f.ty){case 2:return this.createImage(f);case 0:return this.createComp(f);case 1:return this.createSolid(f);case 3:default:return this.createNull(f);case 4:return this.createShape(f);case 5:return this.createText(f);case 6:return this.createAudio(f);case 13:return this.createCamera(f);case 15:return this.createFootage(f)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(f){return new AudioElement(f,this.globalData,this)},BaseRenderer.prototype.createFootage=function(f){return new FootageElement(f,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var f,y=this.layers.length;for(f=0;f<y;f+=1)this.buildItem(f);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(f){var y;this.completeLayers=!1;var _,M=f.length,S=this.layers.length;for(y=0;y<M;y+=1)for(_=0;_<S;){if(this.layers[_].id===f[y].id){this.layers[_]=f[y];break}_+=1}},BaseRenderer.prototype.setProjectInterface=function(f){this.globalData.projectInterface=f},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(f,y,_){for(var M=this.elements,S=this.layers,T=0,Y=S.length;T<Y;)S[T].ind==y&&(M[T]&&!0!==M[T]?(_.push(M[T]),M[T].setAsParent(),void 0!==S[T].parent?this.buildElementParenting(f,S[T].parent,_):f.setHierarchy(_)):(this.buildItem(T),this.addPendingElement(f))),T+=1},BaseRenderer.prototype.addPendingElement=function(f){this.pendingElements.push(f)},BaseRenderer.prototype.searchExtraCompositions=function(f){var y,_=f.length;for(y=0;y<_;y+=1)if(f[y].xt){var M=this.createComp(f[y]);M.initExpressions(),this.globalData.projectInterface.registerComposition(M)}},BaseRenderer.prototype.getElementByPath=function(f){var y,_=f.shift();if("number"==typeof _)y=this.elements[_];else{var M,S=this.elements.length;for(M=0;M<S;M+=1)if(this.elements[M].data.nm===_){y=this.elements[M];break}}return 0===f.length?y:y.getElementByPath(f)},BaseRenderer.prototype.setupGlobalData=function(f,y){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(f.chars),this.globalData.fontManager.addFonts(f.fonts,y),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=f.fr,this.globalData.nm=f.nm,this.globalData.compSize={w:f.w,h:f.h}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0)},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var f,y=this.finalTransform.mat,_=0,M=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;_<M;){if(this.hierarchy[_].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}_+=1}if(this.finalTransform._matMdf)for(y.cloneFromProps(f=this.finalTransform.mProp.v.props),_=0;_<M;_+=1)y.transform((f=this.hierarchy[_].finalTransform.mProp.v.props)[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15])}},globalToLocal:function(f){var y=[];y.push(this.finalTransform);for(var _,M=!0,S=this.comp;M;)S.finalTransform?(S.data.hasMask&&y.splice(0,0,S.finalTransform),S=S.comp):M=!1;var T,Y=y.length;for(_=0;_<Y;_+=1)T=y[_].mat.applyToPointArray(0,0,0),f=[f[0]-T[0],f[1]-T[1],0];return f},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(f){return this.viewData[f].prop},MaskElement.prototype.renderFrame=function(f){var y,_=this.element.finalTransform.mat,M=this.masksProperties.length;for(y=0;y<M;y+=1)if((this.viewData[y].prop._mdf||f)&&this.drawPath(this.masksProperties[y],this.viewData[y].prop.v,this.viewData[y]),(this.viewData[y].op._mdf||f)&&this.viewData[y].elem.setAttribute("fill-opacity",this.viewData[y].op.v),"n"!==this.masksProperties[y].mode&&(this.viewData[y].invRect&&(this.element.finalTransform.mProp._mdf||f)&&this.viewData[y].invRect.setAttribute("transform",_.getInverseMatrix().to2dCSS()),this.storedData[y].x&&(this.storedData[y].x._mdf||f))){var S=this.storedData[y].expan;this.storedData[y].x.v<0?("erode"!==this.storedData[y].lastOperator&&(this.storedData[y].lastOperator="erode",this.storedData[y].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[y].filterId+")")),S.setAttribute("radius",-this.storedData[y].x.v)):("dilate"!==this.storedData[y].lastOperator&&(this.storedData[y].lastOperator="dilate",this.storedData[y].elem.setAttribute("filter",null)),this.storedData[y].elem.setAttribute("stroke-width",2*this.storedData[y].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var f="M0,0 ";return f+=" h"+this.globalData.compSize.w,f+=" v"+this.globalData.compSize.h,(f+=" h-"+this.globalData.compSize.w)+" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(f,y,_){var M,S,T=" M"+y.v[0][0]+","+y.v[0][1];for(S=y._length,M=1;M<S;M+=1)T+=" C"+y.o[M-1][0]+","+y.o[M-1][1]+" "+y.i[M][0]+","+y.i[M][1]+" "+y.v[M][0]+","+y.v[M][1];if(y.c&&S>1&&(T+=" C"+y.o[M-1][0]+","+y.o[M-1][1]+" "+y.i[0][0]+","+y.i[0][1]+" "+y.v[0][0]+","+y.v[0][1]),_.lastPath!==T){var Y="";_.elem&&(y.c&&(Y=f.inv?this.solidPath+T:T),_.elem.setAttribute("d",Y)),_.lastPath=T}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var f={createFilter:function(y,_){var M=createNS("filter");return M.setAttribute("id",y),!0!==_&&(M.setAttribute("filterUnits","objectBoundingBox"),M.setAttribute("x","0%"),M.setAttribute("y","0%"),M.setAttribute("width","100%"),M.setAttribute("height","100%")),M},createAlphaToLuminanceFilter:function(){var y=createNS("feColorMatrix");return y.setAttribute("type","matrix"),y.setAttribute("color-interpolation-filters","sRGB"),y.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),y}};return f}(),featureSupport=function(){var f={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(f.maskType=!1),f}(),registeredEffects={},idPrefix="filter_result_";function SVGEffects(f){var y,_,M="SourceGraphic",S=f.data.ef?f.data.ef.length:0,T=createElementID(),Y=filtersFactory.createFilter(T,!0),H=0;for(this.filters=[],y=0;y<S;y+=1){_=null;var q=f.data.ef[y].ty;registeredEffects[q]&&(_=new registeredEffects[q].effect(Y,f.effectsManager.effectElements[y],f,idPrefix+H,M),M=idPrefix+H,registeredEffects[q].countsAsEffect&&(H+=1)),_&&this.filters.push(_)}H&&(f.globalData.defs.appendChild(Y),f.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+T+")")),this.filters.length&&f.addRenderableComponent(this)}function registerEffect(f,y,_){registeredEffects[f]={effect:y,countsAsEffect:_}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(f,y,_){this.assetData=y.getAssetData(f.refId),this.initElement(f,y,_),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(f,y){this.elem=f,this.pos=y}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(f){var y,_=this.filters.length;for(y=0;y<_;y+=1)this.filters[y].renderFrame(f)},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var f,y,_,M=null;if(this.data.td){if(3==this.data.td||1==this.data.td){var S=createNS("mask");S.setAttribute("id",this.layerId),S.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),S.appendChild(this.layerElement),M=S,this.globalData.defs.appendChild(S),featureSupport.maskType||1!=this.data.td||(S.setAttribute("mask-type","luminance"),f=createElementID(),y=filtersFactory.createFilter(f),this.globalData.defs.appendChild(y),y.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(_=createNS("g")).appendChild(this.layerElement),M=_,S.appendChild(_),_.setAttribute("filter","url("+getLocationHref()+"#"+f+")"))}else if(2==this.data.td){var T=createNS("mask");T.setAttribute("id",this.layerId),T.setAttribute("mask-type","alpha");var Y=createNS("g");T.appendChild(Y),f=createElementID(),y=filtersFactory.createFilter(f);var H=createNS("feComponentTransfer");H.setAttribute("in","SourceGraphic"),y.appendChild(H);var q=createNS("feFuncA");q.setAttribute("type","table"),q.setAttribute("tableValues","1.0 0.0"),H.appendChild(q),this.globalData.defs.appendChild(y);var J=createNS("rect");J.setAttribute("width",this.comp.data.w),J.setAttribute("height",this.comp.data.h),J.setAttribute("x","0"),J.setAttribute("y","0"),J.setAttribute("fill","#ffffff"),J.setAttribute("opacity","0"),Y.setAttribute("filter","url("+getLocationHref()+"#"+f+")"),Y.appendChild(J),Y.appendChild(this.layerElement),M=Y,featureSupport.maskType||(T.setAttribute("mask-type","luminance"),y.appendChild(filtersFactory.createAlphaToLuminanceFilter()),_=createNS("g"),Y.appendChild(J),_.appendChild(this.layerElement),M=_,Y.appendChild(_)),this.globalData.defs.appendChild(T)}}else this.data.tt?(this.matteElement.appendChild(this.layerElement),M=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var F=createNS("clipPath"),G=createNS("path");G.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var U=createElementID();if(F.setAttribute("id",U),F.appendChild(G),this.globalData.defs.appendChild(F),this.checkMasks()){var V=createNS("g");V.setAttribute("clip-path","url("+getLocationHref()+"#"+U+")"),V.appendChild(this.layerElement),this.transformedElement=V,M?M.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+U+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(f){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+f+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(f){this.hierarchy=f},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(f,y,_){this.initFrame(),this.initBaseData(f,y,_),this.initTransform(f,y,_),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(f){this._mdf=!1,this.prepareRenderableFrame(f),this.prepareProperties(f,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var f=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",f),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(f){var y,_=this.shapeModifiers.length;for(y=0;y<_;y+=1)this.shapeModifiers[y].addShape(f)},isShapeInAnimatedModifiers:function(f){for(var y=this.shapeModifiers.length;0<y;)if(this.shapeModifiers[0].isAnimatedWithShape(f))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var f,y=this.shapes.length;for(f=0;f<y;f+=1)this.shapes[f].sh.reset();for(f=(y=this.shapeModifiers.length)-1;f>=0&&!this.shapeModifiers[f].processShapes(this._isFirstFrame);f-=1);}},searchProcessedElement:function(f){for(var y=this.processedElements,_=0,M=y.length;_<M;){if(y[_].elem===f)return y[_].pos;_+=1}return 0},addProcessedElement:function(f,y){for(var _=this.processedElements,M=_.length;M;)if(_[M-=1].elem===f)return void(_[M].pos=y);_.push(new ProcessedElement(f,y))},prepareFrame:function(f){this.prepareRenderableFrame(f),this.prepareProperties(f,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(f,y,_){this.caches=[],this.styles=[],this.transformers=f,this.lStr="",this.sh=_,this.lvl=y,this._isAnimated=!!_.k;for(var M=0,S=f.length;M<S;){if(f[M].mProps.dynamicProperties.length){this._isAnimated=!0;break}M+=1}}function SVGStyleData(f,y){this.data=f,this.type=f.ty,this.d="",this.lvl=y,this._mdf=!1,this.closed=!0===f.hd,this.pElem=createNS("path"),this.msElem=null}function DashProperty(f,y,_,M){var S;this.elem=f,this.frameId=-1,this.dataProps=createSizedArray(y.length),this.renderer=_,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",y.length?y.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(M);var T,Y=y.length||0;for(S=0;S<Y;S+=1)T=PropertyFactory.getProp(f,y[S].v,0,0,this),this.k=T.k||this.k,this.dataProps[S]={n:y[S].n,p:T};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(f,y,_){this.initDynamicPropertyContainer(f),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(f,y.o,0,.01,this),this.w=PropertyFactory.getProp(f,y.w,0,null,this),this.d=new DashProperty(f,y.d||{},"svg",this),this.c=PropertyFactory.getProp(f,y.c,1,255,this),this.style=_,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(f,y,_){this.initDynamicPropertyContainer(f),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(f,y.o,0,.01,this),this.c=PropertyFactory.getProp(f,y.c,1,255,this),this.style=_}function SVGNoStyleData(f,y,_){this.initDynamicPropertyContainer(f),this.getValue=this.iterateDynamicProperties,this.style=_}function GradientProperty(f,y,_){this.data=y,this.c=createTypedArray("uint8c",4*y.p);var M=y.k.k[0].s?y.k.k[0].s.length-4*y.p:y.k.k.length-4*y.p;this.o=createTypedArray("float32",M),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=M,this.initDynamicPropertyContainer(_),this.prop=PropertyFactory.getProp(f,y.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(f,y,_){this.initDynamicPropertyContainer(f),this.getValue=this.iterateDynamicProperties,this.initGradientData(f,y,_)}function SVGGradientStrokeStyleData(f,y,_){this.initDynamicPropertyContainer(f),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(f,y.w,0,null,this),this.d=new DashProperty(f,y.d||{},"svg",this),this.initGradientData(f,y,_),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(f,y,_){this.transform={mProps:f,op:y,container:_},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(f){if((this.elem.globalData.frameId!==this.frameId||f)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||f,this._mdf)){var y=0,_=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),y=0;y<_;y+=1)"o"!==this.dataProps[y].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[y].p.v:this.dashArray[y]=this.dataProps[y].p.v:this.dashoffset[0]=this.dataProps[y].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(f,y){for(var _=0,M=this.o.length/2;_<M;){if(Math.abs(f[4*_]-f[4*y+2*_])>.01)return!1;_+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var f=0,y=this.data.k.k.length;f<y;){if(!this.comparePoints(this.data.k.k[f].s,this.data.p))return!1;f+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(f){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||f){var y,_,M,S=4*this.data.p;for(y=0;y<S;y+=1)_=y%4==0?100:255,M=Math.round(this.prop.v[y]*_),this.c[y]!==M&&(this.c[y]=M,this._cmdf=!f);if(this.o.length)for(S=this.prop.v.length,y=4*this.data.p;y<S;y+=1)_=y%2==0?100:1,M=y%2==0?Math.round(100*this.prop.v[y]):this.prop.v[y],this.o[y-4*this.data.p]!==M&&(this.o[y-4*this.data.p]=M,this._omdf=!f);this._mdf=!f}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(f,y,_){this.o=PropertyFactory.getProp(f,y.o,0,.01,this),this.s=PropertyFactory.getProp(f,y.s,1,null,this),this.e=PropertyFactory.getProp(f,y.e,1,null,this),this.h=PropertyFactory.getProp(f,y.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(f,y.a||{k:0},0,degToRads,this),this.g=new GradientProperty(f,y.g,this),this.style=_,this.stops=[],this.setGradientData(_.pElem,y),this.setGradientOpacity(y,_),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(f,y){var _=createElementID(),M=createNS(1===y.t?"linearGradient":"radialGradient");M.setAttribute("id",_),M.setAttribute("spreadMethod","pad"),M.setAttribute("gradientUnits","userSpaceOnUse");var S,T,Y,H=[];for(Y=4*y.g.p,T=0;T<Y;T+=4)S=createNS("stop"),M.appendChild(S),H.push(S);f.setAttribute("gf"===y.ty?"fill":"stroke","url("+getLocationHref()+"#"+_+")"),this.gf=M,this.cst=H},SVGGradientFillStyleData.prototype.setGradientOpacity=function(f,y){if(this.g._hasOpacity&&!this.g._collapsable){var _,M,S,T=createNS("mask"),Y=createNS("path");T.appendChild(Y);var H=createElementID(),q=createElementID();T.setAttribute("id",q);var J=createNS(1===f.t?"linearGradient":"radialGradient");J.setAttribute("id",H),J.setAttribute("spreadMethod","pad"),J.setAttribute("gradientUnits","userSpaceOnUse"),S=f.g.k.k[0].s?f.g.k.k[0].s.length:f.g.k.k.length;var F=this.stops;for(M=4*f.g.p;M<S;M+=2)(_=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),J.appendChild(_),F.push(_);Y.setAttribute("gf"===f.ty?"fill":"stroke","url("+getLocationHref()+"#"+H+")"),"gs"===f.ty&&(Y.setAttribute("stroke-linecap",lineCapEnum[f.lc||2]),Y.setAttribute("stroke-linejoin",lineJoinEnum[f.lj||2]),1===f.lj&&Y.setAttribute("stroke-miterlimit",f.ml)),this.of=J,this.ms=T,this.ost=F,this.maskId=q,y.msElem=Y}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(f,y,_,M){if(0===y)return"";var S,T=f.o,Y=f.i,H=f.v,q=" M"+M.applyToPointStringified(H[0][0],H[0][1]);for(S=1;S<y;S+=1)q+=" C"+M.applyToPointStringified(T[S-1][0],T[S-1][1])+" "+M.applyToPointStringified(Y[S][0],Y[S][1])+" "+M.applyToPointStringified(H[S][0],H[S][1]);return _&&y&&(q+=" C"+M.applyToPointStringified(T[S-1][0],T[S-1][1])+" "+M.applyToPointStringified(Y[0][0],Y[0][1])+" "+M.applyToPointStringified(H[0][0],H[0][1]),q+="z"),q},SVGElementsRenderer=function(){var f=new Matrix,y=new Matrix;function _(J,F,G){(G||F.transform.op._mdf)&&F.transform.container.setAttribute("opacity",F.transform.op.v),(G||F.transform.mProps._mdf)&&F.transform.container.setAttribute("transform",F.transform.mProps.v.to2dCSS())}function M(){}function S(J,F,G){var U,V,j,K,z,ee,de,pe,Ee,je,ct,Ke=F.styles.length,lt=F.lvl;for(ee=0;ee<Ke;ee+=1){if(K=F.sh._mdf||G,F.styles[ee].lvl<lt){for(pe=y.reset(),je=lt-F.styles[ee].lvl,ct=F.transformers.length-1;!K&&je>0;)K=F.transformers[ct].mProps._mdf||K,je-=1,ct-=1;if(K)for(je=lt-F.styles[ee].lvl,ct=F.transformers.length-1;je>0;)pe.transform((Ee=F.transformers[ct].mProps.v.props)[0],Ee[1],Ee[2],Ee[3],Ee[4],Ee[5],Ee[6],Ee[7],Ee[8],Ee[9],Ee[10],Ee[11],Ee[12],Ee[13],Ee[14],Ee[15]),je-=1,ct-=1}else pe=f;if(V=(de=F.sh.paths)._length,K){for(j="",U=0;U<V;U+=1)(z=de.shapes[U])&&z._length&&(j+=buildShapeString(z,z._length,z.c,pe));F.caches[ee]=j}else j=F.caches[ee];F.styles[ee].d+=!0===J.hd?"":j,F.styles[ee]._mdf=K||F.styles[ee]._mdf}}function T(J,F,G){var U=F.style;(F.c._mdf||G)&&U.pElem.setAttribute("fill","rgb("+bmFloor(F.c.v[0])+","+bmFloor(F.c.v[1])+","+bmFloor(F.c.v[2])+")"),(F.o._mdf||G)&&U.pElem.setAttribute("fill-opacity",F.o.v)}function Y(J,F,G){H(J,F,G),q(0,F,G)}function H(J,F,G){var U,V,j,K,z,ee=F.gf,de=F.g._hasOpacity,pe=F.s.v,Ee=F.e.v;if((F.o._mdf||G)&&F.style.pElem.setAttribute("gf"===J.ty?"fill-opacity":"stroke-opacity",F.o.v),F.s._mdf||G){var ct=1===J.t?"x1":"cx",Ke="x1"===ct?"y1":"cy";ee.setAttribute(ct,pe[0]),ee.setAttribute(Ke,pe[1]),de&&!F.g._collapsable&&(F.of.setAttribute(ct,pe[0]),F.of.setAttribute(Ke,pe[1]))}if(F.g._cmdf||G){var lt=F.g.c;for(j=(U=F.cst).length,V=0;V<j;V+=1)(K=U[V]).setAttribute("offset",lt[4*V]+"%"),K.setAttribute("stop-color","rgb("+lt[4*V+1]+","+lt[4*V+2]+","+lt[4*V+3]+")")}if(de&&(F.g._omdf||G)){var At=F.g.o;for(j=(U=F.g._collapsable?F.cst:F.ost).length,V=0;V<j;V+=1)K=U[V],F.g._collapsable||K.setAttribute("offset",At[2*V]+"%"),K.setAttribute("stop-opacity",At[2*V+1])}if(1===J.t)(F.e._mdf||G)&&(ee.setAttribute("x2",Ee[0]),ee.setAttribute("y2",Ee[1]),de&&!F.g._collapsable&&(F.of.setAttribute("x2",Ee[0]),F.of.setAttribute("y2",Ee[1])));else if((F.s._mdf||F.e._mdf||G)&&(z=Math.sqrt(Math.pow(pe[0]-Ee[0],2)+Math.pow(pe[1]-Ee[1],2)),ee.setAttribute("r",z),de&&!F.g._collapsable&&F.of.setAttribute("r",z)),F.e._mdf||F.h._mdf||F.a._mdf||G){z||(z=Math.sqrt(Math.pow(pe[0]-Ee[0],2)+Math.pow(pe[1]-Ee[1],2)));var X=Math.atan2(Ee[1]-pe[1],Ee[0]-pe[0]),ze=F.h.v;ze>=1?ze=.99:ze<=-1&&(ze=-.99);var Mt=z*ze,bt=Math.cos(X+F.a.v)*Mt+pe[0],Ft=Math.sin(X+F.a.v)*Mt+pe[1];ee.setAttribute("fx",bt),ee.setAttribute("fy",Ft),de&&!F.g._collapsable&&(F.of.setAttribute("fx",bt),F.of.setAttribute("fy",Ft))}}function q(J,F,G){var U=F.style,V=F.d;V&&(V._mdf||G)&&V.dashStr&&(U.pElem.setAttribute("stroke-dasharray",V.dashStr),U.pElem.setAttribute("stroke-dashoffset",V.dashoffset[0])),F.c&&(F.c._mdf||G)&&U.pElem.setAttribute("stroke","rgb("+bmFloor(F.c.v[0])+","+bmFloor(F.c.v[1])+","+bmFloor(F.c.v[2])+")"),(F.o._mdf||G)&&U.pElem.setAttribute("stroke-opacity",F.o.v),(F.w._mdf||G)&&(U.pElem.setAttribute("stroke-width",F.w.v),U.msElem&&U.msElem.setAttribute("stroke-width",F.w.v))}return{createRenderFunction:function(J){switch(J.ty){case"fl":return T;case"gf":return H;case"gs":return Y;case"st":return q;case"sh":case"el":case"rc":case"sr":return S;case"tr":return _;case"no":return M;default:return null}}}}();function SVGShapeElement(f,y,_){this.shapes=[],this.shapesData=f.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(f,y,_),this.prevViewData=[]}function LetterProps(f,y,_,M,S,T){this.o=f,this.sw=y,this.sc=_,this.fc=M,this.m=S,this.p=T,this._mdf={o:!0,sw:!!y,sc:!!_,fc:!!M,m:!0,p:!0}}function TextProperty(f,y){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=y,this.elem=f,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var f,y,_,M,S=this.shapes.length,T=this.stylesList.length,Y=[],H=!1;for(_=0;_<T;_+=1){for(M=this.stylesList[_],H=!1,Y.length=0,f=0;f<S;f+=1)-1!==(y=this.shapes[f]).styles.indexOf(M)&&(Y.push(y),H=y._isAnimated||H);Y.length>1&&H&&this.setShapesAsAnimated(Y)}},SVGShapeElement.prototype.setShapesAsAnimated=function(f){var y,_=f.length;for(y=0;y<_;y+=1)f[y].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(f,y){var _,M=new SVGStyleData(f,y),S=M.pElem;return"st"===f.ty?_=new SVGStrokeStyleData(this,f,M):"fl"===f.ty?_=new SVGFillStyleData(this,f,M):"gf"===f.ty||"gs"===f.ty?(_=new("gf"===f.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,f,M),this.globalData.defs.appendChild(_.gf),_.maskId&&(this.globalData.defs.appendChild(_.ms),this.globalData.defs.appendChild(_.of),S.setAttribute("mask","url("+getLocationHref()+"#"+_.maskId+")"))):"no"===f.ty&&(_=new SVGNoStyleData(this,f,M)),"st"!==f.ty&&"gs"!==f.ty||(S.setAttribute("stroke-linecap",lineCapEnum[f.lc||2]),S.setAttribute("stroke-linejoin",lineJoinEnum[f.lj||2]),S.setAttribute("fill-opacity","0"),1===f.lj&&S.setAttribute("stroke-miterlimit",f.ml)),2===f.r&&S.setAttribute("fill-rule","evenodd"),f.ln&&S.setAttribute("id",f.ln),f.cl&&S.setAttribute("class",f.cl),f.bm&&(S.style["mix-blend-mode"]=getBlendMode(f.bm)),this.stylesList.push(M),this.addToAnimatedContents(f,_),_},SVGShapeElement.prototype.createGroupElement=function(f){var y=new ShapeGroupData;return f.ln&&y.gr.setAttribute("id",f.ln),f.cl&&y.gr.setAttribute("class",f.cl),f.bm&&(y.gr.style["mix-blend-mode"]=getBlendMode(f.bm)),y},SVGShapeElement.prototype.createTransformElement=function(f,y){var _=TransformPropertyFactory.getTransformProperty(this,f,this),M=new SVGTransformData(_,_.o,y);return this.addToAnimatedContents(f,M),M},SVGShapeElement.prototype.createShapeElement=function(f,y,_){var M=4;"rc"===f.ty?M=5:"el"===f.ty?M=6:"sr"===f.ty&&(M=7);var S=new SVGShapeData(y,_,ShapePropertyFactory.getShapeProp(this,f,M,this));return this.shapes.push(S),this.addShapeToModifiers(S),this.addToAnimatedContents(f,S),S},SVGShapeElement.prototype.addToAnimatedContents=function(f,y){for(var _=0,M=this.animatedContents.length;_<M;){if(this.animatedContents[_].element===y)return;_+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(f),element:y,data:f})},SVGShapeElement.prototype.setElementStyles=function(f){var y,_=f.styles,M=this.stylesList.length;for(y=0;y<M;y+=1)this.stylesList[y].closed||_.push(this.stylesList[y])},SVGShapeElement.prototype.reloadShapes=function(){var f;this._isFirstFrame=!0;var y=this.itemsData.length;for(f=0;f<y;f+=1)this.prevViewData[f]=this.itemsData[f];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),y=this.dynamicProperties.length,f=0;f<y;f+=1)this.dynamicProperties[f].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(f,y,_,M,S,T,Y){var H,q,J,G,U,V=[].concat(T),j=f.length-1,K=[],z=[];for(H=j;H>=0;H-=1){if((U=this.searchProcessedElement(f[H]))?y[H]=_[U-1]:f[H]._render=Y,"fl"===f[H].ty||"st"===f[H].ty||"gf"===f[H].ty||"gs"===f[H].ty||"no"===f[H].ty)U?y[H].style.closed=!1:y[H]=this.createStyleElement(f[H],S),f[H]._render&&y[H].style.pElem.parentNode!==M&&M.appendChild(y[H].style.pElem),K.push(y[H].style);else if("gr"===f[H].ty){if(U)for(J=y[H].it.length,q=0;q<J;q+=1)y[H].prevViewData[q]=y[H].it[q];else y[H]=this.createGroupElement(f[H]);this.searchShapes(f[H].it,y[H].it,y[H].prevViewData,y[H].gr,S+1,V,Y),f[H]._render&&y[H].gr.parentNode!==M&&M.appendChild(y[H].gr)}else"tr"===f[H].ty?(U||(y[H]=this.createTransformElement(f[H],M)),V.push(y[H].transform)):"sh"===f[H].ty||"rc"===f[H].ty||"el"===f[H].ty||"sr"===f[H].ty?(U||(y[H]=this.createShapeElement(f[H],V,S)),this.setElementStyles(y[H])):"tm"===f[H].ty||"rd"===f[H].ty||"ms"===f[H].ty||"pb"===f[H].ty?(U?(G=y[H]).closed=!1:((G=ShapeModifiers.getModifier(f[H].ty)).init(this,f[H]),y[H]=G,this.shapeModifiers.push(G)),z.push(G)):"rp"===f[H].ty&&(U?(G=y[H]).closed=!0:(G=ShapeModifiers.getModifier(f[H].ty),y[H]=G,G.init(this,f,H,y),this.shapeModifiers.push(G),Y=!1),z.push(G));this.addProcessedElement(f[H],H+1)}for(j=K.length,H=0;H<j;H+=1)K[H].closed=!0;for(j=z.length,H=0;H<j;H+=1)z[H].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var f;this.renderModifiers();var y=this.stylesList.length;for(f=0;f<y;f+=1)this.stylesList[f].reset();for(this.renderShape(),f=0;f<y;f+=1)(this.stylesList[f]._mdf||this._isFirstFrame)&&(this.stylesList[f].msElem&&(this.stylesList[f].msElem.setAttribute("d",this.stylesList[f].d),this.stylesList[f].d="M0 0"+this.stylesList[f].d),this.stylesList[f].pElem.setAttribute("d",this.stylesList[f].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var f,y,_=this.animatedContents.length;for(f=0;f<_;f+=1)y=this.animatedContents[f],(this._isFirstFrame||y.element._isAnimated)&&!0!==y.data&&y.fn(y.data,y.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(f,y,_,M,S,T){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var Y=!1;return this.o!==f&&(this.o=f,this._mdf.o=!0,Y=!0),this.sw!==y&&(this.sw=y,this._mdf.sw=!0,Y=!0),this.sc!==_&&(this.sc=_,this._mdf.sc=!0,Y=!0),this.fc!==M&&(this.fc=M,this._mdf.fc=!0,Y=!0),this.m!==S&&(this.m=S,this._mdf.m=!0,Y=!0),!T.length||this.p[0]===T[0]&&this.p[1]===T[1]&&this.p[4]===T[4]&&this.p[5]===T[5]&&this.p[12]===T[12]&&this.p[13]===T[13]||(this.p=T,this._mdf.p=!0,Y=!0),Y},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(f,y){for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(f[_]=y[_]);return f},TextProperty.prototype.setCurrentData=function(f){f.__complete||this.completeTextData(f),this.currentData=f,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(f){this.effectsSequence.push(f),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(f){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||f){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var y=this.currentData,_=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var M;this.lock=!0,this._mdf=!1;var S=this.effectsSequence.length,T=f||this.data.d.k[this.keysIndex].s;for(M=0;M<S;M+=1)T=this.effectsSequence[M](_!==this.keysIndex?T:this.currentData,T.t);y!==T&&this.setCurrentData(T),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var f=this.data.d.k,y=this.elem.comp.renderedFrame,_=0,M=f.length;_<=M-1&&!(_===M-1||f[_+1].t>y);)_+=1;return this.keysIndex!==_&&(this.keysIndex=_),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(f){for(var y,_,M=[],S=0,T=f.length,Y=!1;S<T;)y=f.charCodeAt(S),FontManager.isCombinedCharacter(y)?M[M.length-1]+=f.charAt(S):y>=55296&&y<=56319?(_=f.charCodeAt(S+1))>=56320&&_<=57343?(Y||FontManager.isModifier(y,_)?(M[M.length-1]+=f.substr(S,2),Y=!1):M.push(f.substr(S,2)),S+=1):M.push(f.charAt(S)):y>56319?(_=f.charCodeAt(S+1),FontManager.isZeroWidthJoiner(y,_)?(Y=!0,M[M.length-1]+=f.substr(S,2),S+=1):M.push(f.charAt(S))):FontManager.isZeroWidthJoiner(y)?(M[M.length-1]+=f.charAt(S),Y=!0):M.push(f.charAt(S)),S+=1;return M},TextProperty.prototype.completeTextData=function(f){f.__complete=!0;var y,_,M,S,T,Y,H,q=this.elem.globalData.fontManager,J=this.data,F=[],G=0,U=J.m.g,V=0,j=0,K=0,z=[],ee=0,de=0,pe=q.getFontByName(f.f),Ee=0,je=getFontProperties(pe);f.fWeight=je.weight,f.fStyle=je.style,f.finalSize=f.s,f.finalText=this.buildFinalText(f.t),_=f.finalText.length,f.finalLineHeight=f.lh;var ct,Ke=f.tr/1e3*f.finalSize;if(f.sz)for(var lt,At,X=!0,ze=f.sz[0],Mt=f.sz[1];X;){lt=0,ee=0,_=(At=this.buildFinalText(f.t)).length,Ke=f.tr/1e3*f.finalSize;var bt=-1;for(y=0;y<_;y+=1)ct=At[y].charCodeAt(0),M=!1," "===At[y]?bt=y:13!==ct&&3!==ct||(ee=0,M=!0,lt+=f.finalLineHeight||1.2*f.finalSize),q.chars?(H=q.getCharData(At[y],pe.fStyle,pe.fFamily),Ee=M?0:H.w*f.finalSize/100):Ee=q.measureText(At[y],f.f,f.finalSize),ee+Ee>ze&&" "!==At[y]?(-1===bt?_+=1:y=bt,lt+=f.finalLineHeight||1.2*f.finalSize,At.splice(y,bt===y?1:0,"\r"),bt=-1,ee=0):(ee+=Ee,ee+=Ke);lt+=pe.ascent*f.finalSize/100,this.canResize&&f.finalSize>this.minimumFontSize&&Mt<lt?(f.finalSize-=1,f.finalLineHeight=f.finalSize*f.lh/f.s):(f.finalText=At,_=f.finalText.length,X=!1)}ee=-Ke,Ee=0;var Ft,dn=0;for(y=0;y<_;y+=1)if(M=!1,13===(ct=(Ft=f.finalText[y]).charCodeAt(0))||3===ct?(dn=0,z.push(ee),de=ee>de?ee:de,ee=-2*Ke,S="",M=!0,K+=1):S=Ft,q.chars?(H=q.getCharData(Ft,pe.fStyle,q.getFontByName(f.f).fFamily),Ee=M?0:H.w*f.finalSize/100):Ee=q.measureText(S,f.f,f.finalSize)," "===Ft?dn+=Ee+Ke:(ee+=Ee+Ke+dn,dn=0),F.push({l:Ee,an:Ee,add:V,n:M,anIndexes:[],val:S,line:K,animatorJustifyOffset:0}),2==U){if(V+=Ee,""===S||" "===S||y===_-1){for(""!==S&&" "!==S||(V-=Ee);j<=y;)F[j].an=V,F[j].ind=G,F[j].extra=Ee,j+=1;G+=1,V=0}}else if(3==U){if(V+=Ee,""===S||y===_-1){for(""===S&&(V-=Ee);j<=y;)F[j].an=V,F[j].ind=G,F[j].extra=Ee,j+=1;V=0,G+=1}}else F[G].ind=G,F[G].extra=0,G+=1;if(f.l=F,de=ee>de?ee:de,z.push(ee),f.sz)f.boxWidth=f.sz[0],f.justifyOffset=0;else switch(f.boxWidth=de,f.j){case 1:f.justifyOffset=-f.boxWidth;break;case 2:f.justifyOffset=-f.boxWidth/2;break;default:f.justifyOffset=0}f.lineWidths=z;var Sn,Ot,Xe,St,_n=J.a;Y=_n.length;var jn=[];for(T=0;T<Y;T+=1){for((Sn=_n[T]).a.sc&&(f.strokeColorAnim=!0),Sn.a.sw&&(f.strokeWidthAnim=!0),(Sn.a.fc||Sn.a.fh||Sn.a.fs||Sn.a.fb)&&(f.fillColorAnim=!0),St=0,Xe=Sn.s.b,y=0;y<_;y+=1)(Ot=F[y]).anIndexes[T]=St,(1==Xe&&""!==Ot.val||2==Xe&&""!==Ot.val&&" "!==Ot.val||3==Xe&&(Ot.n||" "==Ot.val||y==_-1)||4==Xe&&(Ot.n||y==_-1))&&(1===Sn.s.rn&&jn.push(St),St+=1);J.a[T].s.totalChars=St;var zn,Rn=-1;if(1===Sn.s.rn)for(y=0;y<_;y+=1)Rn!=(Ot=F[y]).anIndexes[T]&&(Rn=Ot.anIndexes[T],zn=jn.splice(Math.floor(Math.random()*jn.length),1)[0]),Ot.anIndexes[T]=zn}f.yOffset=f.finalLineHeight||1.2*f.finalSize,f.ls=f.ls||0,f.ascent=pe.ascent*f.finalSize/100},TextProperty.prototype.updateDocumentData=function(f,y){var _=this.copyData({},this.data.d.k[y=void 0===y?this.keysIndex:y].s);_=this.copyData(_,f),this.data.d.k[y].s=_,this.recalculate(y),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(f){var y=this.data.d.k[f].s;y.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(y)},TextProperty.prototype.canResizeFont=function(f){this.canResize=f,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(f){this.minimumFontSize=Math.floor(f)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var f=Math.max,y=Math.min,_=Math.floor;function M(S,T){this._currentTextLength=-1,this.k=!1,this.data=T,this.elem=S,this.comp=S.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(S),this.s=PropertyFactory.getProp(S,T.s||{k:0},0,0,this),this.e="e"in T?PropertyFactory.getProp(S,T.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(S,T.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(S,T.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(S,T.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(S,T.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(S,T.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return M.prototype={getMult:function(S){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var T=0,Y=0,H=1,q=1;this.ne.v>0?T=this.ne.v/100:Y=-this.ne.v/100,this.xe.v>0?H=1-this.xe.v/100:q=1+this.xe.v/100;var J=BezierFactory.getBezierEasing(T,Y,H,q).get,F=0,G=this.finalS,U=this.finalE,V=this.data.sh;if(2===V)F=J(F=U===G?S>=U?1:0:f(0,y(.5/(U-G)+(S-G)/(U-G),1)));else if(3===V)F=J(F=U===G?S>=U?0:1:1-f(0,y(.5/(U-G)+(S-G)/(U-G),1)));else if(4===V)U===G?F=0:(F=f(0,y(.5/(U-G)+(S-G)/(U-G),1)))<.5?F*=2:F=1-2*(F-.5),F=J(F);else if(5===V){if(U===G)F=0;else{var j=U-G,K=-j/2+(S=y(f(0,S+.5-G),U-G)),z=j/2;F=Math.sqrt(1-K*K/(z*z))}F=J(F)}else 6===V?(U===G?F=0:(S=y(f(0,S+.5-G),U-G),F=(1+Math.cos(Math.PI+2*Math.PI*S/(U-G)))/2),F=J(F)):(S>=_(G)&&(F=f(0,y(S-G<0?y(U,1)-(G-S):U-S,1))),F=J(F));if(100!==this.sm.v){var ee=.01*this.sm.v;0===ee&&(ee=1e-8);var de=.5-.5*ee;F<de?F=0:(F=(F-de)/ee)>1&&(F=1)}return F*this.a.v},getValue:function(S){this.iterateDynamicProperties(),this._mdf=S||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,S&&2===this.data.r&&(this.e.v=this._currentTextLength);var T=2===this.data.r?1:100/this.data.totalChars,Y=this.o.v/T,H=this.s.v/T+Y,q=this.e.v/T+Y;if(H>q){var J=H;H=q,q=J}this.finalS=H,this.finalE=q}},extendPrototype([DynamicPropertyContainer],M),{getTextSelectorProp:function(S,T,Y){return new M(S,T,Y)}}}();function TextAnimatorDataProperty(f,y,_){var M={propType:!1},S=PropertyFactory.getProp,T=y.a;this.a={r:T.r?S(f,T.r,0,degToRads,_):M,rx:T.rx?S(f,T.rx,0,degToRads,_):M,ry:T.ry?S(f,T.ry,0,degToRads,_):M,sk:T.sk?S(f,T.sk,0,degToRads,_):M,sa:T.sa?S(f,T.sa,0,degToRads,_):M,s:T.s?S(f,T.s,1,.01,_):M,a:T.a?S(f,T.a,1,0,_):M,o:T.o?S(f,T.o,0,.01,_):M,p:T.p?S(f,T.p,1,0,_):M,sw:T.sw?S(f,T.sw,0,0,_):M,sc:T.sc?S(f,T.sc,1,0,_):M,fc:T.fc?S(f,T.fc,1,0,_):M,fh:T.fh?S(f,T.fh,0,0,_):M,fs:T.fs?S(f,T.fs,0,.01,_):M,fb:T.fb?S(f,T.fb,0,.01,_):M,t:T.t?S(f,T.t,0,0,_):M},this.s=TextSelectorProp.getTextSelectorProp(f,y.s,_),this.s.t=y.s.t}function TextAnimatorProperty(f,y,_){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=f,this._renderType=y,this._elem=_,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(_)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var f,_=this._textData.a.length,M=PropertyFactory.getProp;for(f=0;f<_;f+=1)this._animatorsData[f]=new TextAnimatorDataProperty(this._elem,this._textData.a[f],this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:M(this._elem,this._textData.p.a,0,0,this),f:M(this._elem,this._textData.p.f,0,0,this),l:M(this._elem,this._textData.p.l,0,0,this),r:M(this._elem,this._textData.p.r,0,0,this),p:M(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=M(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(f,y){if(this.lettersChangedFlag=y,this._mdf||this._isFirstFrame||y||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var _,M,S,T,Y,H,q,J,F,G,U,V,j,K,z,ee,de,Ee,je=this._moreOptions.alignment.v,ct=this._animatorsData,Ke=this._textData,lt=this.mHelper,At=this._renderType,X=this.renderedLetters.length,ze=f.l;if(this._hasMaskedPath){if(Ee=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Mt,bt=Ee.v;for(this._pathData.r.v&&(bt=bt.reverse()),Y={tLength:0,segments:[]},T=bt._length-1,ee=0,S=0;S<T;S+=1)Mt=bez.buildBezierData(bt.v[S],bt.v[S+1],[bt.o[S][0]-bt.v[S][0],bt.o[S][1]-bt.v[S][1]],[bt.i[S+1][0]-bt.v[S+1][0],bt.i[S+1][1]-bt.v[S+1][1]]),Y.tLength+=Mt.segmentLength,Y.segments.push(Mt),ee+=Mt.segmentLength;S=T,Ee.v.c&&(Mt=bez.buildBezierData(bt.v[S],bt.v[0],[bt.o[S][0]-bt.v[S][0],bt.o[S][1]-bt.v[S][1]],[bt.i[0][0]-bt.v[0][0],bt.i[0][1]-bt.v[0][1]]),Y.tLength+=Mt.segmentLength,Y.segments.push(Mt),ee+=Mt.segmentLength),this._pathData.pi=Y}if(U=0,G=1,J=0,F=!0,K=(Y=this._pathData.pi).segments,(H=this._pathData.f.v)<0&&Ee.v.c)for(Y.tLength<Math.abs(H)&&(H=-Math.abs(H)%Y.tLength),G=(j=K[U=K.length-1].points).length-1;H<0;)H+=j[G].partialLength,(G-=1)<0&&(G=(j=K[U-=1].points).length-1);V=(j=K[U].points)[G-1],z=(q=j[G]).partialLength}T=ze.length,_=0,M=0;var Ft,dn,Sn,Ot,Xe,St=1.2*f.finalSize*.714,_n=!0;Sn=ct.length;var jn,zn,Rn,Nn,cn,Xn,Yn,li,Gt,qr,Kn,bi,gn=-1,er=H,Si=U,Mr=G,Rs=-1,Cr="",gs=this.defaultPropsArray;if(2===f.j||1===f.j){var Zr=0,En=0,wi=2===f.j?-.5:-1,Rr=0,or=!0;for(S=0;S<T;S+=1)if(ze[S].n){for(Zr&&(Zr+=En);Rr<S;)ze[Rr].animatorJustifyOffset=Zr,Rr+=1;Zr=0,or=!0}else{for(dn=0;dn<Sn;dn+=1)(Ft=ct[dn].a).t.propType&&(or&&2===f.j&&(En+=Ft.t.v*wi),(Xe=ct[dn].s.getMult(ze[S].anIndexes[dn],Ke.a[dn].s.totalChars)).length?Zr+=Ft.t.v*Xe[0]*wi:Zr+=Ft.t.v*Xe*wi);or=!1}for(Zr&&(Zr+=En);Rr<S;)ze[Rr].animatorJustifyOffset=Zr,Rr+=1}for(S=0;S<T;S+=1){if(lt.reset(),Nn=1,ze[S].n)_=0,M+=f.yOffset,M+=_n?1:0,H=er,_n=!1,this._hasMaskedPath&&(V=(j=K[U=Si].points)[(G=Mr)-1],z=(q=j[G]).partialLength,J=0),Cr="",Kn="",Gt="",bi="",gs=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Rs!==ze[S].line){switch(f.j){case 1:H+=ee-f.lineWidths[ze[S].line];break;case 2:H+=(ee-f.lineWidths[ze[S].line])/2}Rs=ze[S].line}gn!==ze[S].ind&&(ze[gn]&&(H+=ze[gn].extra),H+=ze[S].an/2,gn=ze[S].ind),H+=je[0]*ze[S].an*.005;var ar=0;for(dn=0;dn<Sn;dn+=1)(Ft=ct[dn].a).p.propType&&((Xe=ct[dn].s.getMult(ze[S].anIndexes[dn],Ke.a[dn].s.totalChars)).length?ar+=Ft.p.v[0]*Xe[0]:ar+=Ft.p.v[0]*Xe),Ft.a.propType&&((Xe=ct[dn].s.getMult(ze[S].anIndexes[dn],Ke.a[dn].s.totalChars)).length?ar+=Ft.a.v[0]*Xe[0]:ar+=Ft.a.v[0]*Xe);for(F=!0,this._pathData.a.v&&(H=.5*ze[0].an+(ee-this._pathData.f.v-.5*ze[0].an-.5*ze[ze.length-1].an)*gn/(T-1),H+=this._pathData.f.v);F;)J+z>=H+ar||!j?(zn=V.point[0]+(q.point[0]-V.point[0])*(de=(H+ar-J)/q.partialLength),Rn=V.point[1]+(q.point[1]-V.point[1])*de,lt.translate(-je[0]*ze[S].an*.005,-je[1]*St*.01),F=!1):j&&(J+=q.partialLength,(G+=1)>=j.length&&(G=0,K[U+=1]?j=K[U].points:Ee.v.c?(G=0,j=K[U=0].points):(J-=q.partialLength,j=null)),j&&(V=q,z=(q=j[G]).partialLength));lt.translate(-(jn=ze[S].an/2-ze[S].add),0,0)}else lt.translate(-(jn=ze[S].an/2-ze[S].add),0,0),lt.translate(-je[0]*ze[S].an*.005,-je[1]*St*.01,0);for(dn=0;dn<Sn;dn+=1)(Ft=ct[dn].a).t.propType&&(Xe=ct[dn].s.getMult(ze[S].anIndexes[dn],Ke.a[dn].s.totalChars),0===_&&0===f.j||(this._hasMaskedPath?H+=Xe.length?Ft.t.v*Xe[0]:Ft.t.v*Xe:_+=Xe.length?Ft.t.v*Xe[0]:Ft.t.v*Xe));for(f.strokeWidthAnim&&(Xn=f.sw||0),f.strokeColorAnim&&(cn=f.sc?[f.sc[0],f.sc[1],f.sc[2]]:[0,0,0]),f.fillColorAnim&&f.fc&&(Yn=[f.fc[0],f.fc[1],f.fc[2]]),dn=0;dn<Sn;dn+=1)(Ft=ct[dn].a).a.propType&&((Xe=ct[dn].s.getMult(ze[S].anIndexes[dn],Ke.a[dn].s.totalChars)).length?lt.translate(-Ft.a.v[0]*Xe[0],-Ft.a.v[1]*Xe[1],Ft.a.v[2]*Xe[2]):lt.translate(-Ft.a.v[0]*Xe,-Ft.a.v[1]*Xe,Ft.a.v[2]*Xe));for(dn=0;dn<Sn;dn+=1)(Ft=ct[dn].a).s.propType&&((Xe=ct[dn].s.getMult(ze[S].anIndexes[dn],Ke.a[dn].s.totalChars)).length?lt.scale(1+(Ft.s.v[0]-1)*Xe[0],1+(Ft.s.v[1]-1)*Xe[1],1):lt.scale(1+(Ft.s.v[0]-1)*Xe,1+(Ft.s.v[1]-1)*Xe,1));for(dn=0;dn<Sn;dn+=1){if(Ft=ct[dn].a,Xe=ct[dn].s.getMult(ze[S].anIndexes[dn],Ke.a[dn].s.totalChars),Ft.sk.propType&&(Xe.length?lt.skewFromAxis(-Ft.sk.v*Xe[0],Ft.sa.v*Xe[1]):lt.skewFromAxis(-Ft.sk.v*Xe,Ft.sa.v*Xe)),Ft.r.propType&&lt.rotateZ(Xe.length?-Ft.r.v*Xe[2]:-Ft.r.v*Xe),Ft.ry.propType&&lt.rotateY(Xe.length?Ft.ry.v*Xe[1]:Ft.ry.v*Xe),Ft.rx.propType&&lt.rotateX(Xe.length?Ft.rx.v*Xe[0]:Ft.rx.v*Xe),Ft.o.propType&&(Nn+=Xe.length?(Ft.o.v*Xe[0]-Nn)*Xe[0]:(Ft.o.v*Xe-Nn)*Xe),f.strokeWidthAnim&&Ft.sw.propType&&(Xn+=Xe.length?Ft.sw.v*Xe[0]:Ft.sw.v*Xe),f.strokeColorAnim&&Ft.sc.propType)for(li=0;li<3;li+=1)cn[li]+=Xe.length?(Ft.sc.v[li]-cn[li])*Xe[0]:(Ft.sc.v[li]-cn[li])*Xe;if(f.fillColorAnim&&f.fc){if(Ft.fc.propType)for(li=0;li<3;li+=1)Yn[li]+=Xe.length?(Ft.fc.v[li]-Yn[li])*Xe[0]:(Ft.fc.v[li]-Yn[li])*Xe;Ft.fh.propType&&(Yn=addHueToRGB(Yn,Xe.length?Ft.fh.v*Xe[0]:Ft.fh.v*Xe)),Ft.fs.propType&&(Yn=addSaturationToRGB(Yn,Xe.length?Ft.fs.v*Xe[0]:Ft.fs.v*Xe)),Ft.fb.propType&&(Yn=addBrightnessToRGB(Yn,Xe.length?Ft.fb.v*Xe[0]:Ft.fb.v*Xe))}}for(dn=0;dn<Sn;dn+=1)(Ft=ct[dn].a).p.propType&&(Xe=ct[dn].s.getMult(ze[S].anIndexes[dn],Ke.a[dn].s.totalChars),this._hasMaskedPath?Xe.length?lt.translate(0,Ft.p.v[1]*Xe[0],-Ft.p.v[2]*Xe[1]):lt.translate(0,Ft.p.v[1]*Xe,-Ft.p.v[2]*Xe):Xe.length?lt.translate(Ft.p.v[0]*Xe[0],Ft.p.v[1]*Xe[1],-Ft.p.v[2]*Xe[2]):lt.translate(Ft.p.v[0]*Xe,Ft.p.v[1]*Xe,-Ft.p.v[2]*Xe));if(f.strokeWidthAnim&&(Gt=Xn<0?0:Xn),f.strokeColorAnim&&(qr="rgb("+Math.round(255*cn[0])+","+Math.round(255*cn[1])+","+Math.round(255*cn[2])+")"),f.fillColorAnim&&f.fc&&(Kn="rgb("+Math.round(255*Yn[0])+","+Math.round(255*Yn[1])+","+Math.round(255*Yn[2])+")"),this._hasMaskedPath){if(lt.translate(0,-f.ls),lt.translate(0,je[1]*St*.01+M,0),this._pathData.p.v){var Pr=180*Math.atan((q.point[1]-V.point[1])/(q.point[0]-V.point[0]))/Math.PI;q.point[0]<V.point[0]&&(Pr+=180),lt.rotate(-Pr*Math.PI/180)}lt.translate(zn,Rn,0),H-=je[0]*ze[S].an*.005,ze[S+1]&&gn!==ze[S+1].ind&&(H+=ze[S].an/2,H+=.001*f.tr*f.finalSize)}else{switch(lt.translate(_,M,0),f.ps&&lt.translate(f.ps[0],f.ps[1]+f.ascent,0),f.j){case 1:lt.translate(ze[S].animatorJustifyOffset+f.justifyOffset+(f.boxWidth-f.lineWidths[ze[S].line]),0,0);break;case 2:lt.translate(ze[S].animatorJustifyOffset+f.justifyOffset+(f.boxWidth-f.lineWidths[ze[S].line])/2,0,0)}lt.translate(0,-f.ls),lt.translate(jn,0,0),lt.translate(je[0]*ze[S].an*.005,je[1]*St*.01,0),_+=ze[S].l+.001*f.tr*f.finalSize}"html"===At?Cr=lt.toCSS():"svg"===At?Cr=lt.to2dCSS():gs=[lt.props[0],lt.props[1],lt.props[2],lt.props[3],lt.props[4],lt.props[5],lt.props[6],lt.props[7],lt.props[8],lt.props[9],lt.props[10],lt.props[11],lt.props[12],lt.props[13],lt.props[14],lt.props[15]],bi=Nn}X<=S?(Ot=new LetterProps(bi,Gt,qr,Kn,Cr,gs),this.renderedLetters.push(Ot),X+=1,this.lettersChangedFlag=!0):this.lettersChangedFlag=(Ot=this.renderedLetters[S]).update(bi,Gt,qr,Kn,Cr,gs)||this.lettersChangedFlag}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(f,y,_){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(f,y,_),this.textProperty=new TextProperty(this,f.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(f.t,this.renderType,this),this.initTransform(f,y,_),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(f){this._mdf=!1,this.prepareRenderableFrame(f),this.prepareProperties(f,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(f,y){var _,M,S=y.length,T="";for(_=0;_<S;_+=1)"sh"===y[_].ty&&(T+=buildShapeString(M=y[_].ks.k,M.i.length,!0,f));return T},ITextElement.prototype.updateDocumentData=function(f,y){this.textProperty.updateDocumentData(f,y)},ITextElement.prototype.canResizeFont=function(f){this.textProperty.canResizeFont(f)},ITextElement.prototype.setMinimumFontSize=function(f){this.textProperty.setMinimumFontSize(f)},ITextElement.prototype.applyTextPropertiesToMatrix=function(f,y,_,M,S){switch(f.ps&&y.translate(f.ps[0],f.ps[1]+f.ascent,0),y.translate(0,-f.ls,0),f.j){case 1:y.translate(f.justifyOffset+(f.boxWidth-f.lineWidths[_]),0,0);break;case 2:y.translate(f.justifyOffset+(f.boxWidth-f.lineWidths[_])/2,0,0)}y.translate(M,S,0)},ITextElement.prototype.buildColor=function(f){return"rgb("+Math.round(255*f[0])+","+Math.round(255*f[1])+","+Math.round(255*f[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){};var emptyShapeData={shapes:[]};function SVGTextLottieElement(f,y,_){this.textSpans=[],this.renderType="svg",this.initElement(f,y,_)}function ISolidElement(f,y,_){this.initElement(f,y,_)}function NullElement(f,y,_){this.initFrame(),this.initBaseData(f,y,_),this.initFrame(),this.initTransform(f,y,_),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(f,y,_){this.layers=f.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(f,y,_),this.tm=f.tm?PropertyFactory.getProp(this,f.tm,0,y.frameRate,this):{_placeholder:!0}}function SVGRenderer(f,y){this.animationItem=f,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var _="";if(y&&y.title){var M=createNS("title"),S=createElementID();M.setAttribute("id",S),M.textContent=y.title,this.svgElement.appendChild(M),_+=S}if(y&&y.description){var T=createNS("desc"),Y=createElementID();T.setAttribute("id",Y),T.textContent=y.description,this.svgElement.appendChild(T),_+=" "+Y}_&&this.svgElement.setAttribute("aria-labelledby",_);var H=createNS("defs");this.svgElement.appendChild(H);var q=createNS("g");this.svgElement.appendChild(q),this.layerElement=q,this.renderConfig={preserveAspectRatio:y&&y.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:y&&y.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:y&&y.contentVisibility||"visible",progressiveLoad:y&&y.progressiveLoad||!1,hideOnTransparent:!(y&&!1===y.hideOnTransparent),viewBoxOnly:y&&y.viewBoxOnly||!1,viewBoxSize:y&&y.viewBoxSize||!1,className:y&&y.className||"",id:y&&y.id||"",focusable:y&&y.focusable,filterSize:{width:y&&y.filterSize&&y.filterSize.width||"100%",height:y&&y.filterSize&&y.filterSize.height||"100%",x:y&&y.filterSize&&y.filterSize.x||"0%",y:y&&y.filterSize&&y.filterSize.y||"0%"},width:y&&y.width,height:y&&y.height},this.globalData={_mdf:!1,frameNum:-1,defs:H,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CVContextData(){var f;for(this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1,this.savedOp=createTypedArray("float32",15),f=0;f<15;f+=1)this.saved[f]=createTypedArray("float32",16);this._length=15}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVEffects(){}function CVMaskElement(f,y){var _;this.data=f,this.element=y,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var M=this.masksProperties.length,S=!1;for(_=0;_<M;_+=1)"n"!==this.masksProperties[_].mode&&(S=!0),this.viewData[_]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[_],3);this.hasMasks=S,S&&this.element.addRenderableComponent(this)}function CVBaseElement(){}function CVShapeData(f,y,_,M){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var S,T=4;"rc"===y.ty?T=5:"el"===y.ty?T=6:"sr"===y.ty&&(T=7),this.sh=ShapePropertyFactory.getShapeProp(f,y,T,f);var Y,H=_.length;for(S=0;S<H;S+=1)_[S].closed||(Y={transforms:M.addTransformSequence(_[S].transforms),trNodes:[]},this.styledShapes.push(Y),_[S].elements.push(Y))}function CVShapeElement(f,y,_){this.shapes=[],this.shapesData=f.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(f,y,_)}function CVTextElement(f,y,_){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(f,y,_)}function CVImageElement(f,y,_){this.assetData=y.getAssetData(f.refId),this.img=y.imageLoader.getAsset(this.assetData),this.initElement(f,y,_)}function CVSolidElement(f,y,_){this.initElement(f,y,_)}function CanvasRendererBase(f,y){this.animationItem=f,this.renderConfig={clearCanvas:!y||void 0===y.clearCanvas||y.clearCanvas,context:y&&y.context||null,progressiveLoad:y&&y.progressiveLoad||!1,preserveAspectRatio:y&&y.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:y&&y.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:y&&y.contentVisibility||"visible",className:y&&y.className||"",id:y&&y.id||""},this.renderConfig.dpr=y&&y.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=y&&y.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function CVCompElement(f,y,_){this.completeLayers=!1,this.layers=f.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(f,y,_),this.tm=f.tm?PropertyFactory.getProp(this,f.tm,0,y.frameRate,this):{_placeholder:!0}}function CanvasRenderer(f,y){this.animationItem=f,this.renderConfig={clearCanvas:!y||void 0===y.clearCanvas||y.clearCanvas,context:y&&y.context||null,progressiveLoad:y&&y.progressiveLoad||!1,preserveAspectRatio:y&&y.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:y&&y.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:y&&y.contentVisibility||"visible",className:y&&y.className||"",id:y&&y.id||""},this.renderConfig.dpr=y&&y.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=y&&y.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HBaseElement(){}function HSolidElement(f,y,_){this.initElement(f,y,_)}function HShapeElement(f,y,_){this.shapes=[],this.shapesData=f.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(f,y,_),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(f,y,_){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(f,y,_)}function HCameraElement(f,y,_){this.initFrame(),this.initBaseData(f,y,_),this.initHierarchy();var M=PropertyFactory.getProp;if(this.pe=M(this,f.pe,0,0,this),f.ks.p.s?(this.px=M(this,f.ks.p.x,1,0,this),this.py=M(this,f.ks.p.y,1,0,this),this.pz=M(this,f.ks.p.z,1,0,this)):this.p=M(this,f.ks.p,1,0,this),f.ks.a&&(this.a=M(this,f.ks.a,1,0,this)),f.ks.or.k.length&&f.ks.or.k[0].to){var S,T=f.ks.or.k.length;for(S=0;S<T;S+=1)f.ks.or.k[S].to=null,f.ks.or.k[S].ti=null}this.or=M(this,f.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=M(this,f.ks.rx,0,degToRads,this),this.ry=M(this,f.ks.ry,0,degToRads,this),this.rz=M(this,f.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(f,y,_){this.assetData=y.getAssetData(f.refId),this.initElement(f,y,_)}function HybridRendererBase(f,y){this.animationItem=f,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:y&&y.className||"",imagePreserveAspectRatio:y&&y.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(y&&!1===y.hideOnTransparent),filterSize:{width:y&&y.filterSize&&y.filterSize.width||"400%",height:y&&y.filterSize&&y.filterSize.height||"400%",x:y&&y.filterSize&&y.filterSize.x||"-100%",y:y&&y.filterSize&&y.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(f,y,_){this.layers=f.layers,this.supports3d=!f.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(f,y,_),this.tm=f.tm?PropertyFactory.getProp(this,f.tm,0,y.frameRate,this):{_placeholder:!0}}function HybridRenderer(f,y){this.animationItem=f,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:y&&y.className||"",imagePreserveAspectRatio:y&&y.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(y&&!1===y.hideOnTransparent),filterSize:{width:y&&y.filterSize&&y.filterSize.width||"400%",height:y&&y.filterSize&&y.filterSize.height||"400%",x:y&&y.filterSize&&y.filterSize.x||"-100%",y:y&&y.filterSize&&y.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(f){for(var y=0,_=f.length,M=[],S="";y<_;)f[y]===String.fromCharCode(13)||f[y]===String.fromCharCode(3)?(M.push(S),S=""):S+=f[y],y+=1;return M.push(S),M},SVGTextLottieElement.prototype.buildShapeData=function(f,y){if(f.shapes&&f.shapes.length){var _=f.shapes[0];if(_.it){var M=_.it[_.it.length-1];M.s&&(M.s.k[0]=y,M.s.k[1]=y)}}return f},SVGTextLottieElement.prototype.buildNewText=function(){var f,y;this.addDynamicProperty(this);var _=this.textProperty.currentData;this.renderedLetters=createSizedArray(_?_.l.length:0),this.layerElement.setAttribute("fill",_.fc?this.buildColor(_.fc):"rgba(0,0,0,0)"),_.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(_.sc)),this.layerElement.setAttribute("stroke-width",_.sw)),this.layerElement.setAttribute("font-size",_.finalSize);var M=this.globalData.fontManager.getFontByName(_.f);if(M.fClass)this.layerElement.setAttribute("class",M.fClass);else{this.layerElement.setAttribute("font-family",M.fFamily);var S=_.fWeight;this.layerElement.setAttribute("font-style",_.fStyle),this.layerElement.setAttribute("font-weight",S)}this.layerElement.setAttribute("aria-label",_.t);var Y,H=_.l||[],q=!!this.globalData.fontManager.chars;y=H.length;var J=this.mHelper,F=this.data.singleShape,G=0,U=0,V=!0,j=.001*_.tr*_.finalSize;if(!F||q||_.sz){var K,z=this.textSpans.length;for(f=0;f<y;f+=1){if(this.textSpans[f]||(this.textSpans[f]={span:null,childSpan:null,glyph:null}),!q||!F||0===f){if(Y=z>f?this.textSpans[f].span:createNS(q?"g":"text"),z<=f){if(Y.setAttribute("stroke-linecap","butt"),Y.setAttribute("stroke-linejoin","round"),Y.setAttribute("stroke-miterlimit","4"),this.textSpans[f].span=Y,q){var ee=createNS("g");Y.appendChild(ee),this.textSpans[f].childSpan=ee}this.textSpans[f].span=Y,this.layerElement.appendChild(Y)}Y.style.display="inherit"}if(J.reset(),F&&(H[f].n&&(G=-j,U+=_.yOffset,U+=V?1:0,V=!1),this.applyTextPropertiesToMatrix(_,J,H[f].line,G,U),G+=H[f].l||0,G+=j),q){var de;if(1===(K=this.globalData.fontManager.getCharData(_.finalText[f],M.fStyle,this.globalData.fontManager.getFontByName(_.f).fFamily)).t)de=new SVGCompElement(K.data,this.globalData,this);else{var pe=emptyShapeData;K.data&&K.data.shapes&&(pe=this.buildShapeData(K.data,_.finalSize)),de=new SVGShapeElement(pe,this.globalData,this)}if(this.textSpans[f].glyph){var Ee=this.textSpans[f].glyph;this.textSpans[f].childSpan.removeChild(Ee.layerElement),Ee.destroy()}this.textSpans[f].glyph=de,de._debug=!0,de.prepareFrame(0),de.renderFrame(),this.textSpans[f].childSpan.appendChild(de.layerElement),1===K.t&&this.textSpans[f].childSpan.setAttribute("transform","scale("+_.finalSize/100+","+_.finalSize/100+")")}else F&&Y.setAttribute("transform","translate("+J.props[12]+","+J.props[13]+")"),Y.textContent=H[f].val,Y.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}F&&Y&&Y.setAttribute("d","")}else{var je=this.textContainer,ct="start";switch(_.j){case 1:ct="end";break;case 2:ct="middle";break;default:ct="start"}je.setAttribute("text-anchor",ct),je.setAttribute("letter-spacing",j);var Ke=this.buildTextContents(_.finalText);for(y=Ke.length,U=_.ps?_.ps[1]+_.ascent:0,f=0;f<y;f+=1)(Y=this.textSpans[f].span||createNS("tspan")).textContent=Ke[f],Y.setAttribute("x",0),Y.setAttribute("y",U),Y.style.display="inherit",je.appendChild(Y),this.textSpans[f]||(this.textSpans[f]={span:null,glyph:null}),this.textSpans[f].span=Y,U+=_.finalLineHeight;this.layerElement.appendChild(je)}for(;f<this.textSpans.length;)this.textSpans[f].span.style.display="none",f+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var f=this.layerElement.getBBox();this.bbox={top:f.y,left:f.x,width:f.width,height:f.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var f,y,_=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,f=0;f<_;f+=1)(y=this.textSpans[f].glyph)&&(y.prepareFrame(this.comp.renderedFrame-this.data.st),y._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if((!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var f,y;this._sizeChanged=!0;var _,M,S,T=this.textAnimator.renderedLetters,Y=this.textProperty.currentData.l;for(y=Y.length,f=0;f<y;f+=1)Y[f].n||(_=T[f],M=this.textSpans[f].span,(S=this.textSpans[f].glyph)&&S.renderFrame(),_._mdf.m&&M.setAttribute("transform",_.m),_._mdf.o&&M.setAttribute("opacity",_.o),_._mdf.sw&&M.setAttribute("stroke-width",_.sw),_._mdf.sc&&M.setAttribute("stroke",_.sc),_._mdf.fc&&M.setAttribute("fill",_.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var f=createNS("rect");f.setAttribute("width",this.data.sw),f.setAttribute("height",this.data.sh),f.setAttribute("fill",this.data.sc),this.layerElement.appendChild(f)},NullElement.prototype.prepareFrame=function(f){this.prepareProperties(f,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(f){return new NullElement(f,this.globalData,this)},SVGRendererBase.prototype.createShape=function(f){return new SVGShapeElement(f,this.globalData,this)},SVGRendererBase.prototype.createText=function(f){return new SVGTextLottieElement(f,this.globalData,this)},SVGRendererBase.prototype.createImage=function(f){return new IImageElement(f,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(f){return new ISolidElement(f,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(f){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize?this.renderConfig.viewBoxSize:"0 0 "+f.w+" "+f.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",f.w),this.svgElement.setAttribute("height",f.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var y=this.globalData.defs;this.setupGlobalData(f,y),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=f;var _=createNS("clipPath"),M=createNS("rect");M.setAttribute("width",f.w),M.setAttribute("height",f.h),M.setAttribute("x",0),M.setAttribute("y",0);var S=createElementID();_.setAttribute("id",S),_.appendChild(M),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+S+")"),y.appendChild(_),this.layers=f.layers,this.elements=createSizedArray(f.layers.length)},SVGRendererBase.prototype.destroy=function(){var f;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var y=this.layers?this.layers.length:0;for(f=0;f<y;f+=1)this.elements[f]&&this.elements[f].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.buildItem=function(f){var y=this.elements;if(!y[f]&&99!==this.layers[f].ty){y[f]=!0;var _=this.createItem(this.layers[f]);y[f]=_,getExpressionsPlugin()&&(0===this.layers[f].ty&&this.globalData.projectInterface.registerComposition(_),_.initExpressions()),this.appendElementInPos(_,f),this.layers[f].tt&&(this.elements[f-1]&&!0!==this.elements[f-1]?_.setMatte(y[f-1].layerId):(this.buildItem(f-1),this.addPendingElement(_)))}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var f=this.pendingElements.pop();if(f.checkParenting(),f.data.tt)for(var y=0,_=this.elements.length;y<_;){if(this.elements[y]===f){f.setMatte(this.elements[y-1].layerId);break}y+=1}}},SVGRendererBase.prototype.renderFrame=function(f){if(this.renderedFrame!==f&&!this.destroyed){var y;null===f?f=this.renderedFrame:this.renderedFrame=f,this.globalData.frameNum=f,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=f,this.globalData._mdf=!1;var _=this.layers.length;for(this.completeLayers||this.checkLayers(f),y=_-1;y>=0;y-=1)(this.completeLayers||this.elements[y])&&this.elements[y].prepareFrame(f-this.layers[y].st);if(this.globalData._mdf)for(y=0;y<_;y+=1)(this.completeLayers||this.elements[y])&&this.elements[y].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(f,y){var _=f.getBaseElement();if(_){for(var M,S=0;S<y;)this.elements[S]&&!0!==this.elements[S]&&this.elements[S].getBaseElement()&&(M=this.elements[S].getBaseElement()),S+=1;M?this.layerElement.insertBefore(_,M):this.layerElement.appendChild(_)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(f,y,_){this.initFrame(),this.initBaseData(f,y,_),this.initTransform(f,y,_),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&y.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(f){if(this._mdf=!1,this.prepareRenderableFrame(f),this.prepareProperties(f,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=f/this.data.sr;else{var y=this.tm.v;y===this.data.op&&(y=this.data.op-1),this.renderedFrame=y}var _,M=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),_=M-1;_>=0;_-=1)(this.completeLayers||this.elements[_])&&(this.elements[_].prepareFrame(this.renderedFrame-this.layers[_].st),this.elements[_]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var f,y=this.layers.length;for(f=0;f<y;f+=1)(this.completeLayers||this.elements[f])&&this.elements[f].renderFrame()},ICompElement.prototype.setElements=function(f){this.elements=f},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var f,y=this.layers.length;for(f=0;f<y;f+=1)this.elements[f]&&this.elements[f].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(f){return new SVGCompElement(f,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(f){return new SVGCompElement(f,this.globalData,this)},CVContextData.prototype.duplicate=function(){var f=2*this._length,y=this.savedOp;this.savedOp=createTypedArray("float32",f),this.savedOp.set(y);var _=0;for(_=this._length;_<f;_+=1)this.saved[_]=createTypedArray("float32",16);this._length=f},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},ShapeTransformManager.prototype={addTransformSequence:function(f){var y,_=f.length,M="_";for(y=0;y<_;y+=1)M+=f[y].transform.key+"_";var S=this.sequences[M];return S||(S={transforms:[].concat(f),finalTransform:new Matrix,_mdf:!1},this.sequences[M]=S,this.sequenceList.push(S)),S},processSequence:function(f,y){for(var _,M=0,S=f.transforms.length,T=y;M<S&&!y;){if(f.transforms[M].transform.mProps._mdf){T=!0;break}M+=1}if(T)for(f.finalTransform.reset(),M=S-1;M>=0;M-=1)f.finalTransform.transform((_=f.transforms[M].transform.mProps.v.props)[0],_[1],_[2],_[3],_[4],_[5],_[6],_[7],_[8],_[9],_[10],_[11],_[12],_[13],_[14],_[15]);f._mdf=T},processSequences:function(f){var y,_=this.sequenceList.length;for(y=0;y<_;y+=1)this.processSequence(this.sequenceList[y],f)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}},CVEffects.prototype.renderFrame=function(){},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var f,y,_,M,S=this.element.finalTransform.mat,T=this.element.canvasContext,Y=this.masksProperties.length;for(T.beginPath(),f=0;f<Y;f+=1)if("n"!==this.masksProperties[f].mode){var H;this.masksProperties[f].inv&&(T.moveTo(0,0),T.lineTo(this.element.globalData.compSize.w,0),T.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),T.lineTo(0,this.element.globalData.compSize.h),T.lineTo(0,0)),y=S.applyToPointArray((M=this.viewData[f].v).v[0][0],M.v[0][1],0),T.moveTo(y[0],y[1]);var q=M._length;for(H=1;H<q;H+=1)_=S.applyToTriplePoints(M.o[H-1],M.i[H],M.v[H]),T.bezierCurveTo(_[0],_[1],_[2],_[3],_[4],_[5]);_=S.applyToTriplePoints(M.o[H-1],M.i[0],M.v[0]),T.bezierCurveTo(_[0],_[1],_[2],_[3],_[4],_[5])}this.element.globalData.renderer.save(!0),T.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var f=this.globalData;if(f.blendMode!==this.data.bm){f.blendMode=this.data.bm;var y=getBlendMode(this.data.bm);f.canvasContext.globalCompositeOperation=y}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){if(!this.hidden&&!this.data.hd){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var f=0===this.data.ty;this.globalData.renderer.save(f),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(f),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(f,y){var _={data:f,type:f.ty,preTransforms:this.transformsManager.addTransformSequence(y),transforms:[],elements:[],closed:!0===f.hd},M={};if("fl"===f.ty||"st"===f.ty?(M.c=PropertyFactory.getProp(this,f.c,1,255,this),M.c.k||(_.co="rgb("+bmFloor(M.c.v[0])+","+bmFloor(M.c.v[1])+","+bmFloor(M.c.v[2])+")")):"gf"!==f.ty&&"gs"!==f.ty||(M.s=PropertyFactory.getProp(this,f.s,1,null,this),M.e=PropertyFactory.getProp(this,f.e,1,null,this),M.h=PropertyFactory.getProp(this,f.h||{k:0},0,.01,this),M.a=PropertyFactory.getProp(this,f.a||{k:0},0,degToRads,this),M.g=new GradientProperty(this,f.g,this)),M.o=PropertyFactory.getProp(this,f.o,0,.01,this),"st"===f.ty||"gs"===f.ty){if(_.lc=lineCapEnum[f.lc||2],_.lj=lineJoinEnum[f.lj||2],1==f.lj&&(_.ml=f.ml),M.w=PropertyFactory.getProp(this,f.w,0,null,this),M.w.k||(_.wi=M.w.v),f.d){var S=new DashProperty(this,f.d,"canvas",this);M.d=S,M.d.k||(_.da=M.d.dashArray,_.do=M.d.dashoffset[0])}}else _.r=2===f.r?"evenodd":"nonzero";return this.stylesList.push(_),M.style=_,M},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(f){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,f.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,f,this)}}},CVShapeElement.prototype.createShapeElement=function(f){var y=new CVShapeData(this,f,this.stylesList,this.transformsManager);return this.shapes.push(y),this.addShapeToModifiers(y),y},CVShapeElement.prototype.reloadShapes=function(){var f;this._isFirstFrame=!0;var y=this.itemsData.length;for(f=0;f<y;f+=1)this.prevViewData[f]=this.itemsData[f];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),y=this.dynamicProperties.length,f=0;f<y;f+=1)this.dynamicProperties[f].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(f){var y,_=this.stylesList.length;for(y=0;y<_;y+=1)this.stylesList[y].closed||this.stylesList[y].transforms.push(f)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var f,y=this.stylesList.length;for(f=0;f<y;f+=1)this.stylesList[f].closed||this.stylesList[f].transforms.pop()},CVShapeElement.prototype.closeStyles=function(f){var y,_=f.length;for(y=0;y<_;y+=1)f[y].closed=!0},CVShapeElement.prototype.searchShapes=function(f,y,_,M,S){var T,Y,H,q,J,F,G=f.length-1,U=[],V=[],j=[].concat(S);for(T=G;T>=0;T-=1){if((q=this.searchProcessedElement(f[T]))?y[T]=_[q-1]:f[T]._shouldRender=M,"fl"===f[T].ty||"st"===f[T].ty||"gf"===f[T].ty||"gs"===f[T].ty)q?y[T].style.closed=!1:y[T]=this.createStyleElement(f[T],j),U.push(y[T].style);else if("gr"===f[T].ty){if(q)for(H=y[T].it.length,Y=0;Y<H;Y+=1)y[T].prevViewData[Y]=y[T].it[Y];else y[T]=this.createGroupElement(f[T]);this.searchShapes(f[T].it,y[T].it,y[T].prevViewData,M,j)}else"tr"===f[T].ty?(q||(F=this.createTransformElement(f[T]),y[T]=F),j.push(y[T]),this.addTransformToStyleList(y[T])):"sh"===f[T].ty||"rc"===f[T].ty||"el"===f[T].ty||"sr"===f[T].ty?q||(y[T]=this.createShapeElement(f[T])):"tm"===f[T].ty||"rd"===f[T].ty||"pb"===f[T].ty?(q?(J=y[T]).closed=!1:((J=ShapeModifiers.getModifier(f[T].ty)).init(this,f[T]),y[T]=J,this.shapeModifiers.push(J)),V.push(J)):"rp"===f[T].ty&&(q?(J=y[T]).closed=!0:(J=ShapeModifiers.getModifier(f[T].ty),y[T]=J,J.init(this,f,T,y),this.shapeModifiers.push(J),M=!1),V.push(J));this.addProcessedElement(f[T],T+1)}for(this.removeTransformFromStyleList(),this.closeStyles(U),G=V.length,T=0;T<G;T+=1)V[T].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(f,y){(f._opMdf||y.op._mdf||this._isFirstFrame)&&(y.opacity=f.opacity,y.opacity*=y.op.v,y._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var f,y,_,M,S,T,Y,H,q,J=this.stylesList.length,F=this.globalData.renderer,G=this.globalData.canvasContext;for(f=0;f<J;f+=1)if(("st"!==(H=(q=this.stylesList[f]).type)&&"gs"!==H||0!==q.wi)&&q.data._shouldRender&&0!==q.coOp&&0!==this.globalData.currentGlobalAlpha){for(F.save(),T=q.elements,"st"===H||"gs"===H?(G.strokeStyle="st"===H?q.co:q.grd,G.lineWidth=q.wi,G.lineCap=q.lc,G.lineJoin=q.lj,G.miterLimit=q.ml||0):G.fillStyle="fl"===H?q.co:q.grd,F.ctxOpacity(q.coOp),"st"!==H&&"gs"!==H&&G.beginPath(),F.ctxTransform(q.preTransforms.finalTransform.props),_=T.length,y=0;y<_;y+=1){for("st"!==H&&"gs"!==H||(G.beginPath(),q.da&&(G.setLineDash(q.da),G.lineDashOffset=q.do)),S=(Y=T[y].trNodes).length,M=0;M<S;M+=1)"m"===Y[M].t?G.moveTo(Y[M].p[0],Y[M].p[1]):"c"===Y[M].t?G.bezierCurveTo(Y[M].pts[0],Y[M].pts[1],Y[M].pts[2],Y[M].pts[3],Y[M].pts[4],Y[M].pts[5]):G.closePath();"st"!==H&&"gs"!==H||(G.stroke(),q.da&&G.setLineDash(this.dashResetter))}"st"!==H&&"gs"!==H&&G.fill(q.r),F.restore()}},CVShapeElement.prototype.renderShape=function(f,y,_,M){var S,T;for(T=f,S=y.length-1;S>=0;S-=1)"tr"===y[S].ty?this.renderShapeTransform(f,T=_[S].transform):"sh"===y[S].ty||"el"===y[S].ty||"rc"===y[S].ty||"sr"===y[S].ty?this.renderPath(y[S],_[S]):"fl"===y[S].ty?this.renderFill(y[S],_[S],T):"st"===y[S].ty?this.renderStroke(y[S],_[S],T):"gf"===y[S].ty||"gs"===y[S].ty?this.renderGradientFill(y[S],_[S],T):"gr"===y[S].ty&&this.renderShape(T,y[S].it,_[S].it);M&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(f,y){if(this._isFirstFrame||y._mdf||f.transforms._mdf){var _,M,S,T=f.trNodes,Y=y.paths,H=Y._length;T.length=0;var q=f.transforms.finalTransform;for(S=0;S<H;S+=1){var J=Y.shapes[S];if(J&&J.v){for(M=J._length,_=1;_<M;_+=1)1===_&&T.push({t:"m",p:q.applyToPointArray(J.v[0][0],J.v[0][1],0)}),T.push({t:"c",pts:q.applyToTriplePoints(J.o[_-1],J.i[_],J.v[_])});1===M&&T.push({t:"m",p:q.applyToPointArray(J.v[0][0],J.v[0][1],0)}),J.c&&M&&(T.push({t:"c",pts:q.applyToTriplePoints(J.o[_-1],J.i[0],J.v[0])}),T.push({t:"z"}))}}f.trNodes=T}},CVShapeElement.prototype.renderPath=function(f,y){if(!0!==f.hd&&f._shouldRender){var _,M=y.styledShapes.length;for(_=0;_<M;_+=1)this.renderStyledShape(y.styledShapes[_],y.sh)}},CVShapeElement.prototype.renderFill=function(f,y,_){var M=y.style;(y.c._mdf||this._isFirstFrame)&&(M.co="rgb("+bmFloor(y.c.v[0])+","+bmFloor(y.c.v[1])+","+bmFloor(y.c.v[2])+")"),(y.o._mdf||_._opMdf||this._isFirstFrame)&&(M.coOp=y.o.v*_.opacity)},CVShapeElement.prototype.renderGradientFill=function(f,y,_){var M,S=y.style;if(!S.grd||y.g._mdf||y.s._mdf||y.e._mdf||1!==f.t&&(y.h._mdf||y.a._mdf)){var T,Y=this.globalData.canvasContext,H=y.s.v,q=y.e.v;if(1===f.t)M=Y.createLinearGradient(H[0],H[1],q[0],q[1]);else{var J=Math.sqrt(Math.pow(H[0]-q[0],2)+Math.pow(H[1]-q[1],2)),F=Math.atan2(q[1]-H[1],q[0]-H[0]),G=y.h.v;G>=1?G=.99:G<=-1&&(G=-.99);var U=J*G,V=Math.cos(F+y.a.v)*U+H[0],j=Math.sin(F+y.a.v)*U+H[1];M=Y.createRadialGradient(V,j,0,H[0],H[1],J)}var K=f.g.p,z=y.g.c,ee=1;for(T=0;T<K;T+=1)y.g._hasOpacity&&y.g._collapsable&&(ee=y.g.o[2*T+1]),M.addColorStop(z[4*T]/100,"rgba("+z[4*T+1]+","+z[4*T+2]+","+z[4*T+3]+","+ee+")");S.grd=M}S.coOp=y.o.v*_.opacity},CVShapeElement.prototype.renderStroke=function(f,y,_){var M=y.style,S=y.d;S&&(S._mdf||this._isFirstFrame)&&(M.da=S.dashArray,M.do=S.dashoffset[0]),(y.c._mdf||this._isFirstFrame)&&(M.co="rgb("+bmFloor(y.c.v[0])+","+bmFloor(y.c.v[1])+","+bmFloor(y.c.v[2])+")"),(y.o._mdf||_._opMdf||this._isFirstFrame)&&(M.coOp=y.o.v*_.opacity),(y.w._mdf||this._isFirstFrame)&&(M.wi=y.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var f=this.textProperty.currentData;this.renderedLetters=createSizedArray(f.l?f.l.length:0);var y=!1;f.fc?(y=!0,this.values.fill=this.buildColor(f.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=y;var _=!1;f.sc&&(_=!0,this.values.stroke=this.buildColor(f.sc),this.values.sWidth=f.sw);var M,S,T,Y,H,q,J,F,G,U,V,j,K=this.globalData.fontManager.getFontByName(f.f),z=f.l,ee=this.mHelper;this.stroke=_,this.values.fValue=f.finalSize+"px "+this.globalData.fontManager.getFontByName(f.f).fFamily,S=f.finalText.length;var de=this.data.singleShape,pe=.001*f.tr*f.finalSize,Ee=0,je=0,ct=!0,Ke=0;for(M=0;M<S;M+=1){Y=(T=this.globalData.fontManager.getCharData(f.finalText[M],K.fStyle,this.globalData.fontManager.getFontByName(f.f).fFamily))&&T.data||{},ee.reset(),de&&z[M].n&&(Ee=-pe,je+=f.yOffset,je+=ct?1:0,ct=!1),G=(J=Y.shapes?Y.shapes[0].it:[]).length,ee.scale(f.finalSize/100,f.finalSize/100),de&&this.applyTextPropertiesToMatrix(f,ee,z[M].line,Ee,je),V=createSizedArray(G-1);var lt=0;for(F=0;F<G;F+=1)if("sh"===J[F].ty){for(q=J[F].ks.k.i.length,U=J[F].ks.k,j=[],H=1;H<q;H+=1)1===H&&j.push(ee.applyToX(U.v[0][0],U.v[0][1],0),ee.applyToY(U.v[0][0],U.v[0][1],0)),j.push(ee.applyToX(U.o[H-1][0],U.o[H-1][1],0),ee.applyToY(U.o[H-1][0],U.o[H-1][1],0),ee.applyToX(U.i[H][0],U.i[H][1],0),ee.applyToY(U.i[H][0],U.i[H][1],0),ee.applyToX(U.v[H][0],U.v[H][1],0),ee.applyToY(U.v[H][0],U.v[H][1],0));j.push(ee.applyToX(U.o[H-1][0],U.o[H-1][1],0),ee.applyToY(U.o[H-1][0],U.o[H-1][1],0),ee.applyToX(U.i[0][0],U.i[0][1],0),ee.applyToY(U.i[0][0],U.i[0][1],0),ee.applyToX(U.v[0][0],U.v[0][1],0),ee.applyToY(U.v[0][0],U.v[0][1],0)),V[lt]=j,lt+=1}de&&(Ee+=z[M].l,Ee+=pe),this.textSpans[Ke]?this.textSpans[Ke].elem=V:this.textSpans[Ke]={elem:V},Ke+=1}},CVTextElement.prototype.renderInnerContent=function(){var f,y,_,M,S,T,Y=this.canvasContext;Y.font=this.values.fValue,Y.lineCap="butt",Y.lineJoin="miter",Y.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var H,q=this.textAnimator.renderedLetters,J=this.textProperty.currentData.l;y=J.length;var F,G,U=null,V=null,j=null;for(f=0;f<y;f+=1)if(!J[f].n){if((H=q[f])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(H.p),this.globalData.renderer.ctxOpacity(H.o)),this.fill){for(H&&H.fc?U!==H.fc&&(U=H.fc,Y.fillStyle=H.fc):U!==this.values.fill&&(U=this.values.fill,Y.fillStyle=this.values.fill),M=(F=this.textSpans[f].elem).length,this.globalData.canvasContext.beginPath(),_=0;_<M;_+=1)for(T=(G=F[_]).length,this.globalData.canvasContext.moveTo(G[0],G[1]),S=2;S<T;S+=6)this.globalData.canvasContext.bezierCurveTo(G[S],G[S+1],G[S+2],G[S+3],G[S+4],G[S+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(H&&H.sw?j!==H.sw&&(j=H.sw,Y.lineWidth=H.sw):j!==this.values.sWidth&&(j=this.values.sWidth,Y.lineWidth=this.values.sWidth),H&&H.sc?V!==H.sc&&(V=H.sc,Y.strokeStyle=H.sc):V!==this.values.stroke&&(V=this.values.stroke,Y.strokeStyle=this.values.stroke),M=(F=this.textSpans[f].elem).length,this.globalData.canvasContext.beginPath(),_=0;_<M;_+=1)for(T=(G=F[_]).length,this.globalData.canvasContext.moveTo(G[0],G[1]),S=2;S<T;S+=6)this.globalData.canvasContext.bezierCurveTo(G[S],G[S+1],G[S+2],G[S+3],G[S+4],G[S+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}H&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var f=createTag("canvas");f.width=this.assetData.w,f.height=this.assetData.h;var y,_,M=f.getContext("2d"),S=this.img.width,T=this.img.height,Y=S/T,H=this.assetData.w/this.assetData.h,q=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;Y>H&&"xMidYMid slice"===q||Y<H&&"xMidYMid slice"!==q?y=(_=T)*H:_=(y=S)/H,M.drawImage(this.img,(S-y)/2,(T-_)/2,y,_,0,0,this.assetData.w,this.assetData.h),this.img=f}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var f=this.canvasContext;f.fillStyle=this.data.sc,f.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(f){return new CVShapeElement(f,this.globalData,this)},CanvasRendererBase.prototype.createText=function(f){return new CVTextElement(f,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(f){return new CVImageElement(f,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(f){return new CVSolidElement(f,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(f){if(1!==f[0]||0!==f[1]||0!==f[4]||1!==f[5]||0!==f[12]||0!==f[13])if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(f);var y=this.contextData.cTr.props;this.transformMat.transform(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8],y[9],y[10],y[11],y[12],y[13],y[14],y[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var _=this.contextData.cTr.props;this.canvasContext.setTransform(_[0],_[1],_[4],_[5],_[12],_[13])}else this.canvasContext.transform(f[0],f[1],f[4],f[5],f[12],f[13])},CanvasRendererBase.prototype.ctxOpacity=function(f){if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=f<0?0:f,void(this.globalData.currentGlobalAlpha=this.contextData.cO);this.contextData.cO*=f<0?0:f,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(f){if(this.renderConfig.clearCanvas){f&&this.canvasContext.save();var y,_=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var M=this.contextData.saved[this.contextData.cArrPos];for(y=0;y<16;y+=1)M[y]=_[y];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(f){if(this.renderConfig.clearCanvas){f&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var y,_=this.contextData.saved[this.contextData.cArrPos],M=this.contextData.cTr.props;for(y=0;y<16;y+=1)M[y]=_[y];this.canvasContext.setTransform(_[0],_[1],_[4],_[5],_[12],_[13]),this.contextData.cO=_=this.contextData.savedOp[this.contextData.cArrPos],this.globalData.currentGlobalAlpha!==_&&(this.canvasContext.globalAlpha=_,this.globalData.currentGlobalAlpha=_)}else this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(f){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var y=this.animationItem.container.style;y.width="100%",y.height="100%";var _="0px 0px 0px";y.transformOrigin=_,y.mozTransformOrigin=_,y.webkitTransformOrigin=_,y["-webkit-transform"]=_,y.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=f,this.layers=f.layers,this.transformCanvas={w:f.w,h:f.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(f,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(f.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(){var f,y,_,M;if(this.reset(),this.animationItem.wrapper&&this.animationItem.container?(y=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",(f=this.animationItem.wrapper.offsetWidth)*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",y*this.renderConfig.dpr)):(f=this.canvasContext.canvas.width*this.renderConfig.dpr,y=this.canvasContext.canvas.height*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var S=this.renderConfig.preserveAspectRatio.split(" "),T=S[1]||"meet",Y=S[0]||"xMidYMid",H=Y.substr(0,4),q=Y.substr(4);(M=this.transformCanvas.w/this.transformCanvas.h)>(_=f/y)&&"meet"===T||M<_&&"slice"===T?(this.transformCanvas.sx=f/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=f/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=y/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=y/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===H&&(M<_&&"meet"===T||M>_&&"slice"===T)?(f-this.transformCanvas.w*(y/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===H&&(M<_&&"meet"===T||M>_&&"slice"===T)?(f-this.transformCanvas.w*(y/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===q&&(M>_&&"meet"===T||M<_&&"slice"===T)?(y-this.transformCanvas.h*(f/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===q&&(M>_&&"meet"===T||M<_&&"slice"===T)?(y-this.transformCanvas.h*(f/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=f/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=y/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var f;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),f=(this.layers?this.layers.length:0)-1;f>=0;f-=1)this.elements[f]&&this.elements[f].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(f,y){if((this.renderedFrame!==f||!0!==this.renderConfig.clearCanvas||y)&&!this.destroyed&&-1!==f){var _;this.renderedFrame=f,this.globalData.frameNum=f-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||y,this.globalData.projectInterface.currentFrame=f;var M=this.layers.length;for(this.completeLayers||this.checkLayers(f),_=0;_<M;_+=1)(this.completeLayers||this.elements[_])&&this.elements[_].prepareFrame(f-this.layers[_].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),_=M-1;_>=0;_-=1)(this.completeLayers||this.elements[_])&&this.elements[_].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(f){var y=this.elements;if(!y[f]&&99!==this.layers[f].ty){var _=this.createItem(this.layers[f],this,this.globalData);y[f]=_,_.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var f,y=this.canvasContext;for(y.beginPath(),y.moveTo(0,0),y.lineTo(this.data.w,0),y.lineTo(this.data.w,this.data.h),y.lineTo(0,this.data.h),y.lineTo(0,0),y.clip(),f=this.layers.length-1;f>=0;f-=1)(this.completeLayers||this.elements[f])&&this.elements[f].renderFrame()},CVCompElement.prototype.destroy=function(){var f;for(f=this.layers.length-1;f>=0;f-=1)this.elements[f]&&this.elements[f].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(f){return new CVCompElement(f,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(f){return new CVCompElement(f,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var f=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var y=this.finalTransform.mat.toCSS();f.transform=y,f.webkitTransform=y}this.finalTransform._opMdf&&(f.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var f;this.data.hasMask?((f=createNS("rect")).setAttribute("width",this.data.sw),f.setAttribute("height",this.data.sh),f.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((f=createTag("div")).style.width=this.data.sw+"px",f.style.height=this.data.sh+"px",f.style.backgroundColor=this.data.sc),this.layerElement.appendChild(f)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var f;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),f=this.svgElement;else{f=createNS("svg");var y=this.comp.data?this.comp.data:this.globalData.compSize;f.setAttribute("width",y.w),f.setAttribute("height",y.h),f.appendChild(this.shapesContainer),this.layerElement.appendChild(f)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=f},HShapeElement.prototype.getTransformedPoint=function(f,y){var _,M=f.length;for(_=0;_<M;_+=1)y=f[_].mProps.v.applyToPointArray(y[0],y[1],0);return y},HShapeElement.prototype.calculateShapeBoundingBox=function(f,y){var _,M,S,T,Y,H=f.sh.v,q=f.transformers,J=H._length;if(!(J<=1)){for(_=0;_<J-1;_+=1)M=this.getTransformedPoint(q,H.v[_]),S=this.getTransformedPoint(q,H.o[_]),T=this.getTransformedPoint(q,H.i[_+1]),Y=this.getTransformedPoint(q,H.v[_+1]),this.checkBounds(M,S,T,Y,y);H.c&&(M=this.getTransformedPoint(q,H.v[_]),S=this.getTransformedPoint(q,H.o[_]),T=this.getTransformedPoint(q,H.i[0]),Y=this.getTransformedPoint(q,H.v[0]),this.checkBounds(M,S,T,Y,y))}},HShapeElement.prototype.checkBounds=function(f,y,_,M,S){this.getBoundsOfCurve(f,y,_,M);var T=this.shapeBoundingBox;S.x=bmMin(T.left,S.x),S.xMax=bmMax(T.right,S.xMax),S.y=bmMin(T.top,S.y),S.yMax=bmMax(T.bottom,S.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(f,y,_,M){for(var S,T,Y,H,q,J,F,G=[[f[0],M[0]],[f[1],M[1]]],U=0;U<2;++U)T=6*f[U]-12*y[U]+6*_[U],S=-3*f[U]+9*y[U]-9*_[U]+3*M[U],Y=3*y[U]-3*f[U],T|=0,Y|=0,0==(S|=0)&&0===T||(0===S?(H=-Y/T)>0&&H<1&&G[U].push(this.calculateF(H,f,y,_,M,U)):(q=T*T-4*Y*S)>=0&&((J=(-T+bmSqrt(q))/(2*S))>0&&J<1&&G[U].push(this.calculateF(J,f,y,_,M,U)),(F=(-T-bmSqrt(q))/(2*S))>0&&F<1&&G[U].push(this.calculateF(F,f,y,_,M,U))));this.shapeBoundingBox.left=bmMin.apply(null,G[0]),this.shapeBoundingBox.top=bmMin.apply(null,G[1]),this.shapeBoundingBox.right=bmMax.apply(null,G[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,G[1])},HShapeElement.prototype.calculateF=function(f,y,_,M,S,T){return bmPow(1-f,3)*y[T]+3*bmPow(1-f,2)*f*_[T]+3*(1-f)*bmPow(f,2)*M[T]+bmPow(f,3)*S[T]},HShapeElement.prototype.calculateBoundingBox=function(f,y){var _,M=f.length;for(_=0;_<M;_+=1)f[_]&&f[_].sh?this.calculateShapeBoundingBox(f[_],y):f[_]&&f[_].it?this.calculateBoundingBox(f[_].it,y):f[_]&&f[_].style&&f[_].w&&this.expandStrokeBoundingBox(f[_].w,y)},HShapeElement.prototype.expandStrokeBoundingBox=function(f,y){var _=0;if(f.keyframes){for(var M=0;M<f.keyframes.length;M+=1){var S=f.keyframes[M].s;S>_&&(_=S)}_*=f.mult}else _=f.v*f.mult;y.x-=_,y.xMax+=_,y.y-=_,y.yMax+=_},HShapeElement.prototype.currentBoxContains=function(f){return this.currentBBox.x<=f.x&&this.currentBBox.y<=f.y&&this.currentBBox.width+this.currentBBox.x>=f.x+f.width&&this.currentBBox.height+this.currentBBox.y>=f.y+f.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var f=this.tempBoundingBox,y=999999;if(f.x=y,f.xMax=-y,f.y=y,f.yMax=-y,this.calculateBoundingBox(this.itemsData,f),f.width=f.xMax<f.x?0:f.xMax-f.x,f.height=f.yMax<f.y?0:f.yMax-f.y,this.currentBoxContains(f))return;var _=!1;if(this.currentBBox.w!==f.width&&(this.currentBBox.w=f.width,this.shapeCont.setAttribute("width",f.width),_=!0),this.currentBBox.h!==f.height&&(this.currentBBox.h=f.height,this.shapeCont.setAttribute("height",f.height),_=!0),_||this.currentBBox.x!==f.x||this.currentBBox.y!==f.y){this.currentBBox.w=f.width,this.currentBBox.h=f.height,this.currentBBox.x=f.x,this.currentBBox.y=f.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var M=this.shapeCont.style,S="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";M.transform=S,M.webkitTransform=S}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var f=createNS("g");this.maskedElement.appendChild(f),this.innerElem=f}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var f=this.textProperty.currentData;this.renderedLetters=createSizedArray(f.l?f.l.length:0);var y=this.innerElem.style,_=f.fc?this.buildColor(f.fc):"rgba(0,0,0,0)";y.fill=_,y.color=_,f.sc&&(y.stroke=this.buildColor(f.sc),y.strokeWidth=f.sw+"px");var M,S,T=this.globalData.fontManager.getFontByName(f.f);if(!this.globalData.fontManager.chars)if(y.fontSize=f.finalSize+"px",y.lineHeight=f.finalSize+"px",T.fClass)this.innerElem.className=T.fClass;else{y.fontFamily=T.fFamily;var Y=f.fWeight;y.fontStyle=f.fStyle,y.fontWeight=Y}var q,J,F,G=f.l;S=G.length;var U,V=this.mHelper,j="",K=0;for(M=0;M<S;M+=1){if(this.globalData.fontManager.chars?(this.textPaths[K]?q=this.textPaths[K]:((q=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),q.setAttribute("stroke-linejoin",lineJoinEnum[2]),q.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[K]?F=(J=this.textSpans[K]).children[0]:((J=createTag("div")).style.lineHeight=0,(F=createNS("svg")).appendChild(q),styleDiv(J)))):this.isMasked?q=this.textPaths[K]?this.textPaths[K]:createNS("text"):this.textSpans[K]?(J=this.textSpans[K],q=this.textPaths[K]):(styleDiv(J=createTag("span")),styleDiv(q=createTag("span")),J.appendChild(q)),this.globalData.fontManager.chars){var z,ee=this.globalData.fontManager.getCharData(f.finalText[M],T.fStyle,this.globalData.fontManager.getFontByName(f.f).fFamily);if(z=ee?ee.data:null,V.reset(),z&&z.shapes&&z.shapes.length&&(U=z.shapes[0].it,V.scale(f.finalSize/100,f.finalSize/100),j=this.createPathShape(V,U),q.setAttribute("d",j)),this.isMasked)this.innerElem.appendChild(q);else{if(this.innerElem.appendChild(J),z&&z.shapes){document.body.appendChild(F);var de=F.getBBox();F.setAttribute("width",de.width+2),F.setAttribute("height",de.height+2),F.setAttribute("viewBox",de.x-1+" "+(de.y-1)+" "+(de.width+2)+" "+(de.height+2));var pe=F.style,Ee="translate("+(de.x-1)+"px,"+(de.y-1)+"px)";pe.transform=Ee,pe.webkitTransform=Ee,G[M].yOffset=de.y-1}else F.setAttribute("width",1),F.setAttribute("height",1);J.appendChild(F)}}else if(q.textContent=G[M].val,q.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(q);else{this.innerElem.appendChild(J);var je=q.style,ct="translate3d(0,"+-f.finalSize/1.2+"px,0)";je.transform=ct,je.webkitTransform=ct}this.textSpans[K]=this.isMasked?q:J,this.textSpans[K].style.display="block",this.textPaths[K]=q,K+=1}for(;K<this.textSpans.length;)this.textSpans[K].style.display="none",K+=1},HTextElement.prototype.renderInnerContent=function(){var f;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH);var y="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";(f=this.svgElement.style).transform=y,f.webkitTransform=y}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var _,M,S,T,Y,H=0,q=this.textAnimator.renderedLetters,J=this.textProperty.currentData.l;for(M=J.length,_=0;_<M;_+=1)J[_].n?H+=1:(T=this.textSpans[_],Y=this.textPaths[_],S=q[H],H+=1,S._mdf.m&&(this.isMasked?T.setAttribute("transform",S.m):(T.style.webkitTransform=S.m,T.style.transform=S.m)),T.style.opacity=S.o,S.sw&&S._mdf.sw&&Y.setAttribute("stroke-width",S.sw),S.sc&&S._mdf.sc&&Y.setAttribute("stroke",S.sc),S.fc&&S._mdf.fc&&(Y.setAttribute("fill",S.fc),Y.style.color=S.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var F=this.innerElem.getBBox();if(this.currentBBox.w!==F.width&&(this.currentBBox.w=F.width,this.svgElement.setAttribute("width",F.width)),this.currentBBox.h!==F.height&&(this.currentBBox.h=F.height,this.svgElement.setAttribute("height",F.height)),this.currentBBox.w!==F.width+2||this.currentBBox.h!==F.height+2||this.currentBBox.x!==F.x-1||this.currentBBox.y!==F.y-1){this.currentBBox.w=F.width+2,this.currentBBox.h=F.height+2,this.currentBBox.x=F.x-1,this.currentBBox.y=F.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var G="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";(f=this.svgElement.style).transform=G,f.webkitTransform=G}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var f,y,_,M,S=this.comp.threeDElements.length;for(f=0;f<S;f+=1)if("3d"===(y=this.comp.threeDElements[f]).type){M=y.container.style;var T=this.pe.v+"px",Y="0px 0px 0px",H="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(_=y.perspectiveElem.style).perspective=T,_.webkitPerspective=T,M.transformOrigin=Y,M.mozTransformOrigin=Y,M.webkitTransformOrigin=Y,_.transform=H,_.webkitTransform=H}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var f,y,_=this._isFirstFrame;if(this.hierarchy)for(y=this.hierarchy.length,f=0;f<y;f+=1)_=this.hierarchy[f].finalTransform.mProp._mdf||_;if(_||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(f=y=this.hierarchy.length-1;f>=0;f-=1){var M=this.hierarchy[f].finalTransform.mProp;this.mat.translate(-M.p.v[0],-M.p.v[1],M.p.v[2]),this.mat.rotateX(-M.or.v[0]).rotateY(-M.or.v[1]).rotateZ(M.or.v[2]),this.mat.rotateX(-M.rx.v).rotateY(-M.ry.v).rotateZ(M.rz.v),this.mat.scale(1/M.s.v[0],1/M.s.v[1],1/M.s.v[2]),this.mat.translate(M.a.v[0],M.a.v[1],M.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var S;S=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var T=Math.sqrt(Math.pow(S[0],2)+Math.pow(S[1],2)+Math.pow(S[2],2)),Y=[S[0]/T,S[1]/T,S[2]/T],H=Math.sqrt(Y[2]*Y[2]+Y[0]*Y[0]),q=Math.atan2(Y[1],H),J=Math.atan2(Y[0],-Y[2]);this.mat.rotateY(J).rotateX(-q)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var F=!this._prevMat.equals(this.mat);if((F||this.pe._mdf)&&this.comp.threeDElements){var G,U,V;for(y=this.comp.threeDElements.length,f=0;f<y;f+=1)if("3d"===(G=this.comp.threeDElements[f]).type){if(F){var j=this.mat.toCSS();(V=G.container.style).transform=j,V.webkitTransform=j}this.pe._mdf&&((U=G.perspectiveElem.style).perspective=this.pe.v+"px",U.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(f){this.prepareProperties(f,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var f=this.globalData.getAssetsPath(this.assetData),y=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",f),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(y),y.crossOrigin="anonymous",y.src=f,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(f,y){var _=f.getBaseElement();if(_){var M=this.layers[y];if(M.ddd&&this.supports3d)this.addTo3dContainer(_,y);else if(this.threeDElements)this.addTo3dContainer(_,y);else{for(var S,T,Y=0;Y<y;)this.elements[Y]&&!0!==this.elements[Y]&&this.elements[Y].getBaseElement&&(T=this.elements[Y],S=(this.layers[Y].ddd?this.getThreeDContainerByPos(Y):T.getBaseElement())||S),Y+=1;S?M.ddd&&this.supports3d||this.layerElement.insertBefore(_,S):M.ddd&&this.supports3d||this.layerElement.appendChild(_)}}},HybridRendererBase.prototype.createShape=function(f){return this.supports3d?new HShapeElement(f,this.globalData,this):new SVGShapeElement(f,this.globalData,this)},HybridRendererBase.prototype.createText=function(f){return this.supports3d?new HTextElement(f,this.globalData,this):new SVGTextLottieElement(f,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(f){return this.camera=new HCameraElement(f,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(f){return this.supports3d?new HImageElement(f,this.globalData,this):new IImageElement(f,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(f){return this.supports3d?new HSolidElement(f,this.globalData,this):new ISolidElement(f,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(f){for(var y=0,_=this.threeDElements.length;y<_;){if(this.threeDElements[y].startPos<=f&&this.threeDElements[y].endPos>=f)return this.threeDElements[y].perspectiveElem;y+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(f,y){var _,M,S=createTag("div");styleDiv(S);var T=createTag("div");if(styleDiv(T),"3d"===y){(_=S.style).width=this.globalData.compSize.w+"px",_.height=this.globalData.compSize.h+"px";var Y="50% 50%";_.webkitTransformOrigin=Y,_.mozTransformOrigin=Y,_.transformOrigin=Y;var H="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(M=T.style).transform=H,M.webkitTransform=H}S.appendChild(T);var q={container:T,perspectiveElem:S,startPos:f,endPos:f,type:y};return this.threeDElements.push(q),q},HybridRendererBase.prototype.build3dContainers=function(){var f,y,_=this.layers.length,M="";for(f=0;f<_;f+=1)this.layers[f].ddd&&3!==this.layers[f].ty?("3d"!==M&&(M="3d",y=this.createThreeDContainer(f,"3d")),y.endPos=Math.max(y.endPos,f)):("2d"!==M&&(M="2d",y=this.createThreeDContainer(f,"2d")),y.endPos=Math.max(y.endPos,f));for(f=(_=this.threeDElements.length)-1;f>=0;f-=1)this.resizerElem.appendChild(this.threeDElements[f].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(f,y){for(var _=0,M=this.threeDElements.length;_<M;){if(y<=this.threeDElements[_].endPos){for(var S,T=this.threeDElements[_].startPos;T<y;)this.elements[T]&&this.elements[T].getBaseElement&&(S=this.elements[T].getBaseElement()),T+=1;S?this.threeDElements[_].container.insertBefore(f,S):this.threeDElements[_].container.appendChild(f);break}_+=1}},HybridRendererBase.prototype.configAnimation=function(f){var y=createTag("div"),_=this.animationItem.wrapper,M=y.style;M.width=f.w+"px",M.height=f.h+"px",this.resizerElem=y,styleDiv(y),M.transformStyle="flat",M.mozTransformStyle="flat",M.webkitTransformStyle="flat",this.renderConfig.className&&y.setAttribute("class",this.renderConfig.className),_.appendChild(y),M.overflow="hidden";var S=createNS("svg");S.setAttribute("width","1"),S.setAttribute("height","1"),styleDiv(S),this.resizerElem.appendChild(S);var T=createNS("defs");S.appendChild(T),this.data=f,this.setupGlobalData(f,S),this.globalData.defs=T,this.layers=f.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var f;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var y=this.layers?this.layers.length:0;for(f=0;f<y;f+=1)this.elements[f].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var f,y,_,M,S=this.animationItem.wrapper.offsetWidth,T=this.animationItem.wrapper.offsetHeight;this.globalData.compSize.w/this.globalData.compSize.h>S/T?(f=S/this.globalData.compSize.w,y=S/this.globalData.compSize.w,_=0,M=(T-this.globalData.compSize.h*(S/this.globalData.compSize.w))/2):(f=T/this.globalData.compSize.h,y=T/this.globalData.compSize.h,_=(S-this.globalData.compSize.w*(T/this.globalData.compSize.h))/2,M=0);var H=this.resizerElem.style;H.webkitTransform="matrix3d("+f+",0,0,0,0,"+y+",0,0,0,0,1,0,"+_+","+M+",0,1)",H.transform=H.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var f,y=this.globalData.compSize.w,_=this.globalData.compSize.h,M=this.threeDElements.length;for(f=0;f<M;f+=1){var S=this.threeDElements[f].perspectiveElem.style;S.webkitPerspective=Math.sqrt(Math.pow(y,2)+Math.pow(_,2))+"px",S.perspective=S.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(f){var y,_=f.length,M=createTag("div");for(y=0;y<_;y+=1)if(f[y].xt){var S=this.createComp(f[y],M,this.globalData.comp,null);S.initExpressions(),this.globalData.projectInterface.registerComposition(S)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(f,y){for(var _,M=0;M<y;)this.elements[M]&&this.elements[M].getBaseElement&&(_=this.elements[M].getBaseElement()),M+=1;_?this.layerElement.insertBefore(f,_):this.layerElement.appendChild(f)},HCompElement.prototype.createComp=function(f){return this.supports3d?new HCompElement(f,this.globalData,this):new SVGCompElement(f,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(f){return this.supports3d?new HCompElement(f,this.globalData,this):new SVGCompElement(f,this.globalData,this)};var Expressions=function(){var f={initExpressions:function(y){var _=0,M=[];y.renderer.compInterface=CompExpressionInterface(y.renderer),y.renderer.globalData.projectInterface.registerComposition(y.renderer),y.renderer.globalData.pushExpression=function(){_+=1},y.renderer.globalData.popExpression=function(){0==(_-=1)&&function(){var S,T=M.length;for(S=0;S<T;S+=1)M[S].release();M.length=0}()},y.renderer.globalData.registerExpressionProperty=function(S){-1===M.indexOf(S)&&M.push(S)}}};return f}();function _typeof$1(f){return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},_typeof$1(f)}function seedRandom(f,y){var M=this,S=256,T=y.pow(S,6),Y=y.pow(2,52),H=2*Y,q=255;function J(j){var K,z=j.length,ee=this,de=0,pe=ee.i=ee.j=0,Ee=ee.S=[];for(z||(j=[z++]);de<S;)Ee[de]=de++;for(de=0;de<S;de++)Ee[de]=Ee[pe=q&pe+j[de%z]+(K=Ee[de])],Ee[pe]=K;ee.g=function(je){for(var ct,Ke=0,lt=ee.i,At=ee.j,X=ee.S;je--;)ct=X[lt=q&lt+1],Ke=Ke*S+X[q&(X[lt]=X[At=q&At+ct])+(X[At]=ct)];return ee.i=lt,ee.j=At,Ke}}function F(j,K){return K.i=j.i,K.j=j.j,K.S=j.S.slice(),K}function G(j,K){var z,ee=[],de=_typeof$1(j);if(K&&"object"==de)for(z in j)try{ee.push(G(j[z],K-1))}catch{}return ee.length?ee:"string"==de?j:j+"\0"}function U(j,K){for(var z,ee=j+"",de=0;de<ee.length;)K[q&de]=q&(z^=19*K[q&de])+ee.charCodeAt(de++);return V(K)}function V(j){return String.fromCharCode.apply(0,j)}y.seedrandom=function(j,K,z){var ee=[],de=U(G((K=!0===K?{entropy:!0}:K||{}).entropy?[j,V(f)]:null===j?function(){try{var je=new Uint8Array(S);return(M.crypto||M.msCrypto).getRandomValues(je),V(je)}catch{var ct=M.navigator,Ke=ct&&ct.plugins;return[+new Date,M,Ke,M.screen,V(f)]}}():j,3),ee),pe=new J(ee),Ee=function(){for(var je=pe.g(6),ct=T,Ke=0;je<Y;)je=(je+Ke)*S,ct*=S,Ke=pe.g(1);for(;je>=H;)je/=2,ct/=2,Ke>>>=1;return(je+Ke)/ct};return Ee.int32=function(){return 0|pe.g(4)},Ee.quick=function(){return pe.g(4)/4294967296},Ee.double=Ee,U(V(pe.S),f),(K.pass||z||function(je,ct,Ke,lt){return lt&&(lt.S&&F(lt,pe),je.state=function(){return F(pe,{})}),Ke?(y.random=je,ct):je})(Ee,de,"global"in K?K.global:this==y,K.state)},U(y.random(),f)}function initialize$2(f){seedRandom([],f)}var propTypes={SHAPE:"shape"};function _typeof(f){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},_typeof(f)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null;function $bm_isInstanceOfArray(f){return f.constructor===Array||f.constructor===Float32Array}function isNumerable(f,y){return"number"===f||"boolean"===f||"string"===f||y instanceof Number}function $bm_neg(f){var y=_typeof(f);if("number"===y||"boolean"===y||f instanceof Number)return-f;if($bm_isInstanceOfArray(f)){var _,M=f.length,S=[];for(_=0;_<M;_+=1)S[_]=-f[_];return S}return f.propType?f.v:-f}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(f,y){var _=_typeof(f),M=_typeof(y);if("string"===_||"string"===M||isNumerable(_,f)&&isNumerable(M,y))return f+y;if($bm_isInstanceOfArray(f)&&isNumerable(M,y))return(f=f.slice(0))[0]+=y,f;if(isNumerable(_,f)&&$bm_isInstanceOfArray(y))return(y=y.slice(0))[0]=f+y[0],y;if($bm_isInstanceOfArray(f)&&$bm_isInstanceOfArray(y)){for(var S=0,T=f.length,Y=y.length,H=[];S<T||S<Y;)H[S]=("number"==typeof f[S]||f[S]instanceof Number)&&("number"==typeof y[S]||y[S]instanceof Number)?f[S]+y[S]:void 0===y[S]?f[S]:f[S]||y[S],S+=1;return H}return 0}var add=sum;function sub(f,y){var _=_typeof(f),M=_typeof(y);if(isNumerable(_,f)&&isNumerable(M,y))return"string"===_&&(f=parseInt(f,10)),"string"===M&&(y=parseInt(y,10)),f-y;if($bm_isInstanceOfArray(f)&&isNumerable(M,y))return(f=f.slice(0))[0]-=y,f;if(isNumerable(_,f)&&$bm_isInstanceOfArray(y))return(y=y.slice(0))[0]=f-y[0],y;if($bm_isInstanceOfArray(f)&&$bm_isInstanceOfArray(y)){for(var S=0,T=f.length,Y=y.length,H=[];S<T||S<Y;)H[S]=("number"==typeof f[S]||f[S]instanceof Number)&&("number"==typeof y[S]||y[S]instanceof Number)?f[S]-y[S]:void 0===y[S]?f[S]:f[S]||y[S],S+=1;return H}return 0}function mul(f,y){var _,M,S,T=_typeof(f),Y=_typeof(y);if(isNumerable(T,f)&&isNumerable(Y,y))return f*y;if($bm_isInstanceOfArray(f)&&isNumerable(Y,y)){for(_=createTypedArray("float32",S=f.length),M=0;M<S;M+=1)_[M]=f[M]*y;return _}if(isNumerable(T,f)&&$bm_isInstanceOfArray(y)){for(_=createTypedArray("float32",S=y.length),M=0;M<S;M+=1)_[M]=f*y[M];return _}return 0}function div(f,y){var _,M,S,T=_typeof(f),Y=_typeof(y);if(isNumerable(T,f)&&isNumerable(Y,y))return f/y;if($bm_isInstanceOfArray(f)&&isNumerable(Y,y)){for(_=createTypedArray("float32",S=f.length),M=0;M<S;M+=1)_[M]=f[M]/y;return _}if(isNumerable(T,f)&&$bm_isInstanceOfArray(y)){for(_=createTypedArray("float32",S=y.length),M=0;M<S;M+=1)_[M]=f/y[M];return _}return 0}function mod(f,y){return"string"==typeof f&&(f=parseInt(f,10)),"string"==typeof y&&(y=parseInt(y,10)),f%y}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(f,y,_){if(y>_){var M=_;_=y,y=M}return Math.min(Math.max(f,y),_)}function radiansToDegrees(f){return f/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(f){return f*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(f,y){if("number"==typeof f||f instanceof Number)return Math.abs(f-(y=y||0));var _;y||(y=helperLengthArray);var M=Math.min(f.length,y.length),S=0;for(_=0;_<M;_+=1)S+=Math.pow(y[_]-f[_],2);return Math.sqrt(S)}function normalize(f){return div(f,length(f))}function rgbToHsl(f){var y,_,M=f[0],S=f[1],T=f[2],Y=Math.max(M,S,T),H=Math.min(M,S,T),q=(Y+H)/2;if(Y===H)y=0,_=0;else{var J=Y-H;switch(_=q>.5?J/(2-Y-H):J/(Y+H),Y){case M:y=(S-T)/J+(S<T?6:0);break;case S:y=(T-M)/J+2;break;case T:y=(M-S)/J+4}y/=6}return[y,_,q,f[3]]}function hue2rgb(f,y,_){return _<0&&(_+=1),_>1&&(_-=1),_<1/6?f+6*(y-f)*_:_<.5?y:_<2/3?f+(y-f)*(2/3-_)*6:f}function hslToRgb(f){var y,_,M,S=f[0],T=f[1],Y=f[2];if(0===T)y=Y,M=Y,_=Y;else{var H=Y<.5?Y*(1+T):Y+T-Y*T,q=2*Y-H;y=hue2rgb(q,H,S+1/3),_=hue2rgb(q,H,S),M=hue2rgb(q,H,S-1/3)}return[y,_,M,f[3]]}function linear(f,y,_,M,S){if(void 0!==M&&void 0!==S||(M=y,S=_,y=0,_=1),_<y){var T=_;_=y,y=T}if(f<=y)return M;if(f>=_)return S;var Y,H=_===y?0:(f-y)/(_-y);if(!M.length)return M+(S-M)*H;var q=M.length,J=createTypedArray("float32",q);for(Y=0;Y<q;Y+=1)J[Y]=M[Y]+(S[Y]-M[Y])*H;return J}function random(f,y){if(void 0===y&&(void 0===f?(f=0,y=1):(y=f,f=void 0)),y.length){var _,M=y.length;f||(f=createTypedArray("float32",M));var S=createTypedArray("float32",M),T=BMMath.random();for(_=0;_<M;_+=1)S[_]=f[_]+T*(y[_]-f[_]);return S}return void 0===f&&(f=0),f+BMMath.random()*(y-f)}function createPath(f,y,_,M){var S,T=f.length,Y=shapePool.newElement();Y.setPathData(!!M,T);var H,q,J=[0,0];for(S=0;S<T;S+=1)Y.setTripleAt(f[S][0],f[S][1],(q=_&&_[S]?_[S]:J)[0]+f[S][0],q[1]+f[S][1],(H=y&&y[S]?y[S]:J)[0]+f[S][0],H[1]+f[S][1],S,!0);return Y}function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(f,y){var _,M,S=this.pv.length?this.pv.length:1,T=createTypedArray("float32",S),Y=Math.floor(5*time);for(_=0,M=0;_<Y;){for(M=0;M<S;M+=1)T[M]+=-y+2*y*BMMath.random();_+=1}var H=5*time,q=H-Math.floor(H),J=createTypedArray("float32",S);if(S>1){for(M=0;M<S;M+=1)J[M]=this.pv[M]+T[M]+(-y+2*y*BMMath.random())*q;return J}return this.pv+T[0]+(-y+2*y*BMMath.random())*q}.bind(this);function loopInDuration(f,y){return loopIn(f,y,!0)}function loopOutDuration(f,y){return loopOut(f,y,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(f,y){var _=[y[0]-f[0],y[1]-f[1],y[2]-f[2]],M=Math.atan2(_[0],Math.sqrt(_[1]*_[1]+_[2]*_[2]))/degToRads;return[-Math.atan2(_[1],_[2])/degToRads,M,0]}function easeOut(f,y,_,M,S){return applyEase(easeOutBez,f,y,_,M,S)}function easeIn(f,y,_,M,S){return applyEase(easeInBez,f,y,_,M,S)}function ease(f,y,_,M,S){return applyEase(easeInOutBez,f,y,_,M,S)}function applyEase(f,y,_,M,S,T){void 0===S?(S=_,T=M):y=(y-_)/(M-_),y>1?y=1:y<0&&(y=0);var Y=f(y);if($bm_isInstanceOfArray(S)){var H,q=S.length,J=createTypedArray("float32",q);for(H=0;H<q;H+=1)J[H]=(T[H]-S[H])*Y+S[H];return J}return(T-S)*Y+S}function nearestKey(f){var y,_,M,S=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(_=-1,(f*=elem.comp.globalData.frameRate)<data.k[0].t)_=1,M=data.k[0].t;else{for(y=0;y<S-1;y+=1){if(f===data.k[y].t){_=y+1,M=data.k[y].t;break}if(f>data.k[y].t&&f<data.k[y+1].t){f-data.k[y].t>data.k[y+1].t-f?(_=y+2,M=data.k[y+1].t):(_=y+1,M=data.k[y].t);break}}-1===_&&(_=y+1,M=data.k[y].t)}else _=0,M=0;var T={};return T.index=_,T.time=M/elem.comp.globalData.frameRate,T}function key(f){var y,_,M;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+f);y={time:data.k[f-=1].t/elem.comp.globalData.frameRate,value:[]};var S=Object.prototype.hasOwnProperty.call(data.k[f],"s")?data.k[f].s:data.k[f-1].e;for(M=S.length,_=0;_<M;_+=1)y[_]=S[_],y.value[_]=S[_];return y}function framesToTime(f,y){return y||(y=elem.comp.globalData.frameRate),f/y}function timeToFrames(f,y){return f||0===f||(f=time),y||(y=elem.comp.globalData.frameRate),f*y}function seedRandom(f){BMMath.seedrandom(randSeed+f)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(f,y){return"string"==typeof value?void 0===y?value.substring(f):value.substring(f,y):""}function substr(f,y){return"string"==typeof value?void 0===y?value.substr(f):value.substr(f,y):""}function posterizeTime(f){time=0===f?0:Math.floor(time*f)/f,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(f){return value=f,this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisComp=elem.comp.compInterface,toWorld=(thisLayer=elem.layerInterface).toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath],ob}(),expressionHelpers={searchExpressions:function(f,y,_){y.x&&(_.k=!0,_.x=!0,_.initiateExpression=ExpressionManager.initiateExpression,_.effectsSequence.push(_.initiateExpression(f,y,_).bind(_)))},getSpeedAtTime:function(f){var y=this.getValueAtTime(f),_=this.getValueAtTime(f+-.01),M=0;if(y.length){var S;for(S=0;S<y.length;S+=1)M+=Math.pow(_[S]-y[S],2);M=100*Math.sqrt(M)}else M=0;return M},getVelocityAtTime:function(f){if(void 0!==this.vel)return this.vel;var y,_,M=-.001,S=this.getValueAtTime(f),T=this.getValueAtTime(f+M);if(S.length)for(y=createTypedArray("float32",S.length),_=0;_<S.length;_+=1)y[_]=(T[_]-S[_])/M;else y=(T-S)/M;return y},getValueAtTime:function(f){return f*=this.elem.globalData.frameRate,(f-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<f?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(f,this._cachingAtTime),this._cachingAtTime.lastFrame=f),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(f){this.propertyGroup=f}};function addPropertyDecorator(){function f(G,U,V){if(!this.k||!this.keyframes)return this.pv;G=G?G.toLowerCase():"";var j,K,z,ee,de,pe=this.comp.renderedFrame,Ee=this.keyframes,je=Ee[Ee.length-1].t;if(pe<=je)return this.pv;if(V?K=je-(j=U?Math.abs(je-this.elem.comp.globalData.frameRate*U):Math.max(0,je-this.elem.data.ip)):((!U||U>Ee.length-1)&&(U=Ee.length-1),j=je-(K=Ee[Ee.length-1-U].t)),"pingpong"===G){if(Math.floor((pe-K)/j)%2!=0)return this.getValueAtTime((j-(pe-K)%j+K)/this.comp.globalData.frameRate,0)}else{if("offset"===G){var ct=this.getValueAtTime(K/this.comp.globalData.frameRate,0),Ke=this.getValueAtTime(je/this.comp.globalData.frameRate,0),lt=this.getValueAtTime(((pe-K)%j+K)/this.comp.globalData.frameRate,0),At=Math.floor((pe-K)/j);if(this.pv.length){for(ee=(de=new Array(ct.length)).length,z=0;z<ee;z+=1)de[z]=(Ke[z]-ct[z])*At+lt[z];return de}return(Ke-ct)*At+lt}if("continue"===G){var X=this.getValueAtTime(je/this.comp.globalData.frameRate,0),ze=this.getValueAtTime((je-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ee=(de=new Array(X.length)).length,z=0;z<ee;z+=1)de[z]=X[z]+(pe-je)/this.comp.globalData.frameRate*(X[z]-ze[z])/5e-4;return de}return X+(pe-je)/.001*(X-ze)}}return this.getValueAtTime(((pe-K)%j+K)/this.comp.globalData.frameRate,0)}function y(G,U,V){if(!this.k)return this.pv;G=G?G.toLowerCase():"";var j,K,z,ee,de,pe=this.comp.renderedFrame,Ee=this.keyframes,je=Ee[0].t;if(pe>=je)return this.pv;if(V?K=je+(j=U?Math.abs(this.elem.comp.globalData.frameRate*U):Math.max(0,this.elem.data.op-je)):((!U||U>Ee.length-1)&&(U=Ee.length-1),j=(K=Ee[U].t)-je),"pingpong"===G){if(Math.floor((je-pe)/j)%2==0)return this.getValueAtTime(((je-pe)%j+je)/this.comp.globalData.frameRate,0)}else{if("offset"===G){var ct=this.getValueAtTime(je/this.comp.globalData.frameRate,0),Ke=this.getValueAtTime(K/this.comp.globalData.frameRate,0),lt=this.getValueAtTime((j-(je-pe)%j+je)/this.comp.globalData.frameRate,0),At=Math.floor((je-pe)/j)+1;if(this.pv.length){for(ee=(de=new Array(ct.length)).length,z=0;z<ee;z+=1)de[z]=lt[z]-(Ke[z]-ct[z])*At;return de}return lt-(Ke-ct)*At}if("continue"===G){var X=this.getValueAtTime(je/this.comp.globalData.frameRate,0),ze=this.getValueAtTime((je+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ee=(de=new Array(X.length)).length,z=0;z<ee;z+=1)de[z]=X[z]+(X[z]-ze[z])*(je-pe)/.001;return de}return X+(X-ze)*(je-pe)/.001}}return this.getValueAtTime((j-((je-pe)%j+je))/this.comp.globalData.frameRate,0)}function _(G,U){if(!this.k)return this.pv;if(G=.5*(G||.4),(U=Math.floor(U||5))<=1)return this.pv;var V,j,K=this.comp.renderedFrame/this.comp.globalData.frameRate,z=K-G,ee=U>1?(K+G-z)/(U-1):1,de=0,pe=0;for(V=this.pv.length?createTypedArray("float32",this.pv.length):0;de<U;){if(j=this.getValueAtTime(z+de*ee),this.pv.length)for(pe=0;pe<this.pv.length;pe+=1)V[pe]+=j[pe];else V+=j;de+=1}if(this.pv.length)for(pe=0;pe<this.pv.length;pe+=1)V[pe]/=U;else V/=U;return V}function M(G){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var U=this._transformCachingAtTime.v;if(U.cloneFromProps(this.pre.props),this.appliedTransformations<1){var V=this.a.getValueAtTime(G);U.translate(-V[0]*this.a.mult,-V[1]*this.a.mult,V[2]*this.a.mult)}if(this.appliedTransformations<2){var j=this.s.getValueAtTime(G);U.scale(j[0]*this.s.mult,j[1]*this.s.mult,j[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var K=this.sk.getValueAtTime(G),z=this.sa.getValueAtTime(G);U.skewFromAxis(-K*this.sk.mult,z*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var ee=this.r.getValueAtTime(G);U.rotate(-ee*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var de=this.rz.getValueAtTime(G),pe=this.ry.getValueAtTime(G),Ee=this.rx.getValueAtTime(G),je=this.or.getValueAtTime(G);U.rotateZ(-de*this.rz.mult).rotateY(pe*this.ry.mult).rotateX(Ee*this.rx.mult).rotateZ(-je[2]*this.or.mult).rotateY(je[1]*this.or.mult).rotateX(je[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var ct=this.px.getValueAtTime(G),Ke=this.py.getValueAtTime(G);if(this.data.p.z){var lt=this.pz.getValueAtTime(G);U.translate(ct*this.px.mult,Ke*this.py.mult,-lt*this.pz.mult)}else U.translate(ct*this.px.mult,Ke*this.py.mult,0)}else{var At=this.p.getValueAtTime(G);U.translate(At[0]*this.p.mult,At[1]*this.p.mult,-At[2]*this.p.mult)}return U}function S(){return this.v.clone(new Matrix)}var T=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(G,U,V){var j=T(G,U,V);return j.getValueAtTime=j.dynamicProperties.length?M.bind(j):S.bind(j),j.setGroupProperty=expressionHelpers.setGroupProperty,j};var Y=PropertyFactory.getProp;PropertyFactory.getProp=function(G,U,V,j,K){var z=Y(G,U,V,j,K);z.getValueAtTime=z.kf?expressionHelpers.getValueAtTime.bind(z):expressionHelpers.getStaticValueAtTime.bind(z),z.setGroupProperty=expressionHelpers.setGroupProperty,z.loopOut=f,z.loopIn=y,z.smooth=_,z.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(z),z.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(z),z.numKeys=1===U.a?U.k.length:0,z.propertyIndex=U.ix;var ee=0;return 0!==V&&(ee=createTypedArray("float32",1===U.a?U.k[0].s.length:U.k.length)),z._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:ee},expressionHelpers.searchExpressions(G,U,z),z.k&&K.addDynamicProperty(z),z};var H=ShapePropertyFactory.getConstructorFunction(),q=ShapePropertyFactory.getKeyframedConstructorFunction();function J(){}J.prototype={vertices:function(G,U){this.k&&this.getValue();var V,j=this.v;void 0!==U&&(j=this.getValueAtTime(U,0));var K=j._length,z=j[G],ee=j.v,de=createSizedArray(K);for(V=0;V<K;V+=1)de[V]="i"===G||"o"===G?[z[V][0]-ee[V][0],z[V][1]-ee[V][1]]:[z[V][0],z[V][1]];return de},points:function(G){return this.vertices("v",G)},inTangents:function(G){return this.vertices("i",G)},outTangents:function(G){return this.vertices("o",G)},isClosed:function(){return this.v.c},pointOnPath:function(G,U){var V=this.v;void 0!==U&&(V=this.getValueAtTime(U,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(V));for(var j,K=this._segmentsLength,z=K.lengths,ee=K.totalLength*G,de=0,pe=z.length,Ee=0;de<pe;){if(Ee+z[de].addedLength>ee){var ct=V.c&&de===pe-1?0:de+1;j=bez.getPointInSegment(V.v[de],V.v[ct],V.o[de],V.i[ct],(ee-Ee)/z[de].addedLength,z[de]);break}Ee+=z[de].addedLength,de+=1}return j||(j=V.c?[V.v[0][0],V.v[0][1]]:[V.v[V._length-1][0],V.v[V._length-1][1]]),j},vectorOnPath:function(G,U,V){1==G?G=this.v.c:0==G&&(G=.999);var j=this.pointOnPath(G,U),K=this.pointOnPath(G+.001,U),z=K[0]-j[0],ee=K[1]-j[1],de=Math.sqrt(Math.pow(z,2)+Math.pow(ee,2));return 0===de?[0,0]:"tangent"===V?[z/de,ee/de]:[-ee/de,z/de]},tangentOnPath:function(G,U){return this.vectorOnPath(G,U,"tangent")},normalOnPath:function(G,U){return this.vectorOnPath(G,U,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([J],H),extendPrototype([J],q),q.prototype.getValueAtTime=function(G){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),G*=this.elem.globalData.frameRate,(G-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<G?this._caching.lastIndex:0,this._cachingAtTime.lastTime=G,this.interpolateShape(G,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},q.prototype.initiateExpression=ExpressionManager.initiateExpression;var F=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(G,U,V,j,K){var z=F(G,U,V,j,K);return z.propertyIndex=U.ix,z.lock=!1,3===V?expressionHelpers.searchExpressions(G,U.pt,z):4===V&&expressionHelpers.searchExpressions(G,U.ks,z),z.k&&G.addDynamicProperty(z),z}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(f,y){var _=this.calculateExpression(y);if(f.t!==_){var M={};return this.copyData(M,f),M.t=_.toString(),M.__complete=!1,M}return f},TextProperty.prototype.searchProperty=function(){var f=this.searchKeyframes(),y=this.searchExpressions();return this.kf=f||y,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}function SVGTintFilter(f,y,_,M,S){this.filterManager=y;var T=createNS("feColorMatrix");T.setAttribute("type","matrix"),T.setAttribute("color-interpolation-filters","linearRGB"),T.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),T.setAttribute("result",M+"_tint_1"),f.appendChild(T),(T=createNS("feColorMatrix")).setAttribute("type","matrix"),T.setAttribute("color-interpolation-filters","sRGB"),T.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),T.setAttribute("result",M+"_tint_2"),f.appendChild(T),this.matrixFilter=T;var Y=this.createMergeNode(M,[S,M+"_tint_1",M+"_tint_2"]);f.appendChild(Y)}function SVGFillFilter(f,y,_,M){this.filterManager=y;var S=createNS("feColorMatrix");S.setAttribute("type","matrix"),S.setAttribute("color-interpolation-filters","sRGB"),S.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),S.setAttribute("result",M),f.appendChild(S),this.matrixFilter=S}function SVGStrokeEffect(f,y,_){this.initialized=!1,this.filterManager=y,this.elem=_,this.paths=[]}function SVGTritoneFilter(f,y,_,M){this.filterManager=y;var S=createNS("feColorMatrix");S.setAttribute("type","matrix"),S.setAttribute("color-interpolation-filters","linearRGB"),S.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),f.appendChild(S);var T=createNS("feComponentTransfer");T.setAttribute("color-interpolation-filters","sRGB"),T.setAttribute("result",M),this.matrixFilter=T;var Y=createNS("feFuncR");Y.setAttribute("type","table"),T.appendChild(Y),this.feFuncR=Y;var H=createNS("feFuncG");H.setAttribute("type","table"),T.appendChild(H),this.feFuncG=H;var q=createNS("feFuncB");q.setAttribute("type","table"),T.appendChild(q),this.feFuncB=q,f.appendChild(T)}function SVGProLevelsFilter(f,y,_,M){this.filterManager=y;var S=this.filterManager.effectElements,T=createNS("feComponentTransfer");(S[10].p.k||0!==S[10].p.v||S[11].p.k||1!==S[11].p.v||S[12].p.k||1!==S[12].p.v||S[13].p.k||0!==S[13].p.v||S[14].p.k||1!==S[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",T)),(S[17].p.k||0!==S[17].p.v||S[18].p.k||1!==S[18].p.v||S[19].p.k||1!==S[19].p.v||S[20].p.k||0!==S[20].p.v||S[21].p.k||1!==S[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",T)),(S[24].p.k||0!==S[24].p.v||S[25].p.k||1!==S[25].p.v||S[26].p.k||1!==S[26].p.v||S[27].p.k||0!==S[27].p.v||S[28].p.k||1!==S[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",T)),(S[31].p.k||0!==S[31].p.v||S[32].p.k||1!==S[32].p.v||S[33].p.k||1!==S[33].p.v||S[34].p.k||0!==S[34].p.v||S[35].p.k||1!==S[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",T)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(T.setAttribute("color-interpolation-filters","sRGB"),f.appendChild(T)),(S[3].p.k||0!==S[3].p.v||S[4].p.k||1!==S[4].p.v||S[5].p.k||1!==S[5].p.v||S[6].p.k||0!==S[6].p.v||S[7].p.k||1!==S[7].p.v)&&((T=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),T.setAttribute("result",M),f.appendChild(T),this.feFuncRComposed=this.createFeFunc("feFuncR",T),this.feFuncGComposed=this.createFeFunc("feFuncG",T),this.feFuncBComposed=this.createFeFunc("feFuncB",T))}function SVGDropShadowEffect(f,y,_,M,S){var T=y.container.globalData.renderConfig.filterSize,Y=y.data.fs||T;f.setAttribute("x",Y.x||T.x),f.setAttribute("y",Y.y||T.y),f.setAttribute("width",Y.width||T.width),f.setAttribute("height",Y.height||T.height),this.filterManager=y;var H=createNS("feGaussianBlur");H.setAttribute("in","SourceAlpha"),H.setAttribute("result",M+"_drop_shadow_1"),H.setAttribute("stdDeviation","0"),this.feGaussianBlur=H,f.appendChild(H);var q=createNS("feOffset");q.setAttribute("dx","25"),q.setAttribute("dy","0"),q.setAttribute("in",M+"_drop_shadow_1"),q.setAttribute("result",M+"_drop_shadow_2"),this.feOffset=q,f.appendChild(q);var J=createNS("feFlood");J.setAttribute("flood-color","#00ff00"),J.setAttribute("flood-opacity","1"),J.setAttribute("result",M+"_drop_shadow_3"),this.feFlood=J,f.appendChild(J);var F=createNS("feComposite");F.setAttribute("in",M+"_drop_shadow_3"),F.setAttribute("in2",M+"_drop_shadow_2"),F.setAttribute("operator","in"),F.setAttribute("result",M+"_drop_shadow_4"),f.appendChild(F);var G=this.createMergeNode(M,[M+"_drop_shadow_4",S]);f.appendChild(G)}SVGComposableEffect.prototype={createMergeNode:function(f,y){var _,M,S=createNS("feMerge");for(S.setAttribute("result",f),M=0;M<y.length;M+=1)(_=createNS("feMergeNode")).setAttribute("in",y[M]),S.appendChild(_),S.appendChild(_);return S}},extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(f){if(f||this.filterManager._mdf){var y=this.filterManager.effectElements[0].p.v,_=this.filterManager.effectElements[1].p.v;this.matrixFilter.setAttribute("values",_[0]-y[0]+" 0 0 0 "+y[0]+" "+(_[1]-y[1])+" 0 0 0 "+y[1]+" "+(_[2]-y[2])+" 0 0 0 "+y[2]+" 0 0 0 "+this.filterManager.effectElements[2].p.v/100+" 0")}},SVGFillFilter.prototype.renderFrame=function(f){if(f||this.filterManager._mdf){var y=this.filterManager.effectElements[2].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+y[0]+" 0 0 0 0 "+y[1]+" 0 0 0 0 "+y[2]+" 0 0 0 "+this.filterManager.effectElements[6].p.v+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var f,y,_,M,S=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(M=this.elem.maskManager.masksProperties.length,_=0):M=1+(_=this.filterManager.effectElements[0].p.v-1),(y=createNS("g")).setAttribute("fill","none"),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-dashoffset",1);_<M;_+=1)f=createNS("path"),y.appendChild(f),this.paths.push({p:f,m:_});if(3===this.filterManager.effectElements[10].p.v){var T=createNS("mask"),Y=createElementID();T.setAttribute("id",Y),T.setAttribute("mask-type","alpha"),T.appendChild(y),this.elem.globalData.defs.appendChild(T);var H=createNS("g");for(H.setAttribute("mask","url("+getLocationHref()+"#"+Y+")");S[0];)H.appendChild(S[0]);this.elem.layerElement.appendChild(H),this.masker=T,y.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(S=this.elem.layerElement.children||this.elem.layerElement.childNodes;S.length;)this.elem.layerElement.removeChild(S[0]);this.elem.layerElement.appendChild(y),this.elem.layerElement.removeAttribute("mask"),y.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=y},SVGStrokeEffect.prototype.renderFrame=function(f){var y;this.initialized||this.initialize();var _,M,S=this.paths.length;for(y=0;y<S;y+=1)if(-1!==this.paths[y].m&&(_=this.elem.maskManager.viewData[this.paths[y].m],M=this.paths[y].p,(f||this.filterManager._mdf||_.prop._mdf)&&M.setAttribute("d",_.lastPath),f||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||_.prop._mdf)){var T;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var Y=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),H=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),q=M.getTotalLength();T="0 0 0 "+q*Y+" ";var J,U=Math.floor(q*(H-Y)/(1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01));for(J=0;J<U;J+=1)T+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";T+="0 "+10*q+" 0 0"}else T="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;M.setAttribute("stroke-dasharray",T)}if((f||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(f||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(f||this.filterManager.effectElements[3].p._mdf)){var V=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*V[0])+","+bmFloor(255*V[1])+","+bmFloor(255*V[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(f){if(f||this.filterManager._mdf){var y=this.filterManager.effectElements[0].p.v,_=this.filterManager.effectElements[1].p.v,M=this.filterManager.effectElements[2].p.v,T=M[1]+" "+_[1]+" "+y[1],Y=M[2]+" "+_[2]+" "+y[2];this.feFuncR.setAttribute("tableValues",M[0]+" "+_[0]+" "+y[0]),this.feFuncG.setAttribute("tableValues",T),this.feFuncB.setAttribute("tableValues",Y)}},SVGProLevelsFilter.prototype.createFeFunc=function(f,y){var _=createNS(f);return _.setAttribute("type","table"),y.appendChild(_),_},SVGProLevelsFilter.prototype.getTableValue=function(f,y,_,M,S){for(var T,Y,H=0,q=Math.min(f,y),J=Math.max(f,y),F=Array.call(null,{length:256}),G=0,U=S-M,V=y-f;H<=256;)Y=(T=H/256)<=q?V<0?S:M:T>=J?V<0?M:S:M+U*Math.pow((T-f)/V,1/_),F[G]=Y,G+=1,H+=256/255;return F.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(f){if(f||this.filterManager._mdf){var y,_=this.filterManager.effectElements;this.feFuncRComposed&&(f||_[3].p._mdf||_[4].p._mdf||_[5].p._mdf||_[6].p._mdf||_[7].p._mdf)&&(y=this.getTableValue(_[3].p.v,_[4].p.v,_[5].p.v,_[6].p.v,_[7].p.v),this.feFuncRComposed.setAttribute("tableValues",y),this.feFuncGComposed.setAttribute("tableValues",y),this.feFuncBComposed.setAttribute("tableValues",y)),this.feFuncR&&(f||_[10].p._mdf||_[11].p._mdf||_[12].p._mdf||_[13].p._mdf||_[14].p._mdf)&&(y=this.getTableValue(_[10].p.v,_[11].p.v,_[12].p.v,_[13].p.v,_[14].p.v),this.feFuncR.setAttribute("tableValues",y)),this.feFuncG&&(f||_[17].p._mdf||_[18].p._mdf||_[19].p._mdf||_[20].p._mdf||_[21].p._mdf)&&(y=this.getTableValue(_[17].p.v,_[18].p.v,_[19].p.v,_[20].p.v,_[21].p.v),this.feFuncG.setAttribute("tableValues",y)),this.feFuncB&&(f||_[24].p._mdf||_[25].p._mdf||_[26].p._mdf||_[27].p._mdf||_[28].p._mdf)&&(y=this.getTableValue(_[24].p.v,_[25].p.v,_[26].p.v,_[27].p.v,_[28].p.v),this.feFuncB.setAttribute("tableValues",y)),this.feFuncA&&(f||_[31].p._mdf||_[32].p._mdf||_[33].p._mdf||_[34].p._mdf||_[35].p._mdf)&&(y=this.getTableValue(_[31].p.v,_[32].p.v,_[33].p.v,_[34].p.v,_[35].p.v),this.feFuncA.setAttribute("tableValues",y))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(f){if(f||this.filterManager._mdf){if((f||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),f||this.filterManager.effectElements[0].p._mdf){var y=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*y[0]),Math.round(255*y[1]),Math.round(255*y[2])))}if((f||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),f||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var _=this.filterManager.effectElements[3].p.v,M=(this.filterManager.effectElements[2].p.v-90)*degToRads,S=_*Math.cos(M),T=_*Math.sin(M);this.feOffset.setAttribute("dx",S),this.feOffset.setAttribute("dy",T)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(f,y,_){this.initialized=!1,this.filterManager=y,this.filterElem=f,this.elem=_,_.matteElement=createNS("g"),_.matteElement.appendChild(_.layerElement),_.matteElement.appendChild(_.transformedElement),_.baseElement=_.matteElement}function SVGGaussianBlurEffect(f,y,_,M){f.setAttribute("x","-100%"),f.setAttribute("y","-100%"),f.setAttribute("width","300%"),f.setAttribute("height","300%"),this.filterManager=y;var S=createNS("feGaussianBlur");S.setAttribute("result",M),f.appendChild(S),this.feGaussianBlur=S}return SVGMatte3Effect.prototype.findSymbol=function(f){for(var y=0,_=_svgMatteSymbols.length;y<_;){if(_svgMatteSymbols[y]===f)return _svgMatteSymbols[y];y+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(f,y){var _=f.layerElement.parentNode;if(_){for(var M,S=_.children,T=0,Y=S.length;T<Y&&S[T]!==f.layerElement;)T+=1;T<=Y-2&&(M=S[T+1]);var H=createNS("use");H.setAttribute("href","#"+y),M?_.insertBefore(H,M):_.appendChild(H)}},SVGMatte3Effect.prototype.setElementAsMask=function(f,y){if(!this.findSymbol(y)){var _=createElementID(),M=createNS("mask");M.setAttribute("id",y.layerId),M.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(y);var S=f.globalData.defs;S.appendChild(M);var T=createNS("symbol");T.setAttribute("id",_),this.replaceInParent(y,_),T.appendChild(y.layerElement),S.appendChild(T);var Y=createNS("use");Y.setAttribute("href","#"+_),M.appendChild(Y),y.data.hd=!1,y.show()}f.setMatte(y.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var f=this.filterManager.effectElements[0].p.v,y=this.elem.comp.elements,_=0,M=y.length;_<M;)y[_]&&y[_].data.ind===f&&this.setElementAsMask(this.elem,y[_]),_+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(f){if(f||this.filterManager._mdf){var y=.3*this.filterManager.effectElements[0].p.v,_=this.filterManager.effectElements[1].p.v;this.feGaussianBlur.setAttribute("stdDeviation",(3==_?0:y)+" "+(2==_?0:y)),this.feGaussianBlur.setAttribute("edgeMode",1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate")}},registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),setExpressionsPlugin(Expressions),initialize$1(),initialize(),registerEffect(20,SVGTintFilter,!0),registerEffect(21,SVGFillFilter,!0),registerEffect(22,SVGStrokeEffect,!1),registerEffect(23,SVGTritoneFilter,!0),registerEffect(24,SVGProLevelsFilter,!0),registerEffect(25,SVGDropShadowEffect,!0),registerEffect(28,SVGMatte3Effect,!1),registerEffect(29,SVGGaussianBlurEffect,!0),lottie},module.exports=y())},5861:(f,y,_)=>{"use strict";function M(T,Y,H,q,J,F,G){try{var U=T[F](G),V=U.value}catch(j){return void H(j)}U.done?Y(V):Promise.resolve(V).then(q,J)}function S(T){return function(){var Y=this,H=arguments;return new Promise(function(q,J){var F=T.apply(Y,H);function G(V){M(F,q,J,G,U,"next",V)}function U(V){M(F,q,J,G,U,"throw",V)}G(void 0)})}}_.d(y,{Z:()=>S})}},f=>{f(f.s=6540)}]);